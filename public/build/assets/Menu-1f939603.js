import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{o,k as l,n as t,N as d,p as c,L as b,q as V,M as i,O as w,j as I,H as m,w as j,F as C}from"./index.es-c4852431.js";import{_ as D}from"./ShopScriptEditor-805763d9.js";import{S as B}from"./StoryList-b1293370.js";import"./ParametrizedTextArea-d4154d5d.js";import"./v4-4a60fe23.js";import"./SlugForm-e32e52a8.js";import"./BotMediaList-9b4db56f.js";import"./Pagination-b758f7ed.js";/* empty css                                                   */import"./vue3-json-editor.esm.prod-a2876a2f.js";/* empty css                                                                  */const L={props:["item","defaultImage","defaultText","route","disabled"],methods:{goTo(n){this.$router.push({name:n})}}},P=["disabled"],z={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},O={class:"img-fluid menu-item-img",alt:""},N={class:"my-2"},E={key:0,style:{"font-size":"12px"}},W=t("i",{class:"fa-solid fa-lock"},null,-1);function A(n,e,s,r,f,_){var p,h,g;const y=w("lazy");return(p=s.item)!=null&&p.is_visible,o(),l("button",{key:0,type:"button",onClick:e[0]||(e[0]=v=>_.goTo(s.route)),style:{"min-height":"250px"},disabled:s.disabled||!1,class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",z,[d(t("img",O,null,512),[[y,"/images/shop-v2-2/"+(((h=s.item)==null?void 0:h.image_url)||s.defaultImage)]]),t("p",N,[c(b(((g=s.item)==null?void 0:g.title)||s.defaultText)+" ",1),V(n.$slots,"post-text")]),s.disabled?(o(),l("span",E,[W,c(" закрыто")])):i("",!0)])],8,P)}const u=$(L,[["render",A]]);const F={key:0,class:"container py-3"},H={key:0,class:"alert alert-danger mb-3"},q=["innerHTML"],R=t("h6",{class:"opacity-75 mb-3 text-center"},[t("i",{class:"fa-solid fa-house-chimney mr-2 text-primary"}),c("Доступные сервисы")],-1),U={key:3,class:"row g-2"},G={class:"col-12"},J={key:0,class:"alert alert-light",role:"alert"},K=t("span",{class:"text-primary fw-bold"},"не работаем",-1),Q=t("span",{"data-bs-toggle":"modal","data-bs-target":"#schedule-list-display",class:"text-primary fw-bold text-decoration-underline cursor-pointer"},"графиком работы",-1),X={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},Y={class:"col"},Z={key:0,class:"col"},tt={class:"col"},et={class:"col"},st={key:0,class:"badge bg-primary"},ot={class:"col"},it={key:1,class:"col"},lt={class:"col"},at=t("div",{class:"divider my-3"}," Дополнительно",-1),nt=t("i",{class:"fa fa-dot-circle"},null,-1),dt=t("i",{class:"fa fa-people-carry"},null,-1),rt=t("h6",{class:"opacity-75 my-3 text-center"},[t("i",{class:"fa-solid fa-house-lock mr-2 text-primary"}),c("Управление магазином")],-1),ct={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},mt={class:"col"},ut={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},pt={class:"img-fluid",alt:""},ht=t("p",{class:"my-2"},"Счет на оплату",-1),gt={class:"col"},bt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},_t={class:"img-fluid",alt:""},yt=t("p",{class:"my-2"},"Управление товарами",-1),ft={key:0,class:"col"},vt={type:"button","data-bs-toggle":"modal","data-bs-target":"#script-setting-editor",style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},wt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},kt={class:"img-fluid",alt:""},xt=t("p",{class:"my-2"},"Настройка магазина",-1),Mt={class:"col"},St={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Tt={style:{"max-width":"150px"},class:"img-fluid",alt:""},Ct=t("p",{class:"my-2"},"Работа с партнерами",-1),$t={class:"col"},Vt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},It={class:"img-fluid",alt:""},jt=t("p",{class:"my-2"},"Управление историями",-1),Dt={class:"col"},Bt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Lt={class:"menu-item-img img-fluid",alt:""},Pt=t("p",{class:"my-2"},"Управление столиками",-1),zt=t("h6",{class:"opacity-75 my-3 text-center"},[t("i",{class:"fa-solid fa-house-lock mr-2 text-primary"}),c("Другие админ сервисы")],-1),Ot={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},Nt={class:"col"},Et={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Wt={style:{"max-width":"150px"},class:"img-fluid",alt:""},At=t("p",{class:"my-2"},"Управление клиентами",-1),Ft={class:"col"},Ht={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},qt={style:{"max-width":"150px"},class:"img-fluid",alt:""},Rt=t("p",{class:"my-2"},"UTM-метки",-1),Ut={class:"col"},Gt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Jt={style:{"max-width":"150px"},class:"img-fluid",alt:""},Kt=t("p",{class:"my-2"},"Управление рассылками",-1),Qt={class:"col"},Xt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Yt={style:{"max-width":"150px"},class:"img-fluid",alt:""},Zt=t("p",{class:"my-2"},"Управление заказами",-1),te={class:"col"},ee={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},se={style:{"max-width":"150px"},class:"img-fluid",alt:""},oe=t("p",{class:"my-2"},"Управление промокодами",-1),ie={class:"col"},le={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},ae={style:{"max-width":"150px"},class:"img-fluid",alt:""},ne=t("p",{class:"my-2"},"Статистика",-1),de={key:1,class:"menu-preloader"},re=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"spinner-grow bg-primary",style:{width:"3rem",height:"3rem"},role:"status"},[t("span",{class:"visually-hidden"},"Loading...")]),t("p",{class:"py-2"},"Загружаем...")],-1),ce=[re],me={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},ue=t("i",{class:"fa-brands fa-telegram"},null,-1),pe={class:"modal fade",id:"script-setting-editor",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},he={class:"modal-dialog modal-fullscreen"},ge={class:"modal-content"},be=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_e={class:"modal-body"},ye={data(){return{loadScriptData:!1,stories:[],script_data:{is_disabled:!0,wheel_of_fortune:{can_play:!1}}}},computed:{...I(["getSelf","cartTotalCount","getStories"]),preparedMenuItem(){if(!this.bot.settings)return[];let n=this.bot.settings.icons||[],e=[];return n.forEach(s=>{e[s.slug]=s}),e},isWork(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work:!0},tg(){return window.Telegram.WebApp},bot(){return window.currentBot}},mounted(){var n;this.tg.BackButton.show(),(n=this.bot.settings)!=null&&n.self_updated?(this.script_data=this.bot.settings,this.loadStories(),this.loadScriptData=!0):this.loadScriptModuleData().then(()=>{this.loadStories()}),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>e.click()),this.$router.back()})},methods:{doSwipeLeft(){this.$router.push({name:"ShopCartV2"})},doSwipeRight(){this.$router.push({name:"CatalogV2"})},goTo(n){this.$router.push({name:n})},switchToPage(n){this.$store.dispatch("switchToPage",{page:n}).then(()=>{this.tg.close()}).catch(()=>{this.$notify({title:"Упс...",text:"Данная функция временно недоступна...",type:"error"})})},startMenu(){this.$store.dispatch("switchToMainMenu"),this.tg.close()},loadStories(){this.$store.dispatch("loadStories").then(n=>{this.stories=this.getStories||[]})},loadScriptModuleData(){return this.loadScriptData=!1,this.$store.dispatch("loadShopModuleData").then(n=>{let e=n.data;this.script_data=[],this.$nextTick(()=>{e&&Object.keys(e).forEach(s=>{s&&(this.script_data[s]=e[s])}),this.loadScriptData=!0})})}}},je=Object.assign(ye,{__name:"Menu",setup(n){return(e,s)=>{var _,y,p,h,g,v,k,x,M,S,T;const r=w("lazy"),f=w("touch");return o(),l(C,null,[e.getSelf?d((o(),l("div",F,[e.script_data.is_disabled?(o(),l("div",H,[t("p",{class:"mb-0",innerHTML:e.script_data.disabled_text||"-"},null,8,q)])):i("",!0),(e.stories||[]).length>0?(o(),m(B,{key:1,stories:e.stories||[]},null,8,["stories"])):i("",!0),e.getSelf.is_admin&&(e.stories||[]).length>0?(o(),l("a",{key:2,href:"javascript:void(0)",style:{"font-size":"10pt"},class:"text-center d-block my-2",onClick:s[0]||(s[0]=a=>e.goTo("StoryManagerV2"))},"Редактировать")):i("",!0),R,e.bot?(o(),l("div",U,[t("div",G,[e.isWork?i("",!0):(o(),l("div",J,[c(" В данный момент мы "),K,c(". Вы можете ознакомиться с нашим "),Q,c(". ")]))])])):i("",!0),t("div",X,[t("div",Y,[(_=e.preparedMenuItem.profile)!=null&&_.is_visible?(o(),m(u,{key:0,route:"ProfileV2","default-image":"profile.png","default-text":"Профиль",item:e.preparedMenuItem.profile||null},null,8,["default-image","item"])):i("",!0)]),(y=e.bot.settings)!=null&&y.can_use_booking?(o(),l("div",Z,[(p=e.preparedMenuItem.booking)!=null&&p.is_visible?(o(),m(u,{key:0,route:"TableBookingV2","default-image":"profile.png","default-text":"Бронирование столика",item:e.preparedMenuItem.booking||null},null,8,["default-image","item"])):i("",!0)])):i("",!0),t("div",tt,[(h=e.preparedMenuItem.shop)!=null&&h.is_visible?(o(),m(u,{key:0,disabled:e.script_data.is_disabled,route:"CatalogV2","default-image":"shop.png","default-text":"Магазин",item:e.preparedMenuItem.shop||null},null,8,["disabled","default-image","item"])):i("",!0)]),t("div",et,[(g=e.preparedMenuItem.basket)!=null&&g.is_visible?(o(),m(u,{key:0,route:"ShopCartV2","default-image":"basket.png","default-text":"Корзина",item:e.preparedMenuItem.basket||null},{"post-text":j(()=>[e.cartTotalCount>0?(o(),l("span",st,b(e.cartTotalCount),1)):i("",!0)]),_:1},8,["default-image","item"])):i("",!0)]),t("div",ot,[(v=e.preparedMenuItem.history)!=null&&v.is_visible?(o(),m(u,{key:0,route:"OrdersV2","default-image":"history.png","default-text":"История заказов",item:e.preparedMenuItem.history||null},null,8,["default-image","item"])):i("",!0)]),e.script_data.wheel_of_fortune?(o(),l("div",it,[(k=e.preparedMenuItem.events)!=null&&k.is_visible?(o(),m(u,{key:0,disabled:!e.script_data.wheel_of_fortune.can_play,route:"WheelOfFortuneV2","default-image":"events.png","default-text":"Розыгрыши",item:e.preparedMenuItem.events||null},null,8,["disabled","default-image","item"])):i("",!0)])):i("",!0),t("div",lt,[(x=e.preparedMenuItem.about)!=null&&x.is_visible?(o(),m(u,{key:0,route:"ContactsV2","default-image":"contacts.png","default-text":"О Нас & Контакты",item:e.preparedMenuItem.about||null},null,8,["default-image","item"])):i("",!0)])]),at,(M=e.preparedMenuItem.wheel_of_fortune_btn)!=null&&M.is_visible?(o(),l("button",{key:4,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:s[1]||(s[1]=a=>e.switchToPage("Колесо фортуны")),class:"btn btn-outline-light text-primary w-100 p-3 rounded-3 shadow-sm mb-2"},[nt,c(" "+b(e.preparedMenuItem.wheel_of_fortune_btn.title||"Колесо фортуны"),1)])):i("",!0),(S=e.preparedMenuItem.friends_btn)!=null&&S.is_visible?(o(),l("button",{key:5,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:s[2]||(s[2]=a=>e.switchToPage("Пригласить друзей")),class:"btn btn-outline-light text-primary mb-2 w-100 p-3 rounded-3 shadow-sm"},[dt,c(" "+b(e.preparedMenuItem.friends_btn.title||"Пригласить друзей"),1)])):i("",!0),e.getSelf.is_admin?(o(),l(C,{key:6},[rt,t("div",ct,[t("div",mt,[t("button",{type:"button",onClick:s[3]||(s[3]=a=>e.goTo("SendInvoiceV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",ut,[d(t("img",pt,null,512),[[r,"/images/shop-v2-2/clients.png"]]),ht])])]),t("div",gt,[t("button",{type:"button",onClick:s[4]||(s[4]=a=>e.goTo("ShopV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",bt,[d(t("img",_t,null,512),[[r,"/images/shop-v2-2/products.png"]]),yt])])]),e.script_data?(o(),l("div",ft,[t("button",vt,[t("div",wt,[d(t("img",kt,null,512),[[r,"/images/shop-v2-2/orders.png"]]),xt])])])):i("",!0),t("div",Mt,[t("button",{type:"button",onClick:s[5]||(s[5]=a=>e.goTo("PartnersV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",St,[d(t("img",Tt,null,512),[[r,"/images/shop-v2-2/partners.png"]]),Ct])])]),t("div",$t,[t("button",{type:"button",onClick:s[6]||(s[6]=a=>e.goTo("StoryManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Vt,[d(t("img",It,null,512),[[r,"/images/shop-v2-2/promo.png"]]),jt])])]),t("div",Dt,[e.script_data.need_table_list?(o(),l("button",{key:0,type:"button",onClick:s[7]||(s[7]=a=>e.goTo("TablesManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Bt,[d(t("img",Lt,null,512),[[r,"/images/shop-v2-2/clients.png"]]),Pt])])):i("",!0)])]),zt,t("div",Ot,[t("div",Nt,[t("button",{type:"button",onClick:s[8]||(s[8]=a=>e.goTo("ClientsV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Et,[d(t("img",Wt,null,512),[[r,"/images/shop-v2-2/clients.png"]]),At])])]),t("div",Ft,[t("button",{type:"button",onClick:s[9]||(s[9]=a=>e.goTo("LinkManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Ht,[d(t("img",qt,null,512),[[r,"/images/shop-v2-2/utm.png"]]),Rt])])]),t("div",Ut,[t("button",{type:"button",onClick:s[10]||(s[10]=a=>e.goTo("MailingV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Gt,[d(t("img",Jt,null,512),[[r,"/images/shop-v2-2/mail.png"]]),Kt])])]),t("div",Qt,[t("button",{type:"button",onClick:s[11]||(s[11]=a=>e.goTo("AdminOrdersV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Xt,[d(t("img",Yt,null,512),[[r,"/images/shop-v2-2/orders.png"]]),Zt])])]),t("div",te,[t("button",{type:"button",onClick:s[12]||(s[12]=a=>e.goTo("PromoCodesV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",ee,[d(t("img",se,null,512),[[r,"/images/shop-v2-2/promo.png"]]),oe])])]),t("div",ie,[t("button",{type:"button",onClick:s[13]||(s[13]=a=>e.goTo("StatisticV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",le,[d(t("img",ae,null,512),[[r,"/images/shop-v2-2/statistic.png"]]),ne])])])])],64)):i("",!0)])),[[f,e.doSwipeLeft,"swipe",{left:!0}],[f,e.doSwipeRight,"swipe",{right:!0}]]):i("",!0),e.loadScriptData?i("",!0):(o(),l("div",de,ce)),t("nav",me,[(T=e.preparedMenuItem.main_menu_btn)!=null&&T.is_visible?(o(),l("button",{key:0,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:s[14]||(s[14]=(...a)=>e.startMenu&&e.startMenu(...a)),class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg"},[ue,c(" "+b(e.preparedMenuItem.main_menu_btn.title||"Главное меню"),1)])):i("",!0)]),t("div",pe,[t("div",he,[t("div",ge,[be,t("div",_e,[e.loadScriptData?(o(),m(D,{key:0,modelValue:e.script_data,"onUpdate:modelValue":s[15]||(s[15]=a=>e.script_data=a)},null,8,["modelValue"])):i("",!0)])])])])],64)}}});export{je as default};
