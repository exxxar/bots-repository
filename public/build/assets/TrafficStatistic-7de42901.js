/* empty css             */import{c as g,s as v,f as b,a as x,b as C,d as S,e as V}from"./vue3-charts.esm-31920dfb.js";import{o as s,k as o,n as t,N as u,a3 as _,F as c,M as n,p as d,K as T,L as h,l as p,w as m,t as f}from"./index.es-c4852431.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const N={components:{Chart:g,Grid:v,Line:b,Bar:x,Tooltip:C,Responsive:S,Pie:V},props:["date"],data(){return{traffics:[],tooltipConfig:{source:{label:"Источник",color:"#5d1010"},count:{label:"Кол-во",color:"#5d1010"}},margin:{left:0,top:20,right:0,bottom:0},axis:{primary:{type:"band"},secondary:{domain:["dataMin","dataMax + 100"],type:"linear",ticks:11}},need_chart:!1,sort:{is_individual:!1,key:"created_at",direction:"asc"}}},watch:{sort:{handler:function(a){this.prepareStatistic()},deep:!0}},mounted(){this.prepareStatistic()},methods:{changeSort(a){this.sort.key=a,this.sort.direction=this.sort.direction==="asc"?"desc":"asc"},prepareStatistic(){return this.loadedChart=!1,this.$store.dispatch("trafficLoad",{date:this.date,need_all:!this.need_date_range,sort:this.sort}).then(a=>{this.traffics=a.traffics})}}},j={class:"form-check form-switch mb-2"},B=t("label",{class:"form-check-label",for:"need-individual"},"Индивидуальные переходы",-1),M={class:"form-check form-switch mb-2"},P=t("label",{class:"form-check-label",for:"need-chart-display"},"Отображать диаграмму",-1),D={class:"table"},F={scope:"col"},K={key:0,class:"fa-solid fa-arrow-up-wide-short"},R={key:1,class:"fa-solid fa-arrow-up-short-wide"},U={scope:"col"},z={key:0,class:"fa-solid fa-arrow-up-wide-short"},A={key:1,class:"fa-solid fa-arrow-up-short-wide"},E={scope:"col"},G={key:0,class:"fa-solid fa-arrow-up-wide-short"},H={key:1,class:"fa-solid fa-arrow-up-short-wide"},q={scope:"row"},I={key:0,class:"d-flex justify-content-center mb-3"},J={key:1,class:"text-danger my-3 text-center"};function O(a,i,Q,W,e,l){const k=f("Pie"),y=f("Tooltip"),w=f("Chart");return s(),o(c,null,[t("div",j,[u(t("input",{class:"form-check-input","onUpdate:modelValue":i[0]||(i[0]=r=>e.sort.is_individual=r),type:"checkbox",role:"switch",id:"need-individual"},null,512),[[_,e.sort.is_individual]]),B]),t("div",M,[u(t("input",{class:"form-check-input","onUpdate:modelValue":i[1]||(i[1]=r=>e.need_chart=r),type:"checkbox",role:"switch",id:"need-chart-display"},null,512),[[_,e.need_chart]]),P]),(e.traffics||[]).length>0?(s(),o(c,{key:0},[t("table",D,[t("thead",null,[t("tr",null,[t("th",F,[t("a",{href:"javascript:void(0)",onClick:i[2]||(i[2]=r=>l.changeSort("id"))},[e.sort.key==="id"?(s(),o(c,{key:0},[e.sort.direction==="asc"?(s(),o("i",K)):(s(),o("i",R))],64)):n("",!0),d(" # ")])]),t("th",U,[t("a",{href:"javascript:void(0)",onClick:i[3]||(i[3]=r=>l.changeSort("source"))},[e.sort.key==="source"?(s(),o(c,{key:0},[e.sort.direction==="asc"?(s(),o("i",z)):(s(),o("i",A))],64)):n("",!0),d(" Источник ")])]),t("th",E,[t("a",{href:"javascript:void(0)",onClick:i[4]||(i[4]=r=>l.changeSort("count"))},[e.sort.key==="count"?(s(),o(c,{key:0},[e.sort.direction==="asc"?(s(),o("i",G)):(s(),o("i",H))],64)):n("",!0),d(" Число переходов ")])])])]),t("tbody",null,[(s(!0),o(c,null,T(e.traffics,r=>(s(),o("tr",null,[t("th",q,h(r.id),1),t("td",null,h(r.source),1),t("td",null,h(r.count),1)]))),256))])]),e.need_chart?(s(),o("div",I,[p(w,{direction:"circular",size:{width:400,height:400},data:e.traffics,margin:e.margin,axis:e.axis,config:{controlHover:!1}},{layers:m(()=>[p(k,{dataKeys:["source","count"],"pie-style":{innerRadius:10,padAngle:.05}},null,8,["pie-style"])]),widgets:m(()=>[p(y,{config:e.tooltipConfig,hideLine:""},null,8,["config"])]),_:1},8,["data","margin","axis"])])):n("",!0)],64)):(s(),o("p",J,"Нет данных по переходам:("))],64)}const tt=L(N,[["render",O]]);export{tt as T};
