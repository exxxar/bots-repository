import{_ as d}from"./ShopProductCatalog-96c2c427.js";import{j as p,o as a,k as r,l as c,n as s,L as l,M as u,p as i,F as h}from"./index.es-c4852431.js";import"./carousel.es-39a2ec14.js";import"./ProductCard-580d9e29.js";import"./ProductCardSimple-2492c86f.js";import"./Rating-5dca4717.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ReviewCard-c6045fca.js";import"./v4-4a60fe23.js";import"./Pagination-b758f7ed.js";/* empty css                                                   */import"./ProductCollectionView-a3e2097d.js";import"./CollectionCardSimple-d6c4fe49.js";import"./PreloaderV1-8b039dbc.js";/* empty css                                                    */import"./StoryList-b1293370.js";/* empty css                                                                  */import"./BookingDropdown-73016f1d.js";const m={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},b={key:0,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-2 px-3 rounded-3 shadow-lg d-flex justify-content-between align-items-center"},g={class:"btn-group dropup"},f=s("button",{class:"btn btn-dark dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-cart-shopping mr-2"})],-1),_={class:"dropdown-menu"},y={class:"d-block",style:{position:"relative"}},w={key:0,class:"bg-white text-primary sup-badge"},x=s("sup",{class:"font-10 opacity-50"},".00",-1),k={key:1,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-secondary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-between"},C={data(){return{settings:null}},computed:{...p(["inCart","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},canBy(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work||(this.settings?this.settings.can_buy_after_closing:!0):!0}},mounted(){var e;(e=this.bot.settings)!=null&&e.self_updated?this.settings=this.bot.settings:this.loadShopModuleData(),this.loadBasketData()},methods:{clearCart(){this.$store.dispatch("clearCart").then(()=>{this.$notify({title:"Корзина",text:"Корзина успешно очищена!",type:"success"})})},goToCart(){this.$router.push({name:"TableCartV2"})},loadBasketData(){return this.$store.dispatch("loadProductsInBasket")},loadShopModuleData(){return this.$store.dispatch("loadShopModuleData").then(e=>{this.$nextTick(()=>{this.settings||(this.settings={}),e&&Object.keys(e).forEach(t=>{t&&(this.settings[t]=e[t])}),this.settings_loaded=!0})})}}},z=Object.assign(C,{__name:"TableMenu",setup(e){return(t,o)=>(a(),r(h,null,[c(d,{settings:t.settings},null,8,["settings"]),s("nav",m,[t.canBy?(a(),r("button",b,[s("div",g,[f,s("ul",_,[s("li",null,[s("a",{class:"dropdown-item",onClick:o[0]||(o[0]=(...n)=>t.clearCart&&t.clearCart(...n)),href:"javascript:void(0)"},"Очистить корзину")])])]),s("div",{class:"d-flex justify-content-between align-items-center w-100 px-2",onClick:o[1]||(o[1]=(...n)=>t.goToCart&&t.goToCart(...n))},[s("span",y,[t.cartTotalCount>0?(a(),r("sup",w,l(t.cartTotalCount),1)):u("",!0),i("Ваш заказ ")]),s("strong",null,[i(l(t.cartTotalPrice||0),1),x,i("₽")])])])):(a(),r("p",k," В данный момент покупки недоступны "))])],64))}});export{z as default};
