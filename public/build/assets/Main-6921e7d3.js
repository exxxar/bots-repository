import{g as V,o as l,j as i,F as m,J as y,$ as _,n as p,K as c,l as t,L as r,G as f,N as $,M as n,k as U,a6 as v,W as d,a0 as q,a2 as h}from"./index.es-db843bab.js";import{_ as j}from"./ProductItemSimple-40bd801c.js";import{P as T}from"./Pagination-ccc8cfc8.js";import{b as L}from"./custom-4bdc3e34.js";/* empty css                                                   */import"./_plugin-vue_export-helper-c27b6911.js";const O={key:0,class:"d-flex flex-wrap"},B=["onClick"],D={class:"font-14"},M={props:["size","selected","active"],data(){return{categories:null,categories_paginate_object:null}},computed:{...V(["getCategories","getCategoriesPaginateObject"])},mounted(){this.loadCategories()},methods:{nextCategories(a){this.loadCategories(a)},select(a){return this.$emit("select",a)},inCategory(a){return this.selected.findIndex(s=>s.id===a)>=0},loadCategories(a=0){return this.$store.dispatch("loadCategories",{page:a,size:this.size||5}).then(()=>{this.categories=this.getCategories,this.categories_paginate_object=this.getCategoriesPaginateObject})}}},N=Object.assign(M,{__name:"CategoryInlineList",setup(a){return(e,s)=>(l(),i(m,null,[e.categories?(l(),i("div",O,[(l(!0),i(m,null,y(e.categories,u=>(l(),i("a",{href:"javascript:void(0)",onClick:g=>e.select(u),class:_([{"bg-green2-dark":e.inCategory(u.id),"bg-gray2-dark":a.active.indexOf(u.id)===-1&&!e.inCategory(u.id)},"m-0 mb-2 badge mr-2 bg-green2-dark rounded-l font-14 category-badge p-3"])},[p(c(u.title||"Не указано")+" ",1),t("span",D,c(u.count||0),1)],10,B))),256))])):r("",!0),e.categories_paginate_object&&e.categories_paginate_object.meta.total>a.size?(l(),f(T,{key:1,simple:!0,onPagination_page:e.nextCategories,pagination:e.categories_paginate_object},null,8,["onPagination_page","pagination"])):r("",!0)],64))}});const z={class:"d-flex flex-column"},A={class:"card card-style"},E={class:"content"},J={class:"tab-controls mb-2 tabs-round tab-animated tabs-medium tabs-rounded d-flex justify-content-between"},G={class:"row mb-0"},H={class:"col-12"},R={class:"mb-0 d-flex justify-content-between"},W={key:0,class:"mb-2 text-center"},K={key:0},Q={class:"d-flex justify-content-between"},X={key:0,class:"fa-solid fa-magnifying-glass"},Y={key:1,class:"fa-solid fa-chevron-up"},Z={key:2,class:"font-14"},x={key:3,class:"font-14"},ee={class:"d-flex"},te=t("i",{class:"fa-solid fa-list"},null,-1),se=[te],oe=t("i",{class:"fa-regular fa-address-card"},null,-1),le=[oe],ie={key:1},ae={class:"input-style input-style-2 has-icon input-required"},re=t("p",{class:"mb-0"},"Цена товара",-1),ne={class:"row mb-0"},de={class:"col-6"},ce={class:"input-style input-style-2 input-required"},ue={class:"col-6"},he={class:"input-style input-style-2 input-required"},pe=t("i",{class:"fa-solid fa-file-invoice mr-2"},null,-1),_e=t("span",{class:"color-white"},"Найти товар",-1),me=[pe,_e],ye={key:2},fe={key:3},ge=t("p",null,"К сожалению, никаких товаров еще нет в магазине:(",-1),be=[ge],ve=t("h4",null,"Итого",-1),ke=t("p",null," Ниже приведена итоговая цена заказа без учета стоимости доставки. Цена доставки рассчитывается отдельно и зависит от расстояния. ",-1),Fe=["onClick"],we={key:0,class:"col-6 text-left"},Ce={class:"font-600"},Se={class:"col-2 d-flex justify-content-between align-items-center"},Pe=t("i",{class:"fa-regular fa-square-minus mr-2"},null,-1),Ie={class:"font-600 mb-0"},$e=t("i",{class:"fa-regular fa-square-plus ml-2 color-green2-dark"},null,-1),je={key:1,class:"col-4 text-right"},Ve={class:"font-600"},Te=t("sup",null,".00",-1),Ue=t("div",{class:"divider mt-4"},null,-1),qe={key:0,class:"row mb-0"},Le=t("div",{class:"col-6 text-left"},[t("h4",null,"Суммарно, ед.")],-1),Oe={class:"col-6 text-right"},Be=t("div",{class:"col-6 text-left"},[t("h4",null,"Суммарно, цена")],-1),De={class:"col-6 text-right"},Me={key:0},Ne=t("sup",null,".00",-1),ze={key:1},Ae=t("sup",null,".00",-1),Ee={key:0,class:"col-6 text-left"},Je=t("h4",null," Использовать CashBack",-1),Ge=[Je],He={key:1,class:"col-6 text-right"},Re={key:0,class:"custom-control ios-switch ios-switch-icon my-3"},We={key:0,class:"custom-control-label",style:{"padding-left":"30px"},for:"toggle-use_cashback"},Ke={key:1,class:"custom-control-label",style:{"padding-left":"30px"},for:"toggle-use_cashback"},Qe=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{left:"8px"}},null,-1),Xe=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{"margin-left":"24px"}},null,-1),Ye={key:2,class:"col-6 text-left"},Ze=t("h4",null,"Доступно для списания",-1),xe=[Ze],et={key:3,class:"col-6 text-right"},tt=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),st=t("span",{class:"color-white"},"Очистить корзину",-1),ot=[tt,st],lt=t("div",{class:"divider mt-4"},null,-1),it=t("h4",null,"Оформление заказа",-1),at={class:"input-style input-style-2 has-icon"},rt=t("i",{class:"input-icon fa fa-user"},null,-1),nt={class:"input-style input-style-2 has-icon"},dt=t("i",{class:"input-icon fa-solid fa-phone"},null,-1),ct=t("p",{class:"mb-0 text-left"},"Как хотите получить заказ?",-1),ut={class:"custom-control ios-switch ios-switch-icon my-3"},ht={key:0,class:"custom-control-label pl-5",for:"toggle-need-pickup"},pt={key:1,class:"custom-control-label pl-5",for:"toggle-need-pickup"},_t=t("i",{class:"fa-solid fa-person-walking-luggage font-11 color-white",style:{left:"8px"}},null,-1),mt=t("i",{class:"fa-solid fa-truck font-11 color-white",style:{"margin-left":"24px"}},null,-1),yt={key:1,class:"input-style input-style-2 has-icon"},ft=t("i",{class:"input-icon fa-solid fa-city"},null,-1),gt={key:2,class:"input-style input-style-2 has-icon"},bt=t("i",{class:"input-icon fa-solid fa-road"},null,-1),vt={key:3,class:"input-style input-style-2 has-icon"},kt=t("i",{class:"input-icon fa-solid fa-house-user"},null,-1),Ft={key:4,class:"input-style input-style-2 has-icon"},wt=t("i",{class:"input-icon fa-solid fa-door-open"},null,-1),Ct={key:5,class:"input-style input-style-2 has-icon"},St=t("i",{class:"input-icon fa-solid fa-house-flag"},null,-1),Pt={key:6,class:"input-style input-style-2 has-icon"},It=t("i",{class:"input-icon fa-solid fa-layer-group"},null,-1),$t={key:7,class:"input-style input-style-2 has-icon"},jt=t("span",{class:"input-style-1-active input-style-1-inactive"},"Информация для доставщика",-1),Vt=t("i",{class:"input-icon fa-solid fa-envelope-open-text"},null,-1),Tt=t("p",{class:"mb-0 text-left"},"К какому времени заказ должен быть готов?",-1),Ut={class:"custom-control ios-switch ios-switch-icon my-3"},qt={key:0,class:"custom-control-label pl-5",for:"toggle-when-ready"},Lt={key:1,class:"custom-control-label pl-5",for:"toggle-when-ready"},Ot=t("i",{class:"fa-solid fa-clock font-11 color-white",style:{left:"8px"}},null,-1),Bt=t("i",{class:"fa-solid fa-mug-hot font-11 color-white",style:{"margin-left":"24px"}},null,-1),Dt={key:8,class:"input-style input-style-2 has-icon"},Mt=t("i",{class:"input-icon fa-regular fa-clock"},null,-1),Nt={key:9,class:"mb-0 text-left"},zt={key:10,class:"custom-control ios-switch ios-switch-icon my-3"},At={key:0,class:"custom-control-label pl-5",for:"toggle-has-disability"},Et={key:1,class:"custom-control-label pl-5",for:"toggle-has-disability"},Jt=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{left:"8px"}},null,-1),Gt=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{"margin-left":"24px"}},null,-1),Ht={key:11,class:"list-group list-custom-small"},Rt={class:"border-0",href:"javascript:void(0)"},Wt=t("i",{class:"fa-solid rounded-sm font-14 fa-head-side-mask shadow-s bg-red1-dark"},null,-1),Kt=t("span",null,"Болею",-1),Qt={class:"custom-control scale-switch ios-switch"},Xt=t("label",{class:"custom-control-label",for:"switch-1"},null,-1),Yt=t("i",{class:"fa fa-angle-right"},null,-1),Zt={class:"border-0",href:"javascript:void(0)"},xt=t("i",{class:"fa-solid rounded-sm font-14 fa-eye shadow-s bg-red1-dark"},null,-1),es=t("span",null,"Слабовидящий",-1),ts={class:"custom-control scale-switch ios-switch"},ss=t("label",{class:"custom-control-label",for:"switch-2"},null,-1),os=t("i",{class:"fa fa-angle-right"},null,-1),ls={class:"border-0",href:"javascript:void(0)"},is=t("i",{class:"fa-solid rounded-sm font-14 fa-wheelchair shadow-s bg-red1-dark"},null,-1),as=t("span",null,"Ограничения мобильности",-1),rs={class:"custom-control scale-switch ios-switch"},ns=t("label",{class:"custom-control-label",for:"switch-3"},null,-1),ds=t("i",{class:"fa fa-angle-right"},null,-1),cs={class:"border-0",href:"javascript:void(0)"},us=t("i",{class:"fa-solid rounded-sm font-14 fa-ear-deaf shadow-s bg-red1-dark"},null,-1),hs=t("span",null,"Плохо слышит \\ говорит",-1),ps={class:"custom-control scale-switch ios-switch"},_s=t("label",{class:"custom-control-label",for:"switch-4"},null,-1),ms=t("i",{class:"fa fa-angle-right"},null,-1),ys={key:12,class:"mb-0 text-left"},fs={key:13,class:"custom-control ios-switch ios-switch-icon my-3"},gs={key:0,class:"custom-control-label pl-5",for:"toggle-payment-cash"},bs={key:1,class:"custom-control-label pl-5",for:"toggle-payment-cash"},vs=t("i",{class:"fa-solid fa-money-bill-1-wave font-11 color-white",style:{left:"8px"}},null,-1),ks=t("i",{class:"fa-solid fa-credit-card font-11 color-white",style:{"margin-left":"24px"}},null,-1),Fs={key:14},ws=t("h6",null,"Мы можем подготовить для вас сдачу с:",-1),Cs={class:"row row-cols-2 mb-0"},Ss={class:"col"},Ps=["onClick"],Is=t("p",{class:"mb-2"},[t("em",null,"или введите другую сумму...")],-1),$s={class:"input-style input-style-2 has-icon"},js=t("i",{class:"input-icon fa-solid fa-door-open"},null,-1),Vs=t("p",{class:"mb-0 text-left"},"Число персон",-1),Ts={class:"row text-center mr-2 ml-2 mb-3"},Us={class:"col-4 mb-n2"},qs=t("i",{class:"fa-solid fa-minus font-22"},null,-1),Ls=[qs],Os={class:"col-4 mb-n2 d-flex justify-content-center align-items-center"},Bs={class:"font-22"},Ds={class:"col-4 mb-n2"},Ms=t("i",{class:"fa-solid fa-plus font-22"},null,-1),Ns=[Ms],zs=["innerHTML"],As={key:16},Es=["disabled"],Js={key:0,class:"fa-solid fa-file-invoice mr-2"},Gs={key:1,class:"fa-solid fa-hourglass mr-2"},Hs={key:2,class:"color-white"},Rs={key:3,class:"color-white"},Ws={props:["type"],data(){return{tab:0,settings:{can_use_cash:!0,delivery_price_text:null,min_price:0,min_price_for_cashback:0,menu_list_type:0,need_category_by_page:!1},product_type_display:1,spent_time_counter:0,is_requested:!1,isCollapsed:!0,search:null,products:[],paginate:null,categories:[],sending:!1,min_price:null,max_price:null,moneyVariants:[500,1e3,2e3,5e3],deliveryForm:{name:null,phone:null,address:null,city:null,street:null,building:null,flat_number:null,entrance_number:null,floor_number:null,info:null,need_pickup:!1,has_disability:!1,use_cashback:!1,disabilities:[],money:null,cash:!0,persons:1,time:null,when_ready:!0}}},watch:{"deliveryForm.cash":{handler:function(a){this.deliveryForm.cash||(this.deliveryForm.money=null)},deep:!0}},computed:{...V(["getProducts","getProductsPaginateObject","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),getCurrentBot(){return window.currentBot},cashbackLimit(){let a=this.getSelf.cashBack?this.getSelf.cashBack.amount:0,e=this.cartTotalPrice||0,s=this.getCurrentBot.max_cashback_use_percent||0,u=e*(s/100);return Math.min(u,a)},filteredProducts(){return this.search?this.products.filter(a=>a.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products},tg(){return window.Telegram.WebApp},activeCategories(){let a=[];return this.filteredProducts.forEach(e=>{a.push(e.categories.map(s=>s.id))}),[...new Set(a.map(e=>e[0])),...new Set(a.map(e=>e[1]))]}},mounted(){localStorage.getItem("cashman_self_product_delivery_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_self_product_delivery_counter"))),localStorage.getItem("cashman_self_product_type_display")!=null&&(this.product_type_display=parseInt(localStorage.getItem("cashman_self_product_type_display")||0)),this.deliveryForm.name=localStorage.getItem("cashman_self_product_delivery_form_name")!=null?localStorage.getItem("cashman_self_product_delivery_form_name"):null,this.deliveryForm.phone=localStorage.getItem("cashman_self_product_delivery_form_phone")!=null?localStorage.getItem("cashman_self_product_delivery_form_phone"):null,this.deliveryForm.address=localStorage.getItem("cashman_self_product_delivery_form_address")!=null?localStorage.getItem("cashman_self_product_delivery_form_address"):null,this.deliveryForm.city=localStorage.getItem("cashman_self_product_delivery_form_city")!=null?localStorage.getItem("cashman_self_product_delivery_form_city"):null,this.deliveryForm.street=localStorage.getItem("cashman_self_product_delivery_form_street")!=null?localStorage.getItem("cashman_self_product_delivery_form_street"):null,this.deliveryForm.building=localStorage.getItem("cashman_self_product_delivery_form_building")!=null?localStorage.getItem("cashman_self_product_delivery_form_building"):null,this.deliveryForm.flat_number=localStorage.getItem("cashman_self_product_delivery_form_flat_number")!=null?localStorage.getItem("cashman_self_product_delivery_form_flat_number"):null,this.deliveryForm.entrance_number=localStorage.getItem("cashman_self_product_delivery_form_entrance_number")!=null?localStorage.getItem("cashman_self_product_delivery_form_entrance_number"):null,this.deliveryForm.disabilities=localStorage.getItem("cashman_self_product_delivery_form_entrance_disabilities")!=null?JSON.parse(localStorage.getItem("cashman_self_product_delivery_form_entrance_disabilities")):[],this.deliveryForm.disabilities.length>0&&(this.deliveryForm.has_disability=!0),this.loadProducts(),this.loadShopModuleData(),this.cartProducts.length>0&&this.loadActualProducts(),window.addEventListener("scroll-to-basket",a=>{this.tab=2,document.querySelector("#basket").scrollIntoView({behavior:"smooth"})})},methods:{doSwipeLeft(){let a=this.cartProducts.length>0?2:1;this.tab===0?this.tab=a:this.tab--},doSwipeRight(){let a=this.cartProducts.length>0?2:1;this.tab===a?this.tab=0:this.tab++},decPersons(){this.deliveryForm.persons=this.deliveryForm.persons>1?this.deliveryForm.persons-1:this.deliveryForm.persons},incPersons(){this.deliveryForm.persons=this.deliveryForm.persons<100?this.deliveryForm.persons+1:this.deliveryForm.persons},selectProductTypeDisplay(a){this.product_type_display=a,localStorage.setItem("cashman_self_product_type_display",this.product_type_display)},startTimer(a){this.spent_time_counter=a!=null?Math.min(a,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_self_product_delivery_counter",this.spent_time_counter)},1e3)},clearCart(){this.tab=1,this.$store.dispatch("clearCart").then(()=>{this.$botNotification.success("Корзина","Корзина успешно очищена")})},resetCategories(){this.categories=[],this.loadProducts(0)},selectCategory(a){if(this.settings.need_category_by_page)this.categories=[a];else{let e=this.categories.findIndex(s=>s.id===a.id);e!==-1?this.categories.splice(e,1):this.categories.push(a)}this.settings.need_category_by_page&&(this.tab=1),this.loadProducts(0)},nextProducts(a){this.loadProducts(a)},loadShopModuleData(){return this.$store.dispatch("loadShopModuleData").then(a=>{this.$nextTick(()=>{a&&Object.keys(a).forEach(e=>{e&&(this.settings[e]=a[e])})})})},loadProducts(a=0){return this.$store.dispatch("loadProducts",{dataObject:{search:this.search,categories:this.categories.length>0?this.categories.map(e=>e.id):null,min_price:this.min_price||null,max_price:this.max_price||null},page:a}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject,L.handler()})},startCheckout(){if(this.is_requested){this.$botNotification.warning("Упс!",`Сделать повторный заказ можно через <strong>${this.spent_time_counter} сек.</strong>`);return}localStorage.setItem("cashman_self_product_delivery_form_name",this.deliveryForm.name||""),localStorage.setItem("cashman_self_product_delivery_form_phone",this.deliveryForm.phone||""),localStorage.setItem("cashman_self_product_delivery_form_address",this.deliveryForm.address||""),localStorage.setItem("cashman_self_product_delivery_form_city",this.deliveryForm.city||""),localStorage.setItem("cashman_self_product_delivery_form_street",this.deliveryForm.street||""),localStorage.setItem("cashman_self_product_delivery_form_building",this.deliveryForm.building||""),localStorage.setItem("cashman_self_product_delivery_form_flat_number",this.deliveryForm.flat_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_number",this.deliveryForm.entrance_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_disabilities",JSON.stringify(this.deliveryForm.disabilities||[]));let a=new FormData;this.sending=!0,Object.keys(this.deliveryForm).forEach(e=>{const s=this.deliveryForm[e]||"";typeof s=="object"?a.append(e,JSON.stringify(s)):a.append(e,s)}),this.type&&a.append("type",this.type),this.$store.dispatch("startCheckout",{deliveryForm:a}).then(e=>{this.deliveryForm={message:null,name:null,phone:null},this.$botNotification.success("Доставка","Дальнейшая инструкция отправлена вам в бот!"),this.tab=1,this.$store.dispatch("clearCart"),this.tg.close(),this.sending=!1}).catch(e=>{this.sending=!1}),this.startTimer(),this.is_requested=!0},loadActualProducts(){this.$store.dispatch("loadActualPriceInCart")},removeCategory(a){this.categories.splice(a,1)},addToCart(a){this.$cart.add(a.product)}}},Ks=Object.assign(Ws,{__name:"SelfProductDelivery",setup(a){return(e,s)=>{var k,F,w,C,S,P,I;const u=$("mask"),g=$("touch");return n((l(),i("div",z,[t("div",A,[t("div",E,[t("div",J,[t("a",{href:"javascript:void(0)",class:_(["w-100",{"bg-blue2-dark color-white no-click":e.tab===0}]),onClick:s[0]||(s[0]=o=>e.tab=0)},"Категории",2),t("a",{href:"javascript:void(0)",class:_(["w-100",{"bg-blue2-dark color-white no-click":e.tab===1}]),onClick:s[1]||(s[1]=o=>e.tab=1)},"Товары",2),e.cartProducts.length>0?(l(),i("a",{key:0,class:_([{"bg-blue2-dark color-white no-click":e.tab===2},"w-100"]),onClick:s[2]||(s[2]=o=>e.tab=2),href:"javascript:void(0)"},"Корзина",2)):r("",!0)]),n(t("div",G,[t("div",H,[t("p",R,[p("Категории товара "),e.categories.length>0?(l(),i("a",{key:0,onClick:s[3]||(s[3]=o=>e.resetCategories()),href:"javascript:void(0)"},"Сбросить")):r("",!0)]),e.paginate?(l(),i("p",W,[t("small",null,"Всего товаров найдено ("+c(e.paginate.meta.total)+")",1)])):r("",!0),U(N,{"single-mode":!0,active:e.activeCategories,selected:e.categories,onSelect:e.selectCategory},null,8,["active","selected","onSelect"])])],512),[[v,e.tab===0]]),n(t("div",null,[e.paginate?(l(),i("div",K,[t("div",Q,[t("a",{href:"javascript:void(0)",style:{"border-radius":"10px !important"},onClick:s[4]||(s[4]=o=>e.isCollapsed=!e.isCollapsed),class:"btn btn-border btn-m bg-red2-dark btn-full mb-3 text-uppercase font-900 color-blue2-dark mr-2"},[e.isCollapsed?(l(),i("i",X)):(l(),i("i",Y)),e.isCollapsed?(l(),i("span",Z)):(l(),i("span",x))]),t("div",ee,[t("a",{href:"javascript:void(0)",style:{"border-radius":"10px !important"},onClick:s[5]||(s[5]=o=>e.selectProductTypeDisplay(0)),class:_([{"bg-blue2-dark":e.product_type_display==0},"btn btn-border btn-m btn-full mb-3 text-uppercase font-900 color-blue2-dark mr-2"])},se,2),t("a",{href:"javascript:void(0)",style:{"border-radius":"10px !important"},onClick:s[6]||(s[6]=o=>e.selectProductTypeDisplay(1)),class:_([{"bg-blue2-dark":e.product_type_display==1},"btn btn-border btn-m btn-full mb-3 text-uppercase font-900 color-blue2-dark"])},le,2)])])])):r("",!0),e.isCollapsed?r("",!0):(l(),i("div",ie,[t("div",ae,[t("i",{class:"input-icon fa-solid fa-magnifying-glass",onClick:s[7]||(s[7]=o=>e.loadProducts(0))}),n(t("input",{class:"form-control","onUpdate:modelValue":s[8]||(s[8]=o=>e.search=o),type:"search",placeholder:"Название товара"},null,512),[[d,e.search]])]),re,t("div",ne,[t("div",de,[t("div",ce,[n(t("input",{"onUpdate:modelValue":s[9]||(s[9]=o=>e.min_price=o),class:"form-control",type:"number",min:"0",placeholder:"От, руб"},null,512),[[d,e.min_price]])])]),t("div",ue,[t("div",he,[n(t("input",{class:"form-control",min:"0","onUpdate:modelValue":s[10]||(s[10]=o=>e.max_price=o),type:"number",placeholder:"До, руб"},null,512),[[d,e.max_price]])])])]),t("button",{onClick:s[11]||(s[11]=o=>e.loadProducts(0)),class:"btn btn-full btn-sm rounded-s bg-highlight font-800 text-uppercase w-100 mb-2"},me)])),e.products.length>0?(l(),i("div",ye,[(l(!0),i(m,null,y(e.filteredProducts,(o,b)=>(l(),f(j,{"display-type":e.product_type_display,item:o},null,8,["display-type","item"]))),256)),e.paginate?(l(),f(T,{key:0,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):r("",!0)])):(l(),i("div",fe,be))],512),[[v,e.tab===1]]),n(t("div",null,[e.cartProducts.length>0?(l(),i("form",{key:0,id:"basket",onSubmit:s[35]||(s[35]=q((...o)=>e.startCheckout&&e.startCheckout(...o),["prevent"]))},[(l(!0),i(m,null,y(e.cartProducts,(o,b)=>(l(),f(j,{item:o.product},null,8,["item"]))),256)),ve,ke,(l(!0),i(m,null,y(e.cartProducts,(o,b)=>(l(),i("div",{class:"row mb-0",onClick:Xs=>e.addToCart(o)},[o.product?(l(),i("div",we,[t("h6",Ce,c(o.product.title||"Не указано"),1)])):r("",!0),t("div",Se,[Pe,t("h6",Ie,"x"+c(o.quantity||1),1),$e]),o.product?(l(),i("div",je,[t("h6",Ve,[p(c(o.product.current_price||0)+" ",1),Te,p("₽")])])):r("",!0)],8,Fe))),256)),Ue,e.getSelf?(l(),i("div",qe,[Le,t("div",Oe,[t("h4",null,c(e.cartTotalCount)+" шт.",1)]),Be,t("div",De,[(k=e.deliveryForm)!=null&&k.use_cashback?r("",!0):(l(),i("h4",Me,[p(c(e.cartTotalPrice),1),Ne,p("₽")])),(F=e.deliveryForm)!=null&&F.use_cashback?(l(),i("h4",ze,[p(c(e.cartTotalPrice-e.cashbackLimit),1),Ae,p("₽ ")])):r("",!0)]),e.getSelf.cashBack&&e.settings.min_price_for_cashback<e.cartTotalPrice?(l(),i("div",Ee,Ge)):r("",!0),e.getSelf.cashBack&&e.settings.min_price_for_cashback<e.cartTotalPrice?(l(),i("div",He,[e.deliveryForm.need_pickup?r("",!0):(l(),i("div",Re,[n(t("input",{type:"checkbox","onUpdate:modelValue":s[12]||(s[12]=o=>e.deliveryForm.use_cashback=o),class:"ios-input",id:"toggle-use_cashback"},null,512),[[h,e.deliveryForm.use_cashback]]),(w=e.deliveryForm)!=null&&w.use_cashback?(l(),i("label",We)):r("",!0),(C=e.deliveryForm)!=null&&C.use_cashback?r("",!0):(l(),i("label",Ke)),Qe,Xe]))])):r("",!0),(S=e.deliveryForm)!=null&&S.use_cashback?(l(),i("div",Ye,xe)):r("",!0),(P=e.deliveryForm)!=null&&P.use_cashback?(l(),i("div",et,[t("h4",null,c(e.cashbackLimit)+"₽",1)])):r("",!0)])):r("",!0),t("button",{onClick:s[13]||(s[13]=(...o)=>e.clearCart&&e.clearCart(...o)),class:"btn btn-full btn-sm rounded-l bg-red1-dark font-800 text-uppercase w-100"},ot),lt,it,t("div",at,[rt,n(t("input",{class:"form-control","onUpdate:modelValue":s[14]||(s[14]=o=>e.deliveryForm.name=o),type:"text",placeholder:"Иванов Иван Иванович",required:""},null,512),[[d,e.deliveryForm.name]])]),t("div",nt,[dt,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[15]||(s[15]=o=>e.deliveryForm.phone=o),placeholder:"+7(000)000-00-00",required:""},null,512),[[u,"+7(###)###-##-##"],[d,e.deliveryForm.phone]])]),ct,t("div",ut,[n(t("input",{type:"checkbox","onUpdate:modelValue":s[16]||(s[16]=o=>e.deliveryForm.need_pickup=o),class:"ios-input",id:"toggle-need-pickup"},null,512),[[h,e.deliveryForm.need_pickup]]),e.deliveryForm.need_pickup?r("",!0):(l(),i("label",ht,"Доставка")),e.deliveryForm.need_pickup?(l(),i("label",pt,"Самовывоз")):r("",!0),_t,mt]),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",yt,[ft,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[17]||(s[17]=o=>e.deliveryForm.city=o),placeholder:"Ваш город",required:""},null,512),[[d,e.deliveryForm.city]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",gt,[bt,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[18]||(s[18]=o=>e.deliveryForm.street=o),placeholder:"Улица",required:""},null,512),[[d,e.deliveryForm.street]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",vt,[kt,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[19]||(s[19]=o=>e.deliveryForm.building=o),placeholder:"Номер дома",required:""},null,512),[[d,e.deliveryForm.building]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",Ft,[wt,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[20]||(s[20]=o=>e.deliveryForm.flat_number=o),placeholder:"Номер квартиры"},null,512),[[d,e.deliveryForm.flat_number]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",Ct,[St,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[21]||(s[21]=o=>e.deliveryForm.entrance_number=o),placeholder:"Номер подъезда"},null,512),[[d,e.deliveryForm.entrance_number]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",Pt,[It,n(t("input",{class:"form-control",type:"text","onUpdate:modelValue":s[22]||(s[22]=o=>e.deliveryForm.floor_number=o),placeholder:"Номер этажа"},null,512),[[d,e.deliveryForm.floor_number]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",$t,[jt,Vt,n(t("textarea",{class:"form-control",style:{height:"200px","line-height":"150%",padding:"35px"},"onUpdate:modelValue":s[23]||(s[23]=o=>e.deliveryForm.info=o),type:"text",placeholder:""},null,512),[[d,e.deliveryForm.info]])])),Tt,t("div",Ut,[n(t("input",{type:"checkbox","onUpdate:modelValue":s[24]||(s[24]=o=>e.deliveryForm.when_ready=o),class:"ios-input",id:"toggle-when-ready"},null,512),[[h,e.deliveryForm.when_ready]]),e.deliveryForm.when_ready?r("",!0):(l(),i("label",qt,"Ко времени")),e.deliveryForm.when_ready?(l(),i("label",Lt,"По готовности")):r("",!0),Ot,Bt]),e.deliveryForm.when_ready?r("",!0):(l(),i("div",Dt,[Mt,n(t("input",{class:"form-control",type:"datetime-local","onUpdate:modelValue":s[25]||(s[25]=o=>e.deliveryForm.time=o),placeholder:"Время доставки"},null,512),[[d,e.deliveryForm.time]])])),e.deliveryForm.need_pickup?r("",!0):(l(),i("p",Nt,"Ограничения по здоровью")),e.deliveryForm.need_pickup?r("",!0):(l(),i("div",zt,[n(t("input",{type:"checkbox","onUpdate:modelValue":s[26]||(s[26]=o=>e.deliveryForm.has_disability=o),class:"ios-input",id:"toggle-has-disability"},null,512),[[h,e.deliveryForm.has_disability]]),e.deliveryForm.has_disability?(l(),i("label",At,"Есть")):r("",!0),e.deliveryForm.has_disability?r("",!0):(l(),i("label",Et,"Нет")),Jt,Gt])),e.deliveryForm.has_disability?(l(),i("div",Ht,[t("a",Rt,[Wt,Kt,t("div",Qt,[n(t("input",{type:"checkbox",value:"болею","onUpdate:modelValue":s[27]||(s[27]=o=>e.deliveryForm.disabilities=o),class:"ios-input",id:"switch-1"},null,512),[[h,e.deliveryForm.disabilities]]),Xt]),Yt]),t("a",Zt,[xt,es,t("div",ts,[n(t("input",{type:"checkbox",value:"слабовидящий","onUpdate:modelValue":s[28]||(s[28]=o=>e.deliveryForm.disabilities=o),class:"ios-input",id:"switch-2"},null,512),[[h,e.deliveryForm.disabilities]]),ss]),os]),t("a",ls,[is,as,t("div",rs,[n(t("input",{type:"checkbox",value:"ограничения мобильности","onUpdate:modelValue":s[29]||(s[29]=o=>e.deliveryForm.disabilities=o),class:"ios-input",id:"switch-3"},null,512),[[h,e.deliveryForm.disabilities]]),ns]),ds]),t("a",cs,[us,hs,t("div",ps,[n(t("input",{type:"checkbox",value:"проблемы со слухом \\ голосом","onUpdate:modelValue":s[30]||(s[30]=o=>e.deliveryForm.disabilities=o),class:"ios-input",id:"switch-4"},null,512),[[h,e.deliveryForm.disabilities]]),_s]),ms])])):r("",!0),e.settings.can_use_cash?(l(),i("p",ys,"Способы оплаты")):r("",!0),e.settings.can_use_cash?(l(),i("div",fs,[n(t("input",{type:"checkbox","onUpdate:modelValue":s[31]||(s[31]=o=>e.deliveryForm.cash=o),class:"ios-input",id:"toggle-payment-cash"},null,512),[[h,e.deliveryForm.cash]]),e.deliveryForm.cash?r("",!0):(l(),i("label",gs,"Переводом")),e.deliveryForm.cash?(l(),i("label",bs,"Наличные")):r("",!0),vs,ks])):r("",!0),e.deliveryForm.cash&&e.settings.can_use_cash?(l(),i("div",Fs,[ws,t("div",Cs,[(l(!0),i(m,null,y(e.moneyVariants,o=>(l(),i("div",Ss,[t("button",{class:_(["btn btn-outline-success w-100 mb-2 rounded-xl",{"btn-success text-white":e.deliveryForm.money===o}]),type:"button",onClick:b=>e.deliveryForm.money=o},c(o)+"₽ ",11,Ps)]))),256))]),Is,t("div",$s,[js,n(t("input",{class:"form-control",type:"number",min:"0","onUpdate:modelValue":s[32]||(s[32]=o=>e.deliveryForm.money=o),placeholder:"С какой суммы нужна сдача"},null,512),[[d,e.deliveryForm.money]])])])):r("",!0),Vs,t("div",Ts,[t("div",Us,[t("button",{onClick:s[33]||(s[33]=(...o)=>e.decPersons&&e.decPersons(...o)),type:"button",class:"btn p-2 w-100 bg-green1-dark rounded-l m-0"},Ls)]),t("div",Os,[t("strong",Bs,c(e.deliveryForm.persons),1)]),t("div",Ds,[t("button",{type:"button",onClick:s[34]||(s[34]=(...o)=>e.incPersons&&e.incPersons(...o)),class:"btn p-2 w-100 bg-green2-dark rounded-l m-0"},Ns)])]),e.settings.delivery_price_text?(l(),i("p",{key:15,innerHTML:e.settings.delivery_price_text},null,8,zs)):r("",!0),e.settings.min_price?(l(),i("p",As,"Минимальная цена заказа "+c(e.settings.min_price||0)+" руб",1)):r("",!0),t("button",{type:"submit",disabled:e.spent_time_counter>0||((I=e.deliveryForm)!=null&&I.use_cashback?e.settings.min_price>e.cartTotalPrice-e.cashbackLimit:e.settings.min_price>e.cartTotalPrice),class:"btn btn-full btn-sm rounded-l bg-highlight font-800 text-uppercase w-100 mb-2"},[e.spent_time_counter<=0?(l(),i("i",Js)):(l(),i("i",Gs)),e.spent_time_counter<=0?(l(),i("span",Hs,"Оформить")):(l(),i("span",Rs,"Осталось ждать "+c(e.spent_time_counter)+" сек.",1))],8,Es)],32)):r("",!0)],512),[[v,e.tab===2]])])])])),[[g,e.doSwipeLeft,"swipe",{left:!0}],[g,e.doSwipeRight,"swipe",{right:!0}]])}}}),Qs={},oo=Object.assign(Qs,{__name:"Main",setup(a){return(e,s)=>(l(),f(Ks))}});export{oo as default};
