import{j as h,o as a,k as i,n as t,N as _,Y as b,a9 as k,p as u,M as n,F as c,K as g,a0 as y,L as d,H as p}from"./index.es-c4852431.js";import{P as f}from"./Pagination-b758f7ed.js";const v={class:"form-floating mb-2"},$=t("label",{for:""},[t("i",{class:"fa fa-search"}),u(" Поиск страниц")],-1),P={class:"form-floating my-2"},w=t("option",{value:"id"},"По номеру страницы",-1),x=t("option",{value:"updated_at"},"По дате добавления",-1),j=[w,x],S=t("label",{for:"floatingSelect"},"Сортировать по...",-1),C={key:0},D=t("i",{class:"fa-solid fa-caret-up"},null,-1),O=t("i",{class:"fa-solid fa-caret-down"},null,-1),L={key:1,class:"list-group w-100"},B={class:"d-flex justify-content-between align-items-center"},I=["onClick"],V={class:"badge bg-primary mr-2 rounded-5",style:{"font-size":"10px"}},z={key:0},N={key:1},F=t("i",{class:"fa-solid fa-lock"},null,-1),G=[F],M={class:"component-icons mt-2"},U={key:0},E=t("i",{class:"fa-regular fa-images"},null,-1),T=[E],H={key:1},K=t("i",{class:"fa-regular fa-note-sticky"},null,-1),Y=[K],q={key:2},A=t("i",{class:"fa-solid fa-photo-film"},null,-1),J=[A],Q={key:3},R=t("i",{class:"fa-regular fa-file-audio"},null,-1),W=[R],X={key:4},Z=t("i",{class:"fa-regular fa-file-word"},null,-1),ee=[Z],te={key:5},se=t("i",{class:"fa-solid fa-link"},null,-1),oe=[se],ae={key:6},ie=t("i",{class:"fa-solid fa-scroll"},null,-1),le=[ie],ne={key:7},de=t("i",{class:"fa-regular fa-comment-dots"},null,-1),re=[de],ce={key:8},ue=t("i",{class:"fa-solid fa-scale-balanced"},null,-1),ge=[ue],_e={key:9},he=t("i",{class:"fa-regular fa-keyboard"},null,-1),pe=[he],fe={key:10},me=t("i",{class:"fa-solid fa-ellipsis"},null,-1),be=[me],ye={key:0,class:"dropdown"},ke=t("button",{class:"btn",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),ve={class:"dropdown-menu"},$e=["onClick"],Pe=["onClick"],we={key:3,class:"alert alert-warning",role:"alert"},xe={key:4,class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},je={props:["current","editor"],data(){return{bot:null,loading:!0,pages:[],sort:{param:"id",direction:"desc"},search:null,pages_paginate_object:null,need_new_page:!1}},computed:{...h(["getPages","getPagesPaginateObject"])},mounted(){this.loadPages(),window.addEventListener("reload-page-list",o=>{this.loadPages()})},methods:{changeDirection(o){this.sort.direction=o,this.loadPages(0)},duplicatePage(o){let e=this.pages.findIndex(l=>l.id===o);e!==-1&&(this.pages[e].before_duplicate=!0),this.$store.dispatch("duplicatePage",{dataObject:{pageId:o}}).then(l=>{this.$notify({title:"Управление страница",text:"Страница успешно продублирована!",type:"success"}),this.sort.param="id",this.sort.direction="desc",this.loadPages()}).catch(()=>{this.$notify({title:"Управление страница",text:"Ошибка дублирования страницы!",type:"error"})})},removePage(o){let e=this.pages.findIndex(l=>l.id===o);e!==-1&&(this.pages[e].before_deleted=!0),this.$store.dispatch("removePage",{dataObject:{pageId:o}}).then(l=>{this.$notify({title:"Управление страница",text:"Страница успешно удалена!",type:"success"}),this.loadPages()}).catch(()=>{this.$notify({title:"Управление страница",text:"Ошибка удаления страницы!",type:"error"})})},selectPage(o){this.$emit("callback",o)},nextPages(o){this.loadPages(o)},loadPages(o=0){this.$store.dispatch("loadPages",{dataObject:{search:this.search,order_by:this.sort.param||null,direction:this.sort.direction||"asc"},page:o}).then(e=>{this.pages=this.getPages,this.pages_paginate_object=this.getPagesPaginateObject}).catch(()=>{})}}},Qe=Object.assign(je,{__name:"PageList",setup(o){return(e,l)=>(a(),i(c,null,[t("div",v,[_(t("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>e.search=s),class:"form-control",placeholder:"Поиск страницы"},null,512),[[b,e.search]]),$]),t("div",P,[_(t("select",{onChange:l[1]||(l[1]=s=>e.loadPages(0)),"onUpdate:modelValue":l[2]||(l[2]=s=>e.sort.param=s),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},j,544),[[k,e.sort.param]]),S]),e.sort.param!=null?(a(),i("p",C,[u("Направление сортировки: "),e.sort.direction==="asc"?(a(),i("span",{key:0,class:"fw-bold",onClick:l[3]||(l[3]=s=>e.changeDirection("desc"))},[u("по возрастанию "),D])):n("",!0),e.sort.direction==="desc"?(a(),i("span",{key:1,class:"fw-bold",onClick:l[4]||(l[4]=s=>e.changeDirection("asc"))},[u("по убыванию "),O])):n("",!0)])):n("",!0),t("button",{class:"btn btn-primary p-3 mb-3 w-100",onClick:l[5]||(l[5]=(...s)=>e.loadPages&&e.loadPages(...s)),type:"button",id:"button-addon2"},"Найти "),e.pages.length>0?(a(),i("ul",L,[(a(!0),i(c,null,g(e.pages,(s,m)=>(a(),i("li",{class:y([{"bg-danger text-white":s.before_deleted,"bg-success text-white":s.before_duplicate},"list-group-item cursor-pointer px-2 py-2 border-light"])},[t("div",B,[t("strong",{onClick:r=>e.selectPage(s)},[t("span",V,"#"+d(s.id||"Не указано"),1),s.slug?(a(),i("span",z,d(s.slug.command||"Не указано"),1)):n("",!0),o.current&&o.current===s.id?(a(),i("span",N,G)):n("",!0),t("ul",M,[(s.images||[]).length>0?(a(),i("li",U,T)):n("",!0),s.sticker?(a(),i("li",H,Y)):n("",!0),(s.videos||[]).length>0?(a(),i("li",q,J)):n("",!0),(s.audios||[]).length>0?(a(),i("li",Q,W)):n("",!0),(s.documents||[]).length>0?(a(),i("li",X,ee)):n("",!0),s.next_page_id?(a(),i("li",te,oe)):n("",!0),s.next_bot_menu_slug_id?(a(),i("li",ae,le)):n("",!0),s.next_bot_dialog_command_id?(a(),i("li",ne,re)):n("",!0),s.rules_if?(a(),i("li",ce,ge)):n("",!0),s.reply_keyboard_id?(a(),i("li",_e,pe)):n("",!0),s.inline_keyboard_id?(a(),i("li",fe,be)):n("",!0)])],8,I),o.editor?(a(),i("div",ye,[ke,t("ul",ve,[t("li",null,[t("a",{class:"dropdown-item",onClick:r=>e.duplicatePage(s.id),href:"javascript:void(0)"},"Дублировать",8,$e)]),t("li",null,[t("a",{class:"dropdown-item",onClick:r=>e.removePage(s.id),href:"javascript:void(0)"},"Удалить",8,Pe)])])])):n("",!0)])],2))),256))])):n("",!0),e.pages_paginate_object?(a(),p(f,{key:2,simple:!0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):(a(),i("div",we," Созданных страниц не найдено! ")),o.editor?(a(),i("nav",xe,[t("button",{onClick:l[6]||(l[6]=s=>e.selectPage(null)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center"}," Добавить новую страницу ")])):n("",!0)],64))}});const Se=t("h6",null,"Добавление нового скрипта в бота",-1),Ce={class:"form-floating"},De=t("label",{for:""},"Поиск скрипта",-1),Oe=["onClick"],Le={class:"form-control d-flex flex-column mb-2"},Be={class:"fw-bold"},Ie={class:"fst-italic",style:{"font-size":"12px"}},Ve={key:1,class:"alert alert-light",role:"alert"},ze={class:"mb-3"},Ne={props:["global","selected"],data(){return{load:!1,paginate:null,search:null,slugs:[]}},computed:{...h(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(o=>{let e=o.slug||"",l=o.command||"",s=o.comment||"";return l.toLowerCase().indexOf(this.search.toLowerCase())!==-1||s.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(o){this.loadSlugs(o)},selectSlug(o){this.$emit("callback",{id:o.id||null,slug:o.slug,comment:o.comment,command:o.command}),this.$notify({title:"Скрипты",text:"Вы выбрали скрипт из списка"})},loadSlugs(o){this.$store.dispatch("loadSlugs",{dataObject:{needGlobal:this.global||!1},page:o}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})}}},Re=Object.assign(Ne,{__name:"BotSlugListSimple",setup(o){return(e,l)=>(a(),i(c,null,[Se,t("div",Ce,[_(t("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":l[0]||(l[0]=s=>e.search=s),placeholder:"Поиск нужного скрипта по описанию"},null,512),[[b,e.search]]),De]),e.filteredSlugs.length>0?(a(!0),i(c,{key:0},g(e.filteredSlugs,(s,m)=>(a(),i("div",{onClick:r=>e.selectSlug(s),class:"input-group mb-0 align-items-start"},[t("div",{class:y(["input-group-text d-flex flex-column",{"bg-primary text-white":o.selected==s.id}]),style:{"font-size":"12px"},id:"basic-addon1"},[t("span",null," #"+d(s.id),1)],2),t("p",Le,[t("span",Be,d(s.command||"Нет команды"),1),t("span",Ie,d(s.comment||"Нет описания"),1)])],8,Oe))),256)):(a(),i("div",Ve,' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')),t("div",ze,[e.paginate?(a(),p(f,{key:0,simple:!0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):n("",!0)])],64))}}),Fe={key:0},Ge={class:"mb-2"},Me={class:"mb-2"},Ue={key:0,class:"list-group list-boxes"},Ee=["onClick"],Te={class:"bg-primary badge"},He={key:1,class:"alert alert-warning",role:"alert"},Ke={data(){return{loading:!0,dialogs:[],search:null,dialogs_paginate_object:null}},computed:{...h(["getDialogs","getDialogsPaginateObject"])},mounted(){this.loadDialogs()},methods:{selectDialog(o){this.$emit("select-dialog",o),this.$notify({title:"Диалоги",text:"Вы выбрали диалог из списка!",type:"success"})},nextDialogs(o){this.loadDialogs(o)},loadDialogs(o=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{search:this.search},page:o}).then(e=>{this.loading=!1,this.dialogs=this.getDialogs,this.dialogs_paginate_object=this.getDialogsPaginateObject}).catch(()=>{this.loading=!1})}}},We=Object.assign(Ke,{__name:"BotDialogGroupListSimple",setup(o){return(e,l)=>e.dialogs.length>0?(a(),i("div",Fe,[(a(!0),i(c,null,g(e.dialogs,(s,m)=>(a(),i("div",Ge,[t("p",Me," #"+d(s.id)+" - "+d(s.title||"Не указано ")+" ("+d(s.slug||"Не указано")+")",1),s.bot_dialog_commands.length>0?(a(),i("div",Ue,[(a(!0),i(c,null,g(s.bot_dialog_commands,(r,Ye)=>(a(),i("div",{onClick:qe=>e.selectDialog(r),class:"border rounded-2 p-3 mb-2"},[t("span",Te,"#"+d(r.id),1),u(" "+d(r.pre_text||"-"),1)],8,Ee))),256))])):n("",!0)]))),256)),e.dialogs_paginate_object?(a(),p(f,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialogs_paginate_object},null,8,["onPagination_page","pagination"])):n("",!0)])):(a(),i("div",He," У выбранного бота нет созданных диалоговых групп "))}});export{Qe as _,Re as a,We as b};
