import{a as Rs,o as l,g as a,j as t,n as C,t as p,k as dt,l as u,p as T,F as v,q as O,s as _,u as G,w as f,v as k,x as M,y as ie,z as ze,A as jt,B as A,C as W,D as Yn,G as Et,H as Ii,f as Fa,J as ct,K as Ie,L as Qe,M as tt,N as z,O as Ge,P as Ke,Q as Wi,R as Ve,S as dp,T as cp,U as up,W as mp,X as hp,Y as Ca,h as ko,c as pp,E as _p,m as fp,r as bp,b as gp,V as yp,d as vp,e as $p,I as kp,i as wp,_ as Z}from"./index.es-7fe923e3.js";import{P as Ce,_ as Dt,a as Fp,c as Cp,b as Pp,V as Sp,e as xp,v as jp}from"./vue3-simple-typeahead-af322e2b.js";import{_ as oe}from"./_plugin-vue_export-helper-c27b6911.js";import{T as Pa}from"./TelegramChannelHelper-510d1a84.js";import{s as oo,a as wo,b as Sa,c as Fo,d as io,e as xa,f as Hn,g as Op}from"./base64-de67e476.js";import{K as oi}from"./main-f4ba7aa5.js";import{V as qs}from"./vue3-json-editor.esm.prod-2ea2d4db.js";import{v as Bt}from"./v4-4a60fe23.js";import{C as Yi,S as Go,P as Qn,N as Gn}from"./carousel.es-cb3e1d04.js";import{P as ja}from"./TelegramChannelHelper.vue_vue_type_style_index_0_lang-3e1392ba.js";import"./GlobalSlugList-dfed2e14.js";import{i as Tp}from"./vue3-perfect-scrollbar-8aa20407.js";import{u as Up}from"./index-7fa68054.js";window.axios=Rs;window.self.config=window.self.config||{};window.self.config.favorites=[];window.getDeviceType=function(){const s=navigator.userAgent.toLowerCase();return/iphone|ipad|ipod/.test(s)||navigator.userAgent.includes("Mac")&&"ontouchend"in document?"ios":/android/.test(s)?"android":"desktop"};window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Ip={notification(s,e,o="notification"){window.dispatchEvent(new CustomEvent(o,{detail:{title:s,text:e}}))},success(s,e){this.notification(s,e,"success")},warning(s,e){this.notification(s,e,"warning")}},Vp={open(s){window.dispatchEvent(new CustomEvent("open-page-menu-modal",{detail:{id:s}}))},keyboard(s,e){window.dispatchEvent(new CustomEvent("open-keyboard-editor",{detail:{select:s,keyboard:e}}))},reloadPageList(){window.dispatchEvent(new CustomEvent("reload-page-list"))},map(){window.dispatchEvent(new CustomEvent("open-map-modal"))},mapCallback(s){window.dispatchEvent(new CustomEvent("select-map-coords",{detail:{param:s}}))},rules(){window.dispatchEvent(new CustomEvent("open-rules-modal"))},selectRule(s){window.dispatchEvent(new CustomEvent("select-rule-event",{detail:{rule:s}}))},telegramChannelHelper(s){window.dispatchEvent(new CustomEvent("open-tg-helper-modal",{detail:{param:s}}))},telegramChannelCallback(s,e){window.dispatchEvent(new CustomEvent("select-telegram-channel-id",{detail:{channel:e,param:s}}))},notes(s){window.dispatchEvent(new CustomEvent("open-notes-modal",{detail:{param:s}}))},selectNote(s,e){window.dispatchEvent(new CustomEvent("select-notes-event",{detail:{note:s,param:e}}))}},Mp={add(s=null){window.dispatchEvent(new CustomEvent("add-to-cart",{detail:{product:s}}))}},Ap={show(s=null){window.dispatchEvent(new CustomEvent("show-chashback-info",{detail:{item:s}}))},eventInfo(s=null){window.dispatchEvent(new CustomEvent("show-event-info",{detail:{item:s}}))},qr(s){window.dispatchEvent(new CustomEvent("show-qr-code",{detail:{code:s}}))}},Ep={show(s){console.log("SHOW EVENT",s),window.dispatchEvent(new CustomEvent("product-info-event",{detail:{product:s}}))}},Dp={toggle(){window.dispatchEvent(new CustomEvent("preloader-toggle"))},hide(){window.dispatchEvent(new CustomEvent("preloader-hide"))},show(){window.dispatchEvent(new CustomEvent("preloader-show"))}},zp={props:{rating:{type:Number,default:0}}},Bp={class:"mb-0"};function Lp(s,e,o,n,i,r){return l(),a("p",Bp,[t("i",{class:C(["fa fa-star",{"text-primary":o.rating>=1,"text-dark":o.rating<1}])},null,2),t("i",{class:C(["fa fa-star",{"text-primary":o.rating>=2,"text-dark":o.rating<2}])},null,2),t("i",{class:C(["fa fa-star",{"text-primary":o.rating>=3,"text-dark":o.rating<3}])},null,2),t("i",{class:C(["fa fa-star",{"text-primary":o.rating>=4,"text-dark":o.rating<4}])},null,2),t("i",{class:C(["fa fa-star",{"text-primary":o.rating>=5,"text-dark":o.rating<5}])},null,2)])}const Uo=oe(zp,[["render",Lp]]),Rp={class:"item bg-theme pb-3 rounded-m shadow-l"},Np={class:"card-bottom"},qp={class:"color-white text-center pr-2 pb-2"},Wp=t("div",{class:"card-overlay bg-gradient"},null,-1),Yp={class:"d-flex px-3"},Hp={class:"mb-n1"},Qp={key:0,class:"opacity-60"},Gp={key:1,class:"color-red1-dark mb-0 font-11"},Kp=["disabled"],Jp=t("i",{class:"fa-solid fa-cart-plus"},null,-1),Xp=[Jp],Zp={props:["item"],data(){return{showCart:!1}},computed:{currentPrice(){return this.item.current_price/100},oldPrice(){return this.item.old_price/100}},methods:{addToCart(){this.$cart.add(this.item)},goToProduct(){this.$router.push({name:"product",params:{productId:this.item.id}})}}},Hl=Object.assign(Zp,{__name:"ProductItemMini",setup(s){return(e,o)=>(l(),a("div",Rp,[t("div",{"data-card-height":"200",class:"card mb-3",onClick:o[0]||(o[0]=(...n)=>e.goToProduct&&e.goToProduct(...n)),style:dt([{height:"200px"},{"background-image":"url("+(s.item.images[0]||"")+")"}])},[t("div",Np,[t("h5",qp,p(s.item.title||"Без названия"),1)]),Wp],4),t("div",Yp,[t("div",null,[t("h3",Hp,p(s.item.current_price||0)+"₽",1),s.item.old_price>0?(l(),a("span",Qp,"было "+p(s.item.old_price||0)+"₽",1)):u("",!0),T(Uo,{rating:s.item.rating},null,8,["rating"]),s.item.in_stop_list_at?(l(),a("p",Gp,"Нет в наличии")):u("",!0),t("button",{type:"button",onClick:o[1]||(o[1]=(...n)=>e.addToCart&&e.addToCart(...n)),class:C([{"bg-gray":s.item.in_stop_list_at!=null,"bg-highlight":s.item.in_stop_list_at==null},"btn btn-xs btn-center-xs rounded-s shadow-s text-uppercase font-900"]),disabled:s.item.in_stop_list_at!=null},Xp,10,Kp)])])]))}}),e_={props:["item"],data(){return{showCart:!1}},computed:{currentPriceParts(){return{right:"00",left:this.item.current_price}},currentPrice(){return this.item.current_price/100},oldPrice(){return this.item.old_price/100}},methods:{addToCart(){this.$cart.add(this.item)},goToProduct(){this.$router.push({name:"product",params:{productId:this.item.id}})}}},t_={class:"card-top mt-3 mr-3"},s_=t("i",{class:"fa fa-shopping-cart"},null,-1),o_=[s_],i_=t("a",{href:"javascript:void(0)",class:"icon icon-s rounded-l shadow-xl bg-red2-dark color-white float-right ml-2 mr-2"},[t("i",{class:"fa fa-heart"})],-1),n_={class:"content mb-0"},l_={class:"d-flex"},a_={style:{"line-height":"130%"},class:"mb-n1 font-600 color-highlight d-flex flex-column"},r_={class:"font-700"},d_={class:"ml-auto"},c_={class:"font-300 opacity-30"},u_={key:0,class:"badge bg-highlight color-white px-3 py-1 mt-n1 text-uppercase d-block"},m_=t("div",{class:"card-overlay bg-gradient-fade rounded-l"},null,-1),h_=t("div",{class:"card-overlay"},null,-1);function p_(s,e,o,n,i,r){return l(),a("div",{class:"card rounded-l shadow-xl bg-18 mb-3 d-block",style:dt([{"background-image":"url("+(o.item.images[0]||"")+")"},{height:"320px",margin:"20px"}]),"data-card-height":"320"},[t("div",t_,[t("button",{type:"button",onClick:e[0]||(e[0]=(...d)=>r.addToCart&&r.addToCart(...d)),style:{width:"50px",height:"50px"},class:"btn rounded-l shadow-xl bg-highlight color-white float-right"},o_),i_]),t("div",{class:"card-bottom mb-3",onClick:e[1]||(e[1]=(...d)=>r.goToProduct&&r.goToProduct(...d))},[t("div",n_,[t("div",l_,[t("div",null,[t("p",a_,[(l(!0),a(v,null,O(o.item.categories,d=>(l(),a("span",null,p(d.title||"Без категории"),1))),256))]),t("h1",r_,p(o.item.title||"Нет заголовка"),1)]),t("div",d_,[t("h1",null,[_("₽"+p(r.currentPriceParts.left),1),t("sup",c_,p(r.currentPriceParts.right),1)]),r.oldPrice>0?(l(),a("span",u_,"Скидки")):u("",!0)])])])]),m_,h_],4)}const __=oe(e_,[["render",p_]]),es={handler(){$(window).on("load",function(){$(".menu").css("display","block"),$("#preloader").addClass("preloader-hide")}),$(document).ready(function(){function s(){var e=[["none","","",""],["red1","#D8334A","#BF263C","#9d0f23"],["red2","#ED5565","#DA4453","#a71222"],["orange","#FC6E51","#E9573F","#ce3319"],["yellow1","#FFCE54","#F6BB42","#e6a00f"],["yellow2","#E8CE4D","#E0C341","#dbb50c"],["green1","#A0D468","#8CC152","#5ba30b"],["green2","#2ECC71","#2ABA66","#0da24b"],["mint","#48CFAD","#37BC9B","#0fa781"],["teal","#A0CECB","#7DB1B1","#158383"],["aqua","#4FC1E9","#3BAFDA","#0a8ab9"],["blue1","#4FC1E9","#3BAFDA","#0b769d"],["blue2","#5D9CEC","#4A89DC","#1a64c6"],["magenta1","#AC92EC","#967ADC","#704dc9"],["magenta2","#8067B7","#6A50A7","#4e3190"],["pink1","#EC87C0","#D770AD","#c73c8e"],["pink2","#fa6a8e","#fb3365","#d30e3f"],["brown1","#BAA286","#AA8E69","#896b43"],["brown2","#8E8271","#7B7163","#584934"],["gray1","#F5F7FA","#E6E9ED","#c2c5c9"],["gray2","#CCD1D9","#AAB2BD","#88919d"],["dark1","#656D78","#434A54","#242b34"],["dark2","#3C3B3D","#323133","#1c191f"]],o=[["facebook","#3b5998"],["linkedin","#0077B5"],["twitter","#4099ff"],["google","#d34836"],["whatsapp","#34AF23"],["pinterest","#C92228"],["sms","#27ae60"],["mail","#3498db"],["dribbble","#EA4C89"],["phone","#27ae60"],["skype","#12A5F4"],["instagram","#e1306c"]],n=$(".menu");$("body"),$(".nav-fixed");var i=$("#footer-bar");$(".close-menu");var r=$(".header");$("#page"),$(".page-content");var d=$(".header, .page-content, #footer-bar");"scrollRestoration"in history&&(history.scrollRestoration="manual"),$("a").on("click",function(){var U=$(this).attr("href");if(U==="#")return!1}),$.fn.showMenu=function(){$(this).addClass("menu-active"),$("#footer-bar").addClass("footer-menu-hidden"),setTimeout(function(){$(".menu-hider").addClass("menu-active")},250)},$.fn.hideMenu=function(){$(this).removeClass("menu-active"),$("#footer-bar").removeClass("footer-menu-hidden"),$(".menu-hider").removeClass("menu-active")};function c(){$(".menu-hider").length||$("#page").append('<div class="menu-hider"><div>');var U=$(".menu-hider"),X=$("[data-menu]");n.each(function(){var ue=$(this).data("menu-height"),me=$(this).data("menu-width");$(this).data("menu-active"),$(this).hasClass("menu-box-right")&&$(this).css("width",me),$(this).hasClass("menu-box-left")&&$(this).css("width",me),$(this).hasClass("menu-box-bottom")&&$(this).css("height",ue),$(this).hasClass("menu-box-top")&&$(this).css("height",ue),$(this).hasClass("menu-box-modal")&&$(this).css({height:ue,width:me})}),X.on("click",function(){n.removeClass("menu-active"),U.addClass("menu-active");var ue=$(this).data("menu"),me=$("#"+ue),we=$("#"+ue).data("menu-effect"),Ae=me.data("menu-width"),be=me.data("menu-height");$("body").addClass("modal-open"),me.hasClass("menu-header-clear")&&U.addClass("menu-active-clear");function We(){me=me.addClass("menu-active")}return me.hasClass("menu-box-bottom")&&$("#footer-bar").addClass("footer-menu-hidden"),we==="menu-parallax"&&(me.hasClass("menu-box-bottom")&&d.css("transform","translateY("+be/5*-1+"px)"),me.hasClass("menu-box-top")&&d.css("transform","translateY("+be/5+"px)"),me.hasClass("menu-box-left")&&d.css("transform","translateX("+Ae/5+"px)"),me.hasClass("menu-box-right")&&d.css("transform","translateX("+Ae/5*-1+"px)")),we==="menu-push"&&(me.hasClass("menu-box-bottom")&&d.css("transform","translateY("+be*-1+"px)"),me.hasClass("menu-box-top")&&d.css("transform","translateY("+be+"px)"),me.hasClass("menu-box-left")&&d.css("transform","translateX("+Ae+"px)"),me.hasClass("menu-box-right")&&d.css("transform","translateX("+Ae*-1+"px)")),we==="menu-push-full"&&(me.hasClass("menu-box-left")&&d.css("transform","translateX(100%)"),me.hasClass("menu-box-right")&&d.css("transform","translateX(-100%)")),We(),!1});var Y=$("[data-auto-activate]");Y.length&&(Y.addClass("menu-active"),U.addClass("menu-active")),$("body").removeClass("modal-open"),$(".menu-hider, .close-menu, .menu-close").on("click",function(){return n.removeClass("menu-active"),U.removeClass("menu-active menu-active-clear"),d.css("transform","translate(0,0)"),U.css("transform","translate(0,0)"),$("#footer-bar").removeClass("footer-menu-hidden"),$("body").removeClass("modal-open"),!1}),setTimeout(function(){var ue=$("#menu-main").data("menu-active");if($("#"+ue).addClass("nav-item-active"),$("[data-submenu]").on("click",function(){$(this).toggleClass("nav-item-active"),$(this).find(".fa-chevron-right").toggleClass("rotate-90");var we=$(this).data("submenu");return $("#"+we).slideToggle(250),!1}),$("[data-submenu]").each(function(){var we=$(this).data("submenu"),Ae=$("#"+we).children().length;$(this).find("strong").html(Ae)}),$(".nav-item-active").data("submenu")){$(".nav-item-active").find(".fa-chevron-right").toggleClass("rotate-90");var me=$(".nav-item-active").data("submenu");$("#"+me).slideDown(250)}$(".nav-item-active").parent().hasClass("submenu")&&$(".nav-item-active").parent().slideDown(250)},250)}function h(U,X,Y){if(Y){var ue=new Date;ue.setTime(ue.getTime()+48*Y*60*3600*1e3);var me="; expires="+ue.toGMTString()}else var me="";document.cookie=U+"="+X+me+"; path=/"}function g(U){for(var X=U+"=",Y=document.cookie.split(";"),ue=0;ue<Y.length;ue++){for(var me=Y[ue];me.charAt(0)==" ";)me=me.substring(1,me.length);if(me.indexOf(X)==0)return me.substring(X.length,me.length)}return null}function w(U){h(U,"",-1)}function x(){$("body").find("#transitions-remove").remove()}function P(){$("body").append('<style id="transitions-remove">.btn, .header, #footer-bar, .menu-box, .menu-active, #page, .page-content{transition:all 0ms ease!important;}</style>'),setTimeout(function(){x()},10)}function I(){var U=$("[data-toggle-theme-switch], [data-toggle-theme], [data-toggle-theme-switch] input, [data-toggle-theme] input");$("[data-toggle-theme], [data-toggle-theme-switch]").off().on("click",function(){return P(),$("body").toggleClass("theme-light theme-dark"),setTimeout(function(){$("body").hasClass("detect-theme")&&$("body").removeClass("detect-theme"),$("body").hasClass("theme-light")&&(w("azures_dark_mode"),U.prop("checked",!1),h("azures_light_mode",!0,1)),$("body").hasClass("theme-dark")&&(w("azures_light_mode"),U.prop("checked",!0),h("azures_dark_mode",!0,1))},150),!1}),g("azures_dark_mode")&&(U.prop("checked",!0),$("body").removeClass("theme-light").addClass("theme-dark")),g("azures_light_mode")&&(U.prop("checked",!1),$("body").removeClass("theme-dark").addClass("theme-light"));function X(){$("body").removeClass("theme-light").addClass("theme-dark"),$("#dark-mode-detected").removeClass("disabled"),w("azures_light_mode"),h("azures_dark_mode",!0,1)}function Y(){$("body").removeClass("theme-dark").addClass("theme-light"),$("#dark-mode-detected").removeClass("disabled"),w("azures_dark_mode"),h("azures_light_mode",!0,1)}function ue(){$("#manual-mode-detected").removeClass("disabled")}function me(){const we=window.matchMedia("(prefers-color-scheme: dark)").matches,Ae=window.matchMedia("(prefers-color-scheme: light)").matches;window.matchMedia("(prefers-color-scheme: no-preference)").matches,window.matchMedia("(prefers-color-scheme: dark)").addListener(be=>be.matches&&X()),window.matchMedia("(prefers-color-scheme: light)").addListener(be=>be.matches&&Y()),window.matchMedia("(prefers-color-scheme: no-preference)").addListener(be=>be.matches&&ue()),we&&X(),Ae&&Y()}$("body").hasClass("detect-theme")&&me(),$(".detect-dark-mode").on("click",function(){return $("body").addClass("detect-theme"),me(),!1}),$(".disable-auto-dark-mode").on("click",function(){return $("body").removeClass("detect-theme"),$(this).remove(),!1})}I(),$(".footer-bar-2, .footer-bar-4, .footer-bar-5").length&&($(".footer-bar-2 strong, .footer-bar-4 strong, .footer-bar-5 strong").length||$(".footer-bar-2 .active-nav, .footer-bar-4 .active-nav, .footer-bar-5 .active-nav").append("<strong></strong>"));var V=$(".back-button, [data-back-button]");V.on("click",function(){window.history.go(-1)});var B=$(".copyright-year, #copyright-year"),L=new Date,ee=L.getFullYear();B.html(ee);function J(){$(".back-to-top").off().on("click",function(U){return U.preventDefault(),$("html, body").animate({scrollTop:0},350),!1})}J();var re=$(".back-to-top, [data-back-to-top], .back-to-top-badge, .back-to-top-icon"),se=$(".back-to-top-badge, .back-to-top-icon");re.on("click",function(U){return U.preventDefault(),$("html, body, .page-content").animate({scrollTop:0},350),!1});function de(){se.addClass("back-to-top-visible")}function K(){se.removeClass("back-to-top-visible")}var ne=$(".scroll-ad");function te(){ne.addClass("scroll-ad-visible")}function E(){ne.removeClass("scroll-ad-visible")}$(window).on("scroll",function(){var U=document.body.scrollHeight,X=$(this).scrollTop()<=150,Y=$(this).scrollTop()>=0;$(this).scrollTop()>=150;var ue=$(this).scrollTop()>=U-($(window).height()+300);X===!0?(K(),E(),$(".header-auto-show").removeClass("header-active")):Y===!0&&(de(),te(),$(".header-auto-show").addClass("header-active")),ue==!0&&(K(),E())});var R=$(".tab-controls");function N(){var U=$(".tab-controls a");R.each(function(){var X=$(this).parent().find(".tab-controls").data("tab-items");$(this).width();var Y=$(this).find("a[data-tab-active]"),ue=$("#"+Y.data("tab")),me=$(this).data("tab-active");$(this).find("a[data-tab]").css("width",100/X+"%"),Y.addClass(me),Y.addClass("color-white"),ue.slideDown(0)}),U.on("click",function(){var X=$(this).data("tab"),Y=$("#"+X),ue=$(this).parent().parent().find(".tab-content"),ue=$(this).parent().parent().parent().find(".tab-content");$(this).data("tab-order");var me=$(this).parent().parent().find(".tab-controls").data("tab-active");$(this).parent().find(U).removeClass(me).removeClass("color-white"),$(this).addClass(me).addClass("color-white"),$(this).parent().find("a").removeClass("no-click"),$(this).addClass("no-click"),ue.slideUp(250),Y.slideDown(250)})}R.length&&N(),$(".text-size-increase").click(function(){$(".text-size-changer *").css("font-size","+=1")}),$(".text-size-decrease").click(function(){$(".text-size-changer *").css("font-size","-=1")}),$(".text-size-default").click(function(){$(".text-size-changer *").css("font-size","")});function q(){return $("[data-search]").on("keyup",function(){var U=$(this).val();U!=""?($(".search-header a").removeClass("disabled"),$(".search-trending").addClass("disabled"),$(".search-results").removeClass("disabled-search-list"),$("[data-filter-item]").addClass("disabled-search-item"),$('[data-filter-item][data-filter-name*="'+U.toLowerCase()+'"]').removeClass("disabled-search-item")):($(".search-header a").removeClass("disabled"),$(".search-trending").removeClass("disabled"),$(".search-results").addClass("disabled-search-list"),$("[data-filter-item]").removeClass("disabled-search-item"));var X=$(".search-no-results"),Y=$(".search-results").find(".search-result-list.disabled-search-item");Y.length?X.removeClass("disabled"):X.addClass("disabled")}),!1}q(),$(".search-trending a").on("click",function(){var U=jQuery.Event("keydown");U.which=32,$(".search-trending").addClass("disabled");var X=$(this).find("span").text().toLowerCase();return $(".search-header a").removeClass("disabled"),$(".search-header input").val(X),$(".search-results").removeClass("disabled-search-list"),$("[data-filter-item]").addClass("disabled-search-item"),$('[data-filter-item][data-filter-name*="'+X.toLowerCase()+'"]').removeClass("disabled-search-item"),$(".menu-search-trending").addClass("disabled-search-item"),!1}),$(".search-header a").on("click",function(){return $(".search-trending").removeClass("disabled"),$(".menu-search-trending").removeClass("disabled-search-item"),$(".search-results").addClass("disabled-search-list"),$(".search-header input").val(""),$(this).addClass("disabled"),!1}),setTimeout(function(){$(".user-slider").owlCarousel({loop:!1,margin:20,nav:!1,lazyLoad:!0,items:1,autoplay:!1,dots:!1,autoplayTimeout:4e3}),$(".user-list-slider").owlCarousel({loop:!0,margin:20,nav:!1,stagePadding:30,lazyLoad:!0,items:4,autoplay:!1,dots:!1,autoplayTimeout:4e3}),$(".single-slider").owlCarousel({loop:!0,margin:20,nav:!1,lazyLoad:!0,items:1,autoplay:!0,autoplayTimeout:4e3}),$(".single-slider-boxed").owlCarousel({loop:!0,stagePadding:30,margin:20,nav:!1,lazyLoad:!0,items:1,autoplay:!0,autoplayTimeout:4e3}),$(".cover-slider").owlCarousel({loop:!0,margin:0,nav:!1,lazyLoad:!0,items:1,autoplay:!0,autoplayTimeout:6e3}),$(".double-slider").owlCarousel({loop:!0,margin:20,stagePadding:20,nav:!1,lazyLoad:!1,items:2,autoplay:!1,autoplayTimeout:4e3}),$(".task-slider").owlCarousel({loop:!0,margin:20,nav:!1,stagePadding:50,lazyLoad:!0,items:2,autoplay:!1,autoplayTimeout:4e3}),$(".next-slide, .next-slide-arrow, .next-slide-text, .cover-next").on("click",function(){$(this).parent().find(".owl-carousel").trigger("next.owl.carousel")}),$(".prev-slide, .prev-slide-arrow, .prev-slide-text, .cover-prev").on("click",function(){$(this).parent().find(".owl-carousel").trigger("prev.owl.carousel")}),$(".next-slide-user").on("click",function(){$(this).closest(".owl-carousel").trigger("next.owl.carousel")}),$(".prev-slide-user").on("click",function(){$(this).closest(".owl-carousel").trigger("prev.owl.carousel")})},1e3),setTimeout(function(){$(".owl-prev, .owl-next").addClass("bg-highlight")});var Q={Android:function(){return navigator.userAgent.match(/Android/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return Q.Android()||Q.iOS()||Q.Windows()}};Q.any()||($("body").addClass("is-not-ios"),$(".show-ios, .show-android").addClass("disabled"),$(".show-no-device").removeClass("disabled")),Q.Android()&&($("body").addClass("is-not-ios"),$("head").append('<meta name="theme-color" content="#FFFFFF"> />'),$(".show-android").removeClass("disabled"),$(".show-ios, .show-no-device, .simulate-android, .simulate-iphones").addClass("disabled")),Q.iOS()&&($("body").addClass("is-ios"),$(".show-ios").removeClass("disabled"),$(".show-android, .show-no-device, .simulate-android, .simulate-iphones").addClass("disabled")),$("[data-toast]").on("click",function(){return $(".toast, .snackbar-toast, .notification").toast("hide"),$("#"+$(this).data("toast")).toast("show"),!1}),$("[data-dismiss]").on("click",function(){var U=$(this).data("dismiss");$("#"+U).toast("hide")}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$('[data-toggle="collapse"]').length&&$('[data-toggle="collapse"]').on("click",function(U){U.preventDefault()}),$(".ios-input, .android-input, .classic-input").on("click",function(){var U=$(this).attr("id"),X=$("[data-switch="+U+"]");X.length&&X.stop().animate({height:"toggle"},250)}),$("[data-activate]").on("click",function(){var U=$(this).data("activate");$("#"+U).trigger("click")}),$("[data-trigger-switch]").on("click",function(){var U=$(this).data("trigger-switch");$("#"+U).prop("checked")?$("#"+U).prop("checked",!1):$("#"+U).prop("checked",!0)});var le=$(".business-hours");function pe(){if(le.length){var U=new Date(Date.now()),X="day-"+new Date().toLocaleDateString("en",{weekday:"long"}).toLowerCase();U.getHours()+""+U.getMinutes();var Y=$("."+X),ue=le.data("closed-message").toString(),me=le.data("closed-message-under").toString(),we=le.data("opened-message").toString(),Ae=le.data("opened-message-under").toString();$("[data-monday]").data("open"),$("[data-monday]").data("close"),$(".business-hours").openingTimes({openingTimes:{Monday:["08:00","17:00"],Tuesday:["08:00","17:30"],Wednesday:["08:00","17:00"],Thursday:["08:00","17:00"],Friday:["09:00","18:55"],Saturday:["09:00","12:00"]},openClass:"bg-green1-dark is-business-opened",closedClass:"bg-red2-dark is-business-closed"}),le.hasClass("is-business-opened")?($(".show-business-opened").removeClass("disabled"),$(".show-business-closed").addClass("disabled"),le.find("h1").html(we),le.find("p").html(Ae),le.find("#business-hours-mail").remove(),Y.addClass("bg-green1-dark")):($(".show-business-opened").addClass("disabled"),$(".show-business-closed").removeClass("disabled"),le.find("h1").html(ue),le.find("p").html(me),le.find("#business-hours-call").remove(),Y.addClass("bg-red2-dark")),Y.find("p").addClass("color-white")}}le.length&&pe();function ge(){(function(U,X,Y){if(Y in X&&X[Y]){var ue,me=U.location,we=/^(a|html)$/i;U.addEventListener("click",function(Ae){for(ue=Ae.target;!we.test(ue.nodeName);)ue=ue.parentNode;"href"in ue&&(ue.href.indexOf("http")||~ue.href.indexOf(me.host))&&(Ae.preventDefault(),me.href=ue.href)},!1),$(".add-to-home").addClass("disabled"),$("body").addClass("is-on-homescreen")}})(document,window.navigator,"standalone")}if(ge(),$(".simulate-android-badge").on("click",function(){$(".add-to-home").removeClass("add-to-home-ios").addClass("add-to-home-visible add-to-home-android")}),$(".simulate-iphone-badge").on("click",function(){$(".add-to-home").removeClass("add-to-home-android").addClass("add-to-home-visible add-to-home-ios")}),$(".add-to-home").on("click",function(){$(".add-to-home").removeClass("add-to-home-visible")}),$(".simulate-android-banner").on("click",function(){$("#menu-install-pwa-android, .menu-hider").addClass("menu-active")}),$(".simulate-ios-banner").on("click",function(){$("#menu-install-pwa-ios, .menu-hider").addClass("menu-active")}),$.card_extender=function(){if($(".is-on-homescreen").length){var U=screen.height;$(".page-content, #page").css("min-height",U)}if(!$(".is-on-homescreen").length){var U=window.innerHeight;$(".page-content, #page").css("min-height",U)}$("[data-card-height]").each(function(){var X=$(this).data("card-height"),Y=$(".header").height(),ue=$("#footer-bar").height();$(this).css("height",X),X=="cover"&&(r.length&&i.length?($(this).css("height",U-Y-ue),$(".map-full, .map-full iframe").css("height",U-Y-ue+14)):($(this).css("height",U),$(".map-full, .map-full iframe").css("height",U))),X=="cover-card"&&($(this).css("height",U-180),$(".map-full, .map-full iframe").css("height",U-180))})},$.card_extender(),$(window).resize(function(){$.card_extender()}),$(".show-map, .hide-map").on("click",function(){$(".map-full .caption").toggleClass("deactivate-map"),$(".map-but-1, .map-but-2").toggleClass("deactivate-map"),$(".map-full .hide-map").toggleClass("activate-map")}),$(".card-scale").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("card-scale-image")}),$(".card-grayscale").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("card-grayscale-image")}),$(".card-rotate").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("card-rotate-image")}),$(".card-blur").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("card-blur-image")}),$(".card-hide").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find(".card-center, .card-bottom, .card-top, .card-overlay").toggleClass("card-hide-image")}),$("#reading-progress-text").each(function(U){var X=$(this).text().split(" ").length,Y=Math.floor(X/250),ue=X%60;$(".reading-progress-words").append(X),$(".reading-progress-time").append(Y+":"+ue)}),$("[data-auto-show-ad]").length){var he=$("[data-auto-show-ad]").data("auto-show-ad");setTimeout(function(){$("[data-auto-show-ad]").trigger("click")},he*1e3)}$("[data-timed-ad]").on("click",function(){var U=$(this).data("timed-ad"),X=$("#"+$(this).data("menu"));$(".menu-hider").addClass("no-click"),X.find(".ad-time-close").addClass("no-click"),X.find(".ad-time-close i").addClass("disabled"),X.find(".ad-time-close span").removeClass("disabled");var Y=setInterval(function(){if(U--,U<=0){$(".menu-hider").removeClass("no-click"),X.find(".ad-time-close").removeClass("no-click"),X.find(".ad-time-close i").removeClass("disabled"),X.find(".ad-time-close span").addClass("disabled"),clearInterval(Y);return}else X.find(".ad-time-close span").html(U)},1e3)});function _e(U){var X,Y,ue,me,we;if(U=new Date(U),U=U.getTime(),isNaN(U))return;setInterval(Ae,1);function Ae(){var be=new Date,be=new Date(be.getUTCFullYear(),be.getUTCMonth(),be.getUTCDate(),be.getUTCHours(),be.getUTCMinutes(),be.getUTCSeconds()),We=parseInt((U-be.getTime())/1e3);if(We>=0)X=parseInt(We/31536e3),We=We%31536e3,Y=parseInt(We/86400),We=We%86400,ue=parseInt(We/3600),We=We%3600,me=parseInt(We/60),We=We%60,we=parseInt(We),$(".countdown").length&&($(".countdown #years")[0].innerHTML=parseInt(X,10),$(".countdown #days")[0].innerHTML=parseInt(Y,10),$(".countdown #hours")[0].innerHTML=("0"+ue).slice(-2),$(".countdown #minutes")[0].innerHTML=("0"+me).slice(-2),$(".countdown #seconds")[0].innerHTML=("0"+we).slice(-2));else return}}_e("01/19/2030 03:14:07 AM"),$(".accordion-btn").on("click",function(){$(this).addClass("no-click"),$(".accordion-icon").removeClass("rotate-180"),$(this).attr("aria-expanded")=="true"?$(this).parent().find(".accordion-icon").removeClass("rotate-180"):$(this).parent().find(".accordion-icon").addClass("rotate-180"),setTimeout(function(){$(".accordion-btn").removeClass("no-click")},250)}),$(".caption-scale").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("caption-scale-image")}),$(".caption-grayscale").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("caption-grayscale-image")}),$(".caption-rotate").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("caption-rotate-image")}),$(".caption-blur").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find("img").toggleClass("caption-blur-image")}),$(".caption-hide").unbind().bind("mouseenter mouseleave touchstart touchend",function(){$(this).find(".caption-center, .caption-bottom, .caption-top, .caption-overlay").toggleClass("caption-hide-image")});var Pe=$(".upload-file");function Oe(){function U(X){if(X.files&&X.files[0]){var Y=new FileReader;Y.onload=function(ue){$(".file-data img").attr("src",ue.target.result),$(".file-data img").attr("class","img-fluid rounded-xs mt-4")},Y.readAsDataURL(X.files[0])}}$(".upload-file").change(function(X){U(this),X.target.files[0].name,$(".upload-file-data").removeClass("disabled"),$(".upload-file-name").html(X.target.files[0].name),$(".upload-file-modified").html(X.target.files[0].lastModifiedDate),$(".upload-file-size").html(X.target.files[0].size/1e3+"kb"),$(".upload-file-type").html(X.target.files[0].type)})}Pe.length&&Oe();var Se=$(".todo-list");function Be(){$(".todo-list a").each(function(){$(this).find(".todo-icon").hasClass("far fa-square")?$(this).removeClass("opacity-70"):$(this).addClass("opacity-70")}),$(".todo-list a").on("click",function(){$(this).find(".todo-icon").toggleClass("far fa-square fa fa-check-square color-green1-dark"),$(this).find(".todo-icon").hasClass("far fa-square")?$(this).removeClass("opacity-70"):$(this).addClass("opacity-70")})}Se.length&&Be();var Re=$(".check-age");function Me(){$(".check-age").on("click",function(){var U=$("#date-birth-day").val(),X=$("#date-birth-month").val(),Y=$("#date-birth-year").val(),ue=18,me=new Date;me.setFullYear(Y,X-1,U);var we=new Date,Ae=new Date;return Ae.setFullYear(me.getFullYear()+ue,X-1,U),we-Ae>0?($("#menu-age").removeClass("menu-active"),$("#menu-age-okay").addClass("menu-active")):($("#menu-age").removeClass("menu-active"),$("#menu-age-fail").addClass("menu-active")),!0})}Re.length&&Me();var ce=$(".get-location");function pt(){"geolocation"in navigator?$(".location-support").html('Your browser and device <strong class="color-green2-dark">support</strong> Geolocation.'):$(".location-support").html('Your browser and device <strong class="color-red2-dark">support</strong> Geolocation.');function U(){const X=document.querySelector(".location-coordinates");function Y(me){const we=me.coords.latitude,Ae=me.coords.longitude;X.innerHTML="<strong>Longitude:</strong> "+Ae+"<br><strong>Latitude:</strong> "+we;var be="http://maps.google.com/maps?q=",We=we+",",Us=Ae,gt="&z=18&t=h&output=embed",Gt="&z=18&t=h",qt=be+We+Us+gt,lt=be+We+Us+Gt;$(".location-map").after('<iframe class="location-map" src="'+qt+'"></iframe> <div class="clearfix"></div>'),$(".location-map").parent().after(" <a href="+lt+' class="btn btn-full btn-m bg-red2-dark rounded-xs text-uppercase font-900 mb-n1 mt-3">View on Google Maps</a>')}function ue(){X.textContent="Unable to retrieve your location"}navigator.geolocation?(X.textContent="Locating",navigator.geolocation.getCurrentPosition(Y,ue)):X.textContent="Geolocation is not supported by your browser"}$(".get-location").on("click",function(){$(this).addClass("disabled"),U()})}ce.length&&pt();var _t=/^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i,ot=/^((\+[1-9]{1,4}[ \-]*)|(\([0-9]{2,3}\)[ \-]*)|([0-9]{2,4})[ \-]*)*?[0-9]{3,4}?[ \-]*[0-9]{3,4}?$/,Ct=/[A-Za-z]{2}[A-Za-z]*[ ]?[A-Za-z]*/,nt=/[A-Za-z]{2}[A-Za-z]*[ ]?[A-Za-z]*/,Ss=/^(http|https)?:\/\/[a-zA-Z0-9-\.]+\.[a-z]{2,4}/,cs=/[A-Za-z]{2}[A-Za-z]*[ ]?[A-Za-z]*/,Lt="<i class='fa fa-check color-green1-dark'></i>",Ht="<i class='fa fa-exclamation-triangle color-red2-light'></i>";$(".input-required input, .input-required select, .input-required textarea").on("focusin keyup",function(){var U=$(this).parent().find("span").text();$(this).val()!=U&&$(this).val()!=""&&$(this).parent().find("span").addClass("input-style-1-active").removeClass("input-style-1-inactive"),$(this).val()===""&&$(this).parent().find("span").removeClass("input-style-1-inactive input-style-1-active")}),$(".input-required input, .input-required select, .input-required textarea").on("focusout",function(){$(this).parent().find("span").text(),$(this).val()===""&&$(this).parent().find("span").removeClass("input-style-1-inactive input-style-1-active"),$(this).parent().find("span").addClass("input-style-1-inactive")}),$(".input-required select").on("focusout",function(){var U=$(this)[0].value;U==="default"&&($(this).parent().find("em").html(Ht),$(this).parent().find("span").removeClass("input-style-1-inactive input-style-1-active")),U!="default"&&$(this).parent().find("em").html(Lt)}),$('.input-required input[type="email"]').on("focusout",function(){_t.test($(this).val())?$(this).parent().find("em").html(Lt):$(this).val()===""?$(this).parent().find("em").html("(required)"):$(this).parent().find("em").html(Ht)}),$('.input-required input[type="tel"]').on("focusout",function(){ot.test($(this).val())?$(this).parent().find("em").html(Lt):$(this).val()===""?$(this).parent().find("em").html("(required)"):$(this).parent().find("em").html(Ht)}),$('.input-required input[type="password"]').on("focusout",function(){nt.test($(this).val())?$(this).parent().find("em").html(Lt):$(this).val()===""?$(this).parent().find("em").html("(required)"):$(this).parent().find("em").html(Ht)}),$('.input-required input[type="url"]').on("focusout",function(){Ss.test($(this).val())?$(this).parent().find("em").html(Lt):$(this).val()===""?$(this).parent().find("em").html("(required)"):$(this).parent().find("em").html(Ht)}),$('.input-required input[type="name"]').on("focusout",function(){Ct.test($(this).val())?$(this).parent().find("em").html(Lt):$(this).val()===""?$(this).parent().find("em").html("(required)"):$(this).parent().find("em").html(Ht)}),$(".input-required textarea").on("focusout",function(){cs.test($(this).val())?$(this).parent().find("em").html(Lt):$(this).val()===""?$(this).parent().find("em").html("(required)"):$(this).parent().find("em").html(Ht)}),Date.prototype.toDateInputValue=function(){var U=new Date(this);return U.setMinutes(this.getMinutes()-this.getTimezoneOffset()),U.toJSON().slice(0,10)},$('input[type="date"]').val(new Date().toDateInputValue()),Date.prototype.toDateInputValue=function(){var U=new Date(this);return U.setMinutes(this.getMinutes()-this.getTimezoneOffset()),U.toJSON().slice(0,10)},$('input[type="date"]').val(new Date().toDateInputValue());var po=$(".offline-message");po.length||($("body").append('<p class="offline-message bg-red2-dark color-white center-text uppercase ultrabold">No internet connection detected</p> '),$("body").append('<p class="online-message bg-green1-dark color-white center-text uppercase ultrabold">You are back online</p>'));function vt(){$(".offline-message").addClass("offline-message-active"),$(".online-message").removeClass("online-message-active"),setTimeout(function(){$(".offline-message").removeClass("offline-message-active")},2e3)}function Ot(){$(".online-message").addClass("online-message-active"),$(".offline-message").removeClass("offline-message-active"),setTimeout(function(){$(".online-message").removeClass("online-message-active")},2e3)}$(".simulate-offline").on("click",function(){vt()}),$(".simulate-online").on("click",function(){Ot()});function Rt(U){Ot()}function _o(U){vt()}window.addEventListener("online",Rt),window.addEventListener("offline",_o);var Qt=$(".generate-qr-result, .generate-qr-auto");function Xe(){var U=window.location.href,X="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=";$(".generate-qr-auto").attr("src",X+U),$(".generate-qr-button").on("click",function(){if(!$(this).parent().find(".fa").hasClass("fa-exclamation-triangle")){var Y=$(".generate-qr-input").val();!Y==""&&($(".generate-qr-result").empty(),setTimeout(function(){$(".generate-qr-result").append('<img class="mx-auto polaroid-effect shadow-l mt-4 delete-qr" width="200" src="'+X+Y+'" alt="img"><p class="font-11 text-center mb-0">'+Y+"</p>")},30))}})}Qt.length&&Xe();var $t=$("[data-vibrate]");function Tt(){$("[data-vibrate]").on("click",function(){var U=$(this).data("vibrate");window.navigator.vibrate(U)}),$(".start-vibrating").on("click",function(){var U=$(".vibrate-demo").val();window.navigator.vibrate(U)}),$(".stop-vibrating").on("click",function(){window.navigator.vibrate(0),$(".vibrate-demo").val("")})}$t.length&&Tt();function xs(){var U=window.location.href,X=document.title;$(".shareToFacebook").prop("href","https://www.facebook.com/sharer/sharer.php?u="+U),$(".shareToLinkedIn").prop("href","https://www.linkedin.com/shareArticle?mini=true&url="+U+"&title="+X+"&summary=&source="),$(".shareToTwitter").prop("href","https://twitter.com/home?status="+U),$(".shareToPinterest").prop("href","https://pinterest.com/pin/create/button/?url="+U),$(".shareToWhatsApp").prop("href","whatsapp://send?text="+U),$(".shareToMail").prop("href","mailto:?body="+U),$(".shareToCopyLink").on("click",function(Y){$(this).parent().find("p").html("Скопировано"),$(this).removeClass("bg-blue2-dark").addClass("bg-green1-dark"),$(this).find("i").attr("class",""),$(this).find("i").attr("class","fa fa-check font-22"),setTimeout(function(){$(".shareToCopyLink").parent().find("p").html("Копировать"),$(".shareToCopyLink").removeClass("bg-green1-dark").addClass("bg-blue2-dark"),$(".shareToCopyLink").find("i").attr("class",""),$(".shareToCopyLink").find("i").attr("class","fa fa-link font-22")},1e3)})}xs();var ut=$(".preload-img");$(function(){ut.lazyload({threshold:500})}),$("[data-lightbox]").addClass("default-link"),lightbox.option({alwaysShowNavOnTouchDevices:!0,resizeDuration:200,wrapAround:!1}),$("#lightbox").hammer().on("swipe",function(U){U.gesture.direction===4?$("#lightbox a.lb-prev").trigger("click"):U.gesture.direction===2&&$("#lightbox a.lb-next").trigger("click")}),$(".gallery-filter").length>0&&($(".gallery-filter").filterizr(),$(".gallery-filter-active").addClass("color-highlight")),$(".gallery-filter-controls li").on("click",function(){$(".gallery-filter-controls li").removeClass("gallery-filter-active color-highlight"),$(this).addClass("gallery-filter-active color-highlight")});var js=$(".gallery-views"),ft=$(".gallery-view-controls a"),mt=$(".gallery-view-1-activate"),xe=$(".gallery-view-2-activate"),Nt=$(".gallery-view-3-activate");mt.on("click",function(){ft.removeClass("color-highlight"),$(this).addClass("color-highlight"),js.removeClass().addClass("gallery-views gallery-view-1")}),xe.on("click",function(){ft.removeClass("color-highlight"),$(this).addClass("color-highlight"),js.removeClass().addClass("gallery-views gallery-view-2")}),Nt.on("click",function(){ft.removeClass("color-highlight"),$(this).addClass("color-highlight"),js.removeClass().addClass("gallery-views gallery-view-3")});var us=$("[data-search]");function Os(){us.on("keyup",function(){var U=$(this).val();$(this).parent().parent().find("[data-filter-item]"),U!=""?($(".search-results").removeClass("disabled-search-list"),$("[data-filter-item]").addClass("disabled-search"),$('[data-filter-item][data-filter-name*="'+U.toLowerCase()+'"]').removeClass("disabled-search")):($(".search-results").addClass("disabled-search-list"),$("[data-filter-item]").removeClass("disabled-search"))})}us.length&&Os();var Ts="false";if(jQuery(document).ready(function(U){function X(ue,me){Ts="true";var we=U("#"+ue).serialize();U.post(U("#"+ue).attr("action"),we,function(Ae){U("#"+ue).addClass("disabled"),$(".contact-form").addClass("disabled"),U(".formSuccessMessageWrap").fadeIn(500)})}function Y(ue,me){U(".formValidationError").hide(),U(".fieldHasError").removeClass("fieldHasError"),U("#"+ue+" .requiredField").each(function(we){if(U(this).val()==""||U(this).val()==U(this).attr("data-dummy"))return U(this).val(U(this).attr("data-dummy")),U(this).focus(),U(this).addClass("fieldHasError"),U("#"+U(this).attr("id")+"Error").fadeIn(300),!1;if(U(this).hasClass("requiredEmailField")){var Ae=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/,be="#"+U(this).attr("id");if(!Ae.test(U(be).val()))return U(be).focus(),U(be).addClass("fieldHasError"),U(be+"Error2").fadeIn(300),!1}Ts=="false"&&we==U("#"+ue+" .requiredField").length-1&&X(ue)})}U(".formSuccessMessageWrap").hide(0),U(".formValidationError").fadeOut(0),U('input[type="text"], input[type="password"], textarea').focus(function(){U(this).val()==U(this).attr("data-dummy")&&U(this).val("")}),U("input, textarea").blur(function(){U(this).val()==""&&U(this).val(U(this).attr("data-dummy"))}),U(".contactSubmitButton").on("click",function(){return Y(U(this).attr("data-formId")),!1})}),$(".chart").length>0){var Ws=function(U,X,Y){var ue=document.createElement("script");ue.src=U,ue.onload=X,ue.onreadystatechange=X,Y.appendChild(ue)},ms=function(){var U=$("#wallet-chart"),X=$("#pie-chart"),Y=$("#doughnut-chart"),ue=$("#polar-chart"),me=$("#vertical-chart"),we=$("#horizontal-chart"),Ae=$("#line-chart");U.length&&new Chart(U,{type:"bar",data:{labels:["April","May","June","July"],datasets:[{label:"Income",backgroundColor:"#A0D468",data:[200,300,450,400]},{label:"Expenses",backgroundColor:"#ED5565",data:[190,250,350,300]},{label:"Savings",backgroundColor:"#5D9CEC",data:[250,150,400,250]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},title:{display:!1}}}),X.length&&new Chart(X,{type:"pie",data:{labels:["Facebook","Twitter","WhatsApp"],datasets:[{backgroundColor:["#4A89DC","#4FC1E9","#A0D468"],borderColor:"rgba(255,255,255,0.5)",data:[7e3,3e3,2e3]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},tooltips:{enabled:!0},animation:{duration:1500}}}),Y.length&&new Chart(Y,{type:"doughnut",data:{labels:["Apple","Samsung","Google"],datasets:[{backgroundColor:["#CCD1D9","#5D9CEC","#FC6E51"],borderColor:"rgba(255,255,255,0.5)",data:[5500,4e3,3e3]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},tooltips:{enabled:!0},animation:{duration:1500},layout:{padding:{bottom:30}}}}),ue.length&&new Chart(ue,{type:"polarArea",data:{labels:["Windows","Mac","Linux"],datasets:[{backgroundColor:["#CCD1D9","#5D9CEC","#FC6E51"],borderColor:"rgba(255,255,255,0.5)",data:[7e3,1e4,5e3]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},tooltips:{enabled:!0},animation:{duration:1500},layout:{padding:{bottom:30}}}}),me.length&&new Chart(me,{type:"bar",data:{labels:["2010","2015","2020","2025"],datasets:[{label:"iOS",backgroundColor:"#A0D468",data:[900,1e3,1200,1400]},{label:"Android",backgroundColor:"#4A89DC",data:[890,950,1100,1300]}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},title:{display:!1}}}),we.length&&new Chart(we,{type:"horizontalBar",data:{labels:["2010","2013","2016","2020"],datasets:[{label:"Mobile",backgroundColor:"#BF263C",data:[330,400,580,590]},{label:"Responsive",backgroundColor:"#EC87C0",data:[390,450,550,570]}]},options:{legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},title:{display:!1}}}),Ae.length&&new Chart(Ae,{type:"line",data:{labels:[2e3,2005,2010,2015,2010],datasets:[{data:[500,400,300,200,300],label:"Desktop Web",borderColor:"#D8334A"},{data:[0,100,300,400,500],label:"Mobile Web",borderColor:"#4A89DC"}]},options:{responsive:!0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",labels:{fontSize:13,padding:15,boxWidth:12}},title:{display:!1}}})};Ws("/shop/scripts/charts.js",ms,document.body)}g("azure_accept_cookie")==null?$("#menu-cookie-accept").length&&setTimeout(function(){$("#menu-cookie-accept, .menu-hider").addClass("menu-active"),$(".accept-cookie-policy").on("click",function(){h("azure_accept_cookie",!0,1)})},1500):$("#menu-welcome-modal").length&&setTimeout(function(){$("#menu-welcome-modal, .menu-hider").addClass("menu-active")},1500);function bt(){$(document).ready(function(){$("#shape-cut-left").on("click",function(){$(".header-card").removeClass("shape-rounded shape-cut-right").addClass("shape-cut-left"),$(".footer-card").removeClass("shape-rounded shape-cut-right").addClass("shape-cut-left")}),$("#shape-cut-right").on("click",function(){$(".header-card").removeClass("shape-rounded shape-cut-left").addClass("shape-cut-right"),$(".footer-card").removeClass("shape-rounded shape-cut-left").addClass("shape-cut-right")}),$("#shape-rounded").on("click",function(){$(".header-card").removeClass("shape-cut-left shape-cut-right").addClass("shape-rounded"),$(".footer-card").removeClass("shape-cut-left shape-cut-right").addClass("shape-rounded")})})}function Ys(){feather.replace();var U=$(".feather");U.length&&U.each(function(){$(this).attr("stroke-width",$(this).data("feather-line")),$(this).attr("width",$(this).data("feather-size")),$(this).attr("height",$(this).data("feather-size")),$(this).css("width",$(this).data("feather-size")),$(this).css("height",$(this).data("feather-size"))})}Ys(),window.location.protocol==="file:"&&$("a").on("mouseover",function(){});var hs=$(".page-title-large, .page-title-small, .menu-header a");function ps(){var U=new Date().getHours(),X,Y=$(".greeting-text").data("username"),ue="Доброе утро",me="Добрый день",we="Добрый вечер";U>=0&&U<12?X=ue:U>=12&&U<17?X=me:U>=17&&U<24&&(X=we),$(".greeting-text").html(X+",<br>"+Y)}hs.length&&ps();var Ne=$(".visit-detection");if(Ne.length){var At=new Date,Hs=At.getFullYear()+"/"+(At.getMonth()+1)+"/"+At.getDate(),_s=At.getHours()+":"+At.getMinutes()+":"+At.getSeconds();if(!g("azure_accept_cookie"))$(".never-visited").show(),$(".before-visited").hide(),h("azure_accept_cookie","<br>Your last visit was "+Hs+" at "+_s,1);else{var Ue=g("azure_accept_cookie");$(".visit-before-time").html(Ue),$(".never-visited").hide(),$(".before-visited").show(),h("azure_accept_cookie","<br>Your last visit was "+Hs+" at "+_s,1)}}var fe=$(".generated-styles"),ve=$(".generated-highlight");function ke(U){var X;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(U))return X=U.substring(1).split(""),X.length==3&&(X=[X[0],X[0],X[1],X[1],X[2],X[2]]),X="0x"+X.join(""),"rgba("+[X>>16&255,X>>8&255,X&255].join(",")+",0.3)"}function Le(){var U=g("azures-color-scheme");if(U==null)var U=$("body").data("highlight");var X=e.map(Us=>Us[0]);if(X.indexOf(U)>-1){var Y=X.indexOf(U),ue=e[Y][2],me=".color-highlight{color:"+ue+"!important}",we=".bg-highlight, .page-item.active a{background-color:"+ue+"!important}",Ae=".footer-bar-1 .active-nav *, .footer-bar-3 .active-nav i{color:"+ue+"!important} .footer-bar-2 strong, .footer-bar-4 strong, .footer-bar-5 strong{background-color:"+ue+"!important; color:#FFF;}",be=".border-highlight{border-color:"+ue+"!important}",We=".header-tab-active{border-color:"+ue+"!important}";ve.length||($("body").append('<style class="generated-highlight"></style>'),$("body").append('<style class="generated-background"></style>'),$(".generated-highlight").append(me,we,Ae,be,We))}}Le();function it(){$("[data-change-highlight]").on("click",function(U){var X=$(this).data("change-highlight");$("body").attr("data-highlight",X),$(".generated-highlight").remove(),h("azures-color-scheme",X,1);var Y=e.map(Us=>Us[0]);if(Y.indexOf(X)>-1){var ue=Y.indexOf(X);if($(this).data("color-light")!==void 0)var me=e[ue][1];else var me=e[ue][2];var we=".color-highlight{color:"+me+"!important}",Ae=".bg-highlight{background-color:"+me+"!important}",be=".footer-bar-1 .active-nav *, .footer-bar-3 .active-nav i{color:"+me+"!important} .footer-bar-2 strong, .footer-bar-4 strong, .footer-bar-5 strong{background-color:"+me+"!important; color:#FFF;}",We=".border-highlight{border-color:"+me+"!important}";$("body").append('<style class="generated-highlight"></style>'),$(".generated-highlight").append(we,Ae,be,We)}return!1})}it(),fe.length||($("body").append('<style class="generated-styles"></style>'),$(".generated-styles").append("/*Generated using JS for lower CSS file Size, Easier Editing & Faster Loading*/"),e.forEach(function(U){$(".generated-styles").append('[data-feather-bg="'+U[0]+'-dark"]{ fill: '+U[2]+'!important;} [data-feather-bg="'+U[0]+'-light"]{ fill: '+U[1]+"!important;}")}),e.forEach(function(U){$(".generated-styles").append('[data-feather-bg="'+U[0]+'-fade-dark"]{ fill: '+ke(U[2])+'!important;} [data-feather-bg="'+U[0]+'-fade-light"]{ fill: '+ke(U[1])+"!important;}")}),e.forEach(function(U){$(".generated-styles").append('[data-feather-color="'+U[0]+'-dark"]{ stroke: '+U[2]+'!important;} [data-feather-color="'+U[0]+'-light"]{ stroke: '+U[1]+"!important;}")}),e.forEach(function(U){$(".generated-styles").append('[data-feather-color="'+U[0]+'-fade-dark"]{ stroke: '+ke(U[2])+'!important;} [data-feather-color="'+U[0]+'-fade-light"]{ stroke: '+ke(U[1])+"!important;}")}),e.forEach(function(U){$(".generated-styles").append(".bg-"+U[0]+"-light{ background-color: "+U[1]+"!important; color:#FFFFFF!important;} .bg-"+U[0]+"-light i, .bg-"+U[0]+"-dark i{color:#FFFFFF;} .bg-"+U[0]+"-dark{  background-color: "+U[2]+"!important; color:#FFFFFF!important;} .border-"+U[0]+"-light{ border-color:"+U[1]+"!important;} .border-"+U[0]+"-dark{  border-color:"+U[2]+"!important;} .color-"+U[0]+"-light{ color: "+U[1]+"!important;} .color-"+U[0]+"-dark{  color: "+U[2]+"!important;}")}),e.forEach(function(U){$(".generated-styles").append(".bg-fade-"+U[0]+"-light{ background-color: "+ke(U[1])+"!important; color:#FFFFFF;} .bg-fade-"+U[0]+"-light i, .bg-"+U[0]+"-dark i{color:#FFFFFF;} .bg-fade-"+U[0]+"-dark{  background-color: "+ke(U[2])+"!important; color:#FFFFFF;} .border-fade-"+U[0]+"-light{ border-color:"+ke(U[1])+"!important;} .border-fade-"+U[0]+"-dark{  border-color:"+ke(U[2])+"!important;} .color-fade-"+U[0]+"-light{ color: "+ke(U[1])+"!important;} .color-fade-"+U[0]+"-dark{  color: "+ke(U[2])+"!important;}")}),e.forEach(function(U){$(".generated-styles").append(".bg-gradient-"+U[0]+"{background-image: linear-gradient(to bottom, "+U[1]+" 0, "+U[2]+" 100%)}")}),o.forEach(function(U){$(".generated-styles").append(".bg-"+U[0]+"{background-color:"+U[1]+"!important; color:#FFFFFF;} .color-"+U[0]+"{color:"+U[1]+"!important;}")}),e.forEach(function(U){$(".generated-styles").append(".body-"+U[0]+"{background-image: linear-gradient(to bottom, "+U[1]+" 0, "+U[3]+" 100%)}")}));var Ao=$("[data-menu-load]");Ao.each(function(){var U=$(this).data("menu-load");$(this).load(U)}).promise().done(function(){setTimeout(function(){I(),c(),xs(),it(),Ys(),J(),bt()},500)})}setTimeout(s,0),$(function(){})})}},f_={data(){return{search:null,products:null}},watch:{search:function(){}},computed:{...G(["getProducts","getProductsPaginateObject"])},methods:{loadProducts(s=0){return this.$store.dispatch("loadProducts",{dataObject:{search:this.search},page:s,size:20}).then(()=>{this.products=this.getProducts,es.handler()})}}},b_={class:"content mb-4"},g_={class:"search-box bg-theme rounded-m shadow-xl bottom-0"},y_=t("i",{class:"fa fa-search"},null,-1),v_={class:"search-results card card-style mx-0 mt-3 px-2"},$_={class:"list-group list-custom-large"},k_={href:"#","data-filter-item":"","data-filter-name":"all demo smartphone apple iphone"},w_=t("i",{class:"fab fa-apple color-gray2-dark"},null,-1),F_=t("strong",null,"Works on iOS 10 and Higher",-1),C_=t("i",{class:"fa fa-angle-right mr-2"},null,-1);function P_(s,e,o,n,i,r){return l(),a("div",b_,[t("div",g_,[y_,f(t("input",{type:"text",class:"border-0","onUpdate:modelValue":e[0]||(e[0]=d=>i.search=d),placeholder:"Что вы хотели бы найти? (найдем всё)"},null,512),[[k,i.search]])]),t("div",v_,[t("div",$_,[(l(!0),a(v,null,O(i.products,d=>(l(),a("a",k_,[w_,t("span",null,p(d.title||"Не указано"),1),F_,C_]))),256))])])])}const S_=oe(f_,[["render",P_]]);const x_={key:0},j_=["onClick"],O_={class:"card-center"},T_={class:"pl-3"},U_={class:"pl-3 mt-n2 font-12 color-highlight mb-0"},I_={class:"font-weight-bold"},V_=t("div",{class:"card-center opacity-30"},[t("i",{class:"fa fa-arrow-right opacity-50 float-right color-theme pr-3"})],-1),M_={props:["size","selected"],data(){return{categories:null,categories_paginate_object:null}},computed:{...G(["getCategories","getCategoriesPaginateObject"])},mounted(){this.loadCategories()},methods:{nextCategories(s){this.loadCategories(s)},select(s){return this.$emit("select",s)},inCategory(s){return this.selected.findIndex(o=>o.id===s)>=0},loadCategories(s=0){return this.$store.dispatch("loadCategories",{page:s,size:this.size||5}).then(()=>{this.categories=this.getCategories,this.categories_paginate_object=this.getCategoriesPaginateObject})}}},Hi=Object.assign(M_,{__name:"CategoryList",setup(s){return(e,o)=>(l(),a(v,null,[e.categories?(l(),a("div",x_,[(l(!0),a(v,null,O(e.categories,n=>(l(),a("a",{href:"javascript:void(0)",onClick:i=>e.select(n),style:{height:"80px"},class:C([{"border-blue2-dark":e.inCategory(n.id)},"card card-style m-0 mb-2 bordered"])},[t("div",O_,[t("h5",T_,p(n.title||"Не указано"),1),t("p",U_,[t("span",I_,p(n.count||0),1),_(" ед. товаров в категории")])]),V_],10,j_))),256))])):u("",!0),e.categories_paginate_object?(l(),M(Ce,{key:1,simple:!0,onPagination_page:e.nextCategories,pagination:e.categories_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64))}}),A_=["data-src"],E_={class:"card-bottom px-3"},D_={class:"font-40 line-height-xl"},z_={class:"pb-0 mb-0 font-12"},B_=t("i",{class:"fa fa-map-marker mr-2"},null,-1),L_=t("a",{href:"#/contact-us",class:"btn btn-m btn-border w-100 btn-full rounded-s mb-3 border-highlight color-highlight text-uppercase font-900"},[t("i",{class:"fa-regular fa-envelope mr-2"}),_(" Написать нам ")],-1),R_=t("div",{class:"card-overlay bg-gradient-fade"},null,-1),N_={class:"card card-style p-3"},q_=t("h5",null,"Галлерея продуктов",-1),W_={class:"row text-center row-cols-3 mb-n4"},Y_=["href","title"],H_={class:"img-fluid rounded-xs preload-img",alt:"img"},Q_={key:1,class:"single-slider owl-no-dots owl-carousel mt-n4 owl-loaded owl-drag"},G_=t("div",{class:"content mb-3"},[t("h5",{class:"float-left font-16 font-500"},"Случайные 20 товаров"),t("a",{class:"float-right font-12 color-highlight mt-n1",href:"#/products"},"Посмотреть все"),t("div",{class:"clearfix"})],-1),K_={key:2,class:"double-slider owl-carousel owl-no-dots"},J_=t("div",{class:"divider divider-margins mt-4"},null,-1),X_={key:3,class:"content mb-3"},Z_=t("h5",{class:"float-left font-16 font-500"},"Ранее просмотрено",-1),ef=t("a",{class:"float-right font-12 color-highlight mt-n1",href:"#"},"Смотреть всё",-1),tf=t("div",{class:"clearfix"},null,-1),sf=[Z_,ef,tf],of={key:4,class:"double-slider owl-carousel owl-no-dots"},nf=ze('<div class="divider divider-margins mt-4"></div><div class="card mt-4 preload-img" data-src="/shop/images/pictures/20s.jpg"><div class="card-body"><h3 class="color-white font-600">Best Priced Pack</h3><p class="color-white opacity-80"> The best value pack you can purchase for your needs created especially to suit you. </p><div class="card rounded-m shadow-xl mb-0"><div class="content"><div class="d-flex pb-3"><div class="pr-3"><h5 class="font-14 font-600 opacity-80 pb-2">Appkit Mobile Website Template and PWA. </h5><h1 class="font-24 font-700">$21<sup class="font-15 opacity-50">.99</sup></h1></div><div class="ml-auto"><img src="/shop/images/pictures/2s.jpg" class="rounded-m shadow-xl" width="90"></div></div><div class="divider mb-4"></div><div class="d-flex pb-2"><div class="pr-3"><h5 class="font-14 font-600 opacity-80 pb-2">6 Months Hands on Support Included in Pack. </h5><h1 class="font-24 font-700 color-green1-dark">$0<sup class="font-15 opacity-50">.00</sup></h1></div><div class="ml-auto"><img src="/shop/images/pictures/3s.jpg" class="rounded-m shadow-xl" width="90"></div></div><div class="divider mb-4"></div><a href="#" class="btn btn-full btn-m bg-highlight font-700 text-uppercase rounded-m shadow-xl"> Add to Cart</a></div></div></div><div class="card-overlay bg-highlight opacity-95"></div><div class="card-overlay dark-mode-tint"></div></div><div class="divider divider-margins"></div><div class="content mb-3"><h5 class="float-left font-16 font-500">Категории товаров</h5><a class="float-right font-12 color-highlight mt-n1" href="#/categories">Посмотреть все</a><div class="clearfix"></div></div>',4),lf={data(){return{botUser:null,watches:null,products:null,paginate:null,randomProducts:null}},watch:{getSelf:function(){this.botUser=this.getSelf,es.handler()},getWatches:function(){this.watches=this.getWatches.slice(0,10),es.handler()},$route(s,e){this.loadRandomProducts(),this.watches=this.getWatches.slice(0,10)}},computed:{...G(["getProducts","getSelf","getWatches","getProductsPaginateObject"]),currentBot(){return window.currentBot},logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`}},mounted(){this.loadProducts(),this.loadRandomProducts(),this.watches=this.getWatches.slice(0,10)},methods:{nextProducts(s){this.loadProducts(s)},watchStore(){this.$store.watch(()=>this.$store.getters.getSelf,s=>{this.botUser=this.$store.getters.getSelf,es.handler()})},loadProducts(s=0){return this.$store.dispatch("loadProducts",{dataObject:{search:this.search},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})},loadRandomProducts(){return this.$store.dispatch("loadRandomProducts").then(()=>{this.randomProducts=this.getProducts,es.handler()})}}},Oa=Object.assign(lf,{__name:"Home",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[e.currentBot?(l(),a("div",{key:0,class:"card card-style preload-img","data-src":e.logo,style:{height:"500px"}},[t("div",E_,[t("h1",D_,p(e.currentBot.company.title||"Без названия"),1),t("p",z_,[B_,_(p(e.currentBot.company.address||"Без адреса"),1)]),t("p",null,p(e.currentBot.description||"Без описания"),1),L_]),R_],8,A_)):u("",!0),t("div",N_,[q_,t("div",W_,[(l(!0),a(v,null,O(e.products,i=>(l(),a("a",{class:"col mb-4 default-link",href:"#/products/"+i.id,title:i.title},[f(t("img",H_,null,512),[[n,i.images[0]]])],8,Y_))),256))]),e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)]),T(S_),e.randomProducts?(l(),a("div",Q_,[(l(!0),a(v,null,O(e.randomProducts,(i,r)=>(l(),M(__,{item:i},null,8,["item"]))),256))])):u("",!0),G_,e.randomProducts?(l(),a("div",K_,[(l(!0),a(v,null,O(e.randomProducts,(i,r)=>(l(),M(Hl,{item:i},null,8,["item"]))),256))])):u("",!0),J_,e.watches?(l(),a("div",X_,sf)):u("",!0),e.watches?(l(),a("div",of,[(l(!0),a(v,null,O(e.watches,(i,r)=>(l(),M(Hl,{item:i},null,8,["item"]))),256))])):u("",!0),nf,T(Hi)],64)}}}),af=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"}));const rf={key:0,class:"d-flex pb-2"},df={style:{"object-fit":"cover",height:"100%"},class:"rounded-m shadow-xl",width:"110"},cf={class:"ml-auto w-100 pl-3"},uf={class:"font-14 font-600 opacity-80 pb-2"},mf=t("div",{class:"clearfix"},null,-1),hf={class:"font-23 font-700 float-left pt-2"},pf=t("sup",{class:"font-15 opacity-50"},".00",-1),_f={class:"float-right"},ff=t("i",{class:"fa-solid fa-cart-plus"},null,-1),bf={key:0,class:"in-cart-count"},gf={key:1,class:"d-flex rounded-m shadow-xs flex-column mb-3"},yf={class:"mr-auto w-100"},vf={style:{"object-fit":"cover"},class:"rounded-m w-100"},$f={class:"ml-auto w-100 px-3"},kf={class:"font-14 font-600 opacity-80 pb-2"},wf={key:1},Ff={key:2},Cf={class:"row text-center row-cols-3 mb-0"},Pf=["href","title"],Sf=["data-src"],xf=t("div",{class:"clearfix"},null,-1),jf={class:"font-23 font-700 float-left pt-2"},Of=t("sup",{class:"font-15 opacity-50"},".00",-1),Tf={class:"float-right"},Uf=t("i",{class:"fa-solid fa-cart-plus"},null,-1),If={key:0,class:"in-cart-count"},Vf={props:["item","displayType"],data(){return{showCart:!1}},computed:{...G(["inCart"]),currentPrice(){return this.item.current_price/100},oldPrice(){return this.item.old_price/100}},methods:{addToCart(){this.$cart.add(this.item)},goToProduct(){this.$router.push({name:"product",params:{productId:this.item.id}})}}},So=Object.assign(Vf,{__name:"ProductItemSimple",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[s.displayType==0?(l(),a("div",rf,[t("div",{class:"mr-auto",onClick:o[0]||(o[0]=(...i)=>e.addToCart&&e.addToCart(...i)),style:{"max-height":"100px"}},[f(t("img",df,null,512),[[n,s.item.images[0]]])]),t("div",cf,[t("h5",uf,p(s.item.title||"не указано"),1),mf,t("h3",hf,[_("₽"+p(s.item.current_price||0),1),pf]),t("div",_f,[t("button",{onClick:o[1]||(o[1]=(...i)=>e.addToCart&&e.addToCart(...i)),class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark position-relative"},[ff,e.inCart(s.item.id)>0?(l(),a("span",bf,p(e.inCart(s.item.id)),1)):u("",!0)])])])])):u("",!0),s.displayType==1?(l(),a("div",gf,[t("div",yf,[f(t("img",vf,null,512),[[n,s.item.images[0]]])]),t("div",$f,[t("h5",kf,p(s.item.title||"не указано"),1),s.item.simplify?u("",!0):(l(),a("a",{key:0,onClick:o[2]||(o[2]=i=>s.item.simplify=!0),href:"javascript:void(0)",class:"btn btn-m btn-full rounded-sm font-900 shadow-sm text-uppercase collapsed mb-2","aria-expanded":"false"}," Показать описание ")),s.item.simplify?(l(),a("p",wf,p(s.item.description||"Нет описания"),1)):u("",!0),s.item.images.length>1&&s.item.simplify?(l(),a("div",Ff,[t("div",Cf,[(l(!0),a(v,null,O(s.item.images,(i,r)=>(l(),a("a",{class:"col mb-2","data-lightbox":"gallery-1",href:i,title:s.item.title},[f(t("img",{"data-src":i,class:"preload-img img-fluid rounded-xs",alt:"img"},null,8,Sf),[[n,i]])],8,Pf))),256))])])):u("",!0),s.item.simplify?(l(),a("a",{key:3,onClick:o[3]||(o[3]=i=>s.item.simplify=!1),href:"javascript:void(0)",class:"btn btn-m btn-full rounded-sm font-900 shadow-sm text-uppercase collapsed mb-2","aria-expanded":"false"}," Скрыть описание ")):u("",!0),xf,t("h3",jf,[_("₽"+p(s.item.current_price||0),1),Of]),t("div",Tf,[t("button",{onClick:o[4]||(o[4]=(...i)=>e.addToCart&&e.addToCart(...i)),class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark position-relative"},[Uf,e.inCart(s.item.id)>0?(l(),a("span",If,p(e.inCart(s.item.id)),1)):u("",!0)])])])])):u("",!0)],64)}}}),Mf={key:0,class:"card card-style"},Af={class:"content"},Ef=t("h3",null,"Наши товары",-1),Df={key:0},zf={class:"input-style input-style-2 has-icon input-required"},Bf=ze('<p class="mb-0">Цена товара</p><div class="row mb-0"><div class="col-6"><div class="input-style input-style-2 input-required"><input class="form-control" type="email" placeholder="От, руб"></div></div><div class="col-6"><div class="input-style input-style-2 input-required"><input class="form-control" type="email" placeholder="До, руб"></div></div></div>',2),Lf={key:0,class:"fa-solid fa-chevron-down mr-2"},Rf={key:1,class:"fa-solid fa-filter mr-2"},Nf=t("span",{class:"font-14"},"Фильтры товара",-1),qf={key:1,class:"card bg-20 mt-4 content rounded-m shadowl"},Wf=ze('<div class="card-body"><h4 class="color-white">Товар отсутствует</h4><p class="color-white"> На текущий момент товар на страницах сайта отсуствтует </p><div class="card card-style ml-0 mr-0 mb-3 bg-white"><div class="content"> You can add more content in here as well. This is used for example on the homepage in the Built for You section. </div></div></div><div class="card-overlay bg-gradient-green1 opacity-95 rounded-m shadow-l"></div><div class="card-overlay dark-mode-tint rounded-m shadow-l"></div>',3),Yf=[Wf],Hf=t("div",{class:"content mb-3"},[t("h5",{class:"float-left font-16 font-500"},"Категории товаров"),t("a",{class:"float-right font-12 color-highlight mt-n1",href:"#/categories"},"Посмотреть все"),t("div",{class:"clearfix"})],-1),Qf={data(){return{isCollapsed:!0,search:null,products:[],paginate:null}},computed:{...G(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.search?this.products.filter(s=>s.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products}},mounted(){this.loadProducts()},methods:{nextProducts(s){this.loadProducts(s)},loadProducts(s=0){return this.$store.dispatch("loadProducts",{dataObject:{search:this.search},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject,es.handler()})}}},Ta=Object.assign(Qf,{__name:"Products",setup(s){return(e,o)=>(l(),a(v,null,[e.filteredProducts.length>0?(l(),a("div",Mf,[t("div",Af,[Ef,e.isCollapsed?u("",!0):(l(),a("div",Df,[t("div",zf,[t("i",{class:"input-icon fa-solid fa-magnifying-glass",onClick:o[0]||(o[0]=n=>e.loadProducts(0))}),f(t("input",{class:"form-control","onUpdate:modelValue":o[1]||(o[1]=n=>e.search=n),type:"name",placeholder:"Найди товар на странице"},null,512),[[k,e.search]])]),Bf])),t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=n=>e.isCollapsed=!e.isCollapsed),class:"btn btn-m btn-full rounded-sm font-900 shadow-xl text-uppercase mb-3"},[e.isCollapsed?(l(),a("i",Lf)):(l(),a("i",Rf)),Nf]),(l(!0),a(v,null,O(e.filteredProducts,(n,i)=>(l(),M(So,{item:n},null,8,["item"]))),256)),e.paginate?(l(),M(Ce,{key:1,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])])):(l(),a("div",qf,Yf)),Hf,T(Hi)],64))}}),Gf=Object.freeze(Object.defineProperty({__proto__:null,default:Ta},Symbol.toStringTag,{value:"Module"})),Kf={key:0,class:"card card-style bg-25 mb-3",style:{height:"270px"}},Jf={class:"card-center"},Xf=t("p",{class:"text-center mb-2"},[t("i",{class:"fa-brands fa-shopify color-red2-dark fa-4x"})],-1),Zf={class:"color-white font-700 text-center mb-0"},eb=t("p",{class:"color-white text-center opacity-60 mt-n1 mb-0"},"Вы смотрите товары в данной категории",-1),tb={class:"color-white text-center opacity-60 mt-n1 mb-3"},sb=t("a",{href:"#/categories",class:"btn btn-m font-900 text-uppercase bg-highlight btn-center-xl"},"Все категории",-1),ob=t("div",{class:"card-overlay bg-black opacity-80"},null,-1),ib={key:1,class:"card card-style"},nb={class:"content"},lb=t("h3",null,"Наши товары",-1),ab={class:"collapse",id:"collapse-8",style:{}},rb={class:"input-style input-style-2 has-icon input-required"},db=ze('<p class="mb-0 pb-1"> Цена: </p><div class="row mb-0"><div class="col-6"><div class="input-style input-style-2 input-required"><span class="color-highlight">От, ₽</span><input class="form-control" type="email" placeholder="0 ₽"></div></div><div class="col-6"><div class="input-style input-style-2 input-required"><span class="color-highlight">До, ₽</span><input class="form-control" type="email" placeholder="100 ₽"></div></div></div>',2),cb=t("a",{"data-toggle":"collapse",href:"#collapse-8",class:"btn btn-m btn-full rounded-sm font-900 shadow-xl text-uppercase mb-3","aria-expanded":"true"},[t("i",{class:"fa-solid fa-filter mr-2"}),t("span",{class:"font-14"},"Фильтры товара")],-1),ub={key:2,class:"card bg-20 mt-4 content rounded-m shadowl"},mb=ze('<div class="card-body"><h4 class="color-white">Товар отсутствует</h4><p class="color-white"> На текущий момент товар на страницах сайта отсуствтует </p><div class="card card-style ml-0 mr-0 mb-3 bg-white"><div class="content"> You can add more content in here as well. This is used for example on the homepage in the Built for You section. </div></div></div><div class="card-overlay bg-gradient-green1 opacity-95 rounded-m shadow-l"></div><div class="card-overlay dark-mode-tint rounded-m shadow-l"></div>',3),hb=[mb],pb=t("div",{class:"content mb-3"},[t("h5",{class:"float-left font-16 font-500"},"Категории товаров"),t("a",{class:"float-right font-12 color-highlight mt-n1",href:"#/categories"},"Посмотреть все"),t("div",{class:"clearfix"})],-1),_b={data(){return{search:null,category:null,products:[],paginate:null}},watch:{$route(s,e){this.loadCategory(),this.loadProducts()}},computed:{...G(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.search?this.products.filter(s=>s.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products}},mounted(){this.loadCategory(),this.loadProducts()},methods:{nextProducts(s){this.loadProducts(s)},loadCategory(){return this.$store.dispatch("loadCategory",{dataObject:{categoryId:this.$route.params.categoryId}}).then(s=>{this.category=s.data,es.handler()})},loadProducts(s=0){return this.$store.dispatch("loadProductsInCategory",{dataObject:{category_id:this.$route.params.categoryId,search:this.search},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject,es.handler()})}}},Ua=Object.assign(_b,{__name:"ProductsInCategory",setup(s){return(e,o)=>(l(),a(v,null,[e.category?(l(),a("div",Kf,[t("div",Jf,[Xf,t("h2",Zf,p(e.category.title||"Не указана"),1),eb,t("p",tb,[_("Товаров в категории "),t("strong",null,p(e.category.count||0),1)]),sb]),ob])):u("",!0),e.filteredProducts.length>0?(l(),a("div",ib,[t("div",nb,[lb,t("div",ab,[t("div",rb,[t("i",{class:"input-icon fa-solid fa-magnifying-glass",onClick:o[0]||(o[0]=n=>e.loadProducts(0))}),f(t("input",{class:"form-control","onUpdate:modelValue":o[1]||(o[1]=n=>e.search=n),type:"name",placeholder:"Найди товар на странице"},null,512),[[k,e.search]])]),db]),cb,(l(!0),a(v,null,O(e.filteredProducts,(n,i)=>(l(),M(So,{item:n},null,8,["item"]))),256)),e.paginate?(l(),M(Ce,{key:0,onPagination_page:e.nextProducts,simple:!0,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])])):(l(),a("div",ub,hb)),pb,T(Hi)],64))}}),fb=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),bb={key:0,class:"card card-style"},gb={class:"card-top mt-3 mr-3"},yb={key:0,href:"#",style:{width:"50px",height:"50px"},class:"btn bg-highlight text-white order-highlight rounded-l shadow-xl d-flex justify-content-center align-items-center float-right mr-0"},vb=t("i",{class:"fa fa-heart"},null,-1),$b=[vb],kb={key:1,href:"#",style:{width:"50px",height:"50px"},class:"btn bg-red2-dark rounded-l d-flex justify-content-center align-items-center shadow-xl bg-red2-dark color-white float-right mr-0"},wb=t("i",{class:"fa fa-heart"},null,-1),Fb=[wb],Cb={class:"card-bottom pb-4 pl-3"},Pb={class:"font-26",style:{"padding-right":"100px"}},Sb={class:"card-bottom pb-4 pr-3"},xb={class:"font-30 text-right mb-3"},jb=t("sup",{class:"font-400 font-17 opacity-50"},".99",-1),Ob={key:0,class:"badge bg-highlight color-white px-2 py-1 mt-n1 text-uppercase d-block float-right"},Tb=t("div",{class:"card-overlay bg-gradient-fade rounded-0"},null,-1),Ub={class:"content mt-n2"},Ib={class:"row"},Vb={class:"col-12"},Mb={class:"d-flex"},Ab={class:"pt-1"},Eb=["data-activate"],Db={class:"ml-auto mr-1 pr-2"},zb={class:"custom-control classic-switch"},Bb=["id"],Lb=["for"],Rb=t("i",{class:"fa fa-plus font-11 color-green1-dark"},null,-1),Nb=["data-switch"],qb={class:"mb-0 pb-0 pt-2"},Wb=ze('<div class="col-12"><div><p class="font-10 mb-n2">Product Type</p><p class="font-12 color-theme font-700">Mobile PWA</p></div><div><p class="font-10 mb-n2">Code Platform</p><p class="font-12 color-theme font-700">Bootstrap 4.x</p></div><div><p class="font-10 mb-n2">Hybrid App</p><p class="font-12 color-theme font-700">PhoneGap &amp; Cordova</p></div><div><p class="font-10 mb-n2">Support</p><p class="font-12 color-theme font-700">Included</p></div></div>',1),Yb=t("div",{class:"divider mt-4 mb-2"},null,-1),Hb={class:"d-flex"},Qb=t("p",{class:"mb-n1 font-10"},"Рейтинг & Отзывы",-1),Gb={class:"float-left"},Kb=ze('<div class="ml-auto"><a class="icon icon-s mt-2 mr-2 rounded-m bg-red2-dark color-white" href="#"><i class="fa fa-bookmark"></i></a><a data-menu="menu-share" class="icon icon-s mt-2 rounded-m bg-highlight color-white" href="#"><i class="fa fa-share-alt"></i></a></div>',1),Jb=t("div",{class:"divider mt-3"},null,-1),Xb={key:0,class:"row text-center mb-3"},Zb={class:"col-4 mb-n2"},eg=t("i",{class:"fa-solid fa-plus font-22"},null,-1),tg=[eg],sg={class:"col-4 mb-n2 d-flex justify-content-center align-items-center"},og={class:"font-22"},ig={class:"col-4 mb-n2"},ng=t("i",{class:"fa-solid fa-minus font-22"},null,-1),lg=[ng],ag={key:1,class:"row text-center mb-3"},rg={class:"col-12 mb-n2"},dg=t("i",{class:"fa-solid fa-cart-plus font-12"},null,-1),cg=ze('<div class="card card-style"><div class="content"><h4 class="font-600">Product Showcase</h4><p class="mb-3"> A classic image slider representing the beautiful power of our product. This image slider can be made either single or double to suit your needs. </p></div><div class="double-slider text-center owl-no-dots owl-carousel"><div class="card rounded-m shadow-l bg-10" data-card-height="220"></div><div class="card rounded-m shadow-l bg-11" data-card-height="220"></div><div class="card rounded-m shadow-l bg-12" data-card-height="220"></div><div class="card rounded-m shadow-l bg-13" data-card-height="220"></div><div class="card rounded-m shadow-l bg-14" data-card-height="220"></div></div></div><div class="card card-style"><div class="content"><h4 class="font-700">Specifications</h4><p> A classic list of specifications that are necessary for products that give minor and major listed details. </p><div class="row mb-0"><div class="col-4"><p class="font-600 mb-n1 color-highlight">PWA</p><p>Compatible</p></div><div class="col-4"><p class="font-600 mb-n1 color-highlight">Platform</p><p>Bootstrap 4.x</p></div><div class="col-4"><p class="font-600 mb-n1 color-highlight">Support</p><p>Included</p></div><div class="w-100 mb-3"></div><div class="col-6"><p class="font-600 mb-n1 color-highlight">Hybrid App</p><p>Cordova or PhoneGap.</p></div><div class="col-6"><p class="font-600 mb-n1 color-highlight">Updates?</p><p>Constant Releases.</p></div></div><div class="divider mt-4"></div><a href="#" class="btn btn-full bg-green1-dark btn-l rounded-sm text-uppercase font-800"><i class="fa fa-shopping-bag pr-3"></i>Purchase Now</a></div></div>',2),ug={key:1,class:"card card-style"},mg=t("div",{class:"content"},[t("h3",null,"Другие изображения товара"),t("p",null," A gallery showcasing our product in a better view for you to see. ")],-1),hg={class:"content"},pg={class:"row text-center row-cols-3 mb-0"},_g=["href","title"],fg=["data-src"],bg=ze('<div class="card card-style"><div class="content"><h3>Testimonials</h3><p> Sharing feedback from our customers is always makes us happy. </p></div><div class="divider divider-margins"></div><div class="content mt-0"><h1 class="mb-n2 font-15 font-700">John Doeson</h1><h1 class="float-right font-700 font-30 mt-n3">5.00</h1><p class="mb-2 font-10"><i class="fa fa-check-circle color-highlight scale-icon mr-2"></i>Verified Purchase </p><p> The best support I have ever had. They are on top of things and with very fast and accurate replies.. </p></div><div class="divider divider-margins"></div><div class="content mt-0"><h1 class="mb-n2 font-15 font-700">Louder Johanna</h1><h1 class="float-right font-700 font-30 mt-n3">4.00</h1><p class="mb-2 font-10"><i class="fa fa-check-circle color-highlight scale-icon mr-2"></i>Verified Purchase </p><p> I hope they will keep the support they deliver, because for me that&#39;s the most important part of buying. </p></div><div class="divider divider-margins"></div><div class="content mt-0"><h1 class="mb-n2 font-15 font-700">Louder Johanna</h1><h1 class="float-right font-700 font-30 mt-n3">4.50</h1><p class="mb-2 font-10"><i class="fa fa-check-circle color-highlight scale-icon mr-2"></i>Verified Purchase </p><p> I like the way it&#39;s setup, did had to do some research before I got to know how it works though. </p></div><div class="content mt-0"><div class="divider"></div><div class="row mb-0"><div class="col-6"><a href="#" class="btn btn-full bg-green1-dark btn-m rounded-sm text-uppercase font-800">Purchase Now</a></div><div class="col-6"><a href="#" class="btn btn-full bg-highlight btn-m rounded-sm text-uppercase font-800">Add to Cart</a></div></div></div></div><div class="card mt-4 preload-img" data-src="images/pictures/20s.jpg"><div class="card-body"><h2 class="color-white font-700 pt-3">Recommended</h2><p class="color-white opacity-70 mb-4"> We recommend some more awesome products for you! Swipe left or right to check them out. </p><div class="double-slider owl-carousel owl-no-dots"><a href="#"><div data-card-height="250" class="card rounded-sm shadow-l bg-14"><div class="card-bottom"><h4 class="color-white font-20 line-height-l mb-3 ml-3">Sticky <br> Mobile</h4></div><div class="card-overlay bg-black opacity-80"></div></div></a><a href="#"><div data-card-height="250" class="card rounded-sm shadow-l bg-18"><div class="card-bottom"><h4 class="color-white font-20 line-height-l mb-3 ml-3">AppKit <br> Mobile</h4></div><div class="card-overlay bg-black opacity-80"></div></div></a><a href="#"><div data-card-height="250" class="card rounded-sm shadow-l bg-14"><div class="card-bottom"><h4 class="color-white font-20 line-height-l mb-3 ml-3">Kolor <br> Mobile</h4></div><div class="card-overlay bg-black opacity-80"></div></div></a><a href="#"><div data-card-height="250" class="card rounded-sm shadow-l bg-18"><div class="card-bottom"><h4 class="color-white font-20 line-height-l mb-3 ml-3">Ultra <br> Mobile</h4></div><div class="card-overlay bg-black opacity-80"></div></div></a><a href="#"><div data-card-height="250" class="card rounded-sm shadow-l bg-18"><div class="card-bottom"><h4 class="color-white font-20 line-height-l mb-3 ml-3">AMP <br> Mobile</h4></div><div class="card-overlay bg-black opacity-80"></div></div></a></div><a href="#" class="btn btn-full btn-m font-900 rounded-sm text-uppercase bg-white color-highlight">View All</a></div><div class="card-overlay bg-highlight opacity-95"></div><div class="card-overlay dark-mode-tint"></div></div>',2),gg={data(){return{product:null}},computed:{...G(["inCart","cartTotalCount"]),currentBot(){return window.currentBot},discount(){return Math.round(100-this.product.current_price/this.product.old_price*100)},currentPrice(){return this.product.current_price},checkInCart(){return this.inCart(this.product.id)}},mounted(){this.loadProduct()},methods:{incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.product):this.$store.dispatch("incQuantity",this.product.id),this.$botNotification.notification("Добавление товара","Успешно добавлено в корзину!")},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.product.id):this.$store.dispatch("decQuantity",this.product.id),this.$botNotification.notification("Добавление товара","Товар удален!")},loadProduct(){let s=this.$route.params.productId;this.$store.dispatch("loadProduct",{dataObject:{productId:s}}).then(e=>{this.product=e.data,this.$store.dispatch("addToWatch",this.product),es.handler()})}}},Ia=Object.assign(gg,{__name:"Product",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[e.product?(l(),a("div",bb,[t("div",{class:"card",style:dt([{"background-image":"url("+(e.product.images[0]||"")+")"},{height:"250px"}])},[t("div",gb,[e.product.in_favorite?(l(),a("a",yb,$b)):(l(),a("a",kb,Fb))]),t("div",Cb,[t("h1",Pb,p(e.product.title||"Не указан"),1)]),t("div",Sb,[t("h1",xb,[_(p(e.product.current_price||0),1),jb]),e.product.old_price>0?(l(),a("span",Ob,p(e.discount)+"% Скидка",1)):u("",!0)]),Tb],4),t("div",Ub,[t("div",Ib,[t("div",Vb,[t("div",Mb,[t("div",Ab,[t("h5",{"data-activate":"toggle-id-5-"+e.product.id,class:"font-500 font-13"},"Полное описание товара",8,Eb)]),t("div",Db,[t("div",zb,[t("input",{type:"checkbox",class:"classic-input",id:"toggle-id-5-"+e.product.id},null,8,Bb),t("label",{class:"custom-control-label",for:"toggle-id-5-"+e.product.id},null,8,Lb),Rb])])]),t("div",{"data-switch":"toggle-id-5-"+e.product.id,class:"switch-is-unchecked"},[t("p",qb,p(e.product.description||"Нет описания"),1)],8,Nb)]),Wb]),Yb,t("div",Hb,[t("div",null,[Qb,t("h6",Gb,p(e.product.rating),1),T(Uo,{rating:e.product.rating},null,8,["rating"])]),Kb]),Jb,e.checkInCart>0?(l(),a("div",Xb,[t("div",Zb,[t("button",{type:"button",onClick:o[0]||(o[0]=(...i)=>e.incProductCart&&e.incProductCart(...i)),class:"btn p-2 w-100 bg-highlight rounded-s shadow-l"},tg)]),t("div",sg,[t("strong",og,p(e.checkInCart),1)]),t("div",ig,[t("button",{onClick:o[1]||(o[1]=(...i)=>e.decProductCart&&e.decProductCart(...i)),type:"button",class:"btn p-2 w-100 bg-red1-dark rounded-s shadow-l"},lg)])])):(l(),a("div",ag,[t("div",rg,[t("button",{type:"button",onClick:o[2]||(o[2]=(...i)=>e.incProductCart&&e.incProductCart(...i)),class:"btn btn-full bg-highlight btn-l rounded-sm text-uppercase font-800 w-100 p-3"},[dg,_(" В корзину "),t("strong",null,p(e.currentPrice)+"₽",1)])])]))])])):u("",!0),cg,e.product?(l(),a("div",ug,[mg,t("div",hg,[t("div",pg,[(l(!0),a(v,null,O(e.product.images,(i,r)=>(l(),a("a",{class:"col mb-2","data-lightbox":"gallery-1",href:i,title:e.product.title},[f(t("img",{"data-src":i,class:"preload-img img-fluid rounded-xs",alt:"img"},null,8,fg),[[n,i]])],8,_g))),256))])])])):u("",!0),bg],64)}}}),yg=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),vg={},$g={class:"card bg-20 mt-4 content rounded-m shadowl"},kg={class:"card-body"},wg={class:"color-white"},Fg={class:"color-white"},Cg={class:"card card-style ml-0 mr-0 mb-3 bg-white"},Pg={class:"content"},Sg=t("div",{class:"card-overlay bg-highlight opacity-85 rounded-m shadow-l"},null,-1),xg=t("div",{class:"card-overlay dark-mode-tint rounded-m shadow-l"},null,-1);function jg(s,e,o,n,i,r){return l(),a("div",$g,[t("div",kg,[t("h4",wg,[jt(s.$slots,"title")]),t("p",Fg,[jt(s.$slots,"head")]),t("div",Cg,[t("div",Pg,[jt(s.$slots,"body")])])]),Sg,xg])}const Va=oe(vg,[["render",jg]]),Og={key:0,class:"card card-style"},Tg={class:"content"},Ug=t("h3",null,"Наши товары",-1),Ig={class:"collapse",id:"collapse-8",style:{}},Vg={class:"input-style input-style-2 has-icon input-required"},Mg=t("i",{class:"input-icon fa-solid fa-magnifying-glass"},null,-1),Ag=ze('<p class="mb-0 pb-1"> Цена: </p><div class="row mb-0"><div class="col-6"><div class="input-style input-style-2 input-required"><span class="color-highlight">От, ₽</span><input class="form-control" type="email" placeholder="0 ₽"></div></div><div class="col-6"><div class="input-style input-style-2 input-required"><span class="color-highlight">До, ₽</span><input class="form-control" type="email" placeholder="100 ₽"></div></div></div>',2),Eg=t("a",{"data-toggle":"collapse",href:"#collapse-8",class:"btn btn-m btn-full rounded-sm font-900 shadow-xl text-uppercase mb-3","aria-expanded":"true"},[t("i",{class:"fa-solid fa-filter mr-2"}),t("span",{class:"font-14"},"Фильтры избранного товара")],-1),Dg={data(){return{search:null}},computed:{...G(["getSelf","getFavorites"]),currentBot(){return window.currentBot},self(){return this.getSelf}},mounted(){this.getFavorites.length>0&&this.loadActualPriceInFav()},methods:{loadActualPriceInFav(){this.$store.dispatch("loadActualPriceInFav")}}},Ma=Object.assign(Dg,{__name:"Favorites",setup(s){return(e,o)=>e.getFavorites.length>0?(l(),a("div",Og,[t("div",Tg,[Ug,t("div",Ig,[t("div",Vg,[Mg,f(t("input",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),type:"name",placeholder:"Найди товар на странице"},null,512),[[k,e.search]])]),Ag]),Eg,e.getFavorites.length>0?(l(!0),a(v,{key:0},O(e.getFavorites,(n,i)=>(l(),M(So,{item:n},null,8,["item"]))),256)):u("",!0)])])):(l(),M(Va,{key:1},{title:A(()=>[_(" Товар отсутствует ")]),head:A(()=>[_(" На текущий момент товар на страницах сайта отсуствтует ")]),body:A(()=>[_(" Вы можете перейти в раздел товаров и попробовать добавить что-то в корзину или избранное ")]),_:1}))}}),zg=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"})),Bg={key:0,class:"card card-style"},Lg={class:"content"},Rg=t("div",{class:"divider mt-3"},null,-1),Ng=t("h4",null,"Итого",-1),qg=t("p",null," Ниже приведена итоговая цена заказа без учета стоимости доставки. Цена доставки расчитывается отдельно и зависит от расстояния. ",-1),Wg={class:"row mb-0"},Yg={key:0,class:"col-6 text-left"},Hg={class:"font-600"},Qg={class:"col-2 text-center"},Gg={class:"font-600"},Kg={key:1,class:"col-4 text-right"},Jg={class:"font-600"},Xg=t("sup",null,".00",-1),Zg=t("div",{class:"divider mt-4"},null,-1),e1={class:"row mb-0"},t1=t("div",{class:"col-6 text-left"},[t("h4",null,"Суммарно, ед.")],-1),s1={class:"col-6 text-right"},o1=t("div",{class:"col-6 text-left"},[t("h4",null,"Суммарно, цена")],-1),i1={class:"col-6 text-right"},n1=t("sup",null,".00",-1),l1=t("div",{class:"divider mt-4"},null,-1),a1=t("i",{class:"fa-solid fa-file-invoice mr-2"},null,-1),r1=t("span",{class:"color-white"},"Перейти к оформлению",-1),d1=[a1,r1],c1={computed:{...G(["cartProducts","cartTotalCount","cartTotalPrice"]),tg(){return window.Telegram.WebApp}},mounted(){this.cartProducts.length>0&&this.loadActualProducts()},methods:{loadActualProducts(){this.$store.dispatch("loadActualPriceInCart")},startCheckout(){console.log("startCheckout"),this.$store.dispatch("startCheckout"),this.tg.close()}}},Aa=Object.assign(c1,{__name:"Basket",setup(s){return(e,o)=>e.cartProducts.length>0?(l(),a("div",Bg,[t("div",Lg,[(l(!0),a(v,null,O(e.cartProducts,(n,i)=>(l(),M(So,{item:n.product},null,8,["item"]))),256)),Rg,Ng,qg,(l(!0),a(v,null,O(e.cartProducts,(n,i)=>(l(),a("div",Wg,[n.product?(l(),a("div",Yg,[t("h6",Hg,p(n.product.title||"Не указано"),1)])):u("",!0),t("div",Qg,[t("h6",Gg,"x"+p(n.quantity||1),1)]),n.product?(l(),a("div",Kg,[t("h6",Jg,[_(p(n.product.current_price)+" ",1),Xg,_("₽")])])):u("",!0)]))),256)),Zg,t("div",e1,[t1,t("div",s1,[t("h4",null,p(e.cartTotalCount)+" шт.",1)]),o1,t("div",i1,[t("h4",null,[_(p(e.cartTotalPrice),1),n1,_("₽")])])]),l1,t("button",{onClick:o[0]||(o[0]=(...n)=>e.startCheckout&&e.startCheckout(...n)),class:"btn btn-full btn-sm rounded-s bg-highlight font-800 text-uppercase w-100"},d1)])])):(l(),M(Va,{key:1},{title:A(()=>[_(" Товар отсутствует ")]),head:A(()=>[_(" На текущий момент товар на страницах сайта отсуствтует ")]),body:A(()=>[_(" Вы можете перейти в раздел товаров и попробовать добавить что-то в корзину или избранное ")]),_:1}))}}),u1=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"})),m1={computed:{tg(){return window.Telegram.WebApp}},methods:{close(){if(!this.tg){this.$botNotification.warning("Ошибочка","Вы находитесь не в боте!");return}this.tg.close()}}};function h1(s,e,o,n,i,r){return l(),a("button",{onClick:e[0]||(e[0]=(...d)=>r.close&&r.close(...d)),type:"button",class:"btn btn-m btn-full rounded-xl text-uppercase font-900 shadow-s bg-red1-light w-100"}," Вернуться в бота ")}const st=oe(m1,[["render",h1]]),p1={class:"card card-style"},_1={class:"content mb-0"},f1={key:0},b1={key:1},g1={key:2},y1={key:3},v1={class:"input-style input-style-2 has-icon"},$1=t("i",{class:"input-icon fa fa-user"},null,-1),k1={class:"input-style input-style-2 has-icon"},w1=t("i",{class:"input-icon fa-solid fa-phone"},null,-1),F1={class:"input-style input-style-2 has-icon"},C1=t("span",{class:"input-style-1-active input-style-1-inactive"},"Ваше сообщение",-1),P1=t("i",{class:"input-icon fa-solid fa-envelope-open-text"},null,-1),S1=t("em",null,"(нужно)",-1),x1=["disabled"],j1={props:["type"],data(){return{sending:!1,callbackForm:{name:null,phone:null,message:null}}},computed:{self(){return window.self}},mounted(){this.callbackForm.name=this.self.fio_from_telegram||this.self.name,this.callbackForm.phone=this.self.phone||null,this.type==="booking"&&(this.callbackForm.message="Добрый день! Я хочу забронировать столик! Перезвоните мне.")},methods:{submitCallback(){let s=new FormData;this.sending=!0,Object.keys(this.callbackForm).forEach(e=>{const o=this.callbackForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.type&&s.append("type",this.type),this.$store.dispatch("callbackForm",{callbackForm:s}).then(e=>{this.callbackForm={message:null,name:null,phone:null},this.$botNotification.success("Обратная связь","Спасибо за сообщение"),this.sending=!1}).catch(e=>{this.sending=!1})}}},Kn=Object.assign(j1,{__name:"CallbackForm",setup(s){return(e,o)=>{const n=ie("mask");return l(),a("div",p1,[t("div",_1,[s.type?u("",!0):(l(),a("h3",f1,"Обратная связь")),s.type==="booking"?(l(),a("h3",b1,"Бронирование столика")):u("",!0),s.type?u("",!0):(l(),a("p",g1," Вы можете оставить нам сообщение с пожеланиями по улучшению сервиса! ")),s.type==="booking"?(l(),a("p",y1," Укажите в текстовом сообщение критерии бронирования столика, или же оставьте сообщение без изменений! ")):u("",!0),t("form",{onSubmit:o[3]||(o[3]=W((...i)=>e.submitCallback&&e.submitCallback(...i),["prevent"]))},[t("div",v1,[$1,f(t("input",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=i=>e.callbackForm.name=i),type:"text",placeholder:"Иванов Иван Иванович",required:""},null,512),[[k,e.callbackForm.name]])]),t("div",k1,[w1,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[1]||(o[1]=i=>e.callbackForm.phone=i),placeholder:"+7(000)000-00-00",required:""},null,512),[[n,"+7(###)###-##-##"],[k,e.callbackForm.phone]])]),t("div",F1,[C1,P1,S1,f(t("textarea",{class:"form-control",style:{height:"200px","line-height":"150%",padding:"35px"},"onUpdate:modelValue":o[2]||(o[2]=i=>e.callbackForm.message=i),type:"text",placeholder:"",required:""},null,512),[[k,e.callbackForm.message]])]),t("button",{type:"submit",disabled:e.sending,class:"btn btn-full btn-m shadow-l rounded-s text-uppercase font-900 bg-green1-dark my-2 w-100"}," Отправить сообщение ",8,x1),T(st,{class:"my-2"})],32)])])}}}),O1={data(){return{sending:!1,form:{name:null,phone:null}}},computed:{self(){return window.self}},mounted(){es.handler(),this.form.name=this.self.fio_from_telegram||this.self.name,this.form.phone=this.self.phone||null},methods:{submit(){this.$emit("callback",this.form)}}},T1=["disabled"];function U1(s,e,o,n,i,r){return l(),a(v,null,[jt(s.$slots,"head"),t("form",{onSubmit:e[0]||(e[0]=W((...d)=>r.submit&&r.submit(...d),["prevent"]))},[t("button",{type:"submit",disabled:i.sending,class:"btn btn-full btn-m shadow-l rounded-s text-uppercase font-900 bg-green1-dark w-100"}," Начать ",8,T1)],32)],64)}const Ea=oe(O1,[["render",U1]]);const I1={class:"card card-style"},V1=t("div",{class:"card-top"},[t("a",{id:"business-hours-mail",href:"#goto",class:"float-right btn btn-xs rounded-xl text-uppercase font-900 mt-5 mr-3 bg-white color-black"},"Написать нам")],-1),M1={key:0,class:"card-top mt-4 ml-3 pl-1"},A1=t("h1",{class:"color-white mt-1 font-20 font-700"},"Извините! мы закрыты!",-1),E1={class:"color-white opacity-90 mt-n2 mb-0"},D1={key:1,class:"card-top mt-4 ml-3 pl-1"},z1=t("h1",{class:"color-white mt-1 font-20 font-700"},"Мы открыты!",-1),B1={class:"color-white opacity-90 mt-n2 mb-0"},L1={class:"content"},R1=t("div",{class:"working-hours"},[t("p",null,[t("strong",null,"День недели")]),t("p",null,[t("strong",null,"Начало работы")]),t("p",null,[t("strong",null,"Конец работы")])],-1),N1={key:0},q1={key:1},W1={class:"ml-3 mr-3 alert alert-small rounded-s shadow-xl bg-green1-dark",role:"alert"},Y1=t("span",null,[t("i",{class:"fa fa-check"})],-1),H1=t("button",{type:"button",class:"close color-white opacity-60 font-16","data-dismiss":"alert","aria-label":"Close"},"×",-1),Q1={class:"ml-3 mr-3 alert alert-small rounded-s shadow-xl bg-red2-dark",role:"alert"},G1=t("span",null,[t("i",{class:"fa fa-times-circle"})],-1),K1=t("button",{type:"button",class:"close color-white opacity-60 font-16","data-dismiss":"alert","aria-label":"Close"},"×",-1),J1=t("div",{class:"divider divider-margins"},null,-1),X1={name:"App",data(){return{current_day:1,schedule:null,is_work:!1,opened_comment:null,closed_comment:null}},mounted(){this.loadServiceData().then(()=>{})},methods:{loadServiceData(){return this.$store.dispatch("scheduleLoadData").then(s=>{this.schedule=s.schedule,this.current_day=s.current_day,this.is_work=s.is_work,this.opened_comment=s.opened_comment,this.closed_comment=s.closed_comment,console.log(this.schedule)})}}},Da=Object.assign(X1,{setup(s){return(e,o)=>(l(),a(v,null,[t("div",I1,[t("div",{class:C(["caption shadow-xl",{"bg-red2-dark is-business-closed":!e.is_work,"bg-green1-dark is-business-opened":e.is_work}]),style:{height:"120px"}},[V1,e.is_work?u("",!0):(l(),a("div",M1,[A1,t("p",E1,p(e.closed_comment||"не указано"),1)])),e.is_work?(l(),a("div",D1,[z1,t("p",B1,p(e.opened_comment||"не указано"),1)])):u("",!0),t("div",{class:C(["caption-overlay show-business-opened bg-green1-dark",{disabled:!e.is_work}])},null,2),t("div",{class:C(["caption-overlay show-business-closed bg-red2-dark",{disabled:e.is_work}])},null,2)],2),t("div",L1,[R1,(l(!0),a(v,null,O(e.schedule,(n,i)=>(l(),a("div",{class:C(["working-hours",{"bg-green1-dark":e.current_day==i&&e.is_work,"bg-red2-dark":e.current_day==i&&!e.is_work}])},[n.closed?(l(),a("div",N1,[t("p",{class:C(["text-center",{"text-white":e.current_day==i}])},p(n.day),3),t("p",{class:C(["text-center opacity-00",{"text-white":e.current_day==i}])},"-",2),t("p",{class:C(["text-center",{"text-white":e.current_day==i}])},"Не работает",2)])):(l(),a("div",q1,[t("p",{class:C(["text-center",{"text-white":e.current_day==i}])},p(n.day),3),t("p",{class:C(["text-center",{"text-white":e.current_day==i}])},p(n.start_at),3),t("p",{class:C(["text-center",{"text-white":e.current_day==i}])},p(n.end_at),3)]))],2))),256))])]),t("div",{class:C(["show-business-opened mb-4",{disabled:!e.is_work}])},[t("div",W1,[Y1,t("strong",null,p(e.opened_comment||"Не указано"),1),H1])],2),t("div",{class:C(["show-business-closed mb-4",{disabled:e.is_work}])},[t("div",Q1,[G1,t("strong",null,p(e.closed_comment||"Не указано"),1),K1])],2),J1,T(Kn,{id:"goto",name:"goto"})],64))}}),Z1=Object.freeze(Object.defineProperty({__proto__:null,default:Da},Symbol.toStringTag,{value:"Module"})),ey={props:["quiz","needReturn"],data(){return{types:["По порядку","Перемешать всё","Перемешать ответы","Перемешать вопросы"]}},mounted(){},computed:{isCompleted(){return!1}},methods:{returnBack(){this.$emit("return")},selectQuiz(s){this.$store.dispatch("startQuiz",{quiz_id:this.quiz.id}).then(e=>{}).catch(()=>{}),this.$emit("select",s)},openLinkModal(){let s=window.currentScript||null;this.$cashback.qr("005000000"+s)}}},ty={class:"px-1"},sy={key:0,class:"card w-100 shadow-xl rounded-sm"},oy={key:0,class:"card-img-top rounded-m p-2",alt:"..."},iy={class:"card-body"},ny={class:"card-title"},ly={class:"card-text"},ay={class:"list-group list-group-flush"},ry={key:0,class:"list-group-item text-center text-danger"},dy={class:"list-group-item"},cy=t("i",{class:"fa-solid fa-shuffle"},null,-1),uy={key:1,class:"list-group-item"},my=t("i",{class:"fa-solid fa-stopwatch-20"},null,-1),hy={key:2,class:"list-group-item"},py={key:3,class:"list-group-item"},_y={key:4,class:"list-group-item"},fy=t("i",{class:"fa-regular fa-circle-question"},null,-1),by={key:5,class:"list-group-item"},gy=t("i",{class:"fa-solid fa-person-circle-question"},null,-1),yy={key:6,class:"list-group-item"},vy=t("i",{class:"fa-solid fa-link"},null,-1),$y={key:1,class:"card-body"},ky=["disabled"],wy={key:1,class:"alert alert-warning"},Fy={key:2,class:"divider divider-small my-3 bg-highlight"},Cy={key:2,class:"card-body"},Py={class:"card card-style bg-28","data-card-height":"130",style:{height:"130px"}},Sy={class:"card-center"},xy={class:"color-white font-700 text-center mb-0"},jy={class:"color-white text-center opacity-60 mt-n1 mb-0"},Oy={key:0,class:"color-white text-center opacity-60 mt-n1 mb-0"},Ty=t("div",{class:"card-overlay bg-highlight opacity-90"},null,-1),Uy={key:0,class:"divider divider-small my-3 bg-highlight"};function Iy(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",ty,[o.quiz?(l(),a("div",sy,[o.quiz.image?f((l(),a("img",oy,null,512)),[[d,"/file-by-file-id/"+o.quiz.image]]):u("",!0),t("div",iy,[t("h5",ny,p(o.quiz.title||"нет заголовка"),1),t("p",ly,p(o.quiz.description||"нет заголовка"),1)]),t("ul",ay,[o.quiz.is_active?u("",!0):(l(),a("li",ry,"Квиз недоступен")),t("li",dy,[cy,_(" "+p(i.types[o.quiz.display_type]),1)]),o.quiz.round_mode?(l(),a("li",uy,[my,_(" на вопрос "+p(o.quiz.time_limit)+" сек ",1)])):u("",!0),o.quiz.round_mode?(l(),a("li",hy,"Режим викторины (квиза) ")):u("",!0),o.quiz.polling_mode?(l(),a("li",py,"Режим опроса ")):u("",!0),(o.quiz.questions||[]).length>0?(l(),a("li",_y,[fy,_(" Число вопросов "+p((o.quiz.questions||[]).length),1)])):u("",!0),!o.quiz.polling_mode&&(o.quiz.commands||[]).length>0?(l(),a("li",by,[gy,_(" Число команд "+p((o.quiz.commands||[]).length),1)])):u("",!0),o.quiz.polling_mode?u("",!0):(l(),a("li",yy,[vy,t("a",{href:"javascript:void(0)",onClick:e[0]||(e[0]=(...c)=>r.openLinkModal&&r.openLinkModal(...c))},"Поделиться ссылкой")]))]),r.isCompleted?(l(),a("div",Cy,[t("div",Py,[t("div",Sy,[t("h3",xy," Баллов "+p(o.quiz.personal_info.result_points||0),1),t("p",jy," Попытки "+p(o.quiz.personal_info.current_attempts||0)+" / "+p(o.quiz.personal_info.max_attempts||0),1),o.quiz.personal_info.completed_at!=null?(l(),a("p",Oy,p(s.$filters.currentFull(o.quiz.personal_info.completed_at)),1)):u("",!0)]),Ty]),o.needReturn?(l(),a("div",Uy)):u("",!0),o.needReturn?(l(),a("a",{key:1,href:"javascript:void(0)",onClick:e[3]||(e[3]=(...c)=>r.returnBack&&r.returnBack(...c)),class:"btn btn-m btn-full mb-3 rounded-l text-uppercase font-900 shadow-s bg-red1-dark"},"Вернуться назад")):u("",!0)])):(l(),a("div",$y,[(o.quiz.questions||[]).length>0?(l(),a("button",{key:0,type:"button",onClick:e[1]||(e[1]=c=>r.selectQuiz(o.quiz)),disabled:!o.quiz.is_active,class:"btn btn-m w-100 btn-full mb-3 rounded-xl text-uppercase font-900 shadow-s bg-blue1-dark"},"Начать ",8,ky)):(l(),a("div",wy,"Вы не можете сейчас начать квиз! В нём нет вопросов!")),o.needReturn?(l(),a("div",Fy)):u("",!0),o.needReturn?(l(),a("a",{key:3,href:"javascript:void(0)",onClick:e[2]||(e[2]=(...c)=>r.returnBack&&r.returnBack(...c)),class:"btn btn-m btn-full mb-3 rounded-l text-uppercase font-900 shadow-s bg-red1-dark"},"Вернуться назад")):u("",!0)]))])):u("",!0)])}const za=oe(ey,[["render",Iy]]),Vy={props:["quiz"],data(){return{types:["По порядку","Перемешать всё","Перемешать ответы","Перемешать вопросы"]}},computed:{isCompleted(){return!1}},methods:{selectQuiz(s){this.$store.dispatch("startQuiz",{quiz_id:this.quiz.id}).then(e=>{}).catch(()=>{}),this.$emit("select",s)},openLinkModal(s){this.$cashback.qr("007quiz"+s)}}},My={key:0,class:"card card-style bg-1",style:{height:"200px"}},Ay={class:"card-center"},Ey={class:"color-white font-700 text-center mb-0"},Dy={class:"color-white text-center opacity-60 mt-n1 mb-3"},zy=t("div",{class:"card-overlay bg-black opacity-70"},null,-1);function By(s,e,o,n,i,r){return o.quiz?(l(),a("div",My,[t("div",Ay,[t("h2",Ey,p(o.quiz.title||"нет заголовка"),1),t("p",Dy,p(o.quiz.description||"нет заголовка"),1),t("a",{href:"javascript:void(0)",class:"btn btn-m rounded-l font-900 text-uppercase bg-highlight btn-center-xl",onClick:e[0]||(e[0]=d=>r.selectQuiz(o.quiz))},"Детальнее о квизе")]),zy])):u("",!0)}const Ly=oe(Vy,[["render",By]]),Ry={class:"row mb-0"},Ny=t("div",{class:"col-12"},[t("h5",{class:"text-center"},"Квизы для вас")],-1),qy={key:0,class:"col-12 py-2"},Wy={key:1,class:"col-12"},Yy={data(){return{direction:"desc",order:"updated_at",show:!0,loading:!0,quizzes:[],search:null,paginate_object:null}},computed:{...G(["getQuizzes","getQuizzesPaginateObject"])},mounted(){this.loadQuizzes()},methods:{openQuiz(s){this.$emit("open",s)},removeQuiz(s){this.loading=!0,this.$store.dispatch("removeQuiz",{quizId:s}).then(e=>{this.loading=!1,this.loadQuizzes(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},createQuiz(){this.$emit("create")},nextQuizzes(s){this.loadQuizzes(s)},selectEvent(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizzes(0)},loadQuizzes(s=0){this.loading=!0,this.$store.dispatch("loadQuizzes",{dataObject:{search:this.search,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.quizzes=this.getQuizzes,this.paginate_object=this.getQuizzesPaginateObject}).catch(()=>{this.loading=!1})}}},Hy=Object.assign(Yy,{__name:"QuizList",setup(s){return(e,o)=>(l(),a("div",Ry,[Ny,e.quizzes.length>0?(l(),a("div",qy,[(l(!0),a(v,null,O(e.quizzes,(n,i)=>(l(),M(Ly,{onSelect:e.openQuiz,quiz:n},null,8,["onSelect","quiz"]))),256))])):u("",!0),e.quizzes.length>0?(l(),a("div",Wy,[e.paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextQuizzes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0)]))}});const Qy={props:["type","content"],data(){return{url:null}},mounted(){this.url="https://media.your-cashman.com/"}},Gy={class:"d-flex justify-content-center"},Ky=["src"],Jy=["src"],Xy={key:2,class:"w-100",alt:""},Zy={key:3,class:"w-100",alt:""},ev=["src"],tv=["src"];function sv(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",Gy,[(o.type=="video"||o.type=="video_note")&&o.content.indexOf("http")==-1?(l(),a("video",{key:0,class:C(["w-100",{"video-circle":o.type=="video_note"}]),controls:"",poster:"/images/load.gif"},[t("source",{src:i.url+o.content,type:"video/mp4"},null,8,Ky)],2)):u("",!0),o.content.indexOf("http")!=-1?(l(),a("iframe",{key:1,class:"w-100",style:{"min-height":"300px"},src:o.content,frameborder:"0",allowfullscreen:""},`

        `,8,Jy)):u("",!0),o.type=="photo"&&o.content.indexOf("http")==-1?f((l(),a("img",Xy,null,512)),[[d,i.url+o.content]]):u("",!0),o.type=="photo"&&o.content.indexOf("http")!=-1?f((l(),a("img",Zy,null,512)),[[d,o.content]]):u("",!0),o.type=="audio"&&o.content.indexOf("http")!=-1?(l(),a("audio",{key:4,controls:"",autoplay:"",src:o.content},null,8,ev)):u("",!0),o.type=="audio"&&o.content.indexOf("http")==-1?(l(),a("audio",{key:5,controls:"",autoplay:"",src:i.url+o.content},null,8,tv)):u("",!0)])}const Ko=oe(Qy,[["render",sv]]),ov=[{symbol:"D",value:24*60*60*1e3},{symbol:"H",value:60*60*1e3},{symbol:"m",value:60*1e3},{symbol:"s",value:1e3},{symbol:"S",value:100}];function Ba(s,e,o){const n="~"+e;return s.indexOf(n)>-1?s.split(n).map(i=>Ba(i,e,o)).join(n):s.replace(new RegExp(e,"g"),String(o))}function xi(s,e="HH:mm:ss"){const o={};e.indexOf("~")>-1&&(e=e.replace(/~[DHmsS]/g,""));const n=ov.filter(i=>e.indexOf(i.symbol)>-1);for(let i=0,r=n.length;i<r;i++){const{symbol:d,value:c}=n[i],h=r===1?Math.ceil(s/c):Math.floor(s/c);o[d]=h,o[d+d]=h<10?`0${h}`:h,s%=c}return o}function Ql(s,e="HH:mm:ss"){const o=typeof s=="number"?xi(s,e):s,n=Object.keys(o).sort((r,d)=>d.length-r.length);let i=e;return n.forEach(r=>{i=Ba(i,r,o[r])}),i.indexOf("~")>-1&&(i=i.replace(/~([DHmsS])/g,"$1")),i}var Jn=Yn({name:"Countdown",emits:["change","finish"],props:{time:{type:Number,default:0},format:{type:String,default:"HH:mm:ss"},autoStart:{type:Boolean,default:!0}},setup(s,{emit:e}){const o=Et(s.time),n=Et(xi(o.value,s.format)),i=Et(!1),r={restTime:s.time,now:0,timer:0},d=Ii(()=>/s/i.test(s.format)?30:1e3),c=Ii(()=>Ql(n.value,s.format)),h=()=>{i.value||(r.now=Date.now(),r.restTime=o.value,window.clearInterval(r.timer),r.timer=window.setInterval(g,d.value),i.value=!0)},g=()=>{const{restTime:I,now:V}=r,B=Date.now()-V,L=I>B?I-B:0,ee=xi(L,s.format),J=Ql(ee,s.format);J!==c.value&&(e("change",{currentTime:L,resolved:ee,formatted:J}),n.value=ee),o.value=L,I<=B&&w()},w=()=>{x(),e("finish")},x=()=>{i.value=!1,window.clearInterval(r.timer)},P=()=>{o.value=r.restTime=s.time,n.value=xi(s.time,s.format),x()};return s.autoStart&&h(),{currentTime:o,resolved:n,formatted:c,inCountdown:i,start:h,stop:w,reset:P}},render(){const{currentTime:s,resolved:e,formatted:o}=this;return Fa("div",null,this.$slots.default&&this.$slots.default({currentTime:s,resolved:e,formatted:o})||this.formatted)}});const iv={key:0,class:"card card-style"},nv=t("div",{class:"content d-flex justify-content-center align-items-center flex-wrap",style:{"min-height":"300px"}},[t("div",null,[t("p",{class:"text-center w-100 font-weight-bold"},"Мы загружаем квиз!"),t("div",{class:"loader"})])],-1),lv=[nv],av={key:1,class:"card card-style"},rv={class:"content"},dv={key:0},cv={href:"javascript:void(0)",class:"chip chip-small bg-gray1-dark"},uv=t("i",{class:"fa fa-check bg-green1-dark"},null,-1),mv={class:"color-black font-400"},hv={class:"mb-0"},pv={key:1},_v={key:0,class:"mb-0 font-weight-bold text-center"},fv={key:1},bv=["for"],gv=["onUpdate:modelValue","id","value"],yv=["onClick"],vv={key:2},$v=t("p",{class:"mb-0"},[t("small",null,"Открытый вопрос")],-1),kv={class:"form-field form-name"},wv={class:"contactNameField color-theme d-flex justify-content-between",for:"command-title"},Fv=["onClick"],Cv=["onUpdate:modelValue"],Pv=["onClick"],Sv=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),xv={key:2},jv={class:"d-flex justify-content-center font-24"},Ov={class:"countdown-item"},Tv={class:"countdown-item"},Uv=t("small",{class:"text-center w-100 d-block"},"У вас осталось времени",-1),Iv=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Vv=["onClick"],Mv={key:1},Av=t("h6",{class:"text-center my-2"}," А вот и результат ",-1),Ev={key:0},Dv={key:1,class:"text-center my-3"},zv=["innerHTML"],Bv={key:2,class:"card card-style"},Lv={class:"content"},Rv=t("p",null,"Поздравляю! Вы прошли данный квиз! Ваш результат:",-1),Nv={key:0,class:"list-group list-group-numbered"},qv={class:"list-group-item d-flex justify-content-between align-items-start"},Wv={class:"ms-2 me-auto"},Yv={class:"fw-bold"},Hv={class:"my-2"},Qv=["innerHTML"],Gv=["innerHTML"],Kv={props:["quiz"],components:{Countdown:Jn},data(){return{points:[],direction:"asc",order:"round",show:!0,step:0,is_finish:!1,is_group:!1,loading:!0,questions:[],answers:[],search:null,paginate_object:null,prepare:!1}},computed:{...G(["getQuizQuestions","getQuizQuestionsPaginateObject"]),successPercentCount(){if(this.points.length===0)return 0;let s=0;return this.points.forEach(e=>{e.is_right&&s++}),s/this.points.length},summaryPoints(){if(this.points.length===0)return 0;let s=0;return this.points.forEach(e=>{s+=e.points||0}),s}},mounted(){this.loadQuizQuestions()},methods:{isQuestionComplete(s){if(s>=this.answers.length||this.answers[s]===null)return!1;if(Array.isArray(this.answers)){let e=!1;return this.answers.forEach(o=>{o!=null&&(e=!0)}),e}return this.answers[s]!=null},completeAndExit(){this.$store.dispatch("completeQuiz",{quiz_id:this.quiz.id}).then(s=>{}).catch(()=>{}),this.$emit("complete")},finish(){this.step++,this.step>=this.questions.length&&(this.is_finish=!0)},next(){this.prepare=!1,this.step++},removeOpenAnswer(s,e){this.answers[s].splice(e,1)},addMoreOpenAnswer(s){this.answers[s].push(null)},checkAnswer(s,e){this.loading=!0,this.prepare=!0,this.$store.dispatch("checkQuizQuestionAnswer",{quiz_question_id:s,quiz_id:this.quiz.id,answers:JSON.stringify(this.answers[e])}).then(o=>{this.loading=!1,this.points.push(o)}).catch(()=>{this.loading=!1})},toggleAnswer(s,e){let o=this.answers[s].indexOf(e);o==-1?this.answers[s].push(e):this.answers[s].splice(o,1)},nextQuizQuestion(s){this.loadQuizQuestions(s)},selectQuizQuestion(s){this.$emit("select",s),this.$notify("Вопрос успешно выбран")},removeQuizQuestion(s){this.loading=!0,this.$store.dispatch("removeQuizQuestion",{quizQuestionId:s}).then(e=>{this.loading=!1,this.loadQuizQuestions(0),this.$notify("Вопрос успешно удален")}).catch(()=>{this.loading=!1,this.$notify("Вопрос удаления сервиса")})},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizQuestions(0)},loadQuizQuestions(s=0){this.loading=!0,this.$store.dispatch("loadQuizQuestions",{dataObject:{quiz_id:this.quiz.id,search:this.search,order:this.order,direction:this.direction},page:s,size:-1}).then(e=>{this.loading=!1,this.questions=this.getQuizQuestions,this.answers=[],this.questions.forEach(o=>{let n=null;o.is_multiply?(n=[],o.answers.forEach(i=>{n.push(null)})):n=null,o.is_open&&(n=[null]),this.answers.push(n)}),this.paginate_object=this.getQuizQuestionsPaginateObject}).catch(()=>{this.loading=!1})}}},La=Object.assign(Kv,{__name:"QuizRoundQuestionList",setup(s){return(e,o)=>(l(),a(v,null,[e.questions.length===0?(l(),a("div",iv,lv)):u("",!0),e.questions.length>0&&e.step<e.questions.length?(l(),a("div",av,[t("div",rv,[(l(!0),a(v,null,O(e.questions,(n,i)=>(l(),a("div",null,[!e.prepare&&e.step==i?(l(),a("div",dv,[t("a",cv,[uv,t("strong",mv,"Раунд "+p(n.round||1),1)]),t("p",hv,p(n.text||"не указан"),1),n.media_content?(l(),M(Ko,{key:0,class:"mb-2",type:n.content_type,content:n.media_content},null,8,["type","content"])):u("",!0),n.answers?(l(),a("div",pv,[n.is_multiply?(l(),a("p",_v,"Вы можете выбрать несколько ответов")):u("",!0),n.is_open?(l(),a("div",vv,[$v,(l(!0),a(v,null,O(e.answers[i],(r,d)=>(l(),a("div",kv,[t("label",wv,[_(" Ответ #"+p(d+1)+" ",1),e.answers[i].length>1?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:c=>e.removeOpenAnswer(i,d)},"удалить",8,Fv)):u("",!0)]),f(t("input",{type:"text",name:"contactNameField",maxlength:"255","onUpdate:modelValue":c=>e.answers[i][d]=c,placeholder:"Например 'Новые люди'",class:"contactField round-small requiredField",id:"command-title",required:""},null,8,Cv),[[k,e.answers[i][d]]])]))),256)),t("a",{href:"javascript:void(0)",class:"text-center w-100 d-block",onClick:r=>e.addMoreOpenAnswer(i)},"Добавить еще ответ",8,Pv)])):(l(),a("div",fv,[n.is_multiply?u("",!0):(l(!0),a(v,{key:0},O(n.answers,(r,d)=>(l(),a("label",{class:C([{"bg-green2-dark border-green2-dark color-white":e.answers.indexOf(r.id)!=-1},"btn btn-border btn-m btn-full rounded-l mb-1 text-uppercase font-900 border-green2-dark d-flex justify-content-center align-items-center"]),for:"question-"+i+"-answer-"+d},[_(p(r.text)+" ",1),f(t("input",{type:"radio",name:"quiz",class:"d-none","onUpdate:modelValue":c=>e.answers[i]=c,id:"question-"+i+"-answer-"+d,value:r.id},null,8,gv),[[ct,e.answers[i]]])],10,bv))),256)),n.is_multiply?(l(!0),a(v,{key:1},O(n.answers,(r,d)=>(l(),a("button",{class:C([{"bg-red1-dark color-white":e.answers[i].indexOf(r.id)!=-1},"btn btn-border btn-m btn-full mb-1 rounded-l text-uppercase font-900 border-red2-dark w-100 d-flex justify-content-center align-items-center"]),onClick:c=>e.toggleAnswer(i,r.id),type:"button"},p(r.text),11,yv))),256)):u("",!0)]))])):u("",!0),Sv,s.quiz.polling_mode?u("",!0):(l(),a("div",xv,[t("div",jv,[T(Ie(Jn),{time:(s.quiz.time_limit||30)*1e3,onFinish:e.finish,format:"mm:ss"},{default:A(({resolved:r})=>[t("span",Ov,p(r.mm),1),_(" : "),t("span",Tv,p(r.ss),1)]),_:1},8,["time","onFinish"])]),Uv])),Iv,e.isQuestionComplete(i)?(l(),a("a",{key:3,href:"javascript:void(0)",onClick:r=>e.checkAnswer(n.id,i),class:"btn btn-m btn-full mb-2 rounded-m text-uppercase font-900 shadow-s bg-blue2-dark"}," Проверить ",8,Vv)):u("",!0)])):u("",!0),e.prepare&&e.step==i?(l(),a("div",Mv,[Av,e.points[i]?(l(),a("div",Ev,[e.points[i].question.content?(l(),M(Ko,{key:0,class:"mb-2",type:e.points[i].question.type,content:e.points[i].question.content},null,8,["type","content"])):u("",!0)])):u("",!0),(e.points[i]||{}).question?(l(),a("p",Dv,[t("strong",{innerHTML:e.points[i].question.message||"Отлично! Идем дальше"},null,8,zv)])):u("",!0),e.step<e.questions.length-1?(l(),a("a",{key:2,href:"javascript:void(0)",onClick:o[0]||(o[0]=(...r)=>e.next&&e.next(...r)),class:"btn btn-m btn-full mb-2 rounded-m text-uppercase font-900 shadow-s bg-green2-dark"}," Следующий вопрос ")):(l(),a("a",{key:3,href:"javascript:void(0)",onClick:o[1]||(o[1]=(...r)=>e.finish&&e.finish(...r)),class:"btn btn-m btn-full mb-2 rounded-m text-uppercase font-900 shadow-s bg-green2-dark"}," Перейти к баллам "))])):u("",!0)]))),256))])])):u("",!0),e.is_finish?(l(),a("div",Bv,[t("div",Lv,[Rv,e.points.length>0?(l(),a("ol",Nv,[(l(!0),a(v,null,O(e.points,(n,i)=>(l(),a("li",qv,[t("div",Wv,[t("div",Yv,p(n.question.text||"Текст не указан"),1),_(" "+p(n.question.message||"-"),1)]),t("span",{class:C(["badge rounded-pill text-white p-2",{"bg-success":n.is_right,"bg-danger":!n.is_right}])},p(n.points||0)+" баллов",3)]))),256))])):u("",!0),t("h6",Hv,"Вы набрали "+p(e.summaryPoints)+" баллов",1),e.successPercentCount>=s.quiz.success_percent?(l(),a("p",{key:1,innerHTML:s.quiz.success_message},null,8,Qv)):(l(),a("p",{key:2,innerHTML:s.quiz.failure_message},null,8,Gv)),t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=(...n)=>e.completeAndExit&&e.completeAndExit(...n)),class:"btn btn-m btn-full mt-3 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"},"Завершить и выйти")])])):u("",!0)],64))}});({...G(["getQuizCommands","getQuizCommandsPaginateObject"])});const Jv={key:0,class:"card card-style"},Xv={class:"content"},Zv={name:"App",data(){return{step:0,selectedQuiz:null}},computed:{},mounted(){},methods:{openQuiz(s){this.loadQuiz(s.id)},startQuiz(s){this.selectedQuiz=s,this.step=2},completeQuiz(){this.loadQuiz(selectedQuiz.id),this.step=0},loadQuiz(s){this.$store.dispatch("loadSingleQuiz",{quiz_id:s}).then(e=>{this.selectedQuiz=e.data,this.step=1}).catch(()=>{this.step=0})}}},Ra=Object.assign(Zv,{setup(s){return(e,o)=>(l(),a(v,null,[e.step===0?(l(),a("div",Jv,[t("div",Xv,[T(Hy,{onOpen:e.openQuiz},null,8,["onOpen"])])])):u("",!0),e.selectedQuiz&&e.step===1?(l(),M(za,{key:1,"need-return":!0,class:"p-1",quiz:e.selectedQuiz,onReturn:o[0]||(o[0]=n=>e.step=0),onSelect:o[1]||(o[1]=n=>e.step++)},null,8,["quiz"])):u("",!0),e.selectedQuiz&&e.step===2?(l(),M(La,{key:2,time:e.selectedQuiz.time_limit,onComplete:e.completeQuiz,"quiz-id":e.selectedQuiz.id},null,8,["time","onComplete","quiz-id"])):u("",!0)],64))}}),e0=Object.freeze(Object.defineProperty({__proto__:null,default:Ra},Symbol.toStringTag,{value:"Module"}));const t0={key:0,class:"card card-style"},s0=t("div",{class:"content d-flex justify-content-center align-items-center flex-wrap",style:{"min-height":"300px"}},[t("div",null,[t("p",{class:"text-center w-100 font-weight-bold"},"Мы загружаем квиз!"),t("div",{class:"loader"})])],-1),o0=[s0],i0={key:1,class:"card card-style"},n0={class:"content"},l0={class:"mb-5"},a0={href:"javascript:void(0)",class:"chip chip-small bg-gray1-dark"},r0=t("i",{class:"fa fa-check bg-green1-dark"},null,-1),d0={class:"color-black font-400"},c0={class:"mb-0"},u0={key:1},m0={key:0,class:"mb-0 font-weight-bold text-center"},h0={key:1},p0=["for"],_0=["onUpdate:modelValue","id","value"],f0=["onClick"],b0={key:2},g0=t("p",{class:"mb-0"},[t("small",null,"Открытый вопрос")],-1),y0={class:"form-field form-name"},v0={class:"contactNameField color-theme d-flex justify-content-between",for:"command-title"},$0=["onClick"],k0=["onUpdate:modelValue"],w0=["onClick"],F0={key:2},C0=t("h6",{class:"text-center my-2"}," А вот и результат ",-1),P0={key:0},S0={key:1,class:"text-center my-3"},x0=["innerHTML"],j0={key:2,class:"card card-style"},O0={class:"content"},T0=t("p",null,"Поздравляю! Вы прошли данный квиз! Ваш результат:",-1),U0={key:0,class:"list-group list-group-numbered"},I0={class:"list-group-item d-flex justify-content-between align-items-start"},V0={class:"ms-2 me-auto"},M0={class:"fw-bold"},A0={class:"my-2"},E0=["innerHTML"],D0=["innerHTML"],z0={props:["quiz"],components:{Countdown:Jn},data(){return{points:[],direction:"asc",order:"round",show:!0,step:0,is_finish:!1,is_group:!1,loading:!0,questions:[],answers:[],search:null,paginate_object:null,prepare:!1}},computed:{...G(["getQuizQuestions","getQuizQuestionsPaginateObject"]),successPercentCount(){if(this.points.length===0)return 0;let s=0;return this.points.forEach(e=>{e.is_right&&s++}),s/this.points.length},summaryPoints(){if(this.points.length===0)return 0;let s=0;return this.points.forEach(e=>{s+=e.points||0}),s}},mounted(){this.loadQuizQuestions()},methods:{completeAndExit(){this.$store.dispatch("completeQuiz",{quiz_id:this.quiz.id}).then(s=>{}).catch(()=>{}),this.$emit("complete")},finish(){this.is_finish=!0,this.$store.dispatch("checkAndCompleteFullQuiz",{quiz_id:this.quiz.id,answers:JSON.stringify(this.answers)}).then(s=>{this.points=s}).catch(s=>{})},removeOpenAnswer(s,e){this.answers[s].splice(e,1)},addMoreOpenAnswer(s){this.answers[s].push(null)},toggleAnswer(s,e){let o=this.answers[s].value.indexOf(e);o==-1?this.answers[s].value.push(e):this.answers[s].value.splice(o,1)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQuizQuestions(0)},loadQuizQuestions(s=0){this.loading=!0,this.$store.dispatch("loadQuizQuestions",{dataObject:{quiz_id:this.quiz.id,search:this.search,order:this.order,direction:this.direction},page:s,size:-1}).then(e=>{this.loading=!1,this.questions=this.getQuizQuestions,this.answers=[],this.questions.forEach(o=>{let n=null;o.is_multiply?n={id:o.id,value:[]}:n={id:o.id,value:null},o.is_open&&(n=[{id:o.id,value:null}]),this.answers.push(n)}),this.paginate_object=this.getQuizQuestionsPaginateObject}).catch(()=>{this.loading=!1})}}},B0=Object.assign(z0,{__name:"QuizFullQuestionList",setup(s){return(e,o)=>(l(),a(v,null,[e.questions.length===0?(l(),a("div",t0,o0)):u("",!0),e.questions.length>0&&e.step<e.questions.length?(l(),a("div",i0,[t("div",n0,[(l(!0),a(v,null,O(e.questions,(n,i)=>(l(),a("div",l0,[t("a",a0,[r0,t("strong",d0,"Раунд "+p(n.round||1),1)]),t("p",c0,p(n.text||"не указан"),1),n.media_content?(l(),M(Ko,{key:0,class:"mb-2",type:n.content_type,content:n.media_content},null,8,["type","content"])):u("",!0),n.answers?(l(),a("div",u0,[n.is_multiply?(l(),a("p",m0,"Вы можете выбрать несколько ответов")):u("",!0),n.is_open?(l(),a("div",b0,[g0,(l(!0),a(v,null,O(e.answers[i],(r,d)=>(l(),a("div",y0,[t("label",v0,[_(" Ответ #"+p(d+1)+" ",1),e.answers[i].length>1?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:c=>e.removeOpenAnswer(i,d)},"удалить",8,$0)):u("",!0)]),f(t("input",{type:"text",name:"contactNameField",maxlength:"255","onUpdate:modelValue":c=>e.answers[i][d]=c,placeholder:"Например 'Новые люди'",class:"contactField round-small requiredField",id:"command-title",required:""},null,8,k0),[[k,e.answers[i][d]]])]))),256)),t("a",{href:"javascript:void(0)",class:"text-center w-100 d-block",onClick:r=>e.addMoreOpenAnswer(i)},"Добавить еще ответ",8,w0)])):(l(),a("div",h0,[n.is_multiply?u("",!0):(l(!0),a(v,{key:0},O(n.answers,(r,d)=>(l(),a("label",{class:C([{"bg-green2-dark border-green2-dark color-white":e.answers[i].value==r.id},"btn btn-border btn-m btn-full rounded-l mb-1 text-uppercase font-900 border-green2-dark d-flex justify-content-center align-items-center"]),for:"question-"+i+"-answer-"+d},[_(p(r.text)+" ",1),f(t("input",{type:"radio",name:"quiz",class:"d-none","onUpdate:modelValue":c=>e.answers[i].value=c,id:"question-"+i+"-answer-"+d,value:r.id},null,8,_0),[[ct,e.answers[i].value]])],10,p0))),256)),n.is_multiply?(l(!0),a(v,{key:1},O(n.answers,(r,d)=>(l(),a("button",{class:C([{"bg-red1-dark color-white":e.answers[i].value.indexOf(r.id)!=-1},"btn btn-border btn-m btn-full mb-1 rounded-l text-uppercase font-900 border-red2-dark w-100 d-flex justify-content-center align-items-center"]),onClick:c=>e.toggleAnswer(i,r.id),type:"button"},p(r.text),11,f0))),256)):u("",!0)]))])):u("",!0),e.points[i]?(l(),a("div",F0,[C0,e.points[i]?(l(),a("div",P0,[e.points[i].question.content?(l(),M(Ko,{key:0,class:"mb-2",type:e.points[i].question.type,content:e.points[i].question.content},null,8,["type","content"])):u("",!0)])):u("",!0),(e.points[i]||{}).question?(l(),a("p",S0,[t("strong",{innerHTML:e.points[i].question.message||"Отлично! Идем дальше"},null,8,x0)])):u("",!0)])):u("",!0)]))),256)),e.is_finish?u("",!0):(l(),a("a",{key:0,href:"javascript:void(0)",onClick:o[0]||(o[0]=(...n)=>e.finish&&e.finish(...n)),class:"btn btn-m btn-full mb-2 rounded-m text-uppercase font-900 shadow-s bg-green2-dark"}," Завершить опрос и посмотреть результат "))])])):u("",!0),e.is_finish?(l(),a("div",j0,[t("div",O0,[T0,e.points.length>0?(l(),a("ol",U0,[(l(!0),a(v,null,O(e.points,(n,i)=>(l(),a("li",I0,[t("div",V0,[t("div",M0,p(n.question.text||"Текст не указан"),1),_(" "+p(n.question.message||"-"),1)]),t("span",{class:C(["badge rounded-pill text-white p-2",{"bg-success":n.is_right,"bg-danger":!n.is_right}])},p(n.points||0)+" баллов",3)]))),256))])):u("",!0),t("h6",A0,"Вы набрали "+p(e.summaryPoints)+" баллов",1),e.successPercentCount>=s.quiz.success_percent?(l(),a("p",{key:1,innerHTML:s.quiz.success_message},null,8,E0)):(l(),a("p",{key:2,innerHTML:s.quiz.failure_message},null,8,D0)),t("a",{href:"javascript:void(0)",onClick:o[1]||(o[1]=(...n)=>e.completeAndExit&&e.completeAndExit(...n)),class:"btn btn-m btn-full mt-3 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"},"Завершить и выйти")])])):u("",!0)],64))}}),L0={key:0},R0={key:1},N0={name:"App",data(){return{step:0,loading:!1,quiz:null}},mounted(){this.loadQuiz()},methods:{completeQuiz(){this.loadQuiz(),this.step=0},loadQuiz(){this.loading=!0,this.$store.dispatch("loadSingleQuiz",{quiz_id:this.$route.params.quizId}).then(s=>{this.loading=!1,this.quiz=s.data}).catch(()=>{this.loading=!1})}}},Na=Object.assign(N0,{setup(s){return(e,o)=>(l(),a(v,null,[e.quiz&&e.step===0?(l(),a("div",L0,[T(za,{class:"p-1",quiz:e.quiz,onSelect:o[0]||(o[0]=n=>e.step++)},null,8,["quiz"])])):u("",!0),e.quiz&&e.step===1?(l(),a("div",R0,[e.quiz.round_mode?(l(),M(La,{key:0,onComplete:e.completeQuiz,quiz:e.quiz},null,8,["onComplete","quiz"])):u("",!0),e.quiz.round_mode?u("",!0):(l(),M(B0,{key:1,onComplete:e.completeQuiz,quiz:e.quiz},null,8,["onComplete","quiz"]))])):u("",!0)],64))}}),q0=Object.freeze(Object.defineProperty({__proto__:null,default:Na},Symbol.toStringTag,{value:"Module"})),W0={class:"card card-style"},Y0={class:"content"},H0={class:"input-style input-style-2 input-required"},Q0={class:"content"},G0={style:{"line-height":"100%"}},K0=t("strong",{class:"font-10"}," Тип сортировки:",-1),J0={key:0,class:"fa-solid fa-arrow-down-short-wide"},X0={key:1,class:"fa-solid fa-arrow-up-wide-short"},Z0={key:0,class:"fa-solid fa-arrow-down-short-wide"},e2={key:1,class:"fa-solid fa-arrow-up-wide-short"},t2={key:0,class:"fa-solid fa-arrow-down-short-wide"},s2={key:1,class:"fa-solid fa-arrow-up-wide-short"},o2={key:0,class:"fa-solid fa-arrow-down-short-wide"},i2={key:1,class:"fa-solid fa-arrow-up-wide-short"},n2={key:0,class:"fa-solid fa-arrow-down-short-wide"},l2={key:1,class:"fa-solid fa-arrow-up-wide-short"},a2={"data-card-height":"140",class:"card card-style rounded-m shadow-xl bg-18",style:{height:"140px"}},r2={class:"card-top mt-4 ml-3"},d2={class:"color-white"},c2={class:"color-white mb-0 font-600 font-10"},u2={class:"color-white font-10 opacity-70 mt-2 mb-n1"},m2=t("i",{class:"fa-solid fa-money-bill-wave pr-1"},null,-1),h2={class:"color-white font-10 opacity-70"},p2=t("i",{class:"fa fa-map-marker-alt"},null,-1),_2={class:"card-center mr-3"},f2=["onClick"],b2=t("div",{class:"card-overlay bg-black opacity-80"},null,-1),g2={key:1,class:"card card-style bg-red2-dark rounded-m shadow-xl"},y2=t("div",{class:"content"},[t("h4",{class:"color-white"},"Список событий"),t("p",{class:"color-white"}," На текущий момент нет событий в вашем списке. Попробуйте изменить параметры поиска. ")],-1),v2=[y2],$2={data(){return{direction:"desc",order:"updated_at",show:!0,is_group:!1,loading:!0,events:[],search:null,paginate_object:null}},computed:{...G(["getAppointmentEvents","getAppointmentEventsPaginateObject"])},mounted(){this.loadAppointmentEvents()},methods:{nextAppointmentEvents(s){this.loadAppointmentEvents(s)},selectEvent(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentEvents(0)},loadAppointmentEvents(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentEvents",{dataObject:{search:this.search,is_group:this.is_group,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.events=this.getAppointmentEvents,this.paginate_object=this.getAppointmentEventsPaginateObject}).catch(()=>{this.loading=!1})}}},k2=Object.assign($2,{__name:"AppointmentEventTable",setup(s){return(e,o)=>(l(),a(v,null,[t("div",W0,[t("div",Y0,[t("div",H0,[f(t("input",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),type:"search",placeholder:"Поиск события"},null,512),[[k,e.search]])]),t("button",{class:"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme w-100",onClick:o[1]||(o[1]=n=>e.loadAppointmentEvents(0)),type:"button",id:"appointment-search-event"},"Найти ")]),t("div",Q0,[t("p",G0,[K0,t("a",{class:"mx-1 font-10 my-1",onClick:o[2]||(o[2]=n=>e.loadAndOrder("id")),href:"javascript:void(0)"},[_("По порядку следования "),e.order==="id"&&e.direction==="asc"?(l(),a("i",J0)):u("",!0),e.order==="id"&&e.direction==="desc"?(l(),a("i",X0)):u("",!0),_(", ")]),t("a",{class:"mx-1 font-10 my-1",onClick:o[3]||(o[3]=n=>e.loadAndOrder("title")),href:"javascript:void(0)"},[_("По заголовку "),e.order==="title"&&e.direction==="asc"?(l(),a("i",Z0)):u("",!0),e.order==="title"&&e.direction==="desc"?(l(),a("i",e2)):u("",!0),_(", ")]),t("a",{class:"mx-1 font-10 my-1",onClick:o[4]||(o[4]=n=>e.loadAndOrder("subtitle")),href:"javascript:void(0)"},[_("По подзаголовку "),e.order==="subtitle"&&e.direction==="asc"?(l(),a("i",t2)):u("",!0),e.order==="subtitle"&&e.direction==="desc"?(l(),a("i",s2)):u("",!0),_(", ")]),t("a",{class:"mx-1 font-10 my-1",onClick:o[5]||(o[5]=n=>e.loadAndOrder("description")),href:"javascript:void(0)"},[_("По описанию "),e.order==="description"&&e.direction==="asc"?(l(),a("i",o2)):u("",!0),e.order==="description"&&e.direction==="desc"?(l(),a("i",i2)):u("",!0),_(", ")]),t("a",{class:"mx-1 font-10 my-1",onClick:o[6]||(o[6]=n=>e.loadAndOrder("updated_at")),href:"javascript:void(0)"},[_("По дате добавления "),e.order==="updated_at"&&e.direction==="asc"?(l(),a("i",n2)):u("",!0),e.order==="updated_at"&&e.direction==="desc"?(l(),a("i",l2)):u("",!0)])])])]),e.events.length>0?(l(!0),a(v,{key:0},O(e.events,(n,i)=>(l(),a("div",a2,[t("div",r2,[t("h2",d2,p(n.title||"Не указано"),1),t("h6",c2,p(n.subtitle||"Не указано"),1),t("p",u2,[m2,_(" от "+p(n.min_price||0)+" ₽",1)]),t("p",h2,[p2,_(" "+p(n.address||"Адрес не указан"),1)])]),t("div",_2,[t("a",{href:"javascript:void(0)",onClick:r=>e.selectEvent(n),class:"float-right bg-highlight btn btn-xs text-uppercase font-900 rounded-xl font-11"},"Записаться",8,f2)]),b2]))),256)):(l(),a("div",g2,v2)),e.paginate_object?(l(),M(Ce,{key:2,onPagination_page:e.nextAppointmentEvents,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64))}}),w2={class:"card card-style"},F2={class:"content"},C2={class:"mb-3"},P2={class:"form-label d-flex justify-content-between mt-2",id:"bot-domain"},S2=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),x2=t("div",null," ФИО человека, который посетит запись ",-1),j2=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),O2=t("div",null,"Нужно ",-1),T2={class:"mb-3"},U2={class:"form-label d-flex justify-content-between mt-2",id:"bot-domain"},I2=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),V2=t("div",null," Номер телефона человека, который посетит запись ",-1),M2=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),A2=t("div",null,"Нужно ",-1),E2={class:"mb-3"},D2={class:"form-label mt-2",id:"bot-domain"},z2=t("p",{class:"mb-0 line-height-xs"}," Дополнительная информация о вас",-1),B2={class:"mb-0 line-height-xs"},L2={key:0,class:"text-gray-400",style:{"font-size":"10px"}},R2={type:"submit",class:"btn btn-m btn-full w-100 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark"},N2={key:0},q2={key:1},W2={props:["eventId","appointment","selectedScheduleTime"],data(){return{step:0,load:!1,days:["понедельник","вторник","среду","четверг","пятницу","субботу","воскресенье"],appointmentForm:{id:null,appointment_event_id:null,appointment_schedule_id:null,status:0,name:null,phone:null,info:null}}},computed:{tg(){return window.Telegram.WebApp}},mounted(){this.appointment&&this.$nextTick(()=>{this.appointmentForm={id:this.appointment.id||null,appointment_event_id:this.appointment.appointment_event_id||null,appointment_schedule_id:this.appointment.appointment_schedule_id||null,bot_user_id:this.appointment.bot_user_id||null,status:this.appointment.status||0,name:this.appointment.name||null,phone:this.appointment.phone||null,info:this.appointment.info||null}})},methods:{backToSelectSchedule(){this.$emit("back")},selectScheduleTime(s){if(s.appointment){this.$notify("Данное время уже занято!");return}this.selected_schedule_time=s,this.need_schedule_time=!1},selectBotUser(s){this.selected_bot_user=s,this.need_load_users=!1},clearAppointmentForm(){this.appointmentForm={id:null,appointment_event_id:null,appointment_schedule_id:null,status:0},this.selected_schedule_time=null,this.selected_bot_user=null},submitForm(){this.appointmentForm.appointment_schedule_id=this.selectedScheduleTime.id,this.appointmentForm.appointment_event_id=this.eventId;let s=new FormData;Object.keys(this.appointmentForm).forEach(e=>{const o=this.appointmentForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("storeAppointment",{dataObject:{appointmentForm:s}}).then(e=>{this.clearAppointmentForm(),this.$emit("callback"),this.$botNotification.success("Отлично!","Вы успешно записались!"),setTimeout(()=>{this.tg.close()},2e3)}).catch(e=>{this.$botNotification.warning("Упс..!","Кажется что-то пошло не так!")})}}},Y2=Object.assign(W2,{__name:"AppointmentForm",setup(s){return(e,o)=>{const n=Qe("Popper"),i=ie("mask");return l(),a("div",w2,[t("div",F2,[t("button",{onClick:o[0]||(o[0]=(...r)=>e.backToSelectSchedule&&e.backToSelectSchedule(...r)),class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red2-dark"},"Назад "),t("form",{onSubmit:o[4]||(o[4]=W((...r)=>e.submitForm&&e.submitForm(...r),["prevent"]))},[t("div",C2,[t("label",P2,[t("div",null,[T(n,null,{content:A(()=>[x2]),default:A(()=>[S2]),_:1}),_(" Ф.И.О. посетителя ")]),T(n,null,{content:A(()=>[O2]),default:A(()=>[j2]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"Иванов Иван Иванович","aria-label":"ФИО","onUpdate:modelValue":o[1]||(o[1]=r=>e.appointmentForm.name=r),maxlength:"255","aria-describedby":"appointment-name",required:""},null,512),[[k,e.appointmentForm.name]])]),t("div",T2,[t("label",U2,[t("div",null,[T(n,null,{content:A(()=>[V2]),default:A(()=>[I2]),_:1}),_(" Телефонный номер посетителя ")]),T(n,null,{content:A(()=>[A2]),default:A(()=>[M2]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"+7(000)000-00-00","aria-label":"номер телефона","onUpdate:modelValue":o[2]||(o[2]=r=>e.appointmentForm.phone=r),maxlength:"255","aria-describedby":"appointment-phone",required:""},null,512),[[i,"+7(###)###-##-##"],[k,e.appointmentForm.phone]])]),t("div",E2,[t("label",D2,[z2,t("p",B2,[e.appointmentForm.info?(l(),a("small",L2," Длина текста "+p(e.appointmentForm.info.length)+" / 255",1)):u("",!0)])]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Информация от клиента","aria-label":"Информация от клиента",maxlength:"255","onUpdate:modelValue":o[3]||(o[3]=r=>e.appointmentForm.info=r),"aria-describedby":"appointment-info"},`
                    `,512),[[k,e.appointmentForm.info]])]),t("button",R2,[e.appointmentForm.id==null?(l(),a("span",N2,"Записаться")):(l(),a("span",q2,"Обновить запись"))])],32)])])}}}),H2={class:"card card-style"},Q2={class:"content"},G2={key:0,class:"font-700 font-12 text-center my-2"},K2={class:"color-red1-dark"},J2={key:1,class:"font-700 font-12 text-center my-2"},X2={style:{"line-height":"100%"}},Z2=t("strong",{class:"font-10"}," Тип сортировки:",-1),e$={key:0,class:"fa-solid fa-arrow-down-short-wide"},t$={key:1,class:"fa-solid fa-arrow-up-wide-short"},s$={key:0,class:"fa-solid fa-arrow-down-short-wide"},o$={key:1,class:"fa-solid fa-arrow-up-wide-short"},i$={key:0,class:"fa-solid fa-arrow-down-short-wide"},n$={key:1,class:"fa-solid fa-arrow-up-wide-short"},l$={class:"card card-style border"},a$={class:"content"},r$={class:"table text-center rounded-sm shadow-l",style:{overflow:"hidden"}},d$=t("th",{scope:"row"},"День",-1),c$=t("th",{scope:"row"},"Время",-1),u$=t("th",{scope:"row"},"Дата",-1),m$=["disabled","onClick"],h$={key:0},p$={key:1},_$={key:1,class:"card card-style bg-red2-dark rounded-m shadow-xl"},f$=t("div",{class:"content"},[t("h4",{class:"color-white"},"Расписание"),t("p",{class:"color-white"}," В данный временной период нет ни одного доступного времени для записи. Попробуйте выбрать другой временной период. Для выбора временного периода нажми на любой день интересующей вас недели. ")],-1),b$=[f$],g$={props:["eventId"],components:{VueDatePicker:oi},data(){return{date:null,loading:!0,schedule:[],order:null,direction:null,months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","октябрь","Ноябрь","Декабрь"],days:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],paginate_object:null}},watch:{date:{handler:function(s){this.loadAppointmentSchedules()},deep:!0}},computed:{...G(["getAppointmentSchedules","getAppointmentSchedulesPaginateObject"])},mounted(){this.date=new Date,this.loadAppointmentSchedules()},methods:{selectTime(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadAppointmentSchedules(0)},nextAppointmentSchedule(s){this.loadAppointmentSchedules(s)},loadAppointmentSchedules(s=0){this.loading=!0,this.$store.dispatch("loadAppointmentSchedules",{dataObject:{date:this.date||null,event_id:this.eventId,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.schedule=this.getAppointmentSchedules,this.paginate_object=this.getAppointmentSchedulesPaginateObject}).catch(()=>{this.loading=!1})}}},y$=Object.assign(g$,{__name:"AppointmentScheduleList",setup(s){return(e,o)=>(l(),a(v,null,[t("div",H2,[t("div",Q2,[T(Ie(oi),{inline:"","auto-apply":"",locale:"ru","enable-time-picker":!1,modelValue:e.date,"onUpdate:modelValue":o[0]||(o[0]=n=>e.date=n)},null,8,["modelValue"]),e.schedule.length>0?(l(),a("p",G2,[_("Есть "),t("strong",K2,p(e.schedule.length),1),_(" ячейки для записи")])):(l(),a("p",J2,"Нет доступных ячеек для записи")),t("p",X2,[Z2,t("a",{class:"mx-1 font-10 my-1",onClick:o[1]||(o[1]=n=>e.loadAndOrder("day")),href:"javascript:void(0)"},[_("По дню недели "),e.order==="day"&&e.direction==="asc"?(l(),a("i",e$)):u("",!0),e.order==="day"&&e.direction==="desc"?(l(),a("i",t$)):u("",!0)]),t("a",{class:"mx-1 font-10 my-1",onClick:o[2]||(o[2]=n=>e.loadAndOrder("start_time")),href:"javascript:void(0)"},[_("По времени начала "),e.order==="start_time"&&e.direction==="asc"?(l(),a("i",s$)):u("",!0),e.order==="start_time"&&e.direction==="desc"?(l(),a("i",o$)):u("",!0)]),t("a",{class:"mx-1 font-10 my-1",onClick:o[3]||(o[3]=n=>e.loadAndOrder("end_time")),href:"javascript:void(0)"},[_("По времени окончания "),e.order==="end_time"&&e.direction==="asc"?(l(),a("i",i$)):u("",!0),e.order==="end_time"&&e.direction==="desc"?(l(),a("i",n$)):u("",!0)])])])]),e.schedule.length>0?(l(!0),a(v,{key:0},O(e.schedule,n=>(l(),a("div",l$,[t("div",a$,[t("table",r$,[t("tbody",null,[t("tr",{class:C([{"bg-gray2-dark":n.appointment!=null,"bg-highlight":n.appointment==null},"color-gray1-dark"])},[d$,t("td",null,p(e.days[n.day-1]),1)],2),t("tr",{class:C([{"bg-gray2-dark":n.appointment!=null,"bg-highlight":n.appointment==null},"color-gray1-dark"])},[c$,t("td",null,p(n.start_time||"-")+" - "+p(n.end_time||"-"),1)],2),t("tr",{class:C([{"bg-gray2-dark":n.appointment!=null,"bg-highlight":n.appointment==null},"color-gray1-dark"])},[u$,t("td",null,p(n.year||"-")+" "+p(e.months[n.month||0])+" "+p(n.day_number),1)],2)])]),t("button",{disabled:n.appointment!=null,onClick:i=>e.selectTime(n),class:"btn btn-m btn-full rounded-xl text-uppercase font-900 shadow-s bg-red1-light w-100"},[n.appointment!=null?(l(),a("span",h$," Данное время уже занято ")):(l(),a("span",p$," Выбрать время "))],8,m$)])]))),256)):(l(),a("div",_$,b$)),e.paginate_object?(l(),M(Ce,{key:2,onPagination_page:e.nextAppointmentSchedule,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64))}}),v$={class:"card card-style"},$$={class:"content"},k$={key:0,class:"card-img-top rounded-m p-2",alt:"..."},w$=t("div",{class:"divider mb-3 mt-1"},null,-1),F$={key:1,class:"p-3"},C$={class:"row text-center row-cols-3 mb-n4"},P$=["href"],S$={class:"img-fluid rounded-xs preload-img",alt:"img"},x$={key:2,class:"divider mb-3 mt-1"},j$={class:"font-700 mb-2"},O$={class:"font-700 mb-2 font-12"},T$={class:"mt-n1 mb-3"},U$=t("span",{class:"d-block font-700 font-12"},"Описание услуги",-1),I$={class:"font-10 opacity-70 mb-2"},V$=t("i",{class:"fa fa-map-marker-alt"},null,-1),M$=t("p",{class:"mb-2"},[t("span",{class:"d-block font-700 font-12"},"Сервисы")],-1),A$={key:3,class:"list-group"},E$={class:"border border-gray1-dark rounded-s shadow-xs p-3 d-flex align-items-center mb-2"},D$=["onClick"],z$={class:"ml-2 d-flex flex-column"},B$=["onClick"],L$=["onClick"],R$={key:0},N$={href:"#",class:"chip chip-small bg-dark2-dark"},q$=t("i",{class:"fa-solid fa-layer-group bg-green1-dark"},null,-1),W$={class:"color-white"},Y$={key:0,href:"#",class:"chip chip-small bg-gray2-dark"},H$=t("i",{class:"fa-solid fa-hand-holding-dollar bg-green1-dark"},null,-1),Q$=t("span",{class:"color-white"},"Нужна предоплата",-1),G$=[H$,Q$],K$={class:"font-12"},J$={key:0,class:"font-700"},X$={key:1,class:"font-700"},Z$={key:1,class:"p-3"},ek={class:"row text-center row-cols-3 mb-n4"},tk=["href"],sk={class:"img-fluid rounded-xs preload-img",alt:"img"},ok={props:["event"],data(){return{selectedSchedule:null}},methods:{back(){this.$emit("back")},toggleService(s){this.event.services[s].show_full=!this.event.services[s].show_full},selectSchedule(s){this.selectedSchedule=s,this.$emit("next",s),this.$botNotification.success("Расписание","Отлично! Дата выбрана, остался последний шаг")}}},ik=Object.assign(ok,{__name:"AppointmentDetails",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[t("div",v$,[t("div",$$,[t("button",{onClick:o[0]||(o[0]=(...i)=>e.back&&e.back(...i)),class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red2-dark"},"Назад "),s.event.images.length>0?f((l(),a("img",k$,null,512)),[[n,"/file-by-file-id/"+s.event.images[0]]]):u("",!0),w$,s.event.images.length>1?(l(),a("div",F$,[t("div",C$,[(l(!0),a(v,null,O(s.event.images,i=>(l(),a("a",{class:"col mb-4 default-link","data-lightbox":"gallery-1",href:"/file-by-file-id/"+i},[f(t("img",S$,null,512),[[n,"/file-by-file-id/"+i]])],8,P$))),256))])])):u("",!0),s.event.images.length>1?(l(),a("div",x$)):u("",!0),t("h2",j$,p(s.event.title||"Не указано"),1),t("h6",O$,p(s.event.subtitle||"Не указано"),1),t("p",T$,[U$,t("em",null,p(s.event.description||"Не указано"),1)]),t("p",I$,[V$,_(" "+p(s.event.address||"Адрес не указан"),1)]),M$,s.event.services.length>0?(l(),a("div",A$,[(l(!0),a(v,null,O(s.event.services,(i,r)=>(l(),a("div",E$,[t("i",{class:"fa-solid fa-clock-rotate-left font-20 color-blue2-dark",onClick:d=>e.toggleService(r)},null,8,D$),t("div",z$,[t("span",{class:"mb-0 line-height-xs font-700",onClick:d=>e.toggleService(r)},p(i.title||"Не указано"),9,B$),t("em",{class:"mb-0 line-height-xs font-10",onClick:d=>e.toggleService(r)},p(i.description||"Не указано "),9,L$),i.show_full?(l(),a("div",R$,[t("a",N$,[q$,t("span",W$,p(i.category||"Не указано"),1)]),i.need_prepayment?(l(),a("a",Y$,G$)):u("",!0),t("p",K$,[_(" Цена услуги "),(i.discount_price||0)===0?(l(),a("span",J$,p(i.price)+" ₽",1)):(l(),a("span",X$,p(i.discount_price)+" ₽ ",1))]),i.images.length>0?(l(),a("div",Z$,[t("div",ek,[(l(!0),a(v,null,O(i.images,d=>(l(),a("a",{class:"col mb-4 default-link","data-lightbox":"gallery-1",href:"/file-by-file-id/"+d},[f(t("img",sk,null,512),[[n,"/file-by-file-id/"+d]])],8,tk))),256))])])):u("",!0)])):u("",!0)])]))),256))])):u("",!0)])]),s.event?(l(),M(y$,{key:0,onSelect:e.selectSchedule,"event-id":s.event.id},null,8,["onSelect","event-id"])):u("",!0)],64)}}}),nk={key:0},lk={key:1},ak={key:2},rk={key:3},dk={name:"App",data(){return{step:1,loading:!1,selectedEvent:null,selectedSchedule:null}},mounted(){},methods:{nextToForm(s){this.selectedSchedule=s,this.step=3},backToSelectEvent(){this.step=1,this.selectedEvent=null},backToSelectSchedule(){this.selectedSchedule=null,this.step=2},selectEvent(s){this.selectedEvent=s,this.step=2}}},qa=Object.assign(dk,{setup(s){return(e,o)=>(l(),a(v,null,[e.step===0?(l(),a("div",nk)):u("",!0),e.step===1?(l(),a("div",lk,[T(k2,{onSelect:e.selectEvent},null,8,["onSelect"])])):u("",!0),e.step===2?(l(),a("div",ak,[T(ik,{onNext:e.nextToForm,onBack:e.backToSelectEvent,event:e.selectedEvent},null,8,["onNext","onBack","event"])])):u("",!0),e.step===3?(l(),a("div",rk,[T(Y2,{onBack:e.backToSelectSchedule,"event-id":e.selectedEvent.id,"selected-schedule-time":e.selectedSchedule},null,8,["onBack","event-id","selected-schedule-time"])])):u("",!0)],64))}}),ck=Object.freeze(Object.defineProperty({__proto__:null,default:qa},Symbol.toStringTag,{value:"Module"}));const uk={data(){return{money_amount:1e3}},mounted(){class s{constructor(c){let h=c;this.getWalletValue=()=>h,this.checkCanPlay=g=>h>=g,this.changeWalletValue=(g,w="+")=>{if(typeof g=="number"&&!isNaN(g)){if(w==="+")return h+=g;if(w==="-")return h-=g;throw new Error("Nieprawidłowy operator działania.")}else throw new Error("Nieprawidłowa liczba.")}}}class e{constructor(){this.options=["banana","plum","cherry"];let c=this.drawResult();this.getDrawResult=()=>c}drawResult(){let c=[];for(let h=0;h<this.options.length;h++){const g=Math.floor(Math.random()*this.options.length),w=this.options[g];c.push(w)}return c}}class o{static moneyWinInGame(c,h){return c?3*(Math.random()*(h-1)+1):0}static checkWinner(c){return c[0]===c[1]&&c[1]===c[2]||c[0]!==c[1]&&c[1]!==c[2]&&c[0]!==c[2]}}class n{constructor(){this.gameResults=[]}addGameToStatistics(c,h){let g={win:c,bid:h};this.gameResults.push(g)}showGameStatistics(){let c=this.gameResults.length,h=this.gameResults.filter(w=>w.win).length,g=this.gameResults.filter(w=>!w.win).length;return[c,h,g]}}class i{constructor(c=200){this.stats=new n,this.wallet=new s(c),document.getElementById("spin").addEventListener("click",this.startGame.bind(this)),this.inputBid=document.getElementById("bid"),this.walletSaldo=document.querySelector('[data-summary="user-cash"]'),this.lastGame=document.querySelector('[data-summary="last-game"]'),this.numberOfSpins=document.querySelector('[data-summary="spins"]'),this.numberOfWins=document.querySelector('[data-summary="wins"]'),this.numberOfLoses=document.querySelector('[data-summary="losses"]'),this.fruitsInMachine=[...document.querySelectorAll('[data-option="fruit"]')],this.render()}render(c=["url(../../images/bandit/dolar_start_sign.png)","url(../../images/bandit/dolar_start_sign.png)","url(../../images/bandit/dolar_start_sign.png)"],h=this.wallet.getWalletValue(),g=[0,0,0],w="",x="",P=0){x?(document.querySelector(".summary p:nth-child(2)").style.color="rgb(6, 214, 6)",document.querySelector(".summary p:nth-child(2)").style.textShadow="2px 5px 30px rgb(6, 214, 6);",w=`You win +${P*3}!`):!x&&x!==""&&(document.querySelector(".summary p:nth-child(2)").style.color="rgb(251, 17, 17)",document.querySelector(".summary p:nth-child(2)").style.textShadow="2px 5px 30px rgb(251, 17, 17);",w=`You lose -${P}`),this.walletSaldo.textContent=h,this.lastGame.textContent=w,this.numberOfSpins.textContent=g[0],this.numberOfWins.textContent=g[1],this.numberOfLoses.textContent=g[2],this.fruitsInMachine.forEach((I,V)=>I.style.backgroundImage=c[V])}startGame(){if(this.inputBid.value<1)return alert("Bid value cannot be lower than 1$.");const c=Math.floor(this.inputBid.value);if(!this.wallet.checkCanPlay(c))return alert("You don't have enough cash in wallet!");this.wallet.changeWalletValue(c,"-"),this.draw=new e;const h=r.draw.getDrawResult();h[0]==="plum"&&(this.render[0]=this.fruitsInMachine[0].style.backgroundImage="url(../../images/bandit/plum_transparent.png)"),h[1]==="plum"&&(this.render[1]=this.fruitsInMachine[1].style.backgroundImage="url(../../images/bandit/plum_transparent.png)"),h[2]==="plum"&&(this.render[2]=this.fruitsInMachine[2].style.backgroundImage="url(../../images/bandit/plum_transparent.png)"),h[0]==="banana"&&(this.render[0]=this.fruitsInMachine[0].style.backgroundImage="url(../../images/bandit/banana_transparent.png)"),h[1]==="banana"&&(this.render[1]=this.fruitsInMachine[1].style.backgroundImage="url(../../images/bandit/banana_transparent.png)"),h[2]==="banana"&&(this.render[2]=this.fruitsInMachine[2].style.backgroundImage="url(../../images/bandit/banana_transparent.png)"),h[0]==="cherry"&&(this.render[0]=this.fruitsInMachine[0].style.backgroundImage="url(../../images/bandit/cherries_transparent.png)"),h[1]==="cherry"&&(this.render[1]=this.fruitsInMachine[1].style.backgroundImage="url(../../images/bandit/cherries_transparent.png)"),h[2]==="cherry"&&(this.render[2]=this.fruitsInMachine[2].style.backgroundImage="url(../../images/bandit/cherries_transparent.png)");const g=o.checkWinner(h),w=o.moneyWinInGame(g,c);w&&this.wallet.changeWalletValue(w,"+"),this.stats.addGameToStatistics(g,c),this.render([h],this.wallet.getWalletValue(),this.stats.showGameStatistics(),this.wonMoney,g,c)}}const r=new i(this.money_amount)}},mk={class:"one-armed-bandit"},hk=ze('<h1 class="mb-5" data-v-a02108c1>Однорукий бандит</h1><section class="machine" data-v-a02108c1><div class="cover" data-v-a02108c1><div class="inside-cover" data-v-a02108c1><div class="screen-1" data-option="fruit" data-v-a02108c1></div><div class="screen-2" data-option="fruit" data-v-a02108c1></div><div class="screen-3" data-option="fruit" data-v-a02108c1></div></div></div></section><section class="panel" data-v-a02108c1><input type="number" placeholder="$$$" id="bid" data-v-a02108c1><button class="spin" id="spin" data-v-a02108c1>КРУТИТЬ</button></section><section class="summary py-3" data-v-a02108c1><h3 class="mb-3 text-white" data-v-a02108c1>Доступно CashBack: <span data-summary="user-cash" data-v-a02108c1>0</span> $</h3><p class="mb-0 text-white" data-v-a02108c1>Прошлый результат: <span data-summary="last-game" data-v-a02108c1></span> $</p><p class="mb-0 text-white" data-v-a02108c1>За сегодня попыток: <span data-summary="spins" data-v-a02108c1>0</span> раз</p><p class="mb-0 text-white" data-v-a02108c1>Победы: <span data-summary="wins" data-v-a02108c1>0</span></p><p class="mb-0 text-white" data-v-a02108c1>Проигрыши: <span data-summary="losses" data-v-a02108c1>0</span></p></section>',4),pk=[hk];function _k(s,e,o,n,i,r){return l(),a("div",mk,pk)}const fk=oe(uk,[["render",_k],["__scopeId","data-v-a02108c1"]]),bk=t("div",{class:"card card-style"},[t("div",{class:"content"},[t("p",{class:"mb-2 text-center font-18"},[t("strong",null,"Внимание!"),_(" Правила игры: ")]),t("ul",{style:{padding:"0px 20px"}},[t("li",null,"цена ставки меняется в зависимости от популярности игры (чем популярнее тем выше)"),t("li",null,"ставка берется из вашего CashBack"),t("li",null,"за каждый выигрыш вы получаете игровые деньги, которые суммируются к вашему CashBack и используются для игровой ставки, но не начисляются вам как CashBack"),t("li",null,"каждый проигрыш списывает ваш реальный CashBack"),t("li",null,[_("одна из игровых комбинация может принести вам супер-приз - "),t("strong",null,"Пицца 50 см")])])])],-1),gk={class:"card card-style"},yk={class:"content"},Wa={__name:"OneArmedBanditPage",setup(s){return(e,o)=>(l(),a(v,null,[bk,t("div",gk,[t("div",yk,[T(fk)])])],64))}},vk=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"}));const $k={key:0,class:"d-flex flex-wrap"},kk=["onClick"],wk={class:"font-14"},Fk={props:["size","selected","active"],data(){return{categories:null,categories_paginate_object:null}},computed:{...G(["getCategories","getCategoriesPaginateObject"])},mounted(){this.loadCategories()},methods:{nextCategories(s){this.loadCategories(s)},select(s){return this.$emit("select",s)},inCategory(s){return this.selected.findIndex(o=>o.id===s)>=0},loadCategories(s=0){return this.$store.dispatch("loadCategories",{page:s,size:this.size||5}).then(()=>{this.categories=this.getCategories,this.categories_paginate_object=this.getCategoriesPaginateObject})}}},Ck=Object.assign(Fk,{__name:"CategoryInlineList",setup(s){return(e,o)=>(l(),a(v,null,[e.categories?(l(),a("div",$k,[(l(!0),a(v,null,O(e.categories,n=>(l(),a("a",{href:"javascript:void(0)",onClick:i=>e.select(n),class:C([{"bg-green2-dark":e.inCategory(n.id),"bg-gray2-dark":s.active.indexOf(n.id)===-1&&!e.inCategory(n.id)},"m-0 mb-2 badge mr-2 bg-green2-dark rounded-l font-14 category-badge p-3"])},[_(p(n.title||"Не указано")+" ",1),t("span",wk,p(n.count||0),1)],10,kk))),256))])):u("",!0),e.categories_paginate_object&&e.categories_paginate_object.meta.total>s.size?(l(),M(Ce,{key:1,simple:!0,onPagination_page:e.nextCategories,pagination:e.categories_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64))}});const Pk={class:"d-flex flex-column"},Sk={class:"card card-style"},xk={class:"content"},jk={class:"tab-controls mb-2 tabs-round tab-animated tabs-medium tabs-rounded d-flex justify-content-between"},Ok={class:"row mb-0"},Tk={class:"col-12"},Uk={class:"mb-0 d-flex justify-content-between"},Ik={key:0,class:"mb-2 text-center"},Vk={key:0},Mk={class:"d-flex justify-content-between"},Ak={key:0,class:"fa-solid fa-magnifying-glass"},Ek={key:1,class:"fa-solid fa-chevron-up"},Dk={key:2,class:"font-14"},zk={key:3,class:"font-14"},Bk={class:"d-flex"},Lk=t("i",{class:"fa-solid fa-list"},null,-1),Rk=[Lk],Nk=t("i",{class:"fa-regular fa-address-card"},null,-1),qk=[Nk],Wk={key:1},Yk={class:"input-style input-style-2 has-icon input-required"},Hk=t("p",{class:"mb-0"},"Цена товара",-1),Qk={class:"row mb-0"},Gk={class:"col-6"},Kk={class:"input-style input-style-2 input-required"},Jk={class:"col-6"},Xk={class:"input-style input-style-2 input-required"},Zk=t("i",{class:"fa-solid fa-file-invoice mr-2"},null,-1),ew=t("span",{class:"color-white"},"Найти товар",-1),tw=[Zk,ew],sw={key:2},ow={key:3},iw=t("p",null,"К сожалению, никаких товаров еще нет в магазине:(",-1),nw=[iw],lw=t("h4",null,"Итого",-1),aw=t("p",null," Ниже приведена итоговая цена заказа без учета стоимости доставки. Цена доставки рассчитывается отдельно и зависит от расстояния. ",-1),rw=["onClick"],dw={key:0,class:"col-6 text-left"},cw={class:"font-600"},uw={class:"col-2 d-flex justify-content-between align-items-center"},mw=t("i",{class:"fa-regular fa-square-minus mr-2"},null,-1),hw={class:"font-600 mb-0"},pw=t("i",{class:"fa-regular fa-square-plus ml-2 color-green2-dark"},null,-1),_w={key:1,class:"col-4 text-right"},fw={class:"font-600"},bw=t("sup",null,".00",-1),gw=t("div",{class:"divider mt-4"},null,-1),yw={key:0,class:"row mb-0"},vw=t("div",{class:"col-6 text-left"},[t("h4",null,"Суммарно, ед.")],-1),$w={class:"col-6 text-right"},kw=t("div",{class:"col-6 text-left"},[t("h4",null,"Суммарно, цена")],-1),ww={class:"col-6 text-right"},Fw={key:0},Cw=t("sup",null,".00",-1),Pw={key:1},Sw=t("sup",null,".00",-1),xw={key:0,class:"col-6 text-left"},jw=t("h4",null," Использовать CashBack",-1),Ow=[jw],Tw={key:1,class:"col-6 text-right"},Uw={key:0,class:"custom-control ios-switch ios-switch-icon my-3"},Iw={key:0,class:"custom-control-label",style:{"padding-left":"30px"},for:"toggle-use_cashback"},Vw={key:1,class:"custom-control-label",style:{"padding-left":"30px"},for:"toggle-use_cashback"},Mw=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{left:"8px"}},null,-1),Aw=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{"margin-left":"24px"}},null,-1),Ew={key:2,class:"col-6 text-left"},Dw=t("h4",null,"Доступно для списания",-1),zw=[Dw],Bw={key:3,class:"col-6 text-right"},Lw=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),Rw=t("span",{class:"color-white"},"Очистить корзину",-1),Nw=[Lw,Rw],qw=t("div",{class:"divider mt-4"},null,-1),Ww=t("h4",null,"Оформление заказа",-1),Yw={class:"input-style input-style-2 has-icon"},Hw=t("i",{class:"input-icon fa fa-user"},null,-1),Qw={class:"input-style input-style-2 has-icon"},Gw=t("i",{class:"input-icon fa-solid fa-phone"},null,-1),Kw=t("p",{class:"mb-0 text-left"},"Как хотите получить заказ?",-1),Jw={class:"custom-control ios-switch ios-switch-icon my-3"},Xw={key:0,class:"custom-control-label pl-5",for:"toggle-need-pickup"},Zw={key:1,class:"custom-control-label pl-5",for:"toggle-need-pickup"},e3=t("i",{class:"fa-solid fa-person-walking-luggage font-11 color-white",style:{left:"8px"}},null,-1),t3=t("i",{class:"fa-solid fa-truck font-11 color-white",style:{"margin-left":"24px"}},null,-1),s3={key:1,class:"input-style input-style-2 has-icon"},o3=t("i",{class:"input-icon fa-solid fa-city"},null,-1),i3={key:2,class:"input-style input-style-2 has-icon"},n3=t("i",{class:"input-icon fa-solid fa-road"},null,-1),l3={key:3,class:"input-style input-style-2 has-icon"},a3=t("i",{class:"input-icon fa-solid fa-house-user"},null,-1),r3={key:4,class:"input-style input-style-2 has-icon"},d3=t("i",{class:"input-icon fa-solid fa-door-open"},null,-1),c3={key:5,class:"input-style input-style-2 has-icon"},u3=t("i",{class:"input-icon fa-solid fa-house-flag"},null,-1),m3={key:6,class:"input-style input-style-2 has-icon"},h3=t("i",{class:"input-icon fa-solid fa-layer-group"},null,-1),p3={key:7,class:"input-style input-style-2 has-icon"},_3=t("span",{class:"input-style-1-active input-style-1-inactive"},"Информация для доставщика",-1),f3=t("i",{class:"input-icon fa-solid fa-envelope-open-text"},null,-1),b3=t("p",{class:"mb-0 text-left"},"К какому времени заказ должен быть готов?",-1),g3={class:"custom-control ios-switch ios-switch-icon my-3"},y3={key:0,class:"custom-control-label pl-5",for:"toggle-when-ready"},v3={key:1,class:"custom-control-label pl-5",for:"toggle-when-ready"},$3=t("i",{class:"fa-solid fa-clock font-11 color-white",style:{left:"8px"}},null,-1),k3=t("i",{class:"fa-solid fa-mug-hot font-11 color-white",style:{"margin-left":"24px"}},null,-1),w3={key:8,class:"input-style input-style-2 has-icon"},F3=t("i",{class:"input-icon fa-regular fa-clock"},null,-1),C3={key:9,class:"mb-0 text-left"},P3={key:10,class:"custom-control ios-switch ios-switch-icon my-3"},S3={key:0,class:"custom-control-label pl-5",for:"toggle-has-disability"},x3={key:1,class:"custom-control-label pl-5",for:"toggle-has-disability"},j3=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{left:"8px"}},null,-1),O3=t("i",{class:"fa-solid fa-hand-holding-heart font-11 color-white",style:{"margin-left":"24px"}},null,-1),T3={key:11,class:"list-group list-custom-small"},U3={class:"border-0",href:"javascript:void(0)"},I3=t("i",{class:"fa-solid rounded-sm font-14 fa-head-side-mask shadow-s bg-red1-dark"},null,-1),V3=t("span",null,"Болею",-1),M3={class:"custom-control scale-switch ios-switch"},A3=t("label",{class:"custom-control-label",for:"switch-1"},null,-1),E3=t("i",{class:"fa fa-angle-right"},null,-1),D3={class:"border-0",href:"javascript:void(0)"},z3=t("i",{class:"fa-solid rounded-sm font-14 fa-eye shadow-s bg-red1-dark"},null,-1),B3=t("span",null,"Слабовидящий",-1),L3={class:"custom-control scale-switch ios-switch"},R3=t("label",{class:"custom-control-label",for:"switch-2"},null,-1),N3=t("i",{class:"fa fa-angle-right"},null,-1),q3={class:"border-0",href:"javascript:void(0)"},W3=t("i",{class:"fa-solid rounded-sm font-14 fa-wheelchair shadow-s bg-red1-dark"},null,-1),Y3=t("span",null,"Ограничения мобильности",-1),H3={class:"custom-control scale-switch ios-switch"},Q3=t("label",{class:"custom-control-label",for:"switch-3"},null,-1),G3=t("i",{class:"fa fa-angle-right"},null,-1),K3={class:"border-0",href:"javascript:void(0)"},J3=t("i",{class:"fa-solid rounded-sm font-14 fa-ear-deaf shadow-s bg-red1-dark"},null,-1),X3=t("span",null,"Плохо слышит \\ говорит",-1),Z3={class:"custom-control scale-switch ios-switch"},eF=t("label",{class:"custom-control-label",for:"switch-4"},null,-1),tF=t("i",{class:"fa fa-angle-right"},null,-1),sF={key:12,class:"mb-0 text-left"},oF={key:13,class:"custom-control ios-switch ios-switch-icon my-3"},iF={key:0,class:"custom-control-label pl-5",for:"toggle-payment-cash"},nF={key:1,class:"custom-control-label pl-5",for:"toggle-payment-cash"},lF=t("i",{class:"fa-solid fa-money-bill-1-wave font-11 color-white",style:{left:"8px"}},null,-1),aF=t("i",{class:"fa-solid fa-credit-card font-11 color-white",style:{"margin-left":"24px"}},null,-1),rF={key:14},dF=t("h6",null,"Мы можем подготовить для вас сдачу с:",-1),cF={class:"row row-cols-2 mb-0"},uF={class:"col"},mF=["onClick"],hF=t("p",{class:"mb-2"},[t("em",null,"или введите другую сумму...")],-1),pF={class:"input-style input-style-2 has-icon"},_F=t("i",{class:"input-icon fa-solid fa-door-open"},null,-1),fF=t("p",{class:"mb-0 text-left"},"Число персон",-1),bF={class:"row text-center mr-2 ml-2 mb-3"},gF={class:"col-4 mb-n2"},yF=t("i",{class:"fa-solid fa-minus font-22"},null,-1),vF=[yF],$F={class:"col-4 mb-n2 d-flex justify-content-center align-items-center"},kF={class:"font-22"},wF={class:"col-4 mb-n2"},FF=t("i",{class:"fa-solid fa-plus font-22"},null,-1),CF=[FF],PF=["innerHTML"],SF={key:16},xF=["disabled"],jF={key:0,class:"fa-solid fa-file-invoice mr-2"},OF={key:1,class:"fa-solid fa-hourglass mr-2"},TF={key:2,class:"color-white"},UF={key:3,class:"color-white"},IF={props:["type"],data(){return{tab:0,settings:{can_use_cash:!0,delivery_price_text:null,min_price:0,min_price_for_cashback:0,menu_list_type:0,need_category_by_page:!1},product_type_display:1,spent_time_counter:0,is_requested:!1,isCollapsed:!0,search:null,products:[],paginate:null,categories:[],sending:!1,min_price:null,max_price:null,moneyVariants:[500,1e3,2e3,5e3],deliveryForm:{name:null,phone:null,address:null,city:null,street:null,building:null,flat_number:null,entrance_number:null,floor_number:null,info:null,need_pickup:!1,has_disability:!1,use_cashback:!1,disabilities:[],money:null,cash:!0,persons:1,time:null,when_ready:!0}}},watch:{"deliveryForm.cash":{handler:function(s){this.deliveryForm.cash||(this.deliveryForm.money=null)},deep:!0}},computed:{...G(["getProducts","getProductsPaginateObject","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),getCurrentBot(){return window.currentBot},cashbackLimit(){let s=this.getSelf.cashBack?this.getSelf.cashBack.amount:0,e=this.cartTotalPrice||0,o=this.getCurrentBot.max_cashback_use_percent||0,n=e*(o/100);return Math.min(n,s)},filteredProducts(){return this.search?this.products.filter(s=>s.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.products},tg(){return window.Telegram.WebApp},activeCategories(){let s=[];return this.filteredProducts.forEach(e=>{s.push(e.categories.map(o=>o.id))}),[...new Set(s.map(e=>e[0])),...new Set(s.map(e=>e[1]))]}},mounted(){localStorage.getItem("cashman_self_product_delivery_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_self_product_delivery_counter"))),localStorage.getItem("cashman_self_product_type_display")!=null&&(this.product_type_display=parseInt(localStorage.getItem("cashman_self_product_type_display")||0)),this.deliveryForm.name=localStorage.getItem("cashman_self_product_delivery_form_name")!=null?localStorage.getItem("cashman_self_product_delivery_form_name"):null,this.deliveryForm.phone=localStorage.getItem("cashman_self_product_delivery_form_phone")!=null?localStorage.getItem("cashman_self_product_delivery_form_phone"):null,this.deliveryForm.address=localStorage.getItem("cashman_self_product_delivery_form_address")!=null?localStorage.getItem("cashman_self_product_delivery_form_address"):null,this.deliveryForm.city=localStorage.getItem("cashman_self_product_delivery_form_city")!=null?localStorage.getItem("cashman_self_product_delivery_form_city"):null,this.deliveryForm.street=localStorage.getItem("cashman_self_product_delivery_form_street")!=null?localStorage.getItem("cashman_self_product_delivery_form_street"):null,this.deliveryForm.building=localStorage.getItem("cashman_self_product_delivery_form_building")!=null?localStorage.getItem("cashman_self_product_delivery_form_building"):null,this.deliveryForm.flat_number=localStorage.getItem("cashman_self_product_delivery_form_flat_number")!=null?localStorage.getItem("cashman_self_product_delivery_form_flat_number"):null,this.deliveryForm.entrance_number=localStorage.getItem("cashman_self_product_delivery_form_entrance_number")!=null?localStorage.getItem("cashman_self_product_delivery_form_entrance_number"):null,this.deliveryForm.disabilities=localStorage.getItem("cashman_self_product_delivery_form_entrance_disabilities")!=null?JSON.parse(localStorage.getItem("cashman_self_product_delivery_form_entrance_disabilities")):[],this.deliveryForm.disabilities.length>0&&(this.deliveryForm.has_disability=!0),this.loadProducts(),this.loadShopModuleData(),this.cartProducts.length>0&&this.loadActualProducts(),window.addEventListener("scroll-to-basket",s=>{this.tab=2,document.querySelector("#basket").scrollIntoView({behavior:"smooth"})})},methods:{doSwipeLeft(){let s=this.cartProducts.length>0?2:1;this.tab===0?this.tab=s:this.tab--},doSwipeRight(){let s=this.cartProducts.length>0?2:1;this.tab===s?this.tab=0:this.tab++},decPersons(){this.deliveryForm.persons=this.deliveryForm.persons>1?this.deliveryForm.persons-1:this.deliveryForm.persons},incPersons(){this.deliveryForm.persons=this.deliveryForm.persons<100?this.deliveryForm.persons+1:this.deliveryForm.persons},selectProductTypeDisplay(s){this.product_type_display=s,localStorage.setItem("cashman_self_product_type_display",this.product_type_display)},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_self_product_delivery_counter",this.spent_time_counter)},1e3)},clearCart(){this.tab=1,this.$store.dispatch("clearCart").then(()=>{this.$botNotification.success("Корзина","Корзина успешно очищена")})},resetCategories(){this.categories=[],this.loadProducts(0)},selectCategory(s){if(this.settings.need_category_by_page)this.categories=[s];else{let e=this.categories.findIndex(o=>o.id===s.id);e!==-1?this.categories.splice(e,1):this.categories.push(s)}this.settings.need_category_by_page&&(this.tab=1),this.loadProducts(0)},nextProducts(s){this.loadProducts(s)},loadShopModuleData(){return this.$store.dispatch("loadShopModuleData").then(s=>{this.$nextTick(()=>{s&&Object.keys(s).forEach(e=>{e&&(this.settings[e]=s[e])})})})},loadProducts(s=0){return this.$store.dispatch("loadProducts",{dataObject:{search:this.search,categories:this.categories.length>0?this.categories.map(e=>e.id):null,min_price:this.min_price||null,max_price:this.max_price||null},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject,es.handler()})},startCheckout(){if(this.is_requested){this.$botNotification.warning("Упс!",`Сделать повторный заказ можно через <strong>${this.spent_time_counter} сек.</strong>`);return}localStorage.setItem("cashman_self_product_delivery_form_name",this.deliveryForm.name||""),localStorage.setItem("cashman_self_product_delivery_form_phone",this.deliveryForm.phone||""),localStorage.setItem("cashman_self_product_delivery_form_address",this.deliveryForm.address||""),localStorage.setItem("cashman_self_product_delivery_form_city",this.deliveryForm.city||""),localStorage.setItem("cashman_self_product_delivery_form_street",this.deliveryForm.street||""),localStorage.setItem("cashman_self_product_delivery_form_building",this.deliveryForm.building||""),localStorage.setItem("cashman_self_product_delivery_form_flat_number",this.deliveryForm.flat_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_number",this.deliveryForm.entrance_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_disabilities",JSON.stringify(this.deliveryForm.disabilities||[]));let s=new FormData;this.sending=!0,Object.keys(this.deliveryForm).forEach(e=>{const o=this.deliveryForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.type&&s.append("type",this.type),this.$store.dispatch("startCheckout",{deliveryForm:s}).then(e=>{this.deliveryForm={message:null,name:null,phone:null},this.$botNotification.success("Доставка","Дальнейшая инструкция отправлена вам в бот!"),this.tab=1,this.$store.dispatch("clearCart"),this.tg.close(),this.sending=!1}).catch(e=>{this.sending=!1}),this.startTimer(),this.is_requested=!0},loadActualProducts(){this.$store.dispatch("loadActualPriceInCart")},removeCategory(s){this.categories.splice(s,1)},addToCart(s){this.$cart.add(s.product)}}},VF=Object.assign(IF,{__name:"SelfProductDelivery",setup(s){return(e,o)=>{var r,d,c,h,g,w,x;const n=ie("mask"),i=ie("touch");return f((l(),a("div",Pk,[t("div",Sk,[t("div",xk,[t("div",jk,[t("a",{href:"javascript:void(0)",class:C(["w-100",{"bg-blue2-dark color-white no-click":e.tab===0}]),onClick:o[0]||(o[0]=P=>e.tab=0)},"Категории",2),t("a",{href:"javascript:void(0)",class:C(["w-100",{"bg-blue2-dark color-white no-click":e.tab===1}]),onClick:o[1]||(o[1]=P=>e.tab=1)},"Товары",2),e.cartProducts.length>0?(l(),a("a",{key:0,class:C([{"bg-blue2-dark color-white no-click":e.tab===2},"w-100"]),onClick:o[2]||(o[2]=P=>e.tab=2),href:"javascript:void(0)"},"Корзина",2)):u("",!0)]),f(t("div",Ok,[t("div",Tk,[t("p",Uk,[_("Категории товара "),e.categories.length>0?(l(),a("a",{key:0,onClick:o[3]||(o[3]=P=>e.resetCategories()),href:"javascript:void(0)"},"Сбросить")):u("",!0)]),e.paginate?(l(),a("p",Ik,[t("small",null,"Всего товаров найдено ("+p(e.paginate.meta.total)+")",1)])):u("",!0),T(Ck,{"single-mode":!0,active:e.activeCategories,selected:e.categories,onSelect:e.selectCategory},null,8,["active","selected","onSelect"])])],512),[[tt,e.tab===0]]),f(t("div",null,[e.paginate?(l(),a("div",Vk,[t("div",Mk,[t("a",{href:"javascript:void(0)",style:{"border-radius":"10px !important"},onClick:o[4]||(o[4]=P=>e.isCollapsed=!e.isCollapsed),class:"btn btn-border btn-m bg-red2-dark btn-full mb-3 text-uppercase font-900 color-blue2-dark mr-2"},[e.isCollapsed?(l(),a("i",Ak)):(l(),a("i",Ek)),e.isCollapsed?(l(),a("span",Dk)):(l(),a("span",zk))]),t("div",Bk,[t("a",{href:"javascript:void(0)",style:{"border-radius":"10px !important"},onClick:o[5]||(o[5]=P=>e.selectProductTypeDisplay(0)),class:C([{"bg-blue2-dark":e.product_type_display==0},"btn btn-border btn-m btn-full mb-3 text-uppercase font-900 color-blue2-dark mr-2"])},Rk,2),t("a",{href:"javascript:void(0)",style:{"border-radius":"10px !important"},onClick:o[6]||(o[6]=P=>e.selectProductTypeDisplay(1)),class:C([{"bg-blue2-dark":e.product_type_display==1},"btn btn-border btn-m btn-full mb-3 text-uppercase font-900 color-blue2-dark"])},qk,2)])])])):u("",!0),e.isCollapsed?u("",!0):(l(),a("div",Wk,[t("div",Yk,[t("i",{class:"input-icon fa-solid fa-magnifying-glass",onClick:o[7]||(o[7]=P=>e.loadProducts(0))}),f(t("input",{class:"form-control","onUpdate:modelValue":o[8]||(o[8]=P=>e.search=P),type:"search",placeholder:"Название товара"},null,512),[[k,e.search]])]),Hk,t("div",Qk,[t("div",Gk,[t("div",Kk,[f(t("input",{"onUpdate:modelValue":o[9]||(o[9]=P=>e.min_price=P),class:"form-control",type:"number",min:"0",placeholder:"От, руб"},null,512),[[k,e.min_price]])])]),t("div",Jk,[t("div",Xk,[f(t("input",{class:"form-control",min:"0","onUpdate:modelValue":o[10]||(o[10]=P=>e.max_price=P),type:"number",placeholder:"До, руб"},null,512),[[k,e.max_price]])])])]),t("button",{onClick:o[11]||(o[11]=P=>e.loadProducts(0)),class:"btn btn-full btn-sm rounded-s bg-highlight font-800 text-uppercase w-100 mb-2"},tw)])),e.products.length>0?(l(),a("div",sw,[(l(!0),a(v,null,O(e.filteredProducts,(P,I)=>(l(),M(So,{"display-type":e.product_type_display,item:P},null,8,["display-type","item"]))),256)),e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])):(l(),a("div",ow,nw))],512),[[tt,e.tab===1]]),f(t("div",null,[e.cartProducts.length>0?(l(),a("form",{key:0,id:"basket",onSubmit:o[35]||(o[35]=W((...P)=>e.startCheckout&&e.startCheckout(...P),["prevent"]))},[(l(!0),a(v,null,O(e.cartProducts,(P,I)=>(l(),M(So,{item:P.product},null,8,["item"]))),256)),lw,aw,(l(!0),a(v,null,O(e.cartProducts,(P,I)=>(l(),a("div",{class:"row mb-0",onClick:V=>e.addToCart(P)},[P.product?(l(),a("div",dw,[t("h6",cw,p(P.product.title||"Не указано"),1)])):u("",!0),t("div",uw,[mw,t("h6",hw,"x"+p(P.quantity||1),1),pw]),P.product?(l(),a("div",_w,[t("h6",fw,[_(p(P.product.current_price||0)+" ",1),bw,_("₽")])])):u("",!0)],8,rw))),256)),gw,e.getSelf?(l(),a("div",yw,[vw,t("div",$w,[t("h4",null,p(e.cartTotalCount)+" шт.",1)]),kw,t("div",ww,[(r=e.deliveryForm)!=null&&r.use_cashback?u("",!0):(l(),a("h4",Fw,[_(p(e.cartTotalPrice),1),Cw,_("₽")])),(d=e.deliveryForm)!=null&&d.use_cashback?(l(),a("h4",Pw,[_(p(e.cartTotalPrice-e.cashbackLimit),1),Sw,_("₽ ")])):u("",!0)]),e.getSelf.cashBack&&e.settings.min_price_for_cashback<e.cartTotalPrice?(l(),a("div",xw,Ow)):u("",!0),e.getSelf.cashBack&&e.settings.min_price_for_cashback<e.cartTotalPrice?(l(),a("div",Tw,[e.deliveryForm.need_pickup?u("",!0):(l(),a("div",Uw,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[12]||(o[12]=P=>e.deliveryForm.use_cashback=P),class:"ios-input",id:"toggle-use_cashback"},null,512),[[z,e.deliveryForm.use_cashback]]),(c=e.deliveryForm)!=null&&c.use_cashback?(l(),a("label",Iw)):u("",!0),(h=e.deliveryForm)!=null&&h.use_cashback?u("",!0):(l(),a("label",Vw)),Mw,Aw]))])):u("",!0),(g=e.deliveryForm)!=null&&g.use_cashback?(l(),a("div",Ew,zw)):u("",!0),(w=e.deliveryForm)!=null&&w.use_cashback?(l(),a("div",Bw,[t("h4",null,p(e.cashbackLimit)+"₽",1)])):u("",!0)])):u("",!0),t("button",{onClick:o[13]||(o[13]=(...P)=>e.clearCart&&e.clearCart(...P)),class:"btn btn-full btn-sm rounded-l bg-red1-dark font-800 text-uppercase w-100"},Nw),qw,Ww,t("div",Yw,[Hw,f(t("input",{class:"form-control","onUpdate:modelValue":o[14]||(o[14]=P=>e.deliveryForm.name=P),type:"text",placeholder:"Иванов Иван Иванович",required:""},null,512),[[k,e.deliveryForm.name]])]),t("div",Qw,[Gw,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[15]||(o[15]=P=>e.deliveryForm.phone=P),placeholder:"+7(000)000-00-00",required:""},null,512),[[n,"+7(###)###-##-##"],[k,e.deliveryForm.phone]])]),Kw,t("div",Jw,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=P=>e.deliveryForm.need_pickup=P),class:"ios-input",id:"toggle-need-pickup"},null,512),[[z,e.deliveryForm.need_pickup]]),e.deliveryForm.need_pickup?u("",!0):(l(),a("label",Xw,"Доставка")),e.deliveryForm.need_pickup?(l(),a("label",Zw,"Самовывоз")):u("",!0),e3,t3]),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",s3,[o3,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[17]||(o[17]=P=>e.deliveryForm.city=P),placeholder:"Ваш город",required:""},null,512),[[k,e.deliveryForm.city]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",i3,[n3,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[18]||(o[18]=P=>e.deliveryForm.street=P),placeholder:"Улица",required:""},null,512),[[k,e.deliveryForm.street]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",l3,[a3,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[19]||(o[19]=P=>e.deliveryForm.building=P),placeholder:"Номер дома",required:""},null,512),[[k,e.deliveryForm.building]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",r3,[d3,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[20]||(o[20]=P=>e.deliveryForm.flat_number=P),placeholder:"Номер квартиры"},null,512),[[k,e.deliveryForm.flat_number]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",c3,[u3,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[21]||(o[21]=P=>e.deliveryForm.entrance_number=P),placeholder:"Номер подъезда"},null,512),[[k,e.deliveryForm.entrance_number]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",m3,[h3,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[22]||(o[22]=P=>e.deliveryForm.floor_number=P),placeholder:"Номер этажа"},null,512),[[k,e.deliveryForm.floor_number]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",p3,[_3,f3,f(t("textarea",{class:"form-control",style:{height:"200px","line-height":"150%",padding:"35px"},"onUpdate:modelValue":o[23]||(o[23]=P=>e.deliveryForm.info=P),type:"text",placeholder:""},null,512),[[k,e.deliveryForm.info]])])),b3,t("div",g3,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[24]||(o[24]=P=>e.deliveryForm.when_ready=P),class:"ios-input",id:"toggle-when-ready"},null,512),[[z,e.deliveryForm.when_ready]]),e.deliveryForm.when_ready?u("",!0):(l(),a("label",y3,"Ко времени")),e.deliveryForm.when_ready?(l(),a("label",v3,"По готовности")):u("",!0),$3,k3]),e.deliveryForm.when_ready?u("",!0):(l(),a("div",w3,[F3,f(t("input",{class:"form-control",type:"datetime-local","onUpdate:modelValue":o[25]||(o[25]=P=>e.deliveryForm.time=P),placeholder:"Время доставки"},null,512),[[k,e.deliveryForm.time]])])),e.deliveryForm.need_pickup?u("",!0):(l(),a("p",C3,"Ограничения по здоровью")),e.deliveryForm.need_pickup?u("",!0):(l(),a("div",P3,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[26]||(o[26]=P=>e.deliveryForm.has_disability=P),class:"ios-input",id:"toggle-has-disability"},null,512),[[z,e.deliveryForm.has_disability]]),e.deliveryForm.has_disability?(l(),a("label",S3,"Есть")):u("",!0),e.deliveryForm.has_disability?u("",!0):(l(),a("label",x3,"Нет")),j3,O3])),e.deliveryForm.has_disability?(l(),a("div",T3,[t("a",U3,[I3,V3,t("div",M3,[f(t("input",{type:"checkbox",value:"болею","onUpdate:modelValue":o[27]||(o[27]=P=>e.deliveryForm.disabilities=P),class:"ios-input",id:"switch-1"},null,512),[[z,e.deliveryForm.disabilities]]),A3]),E3]),t("a",D3,[z3,B3,t("div",L3,[f(t("input",{type:"checkbox",value:"слабовидящий","onUpdate:modelValue":o[28]||(o[28]=P=>e.deliveryForm.disabilities=P),class:"ios-input",id:"switch-2"},null,512),[[z,e.deliveryForm.disabilities]]),R3]),N3]),t("a",q3,[W3,Y3,t("div",H3,[f(t("input",{type:"checkbox",value:"ограничения мобильности","onUpdate:modelValue":o[29]||(o[29]=P=>e.deliveryForm.disabilities=P),class:"ios-input",id:"switch-3"},null,512),[[z,e.deliveryForm.disabilities]]),Q3]),G3]),t("a",K3,[J3,X3,t("div",Z3,[f(t("input",{type:"checkbox",value:"проблемы со слухом \\ голосом","onUpdate:modelValue":o[30]||(o[30]=P=>e.deliveryForm.disabilities=P),class:"ios-input",id:"switch-4"},null,512),[[z,e.deliveryForm.disabilities]]),eF]),tF])])):u("",!0),e.settings.can_use_cash?(l(),a("p",sF,"Способы оплаты")):u("",!0),e.settings.can_use_cash?(l(),a("div",oF,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[31]||(o[31]=P=>e.deliveryForm.cash=P),class:"ios-input",id:"toggle-payment-cash"},null,512),[[z,e.deliveryForm.cash]]),e.deliveryForm.cash?u("",!0):(l(),a("label",iF,"Переводом")),e.deliveryForm.cash?(l(),a("label",nF,"Наличные")):u("",!0),lF,aF])):u("",!0),e.deliveryForm.cash&&e.settings.can_use_cash?(l(),a("div",rF,[dF,t("div",cF,[(l(!0),a(v,null,O(e.moneyVariants,P=>(l(),a("div",uF,[t("button",{class:C(["btn btn-outline-success w-100 mb-2 rounded-xl",{"btn-success text-white":e.deliveryForm.money===P}]),type:"button",onClick:I=>e.deliveryForm.money=P},p(P)+"₽ ",11,mF)]))),256))]),hF,t("div",pF,[_F,f(t("input",{class:"form-control",type:"number",min:"0","onUpdate:modelValue":o[32]||(o[32]=P=>e.deliveryForm.money=P),placeholder:"С какой суммы нужна сдача"},null,512),[[k,e.deliveryForm.money]])])])):u("",!0),fF,t("div",bF,[t("div",gF,[t("button",{onClick:o[33]||(o[33]=(...P)=>e.decPersons&&e.decPersons(...P)),type:"button",class:"btn p-2 w-100 bg-green1-dark rounded-l m-0"},vF)]),t("div",$F,[t("strong",kF,p(e.deliveryForm.persons),1)]),t("div",wF,[t("button",{type:"button",onClick:o[34]||(o[34]=(...P)=>e.incPersons&&e.incPersons(...P)),class:"btn p-2 w-100 bg-green2-dark rounded-l m-0"},CF)])]),e.settings.delivery_price_text?(l(),a("p",{key:15,innerHTML:e.settings.delivery_price_text},null,8,PF)):u("",!0),e.settings.min_price?(l(),a("p",SF,"Минимальная цена заказа "+p(e.settings.min_price||0)+" руб",1)):u("",!0),t("button",{type:"submit",disabled:e.spent_time_counter>0||((x=e.deliveryForm)!=null&&x.use_cashback?e.settings.min_price>e.cartTotalPrice-e.cashbackLimit:e.settings.min_price>e.cartTotalPrice),class:"btn btn-full btn-sm rounded-l bg-highlight font-800 text-uppercase w-100 mb-2"},[e.spent_time_counter<=0?(l(),a("i",jF)):(l(),a("i",OF)),e.spent_time_counter<=0?(l(),a("span",TF,"Оформить")):(l(),a("span",UF,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,xF)],32)):u("",!0)],512),[[tt,e.tab===2]])])])])),[[i,e.doSwipeLeft,"swipe",{left:!0}],[i,e.doSwipeRight,"swipe",{right:!0}]])}}}),MF={},Ya=Object.assign(MF,{__name:"Main",setup(s){return(e,o)=>(l(),M(VF))}}),AF=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"}));const EF={class:"card card-style"},DF={class:"content"},zF=t("p",{class:"text-center font-weight-bold mb-0"},"Приветствуем!",-1),BF=t("p",{class:"text-center font-italic"}," У вас есть промокод? Отлично! Активируйте его прямо сейчас и наслаждайтесь эксклюзивными преимуществами! ",-1),LF={class:"input-style input-style-2 has-icon"},RF=t("i",{class:"input-icon fa-solid fa-terminal"},null,-1),NF=["disabled"],qF={key:0,class:"color-white"},WF={key:1,class:"color-white"},YF={name:"App",data(){return{spent_time_counter:0,is_requested:!1,promocodeForm:{code:null}}},mounted(){localStorage.getItem("cashman_promocode_activate_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_promocode_activate_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_promocode_activate_counter",this.spent_time_counter)},1e3)},submit(){this.startTimer(),this.$store.dispatch("activatePromocode",{promocodeForm:this.promocodeForm}).then(s=>{this.$notify({title:"Промокод",text:"Промокод успешно активирован!",type:"success"}),this.promocodeForm.code=null}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка активации промокода!",type:"error"})})}}},Ha=Object.assign(YF,{setup(s){return(e,o)=>(l(),a("div",EF,[t("div",DF,[zF,BF,t("form",{onSubmit:o[1]||(o[1]=W((...n)=>e.submit&&e.submit(...n),["prevent"]))},[t("div",LF,[RF,f(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.promocodeForm.code=n),placeholder:"Ваш промокод",required:""},null,512),[[k,e.promocodeForm.code]])]),t("button",{type:"submit",disabled:e.spent_time_counter>0,class:"btn btn-full btn-sm rounded-l bg-highlight font-800 text-uppercase w-100 mb-2"},[e.spent_time_counter<=0?(l(),a("span",qF,"Активировать промокод")):(l(),a("span",WF,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,NF)],32)])]))}}),HF=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"}));const QF={class:"card card-style"},GF={class:"content d-flex justify-content-center flex-wrap"},KF={class:"img-avatar"},JF=["innerHTML"],XF={key:0,class:"content"},ZF={class:"text-center mb-2"},e5={class:"text-center mb-2"},t5={class:"mb-2 text-primary-emphasis"},s5={class:"progress w-100",style:{height:"40px","border-radius":"25px"},role:"progressbar","aria-label":"Basic example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},o5=t("p",{class:"my-2"},"Когда полоска вашего прогресса достигнет 100% вы сможете получить свои бонусы!",-1),i5={class:"content"},n5={key:1},l5={key:2},a5=["disabled"],r5={name:"App",data(){return{action:null,settings:{image:null,rules:null},friendsForm:{friends_invite:0,current_friends:0,needed_friends:0,friends_on_start:0,start_at:null,complete_at:null}}},computed:{currentBot(){return window.currentBot},progress(){let s=this.friendsForm.needed_friends||0,e=this.friendsForm.current_friends||0,o=this.friendsForm.friends_on_start||0;return(e-o)/(s-o)*100}},mounted(){this.prepareUserData()},methods:{start(){this.$store.dispatch("friendsGameStart").then(s=>{this.prepareUserData(),this.$botNotification.success("Отлично!","Игра началась! Поехали приглашать друзей")}).catch(()=>{this.$botNotification.warning("Упс...!","Игра почему-то не началась...")})},complete(){this.$store.dispatch("friendsGameFinish").then(s=>{this.prepareUserData(),this.$botNotification.success("Отлично!","Спасибо за участие в задании, скоро вы получите свои бонусы!")}).catch(()=>{this.$botNotification.warning("Упс...!","Мы не можем закончить это задание...")})},lose(){this.$botNotification.warning("Упс!","Вы израсходовали все попытки!")},prepareUserData(){return this.$store.dispatch("friendsGamePrepare").then(s=>{this.action=s.action,this.settings.rules=s.rules||null,this.settings.image=s.image||null,this.action.data&&(this.friendsForm.current_friends=this.action.data.current_friends||0,this.friendsForm.needed_friends=this.action.data.needed_friends||0,this.friendsForm.friends_invite=this.action.data.friends_invite||0,this.friendsForm.friends_on_start=this.action.data.friends_on_start||0,this.friendsForm.start_at=this.action.data.start_at||null,this.friendsForm.complete_at=this.action.data.complete_at||null)})}}},Qa=Object.assign(r5,{setup(s){return(e,o)=>{const n=ie("lazy");return l(),a("div",QF,[t("div",GF,[t("div",KF,[f(t("img",null,null,512),[[n,"/images-by-bot-id/"+e.currentBot.id+"/"+e.currentBot.image]])]),t("p",null,[_(" Перед началом квеста нажмите кнопку «Начать». Затем перейдите в главное меню Бота и нажмите кнопку «Пригласить Друзей/Подруг». Там вы найдете свою реферальную ссылку, которую легко можно отправить тем, кого хотели бы пригласить в наш Бот. Для выполнения квеста нужно пригласить "),t("strong",null,p((e.friendsForm.needed_friends||0)-(e.friendsForm.friends_on_start||0)),1),_(" друзей/подруг , которые активируют нашего бота по вашей реферальной ссылке. ")]),e.settings.rules?(l(),a("p",{key:0,innerHTML:e.settings.rules},null,8,JF)):u("",!0)]),e.friendsForm.start_at!=null?(l(),a("div",XF,[t("p",ZF,[_("У вас сейчас "),t("strong",null,p(e.friendsForm.friends_invite||0),1),_(" / "),t("strong",null,p((e.friendsForm.needed_friends||0)-(e.friendsForm.friends_on_start||0)),1),_(" друзей")]),t("p",e5,[_("По заданию приглашено "),t("strong",null,p(e.friendsForm.friends_invite||0),1),_(" друзей")]),t("p",t5,[_("Текущий прогресс "),t("strong",null,p(e.progress)+"%",1)]),t("div",s5,[t("div",{class:"progress-bar bg-success progress-bar-striped",style:dt({width:e.progress+"%"})},p(e.progress.toFixed(2))+"% ",5)]),o5])):u("",!0),t("div",i5,[e.friendsForm.complete_at==null&&e.friendsForm.start_at==null?(l(),a("button",{key:0,type:"button",class:"btn btn-m btn-full my-3 rounded-xl text-uppercase font-900 shadow-s bg-green2-dark w-100",onClick:o[0]||(o[0]=(...i)=>e.start&&e.start(...i))},"Приступить к заданию")):u("",!0),e.friendsForm.start_at!=null?(l(),a("p",n5,[_("Задание начато "),t("strong",null,p(e.friendsForm.start_at),1)])):u("",!0),e.friendsForm.complete_at!=null?(l(),a("p",l5,[_("Задание завершено "),t("strong",null,p(e.friendsForm.complete_at),1)])):u("",!0),e.friendsForm.start_at!=null?(l(),a("button",{key:3,type:"button",onClick:o[1]||(o[1]=(...i)=>e.complete&&e.complete(...i)),disabled:e.progress<100||e.friendsForm.complete_at!=null||e.friendsForm.start_at==null,class:"btn btn-m btn-full my-3 rounded-xl text-uppercase font-900 shadow-s bg-green2-dark w-100"},"Получить награды",8,a5)):u("",!0),T(st)])])}}}),d5=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"}));const c5={data(){return{timer:null,message:"",roll_coating:77,summary_count:0,summary_weight:0,summary_price:0,price:0,weight:0,fillings:[]}},watch:{roll_coating:function(s,e){e&&this.removeItem(e),s&&this.addItem(s)},summary_count:function(s){this.summary_price=this.price*this.summary_count,this.summary_weight=this.weight*this.summary_count},fillings:function(s){},products:function(s,e){return s}},computed:{...G(["getIngredientsFilling","getIngredientsCategory","getAllFillings"]),products(){return this.$store.getters.cartProducts}},mounted(){},methods:{addToCart(){},clearCalc(){},decrementSummary(){},incrementSummary(){},hasManyItems(s){return this.getAllFillings.filter(e=>e===s).length},removeItem(s){},addItem(s){},getCategory(s){return this.getIngredientsCategory(s)},getFilling(s){return this.getIngredientsFilling(s)},sendMessage(s){}}},u5={class:"card card-style"},m5={class:"content"},h5=t("h1",{class:"text-center mt-4 mb-4"},"Собираем вкусный ролл",-1),p5=t("h2",{class:"text-center"},[t("mark",null,"Выбираем покрытие ролла")],-1),_5={class:"my-4"},f5={class:"container-wrapper"},b5={class:"container"},g5={class:"badge badge-weight"},y5={class:"badge"},v5=["disabled","value"],$5=["disabled","value"],k5=t("span",{class:"checkmark"},null,-1),w5={class:"my-4"},F5={class:"container-wrapper"},C5={class:"w-100 font-14"},P5={class:"badge badge-weight"},S5={class:"badge"},x5=["disabled","value"],j5=["disabled","value"],O5=t("span",{class:"checkmark"},null,-1),T5=t("h2",{class:"text-center"},[t("mark",null,"А теперь выбираем начинку ролла...")],-1),U5={class:"row mt-4"},I5={class:"col-12 col-sm-12 col-md-6"},V5={class:"container-wrapper"},M5={class:"container"},A5={class:"badge badge-weight"},E5={class:"badge"},D5=["disabled","value"],z5=["value","disabled"],B5=t("span",{class:"checkmark"},null,-1),L5={key:0},R5={key:0,class:"counter-wrapper"},N5={class:"counter"},q5=["onClick"],W5=["onClick"],Y5=t("hr",null,null,-1),H5={class:"text-center mb-4"},Q5={class:"row d-flex justify-content-center result"},G5={class:"col-12 col-sm-12 col-md-6 col-lg-4"},K5=t("h3",{class:"text-center"},"Сколько таких роллов сделать?",-1),J5={class:"summary"},X5=t("i",{class:"fa-solid fa-minus font-16 p-3"},null,-1),Z5=[X5],eC=t("i",{class:"fa-solid fa-plus font-16 p-3"},null,-1),tC=[eC],sC=t("hr",null,null,-1),oC={class:"d-flex justify-content-center"},iC={key:0,class:"text-center mt-4"},nC={class:"text-white"},lC={class:"d-flex justify-content-center flex-wrap mt-4"},aC={class:"col-12 col-sm-6 col-md-6 d-flex justify-content-center"},rC=["disabled"],dC={class:"col-12 col-sm-6 col-md-6 d-flex justify-content-center"};function cC(s,e,o,n,i,r){return l(),a("div",u5,[t("div",m5,[h5,p5,t("div",_5,[(l(!0),a(v,null,O(r.getFilling(11),d=>(l(),a("div",f5,[t("label",b5,[_(p(d.title),1),t("span",g5,p(d.weight)+" гр.",1),t("span",y5,p(d.price|s.currency),1),d.checked?f((l(),a("input",{key:0,checked:"checked",type:"checkbox",disabled:d.disabled||r.hasManyItems(d.id)>1,"onUpdate:modelValue":e[0]||(e[0]=c=>i.fillings=c),value:d.id},null,8,v5)),[[z,i.fillings]]):f((l(),a("input",{key:1,type:"checkbox",disabled:d.disabled||r.hasManyItems(d.id)>1,"onUpdate:modelValue":e[1]||(e[1]=c=>s.pizza_base=c),value:d.id},null,8,$5)),[[z,s.pizza_base]]),k5])]))),256))]),t("div",w5,[(l(!0),a(v,null,O(r.getFilling(9),d=>(l(),a("div",null,[t("div",F5,[t("label",C5,[_(p(d.title),1),t("span",P5,p(d.weight)+" гр.",1),t("span",S5,p(d.price|s.currency),1),d.checked?f((l(),a("input",{key:0,checked:"checked",type:"radio",name:"roll_coating",disabled:d.disabled||r.hasManyItems(d.id)>1,"onUpdate:modelValue":e[2]||(e[2]=c=>i.roll_coating=c),value:d.id},null,8,x5)),[[ct,i.roll_coating]]):f((l(),a("input",{key:1,type:"radio",name:"roll_coating",disabled:d.disabled||r.hasManyItems(d.id)>1,"onUpdate:modelValue":e[3]||(e[3]=c=>i.roll_coating=c),value:d.id},null,8,j5)),[[ct,i.roll_coating]]),O5])])]))),256))]),T5,t("div",U5,[(l(!0),a(v,null,O(r.getFilling(10),d=>(l(),a("div",I5,[t("div",V5,[t("label",M5,[_(p(d.title),1),t("span",A5,p(d.weight)+" гр.",1),t("span",E5,p(d.price|s.currency),1),d.checked?f((l(),a("input",{key:0,checked:"checked",type:"checkbox",name:"filling",disabled:d.disabled||r.hasManyItems(d.id)>1||i.fillings.length>=6&&i.fillings.indexOf(d.id)===-1,"onUpdate:modelValue":e[4]||(e[4]=c=>i.fillings=c),value:d.id},null,8,D5)),[[z,i.fillings]]):f((l(),a("input",{key:1,type:"checkbox",name:"filling",value:d.id,disabled:d.disabled||r.hasManyItems(d.id)>1||i.fillings.length>=6&&i.fillings.indexOf(d.id)===-1,"onUpdate:modelValue":e[5]||(e[5]=c=>i.fillings=c)},null,8,z5)),[[z,i.fillings]]),B5]),d.disabled?u("",!0):(l(),a("div",L5,[r.hasManyItems(d.id)>0?(l(),a("div",R5,[t("div",N5,[t("button",{class:"btn btn-counter",onClick:c=>r.removeItem(d.id)},"-",8,q5),t("p",null,p(r.hasManyItems(d.id)),1),t("button",{class:"btn btn-counter",onClick:c=>r.addItem(d.id)},"+",8,W5)])])):u("",!0)]))])]))),256))]),Y5,t("p",H5,[t("em",null,[t("strong",null,[_("Цена указана за 1 порцию роллов (вы заказали "),t("mark",null,p(i.summary_count),1),_(" порций). Порция включает в себя 8 штук роллов общей массой "),t("mark",null,p(i.weight),1),_(" грамм.")])])]),t("div",Q5,[t("div",G5,[K5,t("div",J5,[t("button",{class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red2-dark",onClick:e[6]||(e[6]=(...d)=>r.decrementSummary&&r.decrementSummary(...d))},Z5),t("p",null,p(i.summary_count),1),t("button",{class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark",onClick:e[7]||(e[7]=(...d)=>r.incrementSummary&&r.incrementSummary(...d))},tC)]),sC,t("div",oC,[t("ul",null,[t("li",null,[_("Вес: "),t("strong",null,p(i.summary_weight)+" грамм",1)]),t("li",null,[_("Цена: "),t("strong",null,p(i.summary_price)+" руб",1)])])]),i.message.length>0?(l(),a("p",iC,[t("mark",nC,p(i.message),1)])):u("",!0),t("div",lC,[t("div",aC,[t("button",{class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100",disabled:i.summary_count===0,onClick:e[8]||(e[8]=(...d)=>r.addToCart&&r.addToCart(...d))}," В корзину ",8,rC)]),t("div",dC,[t("button",{class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100",onClick:e[9]||(e[9]=(...d)=>r.clearCalc&&r.clearCalc(...d))}," Очистить ")])])])])])])}const uC=oe(c5,[["render",cC]]),Ga={__name:"FoodConstructors",setup(s){return(e,o)=>(l(),M(uC))}},mC=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"}));var Qi=Yn({name:"Roulette",emits:["wheelStart","wheelEnd"],props:{items:{type:Object,required:!0,validator:function(e){return e.length>=4}},firstItemIndex:{type:Object,required:!1,default:function(){return{value:0}}},wheelResultIndex:{type:Object,required:!1,default:function(){return{value:null}},validator:function(e){return typeof e.value=="number"}},centeredIndicator:{type:Boolean,required:!1,default:!1},indicatorPosition:{type:String,required:!1,default:"top",validator:function(e){return["top","right","bottom","left"].includes(e)}},size:{type:Number,required:!1,default:300},displayShadow:{type:Boolean,required:!1,default:!1},duration:{type:Number,required:!1,default:4},resultVariation:{type:Number,required:!1,default:0,validator:function(e){return e>=0&&e<=100}},easing:{type:String,required:!1,default:"ease",validator:function(e){return["ease","bounce"].includes(e)}},counterClockwise:{type:Boolean,required:!1,default:!1},horizontalContent:{type:Boolean,required:!1,default:!1},displayBorder:{type:Boolean,required:!1,default:!1},displayIndicator:{type:Boolean,required:!1,default:!0},baseDisplay:{type:Boolean,required:!1,default:!1},baseSize:{type:Number,required:!1,default:100},baseDisplayShadow:{type:Boolean,required:!1,default:!1},baseDisplayIndicator:{type:Boolean,required:!1,default:!1},baseBackground:{type:String,required:!1,default:""}},data:function(){return{randomIdRoulette:0,itemSelected:null,processingLock:!1}},computed:{itemAngle:function(){return 360/this.items.length},startingAngle:function(){return this.centeredIndicator?-1*this.firstItemIndex.value*this.itemAngle-this.itemAngle/2:-1*this.firstItemIndex.value*this.itemAngle},degreesVariation:function(){if(!this.resultVariation)return 0;var e=this.itemAngle/2*this.resultVariation/100*-1,o=this.itemAngle/2*this.resultVariation/100;return Number((Math.random()*(o-e)+e).toFixed(2))},counterClockWiseOperator:function(){return this.counterClockwise?-1:1}},mounted:function(){var e=this;this.randomIdRoulette=Number((Math.random()*(999999-1)+1).toFixed(0)),this.$nextTick(function(){e.reset(),document.querySelector("#wheel-container-".concat(e.randomIdRoulette," .wheel")).addEventListener("transitionend",function(){e.processingLock=!1,e.$emit("wheel-end",e.itemSelected)})})},methods:{reset:function(){this.itemSelected=null,document.querySelector("#wheel-container-".concat(this.randomIdRoulette," .wheel")).style.transform="rotate(".concat(this.startingAngle,"deg)")},launchWheel:function(){if(!(this.processingLock&&this.itemSelected!=null)){this.processingLock=!0;var e;this.wheelResultIndex.value!==null?e=this.wheelResultIndex.value%this.items.length:e=Math.floor(Math.random()*this.items.length+1)-1;var o=document.querySelector("#wheel-container-".concat(this.randomIdRoulette," .wheel"));this.itemSelected=this.items[e],o.style.transform="rotate(".concat(this.counterClockWiseOperator*(360*3)+-e*this.itemAngle-this.itemAngle/2+this.degreesVariation,"deg)"),this.$emit("wheel-start",this.itemSelected)}}}}),hC=["id"],pC={class:"wheel-base"},_C={key:0,class:"wheel-base-indicator"},fC=["innerHTML"];function bC(s,e,o,n,i,r){return l(),a("div",{id:"wheel-container-".concat(s.randomIdRoulette),class:C(["wheel-container",["indicator-".concat(s.indicatorPosition),{"wheel-container-indicator":s.displayIndicator},{"wheel-container-shadow":s.displayShadow},{"wheel-container-border":s.displayBorder}]])},[s.baseDisplay?(l(),a("div",{key:0,class:C(["wheel-base-container",[{"wheel-base-container-shadow":s.baseDisplayShadow}]]),style:dt({width:"".concat(s.baseSize,"px"),height:"".concat(s.baseSize,"px"),background:"".concat(s.baseBackground)})},[t("div",pC,[jt(s.$slots,"baseContent")]),s.baseDisplayIndicator?(l(),a("div",_C)):u("",!0)],6)):u("",!0),t("div",{class:C(["wheel",["easing-".concat(s.easing),{"wheel-border":s.displayBorder}]]),style:dt({width:"".concat(s.size,"px"),height:"".concat(s.size,"px"),transitionDuration:"".concat(s.duration,"s"),transform:"rotate(".concat(s.startingAngle,"deg)")})},[(l(!0),a(v,null,O(s.items,function(d,c){return l(),a("div",{key:d.id,class:"wheel-item",style:dt({transform:"rotate(".concat(s.itemAngle*c,"deg) skewY(").concat(-(90-s.itemAngle),"deg)"),background:d.background})},[t("div",{class:C(["content",{"horizontal-content":s.horizontalContent}]),style:dt({transform:"skewY(".concat(90-s.itemAngle,"deg) rotate(").concat(s.itemAngle/2,"deg)")})},[t("span",{style:dt({color:d.textColor}),innerHTML:d.htmlContent},null,12,fC)],6)],4)}),128))],6)],10,hC)}function gC(s,e){e===void 0&&(e={});var o=e.insertAt;if(!(!s||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",o==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=s:i.appendChild(document.createTextNode(s))}}var yC=`.wheel-container[data-v-2d0cf945],
.wheel-base[data-v-2d0cf945],
.wheel-base-container[data-v-2d0cf945],
.wheel-base-indicator[data-v-2d0cf945] {
  transition: transform 1s ease-in-out;
}
.wheel-container[data-v-2d0cf945] {
  position: relative;
  display: inline-block;
  overflow: hidden;
  border-radius: 50%;
  cursor: pointer;
}
.wheel-container-indicator[data-v-2d0cf945]:before {
  content: "";
  position: absolute;
  z-index: 4;
  width: 0;
  height: 0;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
  border-top: 20px solid black;
  transform: translateX(-50%);
}
.wheel-container.indicator-top[data-v-2d0cf945] {
  transform: rotate(0deg);
}
.wheel-container.indicator-right[data-v-2d0cf945] {
  transform: rotate(90deg);
}
.wheel-container.indicator-right .wheel-base[data-v-2d0cf945] {
  transform: rotate(-90deg);
}
.wheel-container.indicator-bottom[data-v-2d0cf945] {
  transform: rotate(180deg);
}
.wheel-container.indicator-bottom .wheel-base[data-v-2d0cf945] {
  transform: rotate(-180deg);
}
.wheel-container.indicator-left[data-v-2d0cf945] {
  transform: rotate(270deg);
}
.wheel-container.indicator-left .wheel-base[data-v-2d0cf945] {
  transform: rotate(-270deg);
}
.wheel-container-border[data-v-2d0cf945] {
  border: 8px solid black;
}
.wheel-container-shadow[data-v-2d0cf945] {
  box-shadow: 5px 5px 15px -5px #000000;
}
.wheel-base-container[data-v-2d0cf945] {
  position: absolute;
  z-index: 2;
  top: 50%;
  left: 50%;
  border-radius: 50%;
  border: 5px solid black;
  transform: translate(-50%, -50%);
}
.wheel-base-container-shadow[data-v-2d0cf945] {
  box-shadow: 5px 5px 15px -5px #000000;
}
.wheel-base-container .wheel-base[data-v-2d0cf945] {
  position: absolute;
  z-index: 2;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  width: 100%;
  height: 100%;
  border-radius: 50%;
}
.wheel-base-container .wheel-base-indicator[data-v-2d0cf945] {
  position: absolute;
  z-index: 1;
  width: 100%;
  height: 100%;
}
.wheel-base-container .wheel-base-indicator[data-v-2d0cf945]:before {
  content: "";
  position: absolute;
  z-index: 1;
  top: -20px;
  width: 0;
  height: 0;
  border-left: 20px solid transparent;
  border-right: 20px solid transparent;
  border-bottom: 20px solid black;
  transform: translateX(-50%);
}
.wheel[data-v-2d0cf945] {
  background: white;
  border-radius: 50%;
  margin: auto;
  overflow: hidden;
}
.wheel.easing-ease[data-v-2d0cf945] {
  transition: transform cubic-bezier(0.65, 0, 0.35, 1);
}
.wheel.easing-bounce[data-v-2d0cf945] {
  transition: transform cubic-bezier(0.49, 0.02, 0.52, 1.12);
}
.wheel-border[data-v-2d0cf945]:after {
  content: "";
  width: 100%;
  height: 100%;
  position: absolute;
  left: 0;
  top: 0;
  z-index: 3;
  border-radius: 50%;
  background-image: linear-gradient(to left, black 33%, rgba(255, 255, 255, 0) 0%);
  background-position: bottom;
  background-size: 3px 1px;
  /* background:linear-gradient(red,purple,orange); */
  -webkit-mask: radial-gradient(transparent 65%, #000 66%);
  mask: radial-gradient(transparent 65%, #000 66%);
}
.wheel-item[data-v-2d0cf945] {
  overflow: hidden;
  position: absolute;
  top: 0;
  right: 0;
  width: 50%;
  height: 50%;
  transform-origin: 0% 100%;
  border: 1px solid black;
}
.wheel-item[data-v-2d0cf945]:nth-child(odd) {
  background-color: skyblue;
}
.wheel-item[data-v-2d0cf945]:nth-child(even) {
  background-color: pink;
}
.wheel .content[data-v-2d0cf945] {
  position: absolute;
  left: -100%;
  width: 200%;
  height: 200%;
  text-align: center;
  transform: skewY(30deg) rotate(0deg);
  padding-top: 20px;
}
.wheel .content.horizontal-content[data-v-2d0cf945] {
  left: initial;
  right: 100%;
  width: 50%;
  height: 250%;
  text-align: right;
}
.wheel .content.horizontal-content span[data-v-2d0cf945] {
  display: block;
  transform: rotate(270deg);
}`;gC(yC);Qi.render=bC;Qi.__scopeId="data-v-2d0cf945";const vC={key:0,class:"card card-style"},$C={class:"content"},kC=t("h4",null,"Правила данной игры",-1),wC={key:0,class:"mb-2"},FC=t("p",{style:{"font-weight":"900",color:"red"},class:"mb-2"},"Вы израсходовали все ваши попытки",-1),CC=[FC],PC={key:2,class:"m-0 p-0"},SC={class:"d-flex flex-column mb-2"},xC={key:1,class:"card card-style"},jC={class:"content d-flex justify-content-center flex-wrap"},OC=t("div",null,"Поехали",-1),TC=t("h3",null,"Анкета участника акции",-1),UC=t("p",null," Для участия в конкурсе и дальнейшего получения приза необходимо заполнить данную анкету! Укажите своё имя и номер телефона чтоб менеджер мог выдать Вам приз по итогу. ",-1),IC={name:"App",components:{Roulette:Qi},data(){return{winResultMessage:"Наш менеджер свяжется с вами для дальнейших инструкций.",rules:null,rouletteKey:0,action:null,hasProfileData:!1,winForm:{win:null},items:[]}},computed:{canPlay(){return this.action?this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.loadServiceData().then(()=>{this.prepareUserData()})},methods:{lose(){this.$botNotification.warning("Упс!","Вы израсходовали все попытки!")},prepareUserData(){return this.$store.dispatch("wheelOfFortunePrepare").then(s=>{this.action=s.action})},loadServiceData(){return this.$store.dispatch("wheelOfFortuneLoadData").then(s=>{let e=1;this.rules=s.rules,this.winResultMessage=s.callback_message;const o=s.wheels;this.items=[],o.forEach(n=>{this.items.push({id:e,name:n.value,htmlContent:n.value,textColor:"",background:""}),e++})})},submit(){let s=new FormData;Object.keys(this.winForm).forEach(o=>{const n=this.winForm[o]||"";typeof n=="object"?s.append(o,JSON.stringify(n)):s.append(o,n)});const e=this.winForm.win||"Что-то интересное...";this.$store.dispatch("wheelOfFortuneWin",{winForm:s}).then(o=>{this.winForm.win=null,this.winForm.name=null,this.winForm.phone=null,this.prepareUserData()}).catch(o=>{}),this.$botNotification.success("Вы выиграли!",e)},launchWheel(){this.rouletteKey+=1,setTimeout(()=>this.$refs.wheel.launchWheel(),0)},wheelStartedCallback(){},callbackPlayerForm(s){this.winForm={...this.winForm,...s},this.hasProfileData=!0},wheelEndedCallback(s){if(!s)return;const e=s.id;setTimeout(()=>{this.winForm.win=e,this.submit(),this.hasProfileData=!1},2e3),this.$botNotification.success("Победа!","Вы выиграли приз <strong>"+(this.winForm.win||"-")+"</strong>.")}}},Ka=Object.assign(IC,{setup(s){return(e,o)=>(l(),a(v,null,[e.rules?(l(),a("div",vC,[t("div",$C,[kC,t("p",null,p(e.rules),1),e.canPlay?(l(),a("p",wC,[_("Ваши попытки: "),t("strong",null,p(e.action.current_attempts||0),1),_(" из "),t("strong",null,p(e.action.max_attempts||1),1)])):(l(),a("div",{key:1,onClick:o[0]||(o[0]=(...n)=>e.lose&&e.lose(...n))},CC)),e.action.data?(l(),a("ul",PC,[(l(!0),a(v,null,O(e.action.data,n=>(l(),a("li",SC,[t("span",null,[_("Приз "),t("strong",null,"№"+p(n.win||"Отсуствует"),1)]),t("span",null,[_("Описание "),t("strong",null,p(n.description||"Отсуствует"),1)]),t("span",null,[_("Победитель "),t("strong",null,p(n.name||"Не указано"),1)]),t("span",null,[_("Телефон "),t("strong",null,p(n.phone||"Не указано"),1)])]))),256))])):u("",!0)])])):u("",!0),e.canPlay&&e.hasProfileData?(l(),a("div",xC,[t("div",jC,[(l(),M(Ie(Qi),{ref:"wheel",size:"300",key:e.rouletteKey,items:e.items,"centered-indicator":"","indicator-position":"top","display-shadow":"","display-border":"","base-display":"","base-display-indicator":"","base-background":"orange","base-display-shadow":"",easing:"bounce",onWheelStart:e.wheelStartedCallback,onWheelEnd:e.wheelEndedCallback,onClick:e.launchWheel},{baseContent:A(()=>[OC]),_:1},8,["items","onWheelStart","onWheelEnd","onClick"]))])])):u("",!0),e.canPlay&&!e.hasProfileData?(l(),M(Ea,{key:2,onCallback:e.callbackPlayerForm},{head:A(()=>[TC,UC]),_:1},8,["onCallback"])):u("",!0)],64))}}),VC=Object.freeze(Object.defineProperty({__proto__:null,default:Ka},Symbol.toStringTag,{value:"Module"}));const MC={props:["items"],mounted(){const s=this.items,e=document.querySelector(".deal-wheel"),o=e.querySelector(".spinner"),n=e.querySelector(".btn-spin"),i=e.querySelector(".ticker"),r=360/s.length,d=Math.floor(180/s.length),c="is-spinning",h="selected",g=window.getComputedStyle(o);let w,x=0,P=0,I;const V=()=>{s.forEach(({text:se,color:de,reaction:K},ne)=>{const te=r*ne*-1-d;o.insertAdjacentHTML("beforeend",`<li class="prize" data-reaction=${K} style="--rotate: ${te}deg">
        <span class="text">${se}</span>
      </li>`)})},B=()=>{o.setAttribute("style",`background: conic-gradient(
      from -90deg,
      ${s.map(({color:se},de)=>`${se} 0 ${100/s.length*(s.length-de)-.25}%,black 0 ${100/s.length*(s.length-de)}%`).reverse()}
    );`)},L=()=>{B(),V(),I=e.querySelectorAll(".prize")},ee=(se,de)=>(se=Math.ceil(se),de=Math.floor(de),Math.floor(Math.random()*(de-se+1))+se),J=()=>{const se=g.transform.split("(")[1].split(")")[0].split(","),de=se[0],K=se[1];let ne=Math.atan2(K,de);ne<0&&(ne+=2*Math.PI);const te=Math.round(ne*(180/Math.PI)),E=Math.floor(te/r);P!==E&&(i.style.animation="none",setTimeout(()=>i.style.animation=null,10),P=E),w=requestAnimationFrame(J)},re=()=>{const se=Math.floor(x/r);if(se<0||se>=I.length){J();return}I[se].classList.add(h),this.$emit("callback",se)};n.addEventListener("click",()=>{n.disabled=!0,x=Math.floor(Math.random()*360+ee(2e3,5e3)),I.forEach(se=>se.classList.remove(h)),e.classList.add(c),o.style.setProperty("--rotate",x),i.style.animation="none",J()}),o.addEventListener("transitionend",()=>{cancelAnimationFrame(w),x%=360,re(),e.classList.remove(c),o.style.setProperty("--rotate",x),n.disabled=!1}),L()}},AC={class:"deal-container"},EC={class:"deal-wheel"},DC=ze('<div class="outer-circle"></div><div class="deal-wheel-full"><div class="inner-circle"></div><div class="inner-circle-2"></div></div><ul class="spinner"></ul><div class="ticker"><div class="circle"></div><div class="arrow"></div></div>',4),zC={class:"btn-spin"};function BC(s,e,o,n,i,r){return l(),a("div",AC,[t("div",EC,[DC,t("button",zC,[jt(s.$slots,"baseContent")])])])}const LC=oe(MC,[["render",BC]]);const RC={key:0,class:"card card-style"},NC={class:"content"},qC=t("h4",null,"Правила данной игры",-1),WC=["innerHTML"],YC={key:0,class:"mb-2"},HC=t("p",{style:{"font-weight":"900",color:"red"},class:"mb-2"},"Вы израсходовали все ваши попытки",-1),QC=[HC],GC={key:2,class:"m-0 p-0"},KC={class:"d-flex flex-column mb-2"},JC={key:1,class:"card card-style"},XC={class:"content d-flex justify-content-center flex-wrap"},ZC={name:"App",data(){return{winResultMessage:"Наш менеджер свяжется с вами для дальнейших инструкций.",rules:null,rouletteKey:0,action:null,hasProfileData:!1,wheelDataLoaded:!1,winForm:{win:null},items:[]}},computed:{canPlay(){return this.action?this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.loadServiceData().then(()=>{this.prepareUserData()})},methods:{lose(){this.$botNotification.warning("Упс!","Вы израсходовали все попытки!")},prepareUserData(){return this.$store.dispatch("wheelOfFortuneCustomPrepare").then(s=>{this.action=s.action})},loadServiceData(){return this.wheelDataLoaded=!1,this.$store.dispatch("wheelOfFortuneCustomLoadData").then(s=>{let e=0;const o=["#645b00","#9a4000","#831814","#831131","#83118d","#7529eb","#0e2e75","#115965","#0f6b2b","#476c17","#756d21","#854a1c"];this.rules=s.rules,this.winResultMessage=s.callback_message;const n=s.wheels.sort(()=>Math.random()-.5);this.items=[],n.forEach(i=>{this.items.push({text:i.value,color:o[e]}),e=e<o.length?e+1:0}),this.wheelDataLoaded=!0})},submit(){let s=new FormData;Object.keys(this.winForm).forEach(o=>{const n=this.winForm[o]||"";typeof n=="object"?s.append(o,JSON.stringify(n)):s.append(o,n)});const e=this.winForm.win||null;s.append("description",this.items[e].text||"Без описания"),this.$store.dispatch("wheelOfFortuneCustomWin",{winForm:s}).then(o=>{this.winForm.win=null,this.winForm.name=null,this.winForm.phone=null,this.prepareUserData(),this.tg.close()}).catch(o=>{}),this.$botNotification.success("Вы выиграли!","Вы выиграли приз "+(e?this.items[e].text:"Что-то интересное..."))},callbackPlayerForm(s){this.winForm={...this.winForm,...s},this.hasProfileData=!0},wheelEndedCallback(s){this.wheelDataLoaded=!1,console.log("game event",s);const e=s;setTimeout(()=>{this.winForm.win=e,this.submit()},2e3)}}},Ja=Object.assign(ZC,{setup(s){return(e,o)=>(l(),a(v,null,[e.rules?(l(),a("div",RC,[t("div",NC,[qC,t("p",{innerHTML:e.rules},null,8,WC),e.canPlay&&e.action?(l(),a("p",YC,[_("Ваши попытки: "),t("strong",null,p(e.action.current_attempts||0),1),_(" из "),t("strong",null,p(e.action.max_attempts||1),1)])):(l(),a("div",{key:1,onClick:o[0]||(o[0]=(...n)=>e.lose&&e.lose(...n))},QC)),e.action?(l(),a("ul",GC,[e.action.data?(l(!0),a(v,{key:0},O(e.action.data,n=>(l(),a("li",KC,[t("span",null,[_("Название приза "),t("strong",null,p(n.description||"Отсутствует"),1)]),t("span",null,[_("Победитель "),t("strong",null,p(n.name||"Не указано"),1)]),t("span",null,[_("Телефон "),t("strong",null,p(n.phone||"Не указано"),1)])]))),256)):u("",!0)])):u("",!0),T(st,{class:"my-2"})])])):u("",!0),e.canPlay&&e.wheelDataLoaded?(l(),a("div",JC,[t("div",XC,[T(LC,{items:e.items,onCallback:e.wheelEndedCallback},{baseContent:A(()=>[_(" Испытай удачу ")]),_:1},8,["items","onCallback"])])])):u("",!0)],64))}}),eP=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),tP={class:"card card-style"},sP={class:"content mb-2"},oP=ze('<h3>Часто задаваемые вопросы</h3><p class="color-highlight font-12 mt-n2 mb-2">Действительно важные вопросы</p><p> Нам часто задают эти вопросы, поэтому мы создали этот небольшой раздел, чтобы помочь вам понять как работает наша система. </p><div class="divider mt-2 mb-2"></div><div class="d-flex"><div class="pt-1"><h5 data-activate="question-1" class="font-600">Что такое система CashBack?</h5></div><div class="ml-auto mr-1 pr-2"><div class="custom-control classic-switch"><input type="checkbox" class="classic-input" id="question-1"><label class="custom-control-label" for="question-1"></label><i class="fa fa-angle-down font-11 color-green1-dark"></i></div></div></div><div data-switch="question-1" class="switch-is-unchecked"><p class="mb-1">CashBack - это система, которая позволяет пользователям зарабатывать бонусы при оплате покупок в различных заведениях. В данном случае, CashBack начисляет бонусы после каждой покупки еды и напитков в заведении.</p><p class="mb-1">Для участия в программе нужно иметь профиль в системе, где вы сможете отслеживать количество накопленных бонусов и получать информацию о специальных предложениях и акциях.</p><p class="mb-1">Чтобы начислить бонусы, необходимо отсканировать свой QR-код из своего профиля после каждой покупки в заведении. Количество начисляемых бонусов зависит от условий программы и может изменяться.</p><p class="mb-1">CashBack позволяет пользователям получать дополнительные выгоды и бонусы при стандартных покупках в различных заведениях. Кроме того, это помогает заведениям удерживать постоянных клиентов и мотивировать их к повторным визитам.</p><p class="mb-1"> Общие рекомендации использования системы CashBack:</p><ul><li>Создайте профиль в системе и связанный с ним QR-код заранее.</li><li>Проверяйте условия программы, чтобы понимать, какие покупки позволят вам заработать больше бонусов. </li><li>Следите за акциями и специальными предложениями, чтобы получить дополнительные бонусы. </li><li>Не забывайте отсканировать свой QR-код после каждой покупки, чтобы начислить бонусы. </li><li>Используйте накопленные бонусы для оплаты следующих покупок или обменяйте их на подарки и скидки. </li></ul></div><div class="divider mt-2 mb-2"></div><div class="d-flex"><div class="pt-1"><h5 data-activate="question-2" class="font-600"> О нашем продукте</h5></div><div class="ml-auto mr-1 pr-2"><div class="custom-control classic-switch"><input type="checkbox" class="classic-input" id="question-2"><label class="custom-control-label" for="question-2"></label><i class="fa fa-angle-down font-11 color-green1-dark"></i></div></div></div><div data-switch="question-2" class="switch-is-unchecked"><p class="mb-2">Для начала немного о нашем продукте: Кэш Бэк Бот - это телеграм бот с несколькими инновационными и очень важными функциями для любого бизнеса:</p><ol><li> Это 2х или 3х уровневая система лояльности на основе Кеш Бэка, которая встраивается в телеграмм предприятия, она дает и списывает Кеш бек с помощью нескольких простых действий. Так же она привлекает клиентов, возвращает их снова и снова, а еще она мотивирует их рекомендовать Ваш бизнес своим друзьям и знакомым с помощью множества удобных функционалов. </li><li> Это Ваша новая социальная сеть, где вы можете вести блог о вашем бизнесе, а так же делать рекламу и управлять клиентской базой. Очень важно, что на телеграмм не распространились санкции, поэтому привлекать новых клиентов легче, чем например через инстаграм. </li><li> Клиентская база, которая формируется автоматически по вашему запросу (пол, возраст, район проживания клиента и т.д), с номерами клиентов и гостей вашего бизнеса, которым можно делать рассылку с помощью бота (совершенно бесплатно) </li><li> Удобное меню и логистика по боту, с помощью кнопок в меню: прайс, фото, контактные данные, меню, акции, услуги и так далее, все что может помочь клиенту узнать о Вас все. </li></ol><p class="mb-2">Вообщем Кеш Бек Бот это супер технологичный, современный и удобный сервис, который включает самые лучшие рекламные и маркетинговые ресурсы для Вашего бизнеса. На данный момент сложно себе представить, ресурс который лучше справиться с функцией увеличения продаж и прибыли в Вашем бизнесе.</p></div><div class="divider mt-2 mb-2"></div><div class="d-flex"><div class="pt-1"><h5 data-activate="question-3" class="font-600"> Как это работает?</h5></div><div class="ml-auto mr-1 pr-2"><div class="custom-control classic-switch"><input type="checkbox" class="classic-input" id="question-3"><label class="custom-control-label" for="question-3"></label><i class="fa fa-angle-down font-11 color-green1-dark"></i></div></div></div>',11),iP=t("div",{"data-switch":"question-3",class:"switch-is-unchecked"},[t("iframe",{style:{width:"100%"},src:"https://www.youtube.com/embed/pxuuL7I4OBQ",title:"Система Лояльности с помощью Телеграмм Бота",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""})],-1),nP=ze('<div class="divider mt-2 mb-2"></div><div class="d-flex"><div class="pt-1"><h5 data-activate="question-4" class="font-600"> Примеры работы бота</h5></div><div class="ml-auto mr-1 pr-2"><div class="custom-control classic-switch"><input type="checkbox" class="classic-input" id="question-4"><label class="custom-control-label" for="question-4"></label><i class="fa fa-angle-down font-11 color-green1-dark"></i></div></div></div>',2),lP={"data-switch":"question-4",class:"switch-is-unchecked"},aP={class:"list-group list-custom-small"},rP=["onClick"],dP=t("i",{class:"fa-solid fa-robot font-14 color-brown1-dark"},null,-1),cP=t("i",{class:"fa fa-angle-right"},null,-1),uP={data(){return{examples:[{title:"ARCoffee - бот для кофейни",url:"https://t.me/arcoffee_dn_bot"},{title:"Д•Р•У•З•Ь•Я - бот для ресторана",url:"https://t.me/friends_coffee_bot"},{title:"Амати бот - Клуб красоты Амати",url:"https://t.me/amati_beauty_bot"}]}},computed:{tg(){return window.Telegram.WebApp}},mounted(){},methods:{open(s){this.tg.openLink(s)}}},Gi=Object.assign(uP,{__name:"ProjectInfoCard",setup(s){return(e,o)=>(l(),a("div",tP,[t("div",sP,[oP,iP,nP,t("div",lP,[t("div",aP,[(l(!0),a(v,null,O(e.examples,(n,i)=>(l(),a("a",{href:"#",onClick:r=>e.open(n.url)},[dP,t("span",null,p(n.title||"Не указан заголовок"),1),cP],8,rP))),256))])]),T(st,{class:"my-2"})])]))}});const Io=s=>(Ge("data-v-afc2d6b1"),s=s(),Ke(),s),mP={key:0},hP={class:"card card-style p-3"},pP={class:"col-12"},_P={class:"mb-3"},fP=Io(()=>t("h6",{class:"text-center"},"Какую сумму желаете вывести?",-1)),bP={class:"input-style input-style-2"},gP={class:"col-12"},yP={class:"d-flex mb-2"},vP={class:"pt-1"},$P={"data-activate":"toggle-id-1",class:"font-500 font-13"},kP={key:0},wP={key:1},FP={class:"ml-auto mr-4 pr-2"},CP={class:"custom-control ios-switch"},PP=Io(()=>t("label",{class:"custom-control-label",for:"toggle-id-2"},null,-1)),SP={key:0,class:"col-12"},xP=Io(()=>t("h6",{class:"text-center"},"Введите номер телефона",-1)),jP={class:"input-style input-style-2"},OP={key:1,class:"col-12"},TP=Io(()=>t("h6",{class:"text-center"},"Введите номер карты",-1)),UP={class:"input-style input-style-2"},IP={class:"col-12"},VP=Io(()=>t("h6",{class:"text-center"},"Укажите инициалы получателя и название банка",-1)),MP={class:"input-style input-style-2"},AP={class:"col-12"},EP=["disabled"],DP=Io(()=>t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1)),zP={class:"col-12"},BP={data(){return{load:!1,botUser:null,need_phone:!1,withDrawMoneyForm:{amount:null,card:null,info:null}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.withDrawMoneyForm.amount=this.botUser.cashBack.amount||0}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{submit(){this.load=!0,this.$store.dispatch("withDrawMoney",{withDrawMoneyForm:this.withDrawMoneyForm}).then(s=>{this.load=!1,this.$botNotification.success("Вывод средств","Данные успешно переданы на обработку!"),this.tg.close()}).catch(()=>{this.load=!1,this.$botNotification.warning("Вывод средств","Ошибка обработки данных!")})}}},LP=Object.assign(BP,{__name:"CashOut",setup(s){return(e,o)=>{const n=ie("mask");return l(),a(v,null,[e.botUser?(l(),a("div",mP,[t("div",hP,[t("form",{onSubmit:o[5]||(o[5]=W((...i)=>e.submit&&e.submit(...i),["prevent"])),class:"row mb-0"},[t("div",pP,[t("p",_P,"На вашем счету накопилось "+p(e.botUser.cashBack.amount||0)+" руб. ",1),fP,t("div",bP,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"1000 руб.","aria-label":"withDrawMoneyForm-amount","onUpdate:modelValue":o[0]||(o[0]=i=>e.withDrawMoneyForm.amount=i),"aria-describedby":"withDrawMoneyForm-amount",required:""},null,512),[[k,e.withDrawMoneyForm.amount]])])]),t("div",gP,[t("div",yP,[t("div",vP,[t("h5",$P,[e.need_phone?(l(),a("span",kP,"На карту")):(l(),a("span",wP,"По номеру телефона"))])]),t("div",FP,[t("div",CP,[f(t("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>e.need_phone=i),type:"checkbox",class:"ios-input",id:"toggle-id-2"},null,512),[[z,e.need_phone]]),PP])])])]),e.need_phone?(l(),a("div",SP,[xP,t("div",jP,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[2]||(o[2]=i=>e.withDrawMoneyForm.card=i),placeholder:"+7(000)000-00-00","aria-label":"withDrawMoneyForm-card","aria-describedby":"withDrawMoneyForm-card",required:""},null,512),[[n,"+7(###)###-##-##"],[k,e.withDrawMoneyForm.card]])])])):u("",!0),e.need_phone?u("",!0):(l(),a("div",OP,[TP,t("div",UP,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[3]||(o[3]=i=>e.withDrawMoneyForm.card=i),placeholder:"0000 0000 0000 0000","aria-label":"withDrawMoneyForm-card","aria-describedby":"withDrawMoneyForm-card",required:""},null,512),[[n,"#### #### #### ####"],[k,e.withDrawMoneyForm.card]])])])),t("div",IP,[VP,t("div",MP,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Иванов И.И., сбер","aria-label":"withDrawMoneyForm-info","onUpdate:modelValue":o[4]||(o[4]=i=>e.withDrawMoneyForm.info=i),"aria-describedby":"withDrawMoneyForm-info",required:""},null,512),[[k,e.withDrawMoneyForm.info]])])]),t("div",AP,[t("button",{type:"submit",disabled:e.load,class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Отправить заявку ",8,EP)]),DP,t("div",zP,[T(st,{class:"mb-2"})])],32)])])):u("",!0),T(Gi)],64)}}}),Xa=oe(LP,[["__scopeId","data-v-afc2d6b1"]]),RP=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"}));const NP={key:0,class:"card card-style"},qP={class:"content"},WP=t("h4",null,"Правила данной акции",-1),YP={key:1,class:"card card-style"},HP={class:"content"},QP=t("h6",{class:"text-center"},"Ваша личная накопительная карта",-1),GP=t("p",null,null,-1),KP={class:"d-flex justify-content-around flex-wrap save-up"},JP=["innerHTML"],XP={key:1},ZP=t("i",{class:"fa-solid fa-question"},null,-1),eS=[ZP],tS={name:"App",data(){return{rules:null,action:null,icon:null,icon_color:null}},mounted(){this.prepareUserData()},methods:{requestClick(){this.$cashback.qr("002")},prepareUserData(){return this.$store.dispatch("bonusProductPrepare").then(s=>{this.action=s.action,this.rules=s.rules,this.icon=s.icon,this.icon_color=s.icon_color})},submit(){this.$store.dispatch("wheelOfFortuneWin",this.productForm).then(s=>{this.winForm={win:null,name:null,phone:null},this.$botNotification.success("Вы выиграли!","Наш менеджер свяжется с вами для дальнейших инструкций."),this.prepareUserData()}).catch(s=>{})}}},Za=Object.assign(tS,{setup(s){return(e,o)=>(l(),a(v,null,[e.rules?(l(),a("div",NP,[t("div",qP,[WP,t("p",null,p(e.rules),1)])])):u("",!0),e.action?(l(),a("div",YP,[t("div",HP,[QP,GP,t("ul",KP,[(l(!0),a(v,null,O(e.action.max_attempts||10,n=>(l(),a("li",{class:C({active:n<=e.action.current_attempts}),onClick:o[0]||(o[0]=(...i)=>e.requestClick&&e.requestClick(...i))},[n<=e.action.current_attempts?(l(),a("span",{key:0,innerHTML:e.icon,style:dt({color:e.icon_color})},null,12,JP)):(l(),a("span",XP,eS))],2))),256))]),T(st)])])):u("",!0)],64))}}),sS=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"}));const oS={key:0,class:"card card-style"},iS={class:"content"},nS=t("h4",null,"Правила данного задания",-1),lS={key:0},aS={key:1,class:"card card-style"},rS={class:"content"},dS={class:"card mb-0"},cS={class:"card-body"},uS={for:"photos",class:"photo-loader mb-2 d-flex justify-content-center align-items-center flex-column text-center w-100"},mS=t("i",{class:"fa-brands fa-instagram font-36"},null,-1),hS=t("p",{class:"mt-3 font-16"}," Нажмите для выбора фотографии",-1),pS={key:0,class:"img-preview w-100"},_S={class:"w-100 object-fit-cover"},fS={class:"remove"},bS=t("i",{class:"fa-regular fa-trash-can"},null,-1),gS=t("div",{class:"card card-style my-3"},[t("div",{class:"content"},[t("h3",null,"Анкета участника акции"),t("p",null," Для участия в конкурсе и дальнейшего получения приза необходимо заполнить данную анкету! Укажите своё имя и номер телефона чтоб менеджер мог выдать Вам приз по итогу. ")])],-1),yS={name:"App",data(){return{rules:null,sending:!1,action:null,photo:null,hasProfileData:!1,instaForm:{comment:null,name:null,phone:null}}},computed:{canPlay(){return this.action?this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.loadServiceData().then(()=>{this.prepareUserData()})},methods:{lose(){this.$botNotification.warning("Упс!","Вы израсходовали все попытки!")},prepareUserData(){return this.$store.dispatch("instagramQuestPrepare").then(s=>{this.action=s.action,this.canPlay||this.$botNotification.warning("Упс!","Вы израсходовали все попытки!")})},loadServiceData(){return this.$store.dispatch("instagramQuestLoadData").then(s=>{this.rules=s.rules})},removePhoto(){this.photo=null},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(s){const e=s.target.files;this.photo=e[0]},callbackPlayerForm(s){this.instaForm={...this.instaForm,...s},this.hasProfileData=!0},submit(){let s=new FormData;Object.keys(this.instaForm).forEach(e=>{const o=this.instaForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("photo",this.photo),this.$store.dispatch("instagramQuestResult",{instaForm:s}).then(e=>{this.sending=!1,this.instaForm={comment:null,name:null,phone:null},this.photo=null,this.hasProfileData=!1,this.$botNotification.success("Вы выиграли!","Наш менеджер свяжется с вами для дальнейших инструкций."),setTimeout(()=>{this.prepareUserData()},5e3)}).catch(e=>{})}}},er=Object.assign(yS,{setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[e.rules?(l(),a("div",oS,[t("div",iS,[nS,t("p",null,p(e.rules),1),e.canPlay?(l(),a("p",lS,[_("Ваши попытки: "),t("strong",null,p(e.action.current_attempts||0),1),_(" из "),t("strong",null,p(e.action.max_attempts||1),1)])):(l(),a("p",{key:1,onClick:o[0]||(o[0]=(...i)=>e.lose&&e.lose(...i)),style:{"font-weight":"900",color:"red"}},"Вы израсходовали все ваши попытки"))])])):u("",!0),e.canPlay&&e.hasProfileData?(l(),a("div",aS,[t("div",rS,[t("div",dS,[t("div",cS,[t("label",uS,[mS,t("input",{type:"file",id:"photos",accept:"image/*",onChange:o[1]||(o[1]=(...i)=>e.onChangePhotos&&e.onChangePhotos(...i)),style:{display:"none"}},null,32),hS]),e.photo?(l(),a("div",pS,[f(t("img",_S,null,512),[[n,e.getPhoto().imageUrl]]),t("div",fS,[t("a",{onClick:o[2]||(o[2]=(...i)=>e.removePhoto&&e.removePhoto(...i)),class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s border-danger text-danger"},[bS,_(" Удалить фото")])])])):u("",!0)])]),e.photo?(l(),a("button",{key:0,onClick:o[3]||(o[3]=(...i)=>e.submit&&e.submit(...i)),type:"button",class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-green1-light w-100 mt-2 mb-2"}," Получить приз ")):u("",!0),T(st,{class:"mb-0"})])])):u("",!0),e.canPlay&&!e.hasProfileData?(l(),M(Ea,{key:2,onCallback:e.callbackPlayerForm},{head:A(()=>[gS]),_:1},8,["onCallback"])):u("",!0)],64)}}}),vS=Object.freeze(Object.defineProperty({__proto__:null,default:er},Symbol.toStringTag,{value:"Module"})),tr={__name:"Empty",setup(s){return(e,o)=>(l(),M(Kn))}},$S=Object.freeze(Object.defineProperty({__proto__:null,default:tr},Symbol.toStringTag,{value:"Module"})),kS={class:"card card-style"},wS={class:"content"},FS={class:"mb-0"},CS={key:0},PS=t("strong",null,"CashBack",-1),SS={key:1},xS=t("b",null,"номер телефона",-1),jS={class:"row mb-0 px-3"},OS={class:"col-6 p-1"},TS={class:"col-6 p-1"},US={key:1,class:"card card-style"},IS={class:"content mb-2"},VS=t("h3",null,"Список администраторов",-1),MS=t("p",null," Список всех администраторов системы с их статусами и последним временем онлайн ",-1),AS={class:"list-group list-boxes"},ES=["onClick"],DS=t("i",{class:"fa font-20 fa-mobile color-blue2-dark"},null,-1),zS={key:0,class:"color-green1-dark"},BS={key:1,class:"color-red2-light"},LS={key:2,class:"fa fa-check-circle color-green1-dark"},RS={key:3,class:"fa fa-times-circle color-red2-light"},NS={key:2,class:"card card-style bg-28","data-card-height":"130",style:{height:"130px"}},qS=t("div",{class:"card-center"},[t("h3",{class:"color-white font-700 text-center mb-0"},"Список администраторов"),t("p",{class:"color-white text-center opacity-60 mt-n1 mb-0"},"К сожалению, администраторы не найдены:(")],-1),WS=t("div",{class:"card-overlay bg-highlight opacity-90"},null,-1),YS=[qS,WS],HS={data(){return{admins:[],admins_paginate_object:null,type:0}},computed:{...G(["getAdmins","getAdminsPaginateObject"]),self(){return window.self},currentBot(){return window.currentBot}},mounted(){this.loadAdmins()},methods:{nextAdminPage(s){this.loadAdmins(s)},sendRequest(s,e){if(!s.is_work){this.$botNotification.warning("Упс!","Администратор офлайн!");return}this.$store.dispatch("requestAdmin",{dataObject:{bot_id:this.currentBot.id,admin_telegram_chat_id:s.telegram_chat_id,user_telegram_chat_id:this.self.telegram_chat_id}}).then(o=>{this.$botNotification.success("Отлично!","Выбранный Администратор оповещен!")}).catch(()=>{})},loadAdmins(s=0){this.$store.dispatch("loadAdmins",{dataObject:{bot_domain:this.currentBot.bot_domain},page:s}).then(e=>{this.admins=this.getAdmins,this.admins_paginate_object=this.getAdminsPaginateObject}).catch(()=>{})}}},sr=Object.assign(HS,{__name:"Booking",setup(s){return(e,o)=>(l(),a(v,null,[t("div",kS,[t("div",wS,[t("p",FS,[_(" Вы можете выбрать администратора из списка активных администраторов и прислать ему запрос "),e.type===0?(l(),a("span",CS,[_("на начисление "),PS,_(".")])):u("",!0),e.type===1?(l(),a("span",SS,[_("на бронирование столика. Обязательно укажите свой "),xS,_(" для обратной связи.")])):u("",!0),_(" К запросу Вы можете прикрепить текстовое сообщение, которое также получит выбранный администратор. ")]),t("div",jS,[t("div",OS,[t("button",{type:"button",onClick:o[0]||(o[0]=n=>e.type=0),class:C(["btn btn-border btn-m btn-full rounded-sm text-uppercase font-900 w-100",{"bg-highlight":e.type===0,"border-highlight color-highlight bg-theme":e.type!==0}])}," Начислить баллы ",2)]),t("div",TS,[t("button",{type:"button",onClick:o[1]||(o[1]=n=>e.type=1),class:C(["btn btn-border btn-m btn-full rounded-sm text-uppercase font-900 w-100",{"bg-highlight":e.type===1,"border-highlight color-highlight bg-theme":e.type!==1}])}," Забронировать столик ",2)])])])]),e.type===1?(l(),M(Kn,{key:0,type:"booking"})):u("",!0),e.type===0&&e.admins.length>0?(l(),a("div",US,[t("div",IS,[VS,MS,t("div",AS,[(l(!0),a(v,null,O(e.admins,(n,i)=>(l(),a("a",{href:"#",onClick:W(r=>e.sendRequest(n,i),["prevent"]),class:C([{"border-green1-dark":n.is_work,"border-red1-dark":!n.is_work},"border rounded-s shadow-xs"])},[DS,t("span",null,p(n.user.fio_from_telegram||n.user.name||"Не указано")+" ("+p(e.$filters.timeAgo(n.updated_at))+")",1),t("strong",null,p(n.phone||"Номер телефона не указан"),1),n.is_work?(l(),a("u",zS,"В сети")):(l(),a("u",BS,"Не в сети")),n.is_work?(l(),a("i",LS)):(l(),a("i",RS))],10,ES))),256))]),e.admins_paginate_object?(l(),M(Ce,{key:0,class:"mt-2",onPagination_page:e.nextAdminPage,pagination:e.admins_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0),T(st,{class:"mb-2"})])])):u("",!0),e.type===0&&e.admins.length===0?(l(),a("div",NS,YS)):u("",!0)],64))}}),QS=Object.freeze(Object.defineProperty({__proto__:null,default:sr},Symbol.toStringTag,{value:"Module"})),GS=t("div",{class:"card card-style"},[t("div",{class:"content"},[t("p",{class:"mb-0"},[_(" Вы можете выбрать администратора из списка активных администраторов и прислать ему запрос на зачисление "),t("strong",null,"CashBack"),_(". К запросу вы можете прикрепить текстовое сообщение, которое также получит выбранный администратор. ")])])],-1),KS={key:0,class:"card card-style"},JS={class:"content mb-2"},XS=t("h3",null,"Список администраторов",-1),ZS=t("p",null," Список всех администраторов системы с их статусами и последним временем онлайн ",-1),e4={class:"list-group list-boxes"},t4=["onClick"],s4=t("i",{class:"fa font-20 fa-mobile color-blue2-dark"},null,-1),o4={key:0,class:"color-green1-dark"},i4={key:1,class:"color-red2-light"},n4={key:2,class:"fa fa-check-circle color-green1-dark"},l4={key:3,class:"fa fa-times-circle color-red2-light"},a4={key:1,class:"card card-style bg-28","data-card-height":"130",style:{height:"130px"}},r4=t("div",{class:"card-center"},[t("h3",{class:"color-white font-700 text-center mb-0"},"Список администраторов"),t("p",{class:"color-white text-center opacity-60 mt-n1 mb-0"},"К сожалению, администраторы не найдены:(")],-1),d4=t("div",{class:"card-overlay bg-highlight opacity-90"},null,-1),c4=[r4,d4],u4={data(){return{spent_time_counter:0,is_requested:!1,admins:[],admins_paginate_object:null,type:0}},computed:{...G(["getAdmins","getAdminsPaginateObject"]),self(){return window.self},currentBot(){return window.currentBot}},mounted(){this.loadAdmins(),localStorage.getItem("cashman_admin_request_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_admin_request_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,30):30;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_admin_request_counter",this.spent_time_counter)},1e3)},nextAdminPage(s){this.loadAdmins(s)},sendRequest(s,e){if(!s.is_work){this.$botNotification.warning("Упс!","Администратор офлайн!");return}if(this.is_requested){this.$botNotification.warning("Упс!",`Вызвать администратора можно через <strong>${this.spent_time_counter} сек.</strong>`);return}this.$store.dispatch("requestAdmin",{dataObject:{bot_id:this.currentBot.id,admin_telegram_chat_id:s.telegram_chat_id,user_telegram_chat_id:this.self.telegram_chat_id}}).then(o=>{this.$botNotification.success("Отлично!","Выбранный Администратор оповещен!"),this.startTimer(),this.is_requested=!0}).catch(()=>{})},loadAdmins(s=0){this.$store.dispatch("loadAdmins",{dataObject:{bot_domain:this.currentBot.bot_domain},page:s}).then(e=>{this.admins=this.getAdmins,this.admins_paginate_object=this.getAdminsPaginateObject}).catch(()=>{})}}},or=Object.assign(u4,{__name:"Admins",setup(s){return(e,o)=>(l(),a(v,null,[GS,e.admins.length>0?(l(),a("div",KS,[t("div",JS,[XS,ZS,t("div",e4,[(l(!0),a(v,null,O(e.admins,(n,i)=>(l(),a("a",{href:"javascript:void(0)",onClick:W(r=>e.sendRequest(n,i),["prevent"]),class:C([{"border-green1-dark":n.is_work,"border-red1-dark":!n.is_work},"border rounded-s shadow-xs"])},[s4,t("span",null,p(n.user.fio_from_telegram||n.user.name||"Не указано")+" ("+p(e.$filters.timeAgo(n.updated_at))+")",1),t("strong",null,p(n.phone||"Номер телефона не указан"),1),n.is_work?(l(),a("u",o4,"В сети")):(l(),a("u",i4,"Не в сети")),n.is_work?(l(),a("i",n4)):(l(),a("i",l4))],10,t4))),256))]),e.admins_paginate_object?(l(),M(Ce,{key:0,class:"mt-2",onPagination_page:e.nextAdminPage,pagination:e.admins_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0),T(st,{class:"mb-2"})])])):u("",!0),e.type===0&&e.admins.length===0?(l(),a("div",a4,c4)):u("",!0)],64))}}),m4=Object.freeze(Object.defineProperty({__proto__:null,default:or},Symbol.toStringTag,{value:"Module"}));const je=s=>(Ge("data-v-a1775696"),s=s(),Ke(),s),h4={key:0},p4={key:0,class:"card card-style p-3"},_4={class:"col-12 d-flex justify-content-center mb-3"},f4={class:"img-avatar"},b4={class:"img-avatar"},g4={class:"col-12"},y4=je(()=>t("p",{class:"mb-3"},[t("em",null,[_("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),_(" Я хочу поздравить Вас и дать возможность получать неограниченные преимущества нашего сервиса! Для начала нам нужно с Вами познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1)),v4=je(()=>t("h6",{class:"text-center"},"Как мне к Вам обращаться?",-1)),$4={class:"input-style input-style-2"},k4={class:"col-12"},w4={key:0,class:"mb-3"},F4=je(()=>t("h6",{class:"text-center"},"Введите свой номер телефона",-1)),C4={class:"input-style input-style-2"},P4={key:0,class:"col-12"},S4=je(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),x4=je(()=>t("h6",{class:"text-center"},"Вы мужчина или женщина?",-1)),j4={class:"row mb-0"},O4={class:"col-6 p-3"},T4=je(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),U4=je(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),I4=[T4,U4],V4={class:"col-6 p-3"},M4=je(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),A4=je(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),E4=[M4,A4],D4={key:1,class:"col-12"},z4=je(()=>t("p",{class:"mb-3"},[t("em",null,"Для того, чтобы я мог поздравлять Вас с днем рождения и сделать Вам приятно, мне нужно знать, когда он у Вас")],-1)),B4=je(()=>t("h6",{class:"text-center"},"Введите свой день рождения",-1)),L4={class:"input-style input-style-2"},R4={key:2,class:"col-12"},N4=je(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания.")],-1)),q4=je(()=>t("h6",{class:"text-center"},"Какой у Вас город?",-1)),W4={class:"input-style input-style-2"},Y4=ze('<datalist id="datalistCityOptions" data-v-a1775696><option value="Краснодар" data-v-a1775696></option><option value="Ростов-на-Дону" data-v-a1775696></option><option value="Таганрог" data-v-a1775696></option><option value="Донецк" data-v-a1775696></option><option value="Москва" data-v-a1775696></option></datalist>',1),H4={class:"col-12"},Q4={key:0},G4={class:"text-center"},K4={key:0,class:"input-style input-style-2"},J4=["type","onUpdate:modelValue","placeholder","pattern","required"],X4={key:1,class:"row mb-0"},Z4={class:"col-6 p-3"},e6=["onClick"],t6=je(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),s6=je(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),o6=[t6,s6],i6={class:"col-6 p-3"},n6=["onClick"],l6=je(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),a6=je(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),r6=[l6,a6],d6={class:"col-12"},c6=je(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),u6=je(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),_(".")],-1)),m6={class:"d-flex mb-3"},h6={class:"pt-1"},p6={"data-activate":"toggle-id-1",class:"font-500 font-13"},_6={key:0},f6={key:1},b6={class:"ml-auto mr-4 pr-2"},g6={class:"custom-control ios-switch"},y6=je(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),v6=["disabled"],$6={key:1,class:"card card-style p-3"},k6={class:"col-12 d-flex justify-content-center mb-3"},w6={class:"img-avatar"},F6={class:"img-avatar"},C6={class:"col-12"},P6=je(()=>t("p",{class:"mb-3"},[t("em",null,[_("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),_(" Я хочу поздравить Вас и дать возможность получать неограниченные преимушества нашего сервиса! Для начала нам нужно с Вами познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1)),S6=je(()=>t("h6",{class:"text-center"},"Как мне к Вам обращаться?",-1)),x6={class:"input-style input-style-2"},j6=je(()=>t("button",{class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Следующий шаг ",-1)),O6={class:"col-12 d-flex justify-content-center mb-3"},T6={class:"img-avatar"},U6={class:"img-avatar"},I6={class:"col-12"},V6={class:"mb-3"},M6=je(()=>t("h6",{class:"text-center"},"Введите свой номер телефона",-1)),A6={class:"input-style input-style-2"},E6=je(()=>t("button",{class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Следующий шаг ",-1)),D6={class:"col-12 d-flex justify-content-center mb-3"},z6={class:"img-avatar"},B6={class:"img-avatar"},L6={class:"col-12"},R6=je(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),N6=je(()=>t("h6",{class:"text-center"},"Ты мужчина или женщина?",-1)),q6={class:"row mb-0"},W6={class:"col-6 p-3"},Y6=je(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),H6=je(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),Q6=[Y6,H6],G6={class:"col-6 p-3"},K6=je(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),J6=je(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),X6=[K6,J6],Z6=je(()=>t("button",{class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Следующий шаг ",-1)),ex={class:"col-12 d-flex justify-content-center mb-3"},tx={class:"img-avatar"},sx={class:"img-avatar"},ox={class:"col-12"},ix=je(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания.")],-1)),nx=je(()=>t("h6",{class:"text-center"},"Какой у Вас город?",-1)),lx={class:"input-style input-style-2"},ax=ze('<datalist id="datalistCityOptions" data-v-a1775696><option value="Краснодар" data-v-a1775696></option><option value="Ростов-на-Дону" data-v-a1775696></option><option value="Таганрог" data-v-a1775696></option><option value="Донецк" data-v-a1775696></option><option value="Москва" data-v-a1775696></option></datalist>',1),rx=je(()=>t("button",{class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Следующий шаг ",-1)),dx={class:"col-12 d-flex justify-content-center mb-3"},cx={class:"img-avatar"},ux={class:"img-avatar"},mx={class:"col-12"},hx=je(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем продолжить, пожалуйста, прочитайте мои условия использования и дайте свое согласие на их принятие.")],-1)),px=je(()=>t("h6",{class:"text-center"},"Последний шаг",-1)),_x=je(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),_(".")],-1)),fx={class:"d-flex mb-3"},bx={class:"pt-1"},gx={"data-activate":"toggle-id-1",class:"font-500 font-13"},yx={key:0},vx={key:1},$x={class:"ml-auto mr-4 pr-2"},kx={class:"custom-control ios-switch"},wx=je(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),Fx=["disabled"],Cx={key:2,class:"card card-style p-3"},Px=je(()=>t("li",null,"Накопление CashBack за покупки",-1)),Sx=je(()=>t("li",null,"Оплата товаров через CashBak",-1)),xx=je(()=>t("li",null,"Реферальная программа",-1)),jx=je(()=>t("h6",null,"Ваши данные:",-1)),Ox={class:"mb-0"},Tx={class:"mb-0"},Ux={class:"mb-0"},Ix={class:"mb-0"},Vx={class:"mb-0"},Mx={key:0},Ax={key:1},Ex={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.loadCashBackModuleData()},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(s){const e={value:null};return this.botUser.fields&&this.botUser.fields.find(o=>o.bot_custom_field_setting_id===s)||e},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(s=>{(s.data||[]).forEach(o=>{if(o.is_active){let n=this.getUserFieldValue(o.id),i=n.value,r=n.config;this.vipForm.fields.push({id:o.id,title:o.label,description:o.description,key:o.key,value:o.type===2?i==="1":i,type:o.type,pattern:o.pattern,required:o.required,config:r})}})})},nextStep(){this.step++},loadCashBackModuleData(){this.loading=!0,this.$store.dispatch("loadCashBackModuleData").then(s=>{this.loading=!1,this.$nextTick(()=>{Object.keys(s).forEach(e=>{this.settings[e]=s[e]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveVip",{...this.vipForm}).then(s=>{this.loading=!1,this.tg.close()}).catch(()=>{this.loading=!1})}}},Dx=Object.assign(Ex,{__name:"Vip",setup(s){return(e,o)=>{const n=ie("lazy"),i=ie("mask");return l(),a(v,null,[e.botUser?(l(),a("div",h4,[!e.botUser.is_vip&&e.settings.display_type==0?(l(),a("div",p4,[t("form",{onSubmit:o[7]||(o[7]=W((...r)=>e.submit&&e.submit(...r),["prevent"])),class:"row mb-0"},[t("div",_4,[t("div",f4,[f(t("img",b4,null,512),[[n,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",g4,[y4,v4,t("div",$4,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":o[0]||(o[0]=r=>e.vipForm.name=r),"aria-describedby":"vipForm-name",required:""},null,512),[[k,e.vipForm.name]])])]),t("div",k4,[e.vipForm.name?(l(),a("p",w4,[t("em",null,[_("- Отлично, "),t("strong",null,p(e.vipForm.name),1),_("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])])):u("",!0),F4,t("div",C4,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[1]||(o[1]=r=>e.vipForm.phone=r),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[i,"+7(###)###-##-##"],[k,e.vipForm.phone]])])]),e.settings.need_sex?(l(),a("div",P4,[S4,x4,t("div",j4,[t("div",O4,[t("div",{class:C([{"bg-highlight":e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[2]||(o[2]=r=>e.vipForm.sex=!0)},I4,2)]),t("div",V4,[t("div",{class:C([{"bg-highlight ":!e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[3]||(o[3]=r=>e.vipForm.sex=!1)},E4,2)])])])):u("",!0),e.settings.need_birthday?(l(),a("div",D4,[z4,B4,t("div",L4,[f(t("input",{type:"date",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[4]||(o[4]=r=>e.vipForm.birthday=r),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[k,e.vipForm.birthday]])])])):u("",!0),e.settings.need_city?(l(),a("div",R4,[N4,q4,t("div",W4,[f(t("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=r=>e.vipForm.city=r),list:"datalistCityOptions",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Краснодар","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[k,e.vipForm.city]]),Y4])])):u("",!0),(l(!0),a(v,null,O(e.vipForm.fields,(r,d)=>(l(),a("div",H4,[e.settings[r.key]?(l(),a("div",Q4,[t("h6",G4,p(r.description),1),r.type===0||r.type===1?(l(),a("div",K4,[f(t("input",{type:r.type===1?"number":"text","onUpdate:modelValue":c=>e.vipForm.fields[d].value=c,class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:r.title,pattern:e.vipForm.fields[d].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:e.vipForm.fields[d].requried},null,8,J4),[[Wi,e.vipForm.fields[d].value]])])):u("",!0),r.type===2?(l(),a("div",X4,[t("div",Z4,[t("div",{class:C([{"bg-highlight":e.vipForm.fields[d].value},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:c=>e.vipForm.fields[d].value=!0},o6,10,e6)]),t("div",i6,[t("div",{class:C([{"bg-highlight ":!e.vipForm.fields[d].value},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:c=>e.vipForm.fields[d].value=!1},r6,10,n6)])])):u("",!0)])):u("",!0)]))),256)),t("div",d6,[c6,u6,t("div",m6,[t("div",h6,[t("h5",p6,[e.vipForm.sex?u("",!0):(l(),a("span",_6,"С правилами ознакомилась")),e.vipForm.sex?(l(),a("span",f6,"С правилами ознакомлен")):u("",!0)])]),t("div",b6,[t("div",g6,[f(t("input",{"onUpdate:modelValue":o[6]||(o[6]=r=>e.confirm=r),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[z,e.confirm]]),y6])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Отправить анкету ",8,v6)])],32)])):u("",!0),!e.botUser.is_vip&&e.settings.display_type==1?(l(),a("div",$6,[e.step===0?(l(),a("form",{key:0,onSubmit:o[9]||(o[9]=W((...r)=>e.nextStep&&e.nextStep(...r),["prevent"])),class:"row mb-0"},[t("div",k6,[t("div",w6,[f(t("img",F6,null,512),[[n,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",C6,[P6,S6,t("div",x6,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":o[8]||(o[8]=r=>e.vipForm.name=r),"aria-describedby":"vipForm-name",required:""},null,512),[[k,e.vipForm.name]])]),j6])],32)):u("",!0),e.step===1?(l(),a("form",{key:1,onSubmit:o[11]||(o[11]=W((...r)=>e.nextStep&&e.nextStep(...r),["prevent"])),class:"row mb-0"},[t("div",O6,[t("div",T6,[f(t("img",U6,null,512),[[n,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",I6,[t("p",V6,[t("em",null,[_("- Отлично, "),t("strong",null,p(e.vipForm.name),1),_("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])]),M6,t("div",A6,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[10]||(o[10]=r=>e.vipForm.phone=r),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[i,"+7(###)###-##-##"],[k,e.vipForm.phone]])]),E6])],32)):u("",!0),e.step===2?(l(),a("form",{key:2,onSubmit:o[14]||(o[14]=W((...r)=>e.nextStep&&e.nextStep(...r),["prevent"])),class:"row mb-0"},[t("div",D6,[t("div",z6,[f(t("img",B6,null,512),[[n,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",L6,[R6,N6,t("div",q6,[t("div",W6,[t("div",{class:C([{"bg-highlight":e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[12]||(o[12]=r=>e.vipForm.sex=!0)},Q6,2)]),t("div",G6,[t("div",{class:C([{"bg-highlight ":!e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[13]||(o[13]=r=>e.vipForm.sex=!1)},X6,2)])]),Z6])],32)):u("",!0),e.step===3?(l(),a("form",{key:3,onSubmit:o[16]||(o[16]=W((...r)=>e.nextStep&&e.nextStep(...r),["prevent"])),class:"row mb-0"},[t("div",ex,[t("div",tx,[f(t("img",sx,null,512),[[n,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",ox,[ix,nx,t("div",lx,[f(t("input",{type:"text","onUpdate:modelValue":o[15]||(o[15]=r=>e.vipForm.city=r),list:"datalistCityOptions",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Краснодар","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[k,e.vipForm.city]]),ax]),rx])],32)):u("",!0),e.step===4?(l(),a("form",{key:4,onSubmit:o[19]||(o[19]=W((...r)=>e.submit&&e.submit(...r),["prevent"])),class:"row mb-0"},[t("div",dx,[t("div",cx,[f(t("img",ux,null,512),[[n,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",mx,[hx,px,_x,t("div",fx,[t("div",bx,[t("h5",gx,[e.vipForm.sex?u("",!0):(l(),a("span",yx,"С правилами озакномилась")),e.vipForm.sex?(l(),a("span",vx,"С правилами ознакомлен")):u("",!0)])]),t("div",$x,[t("div",kx,[f(t("input",{"onUpdate:modelValue":o[17]||(o[17]=r=>e.confirm=r),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[z,e.confirm]]),wx])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Отправить анкету ",8,Fx),t("button",{type:"button",onClick:o[18]||(o[18]=r=>e.step=0),class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100 mb-2"}," Исправить ошибки ")])],32)):u("",!0)])):u("",!0),e.botUser.is_vip?(l(),a("div",Cx,[_(" Поздравляем! Вы являетесь нашим VIP-пользователем! Вам доступны следующие возможности: "),t("ul",null,[Px,Sx,xx,t("li",null,[jx,t("p",Ox,"Имя: "+p(e.botUser.name||"Не указано"),1),t("p",Tx,"Телефон: "+p(e.botUser.phone||"Не указано"),1),t("p",Ux,"Город: "+p(e.botUser.city||"Не указано"),1),t("p",Ix,"Пол: "+p(e.botUser.sex?"Мужской":"Женский"),1),(l(!0),a(v,null,O(e.vipForm.fields,r=>(l(),a("p",Vx,[_(p(r.title)+": ",1),r.config.type===2?(l(),a("span",Mx,p(r.value===!1?"Нет":"Да"),1)):u("",!0),r.config.type===0||r.config.type===1?(l(),a("span",Ax,p(r.value),1)):u("",!0)]))),256))])]),T(st,{class:"mb-2"})])):u("",!0)])):u("",!0),T(Gi)],64)}}}),ir=oe(Dx,[["__scopeId","data-v-a1775696"]]),zx=Object.freeze(Object.defineProperty({__proto__:null,default:ir},Symbol.toStringTag,{value:"Module"}));const Wt=s=>(Ge("data-v-ecffb0b9"),s=s(),Ke(),s),Bx={key:0},Lx={key:0,class:"card card-style p-3"},Rx={key:0,class:"col-12 d-flex justify-content-center mb-3"},Nx={class:"img-avatar"},qx={key:0,class:"img-avatar"},Wx={key:1},Yx={class:"col-12"},Hx=["innerHTML"],Qx={class:"input-style input-style-2"},Gx={key:1,class:"col-12"},Kx=["innerHTML"],Jx={class:"input-style input-style-2"},Xx={key:2,class:"col-12"},Zx=["innerHTML"],ej={class:"input-style input-style-2"},tj={key:3,class:"col-12"},sj=["innerHTML"],oj={class:"row mb-0"},ij={class:"col-6 p-3"},nj=Wt(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),lj=Wt(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),aj=[nj,lj],rj={class:"col-6 p-3"},dj=Wt(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),cj=Wt(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),uj=[dj,cj],mj={key:4,class:"col-12"},hj=["innerHTML"],pj={class:"input-style input-style-2"},_j={key:5,class:"col-12"},fj=["innerHTML"],bj={class:"input-style input-style-2"},gj={class:"col-12"},yj={key:0},vj={class:"text-center"},$j={key:0,class:"input-style input-style-2"},kj=["type","onUpdate:modelValue","placeholder","pattern","required"],wj={key:1,class:"row mb-0"},Fj={class:"col-6 p-3"},Cj=["onClick"],Pj=Wt(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),Sj=Wt(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),xj=[Pj,Sj],jj={class:"col-6 p-3"},Oj=["onClick"],Tj=Wt(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),Uj=Wt(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),Ij=[Tj,Uj],Vj={class:"col-12"},Mj=Wt(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),Aj=Wt(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),_(".")],-1)),Ej={class:"d-flex mb-3"},Dj={class:"pt-1"},zj={"data-activate":"toggle-id-1",class:"font-500 font-13"},Bj={key:0},Lj={key:1},Rj={class:"ml-auto mr-4 pr-2"},Nj={class:"custom-control ios-switch"},qj=Wt(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),Wj=["disabled"],Yj={key:1,class:"card card-style p-3"},Hj=["innerHTML"],Qj=Wt(()=>t("h6",null,"Ваши данные:",-1)),Gj={class:"mb-0"},Kj={key:0,class:"mb-0"},Jj={key:1,class:"mb-0"},Xj={key:2,class:"mb-0"},Zj={key:3,class:"mb-0"},eO={key:4,class:"mb-0"},tO={class:"mb-0"},sO={key:0},oO={key:1},iO={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0,need_phone:!0,need_email:!0,need_profile_form_image:!0,form_image:null,pre_birthday_text:null,pre_email_text:null,pre_age_text:null,pre_city_text:null,pre_sex_text:null,pre_name_text:null,pre_phone_text:null,text_after_submit:null},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.loadProfileFormData()},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(s){const e={value:null};return this.botUser.fields&&this.botUser.fields.find(o=>o.bot_custom_field_setting_id===s)||e},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(s=>{(s.data||[]).forEach(o=>{if(o.is_active){let n=this.getUserFieldValue(o.id),i=n.value,r=n.config;this.vipForm.fields.push({id:o.id,title:o.label,description:o.description,key:o.key,value:o.type===2?i==="1":i,type:o.type,pattern:o.pattern,required:o.required,config:r})}})})},loadProfileFormData(){this.loading=!0,this.$store.dispatch("loadProfileFormData").then(s=>{this.loading=!1,this.$nextTick(()=>{Object.keys(s).forEach(e=>{this.settings[e]=s[e]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveProfileFormData",{dataObject:this.vipForm}).then(s=>{this.loading=!1,this.tg.close()}).catch(()=>{this.loading=!1})}}},nO=Object.assign(iO,{__name:"ProfileForm",setup(s){return(e,o)=>{const n=ie("lazy"),i=ie("mask");return l(),a(v,null,[e.botUser?(l(),a("div",Bx,[e.botUser.is_vip?u("",!0):(l(),a("div",Lx,[t("form",{onSubmit:o[8]||(o[8]=W((...r)=>e.submit&&e.submit(...r),["prevent"])),class:"row mb-0"},[e.settings.need_profile_form_image?(l(),a("div",Rx,[t("div",Nx,[e.settings.form_image?f((l(),a("img",qx,null,512)),[[n,e.settings.form_image]]):f((l(),a("img",Wx,null,512)),[[n,"/images-by-bot-id/"+e.currentBot.id+"/"+e.currentBot.image]])])])):u("",!0),t("div",Yx,[e.settings.pre_name_text?(l(),a("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_name_text},null,8,Hx)):u("",!0),t("div",Qx,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":o[0]||(o[0]=r=>e.vipForm.name=r),"aria-describedby":"vipForm-name",required:""},null,512),[[k,e.vipForm.name]])])]),e.settings.need_phone?(l(),a("div",Gx,[e.settings.pre_phone_text?(l(),a("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_phone_text},null,8,Kx)):u("",!0),t("div",Jx,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[1]||(o[1]=r=>e.vipForm.phone=r),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[i,["+7(###)###-##-##"]],[k,e.vipForm.phone]])])])):u("",!0),e.settings.need_email?(l(),a("div",Xx,[e.settings.pre_email_text?(l(),a("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_email_text},null,8,Zx)):u("",!0),t("div",ej,[f(t("input",{type:"email",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[2]||(o[2]=r=>e.vipForm.email=r),placeholder:"example@test.com","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[k,e.vipForm.email]])])])):u("",!0),e.settings.need_sex?(l(),a("div",tj,[e.settings.pre_sex_text?(l(),a("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_sex_text},null,8,sj)):u("",!0),t("div",oj,[t("div",ij,[t("div",{class:C([{"bg-highlight":e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[3]||(o[3]=r=>e.vipForm.sex=!0)},aj,2)]),t("div",rj,[t("div",{class:C([{"bg-highlight ":!e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[4]||(o[4]=r=>e.vipForm.sex=!1)},uj,2)])])])):u("",!0),e.settings.need_birthday?(l(),a("div",mj,[e.settings.pre_birthday_text?(l(),a("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_birthday_text},null,8,hj)):u("",!0),t("div",pj,[f(t("input",{type:"date",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[5]||(o[5]=r=>e.vipForm.birthday=r),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[k,e.vipForm.birthday]])])])):u("",!0),e.settings.need_city?(l(),a("div",_j,[e.settings.pre_city_text?(l(),a("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_city_text},null,8,fj)):u("",!0),t("div",bj,[f(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=r=>e.vipForm.city=r),class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Ваш город","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[k,e.vipForm.city]])])])):u("",!0),(l(!0),a(v,null,O(e.vipForm.fields,(r,d)=>(l(),a("div",gj,[e.settings[r.key]?(l(),a("div",yj,[t("h6",vj,p(r.description),1),r.type===0||r.type===1?(l(),a("div",$j,[f(t("input",{type:r.type===1?"number":"text","onUpdate:modelValue":c=>e.vipForm.fields[d].value=c,class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:r.title,pattern:e.vipForm.fields[d].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:e.vipForm.fields[d].requried},null,8,kj),[[Wi,e.vipForm.fields[d].value]])])):u("",!0),r.type===2?(l(),a("div",wj,[t("div",Fj,[t("div",{class:C([{"bg-highlight":e.vipForm.fields[d].value},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:c=>e.vipForm.fields[d].value=!0},xj,10,Cj)]),t("div",jj,[t("div",{class:C([{"bg-highlight ":!e.vipForm.fields[d].value},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:c=>e.vipForm.fields[d].value=!1},Ij,10,Oj)])])):u("",!0)])):u("",!0)]))),256)),t("div",Vj,[Mj,Aj,t("div",Ej,[t("div",Dj,[t("h5",zj,[e.vipForm.sex?u("",!0):(l(),a("span",Bj,"С правилами ознакомилась")),e.vipForm.sex?(l(),a("span",Lj,"С правилами ознакомлен")):u("",!0)])]),t("div",Rj,[t("div",Nj,[f(t("input",{"onUpdate:modelValue":o[7]||(o[7]=r=>e.confirm=r),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[z,e.confirm]]),qj])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Отправить анкету ",8,Wj)])],32)])),e.botUser.is_vip?(l(),a("div",Yj,[t("p",{innerHTML:e.settings.text_after_submit},null,8,Hj),Qj,t("p",Gj,"Имя: "+p(e.botUser.name||"Не указано"),1),e.settings.need_phone?(l(),a("p",Kj,"Телефон: "+p(e.botUser.phone||"Не указано"),1)):u("",!0),e.settings.need_email?(l(),a("p",Jj,"Email: "+p(e.botUser.email||"Не указано"),1)):u("",!0),e.settings.need_city?(l(),a("p",Xj,"Город: "+p(e.botUser.city||"Не указано"),1)):u("",!0),e.settings.need_birthday?(l(),a("p",Zj,"Дата рождения: "+p(e.botUser.birthday||"Не указано"),1)):u("",!0),e.settings.need_sex?(l(),a("p",eO,"Пол: "+p(e.botUser.sex?"Мужской":"Женский"),1)):u("",!0),(l(!0),a(v,null,O(e.vipForm.fields,r=>(l(),a("p",tO,[_(p(r.title)+": ",1),r.config.type===2?(l(),a("span",sO,p(r.value===!1?"Нет":"Да"),1)):u("",!0),r.config.type===0||r.config.type===1?(l(),a("span",oO,p(r.value),1)):u("",!0)]))),256)),T(st,{class:"mb-2"})])):u("",!0)])):u("",!0),T(Gi)],64)}}}),nr=oe(nO,[["__scopeId","data-v-ecffb0b9"]]),lO=Object.freeze(Object.defineProperty({__proto__:null,default:nr},Symbol.toStringTag,{value:"Module"})),aO=ze('<div class="card card-style bg-25 mb-3" data-card-height="200" style="height:200px;"><div class="card-center"><p class="text-center mb-2"><i class="fa-brands fa-shopify color-red2-dark fa-4x"></i></p><h2 class="color-white font-700 text-center mb-0">Категории товара</h2><p class="color-white text-center opacity-60 mt-n1 mb-3">Список доступных в магазине категорий</p></div><div class="card-overlay bg-black opacity-80"></div></div>',1),rO={},lr=Object.assign(rO,{__name:"Categories",setup(s){return(e,o)=>(l(),a(v,null,[aO,T(Hi,{size:"10"})],64))}}),dO=Object.freeze(Object.defineProperty({__proto__:null,default:lr},Symbol.toStringTag,{value:"Module"}));const cO={class:"search-box bg-theme rounded-xs shadow-xs bottom-0 mb-2"},uO=t("i",{class:"fa fa-search"},null,-1),mO={key:0,class:"list-group w-100"},hO={class:"list-group-item cursor-pointer page-menu-item btn btn-outline-info mb-3"},pO={class:"d-flex justify-content-between align-items-center"},_O=["onClick"],fO={key:0},bO={key:1},gO=t("i",{class:"fa-solid fa-lock"},null,-1),yO=[gO],vO=["onClick"],$O=t("i",{class:"fa-solid fa-ellipsis"},null,-1),kO=[$O],wO={key:2,class:"alert alert-warning",role:"alert"},FO={props:["current","editor"],data(){return{bot:null,loading:!0,pages:[],search:null,pages_paginate_object:null,need_new_page:!1}},computed:{...G(["getPages","getPagesPaginateObject"])},mounted(){this.loadPages(),window.addEventListener("reload-page-list",s=>{this.loadPages()})},methods:{openPageMenuModal(s){this.$botPages.open(s)},selectPage(s){this.$emit("callback",s),this.$botNotification.notification("Страницы","Вы выбрали страницу из списка! Все остальные действия будут производится для этой страницы")},nextPages(s){this.loadPages(s)},loadPages(s=0){this.loading=!0,this.$store.dispatch("loadPages",{dataObject:{search:this.search},page:s}).then(e=>{this.loading=!1,this.pages=this.getPages,this.pages_paginate_object=this.getPagesPaginateObject}).catch(()=>{this.loading=!1})}}},Ki=Object.assign(FO,{__name:"PagesList",setup(s){return(e,o)=>(l(),a(v,null,[t("div",cO,[uO,f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"border-0",placeholder:"Поиск страницы"},null,512),[[k,e.search]])]),t("button",{class:"bg-highlight btn btn-m font-900 text-uppercase btn-center-xl mb-3 w-100",onClick:o[1]||(o[1]=(...n)=>e.loadPages&&e.loadPages(...n)),type:"button",id:"button-addon2"},"Найти "),e.pages.length>0?(l(),a("ul",mO,[(l(!0),a(v,null,O(e.pages,(n,i)=>(l(),a("li",hO,[t("div",pO,[t("strong",{onClick:r=>e.selectPage(n),class:"font-12"},[_("#"+p(n.id||"Не указано")+" ",1),n.slug?(l(),a("span",fO,p(n.slug.command||"Не указано"),1)):u("",!0),s.current&&s.current===n.id?(l(),a("span",bO,yO)):u("",!0)],8,_O),s.editor?(l(),a("button",{key:0,class:"btn",type:"button",onClick:r=>e.openPageMenuModal(n.id),"aria-expanded":"false"},kO,8,vO)):u("",!0)])]))),256))])):u("",!0),e.pages_paginate_object?(l(),M(Ce,{key:1,simple:!0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):(l(),a("div",wO," Созданных страниц не найдено! "))],64))}}),CO={props:["botUser"],data(){return{isEdit:!1,messages:[],botUserForm:{id:null,is_vip:!1,is_admin:!1,is_work:!1,is_manager:!1,is_deliveryman:!1,user_in_location:!1,name:null,phone:null,email:null,birthday:null,age:null,city:null,country:null,address:null,sex:null,is_blocked:null,blocked_message:null}}},watch:{isEdit:function(){this.botUserForm.id=this.botUser.id,this.botUserForm.is_vip=this.botUser.is_vip,this.botUserForm.is_admin=this.botUser.is_admin,this.botUserForm.is_work=this.botUser.is_work,this.botUserForm.is_manager=this.botUser.is_manager,this.botUserForm.is_deliveryman=this.botUser.is_deliveryman,this.botUserForm.user_in_location=this.botUser.user_in_location,this.botUserForm.name=this.botUser.name||this.botUser.username||this.botUser.id,this.botUserForm.phone=this.botUser.phone,this.botUserForm.email=this.botUser.email,this.botUserForm.birthday=this.botUser.birthday||null,this.botUserForm.city=this.botUser.city||null,this.botUserForm.country=this.botUser.country||null,this.botUserForm.address=this.botUser.address||null,this.botUserForm.sex=this.botUser.sex||!1,this.botUserForm.is_blocked=this.botUser.blocked_at!=null,this.botUserForm.blocked_message=this.botUser.blocked_message||null}},methods:{alert(s){this.messages.push(s)},removeMessage(s){this.messages.splice(s,1)},submit(){this.$store.dispatch("updateBotUser",{botUserForm:this.botUserForm}).then(()=>{this.isEdit=!1,this.messages=[],this.botUserForm={id:null,is_vip:!1,is_admin:!1,is_work:!1,is_manager:!1,is_deliveryman:!1,user_in_location:!1,name:null,phone:null,email:null,birthday:null,age:null,city:null,country:null,address:null,sex:null,is_blocked:!1},this.$emit("update"),this.$botNotification.notification("Редактирование данных","Данные успешно обновлены!")}).catch(()=>{this.$botNotification.warning("Редактирование данных","Ошибка обновления данных")})}}},PO={key:0},SO=t("i",{class:"fa-solid fa-user-pen mr-2"},null,-1),xO={key:1},jO=t("i",{class:"fa-solid fa-chevron-up mr-2"},null,-1),OO={key:0,class:"table table-borderless rounded-sm shadow-l",style:{overflow:"hidden"}},TO=t("thead",null,[t("tr",{class:"bg-gray1-dark"},[t("th",{scope:"col",class:"color-theme"},"Ключ"),t("th",{scope:"col",class:"color-theme"},"Значение")])],-1),UO=t("th",{scope:"row"},"ID в системе",-1),IO={class:"font-weight-bold"},VO=t("th",{scope:"row"},"Дата регистрации",-1),MO={class:"font-weight-bold"},AO=t("th",{scope:"row"},"Телеграм ID",-1),EO={class:"font-weight-bold"},DO=t("th",{scope:"row"},"Имя",-1),zO={class:"font-weight-bold"},BO=t("th",{scope:"row"},"Имя из телеграмма",-1),LO={class:"font-weight-bold"},RO=t("th",{scope:"row"},"Домен пользователя",-1),NO={class:"font-weight-bold"},qO=t("th",{scope:"row"},"Номер телефона",-1),WO={class:"font-weight-bold"},YO=t("th",{scope:"row"},"Возраст",-1),HO={class:"font-weight-bold"},QO=t("th",{scope:"row"},"Пол",-1),GO={class:"font-weight-bold"},KO=t("th",{scope:"row"},"Страна",-1),JO={class:"font-weight-bold"},XO=t("th",{scope:"row"},"Город",-1),ZO={class:"font-weight-bold"},e8=t("th",{scope:"row"},"Адрес",-1),t8={class:"font-weight-bold"},s8=t("th",{scope:"row"},"VIP",-1),o8={class:"font-weight-bold"},i8=t("th",{scope:"row"},"Администратор",-1),n8={class:"font-weight-bold"},l8=t("th",{scope:"row"},"Доставщик",-1),a8={class:"font-weight-bold"},r8=t("th",{scope:"row"},"На работе",-1),d8={class:"font-weight-bold"},c8=t("th",{scope:"row"},"В заведении",-1),u8={class:"font-weight-bold"},m8={key:0},h8=t("th",{scope:"row"},"Пользователь заблокирован",-1),p8={class:"font-weight-bold"},_8={class:"mb-0"},f8={class:"mb-0"},b8={class:"form-group mb-2"},g8=t("label",{for:""},"Ф.И.О пользователя",-1),y8={class:"form-group mb-2"},v8=t("label",{for:""},"Телефон",-1),$8={class:"form-group mb-2"},k8=t("label",{for:""},"Почта",-1),w8={class:"form-group mb-2"},F8=t("label",{for:""},"Адрес",-1),C8={class:"form-group mb-2"},P8=t("label",{for:""},"Дата рождения",-1),S8={class:"form-group mb-2"},x8=t("label",{for:""},"Страна",-1),j8={class:"form-group mb-2"},O8=t("label",{for:""},"Город",-1),T8={class:"row mb-0"},U8=t("p",{class:"col-12 mb-0"},"Администратор",-1),I8={class:"col-6"},V8=t("i",{class:"fa-solid fa-check mr-1"},null,-1),M8={class:"col-6"},A8=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),E8={class:"row mb-0"},D8=t("p",{class:"col-12 mb-0"},"VIP",-1),z8={class:"col-6"},B8=t("i",{class:"fa-solid fa-check mr-1"},null,-1),L8={class:"col-6"},R8=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),N8={class:"row mb-0"},q8=t("p",{class:"col-12 mb-0"},"Доставщик",-1),W8={class:"col-6"},Y8=t("i",{class:"fa-solid fa-check mr-1"},null,-1),H8={class:"col-6"},Q8=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),G8={class:"row mb-0"},K8=t("p",{class:"col-12 mb-0"},"Менеджер",-1),J8={class:"col-6"},X8=t("i",{class:"fa-solid fa-check mr-1"},null,-1),Z8={class:"col-6"},eT=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),tT={class:"row mb-0"},sT=t("p",{class:"col-12 mb-0"},"Работает",-1),oT={class:"col-6"},iT=t("i",{class:"fa-solid fa-check mr-1"},null,-1),nT={class:"col-6"},lT=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),aT={class:"row mb-0"},rT=t("p",{class:"col-12 mb-0"},"В заведении",-1),dT={class:"col-6"},cT=t("i",{class:"fa-solid fa-check mr-1"},null,-1),uT={class:"col-6"},mT=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),hT={class:"row mb-0"},pT=t("p",{class:"col-12 mb-0"},"Заблокирован",-1),_T={class:"col-6"},fT=t("i",{class:"fa-solid fa-check mr-1"},null,-1),bT={class:"col-6"},gT=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),yT={key:0,class:"col-12"},vT=t("label",{for:""},"Сообщение блокировки",-1),$T={class:"row mb-0"},kT=t("p",{class:"col-12 mb-0"},"Пол",-1),wT={class:"col-6"},FT=t("i",{class:"fa-solid fa-mars mr-1"},null,-1),CT={class:"col-6"},PT=t("i",{class:"fa-solid fa-venus mr-1"},null,-1),ST={class:"alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},xT={class:"custom-alert-text"},jT=["onClick"],OT=t("button",{type:"submit",class:"btn btn-m btn-full mt-2 mb-1 rounded-s text-uppercase font-900 shadow-s bg-green2-dark w-100"}," Сохранить ",-1),TT=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1);function UT(s,e,o,n,i,r){const d=ie("mask");return l(),a(v,null,[t("a",{href:"javascript:void(0)",onClick:e[0]||(e[0]=c=>i.isEdit=!i.isEdit),class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-brown2-dark"},[i.isEdit?(l(),a("span",xO,[jO,_(" Завершить редактирование")])):(l(),a("span",PO,[SO,_(" Редактировать пользователя")]))]),i.isEdit?u("",!0):(l(),a("table",OO,[TO,t("tbody",null,[t("tr",null,[UO,t("td",IO,p(o.botUser.id||"Не указано"),1)]),t("tr",null,[VO,t("td",MO,p(s.$filters.current(o.botUser.created_at)),1)]),t("tr",null,[AO,t("td",EO,p(o.botUser.telegram_chat_id||"Не указано"),1)]),t("tr",{class:C({"bg-red1-light":o.botUser.name==null})},[DO,t("td",zO,p(o.botUser.name||"Не указано"),1)],2),t("tr",null,[BO,t("td",LO,p(o.botUser.fio_from_telegram||"Не указано"),1)]),t("tr",null,[RO,t("td",NO,p(o.botUser.username||"Не указано"),1)]),t("tr",{class:C({"bg-red1-light":o.botUser.phone==null})},[qO,t("td",WO,p(o.botUser.phone||"Не указано"),1)],2),t("tr",{class:C({"bg-red1-light":o.botUser.age==null})},[YO,t("td",HO,p(o.botUser.age||"Не указано"),1)],2),t("tr",null,[QO,t("td",GO,p(o.botUser.sex?"Мужчина":"Женщина"),1)]),t("tr",{class:C({"bg-red1-light":o.botUser.country==null})},[KO,t("td",JO,p(o.botUser.country||"Не указано"),1)],2),t("tr",{class:C({"bg-red1-light":o.botUser.city==null})},[XO,t("td",ZO,p(o.botUser.city||"Не указано"),1)],2),t("tr",{class:C({"bg-red1-light":o.botUser.address==null})},[e8,t("td",t8,p(o.botUser.address||"Не указано"),1)],2),t("tr",null,[s8,t("td",o8,p(o.botUser.is_vip?"Да":"Нет"),1)]),t("tr",null,[i8,t("td",n8,p(o.botUser.is_admin?"Да":"Нет"),1)]),t("tr",null,[l8,t("td",a8,p(o.botUser.is_deliveryman?"Да":"Нет"),1)]),t("tr",null,[r8,t("td",d8,p(o.botUser.is_work?"Да":"Нет"),1)]),t("tr",null,[c8,t("td",u8,p(o.botUser.user_in_location?"Да":"Нет"),1)]),o.botUser.blocked_at?(l(),a("tr",m8,[h8,t("td",p8,[t("p",_8,p(s.$filters.current(o.botUser.blocked_at)),1),t("p",f8,[t("em",null,p(o.botUser.blocked_message??"Без сообщения"),1)])])])):u("",!0)])])),i.isEdit?(l(),a("form",{key:1,onSubmit:e[27]||(e[27]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[t("div",b8,[g8,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=c=>i.botUserForm.name=c),onInvalid:e[2]||(e[2]=c=>r.alert("Вы не указали имя!")),placeholder:"Иванов Иван Иванович",required:""},null,544),[[k,i.botUserForm.name]])]),t("div",y8,[v8,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=c=>i.botUserForm.phone=c),onInvalid:e[4]||(e[4]=c=>r.alert("Вы не указали телефон!")),placeholder:"+7(XXX) XXX-XX-XX",required:""},null,544),[[k,i.botUserForm.phone],[d,"+7(###)###-##-##"]])]),t("div",$8,[k8,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=c=>i.botUserForm.email=c),placeholder:"example@gmail.com"},null,512),[[k,i.botUserForm.email]])]),t("div",w8,[F8,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=c=>i.botUserForm.address=c),placeholder:"ул. Петрова, 123, кв 45"},null,512),[[k,i.botUserForm.address]])]),t("div",C8,[P8,f(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=c=>i.botUserForm.birthday=c),placeholder:"12/01/2023"},null,512),[[k,i.botUserForm.birthday]])]),t("div",S8,[x8,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=c=>i.botUserForm.country=c),placeholder:"Россия"},null,512),[[k,i.botUserForm.country]])]),t("div",j8,[O8,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=c=>i.botUserForm.city=c),placeholder:"Краснодар"},null,512),[[k,i.botUserForm.city]])]),t("div",T8,[U8,t("div",I8,[t("button",{type:"button",onClick:e[10]||(e[10]=c=>i.botUserForm.is_admin=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.is_admin,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.is_admin},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[V8,_(" Да ")],2)]),t("div",M8,[t("button",{type:"button",onClick:e[11]||(e[11]=c=>i.botUserForm.is_admin=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.is_admin,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.is_admin},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[A8,_(" Нет ")],2)])]),t("div",E8,[D8,t("div",z8,[t("button",{type:"button",onClick:e[12]||(e[12]=c=>i.botUserForm.is_vip=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.is_vip,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.is_vip},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[B8,_(" Да ")],2)]),t("div",L8,[t("button",{type:"button",onClick:e[13]||(e[13]=c=>i.botUserForm.is_vip=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.is_vip,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.is_vip},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[R8,_(" Нет ")],2)])]),t("div",N8,[q8,t("div",W8,[t("button",{type:"button",onClick:e[14]||(e[14]=c=>i.botUserForm.is_deliveryman=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.is_deliveryman,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.is_deliveryman},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[Y8,_(" Да ")],2)]),t("div",H8,[t("button",{type:"button",onClick:e[15]||(e[15]=c=>i.botUserForm.is_deliveryman=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.is_deliveryman,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.is_deliveryman},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[Q8,_(" Нет ")],2)])]),t("div",G8,[K8,t("div",J8,[t("button",{type:"button",onClick:e[16]||(e[16]=c=>i.botUserForm.is_manager=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.is_manager,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.is_manager},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[X8,_(" Да ")],2)]),t("div",Z8,[t("button",{type:"button",onClick:e[17]||(e[17]=c=>i.botUserForm.is_manager=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.is_manager,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.is_manager},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[eT,_(" Нет ")],2)])]),t("div",tT,[sT,t("div",oT,[t("button",{type:"button",onClick:e[18]||(e[18]=c=>i.botUserForm.is_work=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.is_work,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.is_work},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[iT,_(" Да ")],2)]),t("div",nT,[t("button",{type:"button",onClick:e[19]||(e[19]=c=>i.botUserForm.is_work=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.is_work,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.is_work},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[lT,_(" Нет ")],2)])]),t("div",aT,[rT,t("div",dT,[t("button",{type:"button",onClick:e[20]||(e[20]=c=>i.botUserForm.user_in_location=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.user_in_location,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.user_in_location},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[cT,_(" Да ")],2)]),t("div",uT,[t("button",{type:"button",onClick:e[21]||(e[21]=c=>i.botUserForm.user_in_location=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.user_in_location,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.user_in_location},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[mT,_(" Нет ")],2)])]),t("div",hT,[pT,t("div",_T,[t("button",{type:"button",onClick:e[22]||(e[22]=c=>i.botUserForm.is_blocked=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.is_blocked,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.is_blocked},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[fT,_(" Да ")],2)]),t("div",bT,[t("button",{type:"button",onClick:e[23]||(e[23]=c=>i.botUserForm.is_blocked=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.is_blocked,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.is_blocked},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[gT,_(" Нет ")],2)]),i.botUserForm.is_blocked?(l(),a("div",yT,[vT,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[24]||(e[24]=c=>i.botUserForm.blocked_message=c),placeholder:"Увы и ах.. "},null,512),[[k,i.botUserForm.blocked_message]])])):u("",!0)]),t("div",$T,[kT,t("div",wT,[t("button",{type:"button",onClick:e[25]||(e[25]=c=>i.botUserForm.sex=!0),class:C([{"bg-blue1-dark text-white":i.botUserForm.sex,"bg-theme border-green1-dark color-green1-dark":!i.botUserForm.sex},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[FT,_(" Муж ")],2)]),t("div",CT,[t("button",{type:"button",onClick:e[26]||(e[26]=c=>i.botUserForm.sex=!1),class:C([{"bg-blue1-dark text-white":!i.botUserForm.sex,"bg-theme border-green1-dark color-green1-dark":i.botUserForm.sex},"w-100 btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900"])},[PT,_(" Жен ")],2)])]),i.messages.length>0?(l(!0),a(v,{key:0},O(i.messages,(c,h)=>(l(),a("div",ST,[t("p",xT,p(c||"Ошибка"),1),t("button",{type:"button",onClick:g=>r.removeMessage(h),class:"close color-white opacity-60 font-16"},"× ",8,jT)]))),256)):u("",!0),OT,TT],32)):u("",!0)],64)}const Ji=oe(CO,[["render",UT]]),IT={class:"card card-style bg-theme pb-0"},VT={class:"content"},MT=t("p",{class:"mb-0"},"Введите номер телефона (или фрагмент) пользователя или его Ф.И.О.",-1),AT={class:"search-box bg-theme rounded-s shadow-xl bottom-0"},ET=t("i",{class:"fa fa-search"},null,-1),DT={class:"d-flex w-100",style:{height:"70px","overflow-x":"scroll","min-width":"100%"}},zT={class:"scroll d-flex",style:{"min-width":"1000px"}},BT={class:"fac fac-checkbox py-2 my-2"},LT=t("span",null,null,-1),RT=t("label",{for:"need-admins-checkbox"},"Только администраторы",-1),NT={class:"fac fac-checkbox py-2 my-2"},qT=t("span",null,null,-1),WT=t("label",{for:"need-with-phone-checkbox"},"Только с телефоном",-1),YT={class:"fac fac-checkbox py-2 my-2"},HT=t("span",null,null,-1),QT=t("label",{for:"need-deliveryman"},"Только доставщики",-1),GT={class:"fac fac-checkbox py-2 my-2"},KT=t("span",null,null,-1),JT=t("label",{for:"need-without-phone-checkbox"},"Только без телефоном",-1),XT={class:"fac fac-checkbox py-2 my-2"},ZT=t("span",null,null,-1),eU=t("label",{for:"need-vip-checkbox"},"Только вип",-1),tU={class:"fac fac-checkbox py-2 my-2"},sU=t("span",null,null,-1),oU=t("label",{for:"need-not-vip-checkbox"},"Только не вип",-1),iU=t("button",{type:"submit",class:"btn btn-m btn-full my-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"},[t("i",{class:"fa-solid fa-magnifying-glass mr-1"}),_("Искать ")],-1),nU={key:0,class:"card card-style mx-0 mt-3 pt-2 pb-0 mb-2"},lU={class:"w-100 text-center p-2 mb-0"},aU={class:"list-group list-custom-large"},rU=["onClick"],dU={key:0,class:"fa-solid fa-a color-red2-dark"},cU={key:1,class:"fa-solid fa-u color-green2-dark"},uU=t("i",{class:"fa fa-angle-right mr-2"},null,-1),mU=t("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),hU=t("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),pU={data(){return{loading:!0,users:null,search:null,need_admins:!1,need_vip:!1,need_not_vip:!1,need_with_phone:!1,need_without_phone:!1,need_deliveryman:!1,users_paginate_object:null}},computed:{...G(["getUsers","getUsersPaginateObject"])},mounted(){this.loadUsers(0)},methods:{downloadBotUsers(){this.$botNotification.notification("Внимание!","Начался формироваться документ статистики!"),this.$store.dispatch("downloadBotUsers").then(s=>{this.$botNotification.success("Отлично!","Документ успешно сформирован")}).catch(()=>{this.$botNotification.warning("Упс...","Что-то пошло не так...")})},downloadCashBackHistory(){this.$botNotification.notification("Внимание!","Начался формироваться документ статистики!"),this.$store.dispatch("downloadCashBackHistory").then(s=>{this.$botNotification.success("Отлично!","Документ успешно сформирован")}).catch(()=>{this.$botNotification.warning("Упс...","Что-то пошло не так...")})},nextUsers(s){this.loadUsers(s)},selectUser(s){this.$emit("select",s)},loadUsers(s=0){this.loading=!0,this.$store.dispatch("loadUsers",{dataObject:{search:this.search,need_admins:this.need_admins,need_vip:this.need_vip,need_not_vip:this.need_not_vip,need_deliveryman:this.need_deliveryman,need_with_phone:this.need_with_phone,need_without_phone:this.need_without_phone},page:s}).then(e=>{this.loading=!1,this.users=this.getUsers,this.users_paginate_object=this.getUsersPaginateObject}).catch(()=>{this.loading=!1})}}},_U=Object.assign(pU,{__name:"UserSearchForm",setup(s){return(e,o)=>(l(),a("div",IT,[t("div",VT,[MT,t("form",{onSubmit:o[7]||(o[7]=W(n=>e.loadUsers(0),["prevent"]))},[t("div",AT,[ET,f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"border-0",placeholder:"Кого ищем?"},null,512),[[k,e.search]])]),t("div",DT,[t("div",zT,[t("div",BT,[LT,f(t("input",{id:"need-admins-checkbox","onUpdate:modelValue":o[1]||(o[1]=n=>e.need_admins=n),value:"false",type:"checkbox"},null,512),[[z,e.need_admins]]),RT]),t("div",NT,[qT,f(t("input",{id:"need-with-phone-checkbox","onUpdate:modelValue":o[2]||(o[2]=n=>e.need_with_phone=n),value:"false",type:"checkbox"},null,512),[[z,e.need_with_phone]]),WT]),t("div",YT,[HT,f(t("input",{id:"need-deliveryman","onUpdate:modelValue":o[3]||(o[3]=n=>e.need_deliveryman=n),value:"false",type:"checkbox"},null,512),[[z,e.need_deliveryman]]),QT]),t("div",GT,[KT,f(t("input",{id:"need-without-phone-checkbox","onUpdate:modelValue":o[4]||(o[4]=n=>e.need_without_phone=n),value:"false",type:"checkbox"},null,512),[[z,e.need_without_phone]]),JT]),t("div",XT,[ZT,f(t("input",{id:"need-vip-checkbox","onUpdate:modelValue":o[5]||(o[5]=n=>e.need_vip=n),value:"false",type:"checkbox"},null,512),[[z,e.need_vip]]),eU]),t("div",tU,[sU,f(t("input",{id:"need-not-vip-checkbox","onUpdate:modelValue":o[6]||(o[6]=n=>e.need_not_vip=n),value:"false",type:"checkbox"},null,512),[[z,e.need_not_vip]]),oU])])]),iU],32),e.users?(l(),a("div",nU,[t("small",lU,"Найдено "+p(e.users_paginate_object.meta.total),1),t("div",aU,[(l(!0),a(v,null,O(e.users,(n,i)=>(l(),a("a",{href:"javascript:void(0)",onClick:r=>e.selectUser(n)},[n.is_admin?(l(),a("i",dU)):(l(),a("i",cU)),t("span",null,p(n.name||n.fio_from_telegram||"Не указано"),1),t("strong",null,p(n.phone||"Телефон не указан"),1),uU],8,rU))),256))]),e.users_paginate_object?(l(),M(Ce,{key:0,simple:!0,class:"mt-4",onPagination_page:e.nextUsers,pagination:e.users_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[8]||(o[8]=(...n)=>e.downloadBotUsers&&e.downloadBotUsers(...n)),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-blue1-dark color-blue1-dark bg-theme"},[mU,_(" Скачать список пользователей ")]),t("a",{href:"javascript:void(0)",onClick:o[9]||(o[9]=(...n)=>e.downloadCashBackHistory&&e.downloadCashBackHistory(...n)),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-blue1-dark color-blue1-dark bg-theme"},[hU,_(" Скачать историю CashBack ")]),T(st,{class:"mt-3"})])]))}}),fU={key:1,id:"user-profile-info"},bU={class:"card card-style bg-theme pb-0"},gU={class:"content mb-0"},yU={class:"tab-controls mb-5 tabs-round tab-animated tabs-medium tabs-rounded shadow-xl"},vU=t("i",{class:"fa fa-heart"},null,-1),$U=t("i",{class:"fa fa-star"},null,-1),kU={key:0},wU=t("h3",null,"Информация о пользователе",-1),FU=t("p",{class:"mb-2"}," Ваша персональная информация ",-1),CU={key:1},PU={key:0,class:"list-group list-boxes w-100"},SU=["onClick"],xU={key:0,class:"color-green2-dark"},jU={key:1,class:"color-red1-dark"},OU={key:2,class:"fa fa-circle-up color-green2-dark"},TU={key:3,class:"fa-regular fa-circle-down color-red1-dark"},UU={key:1},IU=t("div",{class:"divider-icon divider-margins bg-blue2-dark my-4"},[t("i",{class:"fa font-17 color-blue2-dark fa-cog bg-white"})],-1),VU={key:0,class:"content mt-0"},MU={class:"mb-3"},AU={class:"mb-3"},EU=t("label",{for:"bill-info",class:"form-label"},"Написать сообщение",-1),DU={class:"custom-control ios-switch ios-switch-icon my-3"},zU={key:0,class:"custom-control-label pl-5",for:"toggle-need-pickup"},BU={key:1,class:"custom-control-label pl-5",for:"toggle-need-pickup"},LU=t("i",{class:"fa-solid fa-font font-11 color-white",style:{left:"8px"}},null,-1),RU=t("i",{class:"fa-solid fa-photo-film font-11 color-white",style:{"margin-left":"24px"}},null,-1),NU={key:0,class:"mb-3"},qU={class:"mb-3"},WU=["disabled"],YU={class:"mb-3"},HU=t("label",{for:"bill-info",class:"form-label"},"Комментарий",-1),QU={class:"mb-3"},GU=["disabled"],KU={class:"mb-3"},JU=t("label",{for:"bill-info",class:"form-label"},"Комментарий",-1),XU={class:"mb-3"},ZU=["disabled"],e7={class:"mb-3"},t7=t("label",{for:"bill-amount",class:"form-label"},"Значение на оплату, руб",-1),s7={class:"mb-3"},o7=t("label",{for:"bill-info",class:"form-label"},"Введите сообщение для пользователя",-1),i7={class:"mb-3"},n7=["disabled"],l7={class:"mb-2"},a7={key:1},r7=t("h6",null,"В боте поддерживается списание CashBack по категориям",-1),d7=t("option",{selected:""},"Общий CashBack",-1),c7=["value"],u7={class:"mb-3"},m7=t("label",{for:"bill-amount",class:"form-label"},"Сумма списания CashBack, руб",-1),h7={class:"mb-3"},p7=t("label",{for:"bill-info",class:"form-label"},"Причина списания",-1),_7={class:"mb-3"},f7=["disabled"],b7={class:"mb-2"},g7={class:"mb-2"},y7={key:1},v7=t("h6",null,"В боте поддерживается начисление CashBack по категориям",-1),$7=t("option",{selected:""},"Общий CashBack",-1),k7=["value"],w7=t("em",null,"Начисления по реферальной системе происходя только для общего CashBack-а. CashBack-по категориям не суммируется с общим и отображается пользователю отдельно.",-1),F7={class:"form-check mb-3"},C7=t("label",{class:"form-check-label",for:"need_custom_cashback_amount"}," Нужен нестандартный % CashBack ",-1),P7={key:2,class:"mb-3"},S7=t("label",{for:"bill-percent",class:"form-label"},"% CashBack-а",-1),x7={class:"mb-3"},j7=t("label",{for:"bill-amount",class:"form-label"},"Сумма в чеке, руб",-1),O7={class:"mb-3"},T7=t("label",{for:"bill-info",class:"form-label"},"Информация о чеке, номер",-1),U7={class:"mb-3"},I7=["disabled"],V7={class:"form-check form-switch my-2"},M7=t("label",{class:"form-check-label",for:"switchCheckDefault"}," Тихий режим (не оповещать пользователя о смене статуса) ",-1),A7={class:"mb-3"},E7=t("label",{for:"bill-info",class:"form-label"},"Причина добавления администратора",-1),D7={class:"mb-3"},z7=["disabled"],B7={class:"mb-3"},L7=t("label",{for:"bill-info",class:"form-label"},"Причина разжалования администратора",-1),R7={class:"mb-3"},N7=["disabled"],q7={class:"mb-3"},W7=t("label",{for:"bill-info",class:"form-label"},"Комментарий",-1),Y7=t("h6",null,"Список доступных страниц:",-1),H7={key:0,class:"mb-2"},Q7={class:"mb-3"},G7=["disabled"],K7={data(){return{botUser:null,statistic:null,loading:!1,reloadUsers:!1,tab:0,section:0,cashback:[],referrals:[],request_telegram_chat_id:null,cashback_paginate_object:null,referrals_paginate_object:null,invoiceForm:{amount:100,info:null},userDataForm:{info:null},locationForm:{info:null,content:null,content_type:null,need_media_content:!1},adminForm:{info:null,silent_mode:!1},pageForm:{page_id:null,info:null},cashbackForm:{percent:null,need_custom_percents:!1,category:null,amount:null,info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},watch:{getSelf:function(){this.botUser=this.getSelf,this.loadCashBack()},"cashbackForm.need_custom_percents":function(){this.cashbackForm.need_custom_percents||(this.cashbackForm.percent=null,this.cashbackForm.amount=null)},tab:function(){this.tab===1&&this.loadCashBack()},section:function(){this.invoiceForm={amount:100,info:null},this.userDataForm={info:null},this.locationForm={info:null,need_media_content:!1},this.adminForm={info:null},this.cashbackForm={percent:null,need_custom_percents:!1,amount:null,info:null}}},mounted(){this.getSelf&&(this.botUser=this.getSelf);const s=new URLSearchParams(window.location.search);let e=JSON.parse(s.get("user"));e&&(this.request_telegram_chat_id=e,this.loadReceiverUserData(),this.loadCashBack())},methods:{pageListCallback(s){this.pageForm.page_id=s.id},updateUserInfo(){this.reloadUsers=!0,this.botUser=null,this.request_telegram_chat_id=null,this.$nextTick(()=>{this.reloadUsers=!1})},selectUser(s){this.request_telegram_chat_id=s.telegram_chat_id,this.loadReceiverUserData(),this.loadCashBack()},showInfo(s){this.$cashback.show(s)},nextCashBackPage(s){this.loadCashBack(s)},loadReceiverUserData(){this.loading=!0,this.reloadUsers=!0,this.$store.dispatch("loadReceiverUserData",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id}}).then(s=>{this.botUser=s.data,this.loading=!1,this.reloadUsers=!1,this.$nextTick(()=>{let e=document.getElementById("user-profile-info");window.scrollTo(e.offsetLeft,e.offsetTop-70)})}).catch(()=>{this.botUser=null,this.loading=!1,this.reloadUsers=!1})},loadCashBack(s=0){this.request_telegram_chat_id&&this.$store.dispatch("loadCashBack",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id},page:s}).then(e=>{this.loading=!1,this.cashback=this.getCashBack,this.cashback_paginate_object=this.getCashBackPaginateObject}).catch(()=>{this.loading=!1})},loadUsers(s=0){this.$store.dispatch("loadSearchUsers",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id},page:s}).then(e=>{this.loading=!1,this.cashback=this.getCashBack,this.cashback_paginate_object=this.getCashBackPaginateObject}).catch(()=>{this.loading=!1})},requestUserMenu(){this.loading=!0,this.$store.dispatch("requestRefreshMenu",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.userDataForm}}).then(s=>{this.loading=!1,this.userDataForm.info=null,this.$botNotification.success("Отлично!","Вы отправили запрос на обновление меню у попльзователя")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},goToUserChatHistory(){this.$router.push({name:"AdminChatLog",params:{botUserId:this.botUser.id}})},requestUserData(){this.loading=!0,this.$store.dispatch("requestUserData",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.userDataForm}}).then(s=>{this.loading=!1,this.userDataForm.info=null,this.$botNotification.success("Отлично!","Вы отправили запрос на заполнение пользовательских данных")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},acceptUserInLocation(){this.loading=!0,this.$store.dispatch("userMessage",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.locationForm}}).then(s=>{this.loading=!1,this.locationForm.info=null,this.locationForm.content=null,this.locationForm.content_type=null,this.locationForm.need_media_content=!1,this.$botNotification.success("Отлично!","Вы отметили пользователя в заведении и отправили ему сообщение")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},removeCashBack(){if(!this.request_telegram_chat_id){this.$botNotification.warning("Упс!","Вы должны выбрать пользователя!");return}this.loading=!0,this.$store.dispatch("removeCashBack",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.cashbackForm}}).then(s=>{this.loading=!1,this.cashbackForm.amount=0,this.cashbackForm.info=null,this.loadReceiverUserData(),this.loadCashBack(),this.$botNotification.success("Отлично!","Вы успешно списали кэшбэк")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},sendPageToUser(){if(!this.request_telegram_chat_id){this.$botNotification.warning("Упс!","Вы должны выбрать пользователя!");return}this.loading=!0,this.$store.dispatch("sendPageToUser",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.pageForm}}).then(s=>{this.loading=!1,this.pageForm.page_id=null,this.pageForm.info=null,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы успешно отправили пользователю страницу")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},addCashBack(){if(!this.request_telegram_chat_id){this.$botNotification.warning("Упс!","Вы должны выбрать пользователя!");return}this.loading=!0,this.$store.dispatch("addCashBack",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.cashbackForm}}).then(s=>{this.loading=!1,this.cashbackForm.amount=0,this.cashbackForm.info=null,this.loadReceiverUserData(),this.loadCashBack(),this.$botNotification.success("Отлично!","Вы успешно зачислили кэшбэк")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},sendInvoice(){this.loading=!0,this.$store.dispatch("sendInvoice",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.invoiceForm}}).then(s=>{this.loading=!1,this.invoiceForm.info=null,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы успешно отправили пользователю запрос на оплату")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},selectMediaForMessage(s){this.locationForm.content=s.file_id||null,this.locationForm.content_type=s.type||null},addAdmin(){this.loading=!0,this.$store.dispatch("addAdmin",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.adminForm}}).then(s=>{this.loading=!1,this.adminForm.info=null,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы успешно назначили пользователя администратором")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},removeAdmin(){this.loading=!0,this.$store.dispatch("removeAdmin",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.adminForm}}).then(s=>{this.loading=!1,this.adminForm.info=null,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы успешно убрали пользователя из администраторов")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},scanQR(){this.tg.showScanQrPopup({text:"test"},s=>(document.write("<br>"+s),this.tg.closeScanQrPopup(),!0))},openSection(s){this.section=s}}},ar=Object.assign(K7,{__name:"Main",setup(s){return(e,o)=>(l(),a(v,null,[e.reloadUsers?u("",!0):(l(),M(_U,{key:0,onSelect:e.selectUser},null,8,["onSelect"])),e.request_telegram_chat_id?(l(),a("div",fU,[t("div",bU,[t("div",gU,[t("div",yU,[t("a",{href:"javascript:void(0)",class:C({"bg-blue2-dark color-white":e.tab===0}),onClick:o[0]||(o[0]=W(n=>e.tab=0,["prevent"])),style:{width:"50%"}},[vU,_(" Инфо ")],2),t("a",{href:"javascript:void(0)",class:C({"bg-blue2-dark color-white":e.tab===1}),onClick:o[1]||(o[1]=W(n=>e.tab=1,["prevent"])),style:{width:"50%"}},[$U,_(" CashBack ")],2)]),e.tab===0?(l(),a("div",kU,[wU,FU,e.botUser&&!e.reloadUsers?(l(),M(Ji,{key:0,onUpdate:e.updateUserInfo,"bot-user":e.botUser},null,8,["onUpdate","bot-user"])):u("",!0),T(st)])):u("",!0),e.tab===1?(l(),a("div",CU,[e.cashback.length>0?(l(),a("div",PU,[(l(!0),a(v,null,O(e.cashback,(n,i)=>(l(),a("a",{onClick:W(r=>e.showInfo(n),["prevent"]),class:C([{"border-green2-dark":n.operation_type,"border-red1-dark":!n.operation_type},"border rounded-s shadow-xs"]),href:"javascript:void(0)"},[t("i",{class:C(["fa font-20 fa-mobile",{"color-green2-dark":n.operation_type,"color-red1-dark":!n.operation_type}])},null,2),t("span",null,p(n.amount||0)+" руб. (чек "+p(n.money_in_check||0)+" руб.)",1),t("strong",null,p(n.employee.fio_from_telegram||"Не указано"),1),n.operation_type?(l(),a("u",xU,"Начисление")):(l(),a("u",jU,"Списание")),n.operation_type?(l(),a("i",OU)):(l(),a("i",TU))],10,SU))),256))])):(l(),a("p",UU,"У пользователя еще нет операций с CashBack-ом")),e.cashback_paginate_object?(l(),M(Ce,{key:2,onPagination_page:e.nextCashBackPage,pagination:e.cashback_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0)]),IU,e.botUser?(l(),a("div",VU,[t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=W(n=>e.openSection(5),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===5,"color-blue2-dark":e.section!==5},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])},"Написать пользователю сообщение",2),e.section===5?(l(),a("form",{key:0,onSubmit:o[6]||(o[6]=W((...n)=>e.acceptUserInLocation&&e.acceptUserInLocation(...n),["prevent"]))},[t("div",MU,[t("a",{href:"javascript:void(0)",class:"btn btn-link",onClick:o[3]||(o[3]=(...n)=>e.goToUserChatHistory&&e.goToUserChatHistory(...n))},"Глянуть историю переписки с пользователем")]),t("div",AU,[EU,f(t("textarea",{class:"form-control",placeholder:"Текст сообщения","onUpdate:modelValue":o[4]||(o[4]=n=>e.locationForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.locationForm.info]])]),t("div",DU,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=n=>e.locationForm.need_media_content=n),class:"ios-input",id:"toggle-need-pickup"},null,512),[[z,e.locationForm.need_media_content]]),e.locationForm.need_media_content?u("",!0):(l(),a("label",zU,"Нужен медиа контент")),e.locationForm.need_media_content?(l(),a("label",BU,"Не нужен")):u("",!0),LU,RU]),e.locationForm.need_media_content?(l(),a("div",NU,[T(Dt,{"need-audio":!0,"need-video-note":!0,"need-video":!0,"need-photo":!0,onSelect:e.selectMediaForMessage,selected:[e.locationForm.content]},null,8,["onSelect","selected"])])):u("",!0),t("div",qU,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Отправить ",8,WU)])],32)):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[7]||(o[7]=W(n=>e.openSection(8),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===8,"color-blue2-dark":e.section!==8},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])}," Обновить меню пользователю ",2),e.section===8?(l(),a("form",{key:1,onSubmit:o[9]||(o[9]=W((...n)=>e.requestUserMenu&&e.requestUserMenu(...n),["prevent"]))},[t("div",YU,[HU,f(t("textarea",{class:"form-control",placeholder:"Комментарий к запросу","onUpdate:modelValue":o[8]||(o[8]=n=>e.userDataForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.userDataForm.info]])]),t("div",QU,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Запросить ",8,GU)])],32)):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[10]||(o[10]=W(n=>e.openSection(7),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===7,"color-blue2-dark":e.section!==7},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])}," Запросить заполнение анкеты ",2),e.section===7?(l(),a("form",{key:2,onSubmit:o[12]||(o[12]=W((...n)=>e.requestUserData&&e.requestUserData(...n),["prevent"]))},[t("div",KU,[JU,f(t("textarea",{class:"form-control",placeholder:"Комментарий к запросу","onUpdate:modelValue":o[11]||(o[11]=n=>e.userDataForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.userDataForm.info]])]),t("div",XU,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Запросить ",8,ZU)])],32)):u("",!0),e.currentBot.payment_provider_token?(l(),a("a",{key:3,href:"javascript:void(0)",onClick:o[13]||(o[13]=W(n=>e.openSection(6),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===6,"color-blue2-dark":e.section!==6},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])},"Запрос на оплату",2)):u("",!0),e.section===6?(l(),a("form",{key:4,onSubmit:o[16]||(o[16]=W((...n)=>e.sendInvoice&&e.sendInvoice(...n),["prevent"]))},[t("div",e7,[t7,f(t("input",{class:"form-control",type:"number",min:"100",step:"50",placeholder:"100","onUpdate:modelValue":o[14]||(o[14]=n=>e.invoiceForm.amount=n),id:"bill-amount",required:""},null,512),[[k,e.invoiceForm.amount]])]),t("div",s7,[o7,f(t("textarea",{class:"form-control",placeholder:"Текст запроса","onUpdate:modelValue":o[15]||(o[15]=n=>e.invoiceForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.invoiceForm.info]])]),t("div",i7,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Отправить запрос ",8,n7)])],32)):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[17]||(o[17]=W(n=>e.openSection(1),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===1,"color-blue2-dark":e.section!==1},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])},"Списать CashBack",2),e.section===1?(l(),a("form",{key:5,onSubmit:o[21]||(o[21]=W((...n)=>e.removeCashBack&&e.removeCashBack(...n),["prevent"]))},[t("p",null,[_("У пользователя "),t("strong",null,p(e.botUser.cashBack.amount||0)+" руб",1),_(" CashBack")]),e.botUser.cashBack.subs?(l(!0),a(v,{key:0},O(e.botUser.cashBack.subs,n=>(l(),a("p",l7,p(n.title||"Без названия")+" - "+p(n.amount||0)+" руб. ",1))),256)):u("",!0),e.currentBot.cashback_config?(l(),a("div",a7,[r7,f(t("select",{class:"form-control mb-2","onUpdate:modelValue":o[18]||(o[18]=n=>e.cashbackForm.category=n),required:""},[d7,(l(!0),a(v,null,O(e.currentBot.cashback_config,n=>(l(),a("option",{value:n.title},p(n.title||"Без названия"),9,c7))),256))],512),[[Ve,e.cashbackForm.category]])])):u("",!0),t("div",u7,[m7,f(t("input",{type:"number",min:"0",class:"form-control",id:"bill-amount","onUpdate:modelValue":o[19]||(o[19]=n=>e.cashbackForm.amount=n),placeholder:"Сумма",required:""},null,512),[[k,e.cashbackForm.amount]])]),t("div",h7,[p7,f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":o[20]||(o[20]=n=>e.cashbackForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.cashbackForm.info]])]),t("div",_7,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Отправить ",8,f7)])],32)):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[22]||(o[22]=W(n=>e.openSection(2),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===2,"color-blue2-dark":e.section!==2},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])},"Начислить CashBack",2),e.section===2?(l(),a("form",{key:6,onSubmit:o[28]||(o[28]=W((...n)=>e.addCashBack&&e.addCashBack(...n),["prevent"]))},[t("p",b7,[_("У пользователя "),t("strong",null,p(e.botUser.cashBack.amount||0)+" руб",1),_(" CashBack")]),e.botUser.cashBack.subs?(l(!0),a(v,{key:0},O(e.botUser.cashBack.subs,n=>(l(),a("p",g7,p(n.title||"Без названия")+" - "+p(n.amount||0)+" руб. ",1))),256)):u("",!0),e.currentBot.cashback_config?(l(),a("div",y7,[v7,f(t("select",{class:"form-control mb-2","onUpdate:modelValue":o[23]||(o[23]=n=>e.cashbackForm.category=n),required:""},[$7,(l(!0),a(v,null,O(e.currentBot.cashback_config,n=>(l(),a("option",{value:n.title},p(n.title||"Без названия"),9,k7))),256))],512),[[Ve,e.cashbackForm.category]]),w7])):u("",!0),t("div",F7,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[24]||(o[24]=n=>e.cashbackForm.need_custom_percents=n),type:"checkbox",value:"",id:"need_custom_cashback_amount"},null,512),[[z,e.cashbackForm.need_custom_percents]]),C7]),e.cashbackForm.need_custom_percents?(l(),a("div",P7,[S7,f(t("input",{type:"number",min:"0",class:"form-control",id:"bill-percent","onUpdate:modelValue":o[25]||(o[25]=n=>e.cashbackForm.percent=n),placeholder:"Значите %",required:""},null,512),[[k,e.cashbackForm.percent]])])):u("",!0),t("div",x7,[j7,f(t("input",{type:"number",min:"0",class:"form-control",id:"bill-amount","onUpdate:modelValue":o[26]||(o[26]=n=>e.cashbackForm.amount=n),placeholder:"Сумма",required:""},null,512),[[k,e.cashbackForm.amount]])]),t("div",O7,[T7,f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":o[27]||(o[27]=n=>e.cashbackForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.cashbackForm.info]])]),t("div",U7,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Отправить ",8,I7)])],32)):u("",!0),e.botUser.is_admin?u("",!0):(l(),a("a",{key:7,href:"javascript:void(0)",onClick:o[29]||(o[29]=W(n=>e.openSection(3),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===3,"color-blue2-dark":e.section!==3},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])}," Назначить администратором ",2)),e.section===3?(l(),a("form",{key:8,onSubmit:o[32]||(o[32]=W((...n)=>e.addAdmin&&e.addAdmin(...n),["prevent"]))},[t("div",V7,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[30]||(o[30]=n=>e.adminForm.silent_mode=n),type:"checkbox",role:"switch",id:"switchCheckDefault"},null,512),[[z,e.adminForm.silent_mode]]),M7]),t("div",A7,[E7,f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":o[31]||(o[31]=n=>e.adminForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.adminForm.info]])]),t("div",D7,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Подтвердить ",8,z7)])],32)):u("",!0),e.botUser.is_admin?(l(),a("a",{key:9,href:"javascript:void(0)",onClick:o[33]||(o[33]=W(n=>e.openSection(4),["prevent"])),class:C([{"bg-blue2-dark text-white":e.section===4,"color-blue2-dark":e.section!==4},"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark"])}," Убрать администратора ",2)):u("",!0),e.section===4?(l(),a("form",{key:10,onSubmit:o[35]||(o[35]=W((...n)=>e.removeAdmin&&e.removeAdmin(...n),["prevent"]))},[t("div",B7,[L7,f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":o[34]||(o[34]=n=>e.adminForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.adminForm.info]])]),t("div",R7,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Подтвердить ",8,N7)])],32)):u("",!0),e.section===9?(l(),a("form",{key:11,onSubmit:o[38]||(o[38]=W((...n)=>e.sendPageToUser&&e.sendPageToUser(...n),["prevent"]))},[t("div",q7,[W7,f(t("textarea",{class:"form-control",placeholder:"Комментарий к запросу","onUpdate:modelValue":o[36]||(o[36]=n=>e.pageForm.info=n),id:"bill-info",rows:"3",required:""},null,512),[[k,e.pageForm.info]])]),Y7,e.pageForm.page_id?(l(),a("p",H7,[_("Вы выбрали #"+p(e.pageForm.page_id)+" ",1),t("span",{class:"ml-2 text-danger custom-radio",onClick:o[37]||(o[37]=n=>e.pageForm.page_id=null)},"убрать")])):u("",!0),T(Ki,{editor:!1,onCallback:e.pageListCallback},null,8,["onCallback"]),t("div",Q7,[t("button",{disabled:e.loading&&!e.pageForm.page_id,type:"submit",class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"}," Отправить ",8,G7)])],32)):u("",!0)])):u("",!0)])])):u("",!0)],64))}}),J7=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"})),X7={class:"card card-style"},Z7={key:0,class:"content d-flex flex-wrap"},e9={class:"mt-2 pt-2 w-100"},t9={key:0,class:"speech-bubble color-black"},s9={key:1,class:"speech-bubble color-white bg-highlight"},o9={key:2,class:"speech-left"},i9={key:1,class:"content"},n9={key:2,class:"content"},l9=t("p",null,"Переписка с данным пользователем еще не сохранена",-1),a9=[l9],r9={data(){return{botUserId:null,loading:!1,history:[],paginate_object:null}},computed:{...G(["getChatHistory","getChatHistoryPaginateObject"])},mounted(){this.botUserId=this.$route.params.botUserId,this.loadChatHistory()},methods:{nextChatHistory(s){this.loadChatHistory(s)},loadChatHistory(s=0){this.loading=!0,this.$store.dispatch("loadChatHistory",{dataObject:{bot_user_id:this.botUserId||null},page:s}).then(e=>{this.history=this.getChatHistory||[],this.paginate_object=this.getChatHistoryPaginateObject||null,this.loading=!1}).catch(()=>{this.loading=!1})}}},rr=Object.assign(r9,{__name:"ChatHistory",setup(s){return(e,o)=>(l(),a("div",X7,[e.history.length>0?(l(),a("div",Z7,[(l(!0),a(v,null,O(e.history,n=>(l(),a("div",e9,[n.from_bot_user_id==e.botUserId?(l(),a("div",t9,p(n.text||"Текст сообщения"),1)):u("",!0),n.from_bot_user_id!=e.botUserId?(l(),a("div",s9,p(n.text||"Текст сообщения"),1)):u("",!0),n.media_content?(l(),a("div",o9,[T(Ko,{content:n.media_content,type:n.content_type},null,8,["content","type"])])):u("",!0)]))),256))])):u("",!0),e.history.length>0?(l(),a("div",i9,[e.paginate_object?(l(),M(Ce,{key:0,class:"mt-4",simple:!0,onPagination_page:e.nextChatHistory,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0),T(st)])):(l(),a("div",n9,a9))]))}}),d9=Object.freeze(Object.defineProperty({__proto__:null,default:rr},Symbol.toStringTag,{value:"Module"}));const c9={props:["editedKeyboard","type"],components:{Vue3JsonEditor:qs},computed:{uuid(){return Bt()}},watch:{keyboard:{handler:function(s){this.save()},deep:!0}},data(){return{showCode:!1,showAssign:!1,selectedRow:null,load:!1,rowCount:1,keyboard:[],select:{row:0,col:0,type:this.type||"reply"}}},mounted(){this.editedKeyboard&&this.$nextTick(()=>{this.keyboard=this.editedKeyboard.menu})},methods:{moveCol(s,e=0){s!==this.select.row&&(this.select.row=s,this.select.col=0,this.select.text=this.keyboard[this.select.row][this.select.col].text);let o=this.select.row,n=this.select.col,i=this.keyboard[o].length,r=e===0?n-1>=0?n-1:i-1:n<i-1?n+1:0,d=this.keyboard[o][n];this.keyboard[o][n]=this.keyboard[o][r],this.keyboard[o][r]=d,this.select.row=o,this.select.col=r,this.select.text=this.keyboard[o][r].text},moveRow(s=0){if(this.selectedRow==null)return;let e=this.keyboard.length,o=s===0?this.selectedRow-1>=0?this.selectedRow-1:e-1:this.selectedRow<e-1?this.selectedRow+1:0,n=this.keyboard[this.selectedRow];this.keyboard[this.selectedRow]=this.keyboard[o],this.keyboard[o]=n,this.selectedRow=o},openKeyboardEditorMenu(s,e){this.$botPages.keyboard({row:s,col:e,type:this.type},this.keyboard)},save(){this.$emit("save",this.keyboard)},onJsonChange(s){this.keyboard=s,this.save()},removeColFromRow(s){this.keyboard[s].length>1?this.keyboard[s].splice(this.keyboard[s].length-1,1):this.keyboard.splice(s,1),this.keyboard.length===0&&(this.selectedRow=null),this.save()},addRowAbove(){this.addRow(!0)},addRowBelow(){this.addRow(!1)},addRow(s=!1){if(this.selectedRow==null)this.keyboard?this.keyboard.push([{text:"No Text"}]):this.keyboard=[[{text:"No Text"}]],this.selectedRow=null;else{let e=s?this.selectedRow:this.selectedRow+1;this.keyboard.splice(e,0,[{text:"No Text"}])}this.save()},addColToRow(s){this.keyboard[s].push({text:"No Text"}),this.save()},selectIndex(s,e){this.selectedRow=s,this.select.row=s,this.select.col=e,this.select.text=this.keyboard[s][e].text,this.load=!0,this.$nextTick(()=>{this.load=!1})},removeCol(s,e){this.keyboard[s].length>1?this.keyboard[s].splice(e,1):this.keyboard.splice(1,1),this.save()}}},u9=t("p",{class:"mb-2"},[t("i",{class:"fa-regular fa-circle-question mr-1"}),_("Инструкция")],-1),m9=t("div",{class:"text-left w-100"},[t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-arrow-down"}),_(" - добавление в нижнюю часть новой строки (кнопки)")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-arrow-turn-up"}),_(" - добавление строки над выбранной строкой")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-arrow-turn-down"}),_(" - добавление строки под выбранной строкой")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-plus"}),_(" - добавление кнопки на строку")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-minus"}),_(" - удаление крайней левой кнопки из строки либо самой строки")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-xmark"}),_(" - отмена выделения")])],-1),h9={class:"mb-2 d-flex justify-content-between align-items-center"},p9=t("i",{class:"fa-solid fa-arrow-down"},null,-1),_9=[p9],f9=t("i",{class:"fa-solid fa-arrow-turn-up"},null,-1),b9=[f9],g9=t("i",{class:"fa-solid fa-arrow-turn-down"},null,-1),y9=[g9],v9=t("i",{class:"fa-solid fa-arrows-up-to-line"},null,-1),$9=[v9],k9=t("i",{class:"fa-solid fa-arrows-down-to-line"},null,-1),w9=[k9],F9=t("i",{class:"fa-solid fa-xmark"},null,-1),C9=[F9],P9={class:"form-check"},S9=["id"],x9=["for"],j9={key:0,class:"text-danger font-weight-bold p-0 m-0"},O9={key:1,style:{"overflow-x":"scroll",padding:"5px 20px"},class:"mb-3"},T9={style:{"min-width":"1000px",width:"100%"}},U9={class:"row mb-0"},I9={class:"col-2 d-flex justify-content-around p-2"},V9=["onClick"],M9=t("i",{class:"fa-solid fa-plus"},null,-1),A9=[M9],E9=["onClick"],D9=t("i",{class:"fa-solid fa-minus"},null,-1),z9=[D9],B9=["onClick"],L9=t("i",{class:"fa-solid fa-caret-left"},null,-1),R9=[L9],N9=["onClick"],q9=t("i",{class:"fa-solid fa-caret-right"},null,-1),W9=[q9],Y9={class:"col-10 d-flex justify-content-center p-1"},H9={class:"btn-group dropdown-center w-100 m-1"},Q9=["onClick","onUpdate:modelValue"],G9=["onClick"],K9=t("i",{class:"fa-solid fa-bars"},null,-1),J9=[K9],X9={key:0,class:"mb-0"},Z9=t("label",{class:"form-label",id:"bot-domain"},"JSON-код клавиатуры",-1);function eI(s,e,o,n,i,r){const d=Qe("Popper"),c=Qe("Vue3JsonEditor");return l(),a(v,null,[T(d,null,{content:A(()=>[m9]),default:A(()=>[u9]),_:1}),t("div",h9,[t("div",null,[i.selectedRow==null?(l(),a("button",{key:0,title:"добавление в нижнюю часть новой строки (кнопки)",type:"button",class:"btn btn-primary mb-2",onClick:e[0]||(e[0]=(...h)=>r.addRow&&r.addRow(...h))},_9)):u("",!0),i.selectedRow!=null?(l(),a("button",{key:1,type:"button",title:"добавление строки над выбранной строкой",class:"btn btn-primary mb-2",onClick:e[1]||(e[1]=(...h)=>r.addRowAbove&&r.addRowAbove(...h))},b9)):u("",!0),i.selectedRow!=null?(l(),a("button",{key:2,type:"button",title:"добавление строки под выбранной строкой",class:"btn btn-primary mb-2 ml-2",onClick:e[2]||(e[2]=(...h)=>r.addRowBelow&&r.addRowBelow(...h))},y9)):u("",!0),i.selectedRow!=null?(l(),a("button",{key:3,type:"button",class:"btn btn-primary mb-2 ml-2",onClick:e[3]||(e[3]=h=>r.moveRow(0))},$9)):u("",!0),i.selectedRow!=null?(l(),a("button",{key:4,type:"button",class:"btn btn-primary mb-2 ml-2",onClick:e[4]||(e[4]=h=>r.moveRow(1))},w9)):u("",!0),i.selectedRow!=null?(l(),a("button",{key:5,type:"button",class:"btn btn-outline-danger mb-2 ml-2",onClick:e[5]||(e[5]=h=>i.selectedRow=null)},C9)):u("",!0)]),t("div",P9,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=h=>i.showCode=h),id:"showCode"+r.uuid},null,8,S9),[[z,i.showCode]]),t("label",{class:"form-check-label",for:"showCode"+r.uuid}," Отобразить код ",8,x9)])]),i.keyboard.length===0?(l(),a("p",j9,"Элементы клавиатуры еще не добавлены")):u("",!0),i.keyboard.length>0?(l(),a("div",O9,[t("div",T9,[(l(!0),a(v,null,O(i.keyboard,(h,g)=>(l(),a("div",U9,[t("div",I9,[t("button",{type:"button",title:"добавление кнопки на строку",class:"btn btn-link w-100",onClick:w=>r.addColToRow(g)},A9,8,V9),t("button",{type:"button",title:"удаление крайней левой кнопки из строки либо самой строки",class:"btn btn-link w-100",onClick:w=>r.removeColFromRow(g)},z9,8,E9),t("button",{type:"button",class:"btn btn-link w-100",onClick:w=>r.moveCol(g,0)},R9,8,B9),t("button",{type:"button",class:"btn btn-link w-100",onClick:w=>r.moveCol(g,1)},W9,8,N9)]),t("div",Y9,[(l(!0),a(v,null,O(h,(w,x)=>(l(),a("div",H9,[f(t("input",{type:"text",onClick:P=>r.selectIndex(g,x),class:"btn btn-outline-primary w-100","onUpdate:modelValue":P=>i.keyboard[g][x].text=P},null,8,Q9),[[k,i.keyboard[g][x].text]]),t("button",{type:"button",onClick:P=>r.openKeyboardEditorMenu(g,x),class:"btn btn-outline-primary","aria-expanded":"false","data-bs-reference":"parent"},J9,8,G9)]))),256))])]))),256)),i.showCode?(l(),a("div",X9,[Z9,i.load?u("",!0):(l(),M(c,{key:0,mode:"code",modelValue:i.keyboard,"onUpdate:modelValue":e[7]||(e[7]=h=>i.keyboard=h),"show-btns":!1,expandedOnStart:!0,onJsonChange:r.onJsonChange},null,8,["modelValue","onJsonChange"]))])):u("",!0)])])):u("",!0)],64)}const ls=oe(c9,[["render",eI]]);const tI={key:0,class:"mb-2 px-1"},sI=["disabled"],oI=t("i",{class:"fa-solid fa-arrow-left"},null,-1),iI=[oI],nI=["data-bs-target","disabled"],lI=t("i",{class:"fa-regular fa-pen-to-square"},null,-1),aI=[lI],rI=["disabled"],dI=t("i",{class:"fa-regular fa-floppy-disk"},null,-1),cI=[dI],uI={key:1,class:"d-flex justify-content-between"},mI={class:"mr-2"},hI=["disabled"],pI={key:0,class:"fa-solid fa-check"},_I={key:1,class:"fa-regular fa-pen-to-square"},fI=["disabled"],bI=t("i",{class:"fa-regular fa-clone"},null,-1),gI=[bI],yI=["disabled"],vI=t("i",{class:"fa-regular fa-floppy-disk"},null,-1),$I=[vI],kI=["disabled"],wI=t("i",{class:"fa-solid fa-trash-can"},null,-1),FI=[wI],CI={key:2},PI={class:"mb-0"},SI={key:0},xI={key:1},jI={class:"mb-0"},OI={class:"mb-1 d-flex justify-content-between"},TI={class:"mb-1 px-1 w-100"},UI={type:"button",class:"btn btn-outline-primary w-100 font-10 p-2"},II=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),VI={props:["keyboard","selectMode"],data:()=>({is_edited:!1,editMode:!1,load:!1,keyboardForm:null}),computed:{uuid(){return Bt()}},watch:{keyboardForm:{handler(s){this.is_edited=!0},deep:!0}},mounted(){const s=this.keyboard;this.keyboardForm=s,this.$nextTick(()=>{this.is_edited=!1})},methods:{removeKeyboard(){this.$store.dispatch("removeKeyboardTemplate",{templateId:this.keyboardForm.id}).then(s=>{this.load=!0,this.$nextTick(()=>{this.load=!1}),this.$botNotification.success("Конструктор клавитатуры","Клавиатура успешно удалена!"),this.$emit("callback",this.keyboardForm.id)}).catch(()=>{this.$emit("callback",this.keyboardForm.id),this.$botNotification.warning("Конструктор клавитатуры","Ошибка удаления клавиатуры")})},saveKeyboard(s){this.keyboardForm.menu=s,this.$botNotification.notification("Конструктор клавитатуры","Клавиатура успешно выбрана!")},selectCard(){this.$emit("select",this.keyboardForm)},duplicateKeyboard(){let s=new FormData;Object.keys(this.keyboardForm).forEach(e=>{const o=this.keyboardForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("createKeyboardTemplate",{keyboardForm:s}).then(e=>{this.$botNotification.success("Конструктор ботов","Меню успешно продублировано!"),this.load=!0,this.$nextTick(()=>{this.load=!1}),this.$emit("reload")})},updateKeyboard(){let s=new FormData;Object.keys(this.keyboardForm).forEach(e=>{const o=this.keyboardForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("editKeyboardTemplate",{keyboardForm:s}).then(e=>{this.load=!0,this.$nextTick(()=>{this.load=!1,this.is_edited=!1}),this.$botNotification.success("Конструктор клавитатуры","Клавиатура успешно сохранена!"),this.$emit("callback")}).catch(()=>{this.is_edited=!0})}}},dr=Object.assign(VI,{__name:"KeyboardCard",setup(s){return(e,o)=>(l(),a(v,null,[s.selectMode?(l(),a("div",tI,[t("button",{onClick:o[0]||(o[0]=(...n)=>e.selectCard&&e.selectCard(...n)),disabled:e.load,type:"button",class:"btn btn-outline-success mr-2"},iI,8,sI),t("button",{"data-bs-toggle":"modal","data-bs-target":"#open-construct-"+e.uuid,disabled:e.load,type:"button",title:"Редактировать клавиатуру",class:"btn btn-outline-success mr-2"},aI,8,nI),t("button",{onClick:o[1]||(o[1]=(...n)=>e.updateKeyboard&&e.updateKeyboard(...n)),type:"button",title:"Обновить клавиатуру",disabled:e.load||!e.is_edited,class:C(["btn mr-2",{"btn-outline-primary have-change":e.is_edited,"btn-outline-secondary":!e.is_edited}])},cI,10,rI)])):u("",!0),s.selectMode?u("",!0):(l(),a("div",uI,[t("div",null,[t("strong",mI,"#"+p(s.keyboard.id),1),t("button",{"data-bs-toggle":"modal",onClick:o[2]||(o[2]=n=>e.editMode=!e.editMode),disabled:e.load,type:"button",title:"Редактировать клавиатуру",class:"btn btn-outline-success mr-2"},[e.editMode?(l(),a("i",pI)):(l(),a("i",_I))],8,hI),t("button",{onClick:o[3]||(o[3]=(...n)=>e.duplicateKeyboard&&e.duplicateKeyboard(...n)),type:"button",title:"Дублировать клавиатуру",disabled:e.load,class:"btn btn-outline-primary mr-2"},gI,8,fI),t("button",{onClick:o[4]||(o[4]=(...n)=>e.updateKeyboard&&e.updateKeyboard(...n)),type:"button",title:"Обновить клавиатуру",disabled:e.load||!e.is_edited,class:C(["btn mr-2",{"btn-outline-primary have-change":e.is_edited,"btn-outline-secondary":!e.is_edited}])},$I,10,yI)]),t("button",{onClick:o[5]||(o[5]=(...n)=>e.removeKeyboard&&e.removeKeyboard(...n)),type:"button",disabled:e.load,title:"Удалить клавиатуру",class:"btn btn-outline-danger mr-2"},FI,8,kI)])),s.selectMode?u("",!0):(l(),a("div",CI,[t("p",PI,[_("Тип клавиатуры: "),s.keyboard.type==="reply"?(l(),a("strong",SI,"Нижняя клавиатура")):u("",!0),s.keyboard.type==="inline"?(l(),a("strong",xI,"Встроенная клавиатура")):u("",!0)]),t("p",jI,[_("Мнемоническое имя: "),t("strong",null,p(s.keyboard.slug),1)])])),e.editMode?u("",!0):(l(!0),a(v,{key:3},O(s.keyboard.menu,(n,i)=>(l(),a("div",OI,[(l(!0),a(v,null,O(n,(r,d)=>(l(),a("div",TI,[t("button",UI,p(r.text),1)]))),256))]))),256)),e.keyboardForm&&e.editMode?(l(),M(ls,{key:4,onSave:e.saveKeyboard,"edited-keyboard":e.keyboardForm},null,8,["onSave","edited-keyboard"])):u("",!0),II],64))}}),MI={key:0},AI=t("h6",null,"Форма создания шаблона клавиатуры",-1),EI={class:"mb-3"},DI=t("label",{class:"form-label",id:"bot-domain"},"Тип",-1),zI=t("option",{value:"reply"},"Нижняя клавиатура",-1),BI=t("option",{value:"inline"},"Встроенная клавиатура",-1),LI=[zI,BI],RI={class:"mb-3"},NI={class:"form-label d-flex justify-content-between",id:"bot-domain"},qI=t("span",null,"Мнемоническое имя",-1),WI=t("i",{class:"fa-solid fa-arrows-rotate"},null,-1),YI=[WI],HI={class:"col-12"},QI=t("button",{class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-green1-dark w-100"}," Добавить новый шаблон клавиатуры ",-1),GI=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),KI={key:1,class:"mb-1"},JI={class:"badge bg-warning"},XI={class:"mb-3"},ZI={key:1,class:"card"},eV={class:"card-body"},tV={key:3,class:"mb-3"},sV=t("div",{class:"alert alert-warning",role:"alert"},[t("p",null,"Список шаблонов клавиатур пуст!")],-1),oV=[sV],iV={props:["selectMode","type"],data(){return{keyboards:[],load:!1,editedKeyboard:null,selectMenuIndex:null,keyboardForm:{type:"reply",slug:null,menu:[]}}},computed:{filteredKeyboard(){return this.type?this.keyboards.filter(s=>s.type==this.type):this.keyboards}},mounted(){this.loadMenusByBotTemplate(),this.generateSlug()},methods:{selectCard(s){this.$emit("select",s)},keyboardCallbackAction(s){let e=this.keyboards.find(o=>o.id===s);e.deleted_at=new Date,this.loadMenusByBotTemplate()},loadMenusByBotTemplate(){this.$store.dispatch("loadBotKeyboards").then(s=>{this.$nextTick(()=>{this.keyboards=s.data})})},submitKeyboard(){let s=new FormData;Object.keys(this.keyboardForm).forEach(e=>{const o=this.keyboardForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("createKeyboardTemplate",{keyboardForm:s}).then(e=>{this.keyboardForm={type:"reply",slug:null,menu:[]},this.load=!0,this.$nextTick(()=>{this.load=!1}),this.loadMenusByBotTemplate()})},generateSlug(){this.keyboardForm.slug=Bt()},changeKeyboardFormMenu(s){this.keyboardForm.menu=s}}},ao=Object.assign(iV,{__name:"KeyboardList",setup(s){return(e,o)=>(l(),a(v,null,[s.selectMode?u("",!0):(l(),a("div",MI,[AI,t("form",{onSubmit:o[3]||(o[3]=W((...n)=>e.submitKeyboard&&e.submitKeyboard(...n),["prevent"]))},[t("div",EI,[DI,f(t("select",{"onUpdate:modelValue":o[0]||(o[0]=n=>e.keyboardForm.type=n),class:"form-control"},LI,512),[[Ve,e.keyboardForm.type]])]),t("div",RI,[t("label",NI,[qI,t("a",{onClick:o[1]||(o[1]=(...n)=>e.generateSlug&&e.generateSlug(...n)),href:"javascript:void(0)"},YI)]),f(t("input",{type:"text",class:"form-control",placeholder:"Мнемоническое имя","aria-label":"Мнемоническое имя","onUpdate:modelValue":o[2]||(o[2]=n=>e.keyboardForm.slug=n),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,e.keyboardForm.slug]])]),t("div",HI,[e.load?u("",!0):(l(),M(ls,{key:0,onSave:e.changeKeyboardFormMenu,"edited-keyboard":e.keyboardForm},null,8,["onSave","edited-keyboard"]))]),QI],32),GI])),e.keyboards?(l(),a("p",KI,[_("В списке клавиатур "),t("span",JI,p(e.filteredKeyboard.length)+" ед.",1)])):u("",!0),e.keyboards?(l(!0),a(v,{key:2},O(e.filteredKeyboard,(n,i)=>(l(),a("div",XI,[n.deleted_at?(l(),a("div",ZI,[t("div",eV,[t("p",null,"Удаленная клавиатура #"+p(n.id),1)])])):(l(),M(dr,{key:0,"select-mode":s.selectMode,onSelect:e.selectCard,onReload:e.loadMenusByBotTemplate,onCallback:e.keyboardCallbackAction,keyboard:n},null,8,["select-mode","onSelect","onReload","onCallback","keyboard"]))]))),256)):u("",!0),e.filteredKeyboard.length===0?(l(),a("div",tV,oV)):u("",!0)],64))}}),nV={class:"mb-3"},lV=t("i",{class:"fa-solid fa-xmark"},null,-1),aV=[lV],rV={class:"mb-3"},dV={class:"d-flex justify-content-between flex-wrap align-items-center mb-2"},cV=t("label",{class:"form-label",id:"bot-main-channel"},"Канал для постов",-1),uV=t("i",{class:"fa-brands fa-telegram mr-2 color-blue2-dark"},null,-1),mV=[uV],hV=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),pV=t("div",null,"Нужно ",-1),_V={class:"mb-2"},fV={class:"form-label d-flex justify-content-between align-items-center mb-2",id:"bot-domain"},bV=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),gV=t("div",null,"Нужно ",-1),yV={class:"form-floating"},vV={for:"floatingTextarea2"},$V={key:0},kV={class:"mb-2"},wV={class:"form-check"},FV=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),CV={key:0,class:"mb-2"},PV=t("h6",null,"Изображения на странице",-1),SV={class:"d-flex justify-content-center flex-wrap"},xV={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},jV={class:"row"},OV={key:0,class:"col-12 d-flex flex-wrap"},TV={class:"mb-2 img-preview",style:{"margin-right":"10px"}},UV={class:"remove"},IV=["onClick"],VV={class:"mb-2"},MV={class:"form-check"},AV=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),EV={key:1,class:"mb-2"},DV={key:0},zV={key:1},BV=t("button",{type:"submit",class:"btn btn-m btn-full mb-1 rounded-s text-uppercase font-900 shadow-s bg-green2-dark w-100"}," Отправить сообщение в канал ",-1),LV={data(){return{load:!1,photos:[],showInlineTemplateSelector:!1,need_page_images:!1,need_inline_menu:!1,mailForm:{text:"",inline_keyboard:null,channel:null}}},computed:{currentBot(){return window.currentBot}},mounted(){window.addEventListener("select-telegram-channel-id",s=>{this.mailForm[s.detail.param]=s.detail.channel})},methods:{addTextTo(s={param:null,text:null}){this.mailForm.channel=s.text},submitMail(){let s=new FormData;if(Object.keys(this.mailForm).forEach(e=>{const o=this.mailForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.$store.dispatch("sendToChannel",{mailForm:s}).then(e=>{this.load=!0,this.photos=[],this.need_inline_menu=!1,this.need_page_images=!1,this.mailForm={text:"",channel:null,inline_keyboard:null},this.$botNotification.success("Отлично!","Сообщение успешно отправлено в канал!")}).catch(e=>{this.$botNotification.warning("Упс...","Ошибка отправки сообщения в канал")})},saveInlineKeyboard(s){this.mailForm.inline_keyboard=s},selectInlineKeyboard(s){this.mailForm.inline_keyboard=s,this.showInlineTemplateSelector=!1},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.mailForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},requestTelegramChannelId(){new RegExp("^d+$").test(this.mailForm.channel)||(this.mailForm.channel.indexOf("https://")!==-1&&(this.mailForm.channel="@"+this.mailForm.channel.split("https://t.me/")[1]),this.$store.dispatch("requestTelegramChannelId",{dataObject:{channel:this.mailForm.channel}}).then(e=>{e.ok&&(this.mailForm.channel=e.result.chat.id),e.ok&&this.$botNotification.success("Отлично","Канал успешно найден!"),e.ok||(this.$botNotification.warning("Ошибочка!","Неверно указанный канал"),this.mailForm.channel=null)}).catch(()=>{}))}}},RV=Object.assign(LV,{__name:"MailToChannel",setup(s){return(e,o)=>{const n=Qe("Popper"),i=ie("lazy");return e.currentBot?(l(),a("form",{key:0,onSubmit:o[11]||(o[11]=W((...r)=>e.submitMail&&e.submitMail(...r),["prevent"]))},[t("div",nV,[e.mailForm.channel!=null?(l(),a("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:o[0]||(o[0]=r=>e.mailForm.channel=null)},aV)):u("",!0),_(" , "),t("button",{type:"button",class:C(["btn",{"btn-info":e.mailForm.channel===e.currentBot.main_channel,"btn-outline-info":e.mailForm.channel!==e.currentBot.main_channel}]),onClick:o[1]||(o[1]=r=>e.mailForm.channel=e.currentBot.main_channel)},"Главный канал ",2),_(" , "),t("button",{type:"button",class:C(["btn",{"btn-info":e.mailForm.channel===e.currentBot.order_channel,"btn-outline-info":e.mailForm.channel!==e.currentBot.order_channel}]),onClick:o[2]||(o[2]=r=>e.mailForm.channel=e.currentBot.order_channel)},"Канал заказов ",2)]),t("div",rV,[t("div",dV,[cV,t("span",{onClick:o[3]||(o[3]=r=>e.requestChannelId("channel"))},mV),T(n,null,{content:A(()=>[pV]),default:A(()=>[hV]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[4]||(o[4]=r=>e.mailForm.channel=r),maxlength:"255",onBlur:o[5]||(o[5]=(...r)=>e.requestTelegramChannelId&&e.requestTelegramChannelId(...r)),"aria-describedby":"bot-main-channel",required:""},null,544),[[k,e.mailForm.channel]])]),t("div",_V,[t("label",fV,[_(" Текстовое содержимое страницы "),T(n,null,{content:A(()=>[gV]),default:A(()=>[bV]),_:1})]),t("div",yV,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=r=>e.mailForm.text=r),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"100px"},required:""},null,512),[[k,e.mailForm.text]]),t("label",vV,[_("Содержимое страницы "),e.mailForm.text?(l(),a("span",$V,p(e.mailForm.text.length)+"/4096 ",1)):u("",!0)])])]),t("div",kV,[t("div",wV,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=r=>e.need_page_images=r),type:"checkbox",id:"need-page-images"},null,512),[[z,e.need_page_images]]),FV])]),e.need_page_images?(l(),a("div",CV,[PV,t("div",SV,[t("label",xV,[_(" + "),t("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:o[8]||(o[8]=(...r)=>e.onChangePhotos&&e.onChangePhotos(...r)),style:{display:"none"}},null,32)]),t("div",jV,[e.photos.length>0?(l(),a("div",OV,[(l(!0),a(v,null,O(e.photos,(r,d)=>(l(),a("div",TV,[f(t("img",null,null,512),[[i,e.getPhoto(r).imageUrl]]),t("div",UV,[t("a",{onClick:c=>e.removePhoto(d)},"Удалить",8,IV)])]))),256))])):u("",!0)])])])):u("",!0),t("div",VV,[t("div",MV,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=r=>e.need_inline_menu=r),type:"checkbox",id:"need-inline-menu"},null,512),[[z,e.need_inline_menu]]),AV])]),e.need_inline_menu?(l(),a("div",EV,[t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:o[10]||(o[10]=r=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(l(),a("span",zV," Скрыть шаблоны меню")):(l(),a("span",DV," Открыть шаблоны меню"))],2),e.showInlineTemplateSelector?(l(),M(ao,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(ls,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.mailForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])):u("",!0),BV],32)):u("",!0)}}}),NV={class:"mb-2"},qV={class:"form-label d-flex justify-content-between align-items-center mb-1"},WV=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),YV=t("div",null,"Нужно ",-1),HV={class:"mb-1 text-center"},QV={key:0},GV={class:"form-floating"},KV={class:"mb-2"},JV={class:"mb-2"},XV={class:"form-check"},ZV=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения в рассылке (максимум 10) ",-1),eM={key:0,class:"mb-2"},tM={class:"mb-2"},sM={class:"form-check"},oM=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),iM={key:1,class:"mb-2"},nM={key:0},lM={key:1},aM=t("button",{type:"submit",class:"btn btn-m btn-full my-3 rounded-xl text-uppercase font-900 shadow-s bg-green2-dark w-100"}," Поставить сообщение в очередь ",-1),rM={components:{VueDatePicker:oi},data(){return{load:!1,photos:[],showInlineTemplateSelector:!1,need_page_images:!1,need_inline_menu:!1,mailForm:{message:"",inline_keyboard:null,cron_time:null,images:[]}}},computed:{currentBot(){return window.currentBot}},mounted(){},methods:{selectImages(s){this.mailForm.images||(this.mailForm.images=[]);let e=this.mailForm.images.indexOf(s.file_id);e!==-1?this.mailForm.images.splice(e,1):this.mailForm.images.push(s.file_id)},addTextTo(s={param:null,text:null}){this.mailForm.channel=s.text},submitMail(){let s=new FormData;Object.keys(this.mailForm).forEach(e=>{const o=this.mailForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.$store.dispatch("sendToQueue",{mailForm:s}).then(e=>{this.load=!0,this.need_inline_menu=!1,this.need_page_images=!1,this.mailForm={message:"",images:null,inline_keyboard:null},this.$botNotification.success("Отлично!","Сообщение успешно отправлено в очередь рассылки!"),this.$emit("callback")}).catch(e=>{this.$botNotification.warning("Упс...","Ошибка отправки сообщения в очередь")})},saveInlineKeyboard(s){this.mailForm.inline_keyboard=s},selectInlineKeyboard(s){this.mailForm.inline_keyboard=s,this.showInlineTemplateSelector=!1},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.mailForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},requestTelegramChannelId(){new RegExp("^d+$").test(this.mailForm.channel)||(this.mailForm.channel.indexOf("https://")!==-1&&(this.mailForm.channel="@"+this.mailForm.channel.split("https://t.me/")[1]),this.$store.dispatch("requestTelegramChannelId",{dataObject:{channel:this.mailForm.channel}}).then(e=>{e.ok&&(this.mailForm.channel=e.result.chat.id),e.ok&&this.$botNotification.success("Отлично","Канал успешно найден!"),e.ok||(this.$botNotification.warning("Ошибочка!","Неверно указанный канал"),this.mailForm.channel=null)}).catch(()=>{}))}}},dM=Object.assign(rM,{__name:"MailToBot",setup(s){return(e,o)=>{const n=Qe("Popper");return e.currentBot?(l(),a("form",{key:0,onSubmit:o[5]||(o[5]=W((...i)=>e.submitMail&&e.submitMail(...i),["prevent"]))},[t("div",NV,[t("label",qV,[_(" Текстовое содержимое рассылки "),T(n,null,{content:A(()=>[YV]),default:A(()=>[WV]),_:1})]),t("p",HV,[e.mailForm.message?(l(),a("span",QV,p(e.mailForm.message.length)+"/4096 ",1)):u("",!0)]),t("div",GV,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=i=>e.mailForm.message=i),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"100px"},required:""},null,512),[[k,e.mailForm.message]])])]),t("div",KV,[f(t("input",{type:"datetime-local",class:"form-control w-100","onUpdate:modelValue":o[1]||(o[1]=i=>e.mailForm.cron_time=i),required:""},null,512),[[k,e.mailForm.cron_time]])]),t("div",JV,[t("div",XV,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=i=>e.need_page_images=i),type:"checkbox",id:"need-page-images"},null,512),[[z,e.need_page_images]]),ZV])]),e.need_page_images?(l(),a("div",eM,[T(Dt,{"need-photo":!0,selected:e.mailForm.images,onSelect:e.selectImages},null,8,["selected","onSelect"])])):u("",!0),t("div",tM,[t("div",sM,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=i=>e.need_inline_menu=i),type:"checkbox",id:"need-inline-menu"},null,512),[[z,e.need_inline_menu]]),oM])]),e.need_inline_menu?(l(),a("div",iM,[t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:o[4]||(o[4]=i=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(l(),a("span",lM," Скрыть шаблоны меню")):(l(),a("span",nM," Открыть шаблоны меню"))],2),e.showInlineTemplateSelector?(l(),M(ao,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(ls,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.mailForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])):u("",!0),aM],32)):u("",!0)}}}),cM={key:0},uM={key:0,class:"card card-style"},mM={class:"content mb-2"},hM=t("p",{class:"mb-2"},"Выберите куда вы хотите отправить сообщение",-1),pM=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),_M={key:1,class:"card card-style bg-red2-dark"},fM=t("div",{class:"content"},[t("h4",{class:"color-white"},"Внимание!"),t("p",{class:"color-white"}," Данная страница доступа только администраторам заведения! ")],-1),bM=[fM],gM={data(){return{tab:0,botUser:null,statistic:null,loading:!1}},computed:{...G(["getSelf"])},watch:{getSelf:function(){this.botUser=this.getSelf,this.prepareStatistic()}},mounted(){this.getSelf&&(this.botUser=this.getSelf,this.prepareStatistic())},methods:{prepareStatistic(){return this.$store.dispatch("statisticLoad").then(s=>{this.statistic=s.statistic})}}},cr=Object.assign(gM,{__name:"Promotion",setup(s){return(e,o)=>e.botUser?(l(),a("div",cM,[e.botUser.is_admin?(l(),a("div",uM,[t("div",mM,[hM,t("a",{href:"javascript:void(0)",onClick:o[0]||(o[0]=n=>e.tab=1),class:C([{"border-green2-dark color-green2-dark":e.tab===1,"border-teal-dark color-gray2-dark":e.tab!==1},"btn btn-border btn-m btn-full mb-2 rounded-0 text-uppercase font-900 bg-theme"])}," Рассылка в канал ",2),t("a",{href:"javascript:void(0)",onClick:o[1]||(o[1]=n=>e.tab=0),class:C([{"border-green2-dark color-green2-dark":e.tab===0,"border-teal-dark color-gray2-dark":e.tab!==0},"btn btn-border btn-m btn-full mb-2 rounded-0 text-uppercase font-900 bg-theme"])}," Рассылка в бота ",2),e.tab===1?(l(),M(RV,{key:0})):u("",!0),e.tab===0?(l(),M(dM,{key:1})):u("",!0),pM,T(st,{class:"mb-2"})])])):(l(),a("div",_M,bM))])):u("",!0)}}),yM=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"})),vM={key:0},$M={key:0,class:"card card-style"},kM={class:"content mb-2"},wM=t("h3",null,"Основная статистика",-1),FM=t("p",null," Сводка всех показателей эффективности работы системы ",-1),CM={key:0,class:"table table-borderless rounded-sm shadow-l",style:{overflow:"hidden"}},PM=t("thead",null,[t("tr",{class:"bg-gray1-dark"},[t("th",{scope:"col",class:"color-theme"},"Ключ"),t("th",{scope:"col",class:"color-theme"},"Значение")])],-1),SM=t("th",{scope:"row"},"Всего пользователей в БД",-1),xM={class:"font-weight-bold"},jM=t("th",{scope:"row"},"Всего VIP",-1),OM={class:"font-weight-bold"},TM=t("th",{scope:"row"},"Администраторы в БД",-1),UM={class:"font-weight-bold"},IM=t("th",{scope:"row"},"Администраторы за работой",-1),VM={class:"font-weight-bold"},MM=t("th",{scope:"row"},"Пользователей за день",-1),AM={class:"font-weight-bold"},EM=t("th",{scope:"row"},"VIP за день",-1),DM={class:"font-weight-bold"},zM=t("th",{scope:"row"},"Выдано кэшбэка за день, руб",-1),BM={class:"font-weight-bold"},LM={key:0},RM=t("th",{scope:"row"},"Списано кэшбэка за день, руб",-1),NM={class:"font-weight-bold"},qM={key:0},WM=t("th",{scope:"row"},"Всего кэшбэка на счету у пользователей, руб",-1),YM={class:"font-weight-bold"},HM={key:0},QM=t("th",{scope:"row"},"Всего кэшбэка начислено пользователям, руб",-1),GM={class:"font-weight-bold"},KM={key:0},JM=t("th",{scope:"row"},"Всего кэшбэка списано у пользователей, руб",-1),XM={class:"font-weight-bold"},ZM={key:0},eA=t("th",{scope:"row"},"Всего за день начислено кэшбэка первого уровня, руб",-1),tA={class:"font-weight-bold"},sA={key:0},oA=t("th",{scope:"row"},"Всего за день начислено кэшбэка второго уровня, руб",-1),iA={class:"font-weight-bold"},nA={key:0},lA=t("th",{scope:"row"},"Всего за день начислено кэшбэка третьего уровня, руб",-1),aA={class:"font-weight-bold"},rA={key:0},dA={key:1,class:"text-danger"},cA=t("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),uA={key:1,class:"card card-style bg-red2-dark"},mA=t("div",{class:"content"},[t("h4",{class:"color-white"},"Внимание!"),t("p",{class:"color-white"}," Данная страница доступа только администраторам заведения! ")],-1),hA=[mA],pA={data(){return{botUser:null,statistic:null,loading:!1}},computed:{...G(["getSelf"])},watch:{getSelf:function(){this.botUser=this.getSelf,this.prepareStatistic()}},mounted(){this.getSelf&&(this.botUser=this.getSelf,this.prepareStatistic())},methods:{prepareStatistic(){return this.$store.dispatch("statisticLoad").then(s=>{this.statistic=s.statistic})},downloadBotStatistic(){this.$botNotification.notification("Внимание!","Начался формироваться документ статистики!"),this.$store.dispatch("downloadBotStatistic").then(s=>{this.$botNotification.success("Отлично!","Документ успешно сформирован")}).catch(()=>{this.$botNotification.warning("Упс...","Что-то пошло не так...")})}}},ur=Object.assign(pA,{__name:"Statistic",setup(s){return(e,o)=>e.botUser?(l(),a("div",vM,[e.botUser.is_admin?(l(),a("div",$M,[t("div",kM,[wM,FM,e.statistic?(l(),a("table",CM,[PM,t("tbody",null,[t("tr",null,[SM,t("td",xM,p(e.statistic.users_in_bd||0),1)]),t("tr",null,[jM,t("td",OM,p(e.statistic.vip_in_bd||0),1)]),t("tr",null,[TM,t("td",UM,p(e.statistic.admin_in_bd||0),1)]),t("tr",null,[IM,t("td",VM,p(e.statistic.work_admin_in_bd||0),1)]),t("tr",null,[MM,t("td",AM,p(e.statistic.users_in_bd_today||0),1)]),t("tr",null,[EM,t("td",DM,p(e.statistic.vip_in_bd_today||0),1)]),t("tr",null,[zM,t("td",BM,[_(p((e.statistic.cashback_day_up||0).toFixed(2))+" ",1),e.statistic.cashback_day_up_people_count?(l(),a("strong",LM,"("+p(e.statistic.cashback_day_up_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[RM,t("td",NM,[_(p((e.statistic.cashback_day_down||0).toFixed(2))+" ",1),e.statistic.cashback_day_down_people_count?(l(),a("strong",qM,"("+p(e.statistic.cashback_day_down_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[WM,t("td",YM,[_(p((e.statistic.summary_cashback||0).toFixed(2))+" ",1),e.statistic.summary_cashback_people_count?(l(),a("strong",HM,"("+p(e.statistic.summary_cashback_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[QM,t("td",GM,[_(p((e.statistic.cashback_summary_up||0).toFixed(2))+" ",1),e.statistic.cashback_summary_up_people_count?(l(),a("strong",KM,"("+p(e.statistic.cashback_summary_up_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[JM,t("td",XM,[_(p((e.statistic.cashback_summary_down||0).toFixed(2))+" ",1),e.statistic.cashback_summary_down_people_count?(l(),a("strong",ZM,"("+p(e.statistic.cashback_summary_down_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[eA,t("td",tA,[_(p((e.statistic.cashback_day_up_level_1||0).toFixed(2))+" ",1),e.statistic.cashback_day_up_level_1_people_count?(l(),a("strong",sA,"("+p(e.statistic.cashback_day_up_level_1_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[oA,t("td",iA,[_(p((e.statistic.cashback_day_up_level_2||0).toFixed(2))+" ",1),e.statistic.cashback_day_up_level_2_people_count?(l(),a("strong",nA,"("+p(e.statistic.cashback_day_up_level_2_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[lA,t("td",aA,[_(p((e.statistic.cashback_day_up_level_3||0).toFixed(2))+" ",1),e.statistic.cashback_day_up_level_3_people_count?(l(),a("strong",rA,"("+p(e.statistic.cashback_day_up_level_3_people_count)+" чел)",1)):u("",!0)])])])])):(l(),a("p",dA,"Статистика еще не загружена")),t("a",{href:"javascript:void(0)",onClick:o[0]||(o[0]=(...n)=>e.downloadBotStatistic&&e.downloadBotStatistic(...n)),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-blue1-dark color-blue1-dark bg-theme"},[cA,_(" Скачать статистику ")]),T(st)])])):(l(),a("div",uA,hA))])):u("",!0)}}),_A=Object.freeze(Object.defineProperty({__proto__:null,default:ur},Symbol.toStringTag,{value:"Module"})),fA={key:0},bA={key:0,class:"card card-style"},gA={class:"content mb-2"},yA=t("h3",null,"Информация о пользователе",-1),vA=t("p",null," Ваша персональная информация ",-1),$A=t("div",{class:"divider-icon divider-margins bg-blue2-dark my-4"},[t("i",{class:"fa font-17 color-blue2-dark fa-cog bg-white"})],-1),kA=["disabled"],wA={key:0},FA={key:1},CA=["disabled"],PA={key:1,class:"card card-style bg-red2-dark"},SA=t("div",{class:"content"},[t("h4",{class:"color-white"},"Внимание!"),t("p",{class:"color-white"}," Данная страница доступа только администраторам заведения! ")],-1),xA=[SA],jA={data(){return{botUser:null,loading:!1}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp}},watch:{getSelf:function(){this.botUser=this.getSelf}},mounted(){this.getSelf&&(this.botUser=this.getSelf)},methods:{loadSelf(){this.$store.dispatch("loadSelf")},loadReceiverUserData(){this.loading=!0,this.$store.dispatch("loadReceiverUserData",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id}}).then(s=>{this.botUser=s.data,this.loading=!1}).catch(()=>{this.loading=!1})},selfRemove(){this.loading=!0,this.$store.dispatch("selfRemove").then(s=>{this.loading=!1,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы больше не являетесь администратором"),setTimeout(()=>{this.tg.close()},1e3)}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},workStateChange(){this.loading=!0,this.$store.dispatch("workStateChange").then(s=>{this.loading=!1,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы успешно изменили свой рабочий статус")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})}}},mr=Object.assign(jA,{__name:"WorkStatus",setup(s){return(e,o)=>e.botUser?(l(),a("div",fA,[e.botUser.is_admin?(l(),a("div",bA,[t("div",gA,[yA,vA,T(Ji,{onUpdate:e.loadSelf,"bot-user":e.botUser},null,8,["onUpdate","bot-user"]),T(st),$A,t("button",{type:"button",disabled:e.loading,onClick:o[0]||(o[0]=(...n)=>e.workStateChange&&e.workStateChange(...n)),class:"btn btn-m btn-full mb-1 rounded-s text-uppercase font-900 shadow-s bg-green2-light w-100"},[e.botUser.is_work?(l(),a("span",wA,"Завершить рабочую смену")):u("",!0),e.botUser.is_work?u("",!0):(l(),a("span",FA,"Начать рабочую смены"))],8,kA),t("button",{type:"button",disabled:e.loading||!e.botUser.is_admin,onClick:o[1]||(o[1]=(...n)=>e.selfRemove&&e.selfRemove(...n)),class:"btn btn-m btn-full mb-1 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Разжаловать себя из администраторов ",8,CA)])])):(l(),a("div",PA,xA))])):u("",!0)}}),OA=Object.freeze(Object.defineProperty({__proto__:null,default:mr},Symbol.toStringTag,{value:"Module"})),TA={data(){return{}},computed:{...G(["getCashBack","getCashBackPaginateObject"]),tg(){return window.Telegram.WebApp},tgUser(){const s=new URLSearchParams(this.tg.initData);return JSON.parse(s.get("user"))}},mounted(){},methods:{}};function UA(s,e,o,n,i,r){return null}const hr=oe(TA,[["render",UA]]),IA=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),VA={data(){return{}},computed:{...G(["getCashBack","getCashBackPaginateObject"]),tg(){return window.Telegram.WebApp},tgUser(){const s=new URLSearchParams(this.tg.initData);return JSON.parse(s.get("user"))}},mounted(){},methods:{}};function MA(s,e,o,n,i,r){return null}const pr=oe(VA,[["render",MA]]),AA=Object.freeze(Object.defineProperty({__proto__:null,default:pr},Symbol.toStringTag,{value:"Module"})),EA={class:"card card-style bg-theme pb-0"},DA={class:"content"},zA=t("p",{class:"mb-0"},"Введите информацию о событии или о пользователе",-1),BA={class:"search-box bg-theme rounded-s shadow-xl bottom-0"},LA=t("i",{class:"fa fa-search"},null,-1),RA=["placeholder"],NA={class:"mt-2 mb-0"},qA={key:0,style:{color:"red"}},WA={class:"row mt-2 mb-2"},YA={class:"col-4"},HA=t("i",{class:"fa-solid fa-users"},null,-1),QA=[HA],GA={class:"col-4"},KA=t("i",{class:"fa-solid fa-bolt"},null,-1),JA=[KA],XA={class:"col-4"},ZA=t("i",{class:"fa-solid fa-phone"},null,-1),eE=[ZA],tE=t("button",{type:"submit",class:"btn btn-m btn-full my-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"},[t("i",{class:"fa-solid fa-magnifying-glass mr-1"}),_("Искать ")],-1),sE={key:0,class:"mx-0 mt-3 px-2"},oE={class:"w-100 text-center p-2 mb-0"},iE={class:"w-100",style:{"overflow-y":"scroll"}},nE={class:"table text-center rounded-sm"},lE=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Ф.И.О."),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Телефон"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Название события"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"№ попытки"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Номер приза"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Подверждено"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Дата розыгрыша"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Действие")])],-1),aE=["onClick"],rE={style:{"min-width":"200px"},class:"border-dark1-dark text-left"},dE={style:{"min-width":"200px"},class:"border-dark1-dark"},cE={style:{"min-width":"200px"},class:"border-dark1-dark"},uE={class:"border-dark1-dark"},mE={class:"border-dark1-dark"},hE={style:{"min-width":"200px"},class:"border-dark1-dark"},pE={key:0,class:"fa-regular fa-circle-check color-green2-light"},_E={key:1,class:"fa-regular fa-circle-xmark color-red2-light"},fE={class:"border-dark1-dark"},bE={class:"border-dark1-dark"},gE={key:1},yE={data(){return{loading:!0,actions:[],search:null,filter:null,paginate_object:null}},computed:{...G(["getActions","getActionsPaginateObject"]),preparedFilterName(){return this.filter?[{slug:"users",text:"Ф.И.О. пользователя"},{slug:"event",text:"по типу события"},{slug:"phone",text:"по номеру телефона"}].find(e=>e.slug===this.filter).text:null}},mounted(){this.loadActions(0)},methods:{nextActions(s){this.loadActions(s)},openActionDetails(s){this.$cashback.eventInfo(s)},loadActions(s=0){this.loading=!0,this.$store.dispatch("loadActions",{dataObject:{search:this.search,filter:this.filter},page:s}).then(e=>{this.loading=!1,this.actions=this.getActions,this.paginate_object=this.getActionsPaginateObject}).catch(()=>{this.loading=!1})}}},_r=Object.assign(yE,{__name:"Actions",setup(s){return(e,o)=>(l(),a("div",EA,[t("div",DA,[zA,t("form",{onSubmit:o[5]||(o[5]=W(n=>e.loadActions(0),["prevent"]))},[t("div",BA,[LA,f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"border-0",placeholder:e.preparedFilterName||"Поиск по событию"},null,8,RA),[[k,e.search]])]),t("p",NA,[_("Фильтры: "),e.filter?(l(),a("span",qA,[_(p(e.preparedFilterName)+" ",1),t("i",{onClick:o[1]||(o[1]=n=>e.filter=null),class:"ml-2 fa-solid fa-xmark"})])):u("",!0)]),t("div",WA,[t("div",YA,[t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=n=>e.filter="users"),class:C([{"border-red2-dark color-red2-dark":e.filter==="users","border-gray2-dark color-gray2-dark":e.filter!=="users"},"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 bg-theme"])},QA,2)]),t("div",GA,[t("a",{href:"javascript:void(0)",onClick:o[3]||(o[3]=n=>e.filter="event"),class:C([{"border-red2-dark color-red2-dark":e.filter==="event","border-gray2-dark color-gray2-dark":e.filter!=="event"},"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 border-red2-dark color-red2-dark bg-theme"])},JA,2)]),t("div",XA,[t("a",{href:"javascript:void(0)",onClick:o[4]||(o[4]=n=>e.filter="phone"),class:C([{"border-red2-dark color-red2-dark":e.filter==="phone","border-gray2-dark color-gray2-dark":e.filter!=="phone"},"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 border-red2-dark color-red2-dark bg-theme"])},eE,2)])]),tE],32),e.actions.length>0?(l(),a("div",sE,[t("small",oE,"Найдено "+p(e.paginate_object.meta.total)+" записей",1),t("div",iE,[t("table",nE,[lE,t("tbody",null,[(l(!0),a(v,null,O(e.actions,(n,i)=>(l(),a("tr",{class:"bg-theme",onClick:r=>e.openActionDetails(n)},[t("td",rE,[(l(!0),a(v,null,O(n.data,(r,d)=>(l(),a("span",null,p(r.name),1))),256))]),t("td",dE,[(l(!0),a(v,null,O(n.data,(r,d)=>(l(),a("span",null,p(r.phone),1))),256))]),t("td",cE,p(n.slug.command)+" (#"+p(n.slug.id)+") ",1),t("td",uE,p(n.current_attempts),1),t("td",mE,[(l(!0),a(v,null,O(n.data,(r,d)=>(l(),a("span",null,p(r.win),1))),256))]),t("td",hE,[(l(!0),a(v,null,O(n.data,(r,d)=>(l(),a("span",null,[r.answered_at?(l(),a("i",pE)):(l(),a("i",_E))]))),256))]),t("td",fE,p(e.$filters.current(n.completed_at)),1),t("td",bE,p(e.$filters.current(n.completed_at)),1)],8,aE))),256))])])]),e.paginate_object?(l(),M(Ce,{key:0,class:"mt-4",simple:!0,onPagination_page:e.nextActions,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0),T(st)])):(l(),a("p",gE,"К сожалению никаких подходящих событий не найдено"))])]))}}),vE=Object.freeze(Object.defineProperty({__proto__:null,default:_r},Symbol.toStringTag,{value:"Module"})),$E={props:["bot","item"],data(){return{sectionForm:{section:null},categoryForm:{label:null},tab:0,types:[{title:"Готовый продукт",value:1},{title:"Товар на вес",value:2},{title:"Конструктор товара",value:3}],productCategories:[],sections:["Общие характеристики","Дополнительная информация"],photos:[],categories:[],removed_options:[],productForm:{article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]}}},computed:{...G(["getCategories"])},mounted(){this.loadProductCategories(),this.item&&this.$nextTick(()=>{this.productForm={id:this.item.id||null,article:this.item.article||null,vk_product_id:this.item.vk_product_id||null,title:this.item.title||null,description:this.item.description||null,images:this.item.images||null,type:this.item.type||1,old_price:this.item.old_price||null,current_price:this.item.current_price||null,variants:this.item.variants||null,in_stop_list_at:this.item.in_stop_list_at||null,bot_id:this.item.bot_id||null,options:this.item.options||null,reviews:this.item.reviews||null},this.options=[],this.item.categories.forEach(s=>{this.productCategories.push(s.id)})})},methods:{prepareCategoryName(s){let e=this.categories.find(o=>o.value===s);return e?e.label:s},removeProduct(){this.$store.dispatch("removeProductCategory",{category_id:id}).then(()=>{this.loadProductCategories(),this.$botNotification.notification("Конструктор ботов","Продукт успешно удален!")})},removeCategory(s){let e=this.categories.findIndex(o=>o.id===s)||null;e&&this.categories.splice(e,1),this.$store.dispatch("removeProductCategory",{category_id:s}).then(()=>{this.loadProductCategories(),this.$botNotification.notification("Конструктор ботов","Категория успешно удалена!")})},addCategory(){const s=this.categoryForm.label;this.categoryForm.label=null,this.$store.dispatch("addProductCategory",{category:s}).then(()=>{this.loadProductCategories()})},selectCategory(s){this.productCategories||(this.productCategories=[]);let e=this.productCategories.indexOf(s.id);e!==-1?this.productCategories.splice(e,1):this.productCategories.push(s.id)},submit(){let s=new FormData;if(Object.keys(this.productForm).forEach(e=>{const o=this.productForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.removed_options.length>0&&s.append("removed_options",JSON.stringify(this.removed_options)),this.productCategories.length>0&&s.append("categories",JSON.stringify(this.productCategories)),this.$store.dispatch("saveProduct",{productForm:s}).then(e=>{this.load=!0,this.$botNotification.notification("Конструктор ботов","Продукт успешно сохранен!"),this.clearForm(),this.$emit("refresh")}).catch(e=>{})},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},loadProductCategories(){this.$store.dispatch("loadCategories").then(()=>{this.categories=this.getCategories})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removeSection(s){this.sections.splice(s,1)},addSection(){this.sections.push(this.sectionForm.section),this.sectionForm.section=null},addOption(){this.productForm.options||(this.productForm.options=[]),this.productForm.options.push({id:null,key:null,value:null,title:null,section:null})},addVariant(){this.productForm.variants||(this.productForm.variants=[]),this.productForm.variants.push({key:null,value:null})},removeProductCategory(s){},removeVariant(s){this.productForm.variants.splice(s,1)},removeOption(s){this.productForm.options[s].id&&this.removed_options.push(this.productForm.options[s].id),this.productForm.options.splice(s,1)},removeImage(s){this.productForm.images.splice(s,1)},removePhoto(s){this.photos.splice(s,1)},clearForm(){const s={article:null,vk_product_id:null,title:null,description:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[]};this.photos=[],this.removed_options=[],this.productCategories=[],this.productForm=s}}},kE={class:"card card-style"},wE={class:"content"},FE=t("h6",null,"Управление категориями",-1),CE={key:0,class:"d-flex flex-wrap"},PE={class:"px-3 font-10 rounded mr-1 mb-1 cursor-pointer"},SE=["onClick"],xE={class:"mb-2"},jE=t("label",{for:"exampleDropdownFormEmail1",class:"form-label"},"Новая категория",-1),OE={class:"card card-style bg-theme pb-0"},TE={class:"content"},UE={class:"d-flex justify-content-between flex-wrap"},IE=t("i",{class:"fa-solid fa-plus mr-1"},null,-1),VE={class:"form-check"},ME=t("label",{class:"form-check-label",for:"in-stop-list"}," Товар находится в стоп-листе ",-1),AE=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),EE=t("h6",null,"Выбор категории",-1),DE={key:0,class:"d-flex flex-wrap"},zE=["onClick"],BE=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),LE={class:"mb-2"},RE=t("label",{for:"vk-product-id"},"Идентификатор товара VK",-1),NE={class:"mb-2"},qE=t("label",{for:"article"},"Артикул товара",-1),WE={class:"mb-2"},YE=t("label",{for:"title"},"Название товара",-1),HE={class:"mb-2"},QE=t("label",{for:"type"},"Тип товара",-1),GE=["value"],KE={class:"mb-2"},JE=t("label",{for:"description"},"Описание товара",-1),XE={class:"mb-2"},ZE=t("label",{for:"current-price"},"Актуальная цена, руб",-1),eD={class:"mb-2"},tD=t("label",{for:"old-price"},"Старая цена, руб",-1),sD=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),oD={key:0},iD={class:"mb-2"},nD={class:"mb-2"},lD=["for"],aD=["onUpdate:modelValue","id"],rD={class:"mb-2"},dD=["for"],cD=["onUpdate:modelValue","id"],uD=["onClick"],mD=t("i",{class:"fa-solid fa-trash-can"},null,-1),hD=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),pD=t("h6",null,"Характеристики товара",-1),_D={class:"mb-2"},fD=t("button",{class:"btn btn-border btn-m btn-full mb-0 rounded-sm text-uppercase font-900 border-green2-dark color-green2-dark bg-theme w-100",type:"submit",id:"button-addon2"},"Добавить секцию ",-1),bD={key:0,class:"d-flex flex-wrap"},gD={class:"px-3 text-white rounded bg-info mr-1 mb-1 cursor-pointer font-12"},yD=["onClick"],vD=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),$D={class:"mb-2"},kD={class:"form-floating mb-2"},wD=["for"],FD=["onClick"],CD=t("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),PD=[CD],SD=["onUpdate:modelValue","id"],xD={class:"form-floating mb-2"},jD=["for"],OD=["onUpdate:modelValue","id"],TD={class:"form-floating mb-2"},UD=["for"],ID=["onUpdate:modelValue","id"],VD=t("option",{value:null},"Без секции",-1),MD=["value"],AD=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),ED={class:"mb-2"},DD=t("h6",null,"Фотографии товара",-1),zD={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},BD={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},LD=t("span",null,"+",-1),RD={class:"mb-2 img-preview",style:{"margin-right":"10px"}},ND={class:"remove"},qD=["onClick"],WD={class:"mb-2 img-preview",style:{"margin-right":"10px"}},YD={class:"remove"},HD=["onClick"],QD=t("button",{type:"submit",class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark w-100"}," Сохранить ",-1),GD={key:0,class:"divider divider-small my-3 bg-highlight"};function KD(s,e,o,n,i,r){const d=ie("lazy");return l(),a(v,null,[t("div",kE,[t("div",wE,[FE,i.categories.length>0?(l(),a("div",CE,[(l(!0),a(v,null,O(i.categories,(c,h)=>(l(),a("p",PE,[t("span",null,p(c.title),1),t("i",{onClick:g=>r.removeCategory(c.id),class:"fa-solid fa-trash ml-2 color-red2-dark"},null,8,SE)]))),256))])):u("",!0),t("div",xE,[jE,f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=c=>i.categoryForm.label=c),id:"exampleDropdownFormEmail1",placeholder:"Название категории"},null,512),[[k,i.categoryForm.label]])]),t("button",{class:"btn btn-border btn-m btn-full mb-0 rounded-sm text-uppercase font-900 border-green2-dark color-green2-dark bg-theme w-100",type:"button",onClick:e[1]||(e[1]=(...c)=>r.addCategory&&r.addCategory(...c))},"Добавить категорию ")])]),t("div",OE,[t("div",TE,[t("form",{onSubmit:e[16]||(e[16]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[t("div",UE,[t("a",{href:"javascript:void(0)",class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-green2-light w-100",onClick:e[2]||(e[2]=(...c)=>r.clearForm&&r.clearForm(...c))},[IE,_(" Новый товар ")]),t("div",VE,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=c=>i.productForm.in_stop_list_at=c),type:"checkbox",value:"false",id:"in-stop-list"},null,512),[[z,i.productForm.in_stop_list_at]]),ME])]),AE,EE,i.categories.length>0?(l(),a("div",DE,[(l(!0),a(v,null,O(i.categories,(c,h)=>(l(),a("p",{class:C(["px-3 font-10 rounded mr-1 mb-1 cursor-pointer",{"bg-info text-white":i.productCategories.indexOf(c.id)!=-1}])},[t("span",{onClick:g=>r.selectCategory(c)},p(c.title),9,zE)],2))),256))])):u("",!0),BE,t("div",LE,[RE,f(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>i.productForm.vk_product_id=c),disabled:!0,class:"form-control",id:"vk-product-id",placeholder:"Идентификатор"},null,512),[[k,i.productForm.vk_product_id]])]),t("div",NE,[qE,f(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=c=>i.productForm.article=c),class:"form-control",id:"article",placeholder:"Название артикула"},null,512),[[k,i.productForm.article]])]),t("div",WE,[YE,f(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=c=>i.productForm.title=c),class:"form-control",id:"title",placeholder:"Название"},null,512),[[k,i.productForm.title]])]),t("div",HE,[QE,f(t("select",{class:"form-control font-12","onUpdate:modelValue":e[7]||(e[7]=c=>i.productForm.type=c),id:"type","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(i.types,(c,h)=>(l(),a("option",{value:c.value},p(c.title),9,GE))),256))],512),[[Ve,i.productForm.type]])]),t("div",KE,[JE,f(t("textarea",{class:"form-control font-12","onUpdate:modelValue":e[8]||(e[8]=c=>i.productForm.description=c),placeholder:"Напишие полное описание товара",id:"description"},null,512),[[k,i.productForm.description]])]),t("div",XE,[ZE,f(t("input",{type:"number","onUpdate:modelValue":e[9]||(e[9]=c=>i.productForm.current_price=c),class:"form-control",id:"current-price",placeholder:"0 руб.",required:""},null,512),[[k,i.productForm.current_price]])]),t("div",eD,[tD,f(t("input",{type:"number","onUpdate:modelValue":e[10]||(e[10]=c=>i.productForm.old_price=c),class:"form-control",id:"old-price",placeholder:"0 руб"},null,512),[[k,i.productForm.old_price]])]),sD,t("h6",null,[_("Варианты товара "),i.productForm.variants?(l(),a("span",oD,"("+p(i.productForm.variants.length)+")",1)):u("",!0)]),t("button",{type:"button",class:"btn btn-border btn-m btn-full mb-0 rounded-sm text-uppercase font-900 border-green2-dark color-green2-dark bg-theme w-100",onClick:e[11]||(e[11]=(...c)=>r.addVariant&&r.addVariant(...c))},"Добавить вариант "),(l(!0),a(v,null,O(i.productForm.variants,(c,h)=>(l(),a("div",iD,[t("div",nD,[t("label",{for:"variant-key-"+h},"Ключ",8,lD),f(t("input",{type:"text","onUpdate:modelValue":g=>i.productForm.variants[h].key=g,class:"form-control",id:"variant-key-"+h,placeholder:"Название варианта",required:""},null,8,aD),[[k,i.productForm.variants[h].key]])]),t("div",rD,[t("label",{for:"variant-value-"+h},"Значение",8,dD),f(t("input",{type:"text","onUpdate:modelValue":g=>i.productForm.variants[h].value=g,class:"form-control",id:"variant-value-"+h,placeholder:"Величина\\значение варианта",required:""},null,8,cD),[[k,i.productForm.variants[h].value]])]),t("button",{type:"button",class:"btn btn-outline-danger w-100",onClick:g=>r.removeVariant(h)},[mD,_(" Удалить вариант ")],8,uD)]))),256)),hD,pD,t("div",_D,[t("form",{onSubmit:e[13]||(e[13]=W((...c)=>r.addSection&&r.addSection(...c),["prevent"])),class:"mb-2"},[f(t("input",{type:"text","onUpdate:modelValue":e[12]||(e[12]=c=>i.sectionForm.section=c),class:"form-control mb-2",placeholder:"Название секции","aria-label":"Recipient's username","aria-describedby":"button-addon2",required:""},null,512),[[k,i.sectionForm.section]]),fD],32),i.sections.length>0?(l(),a("div",bD,[(l(!0),a(v,null,O(i.sections,(c,h)=>(l(),a("span",gD,[_(p(c)+" ",1),t("i",{onClick:g=>r.removeSection(h),class:"fa-solid fa-trash ml-2 color-red2-dark"},null,8,yD)]))),256))])):u("",!0),vD]),(l(!0),a(v,null,O(i.productForm.options,(c,h)=>(l(),a("div",$D,[t("div",kD,[t("label",{for:"option-title-"+h,class:"font-12 my-0 w-100 d-flex justify-content-between"},[_(" Название характеристики "),t("button",{type:"button",class:"btn btn-link color-red2-light font-12 p-0",onClick:g=>r.removeOption(h)},PD,8,FD)],8,wD),f(t("input",{type:"text","onUpdate:modelValue":g=>i.productForm.options[h].title=g,class:"form-control",id:"option-title-"+h,placeholder:"Характеристика"},null,8,SD),[[k,i.productForm.options[h].title]])]),t("div",xD,[t("label",{for:"option-value-"+h,class:"font-12 my-0"},"Значение характеристики",8,jD),f(t("input",{type:"text","onUpdate:modelValue":g=>i.productForm.options[h].value=g,class:"form-control",id:"option-value-"+h,placeholder:"Значение"},null,8,OD),[[k,i.productForm.options[h].value]])]),t("div",TD,[t("label",{for:"option-section-"+h,class:"font-12 my-0"},"Секция товара",8,UD),f(t("select",{class:"form-control font-12","onUpdate:modelValue":g=>i.productForm.options[h].section=g,id:"option-section-"+h,"aria-label":"Floating label select example"},[VD,(l(!0),a(v,null,O(i.sections,g=>(l(),a("option",{value:g},p(g),9,MD))),256))],8,ID),[[Ve,i.productForm.options[h].section]])])]))),256)),t("button",{type:"button",class:"btn btn-border btn-m btn-full mb-0 rounded-sm text-uppercase font-900 border-green2-dark color-green2-dark bg-theme w-100",onClick:e[14]||(e[14]=(...c)=>r.addOption&&r.addOption(...c))},"Добавить характеристику "),AD,t("div",ED,[DD,t("div",zD,[t("label",BD,[LD,t("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:e[15]||(e[15]=(...c)=>r.onChangePhotos&&r.onChangePhotos(...c)),style:{display:"none"}},null,32)]),i.productForm.images?(l(!0),a(v,{key:0},O(i.productForm.images,(c,h)=>(l(),a("div",RD,[f(t("img",null,null,512),[[d,c]]),t("div",ND,[t("a",{href:"javascript:void(0)",onClick:g=>r.removeImage(h)},"Удалить",8,qD)])]))),256)):u("",!0),i.photos.length>0?(l(!0),a(v,{key:1},O(i.photos,(c,h)=>(l(),a("div",WD,[f(t("img",null,null,512),[[d,r.getPhoto(c).imageUrl]]),t("div",YD,[t("a",{href:"javascript:void(0)",onClick:g=>r.removePhoto(h)},"Удалить",8,HD)])]))),256)):u("",!0)])]),QD],32),i.productForm.id?(l(),a("div",GD)):u("",!0),i.productForm.id?(l(),a("button",{key:1,onClick:e[17]||(e[17]=(...c)=>r.removeProduct&&r.removeProduct(...c)),type:"button",class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-red2-dark w-100"},"Удалить товар ")):u("",!0)])])],64)}const JD=oe($E,[["render",KD]]),XD={props:["item"],data(){return{}},methods:{selectProduct(){this.$emit("select",this.item),window.scrollTo(50,400)},preparedImgUrl(s){if(s.toLocaleLowerCase().startsWith("https://")||s.toLocaleLowerCase().startsWith("http://"))return s},removeProduct(){this.$store.dispatch("removeProduct",this.item.id).then(s=>{this.$botNotification.success("Продукты","Продукт успешно удален!")}).catch(s=>{})},duplicateProduct(){this.$store.dispatch("duplicateProduct",this.item.id).then(s=>{this.$botNotification.success("Продукты","Продукт успешно продублирован!")}).catch(s=>{})}},mounted(){},computed:{}},ZD={class:"d-flex pb-2"},ez={class:"mr-auto"},tz={class:"rounded-m shadow-xl",width:"110"},sz={class:"ml-auto w-100 pl-3"},oz={class:"font-14 font-600 opacity-80 pb-2"},iz=t("div",{class:"clearfix"},null,-1),nz={class:"font-23 font-700 float-left pt-2"},lz={key:0,style:{"text-decoration":"line-through"},class:"font-15 opacity-50"},az={class:"float-right"},rz={class:"input-style input-style-1 mt-1"},dz=t("i",{class:"fa-regular fa-pen-to-square"},null,-1),cz=[dz];function uz(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",ZD,[t("div",ez,[f(t("img",tz,null,512),[[d,r.preparedImgUrl(o.item.images[0])]])]),t("div",sz,[t("h5",oz,"#"+p(o.item.id)+" "+p(o.item.title),1),iz,t("h1",nz,[_(p(o.item.current_price)+"₽",1),o.item.old_price?(l(),a("sup",lz,p(o.item.old_price)+"₽",1)):u("",!0)]),t("div",az,[t("div",rz,[t("button",{onClick:e[0]||(e[0]=(...c)=>r.selectProduct&&r.selectProduct(...c)),class:"btn btn-full btn-sm rounded-sm bg-highlight font-800 text-uppercase"},cz)])])])])}const mz=oe(XD,[["render",uz]]),hz={class:"card card-style"},pz={class:"content"},_z=t("button",{class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-blue2-dark w-100 mb-0",type:"submit",id:"button-addon2"}," Найти ",-1),fz={key:0},bz={data(){return{search:null,products:[],paginate:null}},computed:{...G(["getProducts","getProductsPaginateObject"]),filteredProducts(){return this.products}},mounted(){this.loadProducts()},methods:{selectProduct(s){this.$emit("select",s)},nextProducts(s){this.loadProducts(s)},loadProducts(s=0){return this.$store.dispatch("loadProducts",{dataObject:{search:this.search},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})}}},gz=Object.assign(bz,{__name:"ProductList",setup(s){return(e,o)=>(l(),a("div",hz,[t("div",pz,[t("form",{onSubmit:o[1]||(o[1]=W(n=>e.loadProducts(0),["prevent"]))},[f(t("input",{type:"text",class:"form-control mb-2",placeholder:"Поиск товара","aria-label":"Поиск товара","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),"aria-describedby":"button-addon2"},null,512),[[k,e.search]]),_z],32),t("p",null,[_("Всего товаров: "),e.paginate?(l(),a("span",fz,p(e.paginate.meta.total||0),1)):u("",!0)]),(l(!0),a(v,null,O(e.filteredProducts,(n,i)=>(l(),M(mz,{onSelect:r=>e.selectProduct(n),item:n},null,8,["onSelect","item"]))),256)),e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])]))}}),yz={class:"card card-style"},vz={class:"content mb-0"},$z=t("h3",{class:"font-700"},"Управление магазином",-1),kz={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},wz=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Fz=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Cz=t("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),Pz=["disabled"],Sz=t("i",{class:"fa-regular fa-floppy-disk mr-2"},null,-1),xz=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),jz={key:0,class:"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme w-100"},Oz=t("i",{class:"fa-brands fa-vk mr-2"},null,-1),Tz=t("span",{class:"spinner-border color-blue2-dark font-12 ml-2",style:{"border-width":"2px",width:"1rem",height:"1rem"},role:"status"},null,-1),Uz=t("i",{class:"fa-brands fa-vk mr-2"},null,-1),Iz=t("i",{class:"fa-solid fa-lock mr-2"},null,-1),Vz=t("i",{class:"fa-solid fa-lock mr-2"},null,-1),Mz=t("i",{class:"fa-solid fa-lock mr-2"},null,-1),Az=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Ez=["disabled"],Dz=t("i",{class:"fa-solid fa-trash mr-2"},null,-1),zz=t("h6",null,null,-1),Bz={data(){return{load:!1,url:null,link:null,bot:null,selectedProduct:null,botForm:{vk_shop_link:null}}},computed:{tg(){return window.Telegram.WebApp}},mounted(){this.updateProducts(),this.botForm.vk_shop_link=window.currentBot.vk_shop_link||null},methods:{updateShopLink(){this.load=!0,this.$store.dispatch("updateShopLink",{botForm:this.botForm}).then(s=>{this.load=!1,this.updateProducts(),this.$botNotification.notification("Менеджер магазина","Ссылка на источник в ВК обновлена")}).catch(()=>{this.load=!1})},exportOrders(){this.$botNotification.notification("Менеджер магазина","Функция недоступна")},exportProducts(){this.$botNotification.notification("Менеджер магазина","Функция недоступна")},importProducts(){this.$botNotification.notification("Менеджер магазина","Функция недоступна")},refresh(){this.load=!0,this.selectedProduct=null,this.$nextTick(()=>{this.load=!1})},removeAllProducts(){this.load=!0,this.$store.dispatch("removeAllProducts").then(s=>{this.load=!1,this.$botNotification.notification("Менеджер магазина","Все продукты удалены")}).catch(()=>{this.load=!1})},selectProduct(s){this.load=!0,this.$nextTick(()=>{this.selectedProduct=s,this.load=!1})},updateProducts(){this.load=!0,this.$store.dispatch("updateProductsFromVk").then(s=>{this.link=s.data.url||null,this.load=!1,this.url=null}).catch(()=>{this.load=!1})},open(s){this.tg.openLink(s)}}},fr=Object.assign(Bz,{__name:"ShopManager",setup(s){return(e,o)=>{const n=Qe("Popper");return l(),a(v,null,[t("div",yz,[t("div",vz,[$z,t("form",{onSubmit:o[1]||(o[1]=W((...i)=>e.updateShopLink&&e.updateShopLink(...i),["prevent"])),class:"mb-2"},[t("label",kz,[t("div",null,[T(n,null,{content:A(()=>[Fz]),default:A(()=>[wz]),_:1}),_(" ВК-группа ")]),Cz]),f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[0]||(o[0]=i=>e.botForm.vk_shop_link=i),"aria-describedby":"vk_shop_link"},null,512),[[k,e.botForm.vk_shop_link]]),t("button",{disabled:e.load,class:"btn btn-m btn-full mb-3 mt-2 rounded-sm text-uppercase font-900 shadow-s bg-red2-dark w-100"},[Sz,_(" Сохранить ")],8,Pz)],32),xz,e.link?u("",!0):(l(),a("p",jz,[Oz,_(" Подготовка ссылки "),Tz])),e.link?(l(),a("a",{key:1,onClick:o[2]||(o[2]=i=>e.open(e.link)),href:"javascript:void(0)",type:"button",class:"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme w-100"},[Uz,_(" Обновить товар из ВК ")])):u("",!0),t("button",{onClick:o[3]||(o[3]=(...i)=>e.exportOrders&&e.exportOrders(...i)),class:"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"},[Iz,_(" Экспортировать заказы ")]),t("button",{onClick:o[4]||(o[4]=(...i)=>e.importProducts&&e.importProducts(...i)),class:"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"},[Vz,_(" Импорт из XLS ")]),t("button",{onClick:o[5]||(o[5]=(...i)=>e.exportProducts&&e.exportProducts(...i)),class:"btn btn-border btn-m btn-full mb-1 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"},[Mz,_(" Экспорт в XLS ")]),Az,t("button",{onClick:o[6]||(o[6]=(...i)=>e.removeAllProducts&&e.removeAllProducts(...i)),disabled:e.load,class:"btn btn-m btn-full mb-3 rounded-sm text-uppercase font-900 shadow-s bg-red2-dark w-100"},[Dz,_(" Удалить товары ")],8,Ez)])]),zz,e.load?u("",!0):(l(),M(JD,{key:0,item:e.selectedProduct,onRefresh:e.refresh},null,8,["item","onRefresh"])),e.load?u("",!0):(l(),M(gz,{key:1,onSelect:e.selectProduct},null,8,["onSelect"]))],64)}}}),Lz=Object.freeze(Object.defineProperty({__proto__:null,default:fr},Symbol.toStringTag,{value:"Module"})),Rz={props:["company"],data(){return{locations:[],deletedLocations:[],locationForm:{id:null,lat:null,lon:null,address:null,description:null,location_channel:null,can_booking:!1,photos:[],company_id:null}}},computed:{...G(["getSelf","getCompany","getLocations"])},mounted(){this.loadLocationsByCompany(),window.addEventListener("select-map-coords",s=>{this.locationForm.lat=s.detail.param.lat,this.locationForm.lon=s.detail.param.lon})},methods:{openMapModal(){this.$botPages.map()},loadLocationsByCompany(){this.$store.dispatch("loadLocationsByCompany").then(s=>{this.locations=this.getLocations}).catch(()=>{})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.locationForm.photos.splice(s,1)},removeItem(s){this.locations[s].id!=null&&this.deletedLocations.push(this.locations[s].id),this.locations.splice(s,1)},submitLocations(){this.locations.forEach(s=>{let e=new FormData;if(Object.keys(s).forEach(o=>{const n=s[o]||"";typeof n=="object"?e.append(o,JSON.stringify(n)):e.append(o,n)}),s.photos){for(let o=0;o<s.photos.length;o++)e.append("files[]",s.photos[o]);e.delete("photos")}this.deletedLocations.length>0&&e.append("deleted_locations",JSON.stringify(this.deletedLocations)),this.$store.dispatch("createLocation",{locationForm:e}).then(o=>{this.$emit("callback"),this.$botNotification.success("Локация","Локация успешно созадана и сохранена")}).catch(o=>{})})},selectLocation(s){this.locationForm=s},submitLocation(){this.locationForm.company_id=this.company.id,this.locations.push(this.locationForm),this.$botNotification.success("Локация","Локация успешно добавлена в список. Не забудьте сохранить"),this.locationForm={id:null,lat:null,lon:null,address:null,description:null,location_channel:null,can_booking:!1,photos:[]}},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.locationForm.photos.push(e[o])}}},Nz={class:"card card-style"},qz={class:"content"},Wz={class:"fac fac-checkbox fac-red"},Yz=t("span",null,null,-1),Hz=t("label",{for:"box1-fac-checkbox"}," Можно бронировать столик",-1),Qz=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"location-address"},[_(" Адрес заведения "),t("span",{class:"badge rounded-pill bg-danger px-3 py-2 text-white m-0"},"Нужно")],-1),Gz=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Kz=t("h6",null,"Геопозиция",-1),Jz=t("i",{class:"fa-solid fa-location-dot mr-2"},null,-1),Xz=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"location-lat"},[_(" Широта "),t("span",{class:"badge rounded-pill bg-danger px-3 py-2 text-white m-0"},"Нужно")],-1),Zz=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"location-lon"},[_(" Долгота "),t("span",{class:"badge rounded-pill bg-danger px-3 py-2 text-white m-0"},"Нужно")],-1),eB={class:"form-label d-flex justify-content-between mt-2",id:"location-description"},tB={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},sB=t("span",{class:"badge rounded-pill bg-danger px-3 py-2 text-white m-0"},"Нужно",-1),oB=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),iB=t("h6",null,"Фотографии локаций",-1),nB={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},lB={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},aB=t("span",null,"+",-1),rB={class:"mb-2 img-preview",style:{"margin-right":"10px"}},dB={class:"remove"},cB=["onClick"],uB={class:"btn btn-m btn-full mb-0 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100",type:"submit"},mB={key:0},hB={key:1},pB={key:0,class:"mt-3"},_B={class:"card card-style bg-25","data-card-height":"200",style:{height:"250px"}},fB={class:"card-center"},bB=t("p",{class:"text-center mb-2"},[t("i",{class:"fa-solid fa-location-dot color-red2-dark fa-4x"})],-1),gB={class:"color-white font-700 text-center mb-0"},yB=t("p",{class:"color-white text-center opacity-60 mt-n1 mb-3"},"Локации компании ",-1),vB={class:"p-3"},$B=["disabled"],kB=t("div",{class:"card-overlay bg-black opacity-80"},null,-1),wB=["onClick"],FB={class:"content"},CB={key:0,href:"javascript:void(0)",class:"chip chip-small bg-dark2-dark w-100 my-3"},PB=t("i",{class:"fa fa-check bg-green1-dark"},null,-1),SB=t("span",{class:"color-white"},"Можно забронировать столик",-1),xB=[PB,SB],jB={key:0},OB={key:1},TB={key:2,class:"w-100 d-flex"},UB={class:"mb-2 img-preview",style:{"margin-right":"10px"}},IB={key:3,class:"w-100 d-flex"},VB={class:"mb-2 img-preview",style:{"margin-right":"10px"}},MB=["onClick"],AB=t("i",{class:"fa-regular fa-trash-can"},null,-1);function EB(s,e,o,n,i,r){const d=ie("mask"),c=ie("lazy");return l(),a(v,null,[t("div",Nz,[t("div",qz,[t("form",{onSubmit:e[7]||(e[7]=W((...h)=>r.submitLocation&&r.submitLocation(...h),["prevent"]))},[t("div",Wz,[Yz,f(t("input",{id:"box1-fac-checkbox","onUpdate:modelValue":e[0]||(e[0]=h=>i.locationForm.can_booking=h),type:"checkbox",value:"0"},null,512),[[z,i.locationForm.can_booking]]),Hz]),Qz,f(t("input",{type:"text",class:"form-control",placeholder:"Адрес","aria-label":"Адрес",maxlength:"255","onUpdate:modelValue":e[1]||(e[1]=h=>i.locationForm.address=h),"aria-describedby":"location-address",required:""},null,512),[[k,i.locationForm.address]]),Gz,Kz,t("p",{class:"mb-2",onClick:e[2]||(e[2]=(...h)=>r.openMapModal&&r.openMapModal(...h))},[Jz,_(" Открыть карту")]),Xz,f(t("input",{type:"text",class:"form-control",placeholder:"##.######","aria-label":"Широта",maxlength:"255","onUpdate:modelValue":e[3]||(e[3]=h=>i.locationForm.lat=h),"aria-describedby":"location-lat",required:""},null,512),[[d,"##.######"],[k,i.locationForm.lat]]),Zz,f(t("input",{type:"text",class:"form-control",placeholder:"##.######","aria-label":"Долгота",maxlength:"255","onUpdate:modelValue":e[4]||(e[4]=h=>i.locationForm.lon=h),"aria-describedby":"location-lon",required:""},null,512),[[d,"##.######"],[k,i.locationForm.lon]]),t("label",eB,[_(" Описание локации "),i.locationForm.description?(l(),a("small",tB," Длина текста "+p(i.locationForm.description.length),1)):u("",!0),sB]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Описание локации","aria-label":"Описание локации",maxlength:"255","onUpdate:modelValue":e[5]||(e[5]=h=>i.locationForm.description=h),"aria-describedby":"location-description",required:""},`
                    `,512),[[k,i.locationForm.description]]),oB,iB,t("div",nB,[t("label",lB,[aB,t("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:e[6]||(e[6]=(...h)=>r.onChangePhotos&&r.onChangePhotos(...h)),style:{display:"none"}},null,32)]),i.locationForm.photos?(l(!0),a(v,{key:0},O(i.locationForm.photos,(h,g)=>(l(),a("div",rB,[f(t("img",null,null,512),[[c,r.getPhoto(h).imageUrl]]),t("div",dB,[t("a",{onClick:w=>r.removePhoto(g)},"Удалить",8,cB)])]))),256)):u("",!0)]),t("button",uB,[i.locationForm.id?(l(),a("span",mB,"Обновить расположение")):(l(),a("span",hB,"Добавить расположение"))])],32)])]),i.locations?(l(),a("div",pB,[t("div",_B,[t("div",fB,[bB,t("h2",gB,p(o.company.title||"Не установлен"),1),yB,t("div",vB,[t("button",{onClick:e[8]||(e[8]=(...h)=>r.submitLocations&&r.submitLocations(...h)),disabled:i.locations.length===0&&i.deletedLocations.length===0,class:"btn btn-m btn-full mb-0 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Сохранить локации заведений ",8,$B)])]),kB]),(l(!0),a(v,null,O(i.locations,(h,g)=>(l(),a("div",{class:"card card-style",onClick:w=>r.selectLocation(h)},[t("div",FB,[t("h4",null,p(h.address||"Не указано"),1),h.can_booking?(l(),a("a",CB,xB)):u("",!0),t("ul",null,[h.location_channel?(l(),a("li",jB,[_("Канал заведения "),t("strong",null,p(h.location_channel),1)])):u("",!0),t("li",null,p(h.description||"Не указано"),1),t("li",null,"Широта: "+p(h.lat),1),t("li",null,"Долгота: "+p(h.lon),1)]),h.photos?(l(),a("h6",OB,"Фотографии локаций")):u("",!0),h.photos?(l(),a("div",TB,[h.photos.length>0?(l(!0),a(v,{key:0},O(h.photos,(w,x)=>(l(),a("div",UB,[f(t("img",null,null,512),[[c,r.getPhoto(w).imageUrl]])]))),256)):u("",!0)])):u("",!0),h.images?(l(),a("div",IB,[h.images.length>0?(l(!0),a(v,{key:0},O(h.images,(w,x)=>(l(),a("div",VB,[f(t("img",null,null,512),[[c,"/images-by-company-id/"+o.company.id+"/"+w]])]))),256)):u("",!0)])):u("",!0),t("button",{type:"button",onClick:w=>r.removeItem(g),class:"btn btn-outline-danger py-1 px-3 text-center w-100"},[AB,_(" Удалить ")],8,MB)])],8,wB))),256))])):u("",!0)],64)}const DB=oe(Rz,[["render",EB]]);const zB={class:"card card-style bg-1",style:{height:"350px"}},BB={key:0,class:"card-center"},LB={class:"w-100 d-flex justify-content-center p-3"},RB={class:"object-cover",style:{width:"100px","border-radius":"50%"},alt:""},NB={class:"color-white font-700 text-center mb-0"},qB={class:"color-white text-center opacity-60 mt-n1 mb-3"},WB={key:1,class:"card-center"},YB=t("p",null,"Загружаем данные компании",-1),HB=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),QB=[YB,HB],GB=t("div",{class:"card-overlay bg-black opacity-70"},null,-1),KB={key:0,class:"card card-style"},JB={key:0,class:"content"},XB={class:"form-label d-flex justify-content-between align-items-center",id:"company-title"},ZB=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),eL=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),tL=t("div",null,"Нужно ",-1),sL={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"company-title"},oL=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),iL=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),nL=t("div",null,"Нужно ",-1),lL=["value"],aL={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"company-slug"},rL=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dL=t("div",null,[_("Название компании на АНГЛИЙСКОМ"),t("br"),_(" без пробелов! можно использовать _"),t("br"),_(" Должно быть уникальным! Не отображается пользователю. ")],-1),cL=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),uL=t("div",null,"Нужно ",-1),mL={class:"form-label d-flex justify-content-between align-items-center flex-wrap mt-2",id:"company-description"},hL=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pL=t("div",null,'Добавится в раздел "О Нас"',-1),_L=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),fL=t("div",null,"Нужно ",-1),bL={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},gL={class:"form-label",id:"company-address"},yL=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),vL=t("div",null,[_("Где находится главное заведение компании!"),t("br"),_('Можно не указывать, т.к. есть еще "Локации" ')],-1),$L=t("label",{class:"form-label",id:"company-email"},"Основная почта компании",-1),kL=t("label",{class:"form-label",id:"company-manager"},"Менеджер компании",-1),wL=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),FL=t("h6",{class:"d-flex justify-content-between align-items-center"},[_("Логотип компании "),t("i",{class:"fa-solid fa-star color-red2-dark"})],-1),CL={class:"d-flex justify-content-center"},PL={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},SL={key:0,class:"mb-2 img-preview",style:{"margin-right":"10px"}},xL={class:"remove"},jL=t("i",{class:"fa-regular fa-trash-can"},null,-1),OL=[jL],TL={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},UL={class:"remove"},IL=t("i",{class:"fa-regular fa-trash-can"},null,-1),VL=[IL],ML=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),AL=t("h6",null,"Телефонные номера",-1),EL=t("div",{class:"d-flex justify-content-between"},[t("small",null,"Номер")],-1),DL=["onUpdate:modelValue","aria-describedby"],zL=["onClick"],BL=t("i",{class:"fa-regular fa-trash-can"},null,-1),LL=[BL],RL=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),NL=t("h6",null,"Ссылки на соц. сети",-1),qL=t("div",{class:"d-flex justify-content-between"},[t("small",null,"Ссылка")],-1),WL=["onUpdate:modelValue","aria-describedby"],YL=["onClick"],HL=t("i",{class:"fa-regular fa-trash-can"},null,-1),QL=[HL],GL=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),KL=t("h6",null,"График работы",-1),JL={class:"d-flex justify-content-between align-items-center"},XL=t("small",null,"День недели ",-1),ZL=t("small",null,"Заполнить\\очистить",-1),eR=[ZL],tR=["onUpdate:modelValue","aria-describedby"],sR=["onClick"],oR=t("i",{class:"fa-regular fa-trash-can"},null,-1),iR=[oR],nR=["disabled"],lR=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),aR=t("button",{type:"submit",class:"btn btn-m btn-full mb-0 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Сохранить данные компании ",-1),rR={key:1,class:"content"},dR=t("p",null,"Загружаем данные компании",-1),cR=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),uR=[dR,cR],mR={key:1},hR={data(){return{step:0,load:!1,photo:null,removedImage:null,need_reset:!1,vat_codes:[{id:1,title:"Общая система налогообложения"},{id:2,title:"Упрощенная (УСН, доходы)"},{id:3,title:"Упрощенная (УСН, доходы минус расходы)"},{id:4,title:"Единый налог на вмененный доход (ЕНВД)"},{id:5,title:"Единый сельскохозяйственный налог (ЕСН)"},{id:6,title:"Патентная система налогообложения"}],company:null,companyForm:{id:null,title:null,slug:null,description:null,address:null,phones:[""],links:[""],email:null,vat_code:1,schedule:[],manager:null}}},computed:{...G(["getSelf","getCompany"])},watch:{companyForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.loadCompany()},methods:{resetForm(){this.photo=null,this.removedImage=null,this.companyForm={id:null,title:null,slug:null,description:null,address:null,phones:[""],links:[""],email:null,schedule:[],manager:null,vat_code:1},this.$nextTick(()=>{this.need_reset=!1})},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(s){const e=s.target.files;this.photo=e[0],this.companyForm.image=null},schedulePlaceholder(){this.companyForm.schedule.length>0?this.companyForm.schedule=[]:this.companyForm.schedule=["Понедельник - с 8:00 до 20:00","Вторник - с 8:00 до 20:00","Среда - с 8:00 до 20:00","Четверг - с 8:00 до 20:00","Пятница - с 8:00 до 20:00","Суббота - с 8:00 до 20:00","Воскресенье - выходной"]},removeCompanyImage(){this.removedImage=this.companyForm.image,this.companyForm.image=null},addItem(s){this.companyForm[s].push("")},removeItem(s,e){this.companyForm[s].splice(e,1)},submitForm(){let s=new FormData;Object.keys(this.companyForm).forEach(e=>{const o=this.companyForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("company_logo",this.photo),this.removedImage!=null&&s.append("removed_image",this.removedImage),this.$store.dispatch(this.companyForm.id===null?"createCompany":"updateCompany",{companyForm:s}).then(e=>{this.$emit("callback",e.data),this.$botNotification.notification("Компания","Компания успешно создана")}).catch(e=>{})},loadCompany(){this.$store.dispatch("loadCompany").then(()=>{this.$nextTick(()=>{const s=this.getCompany;this.company=s,this.companyForm={id:s.id||null,title:s.title||null,slug:s.slug||null,image:s.image||null,description:s.description||null,address:s.address||null,phones:s.phones||[""],links:s.links||[""],email:s.email||null,vat_code:s.vat_code||1,schedule:s.schedule||[],manager:s.manager||null}})})}}},br=Object.assign(hR,{__name:"CompanyManager",setup(s){return(e,o)=>{const n=Qe("Popper"),i=ie("lazy"),r=ie("mask");return l(),a(v,null,[t("div",zB,[e.company?(l(),a("div",BB,[t("div",LB,[f(t("img",RB,null,512),[[i,"/images-by-company-id/"+e.company.id+"/"+e.company.image]])]),t("h2",NB,p(e.company.title||"Нет названия"),1),t("p",qB,p(e.company.address||"Нет адреса"),1),t("a",{href:"javascript:void(0)",onClick:o[0]||(o[0]=d=>e.step=0),class:C([{"bg-highlight":e.step===0,"bg-gray2-light":e.step!==0},"btn btn-m font-900 text-uppercase btn-center-xl mb-2"])}," Информация о компании ",2),t("a",{href:"javascript:void(0)",onClick:o[1]||(o[1]=d=>e.step=1),class:C([{"bg-highlight":e.step===1,"bg-gray2-light":e.step!==1},"btn btn-m font-900 text-uppercase btn-center-xl"])}," Информация о расположении ",2)])):(l(),a("div",WB,QB)),GB]),e.step===0?(l(),a("div",KB,[e.company?(l(),a("div",JB,[t("form",{onSubmit:o[16]||(o[16]=W((...d)=>e.submitForm&&e.submitForm(...d),["prevent"]))},[t("label",XB,[t("span",null,[T(n,{content:"Название вашей компании"},{default:A(()=>[ZB]),_:1}),_(" Название компании ")]),T(n,null,{content:A(()=>[tL]),default:A(()=>[eL]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"Название","aria-label":"Название","onUpdate:modelValue":o[2]||(o[2]=d=>e.companyForm.title=d),maxlength:"255","aria-describedby":"company-title",required:""},null,512),[[k,e.companyForm.title]]),t("label",sL,[t("span",null,[T(n,{content:"Тип налогооблажения вашей компании"},{default:A(()=>[oL]),_:1}),_(" Тип налогооблажения ")]),T(n,null,{content:A(()=>[nL]),default:A(()=>[iL]),_:1})]),f(t("select",{type:"text",class:"form-control","aria-label":"Выберите налогооблажение","onUpdate:modelValue":o[3]||(o[3]=d=>e.companyForm.vat_code=d),"aria-describedby":"company-vat-code",required:""},[(l(!0),a(v,null,O(e.vat_codes,(d,c)=>(l(),a("option",{value:d.id},p(d.title||"Не указано"),9,lL))),256))],512),[[Ve,e.companyForm.vat_code]]),t("label",aL,[t("span",null,[T(n,null,{content:A(()=>[dL]),default:A(()=>[rL]),_:1}),_(" Домен компании ")]),T(n,null,{content:A(()=>[uL]),default:A(()=>[cL]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"Мнемоническое имя","aria-label":"Мнемоническое имя","onUpdate:modelValue":o[4]||(o[4]=d=>e.companyForm.slug=d),pattern:"^[a-zA-Z][a-zA-Z0-9-_]{1,40}$",maxlength:"255","aria-describedby":"company-slug",required:""},null,512),[[k,e.companyForm.slug]]),t("label",mL,[t("span",null,[T(n,null,{content:A(()=>[pL]),default:A(()=>[hL]),_:1}),_(" Описание компании ")]),T(n,null,{content:A(()=>[fL]),default:A(()=>[_L]),_:1}),e.companyForm.description?(l(),a("small",bL," Длина текста "+p(e.companyForm.description.length),1)):u("",!0)]),f(t("textarea",{type:"text",class:"form-control",style:{"min-height":"250px"},placeholder:"Описание компании","aria-label":"Описание компании","onUpdate:modelValue":o[5]||(o[5]=d=>e.companyForm.description=d),"aria-describedby":"company-description",required:""},null,512),[[k,e.companyForm.description]]),t("label",gL,[T(n,null,{content:A(()=>[vL]),default:A(()=>[yL]),_:1}),_(" Основной адрес компании")]),f(t("input",{type:"text",class:"form-control",placeholder:"Адрес","aria-label":"Адрес",maxlength:"255","onUpdate:modelValue":o[6]||(o[6]=d=>e.companyForm.address=d),"aria-describedby":"company-address"},null,512),[[k,e.companyForm.address]]),$L,f(t("input",{type:"email",class:"form-control",placeholder:"Почтовый адрес","aria-label":"Почтовый адрес",maxlength:"255","onUpdate:modelValue":o[7]||(o[7]=d=>e.companyForm.email=d),"aria-describedby":"company-email"},null,512),[[k,e.companyForm.email]]),kL,f(t("input",{type:"text",class:"form-control",placeholder:"Имя менеджера","aria-label":"Имя менеджера","onUpdate:modelValue":o[8]||(o[8]=d=>e.companyForm.manager=d),maxlength:"255","aria-describedby":"company-manager"},null,512),[[k,e.companyForm.manager]]),wL,FL,t("div",CL,[t("label",PL,[_(" + "),t("input",{type:"file",id:"photos",accept:"image/*",onChange:o[9]||(o[9]=(...d)=>e.onChangePhotos&&e.onChangePhotos(...d)),style:{display:"none"}},null,32)]),e.photo?(l(),a("div",SL,[f(t("img",null,null,512),[[i,e.getPhoto().imageUrl]]),t("div",xL,[t("a",{onClick:o[10]||(o[10]=d=>e.photo=null)},OL)])])):u("",!0),e.companyForm.image?(l(),a("div",TL,[f(t("img",null,null,512),[[i,"/images/"+e.companyForm.slug+"/"+e.companyForm.image]]),t("div",UL,[t("a",{onClick:o[11]||(o[11]=(...d)=>e.removeCompanyImage&&e.removeCompanyImage(...d))},VL)])])):u("",!0)]),ML,AL,EL,(l(!0),a(v,null,O(e.companyForm.phones,(d,c)=>(l(),a("div",{class:"d-flex justify-content-between mb-2",key:"phone"+c},[f(t("input",{type:"text",class:"form-control w-100 mr-2",placeholder:"+7(000)000-00-00","aria-label":"Номер телефона",maxlength:"255","onUpdate:modelValue":h=>e.companyForm.phones[c]=h,"aria-describedby":"company-phone-"+c},null,8,DL),[[r,"+7(###)###-##-##"],[k,e.companyForm.phones[c]]]),t("button",{type:"button",onClick:h=>e.removeItem("phones",c),class:"btn btn-outline-danger py-1 px-3"},LL,8,zL)]))),128)),t("button",{type:"button",onClick:o[12]||(o[12]=d=>e.addItem("phones")),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще номер "),RL,NL,qL,(l(!0),a(v,null,O(e.companyForm.links,(d,c)=>(l(),a("div",{class:"d-flex justify-content-between mb-2",key:"link"+c},[f(t("input",{type:"text",class:"form-control mr-2 w-100",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":h=>e.companyForm.links[c]=h,"aria-describedby":"company-link-"+c},null,8,WL),[[k,e.companyForm.links[c]]]),t("button",{type:"button",onClick:h=>e.removeItem("links",c),class:"btn btn-outline-danger py-1 px-3"},QL,8,YL)]))),128)),t("button",{type:"button",onClick:o[13]||(o[13]=d=>e.addItem("links")),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще ссылку "),GL,KL,t("div",JL,[XL,t("a",{href:"javascript:void(0)",onClick:o[14]||(o[14]=(...d)=>e.schedulePlaceholder&&e.schedulePlaceholder(...d))},eR)]),(l(!0),a(v,null,O(e.companyForm.schedule,(d,c)=>(l(),a("div",{key:"link"+c,class:"d-flex justify-content-between mb-2"},[f(t("input",{type:"text",class:"form-control mr-2 w-100",placeholder:"День недели и время работы","aria-label":"День недели и время работы",maxlength:"255","onUpdate:modelValue":h=>e.companyForm.schedule[c]=h,"aria-describedby":"company-schedule-"+c},null,8,tR),[[k,e.companyForm.schedule[c]]]),t("button",{type:"button",onClick:h=>e.removeItem("schedule",c),class:"btn btn-outline-danger py-1 px-3"},iR,8,sR)]))),128)),t("button",{type:"button",disabled:e.companyForm.schedule.length===7,onClick:o[15]||(o[15]=d=>e.addItem("schedule")),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще время работы ",8,nR),lR,aR],32)])):(l(),a("div",rR,uR))])):u("",!0),e.step===1?(l(),a("div",mR,[e.company&&!e.load?(l(),M(DB,{key:0,company:e.company},null,8,["company"])):u("",!0)])):u("",!0)],64)}}}),pR=Object.freeze(Object.defineProperty({__proto__:null,default:br},Symbol.toStringTag,{value:"Module"}));const _R={data(){return{selected_warning:null,load:!1,need_payments:!1,need_shop:!1,bot:null,need_threads:!1,need_cashback_config:!1,cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],botForm:{title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,description:null,info_link:null,commands:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,cashback_fire_percent:0,cashback_fire_period:0,photos:[],selected_bot_template_id:null,pages:[],warnings:[],amo:null,is_active:!1}}},computed:{filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(s=>!(this.botForm.warnings.findIndex(e=>e.rule_key===s.key)>=0))}},watch:{need_threads:function(s,e){let o=[{title:"Отзывы",key:"reviews",value:null},{title:"Операции с cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=o),this.need_threads&&this.botForm.message_threads&&o.forEach(n=>{this.botForm.message_threads.findIndex(r=>r.key===n.key)===-1&&this.botForm.message_threads.push(n)})},need_payments:function(s,e){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},mounted(){this.loadBotAdminConfig(),window.addEventListener("select-telegram-channel-id",s=>{this.botForm[s.detail.param]=s.detail.channel})},methods:{removeCommands(s){this.botForm.commands.splice(s,1)},addCommands(){this.botForm.commands==null&&(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.botForm={id:this.bot.id||null,title:this.bot.title||null,short_description:this.bot.short_description||null,long_description:this.bot.long_description||null,is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,commands:this.bot.commands||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,image:this.bot.image||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1||10,level_2:this.bot.level_2||0,level_3:this.bot.level_3||0,warnings:this.bot.warnings||[],photos:this.bot.photos||[],amo:this.bot.amo||null,is_active:this.bot.is_active||!1},this.botForm.commands==null&&(this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.vk_shop_link&&(this.need_shop=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0)})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},onChangePhotos(s){const e=s.target.files;this.botForm.image=null;for(let o=0;o<e.length;o++)this.botForm.photos.push(e[o])},addItem(s){this.botForm[s].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(s,e){this.botForm[s].splice(e,1)},removePhoto(s){s?this.botForm.photos.splice(s,1):this.botForm.image=null},switchStatus(){this.$store.dispatch("switchBotStatus").then(()=>{this.$botNotification.success("Конструктор ботов","Статус бота успешно изменен!")})},addBot(){let s=new FormData;Object.keys(this.botForm).forEach(e=>{const o=this.botForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.company&&s.append("company_id",this.company.id);for(let e=0;e<this.botForm.photos.length;e++)s.append("images[]",this.botForm.photos[e]);s.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:s}).then(e=>{this.$emit("callback",e.data),this.$botNotification.success("Конструктор ботов",this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!"),this.bot==null&&(this.botForm={title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,balance:null,tax_per_day:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],warnings:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[],is_active:!1})}).catch(e=>{})},getWarning(s){let e=this.warnings.find(o=>o.key===s);return e||{title:"Не найдено"}},removeWarning(s){this.botForm.warnings.splice(s,1)},removeCashBackConfig(s){this.botForm.cashback_config.splice(s,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},addWarning(){const s=this.selected_warning;this.botForm.warnings.push({rule_key:s.key,rule_value:0,is_active:!0}),this.selected_warning=null},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},openUrl(s){this.tg.openLink(s)}}},fR={class:"card card-style bg-1",style:{height:"330px"}},bR={key:0,class:"card-center"},gR={class:"w-100 d-flex justify-content-center p-3"},yR={class:"object-cover",style:{width:"100px","border-radius":"50%"},alt:""},vR={class:"color-white font-700 text-center mb-2"},$R={class:"color-white text-center opacity-60 mt-n1 my-1"},kR={href:"#",class:"color-white"},wR=t("i",{class:"fa-solid fa-sack-dollar"},null,-1),FR={class:"color-white text-center opacity-60 mt-n1 my-1"},CR=t("i",{class:"fa-solid fa-hand-holding-dollar"},null,-1),PR={class:"color-white text-center opacity-60 mt-n1 my-1"},SR=t("i",{class:"fa-regular fa-calendar-days"},null,-1),xR={class:"w-100 d-flex justify-content-center py-4"},jR={class:"custom-control ios-switch"},OR=t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1),TR={key:0,class:"ml-5 text-white"},UR={key:1,class:"ml-5 text-white"},IR={key:1,class:"card-center"},VR=t("p",null,"Загружаем данные бота",-1),MR=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),AR=[VR,MR],ER=t("div",{class:"card-overlay bg-black opacity-70"},null,-1),DR={key:0,class:"content"},zR={class:"mb-0"},BR={class:"mb-2"},LR={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-domain"},RR=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),NR=t("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),qR=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),WR=t("div",null,"Нужно ",-1),YR={key:0},HR={class:"mb-2"},QR={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center flex-wrap",id:"bot-token"},GR=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),KR=t("div",null,"Взять из BotFater при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),JR=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),XR=t("div",null,"Нужно ",-1),ZR={class:"mb-2"},eN=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-token-dev"},"Токен бота (для тестирования)",-1),tN={class:"mb-2"},sN={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-title"},oN=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),iN=t("div",null,"Имя бота, которая отображается у всех пользователей в боте",-1),nN={class:"mb-2"},lN={class:"d-flex justify-content-between flex-wrap"},aN={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-short-description"},rN=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),dN=t("div",null,"Описание бота, которое отобразится при переходе в бота по ссылке",-1),cN={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},uN={class:"mb-2"},mN={class:"d-flex justify-content-between flex-wrap"},hN={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-short-description"},pN=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),_N=t("div",null,"Данное описание отобразится при первом переходе в бота или после очистки бота пользователем ",-1),fN={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},bN=t("div",{class:"divider divider-large my-4"},null,-1),gN=t("h6",null,"Команды в боте",-1),yN={key:0},vN=t("em",null,"К сожалению, вы еще не добавили ни 1й команды в меню бота",-1),$N=[vN],kN=t("p",{class:"mb-2"},[t("em",null,[_("Например, команда "),t("b",null,"/start"),_(", а описание к ней: "),t("b",null,"начало работы с системой")])],-1),wN={class:"mb-2"},FN=["onUpdate:modelValue","aria-describedby"],CN={class:"mb-2"},PN=["onUpdate:modelValue","aria-describedby"],SN=["onClick"],xN=t("i",{class:"fa-regular fa-trash-can"},null,-1),jN=t("div",{class:"divider divider-small my-4 bg-highlight"},null,-1),ON={class:"mb-2"},TN=t("p",{class:"mb-2"},[t("em",null,[_("Данные команды отображаются в кнопке "),t("b",null,"Меню"),_(" слева от поля ввода в боте")])],-1),UN=t("div",{class:"divider divider-large my-4"},null,-1),IN={class:"mb-2"},VN={class:"d-flex justify-content-between align-items-center flex-wrap"},MN={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center w-100",id:"bot-order-channel"},AN=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),EN=t("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),DN=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),zN=[DN],BN=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),LN=t("div",null,"Нужно ",-1),RN={class:"mb-2"},NN={class:"d-flex justify-content-between"},qN={class:"form-label d-flex justify-content-between mt-2",id:"bot-main-channel"},WN=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),YN=[WN],HN={class:"mb-2"},QN={class:"form-check"},GN=t("label",{class:"form-check-label",for:"need-payments"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),KN={key:1,class:"mb-2"},JN=t("p",{class:"mb-2 font-italic"},[_("Для того, чтоб узнать идентификатор топика в группе впишите в чат "),t("strong",null,'"Мой id"')],-1),XN={class:"list-group"},ZN={class:"list-group-item"},eq={class:"mb-0"},tq=["onUpdate:modelValue"],sq={key:0,class:"mb-0"},oq={class:"mb-2"},iq={class:"d-flex justify-content-between flex-wrap"},nq={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-description"},lq=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),aq=t("div",null,"Отобразится пользователю при первом запуске",-1),rq=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),dq=t("div",null,"Нужно ",-1),cq={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},uq={class:"mb-2"},mq={class:"d-flex justify-content-between flex-wrap"},hq={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-description"},pq=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),_q=t("div",null,'Для меню "О Боте"',-1),fq=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),bq=t("div",null,"Нужно ",-1),gq={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},yq={class:"mb-2"},vq={class:"d-flex justify-content-between flex-wrap"},$q={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-maintenance-message"},kq=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),wq=t("div",null,'Для меню "О Боте"',-1),Fq=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Cq=t("div",null,"Нужно ",-1),Pq={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Sq={class:"mb-2"},xq={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-level-1"},jq=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Oq=t("div",null,"Нужно ",-1),Tq={class:"mb-2"},Uq=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),Iq={class:"mb-2"},Vq=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),Mq={class:"mb-2"},Aq=t("label",{class:"form-label",id:"cashback-fired-period"},"Период сгорания CashBack",-1),Eq=["value"],Dq={key:0,class:"mb-3"},zq=t("label",{class:"form-label",id:"cashback-fired-level"},"Уровень сгорания CashBack, %",-1),Bq={class:"mb-2"},Lq={class:"form-check"},Rq=t("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),Nq={key:1,class:"mb-2"},qq=t("h6",null,"Настройка категорий CashBack-а",-1),Wq={class:"d-flex justify-content-between align-items-center w-100"},Yq=t("small",null,"Название категории",-1),Hq=["onClick"],Qq=t("i",{class:"fa-regular fa-trash-can"},null,-1),Gq=[Qq],Kq=["onUpdate:modelValue","aria-describedby"],Jq=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Xq={class:"mb-2"},Zq={class:"form-group"},eW=t("label",{class:"form-check-label",for:"warning-rules"},[t("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),_(" Правила критических оповещений ")],-1),tW=t("option",{value:null},"Не выбрано",-1),sW=["value"],oW={class:"card"},iW={class:"m-0"},nW={class:"form-check"},lW=["onUpdate:modelValue","id"],aW=["for"],rW={key:0},dW={key:1},cW=["onUpdate:modelValue"],uW=["onClick"],mW=t("i",{class:"fa-solid fa-trash-can"},null,-1),hW=[mW],pW=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),_W={class:"mb-2"},fW={class:"form-check"},bW=t("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),gW={key:2,class:"mb-2"},yW={class:"form-check"},vW=["value"],$W=t("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),kW={class:"mb-2"},wW={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},FW=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),CW=t("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),PW=t("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить",-1),SW={class:"mb-2"},xW={class:"form-check"},jW=t("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),OW={key:3,class:"mb-2"},TW={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},UW=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),IW=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),VW=t("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),MW={class:"mb-2"},AW={class:"form-label d-flex justify-content-between mt-2",id:"bot-callback-url"},EW=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),DW=t("div",null,"Ссылка на внешний сервис для обратной связи ",-1),zW=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),BW={class:"mb-2"},LW={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},RW=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),NW=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),qW=t("a",{target:"_blank",href:"https://telegra.ph"},"Создать",-1),WW=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),YW=t("h6",null,"Ссылки на соц. сети",-1),HW={class:"d-flex justify-content-between align-items-center w-100"},QW=t("small",null,"Ссылка",-1),GW=["onClick"],KW=t("i",{class:"fa-regular fa-trash-can"},null,-1),JW=[KW],XW=["onUpdate:modelValue","aria-describedby"],ZW=["onUpdate:modelValue"],eY=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),tY={class:"d-flex justify-content-between align-items-center"},sY=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),oY=t("div",null,"Нужно ",-1),iY={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},nY={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},lY=t("span",null,"+",-1),aY={class:"mb-2 img-preview",style:{"margin-right":"10px"}},rY={class:"remove"},dY=["onClick"],cY=t("i",{class:"fa-regular fa-trash-can"},null,-1),uY=[cY],mY={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},hY={class:"remove"},pY=t("i",{class:"fa-regular fa-trash-can"},null,-1),_Y=[pY],fY=["disabled"],bY={key:1,class:"content"},gY=t("p",null,"Загружаем данные бота",-1),yY=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),vY=[gY,yY];function $Y(s,e,o,n,i,r){const d=Qe("Popper"),c=ie("lazy");return l(),a(v,null,[t("div",fR,[i.bot?(l(),a("div",bR,[t("div",gR,[f(t("img",yR,null,512),[[c,"/images-by-company-id/"+i.bot.company_id+"/"+i.bot.image]])]),t("h2",vR,p(i.bot.bot_domain||"Нет домена"),1),t("p",$R,[t("a",kR,[wR,_(" Баланс "+p(i.bot.balance||"0")+" ₽",1)])]),t("p",FR,[CR,_(" Тариф "+p(i.bot.tax_per_day||"0")+" ₽/день ",1)]),t("p",PR,[SR,_(" Дней "+p(i.bot.balance/i.bot.tax_per_day)+" осталось ",1)]),t("div",xR,[t("div",jR,[f(t("input",{type:"checkbox",onChange:e[0]||(e[0]=(...h)=>r.switchStatus&&r.switchStatus(...h)),"onUpdate:modelValue":e[1]||(e[1]=h=>i.botForm.is_active=h),class:"ios-input",id:"toggle-id-1"},null,544),[[z,i.botForm.is_active]]),OR]),i.botForm.is_active?(l(),a("span",TR,"Вкл")):(l(),a("span",UR,"Выкл"))])])):(l(),a("div",IR,AR)),ER]),t("form",{onSubmit:e[38]||(e[38]=W((...h)=>r.addBot&&r.addBot(...h),["prevent"])),class:"card card-style"},[i.bot?(l(),a("div",DR,[t("div",zR,[t("div",BR,[t("label",LR,[t("div",null,[T(d,null,{content:A(()=>[NR]),default:A(()=>[RR]),_:1}),_(" Доменное имя бота из BotFather ")]),T(d,null,{content:A(()=>[WR]),default:A(()=>[qR]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота","onUpdate:modelValue":e[2]||(e[2]=h=>i.botForm.bot_domain=h),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,i.botForm.bot_domain]]),i.botForm.bot_domain?(l(),a("p",YR,[_("Проверить работу бота "),t("a",{href:"javascript:void(0)",onClick:e[3]||(e[3]=h=>r.openUrl("https://t.me/"+i.botForm.bot_domain))},"@"+p(i.botForm.bot_domain),1)])):u("",!0)]),t("div",HR,[t("label",QR,[t("div",null,[T(d,null,{content:A(()=>[KR]),default:A(()=>[GR]),_:1}),_(" Токен бота ")]),T(d,null,{content:A(()=>[XR]),default:A(()=>[JR]),_:1}),t("a",{href:"javascript:void(0)",onClick:e[4]||(e[4]=h=>r.openUrl("https://t.me/botfather")),class:"w-100",target:"_blank"},"Создать нового бота в ТГ")]),f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[5]||(e[5]=h=>i.botForm.bot_token=h),maxlength:"255","aria-describedby":"bot-token",required:""},null,512),[[k,i.botForm.bot_token]])]),t("div",ZR,[eN,f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[6]||(e[6]=h=>i.botForm.bot_token_dev=h),maxlength:"255","aria-describedby":"bot-token-dev"},null,512),[[k,i.botForm.bot_token_dev]])]),t("div",tN,[t("label",sN,[t("div",null,[T(d,null,{content:A(()=>[iN]),default:A(()=>[oN]),_:1}),_(" Отображаемое имя бота ")])]),f(t("input",{type:"text",class:"form-control",placeholder:"Отображаемое имя бота","aria-label":"Отображаемое имя бота","onUpdate:modelValue":e[7]||(e[7]=h=>i.botForm.title=h),maxlength:"64","aria-describedby":"bot-title"},null,512),[[k,i.botForm.title]])]),t("div",nN,[t("div",lN,[t("label",aN,[t("div",null,[T(d,null,{content:A(()=>[dN]),default:A(()=>[rN]),_:1}),_(" Короткое описание бота ")])]),i.botForm.short_description?(l(),a("small",cN," Длина текста "+p(i.botForm.short_description.length)+" / 120",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Короткое описание бота","aria-label":"Короткое описание бота","onUpdate:modelValue":e[8]||(e[8]=h=>i.botForm.short_description=h),maxlength:"120",style:{"min-height":"200px"},"aria-describedby":"short-description"},`
                    `,512),[[k,i.botForm.short_description]])]),t("div",uN,[t("div",mN,[t("label",hN,[t("div",null,[T(d,null,{content:A(()=>[_N]),default:A(()=>[pN]),_:1}),_(" Длинное описание бота ")])]),i.botForm.long_description?(l(),a("small",fN," Длина текста "+p(i.botForm.long_description.length)+" / 512",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Длинное описание бота","aria-label":"Длинное описание бота","onUpdate:modelValue":e[9]||(e[9]=h=>i.botForm.long_description=h),maxlength:"512",style:{"min-height":"200px"},"aria-describedby":"short-description"},`
                    `,512),[[k,i.botForm.long_description]])]),bN,gN,i.botForm.commands?u("",!0):(l(),a("p",yN,$N)),kN,(l(!0),a(v,null,O(i.botForm.commands,(h,g)=>(l(),a("div",{class:"mb-2",key:"commands-"+g},[t("div",wN,[f(t("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":w=>i.botForm.commands[g].command=w,"aria-describedby":"bot-command-"+g,required:""},null,8,FN),[[k,i.botForm.commands[g].command]])]),t("div",CN,[f(t("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255","onUpdate:modelValue":w=>i.botForm.commands[g].description=w,"aria-describedby":"bot-command-description-"+g,required:""},null,8,PN),[[k,i.botForm.commands[g].description]])]),t("button",{type:"button",onClick:w=>r.removeCommands(g),class:"btn btn-outline-danger w-100"},[xN,_(" Удалить команду ")],8,SN),jN]))),128)),t("div",ON,[TN,t("button",{type:"button",onClick:e[10]||(e[10]=h=>r.addCommands()),class:"btn btn-success w-100"},"Добавить еще команду ")]),UN,t("div",IN,[t("div",VN,[t("label",MN,[t("div",null,[T(d,null,{content:A(()=>[EN]),default:A(()=>[AN]),_:1}),_(" Канал для заказов (id) "),t("span",{onClick:e[11]||(e[11]=h=>r.requestChannelId("order_channel"))},zN)]),T(d,null,{content:A(()=>[LN]),default:A(()=>[BN]),_:1})])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":e[12]||(e[12]=h=>i.botForm.order_channel=h),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[k,i.botForm.order_channel]])]),t("div",RN,[t("div",NN,[t("label",qN,[_("Канал для постов (id,рекламный) "),t("span",{onClick:e[13]||(e[13]=h=>r.requestChannelId("main_channel"))},YN)])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":e[14]||(e[14]=h=>i.botForm.main_channel=h),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[k,i.botForm.main_channel]])]),t("div",HN,[t("div",QN,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[15]||(e[15]=h=>i.need_threads=h),type:"checkbox",id:"need-payments"},null,512),[[z,i.need_threads]]),GN])]),i.need_threads?(l(),a("div",KN,[JN,t("ul",XN,[(l(!0),a(v,null,O(i.botForm.message_threads,(h,g)=>(l(),a("li",ZN,[t("p",eq,p(h.title)+" ("+p(h.key)+")",1),f(t("input",{type:"text",class:"form-control",placeholder:"Идентификатор топика","onUpdate:modelValue":w=>i.botForm.message_threads[g].value=w},null,8,tq),[[k,i.botForm.message_threads[g].value]])]))),256))])])):u("",!0)]),i.botForm.bot_token?(l(),a("div",sq,[t("div",oq,[t("div",iq,[t("label",nq,[t("div",null,[T(d,null,{content:A(()=>[aq]),default:A(()=>[lq]),_:1}),_(" Приветственное сообщение ")]),T(d,null,{content:A(()=>[dq]),default:A(()=>[rq]),_:1})]),i.botForm.welcome_message?(l(),a("small",cq," Длина текста "+p(i.botForm.welcome_message.length),1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":e[16]||(e[16]=h=>i.botForm.welcome_message=h),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[k,i.botForm.welcome_message]])]),t("div",uq,[t("div",mq,[t("label",hq,[t("div",null,[T(d,null,{content:A(()=>[_q]),default:A(()=>[pq]),_:1}),_(" Описание бота ")]),T(d,null,{content:A(()=>[bq]),default:A(()=>[fq]),_:1})]),i.botForm.description?(l(),a("small",gq," Длина текста "+p(i.botForm.description.length)+" / 255",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":e[17]||(e[17]=h=>i.botForm.description=h),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[k,i.botForm.description]])]),t("div",yq,[t("div",vq,[t("label",$q,[t("div",null,[T(d,null,{content:A(()=>[wq]),default:A(()=>[kq]),_:1}),_(" Режим тех. работ ")]),T(d,null,{content:A(()=>[Cq]),default:A(()=>[Fq]),_:1})]),i.botForm.maintenance_message?(l(),a("small",Pq," Длина текста "+p(i.botForm.maintenance_message.length)+" / 255 ",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":e[18]||(e[18]=h=>i.botForm.maintenance_message=h),maxlength:"255",style:{"min-height":"200px"},"aria-describedby":"bot-maintenance-message",required:""},`
                    `,512),[[k,i.botForm.maintenance_message]])]),t("div",Sq,[t("label",xq,[_(" Уровень 1 CashBack, % "),T(d,null,{content:A(()=>[Oq]),default:A(()=>[jq]),_:1})]),f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[19]||(e[19]=h=>i.botForm.level_1=h),min:"0","aria-describedby":"bot-level-1",required:""},null,512),[[k,i.botForm.level_1]])]),t("div",Tq,[Uq,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[20]||(e[20]=h=>i.botForm.level_2=h),min:"0","aria-describedby":"bot-level-2"},null,512),[[k,i.botForm.level_2]])]),t("div",Iq,[Vq,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[21]||(e[21]=h=>i.botForm.level_3=h),min:"0","aria-describedby":"bot-level-3"},null,512),[[k,i.botForm.level_3]])]),t("div",Mq,[Aq,f(t("select",{class:"form-control","onUpdate:modelValue":e[22]||(e[22]=h=>i.botForm.cashback_fire_period=h),id:"cashback-fired-period"},[(l(!0),a(v,null,O(i.cashback_fire_periods,h=>(l(),a("option",{value:h.value},p(h.title||"Не указано"),9,Eq))),256))],512),[[Ve,i.botForm.cashback_fire_period]])]),i.botForm.cashback_fire_period>0?(l(),a("div",Dq,[zq,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания CashBack","onUpdate:modelValue":e[23]||(e[23]=h=>i.botForm.cashback_fire_percent=h),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[k,i.botForm.cashback_fire_percent]])])):u("",!0),t("div",Bq,[t("div",Lq,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[24]||(e[24]=h=>i.need_cashback_config=h),type:"checkbox",id:"need-cashback-config"},null,512),[[z,i.need_cashback_config]]),Rq])]),i.need_cashback_config?(l(),a("div",Nq,[qq,(l(!0),a(v,null,O(i.botForm.cashback_config,(h,g)=>(l(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+g},[t("div",Wq,[Yq,t("button",{type:"button",onClick:w=>r.removeCashBackConfig(g),class:"btn btn-link text-danger"},Gq,8,Hq)]),f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":w=>i.botForm.cashback_config[g].title=w,"aria-describedby":"bot-cashback-config-"+g,required:""},null,8,Kq),[[k,i.botForm.cashback_config[g].title]])]))),128)),t("button",{type:"button",onClick:e[25]||(e[25]=h=>r.addCashBackConfig()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще категорию "),Jq])):u("",!0),t("div",Xq,[t("div",Zq,[eW,f(t("select",{class:"form-control","onUpdate:modelValue":e[26]||(e[26]=h=>i.selected_warning=h),onChange:e[27]||(e[27]=(...h)=>r.addWarning&&r.addWarning(...h)),id:"warning-rules"},[tW,(l(!0),a(v,null,O(r.filteredWarnings,h=>(l(),a("option",{value:h},p(h.title),9,sW))),256))],544),[[Ve,i.selected_warning]])]),(l(!0),a(v,null,O(i.botForm.warnings,(h,g)=>(l(),a("div",oW,[t("p",iW,p(r.getWarning(h.rule_key).title||"Не найдено"),1),t("div",nW,[f(t("input",{class:"form-check-input","onUpdate:modelValue":w=>i.botForm.warnings[g].is_active=w,type:"checkbox",id:"warning-is-active-"+g},null,8,lW),[[z,i.botForm.warnings[g].is_active]]),t("label",{class:"form-check-label",for:"warning-is-active-"+g},[i.botForm.warnings[g].is_active?(l(),a("span",rW,"Вкл")):(l(),a("span",dW,"Выкл"))],8,aW)]),f(t("input",{type:"number",class:"form-control mb-2",placeholder:"Значение","onUpdate:modelValue":w=>i.botForm.warnings[g].rule_value=w,min:"0","aria-describedby":"bot-level-3"},null,8,cW),[[k,i.botForm.warnings[g].rule_value]]),t("button",{onClick:w=>r.removeWarning(g),type:"button",class:"btn btn-outline-danger"},hW,8,uW),pW]))),256))]),t("div",_W,[t("div",fW,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[28]||(e[28]=h=>i.need_payments=h),type:"checkbox",id:"need-payments"},null,512),[[z,i.need_payments]]),bW])]),i.need_payments?(l(),a("div",gW,[t("div",yW,[f(t("input",{class:"form-check-input",type:"checkbox",value:i.botForm.auto_cashback_on_payments,"onUpdate:modelValue":e[29]||(e[29]=h=>i.botForm.auto_cashback_on_payments=h),id:"bot-auto-cashback-on-payments"},null,8,vW),[[z,i.botForm.auto_cashback_on_payments]]),$W]),t("div",kW,[t("label",wW,[t("div",null,[T(d,null,{content:A(()=>[CW]),default:A(()=>[FW]),_:1}),_(" Токен платежной системы ")]),PW]),f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"уровень CashBack","onUpdate:modelValue":e[30]||(e[30]=h=>i.botForm.payment_provider_token=h),"aria-describedby":"bot-level-3"},null,512),[[k,i.botForm.payment_provider_token]])])])):u("",!0),t("div",SW,[t("div",xW,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[31]||(e[31]=h=>i.need_shop=h),type:"checkbox",id:"need-shop"},null,512),[[z,i.need_shop]]),jW])]),i.need_shop?(l(),a("div",OW,[t("label",TW,[t("div",null,[T(d,null,{content:A(()=>[IW]),default:A(()=>[UW]),_:1}),_(" ВК-группа ")]),VW]),f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":e[32]||(e[32]=h=>i.botForm.vk_shop_link=h),"aria-describedby":"vk_shop_link"},null,512),[[k,i.botForm.vk_shop_link]])])):u("",!0),t("div",MW,[t("label",AW,[t("div",null,[T(d,null,{content:A(()=>[DW]),default:A(()=>[EW]),_:1}),_(" ВК-группа ")])]),f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"Ссылка на внешний сервис","onUpdate:modelValue":e[33]||(e[33]=h=>i.botForm.callback_link=h),"aria-describedby":"callback_link"},null,512),[[k,i.botForm.callback_link]])]),zW,t("div",BW,[t("label",LW,[t("div",null,[T(d,null,{content:A(()=>[NW]),default:A(()=>[RW]),_:1}),_(" Информационная ссылка ")]),qW]),f(t("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":e[34]||(e[34]=h=>i.botForm.info_link=h),"aria-describedby":"bot-info-link"},null,512),[[k,i.botForm.info_link]])]),WW,YW,(l(!0),a(v,null,O(i.botForm.social_links,(h,g)=>(l(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+g},[t("div",HW,[QW,t("button",{type:"button",onClick:w=>r.removeItem("social_links",g),class:"btn btn-link text-danger"},JW,8,GW)]),f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255","onUpdate:modelValue":w=>i.botForm.social_links[g].title=w,"aria-describedby":"bot-social-link-"+g,required:""},null,8,XW),[[k,i.botForm.social_links[g].title]]),f(t("input",{type:"text",class:"form-control mb-2",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":w=>i.botForm.social_links[g].url=w},null,8,ZW),[[k,i.botForm.social_links[g].url]])]))),128)),t("button",{type:"button",onClick:e[35]||(e[35]=h=>r.addSocialLinks()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще ссылку "),eY,t("h6",tY,[_("Аватар для бота "),T(d,null,{content:A(()=>[oY]),default:A(()=>[sY]),_:1})]),t("div",iY,[t("label",nY,[lY,t("input",{type:"file",id:"bot-photos",multiple:"",accept:"image/*",onChange:e[36]||(e[36]=(...h)=>r.onChangePhotos&&r.onChangePhotos(...h)),style:{display:"none"}},null,32)]),i.botForm.photos?(l(!0),a(v,{key:0},O(i.botForm.photos,(h,g)=>(l(),a("div",aY,[f(t("img",null,null,512),[[c,r.getPhoto(h).imageUrl]]),t("div",rY,[t("a",{onClick:w=>r.removePhoto(g)},uY,8,dY)])]))),256)):(l(),a("div",mY,[f(t("img",null,null,512),[[c,"/images-by-bot-id/"+i.bot.id+"/"+i.botForm.image]]),t("div",hY,[t("a",{onClick:e[37]||(e[37]=h=>r.removePhoto())},_Y)])]))]),t("button",{disabled:!i.botForm.bot_token,type:"submit",class:"btn btn-m btn-full mb-0 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Сохранить настройки ",8,fY)])):u("",!0)])):(l(),a("div",bY,vY))],32)],64)}const gr=oe(_R,[["render",$Y]]),kY=Object.freeze(Object.defineProperty({__proto__:null,default:gr},Symbol.toStringTag,{value:"Module"}));const wY=t("h6",null,"Добавление нового скрипта в бота",-1),FY={key:0,class:"list-group list-boxes"},CY=["onClick"],PY={class:"font-12 slug-span"},SY={class:"slug-strong"},xY={key:0,class:"color-green1-dark"},jY={key:1,class:"fa-solid fa-globe color-green1-dark"},OY={key:2,class:"color-blue2-dark"},TY={key:3,class:"fa-solid fa-thumbtack color-blue2-dark"},UY={key:1,class:"alert alert-danger",role:"alert"},IY={class:"mb-3"},VY={props:["global"],data(){return{load:!1,paginate:null,search:null,slugs:[]}},computed:{...G(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",n=s.comment||"";return o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||n.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(s){this.loadSlugs(s)},selectSlug(s){this.$emit("callback",{id:s.id||null,slug:s.slug,comment:s.comment,command:s.command}),this.$botNotification.notification("Скрипты","Вы выбрали скрипт из списка!")},loadSlugs(s){this.$store.dispatch("loadSlugs",{dataObject:{needGlobal:this.global||!1},page:s}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})}}},MY=Object.assign(VY,{__name:"BotSlugListSimple",setup(s){return(e,o)=>(l(),a(v,null,[wY,t("div",null,[f(t("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),placeholder:"Поиск нужного скрипта по описанию"},null,512),[[k,e.search]])]),e.filteredSlugs.length>0?(l(),a("div",FY,[(l(!0),a(v,null,O(e.filteredSlugs,(n,i)=>(l(),a("a",{href:"javascript:void(0)",onClick:r=>e.selectSlug(n),class:C([{"border-green1-dark":n.is_global,"border-blue2-dark":!n.is_global},"border rounded-s shadow-xs"])},[t("span",PY," #"+p(n.id)+" "+p(n.command||"Нет команды"),1),t("strong",SY,p(n.comment||"Нет описания"),1),n.is_global?(l(),a("u",xY,"Глобальный")):u("",!0),n.is_global?(l(),a("i",jY)):u("",!0),n.is_global?u("",!0):(l(),a("u",OY,"Локальный")),n.is_global?u("",!0):(l(),a("i",TY))],10,CY))),256))])):(l(),a("div",UY,' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')),t("div",IY,[e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])],64))}}),AY={key:0},EY={class:"mb-2"},DY={key:0,class:"list-group list-boxes"},zY=["onClick"],BY={key:1,class:"alert alert-warning",role:"alert"},LY={data(){return{loading:!0,dialogs:[],search:null,dialogs_paginate_object:null}},computed:{...G(["getDialogs","getDialogsPaginateObject"])},mounted(){this.loadDialogs()},methods:{selectDialog(s){this.$emit("select-dialog",s),this.$botNotification.notification("Диалоги","Вы выбрали диалог из списка!")},nextDialogs(s){this.loadDialogs(s)},loadDialogs(s=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{search:this.search},page:s}).then(e=>{this.loading=!1,this.dialogs=this.getDialogs,this.dialogs_paginate_object=this.getDialogsPaginateObject}).catch(()=>{this.loading=!1})}}},RY=Object.assign(LY,{__name:"BotDialogGroupListSimple",setup(s){return(e,o)=>e.dialogs.length>0?(l(),a("div",AY,[(l(!0),a(v,null,O(e.dialogs,(n,i)=>(l(),a("div",EY,[t("h6",null," #"+p(n.id)+" - "+p(n.title||"Не указано ")+" ("+p(n.slug||"Не указано")+")",1),n.bot_dialog_commands.length>0?(l(),a("div",DY,[(l(!0),a(v,null,O(n.bot_dialog_commands,(r,d)=>(l(),a("div",{onClick:c=>e.selectDialog(r),class:"border border-green1-dark rounded-s shadow-xs p-3 mb-2"}," #"+p(r.id)+" "+p(r.pre_text||"-"),9,zY))),256))])):u("",!0)]))),256)),e.dialogs_paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialogs_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):(l(),a("div",BY," У выбранного бота нет созданных диалоговых групп "))}}),NY=t("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),qY=t("h6",null,"Блок условий",-1),WY={key:0,class:"py-2"},YY={class:"form-label",id:"bot-domain"},HY=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),QY=t("div",null,"Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено ",-1),GY={class:"list-group list-custom-small list-icon-0 bg-green1-dark pl-3 pr-4"},KY=t("i",{class:"fa-solid font-14 fa-scale-balanced"},null,-1),JY=t("span",{class:"font-14 color-white"},"Доступные для выбора условия",-1),XY=t("i",{class:"fa fa-angle-down"},null,-1),ZY=[KY,JY,XY],eH={key:1},tH={key:2,class:"list-group"},sH={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},oH={class:"form-check"},iH={class:"form-check-label",for:"bot-user-is-vip"},nH={key:0},lH={key:1},aH=t("i",{class:"fa-solid fa-trash-can"},null,-1),rH=[aH],dH={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},cH={class:"form-check"},uH={class:"form-check-label",for:"bot-user-is-admin"},mH={key:0},hH={key:1},pH=t("i",{class:"fa-solid fa-trash-can"},null,-1),_H=[pH],fH={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},bH={class:"form-check"},gH={class:"form-check-label",for:"bot-user-is-deliveryman"},yH={key:0},vH={key:1},$H=t("i",{class:"fa-solid fa-trash-can"},null,-1),kH=[$H],wH={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},FH={class:"form-check"},CH={class:"form-check-label",for:"bot-user-is-work"},PH={key:0},SH={key:1},xH=t("i",{class:"fa-solid fa-trash-can"},null,-1),jH=[xH],OH={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},TH={class:"form-check"},UH={class:"form-check-label",for:"bot-user-in-location"},IH={key:0},VH={key:1},MH=t("i",{class:"fa-solid fa-trash-can"},null,-1),AH=[MH],EH={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},DH=t("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),zH=t("i",{class:"fa-solid fa-trash-can"},null,-1),BH=[zH],LH={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},RH=t("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),NH=t("i",{class:"fa-solid fa-trash-can"},null,-1),qH=[NH],WH={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},YH={class:"form-check"},HH={class:"form-check-label",for:"bot-user-sex"},QH={key:0},GH={key:1},KH=t("i",{class:"fa-solid fa-trash-can"},null,-1),JH=[KH],XH={key:8,class:"list-group-item"},ZH={class:"mb-3"},eQ={class:"d-flex justify-content-between align-items-center"},tQ={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},sQ=["onClick"],oQ=t("i",{class:"fa-solid fa-trash-can"},null,-1),iQ=[oQ],nQ=["onUpdate:modelValue"],lQ={key:3,class:"mt-5"},aQ={key:4,class:"d-flex justify-content-between"},rQ={key:6,class:"py-2"},dQ={class:"form-label",id:"bot-domain"},cQ=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),uQ=t("div",null,'Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),mQ={props:["bot","rulesForm"],mounted(){window.addEventListener("select-rule-event",s=>{this.addRulesFromEvent(s.detail.rule)})},methods:{hasRuleKey(s){return this.rulesForm.rules_if==null?!1:Object.keys(this.rulesForm.rules_if.bot_user).find(e=>e===s)!=null},modifyChannel(s){this.rulesForm.rules_if.channels[s.param]=s.text},removeChannelFromRule(s){this.rulesForm.rules_if.channels.splice(s,1),this.checkRules()},checkRules(){const s=Object.getOwnPropertyNames(this.rulesForm.rules_if.bot_user),e=this.rulesForm.rules_if.channels;s.length===0&&e.length===0&&(this.rulesForm.rules_if=null)},removeRule(s){delete this.rulesForm.rules_if.bot_user[s],this.checkRules()},addRulesFromEvent(s){this.rulesForm.rules_if||(this.rulesForm.rules_if={bot_user:{},channels:[]}),s.rules_block==="bot_user"&&(this.rulesForm.rules_if.bot_user={...this.rulesForm.rules_if.bot_user,...s.rule}),s.rules_block==="channels"&&this.rulesForm.rules_if.channels.push(s.rule.channel)},attachPageToRule(s){s.id!=this.rulesForm.id?this.rulesForm.rules_else_page_id=s.id:this.$botNotification.warning("Правила страниц","Вы не можете связать данную страницу с собой")},openRulesModal(){this.$botPages.rules()}}},hQ=Object.assign(mQ,{__name:"PageRules",setup(s){return(e,o)=>{const n=Qe("Popper");return l(),a(v,null,[NY,qY,s.rulesForm.rules_if?(l(),a("div",WY,[t("label",YY,[T(n,null,{content:A(()=>[QY]),default:A(()=>[HY]),_:1}),_(" Сообщение при успешном прохождении условий (не обязательно) ")]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[0]||(o[0]=i=>s.rulesForm.rules_if_message=i),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[k,s.rulesForm.rules_if_message]])])):u("",!0),t("div",GY,[t("a",{onClick:o[1]||(o[1]=(...i)=>e.openRulesModal&&e.openRulesModal(...i)),href:"javascript:void(0)"},ZY)]),s.rulesForm.rules_if?(l(),a("h6",eH,"Выбранные условия")):u("",!0),s.rulesForm.rules_if?(l(),a("ul",tH,[e.hasRuleKey("is_vip")?(l(),a("li",sH,[t("div",oH,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=i=>s.rulesForm.rules_if.bot_user.is_vip=i),type:"checkbox",id:"bot-user-is-vip"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_vip]]),t("label",iH,[s.rulesForm.rules_if.bot_user.is_vip?(l(),a("span",nH,"Является VIP-пользователем")):(l(),a("span",lH,"Не является VIP-пользователем"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[3]||(o[3]=i=>e.removeRule("is_vip"))},rH)])):u("",!0),e.hasRuleKey("is_admin")?(l(),a("li",dH,[t("div",cH,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=i=>s.rulesForm.rules_if.bot_user.is_admin=i),type:"checkbox",id:"bot-user-is-admin"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_admin]]),t("label",uH,[s.rulesForm.rules_if.bot_user.is_admin?(l(),a("span",mH,"Является администратором")):(l(),a("span",hH,"Не является администратором"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[5]||(o[5]=i=>e.removeRule("is_admin"))},_H)])):u("",!0),e.hasRuleKey("is_deliveryman")?(l(),a("li",fH,[t("div",bH,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=i=>s.rulesForm.rules_if.bot_user.is_deliveryman=i),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_deliveryman]]),t("label",gH,[s.rulesForm.rules_if.bot_user.is_deliveryman?(l(),a("span",yH,"Является доставщиком")):(l(),a("span",vH,"Не является доставщиком"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[7]||(o[7]=i=>e.removeRule("is_deliveryman"))},kH)])):u("",!0),e.hasRuleKey("is_work")?(l(),a("li",wH,[t("div",FH,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[8]||(o[8]=i=>s.rulesForm.rules_if.bot_user.is_work=i),type:"checkbox",id:"bot-user-is-work"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_work]]),t("label",CH,[s.rulesForm.rules_if.bot_user.is_work?(l(),a("span",PH,"За работой")):(l(),a("span",SH,"Не работает"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[9]||(o[9]=i=>e.removeRule("is_work"))},jH)])):u("",!0),e.hasRuleKey("user_in_location")?(l(),a("li",OH,[t("div",TH,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[10]||(o[10]=i=>s.rulesForm.rules_if.bot_user.user_in_location=i),type:"checkbox",id:"bot-user-in-location"},null,512),[[z,s.rulesForm.rules_if.bot_user.user_in_location]]),t("label",UH,[s.rulesForm.rules_if.bot_user.user_in_location?(l(),a("span",IH,"Находится в заведении")):(l(),a("span",VH,"Не находится в заведении"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[11]||(o[11]=i=>e.removeRule("user_in_location"))},AH)])):u("",!0),e.hasRuleKey("age")?(l(),a("li",EH,[t("div",null,[DH,f(t("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":o[12]||(o[12]=i=>s.rulesForm.rules_if.bot_user.age=i),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[k,s.rulesForm.rules_if.bot_user.age]])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[13]||(o[13]=i=>e.removeRule("age"))},BH)])):u("",!0),e.hasRuleKey("city")?(l(),a("li",LH,[t("div",null,[RH,f(t("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":o[14]||(o[14]=i=>s.rulesForm.rules_if.bot_user.city=i),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[k,s.rulesForm.rules_if.bot_user.city]])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[15]||(o[15]=i=>e.removeRule("city"))},qH)])):u("",!0),e.hasRuleKey("sex")?(l(),a("li",WH,[t("div",YH,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[16]||(o[16]=i=>s.rulesForm.rules_if.bot_user.sex=i),type:"checkbox",id:"bot-user-sex"},null,512),[[z,s.rulesForm.rules_if.bot_user.sex]]),t("label",HH,[s.rulesForm.rules_if.bot_user.sex?(l(),a("span",QH,"Только для мужчин")):(l(),a("span",GH,"Только для женщин"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[17]||(o[17]=i=>e.removeRule("sex"))},JH)])):u("",!0),s.rulesForm.rules_if.channels.length>0?(l(),a("li",XH,[_("Проверка нахождения в канале \\ группе: "),(l(!0),a(v,null,O(s.rulesForm.rules_if.channels,(i,r)=>(l(),a("div",ZH,[t("div",eQ,[t("label",tQ,[T(Pa,{token:s.bot.bot_token,param:`${r}`,onCallback:e.modifyChannel},null,8,["token","param","onCallback"]),_(" Канал для проверки ")]),t("button",{type:"button",class:"btn btn-link text-danger",onClick:d=>e.removeChannelFromRule(r)},iQ,8,sQ)]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":d=>s.rulesForm.rules_if.channels[r]=d,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,nQ),[[k,s.rulesForm.rules_if.channels[r]]])]))),256))])):u("",!0)])):u("",!0),s.rulesForm.rules_if?(l(),a("h6",lQ,"Иначе")):u("",!0),s.rulesForm.rules_else_page_id?(l(),a("p",aQ,[_("Вы выбрали страницу #"+p(s.rulesForm.rules_else_page_id)+' в качестве условия "иначе" ',1),t("a",{href:"javascript:void(0)",onClick:o[18]||(o[18]=i=>s.rulesForm.rules_else_page_id=null)},"Очистить")])):u("",!0),s.rulesForm.rules_if?(l(),M(Ki,{key:5,current:s.rulesForm.id,onCallback:e.attachPageToRule,editor:!1},null,8,["current","onCallback"])):u("",!0),s.rulesForm.rules_if?(l(),a("div",rQ,[t("label",dQ,[T(n,null,{content:A(()=>[uQ]),default:A(()=>[cQ]),_:1}),_(" Сообщение в случае невыполнения условий (не обязательно) ")]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[19]||(o[19]=i=>s.rulesForm.rules_else_message=i),maxlength:"255","aria-describedby":"rules-else-message"},`
            `,512),[[k,s.rulesForm.rules_else_message]])])):u("",!0)],64)}}}),pQ={class:"card card-style"},_Q={class:"content mb-0"},fQ=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),bQ={key:1,class:"w-100 d-flex justify-content-between py-4"},gQ={key:0,class:"ml-1"},yQ={key:1,class:"ml-1"},vQ={class:"custom-control ios-switch mr-5"},$Q=t("label",{class:"custom-control-label",for:"need_show_qr_and_link"},null,-1),kQ={key:2,class:"mb-2"},wQ={class:"d-flex justify-content-center"},FQ={style:{width:"300px",height:"300px"}},CQ={class:"mb-2"},PQ={class:"form-label d-flex justify-content-between mt-2",id:"bot-domain"},SQ=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xQ=t("div",null,[_(" Команда должна начинаться с символва . и *"),t("br"),_(" Например: .*Меню"),t("br")],-1),jQ=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),OQ=t("div",null,"Нужно ",-1),TQ={class:"mb-2"},UQ={class:"form-label d-flex justify-content-between mt-2",id:"bot-domain"},IQ=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),VQ=t("div",null,"Напишите для себя пояснение для чего нужна данная страница. Это поможет другим менеджерам лучше понять Вас. ",-1),MQ=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),AQ=t("div",null,"Нужно ",-1),EQ={class:"mb-2"},DQ={class:"form-check"},zQ=t("label",{class:"form-check-label",for:"is_external"}," Внешнее управление страницей ",-1),BQ={key:3},LQ={class:"mb-2"},RQ={class:"form-label d-flex justify-content-between mt-2",id:"bot-domain"},NQ=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qQ=t("div",null,[_(" Текстовый редактор. Данный текст будет в таком"),t("br"),_(" же виде отображен в посте в телеграм. ")],-1),WQ=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),YQ=t("div",null,"Нужно ",-1),HQ={class:"form-floating"},QQ={for:"floatingTextarea2"},GQ={key:0},KQ={class:"mb-2"},JQ={class:"form-check"},XQ=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),ZQ={key:0,class:"mb-2"},eG=t("h6",null,"Изображения на странице",-1),tG={class:"d-flex flex-wrap justify-content-center"},sG={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},oG={class:"mb-2 mr-2 img-preview"},iG={class:"remove"},nG=["onClick"],lG={key:0},aG={key:1,class:"d-flex flex-wrap justify-content-center"},rG={class:"mb-2 img-preview",style:{"margin-right":"10px"}},dG={class:"remove"},cG=["onClick"],uG={class:"mb-2"},mG={class:"form-check"},hG=t("label",{class:"form-check-label",for:"need-page-video"}," Видео к странице ",-1),pG={key:1,class:"mb-2"},_G=t("p",{class:"alert alert-danger mb-2 rounded-s"}," Внимание! не больше 10 видео на 1й странице! ",-1),fG={class:"mb-2"},bG={class:"form-check"},gG=t("label",{class:"form-check-label",for:"need-page-sticker"}," Стикер к странице ",-1),yG={key:2,class:"mb-2"},vG={class:"mb-2"},$G={class:"form-check"},kG=t("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),wG={class:"mb-2"},FG={class:"form-check"},CG=t("label",{class:"form-check-label",for:"need-page-audio"}," Звук к странице ",-1),PG={key:3,class:"mb-2"},SG=t("p",{class:"alert alert-danger"}," Внимание! не больше 10 аудио (audio) на 1й странице! Или 1 голосовое (voice) ",-1),xG={class:"mb-2"},jG={class:"form-check"},OG=t("label",{class:"form-check-label",for:"need-page-document"}," Документ \\ презентацию к странице \\ картинку в оригинале ",-1),TG={key:4,class:"mb-2"},UG=t("p",{class:"alert alert-danger"}," Внимание! не больше 10 документов на 1й странице! ",-1),IG={key:5,class:"mb-2"},VG=t("h6",null,"Конструктор нижнего меню",-1),MG={class:"mb-2"},AG={class:"form-label d-flex justify-content-between mt-2",id:"bot-domain"},EG=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),DG=t("div",null," Заголовок для отображения в нижнем меню ",-1),zG={key:0},BG={key:1},LG={class:"mb-2"},RG={class:"form-check"},NG=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),qG={key:6,class:"mb-2"},WG=t("h6",null,"Конструктор меню в сообщении",-1),YG={key:0},HG={key:1},QG={class:"mb-2"},GG={class:"form-check"},KG=t("label",{class:"form-check-label",for:"need-page-attach"}," Связать с другой страницей ",-1),JG={key:7,class:"mb-2"},XG={key:0,class:"d-flex justify-content-between mb-0 align-items-center"},ZG=t("i",{class:"fa-solid fa-trash"},null,-1),eK=[ZG],tK={class:"mb-2"},sK={class:"form-check"},oK=t("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),iK={key:8,class:"mb-2"},nK={key:0,class:"d-flex justify-content-between mb-0 align-items-center"},lK=t("i",{class:"fa-solid fa-trash"},null,-1),aK=[lK],rK={class:"mb-2"},dK={class:"form-check"},cK=t("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),uK={key:9,class:"mb-2"},mK={key:0,class:"d-flex justify-content-between mb-0 align-items-center"},hK=t("i",{class:"fa-solid fa-trash"},null,-1),pK=[hK],_K={class:"mb-2"},fK={class:"form-check"},bK=t("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),gK={key:4,class:"mb-2"},yK=t("button",{class:"bg-highlight btn btn-m font-900 text-uppercase btn-center-xl mb-3 w-100"},"Сохранить страницу ",-1),vK={props:["page"],data(){return{need_show_qr_and_link:!1,need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,need_page_sticker:!1,need_page_audios:!1,need_page_documents:!1,need_page_video:!1,need_page_images:!1,need_rules:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,sticker:null,images:[],videos:[],audios:[],documents:[],reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_rules:function(s,e){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_page_audios:function(s,e){this.need_page_audios||(this.pageForm.audios=[])},need_page_documents:function(s,e){this.need_page_documents||(this.pageForm.documents=[])},need_page_sticker:function(s,e){this.need_page_sticker||(this.pageForm.sticker=null)},need_page_images:function(s,e){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_page_video:function(s,e){this.need_page_video||(this.pageForm.videos=[])},need_inline_menu:function(s,e){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_reply_menu:function(s,e){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(s,e){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(s,e){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(s,e){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(s){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.pageForm.videos.length>0&&(this.need_page_video=!0),this.pageForm.audios.length>0&&(this.need_page_audios=!0),this.pageForm.documents.length>0&&(this.need_page_documents=!0),this.pageForm.sticker&&(this.need_page_sticker=!0),this.need_clean=!0},deep:!0}},computed:{currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},pageLink(){if(!this.pageForm.id)return"Ссылка недоступна";let s="";for(let e=0;e<10-(""+this.pageForm.id).length;e++)s+="0";return s+=this.pageForm.id,"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("004"+s)}},mounted(){if(this.loadBot(),this.page){let s=this.page;this.photos=[],this.pageForm={id:s.id,slug_id:s.slug?s.slug.id:null,content:s.content,command:s.slug?s.slug.command:null,slug:s.slug?s.slug.slug:null,comment:s.slug?s.slug.comment:null,images:s.images||[],reply_keyboard_title:s.reply_keyboard_title||null,reply_keyboard_id:s.reply_keyboard_id||null,inline_keyboard_id:s.inline_keyboard_id||null,reply_keyboard:s.replyKeyboard||null,inline_keyboard:s.inlineKeyboard||null,next_page_id:s.next_page_id||null,next_bot_dialog_command_id:s.next_bot_dialog_command_id||null,next_bot_menu_slug_id:s.next_bot_menu_slug_id||null,is_external:s.is_external||!1,videos:s.videos||[],audios:s.audios||[],sticker:s.sticker||null,documents:s.documents||[],rules_if:s.rules_if||null,rules_else_page_id:s.rules_else_page_id||null,rules_if_message:s.rules_if_message||null,rules_else_message:s.rules_else_message||null}}else this.clearForm()},methods:{copyToClipBoard(s){navigator.clipboard.writeText(s).then(()=>{this.$botNotification.notification("Конструктор страниц","Ссылка скопирована в буфер")}).catch(e=>{this.$botNotification.warning("Копирование","Ошибка копирования")})},loadBot(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})},associateDialog(s){this.pageForm.next_bot_dialog_command_id=s.id},associateSlug(s){this.pageForm.next_bot_menu_slug_id=s.id},attachPage(s){s.id!=this.pageForm.id?this.pageForm.next_page_id=s.id:this.$botNotification.warning("Конструктор страниц","Вы не можете связать данную страницу с собой")},injectContent(s){this.pageForm.content?this.pageForm.content+=s.text:this.pageForm.content=s.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,sticker:null,images:[],reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,videos:[],audios:[],documents:[],next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_sticker=!1,this.need_page_video=!1,this.need_page_images=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.need_rules=!1,this.need_page_audios=!1,this.need_page_documents=!1,this.$nextTick(()=>{this.need_clean=!1})},submitPage(){let s=new FormData;if(Object.keys(this.pageForm).forEach(e=>{const o=this.pageForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:s}).then(e=>{this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()}),this.$emit("callback",e.data),this.$botNotification.success("Конструктор страниц",this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!")}).catch(e=>{})},saveInlineKeyboard(s){this.pageForm.inline_keyboard=s},selectReplyKeyboard(s){this.pageForm.reply_keyboard=s,this.showReplyTemplateSelector=!1},selectInlineKeyboard(s){this.pageForm.inline_keyboard=s,this.showInlineTemplateSelector=!1},saveReplyKeyboard(s){this.pageForm.reply_keyboard=s},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.pageForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},onChange(s){this.pageForm.content=s},selectVideo(s){this.pageForm.videos||(this.pageForm.videos=[]);let e=this.pageForm.videos.indexOf(s.file_id);e!==-1?this.pageForm.videos.splice(e,1):this.pageForm.videos.push(s.file_id)},selectAudio(s){this.pageForm.audios||(this.pageForm.audios=[]);let e=this.pageForm.audios.indexOf(s.file_id);if(s.type==="voice"){if(e!==-1){this.pageForm.audios.splice(e,1);return}this.pageForm.audios=[s.file_id];return}e!==-1?this.pageForm.audios.splice(e,1):this.pageForm.audios.push(s.file_id)},selectSticker(s){this.pageForm.sticker=s.file_id},selectDocument(s){this.pageForm.documents||(this.pageForm.documents=[]);let e=this.pageForm.documents.indexOf(s.file_id);e!==-1?this.pageForm.documents.splice(e,1):this.pageForm.documents.push(s.file_id)}}},$K=Object.assign(vK,{__name:"Page",setup(s){return(e,o)=>{const n=Qe("Popper"),i=ie("lazy");return l(),a("div",pQ,[t("div",_Q,[e.bot?(l(),a("form",{key:0,onSubmit:o[25]||(o[25]=W((...r)=>e.submitPage&&e.submitPage(...r),["prevent"]))},[e.pageForm.id||e.need_clean?(l(),a("a",{key:0,href:"javascript:void(0)",class:"w-100 text-center d-block",onClick:o[0]||(o[0]=(...r)=>e.clearForm&&e.clearForm(...r))},[fQ,_(" Очистить форму")])):u("",!0),e.pageForm.id?(l(),a("div",bQ,[e.need_show_qr_and_link?(l(),a("span",gQ,"Отобразить QR-код и ссылку на страницу")):(l(),a("span",yQ,"Не отображать QR-код и ссылку на страницу")),t("div",vQ,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=r=>e.need_show_qr_and_link=r),class:"ios-input",id:"need_show_qr_and_link"},null,512),[[z,e.need_show_qr_and_link]]),$Q])])):u("",!0),e.pageForm.id&&e.need_show_qr_and_link?(l(),a("div",kQ,[t("p",null,[_("Ссылка на текущую страницу: "),t("span",{class:"font-weight-bold",onClick:o[2]||(o[2]=r=>e.copyToClipBoard(e.pageLink))},p(e.pageLink),1)]),t("div",wQ,[f(t("img",FQ,null,512),[[i,e.qr]])])])):u("",!0),t("div",CQ,[t("label",PQ,[t("div",null,[T(n,null,{content:A(()=>[xQ]),default:A(()=>[SQ]),_:1}),_(" Команда ")]),T(n,null,{content:A(()=>[OQ]),default:A(()=>[jQ]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":o[3]||(o[3]=r=>e.pageForm.command=r),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,e.pageForm.command]])]),t("div",TQ,[t("label",UQ,[t("div",null,[T(n,null,{content:A(()=>[VQ]),default:A(()=>[IQ]),_:1}),_(" Описание страницы ")]),T(n,null,{content:A(()=>[AQ]),default:A(()=>[MQ]),_:1})]),f(t("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":o[4]||(o[4]=r=>e.pageForm.comment=r),maxlength:"255","aria-describedby":"bot-domain",required:""},`
            `,512),[[k,e.pageForm.comment]])]),t("div",EQ,[t("div",DQ,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=r=>e.pageForm.is_external=r),type:"checkbox",id:"is_external"},null,512),[[z,e.pageForm.is_external]]),zQ])]),e.pageForm.is_external?u("",!0):(l(),a("div",BQ,[t("div",LQ,[t("label",RQ,[t("div",null,[T(n,null,{content:A(()=>[qQ]),default:A(()=>[NQ]),_:1}),_(" Контент ")]),T(n,null,{content:A(()=>[YQ]),default:A(()=>[WQ]),_:1})]),t("div",HQ,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=r=>e.pageForm.content=r),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"100px"}},null,512),[[k,e.pageForm.content]]),t("label",QQ,[_("Содержимое страницы "),e.pageForm.content?(l(),a("span",GQ,p(e.pageForm.content.length)+"/4096 ",1)):u("",!0)])])]),t("div",KQ,[t("div",JQ,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=r=>e.need_page_images=r),type:"checkbox",id:"need-page-images"},null,512),[[z,e.need_page_images]]),XQ])]),e.need_page_images?(l(),a("div",ZQ,[eG,t("div",tG,[t("label",sG,[_(" + "),t("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:o[8]||(o[8]=(...r)=>e.onChangePhotos&&e.onChangePhotos(...r)),style:{display:"none"}},null,32)]),e.photos.length>0?(l(!0),a(v,{key:0},O(e.photos,(r,d)=>(l(),a("div",oG,[f(t("img",null,null,512),[[i,e.getPhoto(r).imageUrl]]),t("div",iG,[t("a",{href:"javascript:void(0)",onClick:c=>e.removePhoto(d)},"Удалить",8,nG)])]))),256)):u("",!0)]),e.pageForm.images.length>0?(l(),a("h6",lG,"Ранее загруженные фотографии")):u("",!0),e.pageForm.images.length>0?(l(),a("div",aG,[(l(!0),a(v,null,O(e.pageForm.images,(r,d)=>(l(),a("div",rG,[f(t("img",null,null,512),[[i,"/images-by-bot-id/"+e.bot.id+"/"+r]]),t("div",dG,[t("a",{href:"javascript:void(0)",onClick:c=>e.removeImage(d)},"Удалить",8,cG)])]))),256))])):u("",!0)])):u("",!0),t("div",uG,[t("div",mG,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=r=>e.need_page_video=r),type:"checkbox",id:"need-page-video"},null,512),[[z,e.need_page_video]]),hG])]),e.need_page_video?(l(),a("div",pG,[_G,T(Dt,{"need-video":!0,"need-video-note":!0,selected:e.pageForm.videos,onSelect:e.selectVideo},null,8,["selected","onSelect"])])):u("",!0),t("div",fG,[t("div",bG,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[10]||(o[10]=r=>e.need_page_sticker=r),type:"checkbox",id:"need-page-sticker"},null,512),[[z,e.need_page_sticker]]),gG])]),e.need_page_sticker?(l(),a("div",yG,[T(Dt,{"need-sticker":!0,selected:[e.pageForm.sticker],onSelect:e.selectSticker},null,8,["selected","onSelect"])])):u("",!0),t("div",vG,[t("div",$G,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[11]||(o[11]=r=>e.need_reply_menu=r),type:"checkbox",id:"need-reply-menu"},null,512),[[z,e.need_reply_menu]]),kG])]),t("div",wG,[t("div",FG,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[12]||(o[12]=r=>e.need_page_audios=r),type:"checkbox",id:"need-page-audio"},null,512),[[z,e.need_page_audios]]),CG])]),e.need_page_audios?(l(),a("div",PG,[SG,T(Dt,{"need-audio":!0,selected:e.pageForm.audios,onSelect:e.selectAudio},null,8,["selected","onSelect"])])):u("",!0),t("div",xG,[t("div",jG,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[13]||(o[13]=r=>e.need_page_documents=r),type:"checkbox",id:"need-page-document"},null,512),[[z,e.need_page_documents]]),OG])]),e.need_page_documents?(l(),a("div",TG,[UG,T(Dt,{"need-document":!0,selected:e.pageForm.documents,onSelect:e.selectDocument},null,8,["selected","onSelect"])])):u("",!0),e.need_reply_menu?(l(),a("div",IG,[VG,t("div",MG,[t("label",AG,[t("div",null,[T(n,null,{content:A(()=>[DG]),default:A(()=>[EG]),_:1}),_(" Команда ")])]),f(t("input",{type:"text",class:"form-control",placeholder:"Заголовок нижнего меню","aria-label":"Заголовок нижнего меню","onUpdate:modelValue":o[14]||(o[14]=r=>e.pageForm.reply_keyboard_title=r),maxlength:"255","aria-describedby":"bot-domain"},null,512),[[k,e.pageForm.reply_keyboard_title]])]),t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showReplyTemplateSelector,"btn-primary":e.showReplyTemplateSelector}]),type:"button",onClick:o[15]||(o[15]=r=>e.showReplyTemplateSelector=!e.showReplyTemplateSelector)},[e.showReplyTemplateSelector?(l(),a("span",BG," Скрыть шаблоны меню")):(l(),a("span",zG," Открыть шаблоны меню"))],2),e.showReplyTemplateSelector?(l(),M(ao,{key:0,class:"mb-2",type:"reply",onSelect:e.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(ls,{key:1,type:"reply",onSave:e.saveReplyKeyboard,"edited-keyboard":e.pageForm.reply_keyboard},null,8,["onSave","edited-keyboard"]))])):u("",!0),t("div",LG,[t("div",RG,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[16]||(o[16]=r=>e.need_inline_menu=r),type:"checkbox",id:"need-inline-menu"},null,512),[[z,e.need_inline_menu]]),NG])]),e.need_inline_menu?(l(),a("div",qG,[WG,t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:o[17]||(o[17]=r=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(l(),a("span",HG," Скрыть шаблоны меню")):(l(),a("span",YG," Открыть шаблоны меню"))],2),e.showInlineTemplateSelector?(l(),M(ao,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(ls,{key:1,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.pageForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])):u("",!0),t("div",QG,[t("div",GG,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[18]||(o[18]=r=>e.need_attach_page=r),type:"checkbox",id:"need-page-attach"},null,512),[[z,e.need_attach_page]]),KG])]),e.need_attach_page?(l(),a("div",JG,[e.pageForm.next_page_id?(l(),a("p",XG,[_("Связано со страницей #"+p(e.pageForm.next_page_id)+" ",1),t("a",{href:"javascript:void(0)",class:"btn font-16 text-danger font-weight-bold",onClick:o[19]||(o[19]=r=>e.pageForm.next_page_id=null)},eK)])):u("",!0),T(Ki,{current:e.pageForm.id,onCallback:e.attachPage,editor:!1},null,8,["current","onCallback"])])):u("",!0),t("div",tK,[t("div",sK,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[20]||(o[20]=r=>e.need_attach_slug=r),type:"checkbox",id:"need-slug-attach"},null,512),[[z,e.need_attach_slug]]),oK])]),e.need_attach_slug?(l(),a("div",iK,[e.pageForm.next_bot_menu_slug_id?(l(),a("p",nK,[_("Связано со скриптом #"+p(e.pageForm.next_bot_menu_slug_id)+" ",1),t("a",{href:"javascript:void(0)",class:"btn font-16 text-danger font-weight-bold",onClick:o[21]||(o[21]=r=>e.pageForm.next_bot_menu_slug_id=null)},aK)])):u("",!0),T(MY,{global:!0,onCallback:e.associateSlug},null,8,["onCallback"])])):u("",!0),t("div",rK,[t("div",dK,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[22]||(o[22]=r=>e.need_attach_dialog=r),type:"checkbox",id:"need-dialog-attach"},null,512),[[z,e.need_attach_dialog]]),cK])]),e.need_attach_dialog?(l(),a("div",uK,[e.pageForm.next_bot_dialog_command_id?(l(),a("p",mK,[_(" Связано с диалогом #"+p(e.pageForm.next_bot_dialog_command_id)+" ",1),t("a",{href:"javascript:void(0)",class:"btn font-16 text-danger font-weight-bold",onClick:o[23]||(o[23]=r=>e.pageForm.next_bot_dialog_command_id=null)},pK)])):u("",!0),T(RY,{onSelectDialog:e.associateDialog},null,8,["onSelectDialog"])])):u("",!0),t("div",_K,[t("div",fK,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[24]||(o[24]=r=>e.need_rules=r),type:"checkbox",id:"need-rules"},null,512),[[z,e.need_rules]]),bK])])])),e.need_rules?(l(),a("div",gK,[T(hQ,{bot:e.bot,"rules-form":e.pageForm},null,8,["bot","rules-form"])])):u("",!0),yK],32)):u("",!0)])])}}}),kK={class:"card card-style"},wK={class:"content mb-0"},FK={data(){return{page:null,loadPage:!1,loadPageList:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})},pageListCallback(s){this.loadPage=!0,this.page=s,this.$nextTick(()=>{this.loadPage=!1})},pageCallback(s){this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})}}},yr=Object.assign(FK,{__name:"Pages",setup(s){return(e,o)=>(l(),a(v,null,[t("div",kK,[t("div",wK,[e.loadPageList?u("",!0):(l(),M(Ki,{key:0,editor:!0,onCallback:e.pageListCallback},null,8,["onCallback"]))])]),e.loadPage?u("",!0):(l(),M($K,{key:0,page:e.page,onCallback:e.pageCallback},null,8,["page","onCallback"]))],64))}}),CK=Object.freeze(Object.defineProperty({__proto__:null,default:yr},Symbol.toStringTag,{value:"Module"})),PK={key:0,class:"list-group list-custom-large d-flex flex-wrap"},SK={class:"w-100"},xK=["onClick"],jK=t("i",{class:"font-14 fa-solid fa-scroll rounded-xl shadow-xl bg-blue2-dark"},null,-1),OK={style:{"line-height":"100%","padding-top":"10px","padding-right":"51px"}},TK={class:"badge bg-red2-dark font-8"},UK=t("i",{class:"fa-solid fa-scroll"},null,-1),IK={class:"mb-3"},VK=t("div",{class:"border-green1-dark pl-3 border-left border-top-0 border-bottom-0 border-right-0 my-3"},[t("p",null," Вы можете добавить данный скрипт изменив сразу название команды на нужное непосредственно ВАМ! Меняется только название. ")],-1),MK=["disabled"],AK={key:2,class:"mb-2"},EK=t("div",{class:"alert alert-warning",role:"alert"}," К сожалению еще нет глобальных скриптов ",-1),DK=[EK],zK={props:["canAdd","bot"],data(){return{search:null,slugs:[],slugs_paginate_object:null,slugForm:{command:null,comment:null,slug:null,config:[],is_global:!0,bot_id:null}}},computed:{...G(["getGlobalSlugs","getGlobalSlugsPaginateObject"]),filteredAllSlugs(){return this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",n=s.comment||"";return o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||n.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1})}},mounted(){this.loadAllSlugs()},methods:{loadAllSlugs(s=0){this.$store.dispatch("loadGlobalSlugs",{dataObject:{search:this.search||null,needGlobal:!0},page:s}).then(e=>{this.slugs=this.getGlobalSlugs,this.slugs_paginate_object=this.getGlobalSlugsPaginateObject})},removeSlug(s){this.$store.dispatch("removeSlug",{dataObject:{slugId:s.id}}).then(e=>{this.$botNotification.notification("Команды","Команда успешно удалена"),this.loadAllSlugs()}).catch(e=>{this.loadAllSlugs()})},nextSlugs(s){this.loadAllSlugs(s)},selectSlug(s){this.slugForm.id=s.id||null,this.slugForm.slug=s.slug,this.slugForm.comment=s.comment,this.slugForm.command=this.command||s.command,this.slugForm.config=s.config||[],this.slugForm.is_global=s.is_global||!1,this.$emit("select",s)},addSlug(){let s=new FormData;Object.keys(this.slugForm).forEach(e=>{const o=this.slugForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.$store.dispatch("createSlug",{slugForm:s}).then(e=>{this.$botNotification.notification("Конструктор команд","Команда успешно обновлена"),this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0,this.$emit("callback")}).catch(e=>{})}}},BK=Object.assign(zK,{__name:"GlobalSlugList",setup(s){return(e,o)=>(l(),a(v,null,[e.filteredAllSlugs.length>0?(l(),a("div",PK,[(l(!0),a(v,null,O(e.filteredAllSlugs,(n,i)=>(l(),a("div",SK,[n?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:r=>e.selectSlug(n),class:"d-block w-100",style:{"min-height":"70px"}},[jK,t("span",OK,p(n.command||"Не указана"),1),t("strong",null,p(n.slug),1),t("span",TK,"#"+p(n.id),1),UK],8,xK)):u("",!0),e.slugForm.id==n.id&&e.filteredAllSlugs.length>0?(l(),a("form",{key:1,onSubmit:o[1]||(o[1]=W((...r)=>e.addSlug&&e.addSlug(...r),["prevent"])),class:"mb-0 d-flex flex-wrap"},[t("div",IK,[VK,f(t("input",{type:"text",class:"form-control w-100",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":o[0]||(o[0]=r=>e.slugForm.command=r),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,e.slugForm.command]])]),t("button",{disabled:e.slugForm.slug==null,class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-green1-dark w-100 p-3"},"Добавить скрипт в бота ",8,MK)],32)):u("",!0)]))),256))])):u("",!0),e.slugs_paginate_object?(l(),M(Ce,{key:1,onPagination_page:e.nextSlugs,pagination:e.slugs_paginate_object},null,8,["onPagination_page","pagination"])):(l(),a("div",AK,DK))],64))}}),LK={class:"form-floating mb-2"},RK=t("label",{for:"floatingInput"},"Команда",-1),NK={class:"form-floating mb-2"},qK=t("label",{for:"floatingInput"},"Описание скрипта",-1),WK=t("h6",null," Параметры скрипта ",-1),YK={class:"mb-2"},HK=["onClick"],QK=t("hr",null,null,-1),GK={key:0},KK={class:"mb-1"},JK=["onClick"],XK=t("i",{class:"fa-solid fa-trash-can"},null,-1),ZK=[XK],eJ=["onClick"],tJ=t("i",{class:"fa-solid fa-caret-left"},null,-1),sJ=[tJ],oJ=["onClick"],iJ=t("i",{class:"fa-solid fa-caret-right"},null,-1),nJ=[iJ],lJ={key:0,class:"form-floating mb-1"},aJ=["for"],rJ=["id","onUpdate:modelValue"],dJ={key:1,class:"form-check mb-1 mt-2"},cJ=["onUpdate:modelValue","id"],uJ=["for"],mJ={key:2,class:"form-floating mb-1 mt-2"},hJ=["for"],pJ=["onUpdate:modelValue","id"],_J={key:3,class:"form-floating mb-1 mt-2"},fJ=["for"],bJ=["onUpdate:modelValue","id"],gJ={key:4,class:"form-floating mb-1 mt-2"},yJ=t("label",{class:"form-label",id:"bot-domain"},"JSON-код",-1),vJ={key:5,class:"form-check mb-1 mt-2"},$J=["for"],kJ=["onUpdate:modelValue","id"],wJ={key:6,class:"form-floating mb-3"},FJ=["for"],CJ=["id","onUpdate:modelValue"],PJ={key:7,class:"form-floating mb-3"},SJ=["for"],xJ=["id","onUpdate:modelValue"],jJ=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),OJ={key:1,class:"mb-2"},TJ=t("p",{class:"mb-0"},"Параметры скрипта еще не добавлены",-1),UJ=[TJ],IJ={class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-mint-dark w-100"},VJ={key:0},MJ={key:1},AJ={components:{Vue3JsonEditor:qs},props:["item"],data(){return{filters:[],simple:!0,configTypes:[{title:"Текстовый или числовой параметр",type:"text"},{title:"Большое текстовое поле",type:"large-text"},{title:"Канал обратной связи",type:"channel"},{title:"Логический оператор",type:"boolean"},{title:"Ссылка на изображение",type:"image"},{title:"Цвет",type:"color"},{title:"Geo",type:"geo"},{title:"Номер телефона",type:"phone"},{title:"JSON",type:"json"}],bot:null,photos:[],slugForm:{bot_id:null,id:null,command:null,comment:null,slug:null,config:[],is_global:!0}}},computed:{...G(["getCurrentBot"]),filteredConfigs(){return this.filters.length==0?this.slugForm.config:this.slugForm.config.filter(s=>this.filters.indexOf(s.type)>=0)}},mounted(){this.item&&(this.slugForm.id=this.item.id||null,this.slugForm.command=this.item.command,this.slugForm.comment=this.item.comment,this.slugForm.bot_id=this.item.bot_id,this.slugForm.slug=this.item.slug,this.slugForm.config=this.item.config||[],this.slugForm.is_global=this.item.is_global||!1)},methods:{move(s,e=0){let o=this.slugForm.config[s],n=this.slugForm.config.length||0,i=e===0?s-1>=0?s-1:n-1:s<n-1?s+1:0;this.slugForm.config[s]=this.slugForm.config[i],this.slugForm.config[i]=o},toggleFilter(s){let e=this.filters.indexOf(s);e>=0?this.filters.splice(e,1):this.filters.push(s)},addTextTo(s,e={text:null}){this.slugForm.config[s].value=e.text},submit(){let s=new FormData;Object.keys(this.slugForm).forEach(e=>{const o=this.slugForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch(this.slugForm.id===null?"createSlug":"updateSlug",{slugForm:s}).then(e=>{this.$botNotification.notification("Команды","Команда успешно обновлена"),this.slugForm.id===null&&(this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0),this.$emit("callback")}).catch(e=>{})},addConfig(s){this.slugForm.config.splice(0,0,{key:null,value:null,type:s||"text"})},removeConfigItem(s){try{this.slugForm.config.splice(s,1)}catch{this.slugForm.config=[]}},selectPhoto(s,e){this.filteredConfigs[e].value=s.file_id}}},EJ=Object.assign(AJ,{__name:"SlugForm",setup(s){return(e,o)=>{const n=ie("mask");return l(),a("form",{id:"slugForm",onSubmit:o[2]||(o[2]=W((...i)=>e.submit&&e.submit(...i),["prevent"]))},[t("div",LK,[RK,f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=i=>e.slugForm.command=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.slugForm.command]])]),t("div",NK,[qK,f(t("textarea",{"onUpdate:modelValue":o[1]||(o[1]=i=>e.slugForm.comment=i),style:{"min-height":"200px"},class:"form-control font-12",id:"floatingInput",placeholder:"name@example.com",required:""},`
            `,512),[[k,e.slugForm.comment]])]),WK,t("p",YK,[_("Фильтры: "),(l(!0),a(v,null,O(e.configTypes,(i,r)=>(l(),a("span",{class:C(["badge mb-1 bg-gray-100 cursor-pointer mr-1",{"bg-info text-white":e.filters.indexOf(i.type)>=0}]),onClick:d=>e.toggleFilter(i.type)},p(i.type),11,HK))),256))]),QK,e.filteredConfigs.length>0?(l(),a("div",GK,[(l(!0),a(v,null,O(e.filteredConfigs,(i,r)=>(l(),a("div",KK,[t("button",{onClick:d=>e.removeConfigItem(r),class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},ZK,8,JK),t("button",{onClick:d=>e.move(r,0),style:{"margin-left":"5px"},class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},sJ,8,eJ),t("button",{onClick:d=>e.move(r,1),style:{"margin-left":"5px"},class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},nJ,8,oJ),e.filteredConfigs[r].type==="text"||e.filteredConfigs[r].type==="channel"?(l(),a("div",lJ,[t("label",{for:"field-input-"+r},[_("Значение для "),t("strong",null,p(e.filteredConfigs[r].key),1)],8,aJ),f(t("input",{type:"text",class:"form-control",id:"field-input-"+r,"onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,placeholder:"name@example.com"},null,8,rJ),[[k,e.filteredConfigs[r].value]])])):u("",!0),e.filteredConfigs[r].type==="boolean"?(l(),a("div",dJ,[f(t("input",{class:"form-check-input","onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,type:"checkbox",value:"false",id:"filtered-config-"+r+"-checkbox"},null,8,cJ),[[z,e.filteredConfigs[r].value]]),t("label",{class:"form-check-label",for:"filtered-config-"+r+"-checkbox"},[_(p(e.filteredConfigs[r].value?"Истина":"Ложь")+" для ",1),t("strong",null,p(e.filteredConfigs[r].key),1)],8,uJ)])):u("",!0),e.filteredConfigs[r].type==="geo"?(l(),a("div",mJ,[t("label",{for:"filtered-config-"+r+"-geo"},[_("Значение для "),t("strong",null,p(e.filteredConfigs[r].key),1)],8,hJ),f(t("input",{class:"form-control",placeholder:"##.######,##.######","onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,type:"text",id:"filtered-config-"+r+"-geo"},null,8,pJ),[[n,"##.######,##.######"],[k,e.filteredConfigs[r].value]])])):u("",!0),e.filteredConfigs[r].type==="phone"?(l(),a("div",_J,[t("label",{for:"filtered-config-"+r+"-phone"},[_("Значение для "),t("strong",null,p(e.filteredConfigs[r].key),1)],8,fJ),f(t("input",{class:"form-control",placeholder:"+7(###)###-##-##","onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,type:"text",id:"filtered-config-"+r+"-phone"},null,8,bJ),[[n,"+7(###)###-##-##"],[k,e.filteredConfigs[r].value]])])):u("",!0),e.filteredConfigs[r].type==="json"?(l(),a("div",gJ,[yJ,T(Ie(qs),{mode:"code",modelValue:e.filteredConfigs[r].value,"onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,"show-btns":!1,expandedOnStart:!0},null,8,["modelValue","onUpdate:modelValue"])])):u("",!0),e.filteredConfigs[r].type==="color"?(l(),a("div",vJ,[t("label",{for:"filtered-config-"+r+"-color"},[t("p",{style:dt({color:e.filteredConfigs[r].value})},[_("Цвет: "+p(e.filteredConfigs[r].value)+" для ",1),t("strong",null,p(e.filteredConfigs[r].key),1)],4)],8,$J),f(t("input",{class:"form-control","onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,type:"color",id:"filtered-config-"+r+"-color"},null,8,kJ),[[k,e.filteredConfigs[r].value]])])):u("",!0),e.filteredConfigs[r].type==="large-text"?(l(),a("div",wJ,[t("label",{for:"field-input-"+r},[_("Значение для "),t("strong",null,p(e.filteredConfigs[r].key),1)],8,FJ),f(t("textarea",{class:"form-control font-12",id:"field-input-"+r,"onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,style:{"min-height":"200px"},placeholder:"name@example.com"},`
                            `,8,CJ),[[k,e.filteredConfigs[r].value]])])):u("",!0),e.filteredConfigs[r].type==="image"?(l(),a("div",PJ,[t("label",{for:"field-input-"+r},"FileId ссылка на изображение",8,SJ),f(t("input",{class:"form-control mb-2",id:"field-input-"+r,type:"text",disabled:"true","onUpdate:modelValue":d=>e.filteredConfigs[r].value=d,placeholder:"name@example.com"},null,8,xJ),[[k,e.filteredConfigs[r].value]]),T(Dt,{"need-video":!1,"need-photo":!0,selected:[e.filteredConfigs[r].value],onSelect:d=>e.selectPhoto(d,r)},null,8,["selected","onSelect"])])):u("",!0),jJ]))),256))])):(l(),a("div",OJ,UJ)),t("button",IJ,[e.slugForm.id==null?(l(),a("span",VJ," Сохранить команду ")):(l(),a("span",MJ," Обновить команду "))])],32)}}});const DJ={class:"btn w-100 text-left border-blue2-light p-2",type:"button"},zJ={key:0,class:"fa-solid fa-chevron-up"},BJ={key:1,class:"fa-solid fa-chevron-down"},LJ={key:0,class:"py-2"},RJ={class:"d-flex justify-content-between align-items-center"},NJ={key:0,class:"fa-regular fa-pen-to-square"},qJ={key:1,class:"fa-solid fa-xmark"},WJ={key:0,class:"fa-solid fa-arrow-up-short-wide"},YJ={key:1,class:"fa-solid fa-arrow-down-short-wide"},HJ=t("i",{class:"fa-solid fa-clone"},null,-1),QJ=[HJ],GJ=t("i",{class:"fa-regular fa-trash-can color-white"},null,-1),KJ=[GJ],JJ={key:1,class:"list-group list-group-numbered mt-2"},XJ={class:"list-group-item d-flex justify-content-between align-items-start"},ZJ={class:"ms-2 me-auto"},eX=t("div",{class:"fw-bold"},"Идентификатор",-1),tX={class:"list-group-item d-flex justify-content-between align-items-start"},sX={class:"ms-2 me-auto"},oX=t("div",{class:"fw-bold"},"Команда",-1),iX={class:"list-group-item d-flex justify-content-between align-items-start"},nX={class:"ms-2 me-auto"},lX=t("div",{class:"fw-bold"},"Мнемоническое имя",-1),aX={class:"list-group-item d-flex justify-content-between align-items-start"},rX={class:"ms-2 me-auto"},dX=t("div",{class:"fw-bold"},"Пояснение",-1),cX={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},uX={class:"ms-2 me-auto"},mX=t("div",{class:"fw-bold"},"Набор параметров скрипта",-1),hX={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},pX=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Привязана страница")],-1),_X=[pX],fX={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},bX=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Глобальный скрипт")],-1),gX=[bX],yX={props:["item","bot","selectMode"],data(){return{showMenu:!1,edit:!1,load:!1,simple:!0}},mounted(){},methods:{toggleMenu(){this.showMenu=!this.showMenu,this.simple=!0,this.edit=!1},switchEditor(){this.simple=!0,this.edit=!this.edit},switchSimple(){this.simple=!this.simple,this.edit=!1},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$botNotification.success("Конструктор команд","Команда успешно продублирована"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$botNotification.success("Конструктор команд","Команда успешно удалена"),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},vX=Object.assign(yX,{__name:"Slug",setup(s){return(e,o)=>(l(),a("div",DJ,[t("p",{onClick:o[0]||(o[0]=(...n)=>e.toggleMenu&&e.toggleMenu(...n)),class:"w-100 mb-0"},[e.showMenu?(l(),a("i",zJ)):(l(),a("i",BJ)),_(" "+p(s.item.command||"Нет команды"),1)]),e.showMenu?(l(),a("div",LJ,[t("div",RJ,[t("a",{onClick:o[1]||(o[1]=(...n)=>e.switchEditor&&e.switchEditor(...n)),href:"javascript:void(0)",title:"Редактировать команду",style:{width:"auto"},class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-mint-dark"},[e.edit?(l(),a("i",qJ)):(l(),a("i",NJ))]),t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=(...n)=>e.switchSimple&&e.switchSimple(...n)),class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-mint-dark"},[e.simple?(l(),a("i",WJ)):(l(),a("i",YJ))]),t("a",{href:"javascript:void(0)",title:"Дублировать команду",class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-mint-dark",onClick:o[3]||(o[3]=(...n)=>e.duplicateSlug&&e.duplicateSlug(...n))},QJ),t("a",{href:"javascript:void(0)",title:"Дублировать команду",class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-red1-dark",onClick:o[4]||(o[4]=(...n)=>e.removeSlug&&e.removeSlug(...n))},KJ)])])):u("",!0),!e.simple&&!e.edit?(l(),a("ol",JJ,[t("li",XJ,[t("div",ZJ,[eX,_(" №"+p(s.item.id||"Нет идентификатора"),1)])]),t("li",tX,[t("div",sX,[oX,_(" "+p(s.item.command||"Нет команды"),1)])]),t("li",iX,[t("div",nX,[lX,_(" "+p(s.item.slug||"Slug"),1)])]),t("li",aX,[t("div",rX,[dX,_(" "+p(s.item.comment||"Пояснение не указано"),1)])]),s.item.config?(l(),a("li",cX,[t("div",uX,[mX,s.item.config?(l(!0),a(v,{key:0},O(s.item.config,n=>(l(),a("p",null,[t("strong",null,p(n.key||"Ключ не найден")+":",1),_(p(n.value||"Не указано"),1)]))),256)):u("",!0)])])):u("",!0),s.item.page?(l(),a("li",hX,_X)):u("",!0),s.item.is_global?(l(),a("li",fX,gX)):u("",!0)])):u("",!0),!e.load&&e.edit?(l(),M(EJ,{key:2,item:s.item,onCallback:e.slugFormCallback},null,8,["item","onCallback"])):u("",!0)]))}}),$X={key:0},kX=t("i",{class:"fa-solid fa-scroll"},null,-1),wX={key:1},FX=t("i",{class:"fa-regular fa-square-minus"},null,-1),CX={key:0,class:"mb-2"},PX={class:"form-floating mb-3"},SX=t("label",{for:"floatingInput"},"Быстрый поиск команды",-1),xX={class:"form-check"},jX={class:"form-check-label",for:"need_global"},OX={key:0},TX={key:1},UX={class:"mb-1"},IX={class:"mb-3"},VX={key:2,class:"mb-3"},MX=t("div",{class:"alert alert-danger",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),AX=[MX],EX={props:["command","bot"],data(){return{need_global:!0,show:!1,slugs:[],paginate:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{need_global:function(s,e){this.loadSlugs()}},computed:{...G(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs.length===0?[]:this.ownSearch==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",n=s.comment||"";return o.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1||n.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1||e.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1})}},mounted(){this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})},methods:{nextSlugs(s){this.loadSlugs(s)},loadSlugs(s){this.$store.dispatch("loadSlugs",{dataObject:{needGlobal:this.need_global},page:s}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){this.loadSlugs()},selectSlug(s){this.$emit("select",s)},loadAllSlugs(){this.$store.dispatch("loadAllSlugs").then(s=>{this.allSlugs=s.data})},addSlug(s){}}},DX=Object.assign(EX,{__name:"BotSlugList",setup(s){return(e,o)=>(l(),a(v,null,[t("button",{type:"button",onClick:o[0]||(o[0]=n=>e.show=!e.show),class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"},[e.show?(l(),a("span",wX,[FX,_(" Свернуть форму добавления")])):(l(),a("span",$X,[kX,_(" Добавить глобальный скрипт")]))]),e.show?(l(),a("div",CX,[s.bot?(l(),M(BK,{key:0,"can-add":!0,bot:s.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):u("",!0)])):u("",!0),t("div",PX,[SX,f(t("input",{type:"search","onUpdate:modelValue":o[1]||(o[1]=n=>e.ownSearch=n),class:"form-control",id:"floatingInput",placeholder:"Название команды"},null,512),[[k,e.ownSearch]])]),t("div",xX,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=n=>e.need_global=n),type:"checkbox",id:"need_global"},null,512),[[z,e.need_global]]),t("label",jX,[e.need_global?(l(),a("span",OX,"Глобальные")):(l(),a("span",TX,"Локальные"))])]),e.slugs&&s.bot?(l(!0),a(v,{key:1},O(e.filteredSlugs,(n,i)=>(l(),a("div",UX,[T(vX,{item:n,bot:s.bot,onCallback:e.callbackSlugs,onSelect:e.selectSlug},null,8,["item","bot","onCallback","onSelect"])]))),256)):u("",!0),t("div",IX,[e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)]),e.filteredSlugs.length===0?(l(),a("div",VX,AX)):u("",!0)],64))}}),zX={class:"card card-style"},BX={class:"card-body"},LX={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})}}},vr=Object.assign(LX,{__name:"Slugs",setup(s){return(e,o)=>(l(),a("div",zX,[t("div",BX,[e.load?u("",!0):(l(),M(DX,{key:0,bot:e.bot},null,8,["bot"]))])]))}}),RX=Object.freeze(Object.defineProperty({__proto__:null,default:vr},Symbol.toStringTag,{value:"Module"})),NX={key:0,class:"mb-2"},qX={class:"badge bg-success text-white"},WX=t("span",{class:"ml-1 mr-1"},[t("i",{class:"fa-solid fa-arrow-right"})],-1),YX={key:0,class:"badge bg-primary text-white"},HX={key:1},QX={class:"form-floating mb-2"},GX=["for"],KX=["id"],JX={class:"mb-2"},XX={class:"form-check"},ZX=t("label",{class:"form-check-label font-12",for:"need-empty-dialog"}," Диалог без ожидания ответа ",-1),eZ={key:1,class:"form-floating mb-2"},tZ=["for"],sZ=["id"],oZ={key:2,class:"form-floating mb-2"},iZ=["for"],nZ=["id"],lZ={key:3,class:"mb-2"},aZ={class:"mb-2"},rZ=["for"],dZ=["value"],cZ=["for"],uZ=["id"],mZ={key:4,class:"mb-2"},hZ=["for"],pZ=["id"],_Z=t("option",{value:null,selected:""},"Не указан",-1),fZ=["value"],bZ={class:"mb-2"},gZ={class:"d-flex justify-content-between"},yZ=["for"],vZ=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),$Z=[vZ],kZ=["id"],wZ={class:"mb-2"},FZ={class:"form-check"},CZ=t("label",{class:"form-check-label font-12",for:"need-dialog-image"}," В диалоге нужно изображение ",-1),PZ={class:"form-check"},SZ=t("label",{class:"form-check-label font-12",for:"need-dialog-menu-inline"}," В диалоге нужно меню к тексту ",-1),xZ={class:"form-check"},jZ=t("label",{class:"form-check-label font-12",for:"need-dialog-menu-reply"}," В диалоге нужно нижнее меню ",-1),OZ={key:5,class:"mb-2"},TZ=t("h6",null,"Фотографии к диалогу",-1),UZ={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},IZ={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},VZ=t("span",null,"+",-1),MZ={class:"mb-2 img-preview",style:{"margin-right":"10px"}},AZ={class:"remove"},EZ=["onClick"],DZ={class:"mb-2 img-preview",style:{"margin-right":"10px"}},zZ={class:"remove"},BZ=["onClick"],LZ={key:6,class:"mb-2"},RZ=t("h6",null,"Кнопки к вопросу",-1),NZ={key:7,class:"mb-2"},qZ=t("h6",null,"Кнопки нижнего меню к вопросу",-1),WZ={class:"mb-2"},YZ=t("label",{class:"form-check-label font-12",for:"need-empty-dialog"}," Сохранить в переменную ",-1),HZ=t("option",{selected:""},"Не выбрано",-1),QZ=["value"],GZ={class:"form-check mb-2"},KZ=t("label",{class:"form-check-label font-12",for:"need-set-flags"}," Установить флаги в соответствующее значение ",-1),JZ={key:8,class:"mb-2"},XZ=t("h6",{class:"my-3"},"Выберите необходимые флаги",-1),ZZ=["onClick"],eee={class:"mb-2"},tee={type:"submit",class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark w-100"},see={key:0},oee={key:1},iee={key:9,class:"divider divider-small my-3 bg-highlight"},nee=t("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),lee={props:["item","bot"],data(){return{need_images:!1,need_inline_keyboard:!1,need_reply_keyboard:!1,need_set_flags:!1,commands:[],flags_variants:[{title:"Является VIP",key:"is_vip",value:null},{title:"Является Админом",key:"is_admin",value:null},{title:"За работой",key:"is_work",value:null},{title:"Является менеджером",key:"is_manager",value:null}],store_variants:[{title:"Имя",key:"name"},{title:"Почта",key:"email"},{title:"Возраст",key:"age"},{title:"Город",key:"city"},{title:"Страна",key:"country"},{title:"Адрес",key:"address"},{title:"Телефон",key:"phone"},{title:"День рождение",key:"birthday"}],expressions:[{expression:null,description:"Нет проверки"},{expression:"/([a-z0-9]+)/i",description:"Проверка набора из латинских букв и цифр"},{expression:"/([а-яё0-9]+)/iu",description:"Проверка на кириллицу и цифры"},{expression:"/(?P<digit>\\d+)/",description:"Проверка на число"},{expression:"/^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$/",description:"Проверка Email"},{expression:"/^((8|+7)[- ]?)?((?d{3})?[- ]?)?[d- ]{7,10}$/",description:"Проверка номера телефона"},{expression:"/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)dd$/",description:"Проверка даты по формату"},{expression:"/^[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/",description:"Проверка даты по формату YYYY-MM-DD"},{expression:"/^(https?://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$/",description:"Проверка доменного имени"}],commandForm:{id:null,slug:null,pre_text:null,post_text:null,error_text:null,bot_id:null,input_pattern:null,inline_keyboard_id:null,reply_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,reply_keyboard:null,is_empty:!1,result_flags:[],store_to:null},photos:[]}},computed:{...G(["getDialogs"])},mounted(){window.addEventListener("select-telegram-channel-id",s=>{this.commandForm[s.detail.param]=s.detail.channel}),this.item&&this.$nextTick(()=>{this.commandForm={id:this.item.id||null,slug:this.item.slug||null,pre_text:this.item.pre_text||null,post_text:this.item.post_text||null,error_text:this.item.error_text||null,is_empty:this.item.is_empty||!1,input_pattern:this.item.input_pattern||null,inline_keyboard_id:this.item.inline_keyboard_id||null,reply_keyboard_id:this.item.reply_keyboard_id||null,images:this.item.images||[],next_bot_dialog_command_id:this.item.next_bot_dialog_command_id||null,bot_dialog_group_id:this.item.bot_dialog_group_id||null,result_channel:this.item.result_channel||null,inline_keyboard:this.item.inline_keyboard||null,reply_keyboard:this.item.reply_keyboard||null,result_flags:this.item.result_flags||[],store_to:this.item.store_to||null},this.bot&&(this.commandForm.bot_id=this.bot.id||null),this.commandForm.inline_keyboard_id!=null&&(this.need_inline_keyboard=!0),this.commandForm.reply_keyboard_id!=null&&(this.need_reply_keyboard=!0),this.commandForm.images.length>0&&(this.need_images=!0),this.commandForm.result_flags.length>0&&(this.need_set_flags=!0)}),this.bot&&this.$nextTick(()=>{this.commandForm.bot_id=this.bot.id}),this.loadGroups()},methods:{unlinkCommand(){this.loading=!0,this.$store.dispatch("unlinkDialogCommand",{dataObject:{dialogCommandId:this.item.id}}).then(s=>{this.loading=!1,this.$botNotification.success("Команды","Диалоговая команда успешно продублирована!"),this.$emit("callback")}).catch(s=>{this.loading=!1})},removeCommand(){this.loading=!0,this.$store.dispatch("removeDialogCommand",{dataObject:{dialogCommandId:this.item.id}}).then(s=>{this.loading=!1,this.$botNotification.success("Команды","Диалоговая команда успешно удалена!"),this.$emit("callback")}).catch(s=>{this.loading=!1})},loadGroups(s=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{simple:!0},page:s,size:100}).then(e=>{this.loading=!1,this.commands=this.getDialogs}).catch(()=>{this.loading=!1})},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},submit(){this.loading=!0;let s=new FormData;if(Object.keys(this.commandForm).forEach(e=>{const o=this.commandForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos){for(let e=0;e<this.photos.length;e++)s.append("files[]",this.photos[e]);s.delete("photos")}this.$store.dispatch(this.commandForm.id?"updateDialogCommand":"createDialogCommand",{dialogCommandForm:s}).then(e=>{this.loading=!1,this.$botNotification.success("Команды","Успешная обработка диалоговой команды!"),this.commandForm.id==null&&(this.commandForm={id:null,slug:null,pre_text:null,post_text:null,error_text:null,input_pattern:null,inline_keyboard_id:null,is_empty:!1,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,result_flags:[],store_to:null},this.photos=[]),this.$emit("callback")}).catch(e=>{this.loading=!1})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s,e){this[s].splice(e,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},saveInlineKeyboard(s){this.commandForm.inline_keyboard=s},saveReplyKeyboard(s){this.commandForm.reply_keyboard=s},addTextTo(s={param:null,text:null}){this.commandForm[s.param]=s.text},selectFlag(s){this.commandForm.result_flags||(this.commandForm.result_flags=[]);let e=this.commandForm.result_flags.indexOf(s.key);e===-1?this.commandForm.result_flags.push(s.key):this.commandForm.result_flags.splice(e,1)}}},$r=Object.assign(lee,{__name:"BotDialogCommandForm",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a("form",{onSubmit:o[16]||(o[16]=W((...i)=>e.submit&&e.submit(...i),["prevent"]))},[e.commandForm.id?(l(),a("p",NX,[t("span",qX,"#"+p(e.commandForm.id),1),WX,e.commandForm.next_bot_dialog_command_id?(l(),a("span",YX,[_("#"+p(e.commandForm.next_bot_dialog_command_id||"-")+" ",1),t("i",{class:"ml-2 fa-solid fa-link-slash",onClick:o[0]||(o[0]=(...i)=>e.unlinkCommand&&e.unlinkCommand(...i))})])):(l(),a("span",HX,"не связан"))])):u("",!0),t("div",QX,[t("label",{for:"commandForm-pre-text-"+e.commandForm.id,class:"font-12"},"Текст диалога",8,GX),f(t("textarea",{style:{"min-height":"200px"},class:"form-control font-12",id:"commandForm-pre-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[1]||(o[1]=i=>e.commandForm.pre_text=i),required:""},`

            `,8,KX),[[k,e.commandForm.pre_text]])]),t("div",JX,[t("div",XX,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=i=>e.commandForm.is_empty=i),id:"need-empty-dialog",checked:""},null,512),[[z,e.commandForm.is_empty]]),ZX])]),e.commandForm.is_empty?u("",!0):(l(),a("div",eZ,[t("label",{for:"commandForm-post-text-"+e.commandForm.id,class:"font-12"},"Текст после успешного завершения диалога",8,tZ),f(t("textarea",{style:{"min-height":"200px"},class:"form-control font-12",id:"commandForm-post-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[3]||(o[3]=i=>e.commandForm.post_text=i),required:""},`
            `,8,sZ),[[k,e.commandForm.post_text]])])),e.commandForm.is_empty?u("",!0):(l(),a("div",oZ,[t("label",{for:"commandForm-error-text-"+e.commandForm.id,class:"font-12"},"Текст на случай ошибки корректности данных",8,iZ),f(t("textarea",{style:{"min-height":"200px"},class:"form-control font-12",id:"commandForm-error-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[4]||(o[4]=i=>e.commandForm.error_text=i),required:""},`
            `,8,nZ),[[k,e.commandForm.error_text]])])),e.commandForm.is_empty?u("",!0):(l(),a("div",lZ,[t("div",aZ,[t("label",{class:"form-label font-12",for:"commandForm-result-channel-"+e.commandForm.id},"Регулярное выражение для автоматической проверки данных ",8,rZ),f(t("select",{id:"next-dialog-select",class:"form-select form-control font-12","onUpdate:modelValue":o[5]||(o[5]=i=>e.commandForm.input_pattern=i)},[(l(!0),a(v,null,O(e.expressions,i=>(l(),a("option",{value:i.expression},p(i.description||"-"),9,dZ))),256))],512),[[Ve,e.commandForm.input_pattern]])]),t("label",{for:"custom-regular-expression"+e.commandForm.id,class:"font-12"},"или впишите своё",8,cZ),f(t("input",{id:"custom-regular-expression"+e.commandForm.id,type:"text",class:"form-control",placeholder:"Регулярное выражение","aria-label":"Регулярное выражение","onUpdate:modelValue":o[6]||(o[6]=i=>e.commandForm.input_pattern=i),maxlength:"255","aria-describedby":"commandForm-input-pattern"},null,8,uZ),[[k,e.commandForm.input_pattern]])])),e.commandForm.is_empty?u("",!0):(l(),a("div",mZ,[t("label",{for:"next-dialog-select"+e.commandForm.id,class:"font-12"},"Следующий диалог",8,hZ),t("select",{id:"next-dialog-select"+e.commandForm.id,class:"form-select form-control font-12","aria-label":"Default select example"},[_Z,(l(!0),a(v,null,O(e.commands,(i,r)=>(l(),a("option",{value:i.id},"#"+p(i.id)+" "+p(i.pre_text||"Без текста"),9,fZ))),256))],8,pZ)])),t("div",bZ,[t("div",gZ,[t("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Канал для отправки данных ",8,yZ),t("span",{onClick:o[7]||(o[7]=i=>e.requestChannelId("result_channel"))},$Z)]),f(t("input",{type:"number",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[8]||(o[8]=i=>e.commandForm.result_channel=i),id:"commandForm-result-channel-"+e.commandForm.id,"aria-describedby":"bot-order-channel"},null,8,kZ),[[k,e.commandForm.result_channel]])]),t("div",wZ,[t("div",FZ,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[9]||(o[9]=i=>e.need_images=i),id:"need-dialog-image",checked:""},null,512),[[z,e.need_images]]),CZ]),t("div",PZ,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[10]||(o[10]=i=>e.need_inline_keyboard=i),id:"need-dialog-menu-inline",checked:""},null,512),[[z,e.need_inline_keyboard]]),SZ]),t("div",xZ,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=i=>e.need_reply_keyboard=i),id:"need-dialog-menu-reply",checked:""},null,512),[[z,e.need_reply_keyboard]]),jZ])]),e.need_images?(l(),a("div",OZ,[TZ,t("div",UZ,[t("label",IZ,[VZ,t("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:o[12]||(o[12]=(...i)=>e.onChangePhotos&&e.onChangePhotos(...i)),style:{display:"none"}},null,32)]),e.photos.length>0?(l(!0),a(v,{key:0},O(e.photos,(i,r)=>(l(),a("div",MZ,[f(t("img",null,null,512),[[n,e.getPhoto(i).imageUrl]]),t("div",AZ,[t("a",{onClick:d=>e.removePhoto("photos",r)},"Удалить",8,EZ)])]))),256)):u("",!0),e.commandForm.images&&s.bot?(l(!0),a(v,{key:1},O(e.commandForm.images,(i,r)=>(l(),a("div",DZ,[f(t("img",null,null,512),[[n,"/images-by-bot-id/"+s.bot.id+"/"+i]]),t("div",zZ,[t("a",{onClick:d=>e.removePhoto("images",r)},"Удалить",8,BZ)])]))),256)):u("",!0)])])):u("",!0),e.need_inline_keyboard?(l(),a("div",LZ,[RZ,T(ls,{onSave:e.saveInlineKeyboard,"edited-keyboard":e.commandForm.inline_keyboard},null,8,["onSave","edited-keyboard"])])):u("",!0),e.need_reply_keyboard?(l(),a("div",NZ,[qZ,T(ls,{onSave:e.saveReplyKeyboard,"edited-keyboard":e.commandForm.reply_keyboard},null,8,["onSave","edited-keyboard"])])):u("",!0),t("div",WZ,[YZ,f(t("select",{class:"form-control font-12","onUpdate:modelValue":o[13]||(o[13]=i=>e.commandForm.store_to=i)},[HZ,(l(!0),a(v,null,O(e.store_variants,i=>(l(),a("option",{value:i.key},p(i.title||"Не указано"),9,QZ))),256))],512),[[Ve,e.commandForm.store_to]])]),t("div",GZ,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[14]||(o[14]=i=>e.need_set_flags=i),id:"need-set-flags",checked:""},null,512),[[z,e.need_set_flags]]),KZ]),e.need_set_flags?(l(),a("div",JZ,[XZ,(l(!0),a(v,null,O(e.flags_variants,i=>(l(),a("span",{class:C(["badge mr-2",{"bg-info text-white":e.commandForm.result_flags.indexOf(i.key)!=-1}]),onClick:r=>e.selectFlag(i)},p(i.title),11,ZZ))),256))])):u("",!0),t("div",eee,[t("button",tee,[e.commandForm.id?(l(),a("span",see,"Обновить диалог")):(l(),a("span",oee,"Добавить диалог"))])]),e.commandForm.id?(l(),a("div",iee)):u("",!0),e.commandForm.id?(l(),a("a",{key:10,onClick:o[15]||(o[15]=(...i)=>e.removeCommand&&e.removeCommand(...i)),title:"Удаление команды",class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-red2-dark"},[nee,_(" Удалить диалог ")])):u("",!0)],32)}}});const aee={class:"btn w-100 text-left border-blue2-light",type:"button"},ree={key:0,class:"fa-solid fa-chevron-up"},dee={key:1,class:"fa-solid fa-chevron-down"},cee={props:["item","bot"],data(){return{showMenu:!1}},methods:{selectDialog(){this.$emit("select",this.item)}}},uee=Object.assign(cee,{__name:"DialogCommandCard",setup(s){return(e,o)=>(l(),a("div",aee,[t("p",{onClick:o[0]||(o[0]=n=>e.showMenu=!e.showMenu),class:"w-100 mb-0"},[e.showMenu?(l(),a("i",ree)):(l(),a("i",dee)),_(" "+p(s.item.pre_text||"Нет команды"),1)]),e.showMenu?(l(),M($r,{key:0,bot:s.bot,item:s.item},null,8,["bot","item"])):u("",!0)]))}}),mee={key:0},hee=t("i",{class:"fa-regular fa-comment-dots mr-2"},null,-1),pee={key:1},_ee=t("i",{class:"fa-solid fa-chevron-up mr-2"},null,-1),fee=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),bee={key:1},gee={class:"mb-2"},yee={key:0},vee={class:"mb-2"},$ee={key:1},kee={key:2,class:"row"},wee=t("div",{class:"col-12"},[t("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет созданных диалоговых групп ")],-1),Fee=[wee],Cee={props:["bot"],data(){return{needCreate:!1,loading:!0,dialog_groups:[],search:null,link:null,group:null}},computed:{...G(["getDialogs","getDialogsPaginateObject"]),filteredCommands(){return this.link?this.dialog_groups.find(e=>e.id===this.link.group_id).bot_dialog_commands.filter(e=>e.id!=this.link.id):[]}},mounted(){this.loadGroups()},methods:{loadGroups(s=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{search:this.search},page:s}).then(e=>{this.loading=!1,this.dialog_groups=this.getDialogs,this.dialog_groups_paginate_object=this.getDialogsPaginateObject}).catch(()=>{this.loading=!1})}}},Pee=Object.assign(Cee,{__name:"BotDialogGroupList",setup(s){return(e,o)=>(l(),a(v,null,[t("button",{type:"button",onClick:o[0]||(o[0]=n=>e.needCreate=!e.needCreate),class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-green2-dark w-100"},[e.needCreate?(l(),a("span",pee,[_ee,_("Скрыть создание диалога ")])):(l(),a("span",mee,[hee,_("Создать новый диалог ")]))]),s.bot&&e.needCreate?(l(),M($r,{key:0,onCallback:e.loadGroups,bot:s.bot},null,8,["onCallback","bot"])):u("",!0),fee,e.dialog_groups.length>0?(l(),a("div",bee,[(l(!0),a(v,null,O(e.dialog_groups,(n,i)=>(l(),a("div",gee,[n.bot_dialog_commands.length>0?(l(),a("div",yee,[(l(!0),a(v,null,O(n.bot_dialog_commands,(r,d)=>(l(),a("div",vee,[s.bot?(l(),M(uee,{key:0,bot:s.bot,onCallback:e.loadGroups,item:r},null,8,["bot","onCallback","item"])):u("",!0)]))),256))])):(l(),a("p",$ee,"Диалоговых скриптов не найдено"))]))),256))])):(l(),a("div",kee,Fee))],64))}}),See={class:"card card-style"},xee={class:"card-body"},jee={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})}}},kr=Object.assign(jee,{__name:"Dialogs",setup(s){return(e,o)=>(l(),a("div",See,[t("div",xee,[e.load?u("",!0):(l(),M(Pee,{key:0,bot:e.bot},null,8,["bot"]))])]))}}),Oee=Object.freeze(Object.defineProperty({__proto__:null,default:kr},Symbol.toStringTag,{value:"Module"})),Tee={class:"card card-style"},Uee={class:"card-body"},Iee={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})}}},wr=Object.assign(Iee,{__name:"Keyboards",setup(s){return(e,o)=>(l(),a("div",Tee,[t("div",Uee,[e.load?u("",!0):(l(),M(ao,{key:0,bot:e.bot,"select-mode":!1},null,8,["bot"]))])]))}}),Vee=Object.freeze(Object.defineProperty({__proto__:null,default:wr},Symbol.toStringTag,{value:"Module"})),Mee={props:["data","bot"],components:{Vue3JsonEditor:qs},data(){return{load:!1,custom_fields:null,fields:[{title:"Телефонный номер",field:"phone"},{title:"Ф.И.О.",field:"fio_from_telegram"},{title:"Почта",field:"email"},{title:"Дата рождения",field:"birthday"},{title:"Возраст",field:"age"},{title:"Страна",field:"country"},{title:"Адрес",field:"address"},{title:"Пол",field:"sex"},{title:"Идентификатор чата",field:"fio_from_telegram"}],hasConnect:!1,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null,fields:null}}},mounted(){this.data&&this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null,this.amoForm.fields=this.data.fields||null})},methods:{loadAmoFields(){this.load=!0,this.custom_fields=null,this.$store.dispatch("loadAmoFields").then(s=>{this.custom_fields=s._embedded.custom_fields.contacts||null,this.$nextTick(()=>{this.load=!1}),this.$botNotification.success("Работа с AMO","Справочная информация успешно загружена")}).catch(s=>{this.$botNotification.warning("Работа с AMO","Ошибка работы со справочной информацией")})},removeField(s){this.amoForm.fields&&this.amoForm.fields.splice(s,1)},addField(){this.amoForm.fields||(this.amoForm.fields=[]),this.amoForm.fields.push({key:null,field:null,enum:null})},syncAmo(){this.$store.dispatch("syncAmo").then(s=>{this.$botNotification.success("Работа с AMO","Данные CRM успешно сохранены")}).catch(s=>{this.$botNotification.warning("Работа с AMO","Ошибка работы")})},submitAmo(){let s=new FormData;Object.keys(this.amoForm).forEach(e=>{const o=this.amoForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("saveAmoCRM",{amoForm:s}).then(e=>{this.$botNotification.success("Работа с AMO","Данные CRM успешно сохранены")}).catch(e=>{})}}},Aee={class:"card card-style"},Eee={class:"content mb-0"},Dee=t("h3",null,"Настройка AMO",-1),zee=t("p",{class:"mb-2"},[t("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),_(" по шагам")],-1),Bee={class:"mb-2"},Lee={class:"form-label d-flex justify-content-between mt-2",id:"client_id"},Ree=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Nee=t("div",null,"ID интеграции",-1),qee=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Wee=t("div",null,"Нужно ",-1),Yee={class:"mb-2"},Hee={class:"form-label d-flex justify-content-between mt-2",id:"client_secret"},Qee=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Gee=t("div",null,"Секрет интеграции",-1),Kee=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Jee=t("div",null,"Нужно ",-1),Xee={class:"mb-2"},Zee={class:"form-label d-flex justify-content-between mt-2",id:"auth_code"},ete=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),tte=t("div",null,"Полученный код авторизации",-1),ste=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),ote=t("div",null,"Нужно ",-1),ite={class:"mb-2"},nte={class:"form-label d-flex justify-content-between mt-2",id:"subdomain2"},lte=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ate=t("div",null,"Ваш поддомен в системе AMO CRM",-1),rte=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),dte=t("div",null,"Нужно ",-1),cte=["disabled"],ute={class:"mb-2"},mte=["id"],hte=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pte=t("div",null,"Ключевое значение из справочника",-1),_te=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),fte=t("div",null,"Нужно ",-1),bte=["onUpdate:modelValue"],gte={class:"mb-2"},yte=["id"],vte=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$te=t("div",null,"Поле из списка для связи",-1),kte=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),wte=t("div",null,"Нужно ",-1),Fte=["onUpdate:modelValue"],Cte=["value"],Pte={class:"mb-2"},Ste=["id"],xte=["onUpdate:modelValue"],jte=["onClick"],Ote=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Tte=t("button",{type:"submit",class:"btn btn-m btn-full mt-3 mb-3 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"},[t("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),_(" Сохранить настройку AMO ")],-1),Ute=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1);function Ite(s,e,o,n,i,r){const d=Qe("Popper"),c=Qe("Vue3JsonEditor");return l(),a("div",Aee,[t("div",Eee,[Dee,t("form",{onSubmit:e[7]||(e[7]=W((...h)=>r.submitAmo&&r.submitAmo(...h),["prevent"]))},[zee,t("div",Bee,[t("label",Lee,[t("div",null,[T(d,null,{content:A(()=>[Nee]),default:A(()=>[Ree]),_:1}),_(" client_id ")]),T(d,null,{content:A(()=>[Wee]),default:A(()=>[qee]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":e[0]||(e[0]=h=>i.amoForm.client_id=h),"aria-describedby":"client_id",required:""},null,512),[[k,i.amoForm.client_id]])]),t("div",Yee,[t("label",Hee,[t("div",null,[T(d,null,{content:A(()=>[Gee]),default:A(()=>[Qee]),_:1}),_(" client_secret ")]),T(d,null,{content:A(()=>[Jee]),default:A(()=>[Kee]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":e[1]||(e[1]=h=>i.amoForm.client_secret=h),"aria-describedby":"client_secret",required:""},null,512),[[k,i.amoForm.client_secret]])]),t("div",Xee,[t("label",Zee,[t("div",null,[T(d,null,{content:A(()=>[tte]),default:A(()=>[ete]),_:1}),_(" auth_code ")]),T(d,null,{content:A(()=>[ote]),default:A(()=>[ste]),_:1})]),f(t("textarea",{class:"form-control font-12",style:{"min-height":"250px"},placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":e[2]||(e[2]=h=>i.amoForm.auth_code=h),"aria-describedby":"auth_code",required:""},`
                                    `,512),[[k,i.amoForm.auth_code]])]),t("div",ite,[t("label",nte,[t("div",null,[T(d,null,{content:A(()=>[ate]),default:A(()=>[lte]),_:1}),_(" subdomain ")]),T(d,null,{content:A(()=>[dte]),default:A(()=>[rte]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":e[3]||(e[3]=h=>i.amoForm.subdomain=h),"aria-describedby":"subdomain",required:""},null,512),[[k,i.amoForm.subdomain]])]),t("button",{type:"button",disabled:!i.amoForm.client_id||!i.amoForm.auth_code||!i.amoForm.client_secret||!i.amoForm.subdomain,onClick:e[4]||(e[4]=(...h)=>r.loadAmoFields&&r.loadAmoFields(...h)),class:"btn w-100 btn-m btn-full rounded-s mb-1 rounded-0 text-uppercase font-900 shadow-s bg-green2-dark"}," Загрузить справочную информацию ",8,cte),!i.load&&i.custom_fields?(l(),M(c,{key:0,mode:"tree",modelValue:i.custom_fields,"onUpdate:modelValue":e[5]||(e[5]=h=>i.custom_fields=h),"show-btns":!1,expandedOnStart:!1},null,8,["modelValue"])):u("",!0),i.amoForm.fields?(l(!0),a(v,{key:1},O(i.amoForm.fields,(h,g)=>(l(),a("div",null,[t("div",ute,[t("label",{class:"form-label d-flex justify-content-between mt-0 mb-0",id:"field-key-"+g},[t("div",null,[T(d,null,{content:A(()=>[pte]),default:A(()=>[hte]),_:1}),_(" Ключевое значение из справочника ")]),T(d,null,{content:A(()=>[fte]),default:A(()=>[_te]),_:1})],8,mte),f(t("input",{type:"number",class:"form-control",placeholder:"Ключ","aria-label":"Ключ","onUpdate:modelValue":w=>i.amoForm.fields[g].key=w,"aria-describedby":"Ключ",required:""},null,8,bte),[[k,i.amoForm.fields[g].key]])]),t("div",gte,[t("label",{class:"form-label d-flex justify-content-between mt-0 mb-0",id:"field-field-"+g},[t("div",null,[T(d,null,{content:A(()=>[$te]),default:A(()=>[vte]),_:1}),_(" Поле из списка для связи ")]),T(d,null,{content:A(()=>[wte]),default:A(()=>[kte]),_:1})],8,yte),f(t("select",{class:"form-control font-12","onUpdate:modelValue":w=>i.amoForm.fields[g].field=w},[(l(!0),a(v,null,O(i.fields,w=>(l(),a("option",{value:w.field},p(w.title||"Ошибка"),9,Cte))),256))],8,Fte),[[Ve,i.amoForm.fields[g].field]])]),t("div",Pte,[t("label",{class:"form-label d-flex justify-content-between mt-0 mb-0",id:"field-enum-"+g}," Перечисление (enum) из справочника ",8,Ste),f(t("input",{type:"text",class:"form-control",placeholder:"Перечисление","aria-label":"Перечисление","onUpdate:modelValue":w=>i.amoForm.fields[g].enum=w,"aria-describedby":"Перечисление"},null,8,xte),[[k,i.amoForm.fields[g].enum]])]),t("button",{type:"button",onClick:w=>r.removeField(g),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-red1-dark color-red1-dark bg-theme w-100"}," Удалитьс связь полей ",8,jte),Ote]))),256)):u("",!0),t("button",{type:"button",onClick:e[6]||(e[6]=(...h)=>r.addField&&r.addField(...h)),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить связь полей "),Tte],32),Ute,t("a",{href:"javascript:void(0)",onClick:e[8]||(e[8]=(...h)=>r.syncAmo&&r.syncAmo(...h)),class:"btn btn-m btn-full rounded-s mb-3 rounded-0 text-uppercase font-900 shadow-s bg-green2-dark"}," Синохрозировать ")])])}const Vte=oe(Mee,[["render",Ite]]),Mte={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.amo=this.bot.amo})}}},Fr=Object.assign(Mte,{__name:"Amo",setup(s){return(e,o)=>!e.load&&e.bot?(l(),M(Vte,{key:0,bot:e.bot,data:e.bot.amo},null,8,["bot","data"])):u("",!0)}}),Ate=Object.freeze(Object.defineProperty({__proto__:null,default:Fr},Symbol.toStringTag,{value:"Module"})),Ete={props:["data","bot"],data(){return{load:!1,yClientsForm:{login:null,password:null,partner_token:null,company:null}}},mounted(){this.data&&this.$nextTick(()=>{this.yClientsForm.login=this.data.login||null,this.yClientsForm.password=this.data.password||null,this.yClientsForm.partner_token=this.data.partner_token||null,this.yClientsForm.company=this.data.company||null})},methods:{submitYClients(){let s=new FormData;Object.keys(this.yClientsForm).forEach(e=>{const o=this.yClientsForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("saveYClients",{yClientsForm:s}).then(e=>{this.$botNotification.success("Работа с YClients","Данные успешно сохранены")}).catch(e=>{this.$botNotification.warning("Работа с YClients","Ошибочка")})}}},Dte=t("h3",null,"Настройка YClients",-1),zte={class:"form-floating mb-2"},Bte=t("label",{for:"login"}," Логин ",-1),Lte={class:"form-floating mb-2"},Rte=t("label",{for:"password"}," Пароль ",-1),Nte={class:"form-floating mb-2"},qte=t("label",{for:"partner_token"}," Партнерский тоукен ",-1),Wte={class:"form-floating mb-2"},Yte=t("label",{for:"partner_token"}," ID компании, в которую записывать клиентов ",-1),Hte=t("button",{class:"btn btn-primary w-100 p-3"}," Сохранить ",-1);function Qte(s,e,o,n,i,r){return l(),a(v,null,[Dte,t("form",{onSubmit:e[4]||(e[4]=W((...d)=>r.submitYClients&&r.submitYClients(...d),["prevent"]))},[t("div",zte,[f(t("input",{type:"text",id:"login",class:"form-control",placeholder:"Ваш логин","aria-label":"Ваш логин","onUpdate:modelValue":e[0]||(e[0]=d=>i.yClientsForm.login=d),"aria-describedby":"Ваш логин",required:""},null,512),[[k,i.yClientsForm.login]]),Bte]),t("div",Lte,[f(t("input",{type:"text",id:"password",class:"form-control",placeholder:"Ваш пароль","aria-label":"Ваш пароль","onUpdate:modelValue":e[1]||(e[1]=d=>i.yClientsForm.password=d),"aria-describedby":"Ваш пароль",required:""},null,512),[[k,i.yClientsForm.password]]),Rte]),t("div",Nte,[f(t("input",{type:"text",id:"partner_token",class:"form-control",placeholder:"Ваш партнерский тоукен","aria-label":"Ваш партнерский тоукен","onUpdate:modelValue":e[2]||(e[2]=d=>i.yClientsForm.partner_token=d),"aria-describedby":"Ваш партнерский тоукен",required:""},null,512),[[k,i.yClientsForm.partner_token]]),qte]),t("div",Wte,[f(t("input",{type:"number",id:"throttle",class:"form-control",placeholder:"ID компании","aria-label":"ID компании","onUpdate:modelValue":e[3]||(e[3]=d=>i.yClientsForm.company=d),"aria-describedby":"ID компании",required:""},null,512),[[k,i.yClientsForm.company]]),Yte]),Hte],32)],64)}const Cr=oe(Ete,[["render",Qte]]),Gte={data(){return{load:!1,bot:null,y_clients:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.y_clients=this.bot.y_clients})}}},Pr=Object.assign(Gte,{__name:"YClients",setup(s){return(e,o)=>!e.load&&e.bot?(l(),M(Cr,{key:0,bot:e.bot,data:e.bot.y_clients},null,8,["bot","data"])):u("",!0)}}),Kte=Object.freeze(Object.defineProperty({__proto__:null,default:Pr},Symbol.toStringTag,{value:"Module"})),Jte={key:0,id:"user-profile-info"},Xte={class:"card card-style bg-theme pb-0"},Zte={class:"content mb-0"},ese={key:0,class:"card card-style"},tse={class:"content"},sse={class:"text-center"},ose={class:"mb-0 text-center font-weight-bold"},ise={class:"mb-0 text-center font-weight-bold"},nse={key:0},lse=t("i",{class:"fa-solid fa-rotate mr-1 color-green2-light"},null,-1),ase={key:1},rse=t("i",{class:"fa-solid fa-triangle-exclamation mr-1 color-red1-light"},null,-1),dse={class:"mb-0"},cse={class:"d-flex justify-content-around flex-wrap save-up"},use=["onClick"],mse=["innerHTML"],hse={key:1},pse=t("i",{class:"fa-solid fa-question"},null,-1),_se=[pse],fse=["disabled"],bse={class:"mb-3"},gse=t("label",{for:"user-name",class:"form-label"},"Запросите имя пользователя",-1),yse={class:"mb-3"},vse=t("label",{for:"user-phone",class:"form-label"},"Запросите телефон пользователя",-1),$se=t("div",{class:"mb-1"},[t("button",{type:"submit",class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Обменять бонусы ")],-1),kse={data(){return{action:null,botUser:null,loading:!1,icon:null,icon_color:null,reloadable:!1,request_telegram_chat_id:null,need_show_form:!1,userForm:{name:null,phone:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},watch:{getSelf:function(){this.botUser=this.getSelf}},mounted(){this.getSelf&&(this.botUser=this.getSelf);const s=new URLSearchParams(window.location.search),e=JSON.parse(s.get("user"));e&&(this.request_telegram_chat_id=e,this.loadActionData())},methods:{requestClick(){if(this.loading){this.$botNotification.warning("Упс!","Вы уже выполняете это действие");return}this.loading=!0,this.$store.dispatch("bonusProductCheck",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id}}).then(s=>{this.loading=!1,this.loadActionData(),this.$botNotification.success("Отлично!","Вы успешно отметили бонус пользователю")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так!")})},exchange(){this.loading=!0,this.$store.dispatch("bonusProductExchange",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.userForm}}).then(s=>{this.loading=!1,this.need_show_form=!1,this.loadActionData(),this.$botNotification.success("Отлично!","Вы успешно обменяли бонусы пользователя на приз!")}).catch(()=>{this.loading=!1,this.need_show_form=!1,this.$botNotification.warning("Упс!","Что-то пошло не так!")})},completeClick(){this.$botNotification.success("Отлично!","В этой ячейке уже есть отметка о бонусе:)")},loadActionData(){this.loading=!0,this.$store.dispatch("loadActionData",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id}}).then(s=>{this.action=s.action,this.icon=s.icon,this.icon_color=s.icon_color,this.reloadable=s.reloadable,this.botUser=s.action.bot_user,this.userForm.name=this.botUser.name||this.botUser.fio_from_telegram||null,this.userForm.phone=this.botUser.phone||null,this.loading=!1}).catch(()=>{this.loading=!1})}}},Sr=Object.assign(kse,{__name:"BonusProduct",setup(s){return(e,o)=>{const n=ie("mask");return e.request_telegram_chat_id?(l(),a("div",Jte,[t("div",Xte,[t("div",Zte,[e.botUser?(l(),M(Ji,{key:0,"bot-user":e.botUser},null,8,["bot-user"])):u("",!0),T(st,{class:"mb-3"})])]),e.action?(l(),a("div",ese,[t("div",tse,[t("h6",sse,"Личная накопительная карта пользвателя #"+p(e.action.slug_id),1),t("p",ose,p(e.action.slug.command||"Не указана"),1),t("p",ise,[e.reloadable?(l(),a("span",nse,[lse,_("После обмена перезагружается по новой")])):(l(),a("span",ase,[rse,_("Единоразовая акция")]))]),t("p",dse,p(e.action.slug.comment||"Не указан"),1),t("ul",cse,[(l(!0),a(v,null,O(e.action.max_attempts||10,i=>(l(),a("li",{class:C({active:i<=e.action.current_attempts}),onClick:r=>i<=e.action.current_attempts?e.completeClick():e.requestClick()},[i<=e.action.current_attempts?(l(),a("span",{key:0,innerHTML:e.icon,style:dt({color:e.icon_color})},null,12,mse)):(l(),a("span",hse,_se))],10,use))),256))]),e.need_show_form?u("",!0):(l(),a("button",{key:0,type:"button",onClick:o[0]||(o[0]=W(i=>e.need_show_form=!0,["prevent"])),disabled:e.action.current_attempts!==e.action.max_attempts,class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-green2-light w-100 mb-1"}," Обменять бонусы ",8,fse)),e.need_show_form?(l(),a("form",{key:1,onSubmit:o[3]||(o[3]=W((...i)=>e.exchange&&e.exchange(...i),["prevent"]))},[t("div",bse,[gse,f(t("input",{type:"text",class:"form-control",id:"user-name","onUpdate:modelValue":o[1]||(o[1]=i=>e.userForm.name=i),placeholder:"Имя пользователя",required:""},null,512),[[k,e.userForm.name]])]),t("div",yse,[vse,f(t("input",{type:"text",class:"form-control",id:"user-phone","onUpdate:modelValue":o[2]||(o[2]=i=>e.userForm.phone=i),placeholder:"Номер телефона пользователя",required:""},null,512),[[n,"+7(###)###-##-##"],[k,e.userForm.phone]])]),$se],32)):u("",!0),T(st)])])):u("",!0)])):u("",!0)}}}),wse=Object.freeze(Object.defineProperty({__proto__:null,default:Sr},Symbol.toStringTag,{value:"Module"})),Fse={key:0,id:"user-profile-info"},Cse={class:"card card-style bg-theme pb-0"},Pse={class:"content mb-0"},Sse={key:0,class:"card card-style"},xse={class:"content"},jse={class:"text-center"},Ose={class:"mb-0 text-center font-weight-bold"},Tse={class:"mb-0 text-center font-weight-bold"},Use={key:0},Ise=t("i",{class:"fa-solid fa-rotate mr-1 color-green2-light"},null,-1),Vse={key:1},Mse=t("i",{class:"fa-solid fa-triangle-exclamation mr-1 color-red1-light"},null,-1),Ase={class:"mb-0"},Ese={class:"d-flex justify-content-around flex-wrap save-up"},Dse=["onClick"],zse=["innerHTML"],Bse={key:1},Lse=t("i",{class:"fa-solid fa-question"},null,-1),Rse=[Lse],Nse=["disabled"],qse={class:"mb-3"},Wse=t("label",{for:"user-name",class:"form-label"},"Запросите имя пользователя",-1),Yse={class:"mb-3"},Hse=t("label",{for:"user-phone",class:"form-label"},"Запросите телефон пользователя",-1),Qse=t("div",{class:"mb-1"},[t("button",{type:"submit",class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Обменять бонусы ")],-1),Gse={data(){return{action:null,botUser:null,loading:!1,icon:null,icon_color:null,reloadable:!1,request_telegram_chat_id:null,need_show_form:!1,userForm:{name:null,phone:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},watch:{getSelf:function(){this.botUser=this.getSelf}},mounted(){this.getSelf&&(this.botUser=this.getSelf);const s=new URLSearchParams(window.location.search),e=JSON.parse(s.get("user"));e&&(this.request_telegram_chat_id=e,this.loadActionData())},methods:{requestClick(){if(this.loading){this.$botNotification.warning("Упс!","Вы уже выполняете это действие");return}this.loading=!0,this.$store.dispatch("bonusProductCheck",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id}}).then(s=>{this.loading=!1,this.loadActionData(),this.$botNotification.success("Отлично!","Вы успешно отметили бонус пользователю")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так!")})},exchange(){this.loading=!0,this.$store.dispatch("bonusProductExchange",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id,...this.userForm}}).then(s=>{this.loading=!1,this.need_show_form=!1,this.loadActionData(),this.$botNotification.success("Отлично!","Вы успешно обменяли бонусы пользователя на приз!")}).catch(()=>{this.loading=!1,this.need_show_form=!1,this.$botNotification.warning("Упс!","Что-то пошло не так!")})},completeClick(){this.$botNotification.success("Отлично!","В этой ячейке уже есть отметка о бонусе:)")},loadActionData(){this.loading=!0,this.$store.dispatch("loadActionData",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id}}).then(s=>{this.action=s.action,this.icon=s.icon,this.icon_color=s.icon_color,this.reloadable=s.reloadable,this.botUser=s.action.bot_user,this.userForm.name=this.botUser.name||this.botUser.fio_from_telegram||null,this.userForm.phone=this.botUser.phone||null,this.loading=!1}).catch(()=>{this.loading=!1})}}},xr=Object.assign(Gse,{__name:"MessageToUser",setup(s){return(e,o)=>{const n=ie("mask");return e.request_telegram_chat_id?(l(),a("div",Fse,[t("div",Cse,[t("div",Pse,[e.botUser?(l(),M(Ji,{key:0,"bot-user":e.botUser},null,8,["bot-user"])):u("",!0),T(st,{class:"mb-3"})])]),e.action?(l(),a("div",Sse,[t("div",xse,[t("h6",jse,"Личная накопительная карта пользвателя #"+p(e.action.slug_id),1),t("p",Ose,p(e.action.slug.command||"Не указана"),1),t("p",Tse,[e.reloadable?(l(),a("span",Use,[Ise,_("После обмена перезагружается по новой")])):(l(),a("span",Vse,[Mse,_("Единоразовая акция")]))]),t("p",Ase,p(e.action.slug.comment||"Не указан"),1),t("ul",Ese,[(l(!0),a(v,null,O(e.action.max_attempts||10,i=>(l(),a("li",{class:C({active:i<=e.action.current_attempts}),onClick:r=>i<=e.action.current_attempts?e.completeClick():e.requestClick()},[i<=e.action.current_attempts?(l(),a("span",{key:0,innerHTML:e.icon,style:dt({color:e.icon_color})},null,12,zse)):(l(),a("span",Bse,Rse))],10,Dse))),256))]),e.need_show_form?u("",!0):(l(),a("button",{key:0,type:"button",onClick:o[0]||(o[0]=W(i=>e.need_show_form=!0,["prevent"])),disabled:e.action.current_attempts!==e.action.max_attempts,class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-green2-light w-100 mb-1"}," Обменять бонусы ",8,Nse)),e.need_show_form?(l(),a("form",{key:1,onSubmit:o[3]||(o[3]=W((...i)=>e.exchange&&e.exchange(...i),["prevent"]))},[t("div",qse,[Wse,f(t("input",{type:"text",class:"form-control",id:"user-name","onUpdate:modelValue":o[1]||(o[1]=i=>e.userForm.name=i),placeholder:"Имя пользователя",required:""},null,512),[[k,e.userForm.name]])]),t("div",Yse,[Hse,f(t("input",{type:"text",class:"form-control",id:"user-phone","onUpdate:modelValue":o[2]||(o[2]=i=>e.userForm.phone=i),placeholder:"Номер телефона пользователя",required:""},null,512),[[n,"+7(###)###-##-##"],[k,e.userForm.phone]])]),Qse],32)):u("",!0),T(st)])])):u("",!0)])):u("",!0)}}}),Kse=Object.freeze(Object.defineProperty({__proto__:null,default:xr},Symbol.toStringTag,{value:"Module"})),Jse={key:0},Xse={class:"d-flex flex-column mt-2"},Zse={class:"d-flex my-3 w-100"},eoe={class:"pt-1"},toe={"data-activate":"toggle-id-2",class:"font-500 font-13"},soe={key:0},ooe={key:1},ioe={class:"ml-auto mr-4 pr-2"},noe={class:"custom-control ios-switch ios-switch-icon"},loe=t("label",{class:"custom-control-label",for:"toggle-id-2"},null,-1),aoe=t("i",{class:"fa fa-check font-11 color-white"},null,-1),roe=t("i",{class:"fa fa-times font-11 color-white"},null,-1),doe={key:0},coe=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),uoe=["onClick"],moe=t("a",{href:"#",class:"btn btn-m btn-full rounded-xl text-uppercase font-900 shadow-s bg-red1-light"},[t("i",{class:"fa-solid fa-arrow-right"})],-1),hoe={key:1},poe=t("div",{class:"alert alert-warning mt-2",role:"alert"}," К сожалению мы не нашли нужных ботов... ",-1),_oe=[poe],foe={props:{companyId:null,selectedBotId:null},data(){return{need_self_bots:!1,filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],search:null,bots_paginate_object:null}},watch:{need_self_bots:function(){this.loadBots()}},computed:{...G(["getBots","getBotsPaginateObject","getCurrentCompany"]),filteredBots(){return this.bots?this.bots.filter(s=>s.deleted_at==null):[]}},mounted(){this.loadBots()},methods:{duplicate(s){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:s,company_id:this.getCurrentCompany.id}}).then(e=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно продублирован")})},selectBot(s){this.$emit("callback",s),this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(s){this.loadBots(s)},loadBots(s=0){this.loading=!0,this.$store.dispatch("loadSimpleBots",{dataObject:{companyId:this.companyId||null,needSelfBots:this.need_self_bots,search:this.search},page:s}).then(e=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject}).catch(()=>{this.loading=!1})}}},boe=Object.assign(foe,{__name:"BotList",setup(s){return(e,o)=>e.show?(l(),a("div",Jse,[t("div",Xse,[f(t("input",{type:"search",class:"form-control mb-2",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),"aria-describedby":"button-addon2"},null,512),[[k,e.search]]),t("button",{class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-blue2-dark",onClick:o[1]||(o[1]=(...n)=>e.loadBots&&e.loadBots(...n)),type:"button",id:"button-addon2"},"Найти ")]),t("div",Zse,[t("div",eoe,[t("h5",toe,[e.need_self_bots?(l(),a("strong",soe,"Все боты в системе")):u("",!0),e.need_self_bots?u("",!0):(l(),a("strong",ooe,"Только мои боты"))])]),t("div",ioe,[t("div",noe,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=n=>e.need_self_bots=n),class:"ios-input",id:"toggle-id-2"},null,512),[[z,e.need_self_bots]]),loe,aoe,roe])])]),e.bots.length>0?(l(),a("div",doe,[coe,(l(!0),a(v,null,O(e.filteredBots,(n,i)=>(l(),a("a",{href:"javascript:void(0)",class:C(["d-flex justify-content-between align-items-center btn btn-border px-2 py-1 btn-full mb-2 rounded-xl text-uppercase font-900 bg-theme",{" border-blue2-dark color-blue2-dark":s.selectedBotId!=n.id," border-green2-dark color-green2-dark":s.selectedBotId===n.id}])},[t("strong",{onClick:r=>e.selectBot(n),class:"font-12 w-100 text-center",style:{"word-wrap":"break-word"}},[t("i",{class:C([{"text-danger":n.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),_(p(n.bot_domain||"Не указано"),1)],8,uoe),moe],2))),256)),e.bots_paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):(l(),a("div",hoe,_oe))])):u("",!0)}});const goe={key:0},yoe=t("i",{class:"fa-solid fa-magnifying-glass mr-1"},null,-1),voe={key:0},$oe=["onClick"],koe=["onClick"],woe=t("i",{class:"fa-solid fa-boxes-packing"},null,-1),Foe=[woe],Coe=["onClick"],Poe=t("i",{class:"fa-solid fa-box-open"},null,-1),Soe=[Poe],xoe={key:1,class:"row text-center row-cols-3 mb-n4"},joe=["onClick","title"],Ooe=["alt"],Toe={key:0,class:"company-bot-count-badge rounded-circle bg-highlight text-white"},Uoe={key:0,class:"col-12 mb-2"},Ioe={class:"col-12 mb-3"},Voe={key:2,class:"alert alert-warning",role:"alert"},Moe={props:["visualMode"],data(){return{selectedCompanyId:null,show:!0,loading:!0,companies:[],search:null,filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],companies_paginate_object:null}},computed:{...G(["getCompanies","getCompaniesPaginateObject"]),filteredCompanies(){if(!this.companies)return[];if(this.selectedFilters.length===0&&this.search==null)return this.companies;if(this.selectedFilters.length===0&&this.search!=null)return this.companies.filter(e=>(e.title||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let s=[];return this.selectedFilters.forEach(e=>{switch(e.slug){case"active":this.companies.filter(o=>o.deleted_at==null).forEach(o=>{s.push(o)});break;case"archive":this.companies.filter(o=>o.deleted_at!=null).forEach(o=>{s.push(o)});break}}),this.search==null?s:s.filter(e=>(e.title||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.loadCompanies(),this.selectFilter("active")},methods:{addToArchive(s){this.$store.dispatch("removeManagerCompany",{companyId:s}).then(e=>{let o=this.companies_paginate_object.meta.current_page||0;this.loadCompanies(o),this.$notify("Указанный клиент успешно перемещен в архив")})},extractFromArchive(s){this.$store.dispatch("restoreCompany",{companyId:s}).then(e=>{let o=this.companies_paginate_object.meta.current_page||0;this.loadCompanies(o),this.$notify("Указанный клиент успешно перемещен из архива")})},selectFilter(s){let e=this.filters.find(n=>n.slug===s),o=this.selectedFilters.findIndex(n=>n.slug===s);e&&o===-1?this.selectedFilters.push(e):this.selectedFilters.splice(o,1)},removeSelectedFilter(s){let e=this.selectedFilters.findIndex(o=>o.slug===s);this.selectedFilters.splice(e,1)},selectCompany(s){this.selectedCompanyId=s?s.id:null,this.$emit("callback",s)},nextCompanies(s){this.loadCompanies(s)},loadCompanies(s=0){this.loading=!0,this.$store.dispatch("loadManagersCompanies",{dataObject:{search:this.search},page:s,size:12}).then(e=>{this.loading=!1,this.companies=this.getCompanies,this.companies_paginate_object=this.getCompaniesPaginateObject}).catch(()=>{this.loading=!1})}}},jr=Object.assign(Moe,{__name:"CompanyList",setup(s){return(e,o)=>{const n=ie("lazy");return e.show?(l(),a("div",goe,[f(t("input",{type:"search",class:"form-control w-100 mb-2",placeholder:"Поиск компании","aria-label":"Поиск компании","onUpdate:modelValue":o[0]||(o[0]=i=>e.search=i),"aria-describedby":"button-addon2"},null,512),[[k,e.search]]),t("button",{class:"w-100 btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-blue2-dark",onClick:o[1]||(o[1]=i=>e.loadCompanies(0)),type:"button",id:"button-addon2"},[yoe,_(" Найти ")]),e.companies.length>0&&!s.visualMode?(l(),a("div",voe,[(l(!0),a(v,null,O(e.filteredCompanies,(i,r)=>(l(),a("a",{href:"javascript:void(0)",class:C(["btn btn-border btn-xs btn-full mb-2 rounded-sm text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme mb-1 d-flex justify-content-between align-items-center",{"btn-outline-info":i.deleted_at==null,"btn-outline-danger border-danger":i.deleted_at!=null}])},[t("span",{class:C(["mb-0",{"text-danger":i.deleted_at!=null}]),onClick:d=>e.selectCompany(i)},p(i.title||"Не указано"),11,$oe),i.deleted_at==null?(l(),a("button",{key:0,class:"btn btn-border btn-xs btn-full rounded-xl text-uppercase font-900 border-red2-dark color-red2-dark bg-theme",type:"button",onClick:d=>e.addToArchive(i.id),title:"В архив"},Foe,8,koe)):u("",!0),i.deleted_at!=null?(l(),a("button",{key:1,class:"btn btn-border btn-xs btn-full rounded-xl text-uppercase font-900 border-green2-dark color-green2-dark bg-theme",type:"button",onClick:d=>e.extractFromArchive(i.id),title:"Из архива"},Soe,8,Coe)):u("",!0)],2))),256)),e.companies_paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextCompanies,pagination:e.companies_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),e.companies.length>0&&s.visualMode?(l(),a("div",xoe,[(l(!0),a(v,null,O(e.companies,i=>(l(),a("a",{class:"col mb-4 default-link",href:"javascript:void(0)",onClick:r=>e.selectCompany(i),title:i.title||"Без названия"},[f(t("img",{class:"img-fluid rounded-xs preload-img",alt:i.title||"Не указано"},null,8,Ooe),[[n,"/images-by-company-id/"+i.id+"/"+i.image]]),t("span",{class:C([{"company-border-select":e.selectedCompanyId==i.id},"company-image-badge"])},p(i.title||"Без названия"),3),i.bot_count>0?(l(),a("span",Toe,p(i.bot_count||0),1)):u("",!0)],8,joe))),256)),e.selectedCompanyId?(l(),a("div",Uoe,[t("a",{class:"col mb-4 default-link",href:"javascript:void(0)",onClick:o[2]||(o[2]=i=>e.selectCompany(null))}," Сброс ")])):u("",!0),t("div",Ioe,[e.companies_paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextCompanies,pagination:e.companies_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])])):(l(),a("div",Voe," Вы еще не завели ни одного клиента! "))])):u("",!0)}}});const Aoe={key:0,class:"card card-style"},Eoe={class:"content mb-0"},Doe=t("h2",null,"Создание клиента",-1),zoe=t("h6",null,"Так-с, создаем нового клиента или используем уже созданного клиента?",-1),Boe=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Loe=t("h6",null,"Выбрать клиента из списка",-1),Roe={key:1,class:"card card-style"},Noe={class:"content mb-0"},qoe=t("h2",{class:"my-5"},"Персональная информация",-1),Woe=t("p",{class:"mt-2 mb-2"},[t("span",{class:"badge bg-light text-primary p-2 mr-2"},[t("i",{class:"fa-regular fa-bell"})]),_(" Напишите подробную информацию о клиенте и его фото")],-1),Yoe={class:"form-floating mb-2 w-100"},Hoe=t("label",{for:"form-selfInfo-name",class:"text-primary"},"Ф.И.О. клиента",-1),Qoe={class:"form-floating mb-2 w-100"},Goe=t("label",{for:"form-selfInfo-phone",class:"text-primary"},"Личный номер телефона клиента для связи менеджера",-1),Koe={class:"form-floating mb-2 w-100"},Joe=t("label",{for:"form-selfInfo-text",class:"text-primary"},"Информация о клиенте:",-1),Xoe=t("h2",{class:"my-5"},"Информация о бизнесе",-1),Zoe=t("p",{class:"mt-2 mb-2"},[t("span",{class:"badge bg-light text-primary p-2 mr-2"},[t("i",{class:"fa-regular fa-bell"})]),_(" Напишите подробную информацию о бизнесе клиента и добавьте логотип компании. Он будет использоваться для общедоступной информации о клиенте.")],-1),eie={class:"form-floating mb-2 w-100"},tie=t("label",{for:"form-business-info-name",class:"text-primary"},"Название организации клиента (имя компании)",-1),sie={class:"form-floating mb-2 w-100"},oie=t("label",{for:"form-business-info-text",class:"text-primary"},"Информация о бизнесе:",-1),iie=t("h2",{class:"my-5"},"Контактная информация",-1),nie={class:"card bg-20 m-0 content rounded-m shadow mb-2 w-100"},lie={class:"card-body"},aie=t("h6",{class:"color-white"},[_("А также добавьте контактную информацию, нажав на "),t("i",{class:"fa-solid fa-square-plus"})],-1),rie={class:"card card-style ml-0 mr-0 mb-3 bg-white"},die={class:"content"},cie=["onUpdate:modelValue"],uie=["value"],mie={class:"form-floating w-100"},hie=["for"],pie=["pattern","id","onUpdate:modelValue"],_ie=["pattern","id","onUpdate:modelValue"],fie={class:"form-floating mt-1"},bie=["for"],gie=["onUpdate:modelValue","id"],yie={class:"d-flex justify-content-center mt-3"},vie=["onClick"],$ie=t("i",{class:"fa-solid fa-trash-can"},null,-1),kie=[$ie],wie=["onClick"],Fie=t("i",{class:"fa-solid fa-clone"},null,-1),Cie=[Fie],Pie=t("i",{class:"fa-solid fa-square-plus mr-1"},null,-1),Sie={key:0,class:"divider divider-small my-3 bg-white"},xie=t("i",{class:"fa-solid fa-trash mr-1"},null,-1),jie=t("div",{class:"card-overlay bg-blue2-dark opacity-95 rounded-m shadow-l"},null,-1),Oie=t("div",{class:"card-overlay dark-mode-tint rounded-m shadow-l"},null,-1),Tie={class:"mt-3 w-100"},Uie={class:"mb-2 alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},Iie={class:"custom-alert-text"},Vie=["onClick"],Mie=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Aie=t("button",{type:"submit",class:"btn btn-m btn-full mb-2 rounded-l text-uppercase font-900 shadow-s bg-blue2-dark w-100"}," Следующий шаг ",-1),Eie={key:2,class:"card card-style"},Die={class:"content mb-0"},zie=t("h2",null,"Создадим непосредственно бота",-1),Bie=t("h6",null,[t("span",{class:"badge bg-light text-primary p-2 mr-2"},[t("i",{class:"fa-regular fa-bell"})]),_("Первым делом необходимо имя бота (на русском - для пользователей, на английском - как ссылка на вашего бота)")],-1),Lie={class:"form-floating mb-2 w-100"},Rie=t("label",{for:"floatingTextarea",class:"text-primary"},"Название бота (на русском)",-1),Nie=ze('<div class="border-green1-dark pl-3 border-left border-top-0 border-bottom-0 border-right-0 mb-2"><p class="mb-1"><i class="fa-solid fa-hand-point-right mr-2 text-primary"></i> Ссылка должна быть длинной (от 7 символов) и, по возможности, уникальной. </p><p class="mb-1"><i class="fa-solid fa-hand-point-right mr-2 text-primary"></i>Ссылка должна заканчиваться словом &quot;bot&quot; </p><p class="mb-1"><i class="fa-solid fa-hand-point-right mr-2 text-primary"></i>Ссылка должна состоть только из английских символов и символов нижнего подчеркивания </p><p class="mb-1"><i class="fa-solid fa-hand-point-right mr-2 text-primary"></i>В ссылке нельзя ставить пробелы </p><strong>Рекомендации для коллег</strong></div>',1),qie={class:"d-flex w-100"},Wie={class:"pt-1"},Yie={"data-activate":"toggle-id-2",class:"font-500 font-13"},Hie={key:0},Qie={key:1},Gie={class:"ml-auto mr-4 pr-2"},Kie={class:"custom-control ios-switch ios-switch-icon"},Jie=t("label",{class:"custom-control-label",for:"toggle-id-2"},null,-1),Xie=t("i",{class:"fa fa-check font-11 color-white"},null,-1),Zie=t("i",{class:"fa fa-times font-11 color-white"},null,-1),ene={key:0,class:"form-floating mb-2 w-100"},tne=t("label",{for:"form-bot-domain",class:"text-primary"},"Доменное имя бота на английском",-1),sne={class:"border-green1-dark pl-3 border-left border-top-0 border-bottom-0 border-right-0 mb-2"},one=t("p",{class:"mb-1"},[_("Если у Вас есть "),t("a",{href:"https://t.me/botFather",class:"text-primary"},"Token"),_(", то Вы сразу же сможете протестировать своего бота на практике. Если же Token-а нет, то вам помогут его создать наши менеджеры.")],-1),ine={class:"d-flex"},nne={class:"pt-1"},lne={"data-activate":"toggle-id-2",class:"font-500 font-13"},ane={key:0},rne={key:1},dne={class:"ml-auto mr-4 pr-2"},cne={class:"custom-control ios-switch ios-switch-icon"},une=t("label",{class:"custom-control-label",for:"toggle-id-2"},null,-1),mne=t("i",{class:"fa fa-check font-11 color-white"},null,-1),hne=t("i",{class:"fa fa-times font-11 color-white"},null,-1),pne={key:1,class:"form-floating mb-2 w-100"},_ne=t("label",{for:"floatingTextarea",class:"text-primary"},"Телеграм token бота",-1),fne={class:"mb-2 alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},bne={class:"custom-alert-text"},gne=["onClick"],yne=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),vne=t("button",{type:"submit",class:"btn btn-m btn-full mb-2 rounded-l text-uppercase font-900 shadow-s bg-blue2-dark w-100"}," Следующий шаг ",-1),$ne={key:3,class:"card card-style"},kne={class:"content mb-0"},wne={class:"d-flex w-100"},Fne={class:"pt-1"},Cne={"data-activate":"toggle-need-create-bot",class:"font-500 font-13"},Pne={key:0},Sne={key:1},xne={class:"ml-auto mr-4 pr-2"},jne={class:"custom-control ios-switch ios-switch-icon"},One=t("label",{class:"custom-control-label",for:"toggle-need-create-bot"},null,-1),Tne=t("i",{class:"fa fa-check font-11 color-white"},null,-1),Une=t("i",{class:"fa fa-times font-11 color-white"},null,-1),Ine={key:0},Vne={class:"mb-2 alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},Mne={class:"custom-alert-text"},Ane=["onClick"],Ene=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Dne=t("h2",null,"Хочу себе в бота ",-1),zne={key:0},Bne=t("i",{class:"fa-solid fa-xmark mr-1 text-danger"},null,-1),Lne=[Bne],Rne={class:"row mb-2"},Nne={class:"col-6 col-md-4 col-lg-3 mb-2 position-relative"},qne={class:"relative"},Wne=["disabled","value","id"],Yne=["for"],Hne={class:"small"},Qne=["onClick"],Gne=t("i",{class:"fa-regular fa-lightbulb"},null,-1),Kne=[Gne],Jne={key:0},Xne={class:"badge bg-light text-primary mr-2"},Zne={key:1},ele=t("p",{class:"alert border-success m-0 my-2"},"Опишите ваши индивидуальные потребности и наши разработчики неприменно реализуют данную фичу для Вас!",-1),tle={class:"form-floating mt-1"},sle=t("label",{class:"text-primary",for:"individual-description-textarea"},"Описание фичи",-1),ole={class:"mb-2 alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},ile={class:"custom-alert-text"},nle=["onClick"],lle=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),ale=t("button",{type:"submit",class:"btn btn-m btn-full mb-2 rounded-l text-uppercase font-900 shadow-s bg-blue2-dark w-100"}," Следующий шаг ",-1),rle={key:4,class:"card card-style"},dle={class:"content mb-0"},cle=t("h6",null,"Добавьте нужные страницы в бота:",-1),ule={class:"form-floating mb-2 w-100"},mle=t("label",{for:"pageForm-title",class:"text-primary"},"Название страницы",-1),hle=t("button",{type:"submit",class:"btn btn-m btn-full mb-2 rounded-l text-uppercase font-900 shadow-s bg-blue2-dark w-100"}," Добавить страницу ",-1),ple=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),_le={key:0},fle={class:"d-flex align-items-center btn w-100 btn-border mb-2 rounded-sm text-left font-900 border-blue1-dark color-blue1-dark bg-theme"},ble={key:0,class:"w-100 p-2 font-12"},gle=["onUpdate:modelValue"],yle=["onClick"],vle=t("i",{class:"fa-solid fa-trash-can"},null,-1),$le=[vle],kle={class:"mb-2 alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},wle={class:"custom-alert-text"},Fle=["onClick"],Cle=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Ple=t("p",{class:"mb-2"},"Так-с, финальный этап! Сейчас мы создадим демо и сможем перейти к завершению создания бота!",-1),Sle={key:5,class:"card card-style"},xle={class:"content mb-0"},jle={class:"w-100 d-flex justify-content-center align-items-center flex-column"},Ole=t("h2",null,"Демонстрация работы бота",-1),Tle={href:"#"},Ule={class:"mb-0"},Ile={class:"mobile mb-2 p-0"},Vle=["src"],Mle={key:0,class:"alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},Ale=t("span",null,[t("i",{class:"fa-solid fa-triangle-exclamation"})],-1),Ele=t("strong",null,"Тоукен не указан!",-1),Dle=t("button",{type:"button",class:"close color-white opacity-60 font-16","data-dismiss":"alert","aria-label":"Close"},"× ",-1),zle=[Ale,Ele,Dle],Ble={key:6,class:"card card-style"},Lle={class:"content mb-0"},Rle=ze('<h2 class="text-center mt-3 mb-0">Оформление заказа</h2><h6 class="text-center mb-3">Выберите тариф для подключения</h6><div class="pricing-4 rounded-m shadow-m bg-theme"><h1 class="pricing-title text-center bg-green2-dark text-uppercase">Пробный</h1><h3 class="pricing-value text-center bg-green1-light color-white font-40">3999<sup>руб</sup></h3><h2 class="pricing-subtitle text-center bg-green1-light font-16">Разовый на 1 месяц</h2><ul class="pricing-list text-center"><li>1 бот</li><li>до 20 страниц</li><li>до 10 любых модулей</li><li>1 месяц тех. поддержки</li></ul><a href="#" class="btn btn-s bg-green2-dark btn-center-l text-uppercase rounded-s font-900">Выбрать</a><p class="text-center color-gray-dark small-text font-10 uppercase mt-2 mb-0 pb-0">+0.01% персональной скидки менеджера</p></div><div class="pricing-4 rounded-m shadow-m bg-theme"><h1 class="pricing-title text-center bg-blue2-dark text-uppercase">Базовый</h1><h3 class="pricing-value text-center bg-blue2-light color-white font-40">6999<sup>руб</sup></h3><h2 class="pricing-subtitle text-center bg-blue2-light font-16">+2500руб\\месяц</h2><ul class="pricing-list text-center"><li>до 3х ботов</li><li>до 20 страниц в боте</li><li>жо 20 модулей в боте</li><li>неограниченно тех.поддержка</li><li>интеграция с CRM</li><li>до 2х пользовательских модулей индивидуальной разработки</li></ul><a href="#" class="btn btn-s bg-blue2-dark btn-center-l text-uppercase rounded-s font-900">Выбрать</a><p class="text-center color-gray-dark small-text font-10 uppercase mt-2 mb-0 pb-0">+0.05% персональной скидки менеджера</p></div><div class="pricing-4 rounded-m shadow-m bg-theme"><h1 class="pricing-title text-center bg-red2-dark text-uppercase">V.I.P.</h1><h3 class="pricing-value text-center bg-red2-light color-white font-40">26999<sup>руб</sup></h3><h2 class="pricing-subtitle text-center bg-red2-light font-16">+6 500руб\\месяц</h2><ul class="pricing-list text-center"><li>неограниченное число ботов</li><li>неограниченно страниц</li><li>неограниченно модулей</li><li>неограниченно тех.поддержка</li><li>интеграция с CRM</li><li>пользовательская индивидуальная разработка</li></ul><a href="#" class="btn btn-s bg-red2-dark btn-center-l text-uppercase rounded-s font-900">Выбрать</a><p class="text-center color-gray-dark small-text font-10 uppercase mt-2 mb-0 pb-0">+0.5% персональной скидки менеджера</p></div>',5),Nle={props:["start"],data(){return{messages:[],load:!1,step:0,pageForm:{title:null},form:{name:null,botDomain:null,has_token:!1,has_name:!1,need_all_photo:!0,token:null,need_create_bot:!0,selected_bot_id:null,selected_company_id:null,cashback:{level_1:7,level_2:3,level_3:1},greeting:{text:null,avatar:null,profile:null,need_photo:!0},contacts:{need_photo:!0,image:null,links:[]},selfInfo:{name:null,phone:null,text:null,image:null,need_photo:!0},businessInfo:{name:null,text:null,image:null,need_photo:!0},functions:["cashback","friends-system","ask-a-question","location","wheel-of-fortune"],pages:[{title:"/start",comment:"Начни с этого момента",isStatic:!0},{title:"/help",comment:"Страница помощи",isStatic:!0},{title:"/about",comment:"Страница описания бота",isStatic:!0}],individual:null},contactTypes:[{title:"Номер телефона",mask:"+7(###)###-##-##",pattern:null,slug:"phone-number",icon:"fa-solid fa-mobile-screen"},{title:"Эл.почта",pattern:null,mask:null,slug:"email",icon:"fa-solid fa-at"},{title:"Адресс",pattern:null,mask:null,slug:"address",icon:"fa-solid fa-location-dot"},{title:"Соц.сети",pattern:null,mask:null,slug:"social-link",icon:"fa-solid fa-square-share-nodes"},{title:"Сайт",pattern:null,mask:null,slug:"web-site-link",icon:"fa-solid fa-laptop"},{title:"Месенджер",pattern:null,mask:null,slug:"messenger-link",icon:"fa-regular fa-envelope"}],moreFunctions:[{title:"КэшБек",description:"Например три уровня  7% , 3% и 1% + фото.",slug:"cashback",icon:"fa-solid fa-sack-dollar",is_active:!0},{title:"Бонус за рекомендации",description:"Приграси 5 друзе и получи подарок",slug:"referral-bonus",icon:"fa-solid fa-money-bill-trend-up",is_active:!0},{title:"AMO CRM",description:"Интеграция с AMO CRM",slug:"amo-crm",icon:"fa-solid fa-money-bill-trend-up",is_active:!0},{title:"Система друзей",description:"Реферальная система друзей",slug:"friends-system",icon:"fa-solid fa-people-pulling",is_active:!0},{title:"Регистрация на мероприятия",slug:"event-form",description:"Вы можете регистрировать людей на мероприятия через нашего чат бата или же сообщать о своих ближайших мероприятиях",icon:"fa-solid fa-calendar-check",is_active:!0},{title:"Интеграция с каналами Telegram",description:"Мы может интегрировать ваш канал в наш бот",slug:"telegram-channel-integration",icon:"fa-brands fa-telegram",is_active:!0},{title:"Лид магнит",slug:"lead-magnet",icon:"fa-solid fa-magnet",description:"Лид магнит продумывается индивидуально",is_active:!0},{title:"Воронка продаж",slug:"sales-funnel",description:"Воронка продаж продумывается индивидуально",icon:"fa-solid fa-filter-circle-dollar",is_active:!0},{title:"Отзывы",slug:"reviews",description:"Можете добавить отзывы в бот чтобы людям не приходилось искать отзовы на других площадках ",icon:"fa-solid fa-magnifying-glass-dollar",is_active:!0},{title:"Задать вопрос",slug:"ask-a-question",description:"Люди смогут задавать вопрос прямо в бот, а Вы отвечать им уже лично",icon:"fa-solid fa-clipboard-question",is_active:!0},{title:"Получить онлайн консультацию",slug:"online-consultation",description:"Запись на консультацию",icon:"fa-solid fa-circle-info",is_active:!0},{title:"Локация",slug:"location",description:"Ваш адрес, если необходим вашему бизнесу ",icon:"fa-solid fa-map-location-dot",is_active:!0},{title:"Акции",slug:"promotions",description:"Вы сможете выкладывать акции и распродажи",icon:"fa-solid fa-percent",is_active:!0},{title:"Наши клиенты",slug:"our-clients",description:"Сюда Вы сможете выложить фото ваших гостей ",icon:"fa-solid fa-carrot",is_active:!0},{title:"Инвесторам",slug:"investors",description:"Предложения для инвестрора",icon:"fa-solid fa-comment-dollar",is_active:!0},{title:"Стоимость услуг",slug:"cost-of-services",description:"Ваш прайс или меню",icon:"fa-solid fa-money-check-dollar",is_active:!0},{title:"Ваш магазин",slug:"custom-shop",description:"Ваш индивидуальный магазин внутри бота с возможностью оплаты онлайн",icon:"fa-brands fa-shopify",is_active:!0},{title:"Забронировать номер/столик",slug:"booking",description:"Человет сможет заброниравать в боте или же выйти на менеджера",icon:"fa-solid fa-utensils",is_active:!0},{title:"Атмосфера",slug:"atmosphere",description:"Фото Вашей атмосферы",icon:"fa-solid fa-trophy",is_active:!0},{title:"Курсы",slug:"courses",description:"Информация о курсах",icon:"fa-solid fa-graduation-cap",is_active:!0},{title:"Оплата в боте",slug:"payments",description:"Создавайте запросы на оплату непосредственно в боте",icon:"fa-regular fa-credit-card",is_active:!0},{title:"Колесо фортуны",slug:"wheel-of-fortune",description:"Розыгрыши призов в боте",icon:"fa-solid fa-dharmachakra",is_active:!0},{title:"Квест в Instagram",slug:"insta-quest",description:"Розыгрыши призов в боте c отсылкой на инстаграм",icon:"fa-brands fa-instagram",is_active:!0},{title:"Карточка накоплений",slug:"coffee-card",description:"Система накопления бонусов, например чашек кофе",icon:"fa-solid fa-mug-hot",is_active:!0},{title:"Индивидуальная кнопка",slug:"individual-button",description:"Можете предложить свою кнопку",icon:"fa-solid fa-person-chalkboard",is_active:!0}]}},computed:{},watch:{"form.need_create_bot":{handler:function(s){this.form.selected_bot_id=null,this.form.functions=[]},deep:!0}},mounted(){window.addEventListener("select-notes-event",s=>{s.detail.param,s.detail.note}),this.start&&(this.step=this.start)},methods:{start(){this.step=0,this.messages=[],window.scrollTo({top:50,behavior:"smooth"})},prevStep(){this.step--,this.messages=[],window.scrollTo({top:50,behavior:"smooth"})},nextStep(){this.step++,this.messages=[],window.scrollTo({top:50,behavior:"smooth"})},alert(s){this.messages.push(s)},removeMessage(s){this.messages.splice(s,1)},selectCompany(s){this.form.selected_company_id=s.id,this.$botNotification.notification("Информация","Вы успешно выбрали за основу данного клиента!"),this.step=2},selectBot(s){this.form.selected_bot_id=s.id,this.$botNotification.notification("Информация","Вы успешно выбрали за основу данного бота!")},removePage(s){this.form.pages.splice(s,1)},addPage(){const s=this.pageForm;this.form.pages.push({title:s.title,isStatic:!1}),this.pageForm.title=null},displayDescription(s){this.$botNotification.notification("Информация",s)},getContactsType(s){return this.contactTypes.find(e=>e.slug===s)||null},submitStep5(){this.form.functions.forEach(s=>{let e=this.moreFunctions.find(n=>n.slug===s);this.form.pages.find(n=>n.title===e.title)||null||this.form.pages.push({title:e.title,isStatic:!1})}),this.step++},submitBot(){let s=new FormData;Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.form.greeting.need_photo&&(s.append("greeting_image_avatar",this.form.greeting.avatar),s.append("greeting_image_profile",this.form.greeting.profile)),this.form.contacts.need_photo&&s.append("contacts_image",this.form.contacts.image),this.form.selfInfo.need_photo&&s.append("self_info_image",this.form.selfInfo.image),this.form.businessInfo.need_photo&&s.append("business_info_image",this.form.businessInfo.image),this.$store.dispatch("createBotLazy",{botForm:s}).then(e=>{this.form.botDomain=e.botDomain,this.load=!0,this.$nextTick(()=>{this.load=!1}),this.$botNotification.notification("Конструктор ботов","Бот успешно создан!"),this.step++}).catch(e=>{this.step++})},remove(s){this.form.contacts.links.splice(s,1)},duplicate(s){const e={...s};this.form.contacts.links.push(e)},addContact(){const s={slug:"phone-number",value:null,description:null};this.form.contacts.links.push(s)},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},onChangePhotos(s,e,o){const n=s.target.files;this.form[e][o]=n[0]}}},qle=Object.assign(Nle,{__name:"BaseBotConstructor",setup(s){return(e,o)=>{const n=ie("mask");return l(),a(v,null,[e.step===0?(l(),a("div",Aoe,[t("div",Eoe,[Doe,zoe,t("button",{onClick:o[0]||(o[0]=i=>e.step=1),class:"w-100 btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme"}," Создать нового клиента "),Boe,Loe,T(jr,{onCallback:e.selectCompany},null,8,["onCallback"])])])):u("",!0),e.step===1?(l(),a("div",Roe,[t("div",Noe,[t("form",{onSubmit:o[17]||(o[17]=W((...i)=>e.nextStep&&e.nextStep(...i),["prevent"])),class:"w-100 d-flex justify-content-center align-items-center flex-column"},[qoe,Woe,t("div",Yoe,[Hoe,f(t("input",{type:"text",class:"form-control",placeholder:"Иванов И.И.","onUpdate:modelValue":o[1]||(o[1]=i=>e.form.selfInfo.name=i),onInvalid:o[2]||(o[2]=i=>e.alert("Вы не добавили Ф.И.О.")),id:"form-selfInfo-name",required:""},null,544),[[k,e.form.selfInfo.name]])]),t("div",Qoe,[Goe,f(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=i=>e.form.selfInfo.phone=i),placeholder:"+7(000)000-00-00",class:"form-control",onInvalid:o[4]||(o[4]=i=>e.alert("Вы не добавили номер телефона")),id:"form-selfInfo-phone",required:""},null,544),[[k,e.form.selfInfo.phone],[n,"+7(###)###-##-##"]])]),t("div",Koe,[Joe,f(t("textarea",{style:{"min-height":"150px"},"onUpdate:modelValue":o[5]||(o[5]=i=>e.form.selfInfo.text=i),class:"form-control font-12",onInvalid:o[6]||(o[6]=i=>e.alert("Вы не добавили информацию о клиенте")),placeholder:"Немного деталей о Вас",id:"form-selfInfo-text",required:""},null,544),[[k,e.form.selfInfo.text]])]),Xoe,Zoe,t("div",eie,[tie,f(t("input",{type:"text",class:"form-control",placeholder:"ООО 'Рога и Копыта'","onUpdate:modelValue":o[7]||(o[7]=i=>e.form.businessInfo.name=i),onInvalid:o[8]||(o[8]=i=>e.alert("Вы не добавили название компании!")),id:"form-business-info-name",required:""},null,544),[[k,e.form.businessInfo.name]])]),t("div",sie,[oie,f(t("textarea",{style:{"min-height":"150px"},class:"form-control font-12","onUpdate:modelValue":o[9]||(o[9]=i=>e.form.businessInfo.text=i),placeholder:"Главное начать...",onInvalid:o[10]||(o[10]=i=>e.alert("Вы не добавили описание компании")),id:"form-business-info-text",required:""},null,544),[[k,e.form.businessInfo.text]])]),iie,t("div",nie,[t("div",lie,[aie,(l(!0),a(v,null,O(e.form.contacts.links,(i,r)=>(l(),a("div",rie,[t("div",die,[f(t("select",{"onUpdate:modelValue":d=>e.form.contacts.links[r].slug=d,class:"form-control w-100 mb-2"},[(l(!0),a(v,null,O(e.contactTypes,d=>(l(),a("option",{value:d.slug},p(d.title||"Не указан"),9,uie))),256))],8,cie),[[Ve,e.form.contacts.links[r].slug]]),t("div",mie,[t("label",{class:"text-primary",for:"contact-input-"+r},p(e.getContactsType(e.form.contacts.links[r].slug).title||"Не указано"),9,hie),e.getContactsType(e.form.contacts.links[r].slug).mask?f((l(),a("input",{key:0,type:"text",pattern:e.getContactsType(e.form.contacts.links[r].slug).pattern,class:"form-control",placeholder:"Введите данные",onInvalid:o[11]||(o[11]=d=>e.alert("Вы не ввели данные")),id:"contact-input-"+r,"onUpdate:modelValue":d=>e.form.contacts.links[r].value=d,required:""},null,40,pie)),[[n,e.getContactsType(e.form.contacts.links[r].slug).mask],[k,e.form.contacts.links[r].value]]):f((l(),a("input",{key:1,type:"text",pattern:e.getContactsType(i.slug).pattern,class:"form-control w-100",id:"contact-input-"+r,onInvalid:o[12]||(o[12]=d=>e.alert("Вы не ввели данные")),"onUpdate:modelValue":d=>e.form.contacts.links[r].value=d,required:""},null,40,_ie)),[[k,e.form.contacts.links[r].value]])]),t("div",fie,[t("label",{class:"text-primary",for:"contact-description-textarea-"+r},"Описание",8,bie),f(t("textarea",{class:"form-control font-12","onUpdate:modelValue":d=>e.form.contacts.links[r].description=d,onInvalid:o[13]||(o[13]=d=>e.alert("Вы не ввели описание контакта")),placeholder:"Поясните пользователям к чему относится данный контакт",id:"contact-description-textarea-"+r,required:""},`

                                        `,40,gie),[[k,e.form.contacts.links[r].description]])]),t("div",yie,[t("a",{href:"javascript:void(0)",class:"btn mr-2 btn-border btn-m btn-full rounded-s text-uppercase font-900 border-red2-dark color-red2-dark bg-theme",onClick:d=>e.remove(r)},kie,8,vie),t("a",{href:"javascript:void(0)",class:"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:d=>e.duplicate(i)},Cie,8,wie)])])]))),256)),t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full my-2 rounded-sm text-uppercase font-900 border-blue1-dark color-blue1-dark bg-theme",onClick:o[14]||(o[14]=(...i)=>e.addContact&&e.addContact(...i))},[Pie,_(" Добавить ")]),e.form.contacts.links.length>0?(l(),a("div",Sie)):u("",!0),e.form.contacts.links.length>0?(l(),a("button",{key:1,type:"button",class:"w-100 btn btn-m btn-full my-2 rounded-sm text-uppercase font-900 border-gray1-dark color-gray1-dark",onClick:o[15]||(o[15]=i=>e.form.contacts.links.length=[])},[xie,_(" Очистить контакты ")])):u("",!0)]),jie,Oie]),t("div",Tie,[e.messages.length>0?(l(!0),a(v,{key:0},O(e.messages,(i,r)=>(l(),a("div",Uie,[t("p",Iie,p(i||"Ошибка"),1),t("button",{type:"button",onClick:d=>e.removeMessage(r),class:"close color-white opacity-60 font-16"},"× ",8,Vie)]))),256)):u("",!0)]),Mie,Aie,t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[16]||(o[16]=(...i)=>e.prevStep&&e.prevStep(...i))}," Назад ")],32)])])):u("",!0),e.step===2?(l(),a("div",Eie,[t("div",Die,[t("form",{onSubmit:o[27]||(o[27]=W((...i)=>e.nextStep&&e.nextStep(...i),["prevent"])),class:"w-100 d-flex justify-content-center align-items-center flex-column"},[zie,Bie,t("div",Lie,[Rie,f(t("input",{type:"text",class:"form-control",minlength:"5",maxlength:"50","onUpdate:modelValue":o[18]||(o[18]=i=>e.form.name=i),placeholder:"Например, Шаурма-Бот",onInvalid:o[19]||(o[19]=i=>e.alert("Неверное название бота!")),id:"floatingTextarea",required:""},null,544),[[k,e.form.name]])]),Nie,t("div",qie,[t("div",Wie,[t("h5",Yie,[e.form.has_name?u("",!0):(l(),a("strong",Hie,"Сгенерировать временное имя")),e.form.has_name?(l(),a("strong",Qie,"У меня есть имя")):u("",!0)])]),t("div",Gie,[t("div",Kie,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[20]||(o[20]=i=>e.form.has_name=i),class:"ios-input",id:"toggle-id-2"},null,512),[[z,e.form.has_name]]),Jie,Xie,Zie])])]),e.form.has_name?(l(),a("div",ene,[tne,f(t("input",{type:"text",class:"form-control",minlength:"5",maxlength:"50",placeholder:"test_ivan_bot","onUpdate:modelValue":o[21]||(o[21]=i=>e.form.botDomain=i),onInvalid:o[22]||(o[22]=i=>e.alert("Неверное значение имени бота!")),pattern:"[_A-Za-z0-9]{5,50}(bot)",id:"form-bot-domain",required:""},null,544),[[k,e.form.botDomain]])])):u("",!0),t("div",sne,[one,t("div",ine,[t("div",nne,[t("h5",lne,[e.form.have_token?(l(),a("strong",ane,"У меня есть Token бота")):u("",!0),e.form.have_token?u("",!0):(l(),a("strong",rne,"У меня нет Token бота"))])]),t("div",dne,[t("div",cne,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[23]||(o[23]=i=>e.form.have_token=i),class:"ios-input",id:"toggle-id-2"},null,512),[[z,e.form.have_token]]),une,mne,hne])])])]),e.form.has_token?(l(),a("div",pne,[_ne,f(t("input",{type:"text",class:"form-control",minlength:"5",maxlength:"100",placeholder:"Значение тоукена",onInvalid:o[24]||(o[24]=i=>e.alert("Неверное значение тоукена")),"onUpdate:modelValue":o[25]||(o[25]=i=>e.form.token=i),id:"floatingTextarea",required:""},null,544),[[k,e.form.token]])])):u("",!0),e.messages.length>0?(l(!0),a(v,{key:2},O(e.messages,(i,r)=>(l(),a("div",fne,[t("p",bne,p(i||"Ошибка"),1),t("button",{type:"button",onClick:d=>e.removeMessage(r),class:"close color-white opacity-60 font-16"},"× ",8,gne)]))),256)):u("",!0),yne,vne,t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[26]||(o[26]=(...i)=>e.prevStep&&e.prevStep(...i))}," Назад ")],32)])])):u("",!0),e.step===3?(l(),a("div",$ne,[t("div",kne,[t("div",wne,[t("div",Fne,[t("h5",Cne,[e.form.need_create_bot?u("",!0):(l(),a("strong",Pne,"Выбрать из готовых ботов")),e.form.need_create_bot?(l(),a("strong",Sne,"Создать самостоятельно")):u("",!0)])]),t("div",xne,[t("div",jne,[f(t("input",{type:"checkbox","onUpdate:modelValue":o[28]||(o[28]=i=>e.form.need_create_bot=i),class:"ios-input",id:"toggle-need-create-bot"},null,512),[[z,e.form.need_create_bot]]),One,Tne,Une])])]),e.form.need_create_bot?u("",!0):(l(),a("form",Ine,[T(boe,{"selected-bot-id":e.form.selected_bot_id,onCallback:e.selectBot},null,8,["selected-bot-id","onCallback"]),e.messages.length>0?(l(!0),a(v,{key:0},O(e.messages,(i,r)=>(l(),a("div",Vne,[t("p",Mne,p(i||"Ошибка"),1),t("button",{type:"button",onClick:d=>e.removeMessage(r),class:"close color-white opacity-60 font-16"},"× ",8,Ane)]))),256)):u("",!0),Ene,t("button",{type:"button",onClick:o[29]||(o[29]=(...i)=>e.submitBot&&e.submitBot(...i)),class:"btn btn-m btn-full mb-2 rounded-l text-uppercase font-900 shadow-s bg-green2-dark w-100"}," Создать демон и перейти к оформлению "),t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[30]||(o[30]=(...i)=>e.prevStep&&e.prevStep(...i))}," Назад ")])),e.form.need_create_bot?(l(),a("form",{key:1,onSubmit:o[36]||(o[36]=W((...i)=>e.submitStep5&&e.submitStep5(...i),["prevent"])),class:"w-100 d-flex justify-content-center align-items-center flex-column"},[Dne,t("p",null,[e.form.functions.length>0?(l(),a("span",zne,"механик выбрано - "+p(e.form.functions.length)+" ед. ",1)):u("",!0),e.form.functions.length>0?(l(),a("a",{key:1,href:"javascript:void(0)",class:"underline cursor-pointer ml-2",onClick:o[31]||(o[31]=i=>e.form.functions=[])},Lne)):u("",!0)]),t("div",Rne,[(l(!0),a(v,null,O(e.moreFunctions,i=>(l(),a("div",Nne,[t("div",qne,[f(t("input",{type:"checkbox",disabled:!i.is_active,"onUpdate:modelValue":o[32]||(o[32]=r=>e.form.functions=r),value:i.slug,class:"btn-check function-check d-none",id:"btn-check-outlined"+i.slug},null,8,Wne),[[z,e.form.functions]]),t("label",{style:{"min-height":"100px"},class:C([{"border-green1-dark color-green1-dark":e.form.functions.indexOf(i.slug)!==-1,"border-gray1-dark color-gray1-dark":e.form.functions.indexOf(i.slug)===-1},"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 d-flex flex-column align-items-center justify-content-center bg-theme"]),for:"btn-check-outlined"+i.slug},[t("i",{class:C(i.icon)},null,2),t("span",Hne,p(i.title),1)],10,Yne),t("a",{href:"javascript:void(0)",style:{position:"absolute",top:"2px",left:"23px",color:"#E91E63"},onClick:r=>e.displayDescription(i.description)},Kne,8,Qne)])]))),256))]),e.form.functions.length>0?(l(),a("div",Jne,[(l(!0),a(v,null,O(e.form.functions,i=>(l(),a("span",Xne,p(i),1))),256))])):u("",!0),e.form.functions.indexOf("individual-button")>=0?(l(),a("div",Zne,[ele,t("div",tle,[sle,f(t("textarea",{class:"form-control font-12","onUpdate:modelValue":o[33]||(o[33]=i=>e.form.individual=i),style:{"min-height":"200px"},onInvalid:o[34]||(o[34]=i=>e.alert("Вы не ввели описание фичи!")),placeholder:"Напишите задуманное...",id:"individual-description-textarea",required:""},`
                        `,544),[[k,e.form.individual]])])])):u("",!0),e.messages.length>0?(l(!0),a(v,{key:2},O(e.messages,(i,r)=>(l(),a("div",ole,[t("p",ile,p(i||"Ошибка"),1),t("button",{type:"button",onClick:d=>e.removeMessage(r),class:"close color-white opacity-60 font-16"},"× ",8,nle)]))),256)):u("",!0),lle,ale,t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[35]||(o[35]=(...i)=>e.prevStep&&e.prevStep(...i))}," Назад ")],32)):u("",!0)])])):u("",!0),e.step===4?(l(),a("div",rle,[t("div",dle,[cle,t("form",{onSubmit:o[38]||(o[38]=W((...i)=>e.addPage&&e.addPage(...i),["prevent"]))},[t("div",ule,[mle,f(t("input",{type:"text",class:"form-control",minlength:"5",maxlength:"50","onUpdate:modelValue":o[37]||(o[37]=i=>e.pageForm.title=i),placeholder:"Например, Главное меню",id:"pageForm-title",required:""},null,512),[[k,e.pageForm.title]])]),hle],32),ple,t("h6",null,[_("Созданные страницы "),e.form.pages.length>0?(l(),a("small",_le,"(всего "+p(e.form.pages.length)+" стр.)",1)):u("",!0)]),(l(!0),a(v,null,O(e.form.pages,(i,r)=>(l(),a("div",fle,[e.form.pages[r].isStatic?(l(),a("p",ble,p(e.form.pages[r].title),1)):f((l(),a("input",{key:1,class:"w-100 p-2",style:{border:"none"},"onUpdate:modelValue":d=>e.form.pages[r].title=d,type:"text"},null,8,gle)),[[k,e.form.pages[r].title]]),e.form.pages[r].isStatic?u("",!0):(l(),a("a",{key:2,href:"javascript:void(0)",onClick:d=>e.removePage(r),class:"btn btn-m btn-full rounded-s text-uppercase font-900 shadow-s bg-red1-light"},$le,8,yle))]))),256)),e.messages.length>0?(l(!0),a(v,{key:0},O(e.messages,(i,r)=>(l(),a("div",kle,[t("p",wle,p(i||"Ошибка"),1),t("button",{type:"button",onClick:d=>e.removeMessage(r),class:"close color-white opacity-60 font-16"},"× ",8,Fle)]))),256)):u("",!0),Cle,Ple,t("button",{type:"button",onClick:o[39]||(o[39]=(...i)=>e.submitBot&&e.submitBot(...i)),class:"btn btn-m btn-full mb-2 rounded-l text-uppercase font-900 shadow-s bg-green2-dark w-100"}," Создать демо "),t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[40]||(o[40]=(...i)=>e.prevStep&&e.prevStep(...i))}," Назад ")])])):u("",!0),e.step===5?(l(),a("div",Sle,[t("div",xle,[t("div",jle,[Ole,t("h6",null,[t("a",Tle,p(e.form.botDomain),1)]),t("p",Ule,[t("small",null,p(e.form.name||"Не указано имя"),1)]),t("div",Ile,[e.load?u("",!0):(l(),a("iframe",{key:0,style:{border:"none"},src:"/web/"+e.form.botDomain},null,8,Vle))]),e.form.token?u("",!0):(l(),a("div",Mle,zle))])])])):u("",!0),e.step===5?(l(),a("div",Ble,[t("div",Lle,[Rle,t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[41]||(o[41]=(...i)=>e.prevStep&&e.prevStep(...i))}," Назад "),t("button",{type:"button",class:"w-100 btn btn-border btn-m btn-full mb-3 rounded-l text-uppercase font-900 border-blue2-dark color-blue2-dark bg-theme",onClick:o[42]||(o[42]=(...i)=>e.start&&e.start(...i))}," В начало ")])])):u("",!0)],64)}}}),Wle={data(){return{botUser:null,loading:!1}},computed:{...G(["getSelf"]),currentBot(){return window.currentBot}},watch:{getSelf:function(){this.botUser=this.getSelf}},mounted(){this.getSelf&&(this.botUser=this.getSelf)},methods:{}},Or=Object.assign(Wle,{__name:"Main",setup(s){return(e,o)=>(l(),M(qle))}}),Yle=Object.freeze(Object.defineProperty({__proto__:null,default:Or},Symbol.toStringTag,{value:"Module"}));const Ye=s=>(Ge("data-v-e9a66012"),s=s(),Ke(),s),Hle={key:0},Qle={class:"card card-style p-3"},Gle={class:"content"},Kle={class:"col-12 d-flex justify-content-center mb-3"},Jle={class:"img-avatar"},Xle={class:"img-avatar"},Zle={class:"col-12"},eae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,[_("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),_(" Я хочу поздравить Вас и дать возможность получать неограниченные заработка вместе с нашим сервисом! Для начала нам нужно с Вами познакомиться - это поможет нам понимать с кем мы становимся крепкими друзьями! Я задам Вам два блока вопросов - по легче - вопросы общего плана и по сложнее - вопросы профессиональной сферы.")])],-1)),tae=Ye(()=>t("h6",{class:"text-center"},"Как мне к Вам обращаться?",-1)),sae={class:"input-style input-style-2"},oae={class:"col-12"},iae=Ye(()=>t("p",{class:"mb-3"},"Загрузи свой персональное фото, мы же должны знать в лицо наших сотрудников",-1)),nae={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},lae={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},aae=Ye(()=>t("span",null,"+",-1)),rae={key:0,class:"mb-2 img-preview",style:{"margin-right":"10px"}},dae={class:"remove"},cae=Ye(()=>t("i",{class:"fa-regular fa-trash-can"},null,-1)),uae=[cae],mae={class:"col-12"},hae=Ye(()=>t("h4",{class:"text-center my-3"},[t("i",{class:"fa-solid fa-person-circle-question mr-2 color-green2-light"}),_(" Общий блок вопросов ")],-1)),pae={key:0,class:"mb-3"},_ae=Ye(()=>t("h6",{class:"text-center"},"Введите свой номер телефона",-1)),fae={class:"input-style input-style-2"},bae={class:"col-12"},gae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Для своевременного оповещения Вас о наших нововведениях мы используем рассылку через email. Вам необходимо указать его для удобства получения актуальной информации и отчетов о Вашей работе и доходе.")],-1)),yae=Ye(()=>t("h6",{class:"text-center"},"Введите свой email адрес",-1)),vae={class:"input-style input-style-2"},$ae={class:"col-12"},kae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Для связи с Вами нам также понадобятся ссылки на Ваши социальные сети!")],-1)),wae=Ye(()=>t("h6",{class:"text-center"},"Ссылки на ваши соц. сети",-1)),Fae={class:"input-style input-style-2 position-relative"},Cae=["onUpdate:modelValue","aria-label","aria-describedby"],Pae=["onClick"],Sae=Ye(()=>t("i",{class:"fa-regular fa-square-minus"},null,-1)),xae=[Sae],jae={class:"col-12"},Oae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),Tae=Ye(()=>t("h6",{class:"text-center"},"Вы мужчина или женщина?",-1)),Uae={class:"row mb-0"},Iae={class:"col-6 p-3"},Vae=Ye(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),Mae=Ye(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),Aae=[Vae,Mae],Eae={class:"col-6 p-3"},Dae=Ye(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),zae=Ye(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),Bae=[Dae,zae],Lae={class:"col-12"},Rae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Для того, чтобы я мог поздравлять Вас с днем рождения и сделать Вам приятно, мне нужно знать, когда он у Вас")],-1)),Nae=Ye(()=>t("h6",{class:"text-center"},"Введите свой день рождения",-1)),qae={class:"input-style input-style-2"},Wae={class:"col-12"},Yae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания\\работы.")],-1)),Hae=Ye(()=>t("h6",{class:"text-center"},"Какой у Вас город?",-1)),Qae={class:"input-style input-style-2"},Gae=ze('<datalist id="datalistCityOptions" data-v-e9a66012><option value="Краснодар" data-v-e9a66012></option><option value="Ростов-на-Дону" data-v-e9a66012></option><option value="Таганрог" data-v-e9a66012></option><option value="Донецк" data-v-e9a66012></option><option value="Москва" data-v-e9a66012></option></datalist>',1),Kae=Ye(()=>t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1)),Jae={class:"col-12"},Xae=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Для того чтоб вы и ваш друг получали больше бонусов воспользуйтесь реферальной программой и введите реферальный код от вашего друга!")],-1)),Zae=Ye(()=>t("h6",{class:"text-center"},"Введите реферальный код вашего друга",-1)),ere={class:"input-style input-style-2"},tre=Ye(()=>t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1)),sre={class:"col-12"},ore=Ye(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),ire=Ye(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),_(".")],-1)),nre={class:"d-flex mb-3"},lre={class:"pt-1"},are={"data-activate":"toggle-id-1",class:"font-500 font-13"},rre={key:0},dre={key:1},cre={class:"ml-auto mr-4 pr-2"},ure={class:"custom-control ios-switch"},mre=Ye(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),hre=["disabled"],pre={data(){return{load:!1,confirm:!1,step:0,botUser:null,managerForm:{name:null,phone:null,email:null,image:null,birthday:null,city:null,country:null,address:null,sex:!0,referral:null,strengths:[""],weaknesses:[""],educations:[""],social_links:[""],skills:[{title:null,value:50}],info:null}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.managerForm.name=this.botUser.name||this.botUser.fio_from_telegram||null,this.managerForm.phone=this.botUser.phone||null,this.managerForm.email=this.botUser.email||null,this.managerForm.birthday=this.botUser.birthday||null,this.managerForm.city=this.botUser.city||null,this.managerForm.country=this.botUser.country||null,this.managerForm.address=this.botUser.address||null,this.managerForm.sex=this.botUser.sex||!0}},mounted(){},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.managerForm.image=null},onChangePhotos(s){const e=s.target.files;this.managerForm.image=e[0],console.log(e)},nextStep(){this.step++},remove(s,e){this.managerForm[s].splice(e,1)},add(s){s!=="skills"?this.managerForm[s].push(""):this.managerForm[s].push({title:null,value:50})},submit(){this.loading=!0;let s=new FormData;Object.keys(this.managerForm).forEach(e=>{const o=this.managerForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.set("image",this.managerForm.image),this.$store.dispatch("saveManager",s).then(e=>{window.location.reload()}).catch(()=>{this.loading=!1})}}},_re=Object.assign(pre,{__name:"Manager",setup(s){return(e,o)=>{const n=ie("lazy"),i=ie("mask");return l(),a(v,null,[e.botUser?(l(),a("div",Hle,[t("div",Qle,[t("div",Gle,[t("form",{onSubmit:o[12]||(o[12]=W((...r)=>e.submit&&e.submit(...r),["prevent"])),class:"row mb-0"},[t("div",Kle,[t("div",Jle,[f(t("img",Xle,null,512),[[n,"/images/manager.png"]])])]),t("div",Zle,[eae,tae,t("div",sae,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Петров Петр Семенович","aria-label":"managerForm-name","onUpdate:modelValue":o[0]||(o[0]=r=>e.managerForm.name=r),"aria-describedby":"managerForm-name",required:""},null,512),[[k,e.managerForm.name]])])]),t("div",oae,[iae,t("div",nae,[t("label",lae,[aae,t("input",{type:"file",id:"bot-photos",accept:"image/*",onChange:o[1]||(o[1]=(...r)=>e.onChangePhotos&&e.onChangePhotos(...r)),style:{display:"none"}},null,32)]),e.managerForm.image?(l(),a("div",rae,[f(t("img",null,null,512),[[n,e.getPhoto(e.managerForm.image).imageUrl]]),t("div",dae,[t("a",{onClick:o[2]||(o[2]=r=>e.removePhoto())},uae)])])):u("",!0)])]),t("div",mae,[hae,e.managerForm.name?(l(),a("p",pae,[t("em",null,[_("- Отлично, "),t("strong",null,p(e.managerForm.name),1),_("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])])):u("",!0),_ae,t("div",fae,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[3]||(o[3]=r=>e.managerForm.phone=r),placeholder:"+7(000)000-00-00","aria-label":"managerForm-phone","aria-describedby":"managerForm-phone",required:""},null,512),[[i,"+7(###)###-##-##"],[k,e.managerForm.phone]])])]),t("div",bae,[gae,yae,t("div",vae,[f(t("input",{type:"email",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[4]||(o[4]=r=>e.managerForm.email=r),placeholder:"inbox@your-cashman.com","aria-label":"managerForm-phone","aria-describedby":"managerForm-email",required:""},null,512),[[k,e.managerForm.email]])])]),t("div",$ae,[kae,wae,(l(!0),a(v,null,O(e.managerForm.social_links,(r,d)=>(l(),a("div",Fae,[f(t("input",{type:"url",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":c=>e.managerForm.social_links[d]=c,placeholder:"Ссылка на соц. сеть","aria-label":"managerForm-social-links-"+d,"aria-describedby":"managerForm-social-links-"+d},null,8,Cae),[[k,e.managerForm.social_links[d]]]),d>0?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:c=>e.remove("social_links",d),class:"sub-btn"},xae,8,Pae)):u("",!0)]))),256)),t("a",{onClick:o[5]||(o[5]=r=>e.add("social_links")),class:"d-block w-100 py-3 text-center",href:"javascript:void(0)"},"Добавить еще ссылку")]),t("div",jae,[Oae,Tae,t("div",Uae,[t("div",Iae,[t("div",{class:C([{"bg-highlight":e.managerForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[6]||(o[6]=r=>e.managerForm.sex=!0)},Aae,2)]),t("div",Eae,[t("div",{class:C([{"bg-highlight ":!e.managerForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:o[7]||(o[7]=r=>e.managerForm.sex=!1)},Bae,2)])])]),t("div",Lae,[Rae,Nae,t("div",qae,[f(t("input",{type:"date",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[8]||(o[8]=r=>e.managerForm.birthday=r),"aria-label":"managerForm-birthday","aria-describedby":"managerForm-birthday",required:""},null,512),[[k,e.managerForm.birthday]])])]),t("div",Wae,[Yae,Hae,t("div",Qae,[f(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=r=>e.managerForm.city=r),list:"datalistCityOptions",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Краснодар","aria-label":"managerForm-city","aria-describedby":"managerForm-city",required:""},null,512),[[k,e.managerForm.city]]),Gae])]),Kae,t("div",Jae,[Xae,Zae,t("div",ere,[f(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":o[10]||(o[10]=r=>e.managerForm.referral=r),placeholder:"Реферальный код","aria-label":"managerForm-referral","aria-describedby":"managerForm-referral"},null,512),[[k,e.managerForm.referral]])])]),tre,t("div",sre,[ore,ire,t("div",nre,[t("div",lre,[t("h5",are,[e.managerForm.sex?u("",!0):(l(),a("span",rre,"С правилами ознакомилась")),e.managerForm.sex?(l(),a("span",dre,"С правилами ознакомлен")):u("",!0)])]),t("div",cre,[t("div",ure,[f(t("input",{"onUpdate:modelValue":o[11]||(o[11]=r=>e.confirm=r),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[z,e.confirm]]),mre])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Отправить анкету ",8,hre)])],32)])])])):u("",!0),T(Gi)],64)}}}),Tr=oe(_re,[["__scopeId","data-v-e9a66012"]]),fre=Object.freeze(Object.defineProperty({__proto__:null,default:Tr},Symbol.toStringTag,{value:"Module"}));const bre={props:["botId"],data(){return{bot:null,load:!1,need_payments:!1,need_shop:!1,need_demo:!1,botForm:{id:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,main_channel:null,vk_shop_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[],amo:null,is_active:!1}}},watch:{need_payments:function(s,e){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},mounted(){this.loadBotAdminConfig(),window.addEventListener("select-telegram-channel-id",s=>{this.botForm[s.detail.param]=s.detail.channel})},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotManagerConfig",{botId:this.botId}).then(s=>{this.bot=s.data,this.botForm={id:this.bot.id||null,is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,image:this.bot.image||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1||10,level_2:this.bot.level_2||0,level_3:this.bot.level_3||0,photos:this.bot.photos||[],amo:this.bot.amo||null,is_active:this.bot.is_active||!1},this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.vk_shop_link&&(this.need_shop=!0)})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},onChangePhotos(s){const e=s.target.files;this.botForm.image=null;for(let o=0;o<e.length;o++)this.botForm.photos.push(e[o])},addItem(s){this.botForm[s].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(s,e){this.botForm[s].splice(e,1)},removePhoto(s){s?this.botForm.photos.splice(s,1):this.botForm.image=null},switchStatus(){this.$store.dispatch("switchBotStatusManager",{botId:this.bot.id}).then(()=>{this.$botNotification.success("Конструктор ботов","Статус бота успешно изменен!")})},removeBot(){this.$store.dispatch("removeBotByManager",{botId:this.bot.id}).then(s=>{this.$emit("remove"),this.$botNotification.success("Конструктор ботов","Бот успешно удален!")}).catch(s=>{this.$botNotification.warning("Конструктор ботов","Ошибка удаления бота!")})},addBot(){let s=new FormData;Object.keys(this.botForm).forEach(e=>{const o=this.botForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.company&&s.append("company_id",this.company.id);for(let e=0;e<this.botForm.photos.length;e++)s.append("images[]",this.botForm.photos[e]);s.delete("photos"),this.$store.dispatch("updateBotByManager",{botForm:s}).then(e=>{this.$emit("callback",e.data),this.$botNotification.success("Конструктор ботов","Бот успешно обновлен!")}).catch(e=>{this.$botNotification.warning("Конструктор ботов","Ошибка обновления бота!")})},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},openUrl(s){this.tg.openLink(s)}}},gre={class:"card card-style bg-1",style:{height:"390px"}},yre={key:0,class:"card-center"},vre={class:"w-100 d-flex justify-content-center p-3"},$re={class:"object-cover",style:{width:"100px","border-radius":"50%"},alt:""},kre={class:"color-white font-700 text-center mb-2"},wre={key:0},Fre={key:1},Cre={class:"color-white text-center opacity-60 mt-n1 my-1"},Pre={href:"#",class:"color-white"},Sre=t("i",{class:"fa-solid fa-sack-dollar"},null,-1),xre={class:"color-white text-center opacity-60 mt-n1 my-1"},jre=t("i",{class:"fa-solid fa-hand-holding-dollar"},null,-1),Ore={class:"color-white text-center opacity-60 mt-n1 my-1"},Tre=t("i",{class:"fa-regular fa-calendar-days"},null,-1),Ure={class:"w-100 d-flex justify-content-center py-4"},Ire={class:"custom-control ios-switch"},Vre=t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1),Mre={key:0,class:"ml-5 text-white"},Are={key:1,class:"ml-5 text-white"},Ere={key:1,class:"card-center"},Dre=t("p",null,"Загружаем данные бота",-1),zre=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),Bre=[Dre,zre],Lre=t("div",{class:"card-overlay bg-black opacity-70"},null,-1),Rre={key:0,class:"w-100 d-flex justify-content-center align-items-center flex-column"},Nre=t("h2",null,"Демонстрация работы бота",-1),qre={href:"#"},Wre={class:"mb-0"},Yre={class:"mobile mb-2 p-0"},Hre=["src"],Qre={key:0,class:"alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},Gre=t("span",null,[t("i",{class:"fa-solid fa-triangle-exclamation"})],-1),Kre=t("strong",null,"Тоукен не указан!",-1),Jre=t("button",{type:"button",class:"close color-white opacity-60 font-16","data-dismiss":"alert","aria-label":"Close"},"× ",-1),Xre=[Gre,Kre,Jre],Zre={key:0},ede={key:0,class:"d-flex w-100"},tde={class:"pt-1"},sde={"data-activate":"toggle-id-2",class:"font-500 font-13"},ode={key:0},ide={key:1},nde={class:"ml-auto mr-4 pr-2"},lde={class:"custom-control ios-switch ios-switch-icon"},ade=t("label",{class:"custom-control-label",for:"toggle-demo-bot"},null,-1),rde=t("i",{class:"fa fa-check font-11 color-white"},null,-1),dde=t("i",{class:"fa fa-times font-11 color-white"},null,-1),cde={class:"mb-2"},ude={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-domain"},mde=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),hde=t("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),pde=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),_de=t("div",null,"Нужно ",-1),fde={key:0},bde={class:"mb-2"},gde={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center flex-wrap",id:"bot-token"},yde=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),vde=t("div",null,"Взять из BotFater при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),$de=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),kde=t("div",null,"Нужно ",-1),wde={class:"mb-2"},Fde=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-token-dev"},"Токен бота (для тестирования)",-1),Cde={class:"mb-2"},Pde={class:"d-flex justify-content-between align-items-center flex-wrap"},Sde={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center w-100",id:"bot-order-channel"},xde=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),jde=t("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),Ode=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),Tde=[Ode],Ude=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Ide=t("div",null,"Нужно ",-1),Vde={class:"mb-2"},Mde={class:"d-flex justify-content-between"},Ade={class:"form-label d-flex justify-content-between mt-2",id:"bot-main-channel"},Ede=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),Dde=[Ede],zde={key:1,class:"mb-0"},Bde={class:"mb-2"},Lde={class:"d-flex justify-content-between flex-wrap"},Rde={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-description"},Nde=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qde=t("div",null,"Отобразится пользователю при первом запуске",-1),Wde=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Yde=t("div",null,"Нужно ",-1),Hde={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Qde={class:"mb-2"},Gde={class:"d-flex justify-content-between flex-wrap"},Kde={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-description"},Jde=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Xde=t("div",null,'Для меню "О Боте"',-1),Zde=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),ece=t("div",null,"Нужно ",-1),tce={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},sce={class:"mb-2"},oce={class:"d-flex justify-content-between flex-wrap"},ice={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-maintenance-message"},nce=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),lce=t("div",null,'Для меню "О Боте"',-1),ace=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),rce=t("div",null,"Нужно ",-1),dce={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},cce={class:"mb-2"},uce={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-level-1"},mce=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),hce=t("div",null,"Нужно ",-1),pce={class:"mb-2"},_ce=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),fce={class:"mb-2"},bce=t("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),gce={class:"mb-2"},yce={class:"form-check"},vce=t("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),$ce={key:0,class:"mb-2"},kce={class:"form-check"},wce=["value"],Fce=t("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),Cce={class:"mb-2"},Pce={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},Sce=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xce=t("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),jce=t("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить",-1),Oce={class:"mb-2"},Tce={class:"form-check"},Uce=t("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),Ice={key:1,class:"mb-2"},Vce={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},Mce=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Ace=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Ece=t("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),Dce=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),zce={class:"mb-2"},Bce={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},Lce=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Rce=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Nce=t("a",{target:"_blank",href:"https://telegra.ph"},"Создать",-1),qce=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Wce=t("h6",null,"Ссылки на соц. сети",-1),Yce={class:"d-flex justify-content-between align-items-center w-100"},Hce=t("small",null,"Ссылка",-1),Qce=["onClick"],Gce=t("i",{class:"fa-regular fa-trash-can"},null,-1),Kce=[Gce],Jce=["onUpdate:modelValue","aria-describedby"],Xce=["onUpdate:modelValue"],Zce=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),eue={class:"d-flex justify-content-between align-items-center"},tue=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),sue=t("div",null,"Нужно ",-1),oue={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},iue={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},nue=t("span",null,"+",-1),lue={class:"mb-2 img-preview",style:{"margin-right":"10px"}},aue={class:"remove"},rue=["onClick"],due=t("i",{class:"fa-regular fa-trash-can"},null,-1),cue=[due],uue={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},mue={class:"remove"},hue=t("i",{class:"fa-regular fa-trash-can"},null,-1),pue=[hue],_ue=["disabled"],fue={key:1,class:"content"},bue=t("p",null,"Загружаем данные бота",-1),gue=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),yue=[bue,gue];function vue(s,e,o,n,i,r){const d=Qe("Popper"),c=ie("lazy");return l(),a(v,null,[t("div",gre,[i.bot?(l(),a("div",yre,[t("div",vre,[f(t("img",$re,null,512),[[c,"/images-by-company-id/"+i.bot.company_id+"/"+i.bot.image]])]),t("h2",kre,[i.bot.bot_domain?(l(),a("span",wre,p(i.bot.bot_domain.length>20?i.bot.bot_domain.substring(0,20)+"...":i.bot.bot_domain),1)):(l(),a("span",Fre,"Нет домена"))]),t("p",Cre,[t("a",Pre,[Sre,_(" Баланс "+p(i.bot.balance||"0")+" ₽",1)])]),t("p",xre,[jre,_(" Тариф "+p(i.bot.tax_per_day||"0")+" ₽/день ",1)]),t("p",Ore,[Tre,_(" Дней "+p(Math.round(i.bot.balance/i.bot.tax_per_day))+" осталось ",1)]),t("div",Ure,[t("div",Ire,[f(t("input",{type:"checkbox",onChange:e[0]||(e[0]=(...h)=>r.switchStatus&&r.switchStatus(...h)),"onUpdate:modelValue":e[1]||(e[1]=h=>i.botForm.is_active=h),class:"ios-input",id:"toggle-id-1"},null,544),[[z,i.botForm.is_active]]),Vre]),i.botForm.is_active?(l(),a("span",Mre,"Вкл")):(l(),a("span",Are,"Выкл"))]),t("a",{href:"javascript:void(0)",onClick:e[2]||(e[2]=(...h)=>r.removeBot&&r.removeBot(...h)),class:"btn btn-m btn-full mb-3 rounded-xl text-uppercase font-900 shadow-s color-red2-light"},"Удалить бота")])):(l(),a("div",Ere,Bre)),Lre]),i.need_demo?(l(),a("div",Rre,[Nre,t("h6",null,[t("a",qre,p(i.botForm.bot_domain),1)]),t("p",Wre,[t("small",null,p(i.botForm.name||"Не указано имя"),1)]),t("div",Yre,[t("iframe",{style:{border:"none"},src:"/web/"+i.botForm.bot_domain},null,8,Hre)]),i.botForm.token?u("",!0):(l(),a("div",Qre,Xre))])):u("",!0),t("form",{onSubmit:e[28]||(e[28]=W((...h)=>r.addBot&&r.addBot(...h),["prevent"]))},[i.bot?(l(),a("div",Zre,[i.botForm.bot_domain?(l(),a("div",ede,[t("div",tde,[t("h5",sde,[i.need_demo?(l(),a("strong",ode,"Отобразить демо бота")):u("",!0),i.need_demo?u("",!0):(l(),a("strong",ide,"Не отображать демо бота"))])]),t("div",nde,[t("div",lde,[f(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=h=>i.need_demo=h),class:"ios-input",id:"toggle-demo-bot"},null,512),[[z,i.need_demo]]),ade,rde,dde])])])):u("",!0),t("div",cde,[t("label",ude,[t("div",null,[T(d,null,{content:A(()=>[hde]),default:A(()=>[mde]),_:1}),_(" Доменное имя бота из BotFather ")]),T(d,null,{content:A(()=>[_de]),default:A(()=>[pde]),_:1})]),f(t("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота","onUpdate:modelValue":e[4]||(e[4]=h=>i.botForm.bot_domain=h),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,i.botForm.bot_domain]]),i.botForm.bot_domain?(l(),a("p",fde,[_("Проверить работу бота "),t("a",{href:"javascript:void(0)",onClick:e[5]||(e[5]=h=>r.openUrl("https://t.me/"+i.botForm.bot_domain))},"@"+p(i.botForm.bot_domain),1)])):u("",!0)]),t("div",bde,[t("label",gde,[t("div",null,[T(d,null,{content:A(()=>[vde]),default:A(()=>[yde]),_:1}),_(" Токен бота ")]),T(d,null,{content:A(()=>[kde]),default:A(()=>[$de]),_:1}),t("a",{href:"javascript:void(0)",onClick:e[6]||(e[6]=h=>r.openUrl("https://t.me/botfather")),class:"w-100",target:"_blank"},"Создать нового бота в ТГ")]),f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[7]||(e[7]=h=>i.botForm.bot_token=h),maxlength:"255","aria-describedby":"bot-token",required:""},null,512),[[k,i.botForm.bot_token]])]),t("div",wde,[Fde,f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[8]||(e[8]=h=>i.botForm.bot_token_dev=h),maxlength:"255","aria-describedby":"bot-token-dev"},null,512),[[k,i.botForm.bot_token_dev]])]),t("div",Cde,[t("div",Pde,[t("label",Sde,[t("div",null,[T(d,null,{content:A(()=>[jde]),default:A(()=>[xde]),_:1}),_(" Канал для заказов (id) "),t("span",{onClick:e[9]||(e[9]=h=>r.requestChannelId("order_channel"))},Tde)]),T(d,null,{content:A(()=>[Ide]),default:A(()=>[Ude]),_:1})])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":e[10]||(e[10]=h=>i.botForm.order_channel=h),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[k,i.botForm.order_channel]])]),t("div",Vde,[t("div",Mde,[t("label",Ade,[_("Канал для постов (id,рекламный) "),t("span",{onClick:e[11]||(e[11]=h=>r.requestChannelId("main_channel"))},Dde)])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":e[12]||(e[12]=h=>i.botForm.main_channel=h),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[k,i.botForm.main_channel]])]),i.botForm.bot_token?(l(),a("div",zde,[t("div",Bde,[t("div",Lde,[t("label",Rde,[t("div",null,[T(d,null,{content:A(()=>[qde]),default:A(()=>[Nde]),_:1}),_(" Приветственное сообщение ")]),T(d,null,{content:A(()=>[Yde]),default:A(()=>[Wde]),_:1})]),i.botForm.welcome_message?(l(),a("small",Hde," Длина текста "+p(i.botForm.welcome_message.length),1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":e[13]||(e[13]=h=>i.botForm.welcome_message=h),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[k,i.botForm.welcome_message]])]),t("div",Qde,[t("div",Gde,[t("label",Kde,[t("div",null,[T(d,null,{content:A(()=>[Xde]),default:A(()=>[Jde]),_:1}),_(" Описание бота ")]),T(d,null,{content:A(()=>[ece]),default:A(()=>[Zde]),_:1})]),i.botForm.description?(l(),a("small",tce," Длина текста "+p(i.botForm.description.length)+" / 255",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":e[14]||(e[14]=h=>i.botForm.description=h),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[k,i.botForm.description]])]),t("div",sce,[t("div",oce,[t("label",ice,[t("div",null,[T(d,null,{content:A(()=>[lce]),default:A(()=>[nce]),_:1}),_(" Режим тех. работ ")]),T(d,null,{content:A(()=>[rce]),default:A(()=>[ace]),_:1})]),i.botForm.maintenance_message?(l(),a("small",dce," Длина текста "+p(i.botForm.maintenance_message.length)+" / 255 ",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":e[15]||(e[15]=h=>i.botForm.maintenance_message=h),maxlength:"255",style:{"min-height":"200px"},"aria-describedby":"bot-maintenance-message",required:""},`
                    `,512),[[k,i.botForm.maintenance_message]])]),t("div",cce,[t("label",uce,[_(" Уровень 1 CashBack, % "),T(d,null,{content:A(()=>[hce]),default:A(()=>[mce]),_:1})]),f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[16]||(e[16]=h=>i.botForm.level_1=h),max:"50",min:"0","aria-describedby":"bot-level-1",required:""},null,512),[[k,i.botForm.level_1]])]),t("div",pce,[_ce,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[17]||(e[17]=h=>i.botForm.level_2=h),max:"50",min:"0","aria-describedby":"bot-level-2"},null,512),[[k,i.botForm.level_2]])]),t("div",fce,[bce,f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[18]||(e[18]=h=>i.botForm.level_3=h),max:"50",min:"0","aria-describedby":"bot-level-3"},null,512),[[k,i.botForm.level_3]])]),t("div",gce,[t("div",yce,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[19]||(e[19]=h=>i.need_payments=h),type:"checkbox",id:"need-payments"},null,512),[[z,i.need_payments]]),vce])]),i.need_payments?(l(),a("div",$ce,[t("div",kce,[f(t("input",{class:"form-check-input",type:"checkbox",value:i.botForm.auto_cashback_on_payments,"onUpdate:modelValue":e[20]||(e[20]=h=>i.botForm.auto_cashback_on_payments=h),id:"bot-auto-cashback-on-payments"},null,8,wce),[[z,i.botForm.auto_cashback_on_payments]]),Fce]),t("div",Cce,[t("label",Pce,[t("div",null,[T(d,null,{content:A(()=>[xce]),default:A(()=>[Sce]),_:1}),_(" Токен платежной системы ")]),jce]),f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"уровень CashBack","onUpdate:modelValue":e[21]||(e[21]=h=>i.botForm.payment_provider_token=h),"aria-describedby":"bot-level-3"},null,512),[[k,i.botForm.payment_provider_token]])])])):u("",!0),t("div",Oce,[t("div",Tce,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[22]||(e[22]=h=>i.need_shop=h),type:"checkbox",id:"need-shop"},null,512),[[z,i.need_shop]]),Uce])]),i.need_shop?(l(),a("div",Ice,[t("label",Vce,[t("div",null,[T(d,null,{content:A(()=>[Ace]),default:A(()=>[Mce]),_:1}),_(" ВК-группа ")]),Ece]),f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":e[23]||(e[23]=h=>i.botForm.vk_shop_link=h),"aria-describedby":"vk_shop_link"},null,512),[[k,i.botForm.vk_shop_link]])])):u("",!0),Dce,t("div",zce,[t("label",Bce,[t("div",null,[T(d,null,{content:A(()=>[Rce]),default:A(()=>[Lce]),_:1}),_(" Информационная ссылка ")]),Nce]),f(t("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":e[24]||(e[24]=h=>i.botForm.info_link=h),"aria-describedby":"bot-info-link"},null,512),[[k,i.botForm.info_link]])]),qce,Wce,(l(!0),a(v,null,O(i.botForm.social_links,(h,g)=>(l(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+g},[t("div",Yce,[Hce,t("button",{type:"button",onClick:w=>r.removeItem("social_links",g),class:"btn btn-link text-danger"},Kce,8,Qce)]),f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255","onUpdate:modelValue":w=>i.botForm.social_links[g].title=w,"aria-describedby":"bot-social-link-"+g,required:""},null,8,Jce),[[k,i.botForm.social_links[g].title]]),f(t("input",{type:"text",class:"form-control mb-2",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":w=>i.botForm.social_links[g].url=w},null,8,Xce),[[k,i.botForm.social_links[g].url]])]))),128)),t("button",{type:"button",onClick:e[25]||(e[25]=h=>r.addSocialLinks()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще ссылку "),Zce,t("h6",eue,[_("Аватар для бота "),T(d,null,{content:A(()=>[sue]),default:A(()=>[tue]),_:1})]),t("div",oue,[t("label",iue,[nue,t("input",{type:"file",id:"bot-photos",multiple:"",accept:"image/*",onChange:e[26]||(e[26]=(...h)=>r.onChangePhotos&&r.onChangePhotos(...h)),style:{display:"none"}},null,32)]),i.botForm.photos?(l(!0),a(v,{key:0},O(i.botForm.photos,(h,g)=>(l(),a("div",lue,[f(t("img",null,null,512),[[c,r.getPhoto(h).imageUrl]]),t("div",aue,[t("a",{onClick:w=>r.removePhoto(g)},cue,8,rue)])]))),256)):(l(),a("div",uue,[f(t("img",null,null,512),[[c,"/images-by-bot-id/"+i.bot.id+"/"+i.botForm.image]]),t("div",mue,[t("a",{onClick:e[27]||(e[27]=h=>r.removePhoto())},pue)])]))]),t("button",{disabled:!i.botForm.bot_token,type:"submit",class:"btn btn-m btn-full mb-3 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Сохранить настройки ",8,_ue)])):u("",!0)])):(l(),a("div",fue,yue))],32)],64)}const $ue=oe(bre,[["render",vue]]),kue={key:0},wue={class:"d-flex flex-column mt-2"},Fue={key:0},Cue=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Pue=["onClick"],Sue=t("a",{href:"#",class:"btn btn-m btn-full rounded-xl text-uppercase font-900 shadow-s bg-red1-light"},[t("i",{class:"fa-solid fa-arrow-right"})],-1),xue={key:1},jue=t("div",{class:"alert alert-warning mt-2",role:"alert"}," К сожалению мы не нашли нужных ботов... ",-1),Oue=[jue],Tue={props:{companyId:null,selectedBot:null},data(){return{selectedBotId:null,need_self_bots:!1,filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],search:null,bots_paginate_object:null}},watch:{need_self_bots:function(){this.loadBots()}},computed:{...G(["getBots","getBotsPaginateObject","getCurrentCompany"]),filteredBots(){return this.bots?this.bots.filter(s=>s.deleted_at==null):[]}},mounted(){this.loadBots()},methods:{removeBotCallback(){this.loadBots(),this.selectedBotId=null},duplicate(s){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:s,company_id:this.getCurrentCompany.id}}).then(e=>{let o=this.bots_paginate_object.meta.current_page||0;this.loadBots(o),this.$notify("Указанный бот успешно продублирован")})},selectBot(s){this.loading=!0,this.selectedBotId=s.id,this.$nextTick(()=>{this.loading=!1}),this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(s){this.loadBots(s)},loadBots(s=0){this.loading=!0,this.$store.dispatch("loadSimpleBots",{dataObject:{companyId:this.companyId||null,needSelfBots:!0,search:this.search},size:5,page:s}).then(e=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject}).catch(()=>{this.loading=!1})}}},Uue=Object.assign(Tue,{__name:"BotListSelf",setup(s){return(e,o)=>(l(),a(v,null,[e.show?(l(),a("div",kue,[t("div",wue,[f(t("input",{type:"search",class:"form-control mb-2",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),"aria-describedby":"button-addon2"},null,512),[[k,e.search]]),t("button",{class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-blue2-dark",onClick:o[1]||(o[1]=n=>e.loadBots(0)),type:"button",id:"button-addon2"},"Найти ")]),e.bots.length>0?(l(),a("div",Fue,[Cue,(l(!0),a(v,null,O(e.filteredBots,(n,i)=>(l(),a("a",{href:"javascript:void(0)",class:C(["d-flex justify-content-between align-items-center btn btn-border px-2 py-1 btn-full mb-2 rounded-xl text-uppercase font-900 bg-theme",{" border-blue2-dark color-blue2-dark":e.selectedBotId!=n.id," border-green2-dark color-green2-dark":e.selectedBotId===n.id}])},[t("strong",{onClick:r=>e.selectBot(n),class:"font-12 w-100 text-center",style:{"word-wrap":"break-word"}},[t("i",{class:C([{"text-danger":n.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),_(p(n.bot_domain||"Не указано"),1)],8,Pue),Sue],2))),256)),e.bots_paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextBots,pagination:e.bots_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):(l(),a("div",xue,Oue))])):u("",!0),e.selectedBotId&&!e.loading?(l(),M($ue,{key:1,onRemove:e.removeBotCallback,"bot-id":e.selectedBotId},null,8,["onRemove","bot-id"])):u("",!0)],64))}}),Iue=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Vue={data(){return{selectedCompanyId:!1,botUser:null,loading:!1}},computed:{...G(["getSelf"]),currentBot(){return window.currentBot}},watch:{getSelf:function(){this.botUser=this.getSelf}},mounted(){this.getSelf&&(this.botUser=this.getSelf)},methods:{selectCompany(s){this.loading=!0,this.selectedCompanyId=s.id,this.$nextTick(()=>{this.loading=!1}),this.$botNotification.notification("Информация","Вы успешно выбрали за основу данного клиента!")},selectBot(s){this.form.selected_bot_id=s.id,this.$botNotification.notification("Информация","Вы успешно выбрали за основу данного бота!")}}},Ur=Object.assign(Vue,{__name:"Clients",setup(s){return(e,o)=>(l(),a(v,null,[T(jr,{"visual-mode":"true",onCallback:e.selectCompany},null,8,["onCallback"]),Iue,e.selectedCompanyId!=null&&!e.loading?(l(),M(Uue,{key:0,"company-id":e.selectedCompanyId},null,8,["company-id"])):u("",!0)],64))}}),Mue={class:"card card-style"},Aue={class:"content mb-0"},Eue=t("h6",null,"Список ваших клиентов",-1),Due={data(){},computed:{},watch:{},mounted(){},methods:{}},Ir=Object.assign(Due,{__name:"Clients",setup(s){return(e,o)=>(l(),a("div",Mue,[t("div",Aue,[Eue,T(Ur)])]))}}),zue=Object.freeze(Object.defineProperty({__proto__:null,default:Ir},Symbol.toStringTag,{value:"Module"}));const Bue={data(){return{load:!1,friends:[]}},watch:{getSelf:function(){this.loadFriendsWeb()}},mounted(){this.loadFriendsWeb()},computed:{...G(["getSelf"])},methods:{showPartner(){this.$botNotification.notification("Партнеры","Просмотр информации о партнере еще недоступен")},loadFriendsWeb(){this.loading=!0,this.$store.dispatch("loadFriendsWeb").then(s=>{this.loading=!1,this.friends=s}).catch(()=>{this.loading=!1})}}},Xn=s=>(Ge("data-v-a81c1ab4"),s=s(),Ke(),s),Lue={class:"d-flex"},Rue={class:"w-35 border-right pr-3 border-highlight partner-avatar"},Nue={key:0,"data-src":"images/avatars/1s.png",width:"80",class:"bg-highlight rounded-circle preload-img"},que={key:1,"data-src":"images/avatars/1s.png",width:"80",class:"bg-highlight rounded-circle preload-img"},Wue={class:"font-14 font-600 mt-2 text-center"},Yue=Xn(()=>t("p",{class:"color-blue2-dark mt-n3 font-9 font-400 text-center mb-0 pt-1"},"Партнер первой линии",-1)),Hue={class:"w-65 pl-3 pt-2"},Que=Xn(()=>t("h5",null,"Команда партнера",-1)),Gue={class:"color-highlight mt-n3 font-10 pt-1 mb-3"},Kue={key:0,"data-src":"images/avatars/1s.png",width:"40",class:"rounded-circle preload-img"},Jue={key:1,"data-src":"images/avatars/1s.png",width:"40",class:"rounded-circle preload-img"},Xue={key:2,class:"sub-badge-count rounded-circle bg-highlight color-white"},Zue={key:1,href:"javascript:void(0)"},eme={class:"rounded-circle preload-img bg-highlight color-white sub-partner-badge"},tme=Xn(()=>t("div",{class:"divider mt-4"},null,-1)),sme={key:1};function ome(s,e,o,n,i,r){const d=ie("lazy");return i.friends.length>0?(l(!0),a(v,{key:0},O(i.friends,(c,h)=>(l(),a("div",null,[t("div",Lue,[t("div",Rue,[c.manager?f((l(),a("img",Nue,null,512)),[[d,c.manager.image||null]]):f((l(),a("img",que,null,512)),[[d,"/images/manager.png"]]),t("h6",Wue,p(c.fio_from_telegram||"Не задано"),1),Yue]),t("div",Hue,[Que,t("p",Gue,"Всего партнеров: "+p(c.child.length),1),c.child.length>0?(l(!0),a(v,{key:0},O(c.child.slice(0,4),g=>(l(),a("a",{href:"javascript:void(0)",onClick:e[0]||(e[0]=(...w)=>r.showPartner&&r.showPartner(...w)),class:"d-inline-block position-relative"},[g.manager?f((l(),a("img",Kue,null,512)),[[d,g.manager.image||null]]):f((l(),a("img",Jue,null,512)),[[d,"/images/manager.png"]]),g.child.length>0?(l(),a("span",Xue,p(g.child.length),1)):u("",!0)]))),256)):u("",!0),c.child.length>4?(l(),a("a",Zue,[t("span",eme,"+"+p(c.child.length-4),1)])):u("",!0),c.child.length===0?(l(),a("a",{key:2,href:"javascript:void(0)",onClick:e[1]||(e[1]=(...g)=>r.showPartner&&r.showPartner(...g))}," У вашего друга нет собственных партнеров ")):u("",!0)])]),tme]))),256)):(l(),a("p",sme,"К сожалению на текущий момент у Вас нет ни 1 партнера:("))}const Vr=oe(Bue,[["render",ome],["__scopeId","data-v-a81c1ab4"]]);const Mt=s=>(Ge("data-v-62d7693d"),s=s(),Ke(),s),ime={key:0},nme={class:"card-bottom ml-3"},lme={class:"font-40 line-height-xl"},ame={class:"pb-0 mb-0 font-12"},rme=Mt(()=>t("i",{class:"fa fa-map-marker mr-2"},null,-1)),dme={key:0},cme=Mt(()=>t("div",{class:"card-overlay bg-gradient-fade"},null,-1)),ume={class:"card card-style"},mme={class:"content mb-0"},hme=Mt(()=>t("h3",{class:"text-center py-3"},"Общая статистика менеджера",-1)),pme={class:"row mb-0 text-center"},_me={class:"col-4"},fme={class:"mb-n1"},bme=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"Клиентов",-1)),gme={class:"col-4"},yme={class:"mb-n1"},vme=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"Ботов",-1)),$me={class:"col-4"},kme={class:"mb-n1"},wme=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"Пользователей",-1)),Fme=Mt(()=>t("div",{class:"divider mb-4 mt-3"},null,-1)),Cme={class:"row mb-0 text-center"},Pme={class:"col-6"},Sme={class:"mb-n1"},xme=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"К-Слотов",-1)),jme={class:"col-6"},Ome={class:"mb-n1"},Tme=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"Б-Слотов",-1)),Ume=Mt(()=>t("div",{class:"divider mb-4 mt-3"},null,-1)),Ime={class:"row mb-0 text-center"},Vme={class:"col-12"},Mme={class:"mb-n1"},Ame=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"Денег для вывода",-1)),Eme={class:"col-12"},Dme={class:"mb-n1"},zme=Mt(()=>t("p",{class:"font-10 mb-0 pb-0"},"Внутренний счет",-1)),Bme=ze('<div class="divider mb-4 mt-3" data-v-62d7693d></div><div class="row mb-0 pb-4" data-v-62d7693d><div class="col-12 mb-2" data-v-62d7693d><a href="#" class="btn btn-m btn-full rounded-s bg-highlight text-uppercase font-900" data-v-62d7693d>Пополнить баланс</a></div><div class="col-12" data-v-62d7693d><a href="#" class="btn btn-m btn-border btn-full rounded-s border-highlight color-highlight text-uppercase font-900" data-v-62d7693d>Скачать статистику</a></div></div>',2),Lme={class:"card card-style p-3"},Rme={class:"mb-0"},Nme={class:"mb-0"},qme={class:"mb-0"},Wme={class:"mb-0"},Yme={class:"mb-0"},Hme={class:"mb-0"},Qme={class:"mb-0"},Gme={class:"mb-3"},Kme=ze("<h6 data-v-62d7693d>Вам доступны следующие возможности:</h6><ul data-v-62d7693d><li data-v-62d7693d>Регистрация клиента</li><li data-v-62d7693d>Создание ботов любой конфигурации и сложности</li><li data-v-62d7693d>Выставление счетов на оплату и прием платеже за обслуживание</li><li data-v-62d7693d>Реферальная программа</li><li data-v-62d7693d>Профессиональное обучение</li><li data-v-62d7693d>Использование ресурсов компании для привлечения клиентов: маркетологи, дизайнеры, smm-специалисты, программисты </li><li data-v-62d7693d>Тех.поддержка по системе 24\\7</li></ul><h6 data-v-62d7693d> Ваши бонусы:</h6><ul data-v-62d7693d><li data-v-62d7693d>Оплата за регистрацию клиента (после его оплаты)</li><li data-v-62d7693d>Начисление персональной скидки (сгораемой и несгораемой)</li><li data-v-62d7693d>Получение бонусных доходов с реферальной программы 1, 2 и 3 уровня: ваши друзья работают, а вы получаете доход. Доход ограничен лишь числом друзей. </li></ul>",4),Jme={class:"card card-style"},Xme={class:"content mb-0"},Zme=Mt(()=>t("h6",null,"Список ваших клиентов",-1)),ehe={class:"card card-style"},the={class:"content"},she=Mt(()=>t("h3",{class:"py-3"},"Мои партнеры",-1)),ohe={data(){return{load:!1,confirm:!1,step:0,statistic:{clients_count:0,bots_count:0,bot_users_count:0,free_client_slot_count:0,free_bot_slot_count:0,ref_code:0},botUser:null,managerForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,referral:null,strengths:[""],weaknesses:[""],educations:[""],social_links:[""],skills:[{title:null,value:50}],info:null}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.managerForm.name=this.botUser.name||this.botUser.fio_from_telegram||null,this.managerForm.phone=this.botUser.phone||null,this.managerForm.email=this.botUser.email||null,this.managerForm.birthday=this.botUser.birthday||null,this.managerForm.city=this.botUser.city||null,this.managerForm.country=this.botUser.country||null,this.managerForm.address=this.botUser.address||null,this.managerForm.sex=this.botUser.sex||!0,this.loadManagerData()}},mounted(){},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{nextStep(){this.step++},remove(s,e){this.managerForm[s].splice(e,1)},add(s){s!=="skills"?this.managerForm[s].push(""):this.managerForm[s].push({title:null,value:50})},copyToClipboard(){navigator.clipboard.writeText(this.statistic.ref_code),this.$botNotification.notification("Реферальный код","Код скопирован в буфер обмена")},loadManagerData(){this.loading=!0,this.$store.dispatch("loadManagerData").then(s=>{this.loading=!1,this.statistic=s}).catch(()=>{this.loading=!1})},submit(){this.loading=!0;let s=new FormData;Object.keys(this.managerForm).forEach(e=>{const o=this.managerForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("saveManager",s).then(e=>{window.location.reload()}).catch(()=>{this.loading=!1})}}},ihe=Object.assign(ohe,{__name:"Profile",setup(s){return(e,o)=>e.botUser?(l(),a("div",ime,[e.botUser.manager?(l(),a("div",{key:0,class:"card card-style preload-img",style:dt([{"background-image":"url('"+e.botUser.manager.image+"')"},{height:"55vh"}])},[t("div",nme,[t("h1",lme,p(e.botUser.name),1),t("p",ame,[rme,_(p(e.botUser.city),1)]),e.botUser.manager.info?(l(),a("p",dme,p(e.botUser.manager.info),1)):u("",!0),e.statistic.ref_code?(l(),a("p",{key:1,class:"cursor-pointer",onClick:o[0]||(o[0]=(...n)=>e.copyToClipboard&&e.copyToClipboard(...n))},[_(" Ваш реферальный код: "),t("strong",null,p(e.statistic.ref_code),1)])):u("",!0)]),cme],4)):u("",!0),t("div",ume,[t("div",mme,[hme,t("div",pme,[t("div",_me,[t("h1",fme,p(e.statistic.clients_count),1),bme]),t("div",gme,[t("h1",yme,p(e.statistic.bots_count),1),vme]),t("div",$me,[t("h1",kme,p(e.statistic.bot_users_count),1),wme])]),Fme,t("div",Cme,[t("div",Pme,[t("h1",Sme,p(e.statistic.free_client_slot_count),1),xme]),t("div",jme,[t("h1",Ome,p(e.statistic.free_bot_slot_count),1),Tme])]),Ume,t("div",Ime,[t("div",Vme,[t("h1",Mme,p(e.botUser.cashBack.amount)+" руб",1),Ame]),t("div",Eme,[t("h3",Dme,p(e.botUser.manager.balance)+" руб",1),zme])]),Bme])]),t("div",Lme,[t("p",Rme,"Имя: "+p(e.botUser.name||"Не указано"),1),t("p",Nme,"Телефон: "+p(e.botUser.phone||"Не указано"),1),t("p",qme,"Город: "+p(e.botUser.city||"Не указано"),1),t("p",Wme,"Дата рождения: "+p(e.botUser.birthday||"Не указано"),1),t("p",Yme,"Ваш баланс: "+p(e.botUser.manager.balance||0)+" руб",1),t("p",Hme,"Пол: "+p(e.botUser.sex?"Мужской":"Женский"),1),t("p",Qme,"Колл-во слотов под клиентов: "+p(e.botUser.manager.max_company_slot_count||0),1),t("p",Gme,"Колл-во слотов под ботов у клиента: "+p(e.botUser.manager.max_bot_slot_count||0),1),Kme,T(st,{class:"mb-2"})]),t("div",Jme,[t("div",Xme,[Zme,T(Ur)])]),t("div",ehe,[t("div",the,[she,T(Vr)])])])):u("",!0)}}),Mr=oe(ihe,[["__scopeId","data-v-62d7693d"]]),nhe=Object.freeze(Object.defineProperty({__proto__:null,default:Mr},Symbol.toStringTag,{value:"Module"})),lhe={class:"card card-style p-3"},ahe={class:"content"},Ar={__name:"Partners",setup(s){return(e,o)=>(l(),a("div",lhe,[t("div",ahe,[T(Vr)])]))}},rhe=Object.freeze(Object.defineProperty({__proto__:null,default:Ar},Symbol.toStringTag,{value:"Module"}));const dhe={data(){return{botUser:null,load:!1,confirm:!1,step:0,deliveryManForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0}}},computed:{tg(){return window.Telegram.WebApp},tgUser(){const s=new URLSearchParams(this.tg.initData);return JSON.parse(s.get("user"))}},mounted(){},methods:{nextStep(){this.step++},submit(){this.loading=!0,this.$store.dispatch("saveDeliveryman",{dataObject:{bot_id:this.bot.id,tg:this.tgUser,form:this.deliveryManForm}}).then(s=>{this.loading=!1,window.location.reload()}).catch(()=>{this.loading=!1})}}},che={class:"container pt-3 pb-3"},uhe={class:"col-12 d-flex justify-content-center mb-3"},mhe={class:"img-avatar"},hhe={class:"img-avatar"},phe={class:"col-12"},_he=t("p",{class:"mb-3"},[t("em",null,[_("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),_(" Я хочу поздаврить Вас и дать возможность получать неограниченные преимушества нашего сервиса! Для начала нам нужно с тобой познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1),fhe=t("h6",{class:"text-center"},"Как мне к Вам обращаться?",-1),bhe={class:"input-group mb-3"},ghe=t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1),yhe={class:"col-12 d-flex justify-content-center mb-3"},vhe={class:"img-avatar"},$he={class:"img-avatar"},khe={class:"col-12"},whe={class:"mb-3"},Fhe=t("h6",{class:"text-center"},"Введи свой номер телефона",-1),Che={class:"input-group mb-3"},Phe=t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1),She={class:"col-12 d-flex justify-content-center mb-3"},xhe={class:"img-avatar"},jhe={class:"img-avatar"},Ohe={class:"col-12"},The=t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого ты пола?")],-1),Uhe=t("h6",{class:"text-center"},"Ты парень или девушка?",-1),Ihe={class:"input-group mb-3 mt-3 w-100 d-flex justify-content-center"},Vhe={class:"btn-group w-100",role:"group","aria-label":"deliveryManForm-sex"},Mhe=t("label",{class:"btn btn-outline-primary p-3",for:"sex-radio-btn-1"},"Парень",-1),Ahe=t("label",{class:"btn btn-outline-primary p-3",for:"sex-radio-btn-2"},"Девушка",-1),Ehe=t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1),Dhe={class:"col-12 d-flex justify-content-center mb-3"},zhe={class:"img-avatar"},Bhe={class:"img-avatar"},Lhe={class:"col-12"},Rhe=t("p",{class:"mb-3"},[t("em",null,"Для того, чтобы я мог поздравлять Вас с днем рождения и сделать Вам приятно, мне нужно знать, когда он у Вас")],-1),Nhe=t("h6",{class:"text-center"},"Введи свой день рождения",-1),qhe={class:"input-group mb-3"},Whe=t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1),Yhe={class:"col-12 d-flex justify-content-center mb-3"},Hhe={class:"img-avatar"},Qhe={class:"img-avatar"},Ghe={class:"col-12"},Khe=t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для твоего города, мне нужно знать, где ты живешь.")],-1),Jhe=t("h6",{class:"text-center"},"Какой у Вас город?",-1),Xhe={class:"input-group mb-3"},Zhe=ze('<datalist id="datalistCityOptions"><option value="Краснодар"></option><option value="Ростов-на-Дону"></option><option value="Таганрог"></option><option value="Донецк"></option><option value="Москва"></option></datalist>',1),epe=t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1),tpe={class:"col-12 d-flex justify-content-center mb-3"},spe={class:"img-avatar"},ope={class:"img-avatar"},ipe={class:"col-12"},npe=t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем продолжить, пожалуйста, прочти мои условия использования и дай свое согласие на их принятие.")],-1),lpe=t("h6",{class:"text-center"},"Последний шаг",-1),ape={class:"card border-success mb-3"},rpe={class:"card-body"},dpe=t("p",null,[_("Перед отправкой данных ознакомься с "),t("a",{href:"#"},"правилами нашего сервиса"),_(" и с "),t("a",{href:"#"},"политикой конфиденциальности"),_(".")],-1),cpe={class:"form-check form-switch"},upe={class:"form-check-label",for:"confirm"},mpe={key:0},hpe={key:1},ppe=["disabled"],_pe=t("div",null,null,-1);function fpe(s,e,o,n,i,r){const d=ie("lazy"),c=ie("mask");return l(),a(v,null,[t("div",che,[i.step===0?(l(),a("form",{key:0,onSubmit:e[1]||(e[1]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row"},[t("div",uhe,[t("div",mhe,[f(t("img",hhe,null,512),[[d,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",phe,[_he,fhe,t("div",bhe,[f(t("input",{type:"text",class:"form-control text-center p-3",placeholder:"Петров Петр Семенович","aria-label":"deliveryManForm-name","onUpdate:modelValue":e[0]||(e[0]=h=>i.deliveryManForm.name=h),"aria-describedby":"deliveryManForm-name",required:""},null,512),[[k,i.deliveryManForm.name]])]),ghe])],32)):u("",!0),i.step===1?(l(),a("form",{key:1,onSubmit:e[3]||(e[3]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row"},[t("div",yhe,[t("div",vhe,[f(t("img",$he,null,512),[[d,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",khe,[t("p",whe,[t("em",null,[_("- Отлично, "),t("strong",null,p(i.deliveryManForm.name),1),_("! А теперь, чтобы ты мог пользоваться всеми моими функциями, мне нужен твой номер телефона. Можешь ввести его?")])]),Fhe,t("div",Che,[f(t("input",{type:"text",class:"form-control p-3 text-center","onUpdate:modelValue":e[2]||(e[2]=h=>i.deliveryManForm.phone=h),placeholder:"+7(000)000-00-00","aria-label":"deliveryManForm-phone","aria-describedby":"deliveryManForm-phone",required:""},null,512),[[c,"+7(###)###-##-##"],[k,i.deliveryManForm.phone]])]),Phe])],32)):u("",!0),i.step===2?(l(),a("form",{key:2,onSubmit:e[6]||(e[6]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row"},[t("div",She,[t("div",xhe,[f(t("img",jhe,null,512),[[d,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",Ohe,[The,Uhe,t("div",Ihe,[t("div",Vhe,[f(t("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=h=>i.deliveryManForm.sex=h),class:"btn-check",name:"sex-radio-btn",id:"sex-radio-btn-1",autocomplete:"off",required:""},null,512),[[ct,i.deliveryManForm.sex]]),Mhe,f(t("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=h=>i.deliveryManForm.sex=h),class:"btn-check",name:"sex-radio-btn",id:"sex-radio-btn-2",autocomplete:"off",required:""},null,512),[[ct,i.deliveryManForm.sex]]),Ahe])]),Ehe])],32)):u("",!0),i.step===3?(l(),a("form",{key:3,onSubmit:e[8]||(e[8]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row"},[t("div",Dhe,[t("div",zhe,[f(t("img",Bhe,null,512),[[d,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",Lhe,[Rhe,Nhe,t("div",qhe,[f(t("input",{type:"date",class:"form-control p-3","onUpdate:modelValue":e[7]||(e[7]=h=>i.deliveryManForm.birthday=h),"aria-label":"deliveryManForm-birthday","aria-describedby":"deliveryManForm-birthday",required:""},null,512),[[k,i.deliveryManForm.birthday]])]),Whe])],32)):u("",!0),i.step===4?(l(),a("form",{key:4,onSubmit:e[10]||(e[10]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row"},[t("div",Yhe,[t("div",Hhe,[f(t("img",Qhe,null,512),[[d,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",Ghe,[Khe,Jhe,t("div",Xhe,[f(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=h=>i.deliveryManForm.city=h),list:"datalistCityOptions",class:"form-control p-3",placeholder:"Краснодар","aria-label":"deliveryManForm-city","aria-describedby":"deliveryManForm-city",required:""},null,512),[[k,i.deliveryManForm.city]]),Zhe]),epe])],32)):u("",!0),i.step===5?(l(),a("form",{key:5,onSubmit:e[13]||(e[13]=W((...h)=>r.submit&&r.submit(...h),["prevent"])),class:"row"},[t("div",tpe,[t("div",spe,[f(t("img",ope,null,512),[[d,"https://your-cashman.com/Image/IconSmall.png"]])])]),t("div",ipe,[npe,lpe,t("div",ape,[t("div",rpe,[dpe,t("div",cpe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[11]||(e[11]=h=>i.confirm=h),type:"checkbox",role:"switch",id:"confirm"},null,512),[[z,i.confirm]]),t("label",upe,[i.deliveryManForm.sex?u("",!0):(l(),a("span",mpe,"С правилами озакномилась")),i.deliveryManForm.sex?(l(),a("span",hpe,"С правилами ознакомлен")):u("",!0)])])])]),t("button",{type:"button",onClick:e[12]||(e[12]=h=>i.step=0),class:"btn btn-outline-primary w-100 p-3 mb-3"},"Исправить ошибки "),t("button",{type:"submit",disabled:!i.confirm||i.load,class:"btn btn-outline-success w-100 p-3"},"Отправить анкету ",8,ppe)])],32)):u("",!0)]),_pe],64)}const Er=oe(dhe,[["render",fpe]]),bpe=Object.freeze(Object.defineProperty({__proto__:null,default:Er},Symbol.toStringTag,{value:"Module"}));Yi,Go,Qn,Gn,{...G(["getCategories"])};const gpe={props:["review"],data(){return{form:{id:null,text:null,rating:5,image:null,order_id:null,product_id:null}}},mounted(){this.$nextTick(()=>{this.form.id=this.review.id||null,this.form.order_id=this.review.order_id||null,this.form.product_id=this.review.product_id||null})},methods:{onChangePhotos(s){const e=s.target.files[0];this.form.image=e},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(){this.form.image=null},submitReview(){let s=new FormData;this.sending=!0,Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),typeof this.form.image!="string"&&(s.append("photo",this.form.image),s.delete("image")),this.$store.dispatch("storeReview",{reviewForm:s}).then(e=>{this.$notify({title:"Обратная связь",text:"Спасибо за отзыв"}),document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(o=>o.click()),this.$emit("callback",e.data)}).catch(e=>{})}}},ype={class:"form-check mb-2"},vpe=t("label",{class:"form-check-label",for:"ratingReview1"}," Очень хорошо ",-1),$pe={class:"form-check mb-2"},kpe=t("label",{class:"form-check-label",for:"ratingReview2"}," Хорошо ",-1),wpe={class:"form-check mb-2"},Fpe=t("label",{class:"form-check-label",for:"ratingReview3"}," Средне ",-1),Cpe={class:"form-check mb-2"},Ppe=t("label",{class:"form-check-label",for:"ratingReview4"}," Плохо ",-1),Spe={class:"form-check mb-2"},xpe=t("label",{class:"form-check-label",for:"ratingReview5"}," Очень плохо ",-1),jpe=t("p",{class:"text-center"},[t("strong",null,"Напишите ваш отзыв")],-1),Ope={class:"form-floating"},Tpe=t("label",{for:"floatingTextarea"},"Текст отзыва",-1),Upe=t("button",{type:"submit",class:"btn btn-primary my-2 w-100 p-3"},"Оставить отзыв",-1),Ipe=t("button",{type:"button",class:"btn btn-link my-3 w-100 text-center","data-bs-dismiss":"modal","aria-label":"Close"}," Закрыть ",-1);function Vpe(s,e,o,n,i,r){return l(),a("form",{class:"p-2",onSubmit:e[6]||(e[6]=W((...d)=>r.submitReview&&r.submitReview(...d),["prevent"]))},[jt(s.$slots,"title"),t("div",ype,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=d=>i.form.rating=d),value:"5",type:"radio",name:"rating",id:"ratingReview1"},null,512),[[ct,i.form.rating]]),vpe]),t("div",$pe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=d=>i.form.rating=d),value:"4",type:"radio",name:"rating",id:"ratingReview2"},null,512),[[ct,i.form.rating]]),kpe]),t("div",wpe,[f(t("input",{class:"form-check-input",value:"3","onUpdate:modelValue":e[2]||(e[2]=d=>i.form.rating=d),type:"radio",name:"rating",id:"ratingReview3"},null,512),[[ct,i.form.rating]]),Fpe]),t("div",Cpe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=d=>i.form.rating=d),value:"2",type:"radio",name:"rating",id:"ratingReview4"},null,512),[[ct,i.form.rating]]),Ppe]),t("div",Spe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[4]||(e[4]=d=>i.form.rating=d),value:"1",type:"radio",name:"rating",id:"ratingReview5"},null,512),[[ct,i.form.rating]]),xpe]),jpe,t("div",Ope,[f(t("textarea",{class:"form-control",style:{"min-height":"250px"},"onUpdate:modelValue":e[5]||(e[5]=d=>i.form.text=d),placeholder:"Leave a comment here",id:"floatingTextarea",required:""},null,512),[[k,i.form.text]]),Tpe]),Upe,Ipe],32)}const Mpe=oe(gpe,[["render",Vpe]]);const Ape={key:0,class:"card border-0 mb-3"},Epe={class:"card-body p-0"},Dpe={class:"d-flex mb-2"},zpe={style:{"object-fit":"cover",height:"100%"},class:"rounded-2",width:"110"},Bpe={class:"w-100 px-2 d-flex flex-column justify-content-between"},Lpe={class:"pb-0 mb-0 fw-bold",style:{"font-size":"14px"}},Rpe={class:"py-2 mb-0 d-flex justify-content-between",style:{"font-size":"12px"}},Npe={key:0},qpe={class:"text-decoration-line-through"},Wpe={class:"text-danger fw-bold"},Ype={key:1},Hpe={class:"text-decoration-line-through"},Qpe={class:"text-danger fw-bold"},Gpe={key:2},Kpe={key:3},Jpe={class:"d-flex w-100"},Xpe=["disabled"],Zpe=t("sup",{class:"font-10 opacity-50"},".00",-1),e_e={key:1,class:"btn-group w-100"},t_e=["disabled"],s_e={key:0},o_e=["disabled"],i_e={class:"form-check form-switch mb-2"},n_e=["id"],l_e=["for"],a_e={key:0,class:"form-floating"},r_e=t("label",{for:"floatingInput"},"Комментарий",-1),d_e={key:1,class:"p-2 alert alert-warning mt-2 mb-0"},c_e=t("p",{class:"mb-0 fw-bold"},"Особенности доставки данного товара",-1),u_e={key:0,class:"d-flex justify-content-between mb-3"},m_e={key:1,class:"mb-0"},h_e={props:["item","comment","config"],data(){return{form:{id:null,comment:null,need_comment:!1},sending:!1,is_online:!0}},computed:{...G(["inCart"]),canProductAction(){return this.is_online&&!this.sending},checkInCart(){return this.inCart(this.item.id)},currentPrice(){var s,e;return(s=this.config)!=null&&s.discount_price?((e=this.config)==null?void 0:e.discount_price)||0:this.item.current_price||0},oldPrice(){return this.item.old_price/100}},mounted(){window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1}),this.comment&&(console.log("COMMENT",this.comment,this.form.need_comment),this.form.need_comment=!0,this.form.comment=this.comment)},methods:{addToCart(){this.$cart.add(this.item)},addCommentToProduct(){this.sending=!0,this.form.id=this.item.id,this.$store.dispatch("addCommentToProduct",this.form).then(()=>{this.sending=!1,this.$notify({title:"Товар",text:"Комментарий к товару успешно добавлен",type:"success"}),this.comment&&(this.form.need_comment=!0,this.form.comment=this.comment)}).catch(()=>{this.sending=!1,this.$notify({title:"Товар",text:"Ошибка добавления комментария к товару!",type:"error"})})},incProductCart(){this.sending=!0,(this.checkInCart===0?this.$store.dispatch("addProductToCart",this.item):this.$store.dispatch("incQuantity",this.item.id)).then(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Ошибка добавления товара!",type:"error"})})},decProductCart(){this.sending=!0,(this.checkInCart<=1?this.$store.dispatch("removeProduct",this.item.id):this.$store.dispatch("decQuantity",this.item.id)).then(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Товар успешно удален",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Ошибка удаления товара!",type:"error"})})}}},Dr=Object.assign(h_e,{__name:"ProductCardSimple",setup(s){return(e,o)=>{var i,r,d;const n=ie("lazy");return s.item?(l(),a("div",Ape,[t("div",Epe,[t("div",Dpe,[t("div",{class:"mr-auto",onClick:o[0]||(o[0]=(...c)=>e.addToCart&&e.addToCart(...c)),style:{"max-height":"100px"}},[f(t("img",zpe,null,512),[[n,s.item.images[0]]])]),t("div",Bpe,[t("h6",Lpe,[_(p(s.item.title||"не указано")+" ",1),jt(e.$slots,"partner")]),t("h6",Rpe,[s.config.discount_price?(l(),a("span",Ype,[_(p(s.config.discount_price)+"₽ ",1),t("span",Hpe,p(s.item.current_price||0)+"₽",1),_(" ("),t("span",Qpe,"-"+p(s.config.discount_amount||0)+"₽",1),_(") ")])):(l(),a("span",Npe,[_(p(e.currentPrice)+"₽ ",1),s.item.old_price>0?(l(),a(v,{key:0},[t("span",qpe,p(s.item.old_price||0)+"₽",1),t("span",Wpe," -"+p((s.item.old_price||0)-(s.item.current_price||0))+"₽",1)],64)):u("",!0)])),(i=s.item)!=null&&i.is_weight_product?(l(),a("span",Kpe,p(e.currentPrice*e.inCart(s.item.id)/(((r=s.item.weight_config)==null?void 0:r.step)||100))+"₽",1)):(l(),a("span",Gpe,"="+p(e.currentPrice*e.inCart(s.item.id))+"₽",1))]),t("div",Jpe,[e.inCart(s.item.id)===0?(l(),a("button",{key:0,type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary w-100 rounded-3"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[1]||(o[1]=(...c)=>e.incProductCart&&e.incProductCart(...c))},[_(p(e.currentPrice),1),Zpe,_("₽ ")],10,Xpe)):u("",!0),e.inCart(s.item.id)>0?(l(),a("div",e_e,[t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[2]||(o[2]=(...c)=>e.decProductCart&&e.decProductCart(...c))},"- ",10,t_e),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm"])},[_(p(e.checkInCart)+" ",1),(d=s.item)!=null&&d.is_weight_product?(l(),a("span",s_e,"г.")):u("",!0)],2),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[3]||(o[3]=(...c)=>e.incProductCart&&e.incProductCart(...c))},"+ ",10,o_e)])):u("",!0)])])]),t("div",i_e,[f(t("input",{"onUpdate:modelValue":o[4]||(o[4]=c=>e.form.need_comment=c),class:"form-check-input",type:"checkbox",value:"",id:"item-comment-"+s.item.id,switch:""},null,8,n_e),[[z,e.form.need_comment]]),t("label",{class:"form-check-label",style:{"font-size":"12px"},for:"item-comment-"+s.item.id}," Добавить комментарий к товару ",8,l_e)]),e.form.need_comment?(l(),a("div",a_e,[f(t("input",{type:"text",onBlur:o[5]||(o[5]=(...c)=>e.addCommentToProduct&&e.addCommentToProduct(...c)),"onUpdate:modelValue":o[6]||(o[6]=c=>e.form.comment=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,544),[[k,e.form.comment]]),r_e])):u("",!0),s.item.delivery_terms?(l(),a("div",d_e,[c_e,s.item.delivery_terms?(l(),a("h6",u_e,p(s.item.delivery_terms),1)):(l(),a("p",m_e,"Дополнительных условий доставки нет"))])):u("",!0)])])):u("",!0)}}}),p_e={key:0,class:"w-100"},__e={class:"card rounded-0 border-0 w-100"},f_e={key:0,class:"card-body"},b_e={key:1,class:"card-body p-0"},g_e={class:"fst-italic my-2",style:{"word-break":"break-word"}},y_e={key:0,class:"mb-0"},v_e={class:"text-primary fw-bold"},$_e={class:"d-flex justify-content-center"},k_e={class:"form-check my-2"},w_e=["id"],F_e=["for"],C_e={key:2,class:"card-body p-0"},P_e=t("i",{class:"fa-solid fa-comment-medical mr-1"},null,-1),S_e={key:1},x_e=["disabled"],j_e={key:0,class:"color-white"},O_e={key:1,class:"color-white"},T_e=["id"],U_e={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen"},I_e={class:"modal-content"},V_e=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M_e={class:"modal-body"},A_e={key:0,class:"text-center"},E_e=t("strong",null,"Отзыв к товару",-1),D_e=[E_e],z_e={key:1,class:"text-center"},B_e=t("strong",null,"Отзыв к заказу",-1),L_e=[B_e],R_e={props:["modelValue","needProduct","isAdmin"],data(){return{need_user_notify:!1,load:!0,review:null,spent_time_counter:0}},mounted(){this.review=this.modelValue,localStorage.getItem("cashman_review_card_notify_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_review_card_notify_counter")||0))},methods:{removeReview(){this.review.send_review_at=null,this.review.text=null,this.review.rating=5,this.review.need_user_notify=this.need_user_notify||!1,this.$store.dispatch("storeReview",{reviewForm:this.review}).then(()=>{this.$notify({title:"Отзывы",text:"Вы успешно удалили отзыв",type:"success"})}).catch(()=>{this.$notify({title:"Отзывы",text:"Ошибка удаления отзыва",type:"error"})})},callback(s){this.load=!1,this.review=s,this.$nextTick(()=>{this.load=!0,this.$emit("update:modelValue",s)})},showReviewsForm(){new bootstrap.Modal(document.getElementById("review-modal-info"+this.review.id),{}).show()},notifyUser(){this.$store.dispatch("notifyUserForReview",{reviewForm:this.review}).then(()=>{this.$notify({title:"Отзывы",text:"Вы успешно отправили пользователю напоминание",type:"success"})}).catch(()=>{this.$notify({title:"Отзывы",text:"Ошибка напоминания",type:"error"})}),this.startTimer()},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_review_card_notify_counter",this.spent_time_counter)},1e3)}}},ro=Object.assign(R_e,{__name:"ReviewCard",setup(s){return(e,o)=>e.review&&e.load?(l(),a("div",p_e,[t("div",__e,[s.needProduct?(l(),a("div",f_e,[e.review.product?(l(),M(Dr,{key:0,item:e.review.product},null,8,["item"])):u("",!0)])):u("",!0),e.review.send_review_at?(l(),a("div",b_e,[T(Uo,{rating:e.review.rating},null,8,["rating"]),t("p",g_e,p(e.review.text||"не указан"),1),e.review.send_review_at?(l(),a("p",y_e,[_(" Отзыва оставлен "),t("span",v_e,p(e.$filters.currentFull(e.review.send_review_at)),1)])):u("",!0),t("div",$_e,[t("div",k_e,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[0]||(o[0]=n=>e.need_user_notify=n),type:"checkbox",id:"notify-user-for-review-"+e.review.id},null,8,w_e),[[z,e.need_user_notify]]),t("label",{class:"form-check-label",for:"notify-user-for-review-"+e.review.id}," Оповестить пользователя ",8,F_e)])]),s.isAdmin?(l(),a("button",{key:1,onClick:o[1]||(o[1]=(...n)=>e.removeReview&&e.removeReview(...n)),type:"button",class:"btn btn-primary w-100"},"Сбросить отзыв ")):u("",!0)])):(l(),a("div",C_e,[s.isAdmin?u("",!0):(l(),a("button",{key:0,type:"button",onClick:o[2]||(o[2]=(...n)=>e.showReviewsForm&&e.showReviewsForm(...n)),class:"btn btn-link w-100"},[P_e,_(" Вы можете оставить отзыв ")])),s.isAdmin?(l(),a("p",S_e," Пользователь еще не оставил отзыв! ")):u("",!0),s.isAdmin?(l(),a("button",{key:2,onClick:o[3]||(o[3]=(...n)=>e.notifyUser&&e.notifyUser(...n)),disabled:e.spent_time_counter>0,type:"button",class:"btn btn-primary w-100"},[e.spent_time_counter<=0?(l(),a("span",j_e,"Напомнить")):(l(),a("span",O_e,"Осталось ждать "+p(e.spent_time_counter||0)+" сек.",1))],8,x_e)):u("",!0)]))]),t("div",{class:"modal fade",id:"review-modal-info"+e.review.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",U_e,[t("div",I_e,[V_e,t("div",M_e,[T(Mpe,{onCallback:e.callback,review:e.review},{title:A(()=>[e.review.order_id!=null&&e.review.product_id!=null?(l(),a("p",A_e,D_e)):u("",!0),e.review.order_id!=null&&e.review.product_id==null?(l(),a("p",z_e,L_e)):u("",!0)]),_:1},8,["onCallback","review"])])])])],8,T_e)])):u("",!0)}});const N_e={class:"card border-0 product-card"},q_e={class:"img-container"},W_e={class:"rounded-3"},Y_e={class:"controls"},H_e={class:"top d-flex justify-content-between w-100 align-items-center"},Q_e={class:"rating p-2"},G_e={class:"text-white fw-bold"},K_e=t("i",{class:"fa-regular fa-star text-primary mr-1"},null,-1),J_e={key:0,class:"terms p-2"},X_e=t("span",{class:"text-white fw-bold"},[t("i",{class:"fa-solid fa-clock text-primary"})],-1),Z_e=[X_e],efe={key:0,class:"fa-solid fa-heart",style:{"font-size":"14px"}},tfe={key:1,class:"fa-regular fa-heart",style:{"font-size":"14px"}},sfe={class:"card-body px-0"},ofe={key:0,style:{"margin-right":"10px"},class:"text-primary text-center"},ife={key:0},nfe={key:1,class:"d-flex justify-content-between align-items-center px-2"},lfe={key:0},afe=t("i",{class:"fa-solid fa-check-double mr-2"},null,-1),rfe={key:1},dfe={key:0,class:"d-flex justify-content-between align-items-center px-2"},cfe=["disabled"],ufe={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},mfe={key:1,class:"btn-group w-100 rounded-3"},hfe=["disabled"],pfe={key:0},_fe=["disabled"],ffe={key:1,class:"px-2"},bfe=t("span",{style:{"font-size":"12px"},class:"btn btn-outline-secondary rounded-3 py-2 btn-md w-100 d-flex justify-content-center align-items-center"},[t("i",{class:"fa-solid fa-lock mr-2"}),_(" нет в наличии")],-1),gfe=[bfe],yfe={props:["item","displayType","collectionMode","canSelect"],data(){return{sending:!1,is_online:!0}},computed:{...G(["inCart","getReviews","getReviewsPaginateObject","getSelf","getFavoriteProducts"]),currentPrice(){return this.item.current_price/100},checkInCart(){return this.inCart(this.item.id)},favorites(){return this.getFavoriteProducts},canProductAction(){return this.is_online&&!this.sending},currentBot(){return window.currentBot},inFav(){return this.favorites.length===0?!1:this.favorites.indexOf(this.item.id)!==-1}},mounted(){window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1})},methods:{showProductDetails(){this.$productInfo.show(this.item)},goToProduct(){this.$router.push({name:"ProductV2",params:{productId:this.item.id}})},addToFavorite(){var o;this.$store.dispatch("toggleProductInFavorites",{form:{id:this.item.id}}).then(n=>{this.$notify({title:"Избранное",text:this.inFav?"Товар успешно добавлен в избранное!":"Товар убран из избранного!",type:"success"}),window.self.config.favorites=n.data.favorites}).catch(()=>{});const s=((o=window.self.config)==null?void 0:o.favorites)||[];let e=s.findIndex(n=>n===this.item.id);e!==-1?s.splice(e,1):s.push(this.item.id),window.self.config==null?window.self.config={favorites:s}:window.self.config.favorites=s},incProductCart(){this.sending=!0,(this.checkInCart===0?this.$store.dispatch("addProductToCart",this.item):this.$store.dispatch("incQuantity",this.item.id)).then(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:'Товар "'+this.item.title+'" успешно добавлен',type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Ошибка добавления товара!",type:"error"})})},decProductCart(){this.sending=!0,(this.checkInCart<=1?this.$store.dispatch("removeProduct",this.item.id):this.$store.dispatch("decQuantity",this.item.id)).then(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:'Товар "'+this.item.title+'" успешно убран из корзины',type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Ошибка удаления товара!",type:"error"})})},selectInCollection(s){this.canSelect&&this.$emit("select-in-collection",s)}}},Xi=Object.assign(yfe,{__name:"ProductCard",setup(s){return(e,o)=>{var i;const n=ie("lazy");return l(),a("div",N_e,[t("div",q_e,[f(t("img",W_e,null,512),[[n,s.item.images[0]]]),t("div",Y_e,[t("div",H_e,[t("div",Q_e,[t("span",G_e,[K_e,_(" "+p(Math.round(s.item.rating||0)),1)])]),s.item.delivery_terms?(l(),a("div",J_e,Z_e)):u("",!0),t("span",{onClick:o[0]||(o[0]=(...r)=>e.addToFavorite&&e.addToFavorite(...r)),style:{"margin-right":"10px"},class:"badge bg-primary fw-bold"},[e.inFav?(l(),a("i",efe)):(l(),a("i",tfe))])])]),t("div",{onClick:o[1]||(o[1]=(...r)=>e.showProductDetails&&e.showProductDetails(...r)),class:"click-zone"})]),t("div",sfe,[s.item.old_price>0?(l(),a("p",ofe,"Акция")):u("",!0),t("p",{onClick:o[2]||(o[2]=(...r)=>e.showProductDetails&&e.showProductDetails(...r)),class:"text-center mb-2",style:{"font-size":"10px"}},[_(p(s.item.title.slice(0,50))+" ",1),s.item.title.length>50?(l(),a("span",ife,"...")):u("",!0)]),s.collectionMode?(l(),a("div",nfe,[t("button",{type:"button",onClick:o[3]||(o[3]=r=>e.selectInCollection(s.item)),style:{"font-size":"12px"},class:C([{"btn-primary":s.item.is_checked,"btn-light":!s.item.is_checked},"btn btn-md w-100 rounded-2 mb-2"])},[s.item.is_checked?(l(),a("span",lfe,[afe,_(" Выбрано")])):(l(),a("span",rfe,"Выбрать"))],2)])):(l(),a(v,{key:2},[s.item.in_stop_list_at?(l(),a("div",ffe,gfe)):(l(),a("div",dfe,[e.inCart(s.item.id)===0?(l(),a("button",{key:0,type:"button",onClick:o[4]||(o[4]=(...r)=>e.incProductCart&&e.incProductCart(...r)),style:{"font-size":"12px"},class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-light w-100 rounded-3"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction},[_(p(s.item.current_price||0)+"₽ ",1),s.item.old_price>0?(l(),a("span",ufe,p(s.item.old_price||0)+"₽",1)):u("",!0)],10,cfe)):u("",!0),e.inCart(s.item.id)>0?(l(),a("div",mfe,[t("button",{type:"button",disabled:s.item.in_stop_list_at!=null||!e.canProductAction,style:{"border-radius":"6px 0px 0px 6px"},class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"]),onClick:o[5]||(o[5]=(...r)=>e.decProductCart&&e.decProductCart(...r))},"- ",10,hfe),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"])},[_(p(e.checkInCart)+" ",1),(i=s.item)!=null&&i.is_weight_product?(l(),a("span",pfe,"г.")):u("",!0)],2),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[6]||(o[6]=(...r)=>e.incProductCart&&e.incProductCart(...r)),style:{"border-radius":"0px 6px 6px 0px"}},"+ ",10,_fe)])):u("",!0)]))],64))])])}}});const vfe={class:"list-group-item p-2 border-0 d-flex justify-content-between align-items-start"},$fe={class:"ms-2 w-100"},kfe=t("i",{class:"fa-solid fa-arrow-up-right-from-square"},null,-1),wfe={key:0},Ffe={class:"mb-2 fst-italic"},Cfe={key:0,class:"d-flex justify-content-between align-items-center px-2"},Pfe={key:0},Sfe=t("i",{class:"fa-solid fa-check-double mr-2"},null,-1),xfe={key:1},jfe={key:0,class:"d-flex justify-content-between align-items-center my-2"},Ofe=t("i",{class:"fa-solid fa-cart-plus"},null,-1),Tfe={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},Ufe={key:1,class:"btn-group w-100 rounded-3"},Ife=["disabled"],Vfe={type:"button",class:"btn btn-sm btn-primary"},Mfe=["disabled"],Afe={key:1,class:"px-2"},Efe=t("span",{style:{"font-size":"12px"},class:"btn btn-outline-secondary rounded-3 py-2 btn-md w-100 d-flex justify-content-center align-items-center"},[t("i",{class:"fa-solid fa-lock mr-2"}),_(" нет в наличии")],-1),Dfe=[Efe],zfe={class:"d-flex flex-column"},Bfe={class:"badge text-bg-primary rounded-pill text-white fw-bold"},Lfe=t("i",{class:"fa-regular fa-star text-white"},null,-1),Rfe={key:0,class:"badge text-bg-primary rounded-pill text-white fw-bold mt-1"},Nfe=["id"],qfe={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen"},Wfe={class:"modal-content"},Yfe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Детали"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Hfe={class:"modal-body"},Qfe={key:0,class:"card border-0 bg-primary"},Gfe={class:"card-body"},Kfe={class:"text-left text-white",style:{"font-weight":"700","line-height":"100%"}},Jfe={class:"d-flex justify-content-between align-items-center"},Xfe={class:"text-left mb-0 text-white"},Zfe={class:"text-white fw-bold"},ebe={key:0,class:"badge bg-primary fw-bold"},tbe={class:"p-2"},sbe=t("p",{class:"mb-0"},"Рейтинг товара",-1),obe={class:"d-flex justify-content-between mb-3"},ibe={class:"nav nav-tabs justify-content-center"},nbe={class:"nav-item"},lbe={class:"nav-item"},abe={key:1},rbe={class:"text-justify py-2 fst-italic"},dbe={key:2},cbe={key:0},ube={class:"list-group w-100 py-2 rounded-0"},mbe={class:"list-group-item"},hbe={key:1,class:"alert alert-light my-2 d-flex justify-content-center align-items-center",role:"alert"},pbe=t("div",{class:"d-flex justify-content-center align-items-center flex-column"},[t("div",{class:"spinner-grow text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Загружаем....")]),t("p",null,"Загружаем отзывы...")],-1),_be=[pbe],fbe={key:2,class:"alert alert-light my-2",role:"alert"},bbe={key:0,class:"modal-footer p-2 m-0"},gbe={class:"d-flex justify-content-between align-items-center w-100 p-0"},ybe={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},vbe={key:1,class:"btn-group w-100"},$be=["disabled"],kbe={type:"button",class:"btn btn-md btn-primary"},wbe=["disabled"],Fbe={key:1,class:"modal-footer p-0 m-0"},Cbe=t("p",{class:"p-3 border-secondary border rounded-2 w-100 text-secondary fw-bold text-center"},"Товар недоступен для заказа",-1),Pbe=[Cbe],Sbe={props:["item","displayType","collectionMode","canSelect"],data(){return{tab:0,selected_image:null,loading_reviews:!1,showCart:!1,reviews:[],paginate:null}},computed:{...G(["inCart","getReviews","getReviewsPaginateObject"]),currentPrice(){return this.item.current_price/100},oldPrice(){return this.item.old_price/100},checkInCart(){return this.inCart(this.item.id)},discount(){return this.oldPrice>0?Math.round(this.currentPrice/this.oldPrice*100):0},uuid(){return Bt()}},mounted(){this.selected_image=(this.item.images||[]).length>0?this.item.images[0]:null},methods:{nextReviews(s){this.loadReviews(s)},loadReviews(s=0){return this.tab=1,this.loading_reviews=!0,this.$store.dispatch("loadReviewsByProductId",{dataObject:{product_id:this.item.id},page:s,size:30}).then(e=>{this.reviews=this.getReviews,this.paginate=this.getReviewsPaginateObject,this.loading_reviews=!1}).catch(()=>{this.loading_reviews=!1})},showProductDetails(){new bootstrap.Modal(document.getElementById("product-modal-info"+this.uuid),{}).show()},goToProduct(){this.$router.push({name:"ProductV2",params:{productId:this.item.id}})},incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.item):this.$store.dispatch("incQuantity",this.item.id),this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.item.id):this.$store.dispatch("decQuantity",this.item.id),this.$notify({title:"Добавление товара",text:"Товар успешно удален",type:"success"})},selectInCollection(s){this.canSelect&&this.$emit("select-in-collection",s)}}},xbe=Object.assign(Sbe,{__name:"ProductListItem",setup(s){return(e,o)=>{const n=Qe("Pagination");return l(),a(v,null,[t("li",vfe,[t("div",$fe,[t("div",{onClick:o[0]||(o[0]=(...i)=>e.showProductDetails&&e.showProductDetails(...i)),class:"fw-bold mb-1",style:{"font-size":"12px"}},[kfe,_(" "+p(s.item.title.slice(0,50))+" ",1),s.item.title.length>50?(l(),a("span",wfe,"...")):u("",!0)]),t("p",Ffe,p(s.item.description||"нет описания"),1),s.collectionMode?(l(),a("div",Cfe,[t("button",{type:"button",onClick:o[1]||(o[1]=i=>e.selectInCollection(s.item)),style:{"font-size":"12px"},class:C([{"btn-primary":s.item.is_checked,"btn-light":!s.item.is_checked},"btn btn-md w-100 rounded-2 mb-2"])},[s.item.is_checked?(l(),a("span",Pfe,[Sfe,_(" Выбрано")])):(l(),a("span",xfe,"Выбрать"))],2)])):(l(),a(v,{key:1},[s.item.in_stop_list_at?(l(),a("div",Afe,Dfe)):(l(),a("div",jfe,[e.inCart(s.item.id)===0?(l(),a("button",{key:0,type:"button",onClick:o[2]||(o[2]=(...i)=>e.incProductCart&&e.incProductCart(...i)),class:"btn btn-sm btn-success fw-bold w-100 rounded-2 p-2"},[Ofe,_(" В корзину "+p(s.item.current_price||0)+"₽ ",1),s.item.old_price>0?(l(),a("span",Tfe,p(s.item.old_price||0)+"₽",1)):u("",!0)])):u("",!0),e.inCart(s.item.id)>0?(l(),a("div",Ufe,[t("button",{type:"button",disabled:s.item.in_stop_list_at,style:{"border-radius":"6px 0px 0px 6px"},onClick:o[3]||(o[3]=(...i)=>e.decProductCart&&e.decProductCart(...i)),class:"btn btn-sm btn-primary p-2"},"- ",8,Ife),t("button",Vfe,p(e.checkInCart),1),t("button",{type:"button",disabled:s.item.in_stop_list_at,onClick:o[4]||(o[4]=(...i)=>e.incProductCart&&e.incProductCart(...i)),style:{"border-radius":"0px 6px 6px 0px"},class:"btn btn-sm btn-primary p-2"},"+ ",8,Mfe)])):u("",!0)]))],64))]),t("div",zfe,[t("span",Bfe,[Lfe,_(" "+p(Math.round(s.item.rating||0)),1)]),s.item.old_price>0?(l(),a("span",Rfe,"% ")):u("",!0)])]),t("div",{class:"modal fade",id:"product-modal-info"+e.uuid,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",qfe,[t("div",Wfe,[Yfe,t("div",Hfe,[s.item?(l(),a("div",Qfe,[t("div",Gfe,[t("h6",Kfe,p(s.item.title||"Не указан"),1),t("div",Jfe,[t("p",Xfe,[_("Цена "),t("strong",Zfe,p(s.item.current_price||0)+"₽",1)]),e.discount>0?(l(),a("span",ebe,"-"+p(e.discount||0)+"%",1)):u("",!0)])])])):u("",!0),t("div",tbe,[sbe,t("h6",obe,[T(Uo,{rating:s.item.rating},null,8,["rating"]),_(" "+p(Math.round(s.item.rating))+" из 5 ",1)])]),t("ul",ibe,[t("li",nbe,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[5]||(o[5]=i=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Описание",2)]),t("li",lbe,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[6]||(o[6]=i=>e.loadReviews(0)),href:"javascript:void(0)"},"Отзывы",2)])]),e.tab===0?(l(),a("div",abe,[t("p",rbe,p(s.item.description||"-"),1)])):u("",!0),e.tab===1?(l(),a("div",dbe,[e.reviews.length>0?(l(),a("div",cbe,[t("ul",ube,[(l(!0),a(v,null,O(e.reviews,(i,r)=>(l(),a("li",mbe,[T(ro,{"need-product":!1,modelValue:e.reviews[r],"onUpdate:modelValue":d=>e.reviews[r]=d},null,8,["modelValue","onUpdate:modelValue"])]))),256))]),e.paginate?(l(),M(n,{key:0,simple:!0,onPagination_page:e.nextReviews,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),e.reviews.length===0&&e.loading_reviews?(l(),a("div",hbe,_be)):u("",!0),e.reviews.length===0&&!e.loading_reviews?(l(),a("div",fbe," У данного товара еще нет отзывов! Для того чтобы оставить отзыв Вам необходимо заказать данный товар, после чего у вас появится возможность написать ваше впечатление от него;) ")):u("",!0)])):u("",!0)]),s.item.in_stop_list_at?(l(),a("div",Fbe,Pbe)):(l(),a("div",bbe,[t("div",gbe,[e.inCart(s.item.id)===0?(l(),a("button",{key:0,type:"button",onClick:o[7]||(o[7]=(...i)=>e.incProductCart&&e.incProductCart(...i)),class:"btn btn-md btn-primary w-100 rounded-3 p-2"},[_(p(s.item.current_price||0)+"₽ ",1),s.item.old_price>0?(l(),a("span",ybe,p(s.item.old_price||0)+"₽",1)):u("",!0)])):u("",!0),e.inCart(s.item.id)>0?(l(),a("div",vbe,[t("button",{type:"button",disabled:s.item.in_stop_list_at!=null,onClick:o[8]||(o[8]=(...i)=>e.decProductCart&&e.decProductCart(...i)),class:"btn btn-md btn-primary p-2"},"- ",8,$be),t("button",kbe,p(e.checkInCart),1),t("button",{type:"button",disabled:s.item.in_stop_list_at!=null,onClick:o[9]||(o[9]=(...i)=>e.incProductCart&&e.incProductCart(...i)),class:"btn btn-md btn-primary p-2"},"+ ",8,wbe)])):u("",!0)])]))])])],8,Nfe)],64)}}});({...G(["getCategories","getCategoriesPaginateObject"])});const jbe={key:0,class:"card-img-top",alt:""},Obe={class:"card-title my-3 fw-bold"},Tbe={class:"card-text"},Ube={class:"card-text fw-bold text-center p-3 border-primary border text-primary"},Ibe={style:{"text-decoration":"line-through"}},Vbe={key:2,class:"w-100 d-block text-center"},Mbe=["id"],Abe={key:0,class:"alert alert-light mb-2"},Ebe={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 g-2"},Dbe={class:"col"},zbe={key:0,class:"col"},Bbe=["onClick"],Lbe={class:"img-container"},Rbe={class:"rounded-3"},Nbe=t("div",{class:"card-body px-0"},[t("p",{class:"text-center mb-2",style:{"font-size":"12px"}},"Данная категория не интересует"),t("div",{class:"d-flex justify-content-between align-items-center px-2"},[t("button",{type:"button",style:{"font-size":"12px"},class:"btn btn-md w-100 rounded-2 mb-2 btn-outline-light text-black"}," Выбрать ")])],-1),qbe={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},Wbe={class:"d-flex w-100 flex-column"},Ybe=["disabled"],Hbe={style:{"text-decoration":"line-through"}},Qbe={key:2,class:"badge bg-success ml-2"},Gbe={props:["item"],data(){return{product:null,sending:!1,is_online:!0}},computed:{...G(["inCollectionCart","cartCollections"]),canProductAction(){return this.is_online&&!this.sending},uuid(){return Bt()},checkInCart(){return this.inCollectionCart(this.item.id,null)},bot(){return window.currentBot},discountPrice(){return Math.round(this.summaryPrice*(1-(this.product.discount===0?1:this.product.discount)/100))},summaryPrice(){let s=0;return this.product.products.forEach(e=>{e.is_checked&&(s+=e.current_price||0)}),s},preparedProducts(){let s=[],e=!1;return this.product.products.forEach(o=>{if((o.categories||[]).length>0){let n=s.findIndex(i=>i.title==o.categories[0].title);n===-1?s.push({id:o.categories[0].id,title:o.categories[0].title,products:[o]}):s[n].products.push(o),e=!0}}),e||(s.push({id:this.uuid,title:"Без категории",products:[]}),this.product.products.forEach(o=>{s[0].products.push(o)})),s.forEach(o=>{let n=0;o.products.forEach(i=>{let r=this.product.config?this.product.config:{choose_all_in_category:!1};i.is_checked=r.choose_all_in_category?!0:n===0,n++})}),s}},mounted(){this.$nextTick(()=>{this.product=this.item}),window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1})},methods:{incCollectionCart(){this.checkInCart===0?this.addCollectionToCart():this.$store.dispatch("incQuantity",this.product.id),this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})},addCollectionToCart(){this.sending=!0,this.$store.dispatch("addCollectionToCart",this.product).then(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Ошибка добавления товара",type:"error"})})},cancelCategory(s){let e=s.id;this.product.products.forEach(o=>{o.categories[0].id===e&&(o.is_checked=!1,this.$store.dispatch("removeProduct",o.id))}),this.$notify({title:"Подборки товара",text:"Вы успешно исключили категорию товара из подборки",type:"success"})},selectSubProduct(s){let e=this.product.products.findIndex(n=>n.id===s.id),o=s.categories[0].id;this.product.products.forEach(n=>{n.categories[0].id===o&&(n.is_checked=!1)}),this.product.products[e].is_checked=!0}}},zr=Object.assign(Gbe,{__name:"ProductCollectionView",setup(s){return(e,o)=>{const n=ie("lazy");return e.product?(l(),a(v,{key:0},[s.item.image?f((l(),a("img",jbe,null,512)),[[n,"/images-by-company-id/"+e.bot.company.id+"/"+e.product.image]]):u("",!0),t("h5",Obe,p(e.product.title||"-"),1),t("p",Tbe,p(e.product.description||"-"),1),t("p",Ube,[e.product.discount>0?(l(),a(v,{key:0},[_(p(e.discountPrice)+"₽ ",1),t("span",Ibe,p(e.summaryPrice)+"₽",1)],64)):(l(),a(v,{key:1},[_(p(e.summaryPrice)+"₽ ",1)],64)),e.product.products.length>0?(l(),a("small",Vbe,"За "+p(e.product.products.length)+" товаров",1)):u("",!0)]),e.preparedProducts.length>0?(l(!0),a(v,{key:1},O(e.preparedProducts,i=>(l(),a(v,null,[t("h5",{class:"my-4 divider",id:"collection-cat-"+i.id},p(i.title||"-"),9,Mbe),i.products.length>1?(l(),a("p",Abe," В данной категории вы можете выбрать из доступных вариантов ")):u("",!0),t("div",Ebe,[(l(!0),a(v,null,O(i.products,(r,d)=>(l(),a("div",Dbe,[T(Xi,{"can-select":!(r.config||{choose_all_in_category:!1}).choose_all_in_category,"collection-selected":r.is_checked,"collection-mode":!0,item:r,onSelectInCollection:e.selectSubProduct},null,8,["can-select","collection-selected","item","onSelectInCollection"])]))),256)),(e.product.config||{can_skip_categories:!1}).can_skip_categories?(l(),a("div",zbe,[t("div",{onClick:r=>e.cancelCategory(i),class:"card border-0 product-card"},[t("div",Lbe,[f(t("img",Rbe,null,512),[[n,"/images/default-product-image.jpg"]])]),Nbe],8,Bbe)])):u("",!0)])],64))),256)):u("",!0),t("nav",qbe,[t("div",Wbe,[t("button",{type:"button",disabled:e.summaryPrice===0||s.item.in_stop_list_at!=null||!e.canProductAction,class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary w-100 rounded-3 p-3"]),onClick:o[0]||(o[0]=(...i)=>e.addCollectionToCart&&e.addCollectionToCart(...i))},[_(" Добавить "),e.product.discount>0?(l(),a(v,{key:0},[_(p(e.discountPrice)+"₽ ",1),t("span",Hbe,p(e.summaryPrice)+"₽",1)],64)):(l(),a(v,{key:1},[_(p(e.summaryPrice)+"₽ ",1)],64)),e.cartCollections.length>0?(l(),a("span",Qbe,p(e.cartCollections.length),1)):u("",!0)],10,Ybe)])])],64)):u("",!0)}}});const Kbe={key:0,class:"card border-0 mb-3"},Jbe={class:"card-body p-0"},Xbe={class:"d-flex"},Zbe={class:"mr-auto",style:{"max-height":"100px"}},ege={class:"rounded-2",width:"110",style:{"object-fit":"cover",height:"100%"},alt:""},tge={class:"w-100 px-2 d-flex flex-column justify-content-between"},sge={class:"pb-0 mb-0 fw-bold",style:{"font-size":"14px"}},oge={class:"fw-bold"},ige={class:"fst-italic mb-2",style:{"font-size":"10px"}},nge={key:0,class:"fst-italic mb-0 text-danger fw-bold",style:{"font-size":"10px"}},lge={class:"py-2 mb-0 d-flex justify-content-between",style:{"font-size":"12px"}},age={class:"d-flex w-100"},rge=["disabled"],dge=t("sup",{class:"font-10 opacity-50"},".00",-1),cge={key:1,class:"btn-group w-100"},uge=["disabled"],mge=["disabled"],hge={props:["item","params"],data(){return{sending:!1,is_online:!0}},computed:{...G(["inCollectionCart"]),canProductAction(){return this.is_online&&!this.sending},checkInCart(){var s;return this.inCollectionCart(this.item.id,((s=this.params)==null?void 0:s.variant_id)||null)},description(){let s="",e=this.params.ids||[];return this.item.products.forEach(o=>{s+=e.indexOf(o.id)!==-1?o.title+", ":""}),s},currentPrice(){let s=0,e=this.params.ids||[];return this.item.products.forEach(o=>{s+=e.indexOf(o.id)!==-1&&o.current_price||0}),s},oldPrice(){return 0},bot(){return window.currentBot}},mounted(){window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1})},methods:{incProductCart(){this.sending=!0,(this.checkInCart===0?this.$store.dispatch("addCollectionToCart",this.item):this.$store.dispatch("incCollectionQuantity",{product_collection_id:this.item.id,variant_id:this.params.variant_id})).then(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Ошибка добавления товара!",type:"error"})})},decProductCart(){this.sending=!0,(this.checkInCart<=1?this.$store.dispatch("removeCollectionFromCart",{product_collection_id:this.item.id,variant_id:this.params.variant_id}):this.$store.dispatch("decCollectionQuantity",{product_collection_id:this.item.id,variant_id:this.params.variant_id})).then(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Товар успешно удален",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Ошибка удаления товара!",type:"error"})})}}},Br=Object.assign(hge,{__name:"CollectionCardSimple",setup(s){return(e,o)=>{const n=ie("lazy");return s.item?(l(),a("div",Kbe,[t("div",Jbe,[t("div",Xbe,[t("div",Zbe,[f(t("img",ege,null,512),[[n,"/images-by-company-id/"+e.bot.company.id+"/"+s.item.image]])]),t("div",tge,[t("h6",sge,[_(p(s.item.title||"не указано")+" ",1),t("small",oge," ("+p((s.item.products||[]).length)+" ед.)",1)]),jt(e.$slots,"partner"),t("p",ige,p(e.description),1),s.item.discount>0?(l(),a("p",nge,"Скидка "+p(s.item.discount)+"%",1)):u("",!0),t("h6",lge,[t("span",null,p(e.currentPrice||0)+"₽",1),t("span",null,"="+p(e.currentPrice*e.checkInCart)+"₽",1)]),t("div",age,[e.checkInCart===0?(l(),a("button",{key:0,type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary w-100 rounded-3"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[0]||(o[0]=(...i)=>e.incProductCart&&e.incProductCart(...i))},[_(p(e.currentPrice||0),1),dge,_("₽ ")],10,rge)):u("",!0),e.checkInCart>0?(l(),a("div",cge,[t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[1]||(o[1]=(...i)=>e.decProductCart&&e.decProductCart(...i))},"- ",10,uge),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm"])},p(e.checkInCart),3),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-sm btn-primary"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[2]||(o[2]=(...i)=>e.incProductCart&&e.incProductCart(...i))},"+ ",10,mge)])):u("",!0)])])])])])):u("",!0)}}});const pge={class:"card border-0 product-card"},_ge={key:0,class:"rounded-3",alt:""},fge={class:"controls"},bge={class:"top d-flex justify-content-end w-100 align-items-center"},gge={class:"product-count w-100 p-2"},yge={class:"text-white fw-bold"},vge=t("i",{class:"fa-solid fa-layer-group mr-1"},null,-1),$ge={key:0,class:"badge bg-primary mr-2 fw-bold"},kge={class:"card-body px-0"},wge={class:"text-center mb-2",style:{"font-size":"12px"}},Fge={key:0},Cge={class:"d-flex justify-content-between align-items-center px-2"},Pge=["disabled"],Sge={style:{"text-decoration":"line-through"}},xge={class:"badge bg-primary"},jge=["id"],Oge={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},Tge={class:"modal-content"},Uge=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Варианты в корзине"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ige={class:"modal-body"},Vge={key:0,class:"row"},Mge={class:"col-12"},Age={key:1,class:"alert alert-light"},Ege=["id"],Dge={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen"},zge={class:"modal-content"},Bge=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Подборка"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Lge={class:"modal-body mb-5 pb-5"},Rge={props:["item"],data(){return{tab:0,selected_image:null,loading_reviews:!1,reviews:[],paginate:null,sending:!1,is_online:!0}},computed:{...G(["inCollectionCart","cartCollections"]),uuid(){return Bt()},discountPrice(){return Math.round(this.currentPrice*(1-(this.item.discount===0?1:this.item.discount)/100))},bot(){return window.currentBot},checkInCart(){return this.inCollectionCart(this.item.id,null)},currentPrice(){let s=0;return this.item.products.forEach(e=>{e.is_checked&&(s+=e.current_price||0)}),s},canProductAction(){return this.is_online&&!this.sending}},mounted(){this.selected_image=(this.item.images||[]).length>0?this.item.images[0]:null,window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1})},methods:{openVariantList(){new bootstrap.Modal(document.getElementById("collection-variant-modal-"+this.item.id),{}).show()},showCollectionDetails(){new bootstrap.Modal(document.getElementById("collection-modal-info"+this.item.id),{}).show()},incCollectionCart(){this.item.current_price=this.discountPrice,this.sending=!0,(this.checkInCart===0?this.$store.dispatch("addCollectionToCart",this.item):this.$store.dispatch("incQuantity",this.item.id)).then(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Добавление товара",text:"Ошибка добавления товара!",type:"error"})})},decCollectionCart(){this.sending=!0,(this.checkInCart<=1?this.$store.dispatch("removeCollectionFromCart",this.item.id):this.$store.dispatch("decQuantity",this.item.id)).then(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Товар успешно удален",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Удаление товара",text:"Ошибка удаления товара!",type:"error"})})}}},Nge=Object.assign(Rge,{__name:"CollectionCard",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[t("div",pge,[t("div",{onClick:o[0]||(o[0]=(...i)=>e.showCollectionDetails&&e.showCollectionDetails(...i)),class:"img-container"},[s.item.image?f((l(),a("img",_ge,null,512)),[[n,"/images-by-company-id/"+e.bot.company.id+"/"+s.item.image]]):u("",!0),t("div",fge,[t("div",bge,[t("div",gge,[t("span",yge,[vge,_(" "+p((s.item.products||[]).length),1)])]),s.item.discount>0?(l(),a("span",$ge,"%")):u("",!0)])])]),t("div",kge,[t("p",wge,[_(p(s.item.title.slice(0,50))+" ",1),s.item.title.length>50?(l(),a("span",Fge,"...")):u("",!0)]),t("div",Cge,[e.checkInCart===0?(l(),a("button",{key:0,type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-md btn-light w-100 rounded-3"]),disabled:s.item.in_stop_list_at!=null||!e.canProductAction,onClick:o[1]||(o[1]=(...i)=>e.incCollectionCart&&e.incCollectionCart(...i)),style:{"font-size":"12px"}},[s.item.discount>0?(l(),a(v,{key:0},[_(p(e.discountPrice)+"₽ ",1),t("span",Sge,p(e.currentPrice)+"₽",1)],64)):(l(),a(v,{key:1},[_(p(e.currentPrice)+"₽ ",1)],64))],10,Pge)):(l(),a("button",{key:1,type:"button",onClick:o[2]||(o[2]=(...i)=>e.openVariantList&&e.openVariantList(...i)),class:C([{"btn-secondary":!e.canProductAction},"btn btn-md btn-success w-100 rounded-3"]),style:{"font-size":"12px"}},[_(" Все варианты "),t("span",xge,p(e.cartCollections.length),1)],2))])])]),t("div",{class:"modal fade",id:"collection-variant-modal-"+s.item.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",Oge,[t("div",Tge,[Uge,t("div",Ige,[e.cartCollections.length>0?(l(),a("div",Vge,[(l(!0),a(v,null,O(e.cartCollections,(i,r)=>(l(),a("div",Mge,[T(Br,{params:i.params,item:i.collection},null,8,["params","item"])]))),256))])):(l(),a("p",Age," Ни одной коллекции не было добавлено в корзину! "))])])])],8,jge),t("div",{class:"modal fade",id:"collection-modal-info"+s.item.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",Dge,[t("div",zge,[Bge,t("div",Lge,[s.item?(l(),M(zr,{key:0,item:s.item},null,8,["item"])):u("",!0)])])])],8,Ege)],64)}}});const qge={},Wge={style:{"min-height":"100vh"},class:"d-flex justify-content-center align-items-center flex-column",role:"alert"},Yge=ze('<div class="loader-new"><div class="bar1"></div><div class="bar2"></div><div class="bar3"></div><div class="bar4"></div><div class="bar5"></div><div class="bar6"></div></div><p class="fw-bold text-primary" style="margin-top:50px;">Загружаем...</p>',2),Hge=[Yge];function Qge(s,e,o,n,i,r){return l(),a("div",Wge,Hge)}const Ns=oe(qge,[["render",Qge]]);const Gge={data(){return{search:null,need_search:!1,category_modal:null}},props:{settings:Object,categories:Array,collections:Array},computed:{colorTheme(){return"background-color:"+(document.querySelector("[data-bs-theme]").getAttribute("data-bs-theme")==="light"?"white":"#212529")}},watch:{need_search:{handler:function(s){this.need_search||(this.search=null,this.findProducts())},deep:!0}},mounted(){this.category_modal=new bootstrap.Modal(document.getElementById("category-list-2-modal"),{backdrop:!1})},methods:{openCategoryModal(){this.category_modal.show()},findProducts(){this.$emit("search",this.search),this.category_modal.hide()},selectCategory(s){this.$emit("select",s),this.category_modal.hide();let e;s?s.id==="combo"?e="combo-menu":e=`category-${s.id}`:e="all-categories";const o=document.getElementById(e);o&&o.scrollIntoView({behavior:"auto",block:"start"})}}},ii=s=>(Ge("data-v-daf0c2d9"),s=s(),Ke(),s),Kge={key:0,class:"container p-2"},Jge=ii(()=>t("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),Xge=[Jge],Zge={class:"d-flex overflow-auto category-slider gap-2 align-items-start"},e1e={style:{"margin-left":"10px"},class:"badge bg-dark"},t1e=["onClick"],s1e={style:{"margin-left":"10px"},class:"badge bg-primary"},o1e={class:"modal fade",id:"category-list-2-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i1e={class:"modal-dialog modal-fullscreen"},n1e={class:"modal-content"},l1e=ii(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Категории"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),a1e={class:"modal-body"},r1e={class:"row mb-2"},d1e={class:"col"},c1e={class:"input-group"},u1e={class:"form-floating"},m1e=ii(()=>t("label",{for:"searchInput"},"Поиск по товарам",-1)),h1e=ii(()=>t("i",{class:"fa-solid fa-magnifying-glass"},null,-1)),p1e=[h1e],_1e={class:"row row-cols-1"},f1e=ii(()=>t("div",{class:"col"},null,-1)),b1e={class:"col mb-2"},g1e=["onClick"],y1e={class:"badge bg-primary d-flex justify-content-center align-items-center"};function v1e(s,e,o,n,i,r){return l(),a(v,null,[o.settings?(l(),a("div",Kge,[o.categories.length>0||o.collections.length>0?(l(),a("div",{key:0,style:dt(r.colorTheme),class:"container-slider-wrapper p-2 d-flex align-items-start"},[t("button",{style:{"margin-right":"10px"},type:"button",class:"btn btn-primary flex-shrink-0 mr-2",onClick:e[0]||(e[0]=(...d)=>r.openCategoryModal&&r.openCategoryModal(...d))},Xge),t("div",Zge,[o.collections.length>0?(l(),a("button",{key:0,type:"button",class:"btn btn-outline-warning flex-shrink-0 d-flex align-items-center",onClick:e[1]||(e[1]=d=>r.selectCategory({id:"combo"}))},[_(" Комбо-меню "),t("span",e1e,p(o.collections.length),1)])):u("",!0),(l(!0),a(v,null,O(o.categories,d=>(l(),a("button",{type:"button",key:d.id,class:"btn btn-outline-secondary flex-shrink-0 d-flex align-items-center",onClick:c=>r.selectCategory(d)},[_(p(d.title||"Не указано")+" ",1),t("span",s1e,p(d.products_count||0),1)],8,t1e))),128))])],4)):u("",!0),jt(s.$slots,"back-btn",{},void 0,!0)])):u("",!0),t("div",o1e,[t("div",i1e,[t("div",n1e,[l1e,t("div",a1e,[t("div",r1e,[t("div",d1e,[t("div",c1e,[t("div",u1e,[f(t("input",{type:"search","onUpdate:modelValue":e[2]||(e[2]=d=>i.search=d),class:"form-control",id:"searchInput",placeholder:"Поиск по товарам"},null,512),[[k,i.search]]),m1e]),t("button",{class:"btn btn-primary",type:"button",onClick:e[3]||(e[3]=(...d)=>r.findProducts&&r.findProducts(...d))},p1e)])])]),t("div",_1e,[f1e,(l(!0),a(v,null,O(o.categories,d=>(l(),a("div",b1e,[(l(),a("button",{type:"button",key:d.id,class:"btn py-3 btn-outline-secondary flex-shrink-0 w-100 d-flex justify-content-between",onClick:c=>r.selectCategory(d)},[_(p(d.title||"Не указано")+" ",1),t("span",y1e,p(d.products_count||0),1)],8,g1e))]))),256))])])])])])],64)}const $1e=oe(Gge,[["render",v1e],["__scopeId","data-v-daf0c2d9"]]);const k1e={props:["partner"],data(){return{}},computed:{bot(){return window.currentBot||null}},mounted(){console.log(this.partner)}},w1e={class:"row g-0"},F1e={class:"col-md-4"},C1e={class:"img-fluid rounded-start img-partner-card",alt:"..."},P1e={class:"col-md-8"},S1e={class:"card-body"},x1e={class:"my-2 fw-bold"},j1e={key:0,class:"fst-italic mb-2"},O1e={key:1,class:"card-text",style:{"line-height":"100%"}},T1e={class:"text-primary",style:{"font-size":"10px",margin:"3px"}};function U1e(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",{class:"card mb-2 border-light",onClick:e[0]||(e[0]=c=>s.$emit("select",o.partner))},[t("div",w1e,[t("div",F1e,[f(t("img",C1e,null,512),[[d,"/images-by-bot-id/"+r.bot.id+"/"+o.partner.image]])]),t("div",P1e,[t("div",S1e,[t("h5",x1e,p(o.partner.title),1),o.partner.description?(l(),a("p",j1e,p(o.partner.description||""),1)):u("",!0),o.partner.categories?(l(),a("p",O1e,[(l(!0),a(v,null,O(o.partner.categories,c=>(l(),a("span",T1e,"#"+p(c.title)+", ",1))),256))])):u("",!0)])])])])}const Gl=oe(k1e,[["render",U1e],["__scopeId","data-v-83acc772"]]);const I1e={name:"StoryItem",props:{story:{type:Object,required:!0},isViewed:{type:Boolean,default:!1}}},V1e=["src","alt"];function M1e(s,e,o,n,i,r){return l(),a("div",{class:C(["story-item flex-shrink-0 rounded-circle overflow-hidden cursor-pointer border",{"border-primary":!o.isViewed,"border-secondary":o.isViewed}]),style:{width:"80px",height:"80px"},onClick:e[0]||(e[0]=d=>s.$emit("open-story"))},[t("img",{src:o.story.thumbnail,class:C(["w-100 h-100 object-fit-cover",{"filter-grayscale":o.isViewed}]),alt:o.story.title},null,10,V1e)],2)}const A1e=oe(I1e,[["render",M1e],["__scopeId","data-v-ee760bbe"]]);const E1e={name:"StoryList",components:{StoryItem:A1e},props:{stories:{type:Array,required:!0}},data(){return{currentStory:null,progress:0,timer:null,viewedStories:JSON.parse(localStorage.getItem("viewedStories"))||[]}},computed:{sortedStories(){return[...this.stories].sort((s,e)=>{const o=this.viewedStories.includes(s.id),n=this.viewedStories.includes(e.id);return o&&!n?1:!o&&n?-1:0})}},methods:{goToProductLink(s){try{const o=new URL(s).searchParams.get("start"),i=atob(o).match(/^001slug(\d+)product(\d+)$/);i||this.$router.push({name:"CatalogV2"});const r=i[2];this.$router.push({name:"ProductV2",params:{productId:r}})}catch{this.$router.push({name:"CatalogV2"})}},openStory(s){this.currentStory=s,this.progress=0,this.startTimer(),this.markAsViewed(this.sortedStories[s].id)},closeStory(){this.currentStory=null,this.progress=0,clearInterval(this.timer)},startTimer(){clearInterval(this.timer),this.timer=setInterval(()=>{this.progress+=2,this.progress>=100&&this.nextStory()},100)},nextStory(){this.currentStory<this.sortedStories.length-1?(this.currentStory++,this.progress=0,this.markAsViewed(this.sortedStories[this.currentStory].id),this.startTimer()):this.closeStory()},markAsViewed(s){this.viewedStories.includes(s)||(this.viewedStories.push(s),localStorage.setItem("viewedStories",JSON.stringify(this.viewedStories)))},isStoryViewed(s){return this.viewedStories.includes(s)}}},D1e={class:"story-list-container d-flex overflow-auto p-3"},z1e={class:"modal-dialog modal-dialog-centered w-100 mw-100 m-0 h-100 mh-100"},B1e={class:"modal-content bg-transparent border-0 h-100 position-relative"},L1e={class:"progress position-absolute top-0 start-0 end-0",style:{height:"4px","z-index":"10"}},R1e=["src"],N1e={class:"text-white p-3 bg-black bg-opacity-50 position-absolute bottom-0 start-0 end-0"},q1e={class:"mb-1"},W1e={class:"mb-0"},Y1e=["href"];function H1e(s,e,o,n,i,r){const d=Qe("StoryItem");return l(),a(v,null,[t("div",D1e,[(l(!0),a(v,null,O(r.sortedStories,(c,h)=>(l(),M(d,{key:c.id,story:c,"is-viewed":r.isStoryViewed(c.id),onOpenStory:g=>r.openStory(h)},null,8,["story","is-viewed","onOpenStory"]))),128))]),i.currentStory!==null?(l(),a("div",{key:0,class:"modal fade show d-block",style:{"background-color":"rgba(0, 0, 0, 0.9)"},onClick:e[2]||(e[2]=W((...c)=>r.closeStory&&r.closeStory(...c),["self"]))},[t("div",z1e,[t("div",B1e,[t("div",L1e,[t("div",{class:"progress-bar bg-primary",role:"progressbar",style:dt({width:`${i.progress}%`})},null,4)]),t("img",{src:r.sortedStories[i.currentStory].image,class:"w-100 h-100 object-fit-cover",alt:"Story"},null,8,R1e),t("div",N1e,[t("h5",q1e,p(r.sortedStories[i.currentStory].title),1),t("p",W1e,p(r.sortedStories[i.currentStory].description),1),r.sortedStories[i.currentStory].link?(l(),a(v,{key:0},[r.sortedStories[i.currentStory].link_type==="url"||r.sortedStories[i.currentStory].link_type==="bot"?(l(),a("a",{key:0,href:r.sortedStories[i.currentStory].link,target:"_blank",class:"btn btn-primary rounded-5 w-100 p-3"}," Перейти по ссылке ",8,Y1e)):u("",!0),r.sortedStories[i.currentStory].link_type==="product"?(l(),a("a",{key:1,href:"javascript:void(0)",onClick:e[0]||(e[0]=c=>r.goToProductLink(r.sortedStories[i.currentStory].link)),class:"btn btn-primary rounded-5 w-100 p-3"}," Открыть товар ")):u("",!0)],64)):u("",!0)]),t("button",{type:"button",class:"btn-close btn-close-white position-absolute top-0 end-0 m-2",style:{"z-index":"10"},onClick:e[1]||(e[1]=(...c)=>r.closeStory&&r.closeStory(...c))})])])])):u("",!0)],64)}const Lr=oe(E1e,[["render",H1e],["__scopeId","data-v-2e3941ad"]]);const Q1e={key:0,class:"row my-3 row-cols-1 g-1"},G1e={key:0,class:"col"},K1e={class:"col"},J1e={key:1,class:"alert alert-light"},X1e={name:"PartnerList",data(){return{}},computed:{bot(){return window.currentBot||null},settings(){return this.bot.settings},partnerList(){return this.bot.partners||[]}},mounted(){},methods:{selectPartner(s){this.$emit("select",s)}}},Z1e=Object.assign(X1e,{setup(s){return(e,o)=>{var n;return(e.partnerList||[]).length>0?(l(),a("div",Q1e,[(n=e.settings.partners)!=null&&n.display_self?(l(),a("div",G1e,[(l(),M(Gl,{partner:e.settings.partners,onSelect:e.selectPartner,key:"partner-0"},null,8,["partner","onSelect"]))])):u("",!0),(l(!0),a(v,null,O(e.partnerList,(i,r)=>(l(),a("div",K1e,[(l(),M(Gl,{partner:i,onSelect:e.selectPartner,key:"partner-"+r},null,8,["partner","onSelect"]))]))),256))])):(l(),a("p",J1e," У вас нет добавленных партнеров "))}}}),eye=oe(Z1e,[["__scopeId","data-v-daaa62ee"]]),tye={class:"container"},sye={methods:{selectPartner(s){this.$emit("select",s)}}},oye=Object.assign(sye,{__name:"PartnersMain",setup(s){return(e,o)=>(l(),a("div",tye,[T(eye,{onSelect:e.selectPartner},null,8,["onSelect"])]))}}),iye={data(){return{selectedTable:null,my_bookings:[]}},mounted(){this.myUpcomingBookings()},methods:{selectATable(s){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=s,localStorage.setItem("cashman_current_active_table",JSON.stringify(s)),this.$emit("select",this.selectedTable)})},myUpcomingBookings(){return this.$store.dispatch("myUpcomingBookings").then(s=>{this.my_bookings=s.data||[];let e=localStorage.getItem("cashman_current_active_table")||null;e&&(e=JSON.parse(e)),this.selectedTable=this.my_bookings.find(o=>o.id===(e==null?void 0:e.id))||null})},openRemoveModal(s){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=s;const e=document.getElementById("remove-booking-modal");new bootstrap.Modal(e).show()})},cancelBookingTable(){if(this.selectedTable)return this.$store.dispatch("cancelBookingTable",{bookingId:this.selectedTable.id}).then(s=>{this.$notify({title:"Бронирование",text:"Бронь столика успешно убрана!",type:"success"}),localStorage.removeItem("cashman_current_active_table"),this.myUpcomingBookings();const e=document.getElementById("remove-booking-modal");bootstrap.Modal.getInstance(e).hide().hide()})}}},nye={key:0,class:"p-3"},lye={class:"dropdown my-2"},aye={class:"btn btn-success dropdown-toggle w-100 p-3",type:"button",id:"bookingsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},rye={key:0},dye={key:1},cye={class:"dropdown-menu w-100","aria-labelledby":"bookingsDropdown"},uye=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),mye=["onClick"],hye={class:"fw-bold"},pye={class:"text-muted"},_ye={class:"fst-italic mb-1"},fye={class:"d-flex justify-content-between align-items-center"},bye=["onClick"],gye={class:"badge bg-primary rounded-pill"},yye={class:"modal fade",id:"remove-booking-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},vye={class:"modal-dialog modal-dialog-centered"},$ye={class:"modal-content"},kye=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Удаление брони"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),wye={class:"modal-body"},Fye={class:"mb-2"},Cye={class:"fw-bold text-primary"},Pye={class:"fw-bold text-primary"},Sye={class:"w-100 d-flex justify-content-center"},xye=t("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary",type:"button"},"Нет, отменить ",-1);function jye(s,e,o,n,i,r){return l(),a(v,null,[i.my_bookings.length>0?(l(),a("div",nye,[t("div",lye,[t("button",aye,[i.selectedTable?(l(),a("span",rye,"Выбран столик #"+p(i.selectedTable.number),1)):(l(),a("span",dye,"Мои брони ("+p(i.my_bookings.length)+")",1))]),t("ul",cye,[t("li",{onClick:e[0]||(e[0]=d=>r.selectATable(null)),class:"dropdown-item"}," Не выбран "),uye,(l(!0),a(v,null,O(i.my_bookings,d=>{var c,h;return l(),a("li",{onClick:g=>r.selectATable(d),key:d.id,class:"dropdown-item"},[t("div",hye," Бронь столика №"+p(d.number),1),t("small",pye," Дата "+p(d.booked_date_at)+" в "+p(d.booked_time_at),1),t("p",_ye,p(((c=d.booked_info)==null?void 0:c.description)||"-"),1),t("div",fye,[t("button",{onClick:g=>r.openRemoveModal(d),type:"button",class:"btn btn-sm btn-danger"}," Отменить ",8,bye),t("span",gye,p(((h=d.booked_info)==null?void 0:h.persons)||1)+" чел. ",1)])],8,mye)}),128))])])])):u("",!0),t("div",yye,[t("div",vye,[t("div",$ye,[kye,t("div",wye,[i.selectedTable?(l(),a(v,{key:0},[t("p",Fye,[_("Вы точно хотите удалить бронь на "),t("strong",Cye,p(i.selectedTable.booked_date_at||"-"),1),_(" для столика "),t("strong",Pye,p(i.selectedTable.number||"-"),1),_("?")]),t("div",Sye,[t("button",{onClick:e[1]||(e[1]=(...d)=>r.cancelBookingTable&&r.cancelBookingTable(...d)),style:{"margin-right":"10px"},class:"btn btn-danger",type:"button"},"Да, удалить "),xye])],64)):u("",!0)])])])])],64)}const Rr=oe(iye,[["render",jye]]);const Oye={id:"category-slider",class:"d-block w-100 p-0 m-0 sticky-menu"},Tye=t("i",{class:"fa-solid fa-arrow-left me-2"},null,-1),Uye={class:"d-flex flex-column"},Iye={key:0,class:"p-2"},Vye={class:"alert alert-danger mb-0"},Mye=["innerHTML"],Aye={class:"album",style:{"min-height":"100vh"}},Eye={key:0,class:"container g-2"},Dye={key:0,class:"list-group"},zye={class:"badge text-bg-primary"},Bye=["onClick"],Lye={class:"badge text-bg-primary"},Rye={key:1,style:{"min-height":"100vh"},class:"album"},Nye={class:"container g-2"},qye=t("h5",{class:"my-4 divider",id:"cat-combo"},"Комбо меню",-1),Wye={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 g-2"},Yye={class:"col"},Hye={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},Qye={class:"col"},Gye=t("h5",{class:"my-4 divider",id:"cat-combo"},"Наши новинки",-1),Kye=["id"],Jye={key:0,class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 g-2"},Xye={class:"col"},Zye={key:0,class:"col-12"},eve=["onClick"],tve={key:0},sve={key:1,class:"d-inline-flex align-items-center"},ove=t("span",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),ive={class:"list-group list-group-numbered"},nve=["onClick"],lve={key:0},ave={key:1,class:"d-inline-flex align-items-center"},rve=t("span",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),dve={class:"container"},cve={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},uve={class:"col"},mve={data(){return{selected_partner:null,extra_charge:0,shop:0,stories:[],tab:1,load_content:!1,load_collection:!1,product_type_display:1,spent_time_counter:0,is_requested:!1,isCollapsed:!0,search:null,products:[],collections:[],collections_paginate:[],products_with_categories:[],paginate:null,categories:[],sending:!1,min_price:null,max_price:null,moneyVariants:[500,1e3,2e3,5e3],deliveryForm:{name:null,phone:null,address:null,city:null,street:null,building:null,flat_number:null,entrance_number:null,floor_number:null,info:null,need_pickup:!1,has_disability:!1,use_cashback:!1,disabilities:[],money:null,cash:!0,persons:1,time:null,when_ready:!0}}},computed:{...G(["inCart","inCollectionCart","getStories","getCollections","getCollectionsPaginateObject","getProducts","getCategories","getProductsPaginateObject","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),uuid(){return Bt()},settings(){return this.bot.settings},partners(){var s;return(s=this.bot.settings)==null?void 0:s.partners},bot(){return window.currentBot},colorTheme(){return"background-color:"+(document.querySelector("[data-bs-theme]").getAttribute("data-bs-theme")==="light"?"white":"#212529")},getCurrentBot(){return window.currentBot},cashbackLimit(){let s=this.getSelf.cashBack?this.getSelf.cashBack.amount:0,e=this.cartTotalPrice||0,o=this.getCurrentBot.max_cashback_use_percent||0,n=e*(o/100);return Math.min(n,s)},filteredCategories(){if(!this.products||this.products.length===0)return[];const s=this.search instanceof Event||!this.search?"":this.search.toLowerCase();return this.products.map(e=>{const o=e.products.filter(n=>{var i;return((i=n.title)==null?void 0:i.toLowerCase().includes(s))&&(this.settings.need_hide_disabled_products?n.in_stop_list_at==null:!0)});return{...e,products:o}}).filter(e=>e.products.length>0)},filteredProducts(){return this.categories.length===0?this.products:this.products.filter(s=>s.categories.findIndex(e=>this.categories.indexOf(e.id)!==-1)!==-1)},tg(){return window.Telegram.WebApp},activeCategories(){let s=[];return this.filteredProducts.forEach(e=>{s.push(e.categories.map(o=>o.id))}),[...new Set(s.map(e=>e[0])),...new Set(s.map(e=>e[1]))]}},mounted(){var o;this.shop=(o=this.partners)!=null&&o.is_active?0:1;const s=document.getElementById("category-slider"),e=()=>{s&&(window.scrollY>50?(s.style.position="fixed",s.style.top="0",s.style.left="0",s.style.right="0",s.style.zIndex="1000"):(s.style.position="relative",s.style.top="",s.style.left="",s.style.right="",s.style.zIndex="",s.style.backgroundColor="",s.style.boxShadow=""))};window.addEventListener("scroll",e),this.loadStories(),this.loadProducts(),this.loadCollections(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(n=>n.click()),this.$router.push({name:"MenuV2"})})},methods:{selectPartner(s){this.selected_partner=null,this.extra_charge=0,this.products=[],this.collections=[],this.categories=[],this.$nextTick(()=>{this.selected_partner=s,this.extra_charge=s.extra_charge||0,this.loadProducts(0),this.loadCollections(0),this.shop=1}),this.$preloader.show()},doSwipeLeft(){this.$router.push({name:"MenuV2"})},doSwipeRight(){this.$router.push({name:"ShopCartV2"})},loadStories(){this.$store.dispatch("loadStories").then(s=>{this.stories=this.getStories||[]})},findProducts(s){this.search=s},scroll(s){var e=document.getElementById(s),o=70,n=(e==null?void 0:e.getBoundingClientRect().top)||70,i=n+window.pageYOffset-o;window.scroll({top:i,behavior:"smooth"})},openTab(s){this.tab=s,window.scroll(0,80)},closeModalOnSwipe(){return document.querySelectorAll(".modal.show").length>0?(document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>e.click()),!0):!1},decPersons(){this.deliveryForm.persons=this.deliveryForm.persons>1?this.deliveryForm.persons-1:this.deliveryForm.persons},incPersons(){this.deliveryForm.persons=this.deliveryForm.persons<100?this.deliveryForm.persons+1:this.deliveryForm.persons},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_self_product_delivery_counter",this.spent_time_counter)},1e3)},clearCart(){this.tab=1,this.$store.dispatch("clearCart").then(()=>{this.$notify({title:"Корзина",text:"Корзина успешно очищена!",type:"success"})})},selectCategory(s){this.tab=1,this.$nextTick(()=>{s?this.scroll("cat-"+s.id):window.scroll(0,80)})},nextProducts(s){this.loadProducts(s)},nextCollections(s){this.loadCollections(s)},loadCollections(s=0){var e;return this.load_content=!0,this.load_collection=!0,this.$store.dispatch("loadGlobalCollections",{partner_id:((e=this.selected_partner)==null?void 0:e.bot_partner_id)||null,page:s}).then(o=>{this.collections=this.getCollections,this.collections_paginate=this.getCollectionsPaginateObject,this.load_content=!1,this.load_collection=!1,window.scroll(0,80)}).catch(()=>{this.load_content=!1,this.load_collection=!1,this.$store.dispatch("clearCart").then(()=>{this.loadCollections()})})},loadMore(s,e){var o;return this.load_content=!0,this.$store.dispatch("loadMoreProductsByCategory",{partner_id:((o=this.selected_partner)==null?void 0:o.bot_partner_id)||null,category_id:s,offset:e}).then(n=>{let i=n.length||0;if(this.load_content=!1,i===0){this.products.find(r=>r.id===s).products_count=e;return}this.products.find(r=>r.id===s).products.push(...n)}).catch(()=>{this.load_content=!1})},loadProducts(s=0){var o;this.tab=1;let e=localStorage.getItem("cashman_preloaded_products_by_categories_"+this.getCurrentBot.bot_domain)!==null;return e&&(this.products=JSON.parse(localStorage.getItem("cashman_preloaded_products_by_categories_"+this.getCurrentBot.bot_domain))),this.load_content=!1,this.$store.dispatch("loadProductsByCategory",{partner_id:((o=this.selected_partner)==null?void 0:o.bot_partner_id)||null}).then(n=>{this.load_content=!0,this.$nextTick(()=>{this.products=n.data,localStorage.setItem("cashman_preloaded_products_by_categories_"+this.getCurrentBot.bot_domain,JSON.stringify(this.products)),this.load_content=!1,e||window.scroll(0,80)})}).catch(()=>{this.load_content=!1,this.$store.dispatch("clearCart").then(()=>{this.loadProducts()})})},startCheckout(){if(this.is_requested){this.$notify({title:"Упс!",text:"Сделать повторный заказ можно через ${this.spent_time_counter} сек.",type:"error"});return}localStorage.setItem("cashman_self_product_delivery_form_name",this.deliveryForm.name||""),localStorage.setItem("cashman_self_product_delivery_form_phone",this.deliveryForm.phone||""),localStorage.setItem("cashman_self_product_delivery_form_address",this.deliveryForm.address||""),localStorage.setItem("cashman_self_product_delivery_form_city",this.deliveryForm.city||""),localStorage.setItem("cashman_self_product_delivery_form_street",this.deliveryForm.street||""),localStorage.setItem("cashman_self_product_delivery_form_building",this.deliveryForm.building||""),localStorage.setItem("cashman_self_product_delivery_form_flat_number",this.deliveryForm.flat_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_number",this.deliveryForm.entrance_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_disabilities",JSON.stringify(this.deliveryForm.disabilities||[]));let s=new FormData;this.sending=!0,Object.keys(this.deliveryForm).forEach(e=>{const o=this.deliveryForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.type&&s.append("type",this.type),this.$store.dispatch("startCheckout",{deliveryForm:s}).then(e=>{this.deliveryForm={message:null,name:null,phone:null},this.$notify({title:"Доставка",text:"Дальнейшая инструкция отправлена вам в бот!",type:"success"}),this.tab=1,this.$store.dispatch("clearCart"),this.tg.close(),this.sending=!1}).catch(e=>{this.sending=!1}),this.startTimer(),this.is_requested=!0},removeCategory(s){this.categories.splice(s,1)},addToCart(s){this.$cart.add(s.product)}}},Zn=Object.assign(mve,{__name:"ShopProductCatalog",setup(s){return(e,o)=>{var i;const n=ie("touch");return l(),a(v,null,[e.shop==0?(l(),M(oye,{key:0,onSelect:e.selectPartner},null,8,["onSelect"])):u("",!0),e.shop==1?(l(),a(v,{key:1},[t("menu",Oye,[T($1e,{settings:e.settings,categories:e.filteredCategories,collections:e.collections,onSelect:e.selectCategory,onSearch:e.findProducts},{"back-btn":A(()=>{var r;return[(r=e.partners)!=null&&r.is_active?(l(),a("button",{key:0,onClick:o[0]||(o[0]=d=>e.shop=0),class:"btn btn-primary p-2 mt-2"},[Tye,_(" К магазинам ")])):u("",!0)]}),_:1},8,["settings","categories","collections","onSelect","onSearch"])]),t("div",Uye,[e.settings?(l(),a(v,{key:0},[e.settings.is_disabled?(l(),a("div",Iye,[t("div",Vye,[t("p",{class:"mb-0",innerHTML:e.settings.disabled_text},null,8,Mye)])])):u("",!0)],64)):u("",!0),T(Rr),f(t("div",Aye,[e.settings?(l(),a("div",Eye,[e.filteredCategories.length>0?(l(),a("div",Dye,[t("a",{href:"javascript:void(0)",onClick:o[1]||(o[1]=r=>e.selectCategory(null)),style:{"font-weight":"bold"},class:"list-group-item list-group-item-action d-flex justify-content-between p-3","aria-current":"true"}," Все категории товаров "),e.collections.length>0?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:o[2]||(o[2]=r=>e.selectCategory({id:"combo"})),style:{"font-weight":"bold"},class:"list-group-item list-group-item-action d-flex justify-content-between p-3","aria-current":"true"},[_(" Комбо-меню"),t("span",zye,p(e.collections.length||0),1)])):u("",!0),(l(!0),a(v,null,O(e.filteredCategories,r=>(l(),a("a",{href:"javascript:void(0)",onClick:d=>e.selectCategory(r),style:{"font-weight":"bold"},class:"list-group-item list-group-item-action d-flex justify-content-between p-3 align-items-center","aria-current":"true"},[_(p(r.title||"Не указано"),1),t("span",Lye,p(r.count||0),1)],8,Bye))),256))])):u("",!0)])):(l(),M(Ns,{key:1}))],512),[[tt,e.tab===0]]),e.tab===1?(l(),a("div",Rye,[e.settings?(l(),a(v,{key:0},[t("div",Nye,[e.collections.length>0?(l(),a(v,{key:0},[qye,t("div",Wye,[(l(!0),a(v,null,O(e.collections,(r,d)=>(l(),a("div",Yye,[T(Nge,{item:r},null,8,["item"])]))),256))]),((i=e.collections_paginate)==null?void 0:i.meta.last_page)>1?(l(),a("div",Hye,[t("div",Qye,[e.collections_paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextCollections,pagination:e.collections_paginate},null,8,["onPagination_page","pagination"])):u("",!0)])])):u("",!0)],64)):u("",!0),(e.stories||[]).length>0?(l(),a(v,{key:1},[Gye,T(Lr,{stories:e.stories||[]},null,8,["stories"])],64)):u("",!0),e.filteredCategories.length>0?(l(!0),a(v,{key:2},O(e.filteredCategories,r=>(l(),a(v,null,[t("h5",{class:"my-4 divider",id:"cat-"+r.id},p(r.title||"-"),9,Kye),e.settings.is_product_list?(l(),a(v,{key:1},[t("ol",ive,[(l(!0),a(v,null,O(r.products,(d,c)=>(l(),M(xbe,{item:d},null,8,["item"]))),256))]),r.products_count>r.products.length?(l(),a("button",{key:0,onClick:d=>e.loadMore(r.id,r.products.length),class:"btn btn-outline-light text-primary p-3 w-100 my-3",type:"button"},[e.load_content?(l(),a("span",ave,[_(" Загружаем.... "),rve])):(l(),a("span",lve,"Загрузить еще ("+p(r.products_count-r.products.length)+")",1))],8,nve)):u("",!0)],64)):f((l(),a("div",Jye,[(l(!0),a(v,null,O(r.products,(d,c)=>(l(),a("div",Xye,[T(Xi,{item:d},null,8,["item"])]))),256)),r.products_count>r.products.length?(l(),a("div",Zye,[t("button",{onClick:d=>e.loadMore(r.id,r.products.length),class:"btn btn-outline-light text-primary p-3 my-3 w-100",type:"button"},[e.load_content?(l(),a("span",sve,[_(" Загружаем.... "),ove])):(l(),a("span",tve,"Загрузить еще ("+p(r.products_count-r.products.length)+")",1))],8,eve)])):u("",!0)])),[[n,e.doSwipeLeft,"swipe",{left:!0}],[n,e.doSwipeRight,"swipe",{right:!0}]])],64))),256)):(l(),M(Ns,{key:3}))]),t("div",dve,[t("div",cve,[t("div",uve,[e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])])])],64)):(l(),M(Ns,{key:1}))])):u("",!0)]),jt(e.$slots,"navigation")],64)):u("",!0)],64)}}});const hve={props:["tableInfo"],data(){return{tab:"form",show_persons_input:!1,reservation:{date:"",time:"",name:"",phone:"",persons:1,description:"",table:null},bookings:[]}},computed:{self(){return window.self||null}},watch:{"reservation.date":{handler:function(s){this.bookingList()},deep:!0},tab:{handler:function(s){this.tab==="list"&&this.bookingList()},deep:!0}},methods:{bookingList(){return this.$store.dispatch("bookingList",{number:this.reservation.table.number,date:this.reservation.date}).then(s=>{this.bookings=s.data||[]})},validateForm(){return!this.reservation.date||!this.reservation.time||!this.reservation.persons?(this.$notify({title:"Бронирование",text:"Пожалуйста, заполните все обязательные поля (Дата, Время, Число персон)",type:"error"}),!1):this.reservation.persons<1?(this.$notify({title:"Бронирование",text:"Число персон должно быть не менее 1.",type:"error"}),!1):new Date(`${this.reservation.date}T${this.reservation.time}`)<new Date?(this.$notify({title:"Бронирование",text:"Дата и время бронирования не могут быть в прошлом.",type:"error"}),!1):!0},submitReservation(){if(!this.validateForm()){this.$notify({title:"Бронирование",text:"Не все поля заполнены корректно",type:"error"});return}let s=new FormData;Object.keys(this.reservation).forEach(e=>{const o=this.reservation[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("bookATable",{dataObject:s}).then(e=>{this.$notify({title:"Бронирование",text:"Ваш столик успешно забронирован!",type:"success"}),this.reservation={date:"",time:"",name:"",phone:"",persons:1,description:"",table:null},localStorage.setItem("cashman_current_active_table",JSON.stringify(e.data)),this.$emit("success")}).catch(e=>{this.$notify({title:"Бронирование",text:"Ошибка бронирования столика!",type:"error"}),this.$emit("failure")})}},mounted(){this.tableInfo&&this.$nextTick(()=>{this.reservation.table=this.tableInfo,this.reservation.persons=this.tableInfo.seats||1,this.reservation.description="Хочу забронировать этот столик",this.reservation.name=this.self.name||null,this.reservation.phone=this.self.phone||null});const s=new Date,e=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");document.getElementById("reservationDate").setAttribute("min",`${e}-${o}-${n}`)}},Cs=s=>(Ge("data-v-53ada5d1"),s=s(),Ke(),s),pve={key:0,class:"alert alert-light mb-2"},_ve={class:"mb-0"},fve={class:"fw-bold"},bve={class:"nav nav-tabs justify-content-center mb-2"},gve={class:"nav-item"},yve={class:"nav-item"},vve={class:"form-floating mb-2"},$ve=Cs(()=>t("label",{for:"reservationDate"},"Дата бронирования",-1)),kve={class:"form-floating mb-2"},wve=Cs(()=>t("label",{for:"reservationTime"},"Время бронирования",-1)),Fve=Cs(()=>t("p",{class:"mb-0"},"Число персон",-1)),Cve={class:"btn-group w-100 mb-2",role:"group","aria-label":"Простой пример"},Pve={key:0,class:"form-floating mb-2"},Sve=Cs(()=>t("label",{for:"numberOfPersons"},"Число персон",-1)),xve={class:"form-floating mb-2"},jve=Cs(()=>t("label",{for:"userName"},"На чьё имя бронировать",-1)),Ove={class:"form-floating mb-2"},Tve=Cs(()=>t("label",{for:"userPhone"},"Номер телефона",-1)),Uve={class:"form-floating mb-2"},Ive=Cs(()=>t("label",{for:"reservationDescription"},"Описание к брони (пожелания):",-1)),Vve=Cs(()=>t("button",{type:"submit",class:"btn btn-primary w-100 p-3"},"Забронировать",-1)),Mve={class:"form-floating mb-2"},Ave=Cs(()=>t("label",{for:"reservationDate"},"Дата бронирования",-1)),Eve={key:0,class:"list-group"},Dve={class:"list-group-item"},zve={class:"mb-0"},Bve={key:1,class:"alert alert-light"};function Lve(s,e,o,n,i,r){return l(),a(v,null,[i.reservation.table?(l(),a("div",pve,[t("p",_ve,[_("Вы бронируете столик "),t("strong",fve,"#"+p(i.reservation.table.number),1),_(" - "+p(i.reservation.table.description),1)])])):u("",!0),t("ul",bve,[t("li",gve,[t("a",{class:C(["nav-link",{active:i.tab==="form"}]),onClick:e[0]||(e[0]=d=>i.tab="form"),"aria-current":"page",href:"javascript:void(0)"},"Форма",2)]),t("li",yve,[t("a",{class:C([{active:i.tab==="list"},"nav-link"]),onClick:e[1]||(e[1]=d=>i.tab="list"),href:"javascript:void(0)"},"Список броней",2)])]),f(t("div",null,[t("form",{onSubmit:e[11]||(e[11]=W((...d)=>r.submitReservation&&r.submitReservation(...d),["prevent"]))},[t("div",vve,[f(t("input",{type:"date",id:"reservationDate","onUpdate:modelValue":e[2]||(e[2]=d=>i.reservation.date=d),required:"",class:"form-control"},null,512),[[k,i.reservation.date]]),$ve]),t("div",kve,[f(t("input",{type:"time",id:"reservationTime","onUpdate:modelValue":e[3]||(e[3]=d=>i.reservation.time=d),required:"",class:"form-control"},null,512),[[k,i.reservation.time]]),wve]),Fve,t("div",Cve,[t("button",{onClick:e[4]||(e[4]=d=>i.reservation.persons++),type:"button",class:"btn btn-primary"},"+"),t("button",{type:"button",onClick:e[5]||(e[5]=d=>i.show_persons_input=!i.show_persons_input),class:"btn btn-primary"},p(i.reservation.persons),1),t("button",{onClick:e[6]||(e[6]=d=>i.reservation.persons>1?i.reservation.persons--:""),type:"button",class:"btn btn-primary"},"-")]),i.show_persons_input?(l(),a("div",Pve,[f(t("input",{type:"number",id:"numberOfPersons","onUpdate:modelValue":e[7]||(e[7]=d=>i.reservation.persons=d),min:"1",required:"",class:"form-control"},null,512),[[k,i.reservation.persons,void 0,{number:!0}]]),Sve])):u("",!0),t("div",xve,[f(t("input",{type:"text",id:"userName","onUpdate:modelValue":e[8]||(e[8]=d=>i.reservation.name=d),min:"1",required:"",class:"form-control"},null,512),[[k,i.reservation.name,void 0,{number:!0}]]),jve]),t("div",Ove,[f(t("input",{type:"text",id:"userPhone","onUpdate:modelValue":e[9]||(e[9]=d=>i.reservation.phone=d),min:"1",required:"",class:"form-control"},null,512),[[k,i.reservation.phone,void 0,{number:!0}]]),Tve]),t("div",Uve,[f(t("textarea",{id:"reservationDescription","onUpdate:modelValue":e[10]||(e[10]=d=>i.reservation.description=d),rows:"4",class:"form-control"},null,512),[[k,i.reservation.description]]),Ive]),Vve],32)],512),[[tt,i.tab==="form"]]),f(t("div",null,[t("div",Mve,[f(t("input",{type:"date",id:"reservationDate","onUpdate:modelValue":e[12]||(e[12]=d=>i.reservation.date=d),required:"",class:"form-control"},null,512),[[k,i.reservation.date]]),Ave]),i.bookings.length>0?(l(),a("ul",Eve,[(l(!0),a(v,null,O(i.bookings,d=>{var c;return l(),a("li",Dve,[t("p",zve,p(d.booked_date_at||"-")+" в "+p(d.booked_time_at||"-")+" на "+p(((c=d.booked_info)==null?void 0:c.persons)||1)+" чел.",1)])}),256))])):(l(),a("p",Bve," Для данного столика нет активный броней "))],512),[[tt,i.tab==="list"]])],64)}const Rve=oe(hve,[["render",Lve],["__scopeId","data-v-53ada5d1"]]);const Nve={data(){return{tab:"export",startDate:this.getTodayDate(),endDate:this.getTodayDate(),loading:!1,counts:[],bookings:[]}},computed:{},methods:{getTodayDate(){const s=new Date,e=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0");return`${e}-${o}-${n}`},exportNearestBookings(){return this.$store.dispatch("exportNearestBookings",{start_date:this.startDate,end_date:this.endDate}).then(s=>{this.$notify({title:"Выгрузка броней",text:"Список броней успешно выгружен",type:"success"})}).catch(()=>{this.$notify({title:"Выгрузка броней",text:"Ошибка выгрузки броней",type:"error"})})},nearestBookingList(){return this.$store.dispatch("nearestBookingList",{start_date:null,end_date:null}).then(s=>{console.log(s),this.counts=s.counts||[],this.bookings=s.bookings.data||[]}).catch(()=>{this.$notify({title:"Список броней",text:"Ошибка загрузки списка броней",type:"error"})})}},mounted(){this.nearestBookingList()}},mo=s=>(Ge("data-v-4d7b7857"),s=s(),Ke(),s),qve=mo(()=>t("button",{type:"button",class:"btn-info btn w-100 p-3 my-2","data-bs-toggle":"modal","data-bs-target":"#admin-booking-modal"},[t("i",{class:"fa-solid fa-calendar"}),_(" Выгрузить брони ")],-1)),Wve={class:"modal fade",id:"admin-booking-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Yve={class:"modal-dialog modal-fullscreen"},Hve={class:"modal-content"},Qve=mo(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Заголовок модального окна"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Закрыть"})],-1)),Gve={class:"modal-body"},Kve={class:"nav nav-tabs"},Jve={class:"nav-item"},Xve={class:"nav-item"},Zve={class:"nav-item"},e0e=mo(()=>t("h6",{class:"mb-2 mt-3 fw-bold"},"Выгрузить брони по дате",-1)),t0e={class:"form-floating mb-2"},s0e=mo(()=>t("label",{for:"startDate",class:"form-label"},"С даты:",-1)),o0e={class:"form-floating mb-2"},i0e=mo(()=>t("label",{for:"endDate",class:"form-label"},"По дату:",-1)),n0e=["disabled"],l0e={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},a0e={key:1},r0e={class:"mb-2 mt-3 fw-bold"},d0e={key:0},c0e={key:0,class:"table-responsive"},u0e={class:"table table-striped table-hover"},m0e=mo(()=>t("thead",null,[t("tr",null,[t("th",null,"Дата"),t("th",null,"Время"),t("th",null,"Персон"),t("th",null,"Номер столика"),t("th",null,"Описание"),t("th",null,"На кого бронь"),t("th",null,"Номер телефона")])],-1)),h0e={key:1,class:"alert alert-info mb-2 mt-3"},p0e=mo(()=>t("h6",{class:"mb-2 mt-3 fw-bold"},"Ближайшие бронирования (по дате)",-1)),_0e={key:0,class:"list-group"},f0e={class:"list-group-item d-flex justify-content-between align-items-center"},b0e={class:"badge bg-primary rounded-pill"},g0e={key:1,class:"alert alert-info mb-2 mt-3"};function y0e(s,e,o,n,i,r){return l(),a(v,null,[qve,t("div",Wve,[t("div",Yve,[t("div",Hve,[Qve,t("div",Gve,[t("ul",Kve,[t("li",Jve,[t("a",{onClick:e[0]||(e[0]=d=>i.tab="export"),class:C([{active:i.tab==="export"},"nav-link"]),"aria-current":"page",href:"javascript:void(0)"},"Экспорт",2)]),t("li",Xve,[t("a",{onClick:e[1]||(e[1]=d=>i.tab="bookings"),class:C([{active:i.tab==="bookings"},"nav-link"]),"aria-current":"page",href:"javascript:void(0)"},"Список броней",2)]),t("li",Zve,[t("a",{onClick:e[2]||(e[2]=d=>i.tab="counts"),class:C([{active:i.tab==="counts"},"nav-link"]),"aria-current":"page",href:"javascript:void(0)"},"Сводка",2)])]),f(t("div",null,[e0e,t("form",{onSubmit:e[5]||(e[5]=W((...d)=>r.exportNearestBookings&&r.exportNearestBookings(...d),["prevent"]))},[t("div",t0e,[f(t("input",{type:"date",id:"startDate","onUpdate:modelValue":e[3]||(e[3]=d=>i.startDate=d),class:"form-control"},null,512),[[k,i.startDate]]),s0e]),t("div",o0e,[f(t("input",{type:"date",id:"endDate","onUpdate:modelValue":e[4]||(e[4]=d=>i.endDate=d),class:"form-control"},null,512),[[k,i.endDate]]),i0e]),t("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.loading},[i.loading?(l(),a("span",l0e)):(l(),a("span",a0e,"Выгрузить"))],8,n0e)],32)],512),[[tt,i.tab==="export"]]),f(t("div",null,[t("h6",r0e,[_("Бронирования на ближайшую неделю "),i.bookings.length>0?(l(),a("span",d0e,"("+p(i.bookings.length)+" ед.)",1)):u("",!0)]),i.bookings.length>0?(l(),a("div",c0e,[t("table",u0e,[m0e,t("tbody",null,[(l(!0),a(v,null,O(i.bookings,d=>{var c,h,g,w;return l(),a("tr",{key:d.id},[t("td",null,p(d.booked_date_at),1),t("td",null,p(d.booked_time_at),1),t("td",null,p((c=d.booked_info)==null?void 0:c.persons),1),t("td",null,p(d.number||"-"),1),t("td",null,p(((h=d.booked_info)==null?void 0:h.description)||"-"),1),t("td",null,p(((g=d.booked_info)==null?void 0:g.name)||"-"),1),t("td",null,p(((w=d.booked_info)==null?void 0:w.phone)||"-"),1)])}),128))])])])):(l(),a("div",h0e," Бронирований за выбранный период не найдено. "))],512),[[tt,i.tab==="bookings"]]),f(t("div",null,[p0e,i.counts.length>0?(l(),a("ul",_0e,[(l(!0),a(v,null,O(i.counts,d=>(l(),a("li",f0e,[_(p(d.date)+" ",1),t("span",b0e,p(d.total),1)]))),256))])):(l(),a("div",g0e," Пока нет ближайших бронирований. "))],512),[[tt,i.tab==="counts"]])])])])])],64)}const v0e=oe(Nve,[["render",y0e],["__scopeId","data-v-4d7b7857"]]);const Vo=s=>(Ge("data-v-2296ae45"),s=s(),Ke(),s),$0e={key:0},k0e={key:0},w0e=Vo(()=>t("i",{class:"fa-solid fa-plus-square"},null,-1)),F0e={key:1},C0e=Vo(()=>t("i",{class:"fa-solid fa-minus-square"},null,-1)),P0e={key:0,class:"list-group list-group-numbered mb-2"},S0e={class:"list-group-item d-flex justify-content-between align-items-start"},x0e={class:"ms-2 me-auto"},j0e={class:"fw-bold mb-0"},O0e={class:"mb-0"},T0e={class:"mb-2 fst-italic"},U0e=["onClick"],I0e={class:"badge bg-primary rounded-pill"},V0e={key:1,class:"alert alert-light"},M0e=Vo(()=>t("h6",{class:"fw-bold"},"Столики на выбор",-1)),A0e={class:"row row-cols-2"},E0e=["onClick"],D0e={class:"border d-flex flex-column",style:{"font-size":"12px"}},z0e={alt:"table",class:"table-img-small"},B0e={class:"fw-bold mb-0 px-2"},L0e={class:"mb-2 px-2"},R0e={key:1,class:"alert alert-light"},N0e={key:1,class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},q0e={class:"modal fade",id:"remove-booking-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},W0e={class:"modal-dialog modal-dialog-centered"},Y0e={class:"modal-content"},H0e=Vo(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Удаление брони"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),Q0e={class:"modal-body"},G0e={class:"mb-2"},K0e={class:"fw-bold text-primary"},J0e={class:"fw-bold text-primary"},X0e={class:"w-100 d-flex justify-content-center"},Z0e=Vo(()=>t("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary",type:"button"},"Нет, отменить ",-1)),e2e={class:"modal fade",id:"booking-modal",tabindex:"-1","aria-labelledby":"mySimpleModalLabel","aria-hidden":"true"},t2e={class:"modal-dialog modal-dialog-centered"},s2e={class:"modal-content"},o2e=Vo(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"mySimpleModalLabel"},"Бронирование столика"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Закрыть"})],-1)),i2e={class:"modal-body"},n2e={name:"Booking",data(){return{show_my_bookings:!1,my_bookings:[],selectedTable:null}},computed:{self(){return window.self||null},bot(){return window.currentBot},sortedSelectedTables(){let s=this.bot.settings;return s.tables_variants?s.tables_variants.sort((e,o)=>e.seats-o.seats):[]}},mounted(){this.myUpcomingBookings()},methods:{goToTableMenu(){this.$router.push({name:"TableMenuV2"})},openRemoveModal(s){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=s;const e=document.getElementById("remove-booking-modal");new bootstrap.Modal(e).show()})},closeModal(){this.selectedTable=null,this.$nextTick(()=>{const s=document.getElementById("booking-modal");bootstrap.Modal.getInstance(s).hide(),this.myUpcomingBookings()})},openModal(s){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=s;const e=document.getElementById("booking-modal");new bootstrap.Modal(e).show()})},myUpcomingBookings(){return this.$store.dispatch("myUpcomingBookings").then(s=>{this.my_bookings=s.data||[]})},cancelBookingTable(){if(this.selectedTable)return this.$store.dispatch("cancelBookingTable",{bookingId:this.selectedTable.id}).then(s=>{this.$notify({title:"Бронирование",text:"Бронь столика успешно убрана!",type:"success"}),this.myUpcomingBookings();const e=document.getElementById("remove-booking-modal");bootstrap.Modal.getInstance(e).hide().hide()})}}},l2e=Object.assign(n2e,{setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[e.bot?(l(),a(v,{key:0},[e.sortedSelectedTables.length>0?(l(),a("div",$0e,[e.self.is_admin?(l(),M(v0e,{key:0})):u("",!0),e.my_bookings.length>0?(l(),a(v,{key:1},[t("button",{onClick:o[0]||(o[0]=i=>e.show_my_bookings=!e.show_my_bookings),type:"button",class:"btn-primary btn w-100 p-3 mb-2"},[e.show_my_bookings?(l(),a("span",F0e,[C0e,_(" Скрыть мои брони ")])):(l(),a("span",k0e,[w0e,_(" Показать мои брони ")]))]),e.show_my_bookings?(l(),a(v,{key:0},[e.my_bookings.length>0?(l(),a("ol",P0e,[(l(!0),a(v,null,O(e.my_bookings,i=>{var r;return l(),a("li",S0e,[t("div",x0e,[t("div",j0e," Бронь столика №"+p(i.number),1),t("p",O0e,"Дата "+p(i.booked_date_at)+" в "+p(i.booked_time_at),1),t("p",T0e,p(((r=i.booked_info)==null?void 0:r.description)||"-"),1),t("button",{onClick:d=>e.openRemoveModal(i),type:"button",class:"btn btn-danger w-100"},"Отменить ",8,U0e)]),t("span",I0e,p(i.booked_info.persons||1)+" чел.",1)])}),256))])):(l(),a("p",V0e," У вас нет актуальных забронированных столиков "))],64)):u("",!0)],64)):u("",!0),M0e,t("div",A0e,[(l(!0),a(v,null,O(e.sortedSelectedTables,(i,r)=>(l(),a("div",{class:"col mb-2",onClick:d=>e.openModal(i),key:r},[t("div",D0e,[f(t("img",z0e,null,512),[[n,"/images/tables/"+i.image]]),t("p",B0e,"Столик №"+p(i.number),1),t("p",L0e,p(i.description),1)])],8,E0e))),128))])])):(l(),a("p",R0e," Нет столиков для бронирования "))],64)):u("",!0),e.my_bookings.length>0?(l(),a("nav",N0e,[t("button",{onClick:o[1]||(o[1]=(...i)=>e.goToTableMenu&&e.goToTableMenu(...i)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center align-items-center"}," Перейти к предзаказу ")])):u("",!0),t("div",q0e,[t("div",W0e,[t("div",Y0e,[H0e,t("div",Q0e,[e.selectedTable?(l(),a(v,{key:0},[t("p",G0e,[_("Вы точно хотите удалить бронь на "),t("strong",K0e,p(e.selectedTable.booked_date_at||"-"),1),_(" для столика "),t("strong",J0e,p(e.selectedTable.number||"-"),1),_("?")]),t("div",X0e,[t("button",{onClick:o[2]||(o[2]=(...i)=>e.cancelBookingTable&&e.cancelBookingTable(...i)),style:{"margin-right":"10px"},class:"btn btn-danger",type:"button"},"Да, удалить "),Z0e])],64)):u("",!0)])])])]),t("div",e2e,[t("div",t2e,[t("div",s2e,[o2e,t("div",i2e,[e.selectedTable?(l(),M(Rve,{key:0,onSuccess:e.closeModal,onFailure:e.closeModal,"table-info":e.selectedTable},null,8,["onSuccess","onFailure","table-info"])):u("",!0)])])])])],64)}}}),Nr=oe(l2e,[["__scopeId","data-v-2296ae45"]]);let to={spent_time_counter:0};function xo(){const s=dp(),e=s.getters.getSelf||0,o=s.getters.cartTotalPrice||0,n=window.currentBot,i=e.cashBack?e.cashBack.amount:0;let r=n.max_cashback_use_percent||0,d=o*(r/100);return Math.min(d,i)||0}function a2e(){const s=window.currentBot,e=s.settings;return window.isCorrectSchedule(s.company.schedule)&&(e==null?void 0:e.can_buy_after_closing)||!0}function r2e(){return parseInt(to.spent_time_counter||"0")}function el(){const s=parseInt(localStorage.getItem("cashman_self_product_delivery_counter")||"0");return s>0?(jo(s),!0):!1}function jo(s){to.spent_time_counter=parseInt(s)!=null?Math.min(parseInt(s),10):10;let e=setInterval(()=>{to.spent_time_counter>0?to.spent_time_counter--:(clearInterval(e),to.spent_time_counter=null),localStorage.setItem("cashman_self_product_delivery_counter",to.spent_time_counter),window.dispatchEvent(new CustomEvent("trigger-spent-timer",{detail:to.spent_time_counter}))},1e3)}const d2e={name:"CoffeeProgress",data(){return{spent_time:0,intervalId:null,showRules:!1,showExchangeQR:!1,showMarkQR:!1,selectedCupIndex:null,coffee:null}},watch:{self:{handler:function(s){var e;this.coffee=((e=this.self.config)==null?void 0:e.coffee)||null},deep:!0}},computed:{...G(["getSelf"]),bot(){return window.currentBot},settings(){return this.bot.settings||null},self(){return this.getSelf},maxCups(){var s;return((s=this.settings.coffee)==null?void 0:s.max)||0},usedCups(){var s;return((s=this.coffee)==null?void 0:s.count)||0},cups(){return Array.from({length:this.maxCups},(s,e)=>({index:e,filled:e<this.usedCups}))},progressPercent(){return Math.min(this.usedCups/this.maxCups*100,100)},link(){return"https://t.me/"+this.bot.bot_domain+"?start="+btoa("077"+this.self.telegram_chat_id+"request")},markQR(){return this.selectedCupIndex===null?null:"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link}},mounted(){window.addEventListener("trigger-spent-timer",s=>{this.spent_time=s.detail})},methods:{refreshCoffee(){jo(10),this.$notify({title:"Кофе",text:"Обновляем карточки"}),this.InitCoffee()},InitCoffee(){return this.$store.dispatch("initCoffee").then(s=>{this.coffee=s||{count:0}}).catch(()=>{this.coffee={count:0}})},clearWaitInterval(){clearInterval(this.intervalId)},waitForAccept(){let s=10;const e=this.coffee.count;this.intervalId=setInterval(()=>{this.InitCoffee().then(o=>{s--,(e!==this.coffee.count||s<=0)&&this.clearWaitInterval()})},5e3)},onCupClick(s){s.filled||(this.selectedCupIndex=s.index,this.showMarkQR=!0,this.waitForAccept())},toggleRules(){this.showRules=!this.showRules},toggleExchangeQR(){this.showExchangeQR=!this.showExchangeQR}}},Mo=s=>(Ge("data-v-8b11e966"),s=s(),Ke(),s),c2e={key:0,class:"coffee-wrapper"},u2e=Mo(()=>t("p",{class:"alert alert-light mb-2"}," Получите вкусный кофе совершенно бесплатно! Узнайте сколько у вас чашечек кофе прямо сейчас! ",-1)),m2e=Mo(()=>t("h5",{class:"fw-bold mb-3"},"Ваш прогресс кофе",-1)),h2e={class:"row row-cols-3"},p2e=["onClick"],_2e=Mo(()=>t("i",{style:{"font-size":"26px"},class:"fa-solid fa-mug-hot"},null,-1)),f2e=[_2e],b2e={class:"col mb-2"},g2e=["disabled"],y2e={key:0,style:{"font-size":"14px"}},v2e={key:1},$2e=Mo(()=>t("i",{class:"fas fa-sync-alt"},null,-1)),k2e=[$2e],w2e={class:"progress coffee-progress mb-3"},F2e={class:"text-muted small mb-3"},C2e={key:1,class:"qr-box text-center mb-3"},P2e={class:"qr-img",alt:"QR для обмена"},S2e=Mo(()=>t("p",{class:"small text-muted"},"Покажите бариста",-1)),x2e={key:2,class:"qr-box text-center mb-3"},j2e={class:"qr-img",alt:"QR для отметки"},O2e=Mo(()=>t("p",{class:"small text-muted"},"Покажите администратору",-1)),T2e={key:2,class:"alert alert-light border"},U2e={class:"mb-0",style:{"white-space":"pre-line"}};function I2e(s,e,o,n,i,r){var c;const d=ie("lazy");return(c=r.settings.coffee)!=null&&c.enabled?(l(),a("div",c2e,[i.coffee?u("",!0):(l(),a(v,{key:0},[u2e,t("button",{type:"button",onClick:e[0]||(e[0]=(...h)=>r.InitCoffee&&r.InitCoffee(...h)),class:"btn btn-primary p-3 mb-2 w-100"},"Приступить ")],64)),i.coffee?(l(),a(v,{key:1},[m2e,t("div",h2e,[(l(!0),a(v,null,O(r.cups,(h,g)=>(l(),a("div",{class:"col mb-2",key:"coffee-cup-"+g,onClick:w=>r.onCupClick(h)},[t("a",{href:"javascript:void(0)",class:C([{filled:h.filled},"btn w-100 p-3 coffee-cup-btn"])},f2e,2)],8,p2e))),128)),t("div",b2e,[t("button",{type:"button",disabled:i.spent_time>0,onClick:e[1]||(e[1]=(...h)=>r.refreshCoffee&&r.refreshCoffee(...h)),class:"btn w-100 p-3 coffee-cup-btn bg-success text-white"},[i.spent_time>0?(l(),a("span",y2e,p(i.spent_time)+" сек.",1)):(l(),a("span",v2e,k2e))],8,g2e)])]),t("div",w2e,[t("div",{class:"progress-bar progress-bar-striped bg-warning",role:"progressbar",style:dt({width:r.progressPercent+"%"})},null,4)]),t("p",F2e," Осталось "+p(r.maxCups-r.usedCups)+" чашек до бесплатной. ",1),r.usedCups>=r.maxCups&&r.maxCups>0?(l(),a("button",{key:0,class:"btn btn-success w-100 mb-3",onClick:e[2]||(e[2]=(...h)=>r.toggleExchangeQR&&r.toggleExchangeQR(...h))}," Обменять на бесплатный кофе ")):u("",!0),i.showExchangeQR?(l(),a("div",C2e,[f(t("img",P2e,null,512),[[d,r.markQR]]),S2e])):u("",!0),i.showMarkQR?(l(),a("div",x2e,[f(t("img",j2e,null,512),[[d,r.markQR]]),O2e])):u("",!0)],64)):u("",!0),t("button",{class:"btn btn-outline-secondary w-100 mb-2 p-3",onClick:e[3]||(e[3]=(...h)=>r.toggleRules&&r.toggleRules(...h))}," Правила акции "),i.showRules?(l(),a("div",T2e,[t("p",U2e,p(r.settings.coffee.rules),1)])):u("",!0)])):u("",!0)}const V2e=oe(d2e,[["render",I2e],["__scopeId","data-v-8b11e966"]]);const M2e={key:1,class:"container"},A2e={class:"row"},E2e={class:"col-12"},D2e={class:"navbar navbar-expand-sm fixed-bottom p-2 bg-transparent border-0",style:{"border-radius":"10px 10px 0 0","z-index":"999!important"}},z2e={class:"ios-nav-group w-100"},B2e=t("button",{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#sidebar-menu","aria-controls":"sidebar-menu",class:"btn btn-primary ios-btn"},[t("i",{class:"fa-solid fa-bars"}),t("span",{class:"ios-label"},"Меню")],-1),L2e=t("i",{class:"fa-solid fa-calendar-check"},null,-1),R2e=t("span",{class:"ios-label"},"Бронь",-1),N2e=[L2e,R2e],q2e=t("i",{class:"fa-solid fa-shop"},null,-1),W2e=t("span",{class:"ios-label"},"Магазин",-1),Y2e=[q2e,W2e],H2e=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),Q2e=t("span",{class:"ios-label"},"Корзина",-1),G2e={key:0,class:"cart-marker"},K2e=t("i",{class:"fa-solid fa-heart"},null,-1),J2e=t("span",{class:"ios-label"},"Избранное",-1),X2e={key:0,class:"cart-marker"},Z2e=t("i",{class:"fa-solid fa-mug-hot"},null,-1),e$e=t("span",{class:"ios-label"},"Кофе",-1),t$e=[Z2e,e$e],s$e={class:"modal fade",id:"coffee-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},o$e={class:"modal-dialog"},i$e={class:"modal-content"},n$e=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Кофе"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),l$e={class:"modal-body"},a$e={class:"modal fade",id:"fav-product-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r$e={class:"modal-dialog"},d$e={class:"modal-content"},c$e=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Избранное"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),u$e={class:"modal-body"},m$e={key:0,class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 g-2"},h$e={class:"col"},p$e={key:1,class:"alert alert-light"},_$e={data(){return{tab:"shop",coffee_load:!1,settings:null,favorites_products:[]}},computed:{...G(["inCart","cartProducts","cartTotalCount","getFavoriteProducts","cartTotalPrice","getSelf"]),bot(){return window.currentBot},favorites(){return this.getFavoriteProducts},self(){return window.self||null},favCount(){return this.favorites.length===0?0:this.favorites.length},canBay(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work||(this.settings?this.settings.can_buy_after_closing:!0):!0},tg(){return window.Telegram.WebApp}},mounted(){var s;if(this.tg.BackButton.show(),(s=this.bot.settings)!=null&&s.self_updated?this.settings=this.bot.settings:this.loadShopModuleData(),this.tg.BackButton.onClick(()=>{this.tg.close()}),this.loadBasketData(),!this.canBay){const e=document.querySelector("#schedule-list-display"),o=bootstrap.Modal.getOrCreateInstance(e);o&&o.show()}},methods:{showCoffee(){this.coffee_load=!0,this.$nextTick(()=>{this.coffee_load=!1;const s=document.getElementById("coffee-modal"),e=bootstrap.Modal.getOrCreateInstance(s);e&&e.show()})},goToBooking(){this.$router.push({name:"TableBookingV2"})},goToCart(){this.$router.push({name:"ShopCartV2"})},loadBasketData(){return this.$store.dispatch("loadProductsInBasket")},loadFavProducts(){const s=document.querySelector("#fav-product-modal"),e=bootstrap.Modal.getOrCreateInstance(s);e&&e.show(),this.$store.dispatch("getFavList").then(o=>{this.favorites_products=o.data||[]}).catch(()=>{})},loadShopModuleData(){return this.$store.dispatch("loadShopModuleData").then(s=>{this.$nextTick(()=>{this.settings||(this.settings={});let e=s.data;e&&Object.keys(e).forEach(o=>{o&&(this.settings[o]=e[o])})})})}}},qr=Object.assign(_$e,{__name:"Catalog",setup(s){return(e,o)=>{var n;return l(),a(v,null,[e.tab==="shop"?(l(),a(v,{key:0},[e.settings?(l(),M(Zn,{key:0,settings:e.settings},{navigation:A(()=>[]),_:1},8,["settings"])):u("",!0)],64)):u("",!0),e.tab==="booking"?(l(),a("div",M2e,[t("div",A2e,[t("div",E2e,[T(Nr)])])])):u("",!0),t("nav",D2e,[t("div",z2e,[B2e,e.tab==="shop"?(l(),a("button",{key:0,onClick:o[0]||(o[0]=i=>e.tab="booking"),type:"button",class:"btn btn-primary ios-btn"},N2e)):u("",!0),e.tab==="booking"?(l(),a("button",{key:1,onClick:o[1]||(o[1]=i=>e.tab="shop"),type:"button",class:"btn btn-primary ios-btn"},Y2e)):u("",!0),t("button",{onClick:o[2]||(o[2]=(...i)=>e.goToCart&&e.goToCart(...i)),type:"button",class:"btn btn-primary ios-btn position-relative"},[H2e,Q2e,e.cartTotalCount>0?(l(),a("span",G2e,p(e.cartTotalPrice||0)+"₽ ",1)):u("",!0)]),t("button",{onClick:o[3]||(o[3]=(...i)=>e.loadFavProducts&&e.loadFavProducts(...i)),type:"button",class:"btn btn-primary ios-btn position-relative"},[K2e,J2e,e.favCount>0?(l(),a("span",X2e,p(e.favCount),1)):u("",!0)]),e.settings?(l(),a(v,{key:2},[(n=e.settings.coffee)!=null&&n.enabled?(l(),a("button",{key:0,type:"button",onClick:o[4]||(o[4]=(...i)=>e.showCoffee&&e.showCoffee(...i)),class:"btn btn-success ios-btn"},t$e)):u("",!0)],64)):u("",!0)])]),t("div",s$e,[t("div",o$e,[t("div",i$e,[n$e,t("div",l$e,[e.coffee_load?u("",!0):(l(),M(V2e,{key:0}))])])])]),t("div",a$e,[t("div",r$e,[t("div",d$e,[c$e,t("div",u$e,[e.favorites_products.length>0?(l(),a("div",m$e,[(l(!0),a(v,null,O(e.favorites_products,(i,r)=>(l(),a("div",h$e,[T(Xi,{item:i},null,8,["item"])]))),256))])):(l(),a("p",p$e," Вы еще не добавили товары в избранное:( "))])])])])],64)}}}),f$e=Object.freeze(Object.defineProperty({__proto__:null,default:qr},Symbol.toStringTag,{value:"Module"})),b$e={data(){return{table_number:null,selected_table:null,tables:[{id:1,reserved_time:null,title:"Стол №1",description:"Большой стол для мероприятий",size:10,waiter:null,persons:[],order:[{product_id:null,count:0,bot_user_id:null,created_at:null}],start_at:null,closed_at:null}]}},computed:{bot(){return window.currentBot}},methods:{}},g$e={class:"container py-3"},y$e={class:"input-group mb-3"},v$e=t("span",{class:"input-group-text"},[t("i",{class:"fa-solid fa-hashtag"})],-1),$$e={class:"form-floating"},k$e=t("label",{for:"floatingInputGroup1"},"Номер столика",-1),w$e=t("h6",{class:"divider fw-bold"},"или",-1),F$e={class:"row row-cols-4"},C$e={class:"col mb-2"},P$e={class:"card"},S$e={class:"card-body"},x$e={class:"text-center mb-0"};function j$e(s,e,o,n,i,r){return l(),a("div",g$e,[t("div",y$e,[v$e,t("div",$$e,[f(t("input",{type:"number",min:"1","onUpdate:modelValue":e[0]||(e[0]=d=>i.table_number=d),class:"form-control",id:"floatingInputGroup1",placeholder:"Номер столика"},null,512),[[k,i.table_number]]),k$e])]),w$e,t("div",F$e,[(l(),a(v,null,O(30,d=>t("div",C$e,[t("div",P$e,[t("div",S$e,[t("p",x$e,p(d),1)])])])),64))])])}const O$e=oe(b$e,[["render",j$e]]),T$e={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},U$e={class:"d-block",style:{position:"relative"}},I$e=t("i",{class:"fa-solid fa-cart-shopping mr-2"},null,-1),V$e={key:0,class:"bg-white text-primary sup-badge"},M$e=t("sup",{class:"font-10 opacity-50"},".00",-1),A$e={key:1,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-secondary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-between"},E$e={data(){return{step:0,table_number:null,selected_table:null,tables:[]}},computed:{...G(["inCart","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},canBy(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work||this.settings.can_buy_after_closing:!0}},methods:{goToCart(){this.$router.push({name:"ShopCartV2"})}}},Wr=Object.assign(E$e,{__name:"Catalog",setup(s){return(e,o)=>(l(),a(v,null,[e.step===0?(l(),M(O$e,{key:0})):u("",!0),e.step===2?(l(),a(v,{key:1},[T(Zn),t("nav",T$e,[e.canBy?(l(),a("button",{key:0,onClick:o[0]||(o[0]=(...n)=>e.goToCart&&e.goToCart(...n)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-between"},[t("span",U$e,[I$e,e.cartTotalCount>0?(l(),a("sup",V$e,p(e.cartTotalCount),1)):u("",!0),_("Корзина ")]),t("strong",null,[_(p(e.cartTotalPrice||0),1),M$e,_("₽")])])):(l(),a("p",A$e," В данный момент покупки недоступны "))])],64)):u("",!0)],64))}}),D$e=Object.freeze(Object.defineProperty({__proto__:null,default:Wr},Symbol.toStringTag,{value:"Module"})),z$e={props:["schedule"],computed:{preparedDay(){let s=new Date().getUTCDay();return s===0?6:s-1},sorted(){var e;const s={Понедельник:1,Вторник:2,Среда:3,Четверг:4,Пятница:5,Суббота:6,Воскресенье:7};return((e=this.schedule)==null?void 0:e.sort((o,n)=>s[o.day]-s[n.day]))||[]}}},B$e={class:"list-group"},L$e={key:0,class:"text-primary fw-bold"},R$e={key:1,class:"text-primary fw-bold"};function N$e(s,e,o,n,i,r){return l(),a("ul",B$e,[(l(!0),a(v,null,O(r.sorted,(d,c)=>(l(),a("li",{class:C(["list-group-item d-flex justify-content-between",{"current-day text-primary fw-bold":r.preparedDay==c}]),"aria-current":"true"},[t("span",null,p(d.day||"-"),1),d.closed?u("",!0):(l(),a("span",L$e,p(d.start_at||"-")+" - "+p(d.end_at||"-"),1)),d.closed?(l(),a("span",R$e,p(d.closed_comment||"-"),1)):u("",!0)],2))),256))])}const q$e=oe(z$e,[["render",N$e]]);const W$e={key:0,class:"container py-3"},Y$e={key:0,class:"d-flex",style:{"min-height":"300px",overflow:"hidden"}},H$e=["innerHTML"],Q$e={key:1,class:"alert alert-danger",role:"alert"},G$e=t("p",{class:"mb-0 fw-bold"},"Администратор еще не добавили виджет Яндекс.Карты с расположением заведения!",-1),K$e=[G$e],J$e={class:"my-3"},X$e={class:"opacity-75 mb-3 d-flex justify-content-between align-items-center"},Z$e={key:0,"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2"},eke=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),tke=[eke],ske={class:"list-group"},oke={class:"list-group-item d-flex justify-content-between","aria-current":"true"},ike=t("span",null,"Телефон",-1),nke={class:"text-primary fw-bold",style:{"font-size":"12px"}},lke=["href"],ake={key:0,class:"list-group-item d-flex justify-content-between","aria-current":"true"},rke=t("span",null,"Инста",-1),dke={class:"text-primary fw-bold",style:{"font-size":"12px"}},cke=["href"],uke={key:1,class:"list-group-item d-flex justify-content-between","aria-current":"true"},mke=t("span",null,"Вконтакте",-1),hke={class:"text-primary fw-bold",style:{"font-size":"12px"}},pke=["href"],_ke={class:"list-group-item d-flex justify-content-between","aria-current":"true"},fke=t("span",null,"Почта",-1),bke={class:"text-primary fw-bold",style:{"font-size":"12px"}},gke=["href"],yke={key:2,class:"list-group-item d-flex justify-content-between","aria-current":"true"},vke=t("span",null,"Сайт",-1),$ke={class:"text-primary fw-bold",style:{"font-size":"12px"}},kke=["href"],wke={class:"opacity-75 my-3 d-flex justify-content-between align-items-center"},Fke={key:0,"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2"},Cke=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),Pke=[Cke],Ske={key:3,class:"alert alert-danger"},xke=t("p",{class:"mb-0 fw-bold"},"График работ еще не составлен:)",-1),jke=[xke],Oke={data(){return{settings:{can_use_cash:!0,can_use_card:!0,delivery_price_text:null,min_price:0,min_price_for_cashback:0,menu_list_type:0,payment_info:0,need_category_by_page:!1,need_pay_after_call:!1,free_shipping_starts_from:0,yandex_map_link:null}}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},bot(){return window.currentBot},isCorrectSchedule(){return window.isCorrectSchedule(this.bot.company.schedule)},company(){return this.bot.company},phone(){return this.bot.company.phones&&this.bot.company.phones[0]||null},links(){return{inst:(this.bot.company.links||{inst:null}).inst||null,vk:(this.bot.company.links||{vk:null}).vk||null,map_link:(this.bot.company.links||{map_link:null}).map_link||null,site:(this.bot.company.links||{site:null}).site||null}}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{}},Yr=Object.assign(Oke,{__name:"Contacts",setup(s){return(e,o)=>e.bot?(l(),a("div",W$e,[(e.company.links||{map_link:null}).map_link?(l(),a("div",Y$e,[t("div",{innerHTML:e.company.links.map_link},null,8,H$e)])):(l(),a("div",Q$e,K$e)),t("h6",J$e,p(e.bot.company.address||"Адрес вашего заведения"),1),t("h6",X$e,[_("Контактная информация "),(e.getSelf||{is_admin:!1}).is_admin?(l(),a("a",Z$e,tke)):u("",!0)]),t("ul",ske,[t("li",oke,[ike,t("span",nke,[t("a",{href:"tel:"+e.links.phone,target:"_blank"},p(e.phone||"-"),9,lke)])]),e.links.inst?(l(),a("li",ake,[rke,t("span",dke,[t("a",{href:"https://instagram.com/"+e.links.inst,target:"_blank"},"@"+p(e.links.inst||"-"),9,cke)])])):u("",!0),e.links.vk?(l(),a("li",uke,[mke,t("span",hke,[t("a",{href:"https://vk.com/"+e.links.vk,target:"_blank"},p(e.links.vk||"-"),9,pke)])])):u("",!0),t("li",_ke,[fke,t("span",bke,[t("a",{href:"mailto:"+e.company.email,target:"_blank"},p(e.company.email||"-"),9,gke)])]),e.links.site?(l(),a("li",yke,[vke,t("span",$ke,[t("a",{href:e.links.site,target:"_blank"},p(e.links.site||"-"),9,kke)])])):u("",!0)]),t("h6",wke,[_("Прием заказов осуществляется "),(e.getSelf||{is_admin:!1}).is_admin?(l(),a("a",Fke,Pke)):u("",!0)]),e.isCorrectSchedule?(l(),M(q$e,{key:2,schedule:e.company.schedule},null,8,["schedule"])):(l(),a("div",Ske,jke))])):u("",!0)}}),Tke=Object.freeze(Object.defineProperty({__proto__:null,default:Yr},Symbol.toStringTag,{value:"Module"})),Uke={class:"container"},Ike={class:"row"},Vke=t("div",{class:"col-12"},[t("h5",{class:"my-3"},[t("i",{class:"fa-solid fa-list-check mr-1 text-primary"}),_(" Список заказов")]),t("div",{class:"alert alert-light mb-3 fw-bold",role:"alert"},[t("strong",{class:"text-primary"},"Внимание!"),_(" При повторном заказе автоматически формируется корзина из доступных к заказу товаров из вашего списка. Товары в стоп-листе заведения добавлены не будут. ")])],-1),Mke={class:"col-12"},Ake={class:"nav nav-tabs justify-content-center"},Eke={class:"nav-item"},Dke={class:"nav-item"},zke={key:0,class:"col-12"},Bke={key:0,class:"list-group my-2"},Lke=["onClick"],Rke=t("i",{class:"fa-solid fa-stopwatch mr-2 text-primary"},null,-1),Nke=["onClick"],qke=t("i",{class:"fa-solid fa-arrow-rotate-right mr-2"},null,-1),Wke={key:1,class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},Yke=t("div",{class:"d-flex justify-content-center flex-column align-items-center"},[t("i",{class:"fa-brands fa-shopify mb-3",style:{"font-size":"36px"}}),t("p",null,"Заказов еще нет:(")],-1),Hke=[Yke],Qke={key:1,class:"col-12"},Gke={key:0},Kke=t("hr",null,null,-1),Jke={key:1,class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},Xke=t("div",{class:"d-flex justify-content-center flex-column align-items-center"},[t("i",{class:"fa-brands fa-shopify mb-3",style:{"font-size":"36px"}}),t("p",null,"Отзывов о товарах еще нет:(")],-1),Zke=[Xke],ewe={props:["selected","active"],data(){return{tab:0,orders:null,orders_paginate_object:null,reviews:[],reviews_paginate_object:null}},computed:{...G(["getOrders","getOrdersPaginateObject","inCart","getReviews","getReviewsPaginateObject"]),tg(){return window.Telegram.WebApp}},mounted(){this.loadOrders(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{loadProductInOrders(s=0){return this.tab=1,this.$store.dispatch("loadReviews",{page:s||0,size:20}).then(()=>{this.reviews=this.getReviews,this.reviews_paginate_object=this.getReviewsPaginateObject})},repeatOrder(s){let e=s.product_details[0].products.map(o=>o.title);this.$store.dispatch("repeatOrder",{products:e}).then(o=>{this.$store.dispatch("clearCart");let n=o.data;if(n.length===0){s.disabled=!0,this.$notify({title:"Корзина",text:"Нет доступных к заказу товаров:("});return}n.forEach(i=>{this.inCart(i)===0?this.$store.dispatch("addProductToCart",i):this.$store.dispatch("incQuantity",i.id)}),this.$router.push({name:"ShopCartV2"})}).catch(()=>{this.$notify({title:"Корзина",text:"Ошибка формирования заказа",type:"error"})})},nextOrders(s){this.loadOrders(s)},nextReviews(s){this.loadProductInOrders(s)},select(s){return this.$emit("select",s)},loadOrders(s=0){return this.$store.dispatch("loadOrders",{page:s,size:20}).then(()=>{this.orders=this.getOrders,this.orders_paginate_object=this.getOrdersPaginateObject})}}},Hr=Object.assign(ewe,{__name:"MyOrders",setup(s){return(e,o)=>(l(),a("div",Uke,[t("div",Ike,[Vke,t("div",Mke,[t("ul",Ake,[t("li",Eke,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[0]||(o[0]=n=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Заказы",2)]),t("li",Dke,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[1]||(o[1]=n=>e.loadProductInOrders(0)),href:"javascript:void(0)"},"Товары",2)])])]),e.tab===0?(l(),a("div",zke,[(e.orders||[]).length>0?(l(),a("div",Bke,[(l(!0),a(v,null,O(e.orders,n=>(l(),a("a",{href:"javascript:void(0)",onClick:i=>e.select(n),style:{"font-weight":"bold"},class:"list-group-item d-flex justify-content-between p-3 align-items-start flex-column","aria-current":"true"},[t("p",null,[Rke,_(" Время заказа "+p(n.created_at),1)]),t("ul",null,[(l(!0),a(v,null,O(n.product_details[0].products,i=>(l(),a("li",null,p(i.title),1))),256))]),n.review?(l(),M(ro,{key:0,modelValue:n.review,"onUpdate:modelValue":i=>n.review=i},null,8,["modelValue","onUpdate:modelValue"])):u("",!0),n.disabled?u("",!0):(l(),a("button",{key:1,type:"button",onClick:i=>e.repeatOrder(n),class:"btn btn-primary w-100 p-3"},[qke,_(" Повторить заказ ")],8,Nke))],8,Lke))),256))])):(l(),a("div",Wke,Hke)),e.orders_paginate_object?(l(),M(Ce,{key:2,simple:!0,onPagination_page:e.nextOrders,pagination:e.orders_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),e.tab===1?(l(),a("div",Qke,[(e.reviews||[]).length>0?(l(),a("div",Gke,[(l(!0),a(v,null,O(e.reviews,(n,i)=>(l(),a(v,null,[T(ro,{modelValue:e.reviews[i],"onUpdate:modelValue":r=>e.reviews[i]=r,"need-product":!0},null,8,["modelValue","onUpdate:modelValue"]),Kke],64))),256)),e.reviews_paginate_object?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextReviews,pagination:e.reviews_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):(l(),a("div",Jke,Zke))])):u("",!0)])]))}}),twe=Object.freeze(Object.defineProperty({__proto__:null,default:Hr},Symbol.toStringTag,{value:"Module"})),swe={props:["data"],data(){return{photos:null,profile:null,load_data:!0}},computed:{logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},currentBot(){return window.currentBot}},mounted(){this.loadUserPhotos()},methods:{goToFriends(){this.data.id===this.profile.id&&(document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.push({name:"FriendsV2"}))},goToCashback(){this.data.id===this.profile.id&&(document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.push({name:"CashBackV2"}))},goToOrders(){this.data.id===this.profile.id&&(document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.push({name:"OrdersV2"}))},loadUserPhotos(){this.$store.dispatch("getUserProfilePhotos",{bot_user_id:this.data.id}).then(s=>{this.photos=s.photos.result.photos||null,this.profile=s.profile})},sendMyNumber(){this.tg.requestContact(s=>{this.$notify({title:"Профиль",text:s?"Ваш контакт успешно отправлен!":"Вы отменили отправку контакта",type:s?"success":"error"}),this.$store.dispatch("loaddata").then(()=>{this.load_data=!1,this.$nextTick(()=>{this.load_data=!0})})})}}},owe={class:"d-flex justify-content-center align-items-center",style:{"min-height":"350px"}},iwe={key:0,style:{width:"200px",height:"200px","border-radius":"50%",overflow:"hidden"}},nwe={class:"w-100 object-fit-cover"},lwe={key:1,style:{width:"200px",height:"200px"}},awe={class:"w-100 object-fit-cover"},rwe=t("h6",{class:"opacity-75 mb-3 d-flex justify-content-between align-items-center"},"Информация о профиле",-1),dwe={class:"list-group"},cwe={class:"list-group-item d-flex justify-content-between","aria-current":"true"},uwe=t("span",null,"Имя",-1),mwe={style:{"font-size":"12px"},class:"text-primary fw-bold"},hwe={class:"list-group-item d-flex justify-content-between","aria-current":"true"},pwe=t("span",null,"ID",-1),_we={class:"text-primary fw-bold"},fwe={key:0,class:"list-group-item d-flex justify-content-between","aria-current":"true"},bwe=t("span",null,"Телефон",-1),gwe={class:"list-group-item d-flex justify-content-between","aria-current":"true"},ywe=t("span",null,"Город",-1),vwe={class:"text-primary fw-bold"},$we={class:"list-group-item d-flex justify-content-between","aria-current":"true"},kwe=t("span",null,"День рождения",-1),wwe={class:"text-primary fw-bold"},Fwe=t("span",null,"Приглашено друзей",-1),Cwe={class:"text-primary fw-bold"},Pwe=t("span",null,"Количество заказов",-1),Swe={class:"text-primary fw-bold"},xwe=t("span",null,"Получено баллов",-1),jwe={class:"text-primary fw-bold"},Owe={key:0,class:"opacity-75 my-3"},Twe={key:1,class:"list-group"},Uwe={class:"list-group-item d-flex justify-content-between","aria-current":"true"},Iwe={class:"text-primary fw-bold"};function Vwe(s,e,o,n,i,r){const d=ie("lazy");return l(),a(v,null,[t("div",owe,[(i.photos||[]).length>0?(l(),a("div",iwe,[f(t("img",nwe,null,512),[[d,"/file-by-file-id-and-bot-domain/"+i.photos[0][0].file_id+"/"+r.currentBot.bot_domain]])])):(l(),a("div",lwe,[f(t("img",awe,null,512),[[d,"/images/shop-v2/profile.png"]])]))]),rwe,i.profile?(l(),a(v,{key:0},[t("ul",dwe,[t("li",cwe,[uwe,t("span",mwe,p(i.profile.fio_from_telegram||"не указано"),1)]),t("li",hwe,[pwe,t("span",_we,p(i.profile.telegram_chat_id||"-"),1)]),i.load_data?(l(),a("li",fwe,[bwe,t("span",{onClick:e[0]||(e[0]=(...c)=>r.sendMyNumber&&r.sendMyNumber(...c)),class:"text-primary fw-bold cursor-pointer"},p(i.profile.phone||"отправить мой номер"),1)])):u("",!0),t("li",gwe,[ywe,t("span",vwe,p(i.profile.city||"не указан"),1)]),t("li",$we,[kwe,t("span",wwe,p(i.profile.birthday||"-"),1)]),t("li",{onClick:e[1]||(e[1]=(...c)=>r.goToFriends&&r.goToFriends(...c)),class:"list-group-item d-flex justify-content-between cursor-pointer","aria-current":"true"},[Fwe,t("span",Cwe,p(i.profile.friends_count||0),1)]),t("li",{class:"list-group-item d-flex justify-content-between cursor-pointer",onClick:e[2]||(e[2]=(...c)=>r.goToOrders&&r.goToOrders(...c)),"aria-current":"true"},[Pwe,t("span",Swe,p(i.profile.order_count||0),1)]),t("li",{onClick:e[3]||(e[3]=(...c)=>r.goToCashback&&r.goToCashback(...c)),class:"list-group-item d-flex justify-content-between cursor-pointer","aria-current":"true"},[xwe,t("span",jwe,p(i.profile.cashBack.amount||0)+" ₽",1)])]),i.profile.cashBack?(l(),a(v,{key:0},[(i.profile.cashBack.subs||[]).length>0?(l(),a("h6",Owe,"Специальные начисления")):u("",!0),(i.profile.cashBack.subs||[]).length>0?(l(),a("ul",Twe,[(l(!0),a(v,null,O(i.profile.cashBack.subs,c=>(l(),a("li",Uwe,[t("span",null,p(c.title||"-"),1),t("span",Iwe,p(c.amount||0)+" ₽",1)]))),256))])):u("",!0)],64)):u("",!0),o.data.id===i.profile.id&&i.profile.phone==null?(l(),a("button",{key:1,type:"button",class:"btn btn-info w-100 p-3 my-3",onClick:e[4]||(e[4]=(...c)=>r.sendMyNumber&&r.sendMyNumber(...c))},"Отправить мой номер ")):u("",!0)],64)):u("",!0)],64)}const Jo=oe(swe,[["render",Vwe]]),Mwe={key:0,class:"container py-3"},Awe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#edit-profile",class:"btn btn-link w-100 py-3"},[t("i",{class:"fa-solid fa-pen-to-square mr-1"}),_(" Редактировать")],-1),Ewe=t("h6",{class:"opacity-75 my-3"},"Ваш QR-код",-1),Dwe={class:"img-thumbnail",alt:"..."},zwe=t("i",{class:"fa-solid fa-link mr-2"},null,-1),Bwe={class:"modal fade",id:"edit-profile",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Lwe={class:"modal-dialog modal-fullscreen"},Rwe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактирование профиля"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Nwe={class:"modal-body"},qwe={class:"form-floating mb-2"},Wwe=t("label",{for:""},"Ф.И.О пользователя",-1),Ywe={class:"form-floating mb-2"},Hwe=t("label",{for:""},"Телефон",-1),Qwe={class:"form-floating mb-2"},Gwe=t("label",{for:""},"Почта",-1),Kwe={class:"form-floating mb-2"},Jwe=t("label",{for:""},"Адрес",-1),Xwe={class:"form-floating mb-2"},Zwe=t("label",{for:""},"Дата рождения",-1),e3e={class:"form-floating mb-2"},t3e=t("label",{for:""},"Страна",-1),s3e={class:"form-floating mb-2"},o3e=t("label",{for:""},"Город",-1),i3e={class:"row mb-0"},n3e=t("p",{class:"col-12 my-2"},"Пол",-1),l3e={class:"col-6"},a3e=t("i",{class:"fa-solid fa-mars mr-1"},null,-1),r3e={class:"col-6"},d3e=t("i",{class:"fa-solid fa-venus mr-1"},null,-1),c3e={class:"row mb-0"},u3e=t("p",{class:"col-12 my-2"},"Получать рассылки от бота?",-1),m3e={class:"col-6"},h3e={class:"col-6"},p3e=t("div",{class:"modal-footer p-2"},[t("button",{type:"submit",class:"btn btn-primary w-100"},"Сохранить изменения")],-1),_3e={data(){return{photos:null,load_self:!0,botUserForm:{id:null,name:null,phone:null,email:null,birthday:null,age:null,city:null,country:null,address:null,sex:null,config:{need_bot_mailing:!0}}}},computed:{...G(["getSelf"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},self(){return this.getSelf},tg(){return window.Telegram.WebApp},tgUser(){const s=new URLSearchParams(this.tg.initData);return JSON.parse(s.get("user"))},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001"+this.self.telegram_chat_id)}},watch:{getSelf:function(){var s;this.botUserForm.id=this.getSelf.id,this.botUserForm.name=this.getSelf.name||this.getSelf.username||this.getSelf.id,this.botUserForm.phone=this.getSelf.phone,this.botUserForm.email=this.getSelf.email,this.botUserForm.birthday=this.getSelf.birthday||null,this.botUserForm.city=this.getSelf.city||null,this.botUserForm.country=this.getSelf.country||null,this.botUserForm.address=this.getSelf.address||null,this.botUserForm.sex=this.getSelf.sex||!1,this.botUserForm.config.need_bot_mailing=((s=this.getSelf.config)==null?void 0:s.need_bot_mailing)||!0}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()}),this.$nextTick(()=>{var s;this.loadUserPhotos(),this.getSelf&&(this.botUserForm.id=this.getSelf.id,this.botUserForm.name=this.getSelf.name||this.getSelf.username||this.getSelf.id,this.botUserForm.phone=this.getSelf.phone,this.botUserForm.email=this.getSelf.email,this.botUserForm.birthday=this.getSelf.birthday||null,this.botUserForm.city=this.getSelf.city||null,this.botUserForm.country=this.getSelf.country||null,this.botUserForm.address=this.getSelf.address||null,this.botUserForm.sex=this.getSelf.sex||!1,this.botUserForm.config.need_bot_mailing=((s=this.getSelf.config)==null?void 0:s.need_bot_mailing)||!0)})},methods:{copyToClipboard(){navigator.clipboard.writeText(this.link),this.$notify({title:"Реферальная ссылка",text:"Ваша ссылка успешно скопирована в буфер!"})},submitProfile(){this.$store.dispatch("updateProfile",{botUserForm:this.botUserForm}).then(()=>{this.$notify({title:"Редактирование данных",text:"Данные успешно обновлены!",type:"success"}),window.location.reload()}).catch(()=>{this.$notify({title:"Редактирование данных",text:"Ошибка обновления данных",type:"error"})})},goToFriends(){this.$router.push({name:"FriendsV2"})},goToCashback(){this.$router.push({name:"CashBackV2"})},goToOrders(){this.$router.push({name:"OrdersV2"})},loadUserPhotos(){this.$store.dispatch("getUserProfilePhotos").then(s=>{this.photos=s.photos.result.photos||null})},sendMyNumber(){this.tg.requestContact(s=>{this.$notify({title:"Профиль",text:s?"Ваш контакт успешно отправлен!":"Вы отменили отправку контакта",type:s?"success":"error"}),this.$store.dispatch("loadSelf").then(()=>{this.load_self=!1,this.$nextTick(()=>{this.load_self=!0})})})}}},Qr=Object.assign(_3e,{__name:"Profile",setup(s){return(e,o)=>{const n=ie("lazy"),i=ie("mask");return e.self?(l(),a("div",Mwe,[T(Jo,{data:e.self},null,8,["data"]),Awe,Ewe,f(t("img",Dwe,null,512),[[n,e.qr]]),t("button",{type:"button",onClick:o[0]||(o[0]=(...r)=>e.copyToClipboard&&e.copyToClipboard(...r)),class:"btn btn-outline-primary mt-2 w-100"},[zwe,_("Ваша реферальная ссылка ")]),t("div",Bwe,[t("div",Lwe,[e.getSelf?(l(),a("form",{key:0,class:"modal-content",onSubmit:o[12]||(o[12]=W((...r)=>e.submitProfile&&e.submitProfile(...r),["prevent"]))},[Rwe,t("div",Nwe,[t("div",qwe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=r=>e.botUserForm.name=r),placeholder:"Иванов Иван Иванович",required:""},null,512),[[k,e.botUserForm.name]]),Wwe]),t("div",Ywe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=r=>e.botUserForm.phone=r),placeholder:"+7(XXX) XXX-XX-XX",required:""},null,512),[[k,e.botUserForm.phone],[i,"+7(###)###-##-##"]]),Hwe]),t("div",Qwe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=r=>e.botUserForm.email=r),placeholder:"example@gmail.com"},null,512),[[k,e.botUserForm.email]]),Gwe]),t("div",Kwe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=r=>e.botUserForm.address=r),placeholder:"ул. Петрова, 123, кв 45"},null,512),[[k,e.botUserForm.address]]),Jwe]),t("div",Xwe,[f(t("input",{type:"date",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=r=>e.botUserForm.birthday=r),placeholder:"12/01/2023"},null,512),[[k,e.botUserForm.birthday]]),Zwe]),t("div",e3e,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=r=>e.botUserForm.country=r),placeholder:"Россия"},null,512),[[k,e.botUserForm.country]]),t3e]),t("div",s3e,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=r=>e.botUserForm.city=r),placeholder:"Краснодар"},null,512),[[k,e.botUserForm.city]]),o3e]),t("div",i3e,[n3e,t("div",l3e,[t("button",{type:"button",onClick:o[8]||(o[8]=r=>e.botUserForm.sex=!0),class:C([{"btn-info text-white":e.botUserForm.sex,"btn-outline-secondary":!e.botUserForm.sex},"w-100 btn"])},[a3e,_(" Муж ")],2)]),t("div",r3e,[t("button",{type:"button",onClick:o[9]||(o[9]=r=>e.botUserForm.sex=!1),class:C([{"btn-info text-white":!e.botUserForm.sex,"btn-outline-secondary":e.botUserForm.sex},"w-100 btn"])},[d3e,_(" Жен ")],2)])]),t("div",c3e,[u3e,t("div",m3e,[t("button",{type:"button",onClick:o[10]||(o[10]=r=>e.botUserForm.config.need_bot_mailing=!0),class:C([{"btn-info text-white":e.botUserForm.config.need_bot_mailing,"btn-outline-secondary":!e.botUserForm.config.need_bot_mailing},"w-100 btn"])}," Да ",2)]),t("div",h3e,[t("button",{type:"button",onClick:o[11]||(o[11]=r=>e.botUserForm.config.need_bot_mailing=!1),class:C([{"btn-info text-white":!e.botUserForm.config.need_bot_mailing,"btn-outline-secondary":e.botUserForm.config.need_bot_mailing},"w-100 btn"])}," Нет ",2)])])]),p3e],32)):u("",!0)])])])):u("",!0)}}}),f3e=Object.freeze(Object.defineProperty({__proto__:null,default:Qr},Symbol.toStringTag,{value:"Module"})),b3e={key:0,class:"container py-3"},g3e={class:"card border-0"},y3e={style:{"min-height":"350px","object-fit":"cover"},class:"card-img",alt:"..."},v3e={class:"card-img-overlay d-flex flex-column justify-content-between p-0"},$3e={class:"shadow-bg",style:{"min-height":"70px"}},k3e={class:"text-left text-white",style:{"font-weight":"700","line-height":"100%"}},w3e={class:"d-flex justify-content-between align-products-center"},F3e={class:"text-left mb-0 text-white"},C3e={class:"text-primary fw-bold"},P3e={key:0,class:"badge bg-primary fw-bold"},S3e={key:0,class:"row g-2 row-cols-5"},x3e={class:"col"},j3e=["onClick"],O3e=t("i",{class:"fa-solid fa-link"},null,-1),T3e={class:"p-2"},U3e=t("p",{class:"mb-0"},"Рейтинг товара",-1),I3e={class:"d-flex justify-content-between mb-3"},V3e={key:1,class:"p-2 alert alert-warning"},M3e=t("p",{class:"mb-0 fw-bold"},"Особенности доставки",-1),A3e={key:0,class:"d-flex justify-content-between mb-3"},E3e={key:1,class:"mb-0"},D3e={key:2,class:"p-2"},z3e=t("p",{class:"mb-0"},"Параметры товара",-1),B3e={class:"table"},L3e=t("thead",null,[t("th",null,"Параметр"),t("th",null,"Значение")],-1),R3e={key:0},N3e=t("td",null,"Ширина",-1),q3e={key:1},W3e=t("td",null,"Высота",-1),Y3e={key:2},H3e=t("td",null,"Длина",-1),Q3e={key:3},G3e=t("td",null,"Вес",-1),K3e={class:"nav nav-tabs justify-content-center"},J3e={class:"nav-item"},X3e={class:"nav-item"},Z3e={key:3},eFe=["innerHTML"],tFe={key:1,class:"text-justify py-2 fst-italic"},sFe={key:4},oFe={key:0},iFe={class:"list-group w-100 py-2 rounded-0"},nFe={class:"list-group-item"},lFe={key:1,class:"alert alert-light my-2 d-flex justify-content-center align-items-center",role:"alert"},aFe=t("div",{class:"d-flex justify-content-center align-items-center flex-column"},[t("div",{class:"spinner-grow text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Загружаем....")]),t("p",null,"Загружаем отзывы...")],-1),rFe=[aFe],dFe={key:2,class:"alert alert-light my-2",role:"alert"},cFe={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},uFe={key:0,class:"d-flex justify-content-between align-items-center w-100 p-0"},mFe=["disabled"],hFe={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},pFe={key:1,class:"btn-group w-100"},_Fe=["disabled"],fFe=["disabled"],bFe={key:1,class:"p-3 border-secondary border rounded-2 w-100 text-secondary fw-bold text-center"},gFe={data(){return{product:null,tab:0,selected_image:null,loading_reviews:!1,reviews:[],paginate:null,sending:!1,is_online:!0}},computed:{...G(["inCart","cartTotalCount","getReviews","getReviewsPaginateObject"]),currentPrice(){return this.product.current_price/100},oldPrice(){return this.product.old_price/100},checkInCart(){return this.inCart(this.product.id)},discount(){return this.oldPrice>0?Math.round(this.currentPrice/this.oldPrice*100):0},uuid(){return Bt()},canProductAction(){return this.is_online&&!this.sending},currentScriptId(){return window.currentScript},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.productLink},productLink(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001slug"+this.currentScriptId+"product"+this.item.id)}},mounted(){this.loadProduct()},methods:{nextReviews(s){this.loadReviews(s)},loadReviews(s=0){return this.tab=1,this.loading_reviews=!0,this.$store.dispatch("loadReviewsByProductId",{dataObject:{product_id:this.product.id},page:s,size:30}).then(e=>{this.reviews=this.getReviews,this.paginate=this.getReviewsPaginateObject,this.loading_reviews=!1}).catch(()=>{this.loading_reviews=!1})},copyToClipBoard(){const s=this.productLink;navigator.clipboard.writeText(s).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.product):this.$store.dispatch("incQuantity",this.product.id),this.$notify({title:"Добавление товара",text:"Успешно добавлено в корзину!"})},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.product.id):this.$store.dispatch("decQuantity",this.product.id),this.$notify({title:"Добавление товара",text:"Товар удален!"})},loadProduct(){let s=this.$route.params.productId;this.$store.dispatch("loadProduct",{dataObject:{productId:s}}).then(e=>{this.product=e.data,this.selected_image=(this.product.images||[]).length>0?this.product.images[0]:null,window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1})})},doSwipeLeft(){this.$router.push({name:"CatalogV2"})},doSwipeRight(){this.$router.push({name:"ShopCartV2"})}}},Gr=Object.assign(gFe,{__name:"Product",setup(s){return(e,o)=>{const n=Qe("Pagination"),i=ie("lazy"),r=ie("touch");return e.product?f((l(),a("div",b3e,[t("div",g3e,[f(t("img",y3e,null,512),[[i,e.selected_image]]),t("div",v3e,[t("div",$3e,[t("h6",k3e,p(e.product.title||"Не указан"),1),t("div",w3e,[t("p",F3e,[_("Цена "),t("strong",C3e,p(e.product.current_price||0)+"₽",1)]),e.discount>0?(l(),a("span",P3e,"-"+p(e.discount||0)+"%",1)):u("",!0)])])])]),(e.product.images||[]).length>1?(l(),a("div",S3e,[(l(!0),a(v,null,O(e.product.images,d=>(l(),a("div",x3e,[f(t("img",{style:{"min-height":"60px","object-fit":"contain"},onClick:c=>e.selected_image=d,class:C([{"border border-primary":e.selected_image===d},"img-thumbnail my-2"]),alt:"..."},null,10,j3e),[[i,d]])]))),256))])):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[0]||(o[0]=(...d)=>e.copyToClipBoard&&e.copyToClipBoard(...d)),class:"d-block w-100 text-center py-3"},[O3e,_(" Скопировать ссылку на товар")]),t("div",T3e,[U3e,t("h6",I3e,[T(Uo,{rating:e.product.rating},null,8,["rating"]),_(" "+p(Math.round(e.product.rating))+" из 5 ",1)])]),e.product.delivery_terms?(l(),a("div",V3e,[M3e,e.product.delivery_terms?(l(),a("h6",A3e,p(e.product.delivery_terms),1)):(l(),a("p",E3e,"Дополнительных условий доставки нет"))])):u("",!0),e.product.dimension?(l(),a("div",D3e,[z3e,t("table",B3e,[L3e,t("tbody",null,[e.product.dimension.width>0?(l(),a("tr",R3e,[N3e,t("td",null,p(e.product.dimension.width||0)+" см",1)])):u("",!0),e.product.dimension.height>0?(l(),a("tr",q3e,[W3e,t("td",null,p(e.product.dimension.height||0)+" см",1)])):u("",!0),e.product.dimension.length>0?(l(),a("tr",Y3e,[H3e,t("td",null,p(e.product.dimension.length||0)+" см",1)])):u("",!0),e.product.dimension.weight>0?(l(),a("tr",Q3e,[G3e,t("td",null,p(e.product.dimension.weight||0)+" кг",1)])):u("",!0)])])])):u("",!0),t("ul",K3e,[t("li",J3e,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[1]||(o[1]=d=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Описание",2)]),t("li",X3e,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[2]||(o[2]=d=>e.loadReviews(0)),href:"javascript:void(0)"},"Отзывы",2)])]),e.tab===0?(l(),a("div",Z3e,[e.product.description?(l(),a("p",{key:0,innerHTML:e.product.description,class:"text-justify py-2 fst-italic"},null,8,eFe)):(l(),a("p",tFe,"Нет описания"))])):u("",!0),e.tab===1?(l(),a("div",sFe,[e.reviews.length>0?(l(),a("div",oFe,[t("ul",iFe,[(l(!0),a(v,null,O(e.reviews,(d,c)=>(l(),a("li",nFe,[T(ro,{"need-product":!1,modelValue:e.reviews[c],"onUpdate:modelValue":h=>e.reviews[c]=h},null,8,["modelValue","onUpdate:modelValue"])]))),256))]),e.paginate?(l(),M(n,{key:0,simple:!0,onPagination_page:e.nextReviews,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),e.reviews.length===0&&e.loading_reviews?(l(),a("div",lFe,rFe)):u("",!0),e.reviews.length===0&&!e.loading_reviews?(l(),a("div",dFe," У данного товара еще нет отзывов! Для того чтобы оставить отзыв Вам необходимо заказать данный товар, после чего у вас появится возможность написать ваше впечатление от него;) ")):u("",!0)])):u("",!0),t("nav",cFe,[e.product.in_stop_list_at?(l(),a("p",bFe,"Товар недоступен для заказа")):(l(),a("div",uFe,[e.inCart(e.product.id)===0?(l(),a("button",{key:0,type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-md btn-primary w-100 rounded-3 p-2"]),disabled:e.product.in_stop_list_at!=null||!e.canProductAction,onClick:o[3]||(o[3]=(...d)=>e.incProductCart&&e.incProductCart(...d))},[_(p(e.product.current_price||0)+"₽ ",1),e.product.old_price>0?(l(),a("span",hFe,p(e.product.old_price||0)+"₽",1)):u("",!0)],10,mFe)):u("",!0),e.inCart(e.product.id)>0?(l(),a("div",pFe,[t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-md btn-primary p-2"]),disabled:e.product.in_stop_list_at!=null||!e.canProductAction,onClick:o[4]||(o[4]=(...d)=>e.decProductCart&&e.decProductCart(...d))},"- ",10,_Fe),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-md btn-primary"])},p(e.checkInCart),3),t("button",{type:"button",class:C([{"btn-secondary":!e.canProductAction},"btn btn-md btn-primary p-2"]),disabled:e.product.in_stop_list_at!=null||!e.canProductAction,onClick:o[5]||(o[5]=(...d)=>e.incProductCart&&e.incProductCart(...d))},"+ ",10,fFe)])):u("",!0)]))])])),[[r,e.doSwipeLeft,"swipe",{left:!0}],[r,e.doSwipeRight,"swipe",{right:!0}]]):(l(),M(Ns,{key:1}))}}}),yFe=Object.freeze(Object.defineProperty({__proto__:null,default:Gr},Symbol.toStringTag,{value:"Module"})),vFe={class:"container py-3"},$Fe={class:"row"},kFe={class:"col-12"},wFe={class:"row"},FFe={key:0,class:"mb-0"},CFe={class:"fst-italic",style:{"font-size":"10px"}},PFe={key:1,class:"mb-0"},SFe={class:"fst-italic",style:{"font-size":"10px"}},xFe={key:0,class:"mb-0"},jFe={class:"fst-italic",style:{"font-size":"10px"}},OFe=t("h6",{class:"opacity-75 mb-2 mt-2"},"Выбор приза Колеса фортуны",-1),TFe={class:"card-img-top object-fit-cover w-100",alt:"..."},UFe=t("div",{class:"card-body"},[t("p",{class:"card-text text-primary",style:{"font-size":"12px"}},"Приз не выбран")],-1),IFe=["onClick"],VFe={class:"card-img-top object-fit-cover w-100",alt:"..."},MFe={class:"card-body"},AFe={class:"card-text text-primary",style:{"font-size":"10px"}},EFe={class:"card mb-3"},DFe={class:"card-body"},zFe={class:"mb-2"},BFe={class:"fw-bold"},LFe={class:"mb-0"},RFe={class:"fw-bold"},NFe={key:0,class:"text-success fw-bold"},qFe=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),WFe=t("span",{class:"color-white"},"Очистить корзину",-1),YFe=[qFe,WFe],HFe=t("i",{class:"fa-solid fa-money-bill mr-2"},null,-1),QFe=t("span",{class:"color-white"},"Перейти к оформлению",-1),GFe=[HFe,QFe],KFe={class:"modal fade",id:"take-prize-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},JFe={class:"modal-dialog"},XFe={class:"modal-content"},ZFe=ze('<div class="modal-header"><h1 class="modal-title fs-5" id="exampleModalLabel">Использование приза</h1><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> Вы точно хотите использовать этот приз сейчас? <p class="alert alert-info my-"> Внимание! Призы со скидкой будут применены к текущей корзине, если товара по скидке нет, то он будет добавлен в корзину и применена скидка к нему. </p></div>',2),e5e={class:"modal-footer d-flex justify-content-center"},t5e=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Отмена",-1),s5e={props:["formData","simpleMode"],components:{Carousel:Yi,Slide:Go,Pagination:Qn,Navigation:Gn},computed:{...G(["cartProducts","cartTotalCount","cartTotalPrice"]),filteredActionData(){return this.action?this.action.data?this.action.data.filter(s=>!s.taked_at):[]:[]},bot(){return window.currentBot},settings(){return this.bot.settings}},data(){return{selected_prize:null,prize_modal:null,config:{itemsToShow:2.5},display_promo_code:!1,action:null}},mounted(){this.prize_modal=new bootstrap.Modal(document.getElementById("take-prize-modal"),{}),this.loadClientNotUsedPrizes()},methods:{openPrizeModal(s){this.selected_prize=null,this.$nextTick(()=>{this.selected_prize=s,this.selected_prize!=null&&this.prize_modal.show()})},selectPrize(){const s=this.selected_prize;if(s==null){this.prize_modal.hide();return}this.$store.dispatch("useWheelOfFortunePrize",{form:{action_prize:s,action_id:this.action.id}}).then(e=>{this.action=e.action,this.$notify({title:"Выбор приза",text:"Приз успешно выбран!",type:"success"}),this.$emit("select-prize",{prize:s,action_id:this.action.id}),this.selected_prize=null,this.prize_modal.hide(),window.location.reload()}).catch(()=>{this.prize_modal.hide()})},loadClientNotUsedPrizes(){this.settings.selected_script_id&&this.$store.dispatch("getClientNotUsedPrizesFromWheelOfFortune",{slug_id:this.settings.selected_script_id}).then(s=>{this.action=s.action})},clearCart(){this.$emit("change-tab",1),this.$store.dispatch("clearCart").then(()=>{this.$notify({title:"Корзина",text:"Корзина успешно очищена",type:"success"})})}}},Kr=Object.assign(s5e,{__name:"CartProductList",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[t("div",vFe,[t("div",$Fe,[t("div",kFe,[jt(e.$slots,"upper-text")])]),t("div",wFe,[(l(!0),a(v,null,O(e.cartProducts,(i,r)=>(l(),a("div",{key:i.id,class:"col-12"},[(i.product||null)!=null?(l(),M(Dr,{comment:i.comment,config:i.params,key:"product-"+i.product.id,item:i.product},{partner:A(()=>[i.partner?(l(),a("p",FFe,[t("span",CFe,p(i.partner.title||"-"),1)])):(l(),a("p",PFe,[t("span",SFe,p(e.bot.title||"-"),1)]))]),_:2},1032,["comment","config","item"])):(i.collection||null)!=null?(l(),M(Br,{comment:i.comment,params:i.params,key:"collection-"+i.collection.id,item:i.collection},{partner:A(()=>[i.partner?(l(),a("p",xFe,[t("span",jFe,p(i.partner.title||"-"),1)])):u("",!0)]),_:2},1032,["comment","params","item"])):u("",!0)]))),128))]),e.settings.need_prizes_from_wheel_of_fortune&&(e.filteredActionData||[]).length>0?(l(),a(v,{key:0},[OFe,T(Ie(Yi),cp({itemsToShow:2.5,wrapAround:!1},e.config),{addons:A(()=>[T(Ie(Gn)),T(Ie(Qn))]),default:A(()=>[(l(),M(Ie(Go),{key:"empty-prize"},{default:A(()=>[t("div",{onClick:o[0]||(o[0]=i=>e.openPrizeModal(null)),class:C([{"border-primary":s.formData.action_prize==null},"card mx-1 p-3 align-items-center"]),style:{height:"190px","border-color":"#e9ecef"}},[f(t("img",TFe,null,512),[[n,"/images/chest.png"]]),UFe],2)]),_:1})),(l(!0),a(v,null,O(e.filteredActionData,i=>(l(),M(Ie(Go),{key:i},{default:A(()=>{var r;return[t("div",{onClick:d=>e.openPrizeModal(i),class:C([{"border-primary":(((r=s.formData.action_prize)==null?void 0:r.prize)||{description:null}).description==i.description},"card mx-1 p-3 align-items-center"]),style:{height:"190px","border-color":"#e9ecef"}},[f(t("img",VFe,null,512),[[n,"/images/wheel.png"]]),t("div",MFe,[t("p",AFe,p(i.description||"-"),1)])],10,IFe)]}),_:2},1024))),128))]),_:1},16,["itemsToShow"])],64)):u("",!0),s.simpleMode?u("",!0):(l(),a(v,{key:1},[t("div",EFe,[t("div",DFe,[t("h6",zFe,[_("Товаров в корзине "),t("strong",BFe,p(e.cartTotalCount)+" ед.",1)]),t("h6",LFe,[_("Общая цена товаров "),t("strong",RFe,p(e.cartTotalPrice-s.formData.discount)+"₽",1),(s.formData.discount||0)>0?(l(),a("strong",NFe," (-"+p(s.formData.discount)+" ₽ )",1)):u("",!0)])])]),jt(e.$slots,"recommendation-list"),e.cartTotalCount>0?(l(),a("button",{key:0,onClick:o[1]||(o[1]=(...i)=>e.clearCart&&e.clearCart(...i)),class:"btn btn-outline-primary p-3 w-100 mb-2"},YFe)):u("",!0),t("button",{onClick:o[2]||(o[2]=i=>e.$emit("change-tab",1)),class:"btn btn-primary p-3 w-100"},GFe)],64))]),t("div",KFe,[t("div",JFe,[t("div",XFe,[ZFe,t("div",e5e,[t5e,t("button",{type:"button",onClick:o[3]||(o[3]=(...i)=>e.selectPrize&&e.selectPrize(...i)),class:"btn btn-primary"},"Использовать ")])])])])],64)}}});const o5e={class:"opacity-75 mb-2 mt-2 d-flex justify-content-between","data-bs-container":"body","data-bs-toggle":"popover","data-bs-placement":"top","data-bs-content":"Введи промокод и нажми на кнопку рядом чтоб узнать % скидки!"},i5e=t("span",null,[_("Промокод на скидку "),t("i",{class:"fa-regular fa-circle-question"})],-1),n5e={key:0},l5e={key:1,class:"spinner-border spinner-border-sm text-primary",role:"status"},a5e=t("span",{class:"visually-hidden"},"Loading...",-1),r5e=[a5e],d5e=t("div",{class:"alert-light border-primary alert mb-2"},[t("span",{class:"text-primary fw-bold"},"Внимание!"),_(" После активации промокода его нельзя использовать повторно! ")],-1),c5e={class:"form-floating mb-2"},u5e=["disabled"],m5e=t("label",{for:"floatingInput"},"Ваш промокод",-1),h5e=["disabled"],p5e=t("i",{class:"fa-solid fa-tags"},null,-1),_5e={key:0},f5e={key:1},b5e={name:"App",data(){return{spent_time:0,is_requested:!1,discount:0,discount_in_percent:!1,activate_price:0,promocodeForm:{code:null}}},watch:{"promocodeForm.code":{handler:function(s){this.discount=0},deep:!0}},mounted(){[...document.querySelectorAll('[data-bs-toggle="popover"]')].map(e=>new bootstrap.Popover(e)),this.is_requested=el(),window.addEventListener("trigger-spent-timer",e=>{this.spent_time=e.detail})},methods:{submit(){this.promocodeForm.code!=null&&(jo(10),this.is_requested=!0,this.$store.dispatch("activateShopDiscountPromocode",{promocodeForm:this.promocodeForm}).then(s=>{this.is_requested=!1,this.discount=s.discount||0,this.discount_in_percent=s.discount_in_percent||!1,this.activate_price=s.activate_price||0,this.$notify({title:"Промокод",text:"Промокод успешно активирован!",type:"success"}),this.$emit("callback",{code:this.promocodeForm.code||null,discount:this.discount||0,discount_in_percent:this.discount_in_percent||!1,activate_price:this.activate_price||0})}).catch(()=>{this.is_requested=!1,this.discount=0,this.activate_price=0,this.$emit("callback",{code:this.promocodeForm.code||null,discount:0,discount_in_percent:!1,activate_price:0}),this.$notify({title:"Промокод",text:"Ошибка активации промокода!",type:"error"})}))}}},g5e=Object.assign(b5e,{setup(s){return(e,o)=>(l(),a(v,null,[t("h6",o5e,[i5e,Ie(r2e)()>0?(l(),a("span",n5e,p(e.spent_time)+" сек.",1)):u("",!0),e.is_requested?(l(),a("div",l5e,r5e)):u("",!0)]),d5e,t("div",c5e,[f(t("input",{type:"text",disabled:e.spent_time>0,"onUpdate:modelValue":o[0]||(o[0]=n=>e.promocodeForm.code=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,u5e),[[k,e.promocodeForm.code]]),m5e]),e.discount===0?(l(),a("button",{key:0,type:"button",onClick:o[1]||(o[1]=(...n)=>e.submit&&e.submit(...n)),disabled:e.spent_time>0,class:"btn btn-primary p-3 w-100 mb-2"},[p5e,e.spent_time>0?(l(),a("span",_5e," Осталось ждать "+p(e.spent_time)+" сек.",1)):(l(),a("span",f5e," Активировать"))],8,h5e)):u("",!0)],64))}}),y5e={class:"card my-3"},v5e={class:"card-body p-2"},$5e={class:"list-group list-group-flush"},k5e={class:"list-group-item"},w5e={class:"mb-0 d-flex justify-content-between"},F5e={class:"list-group-item"},C5e={class:"mb-0 d-flex justify-content-between"},P5e=t("sup",null,".00",-1),S5e={key:0,class:"list-group-item"},x5e={class:"mb-0 d-flex justify-content-between"},j5e={key:0},O5e={key:1},T5e={key:1,class:"list-group-item"},U5e={"data-bs-toggle":"modal","data-bs-target":"#promocode-modal",class:"mb-0 d-flex justify-content-between"},I5e={key:0,class:"fw-bold"},V5e={key:1,class:"text-primary"},M5e=t("i",{class:"fa-solid fa-percent px-2"},null,-1),A5e=t("span",{class:"text-decoration-underline"},"Ввести промокод",-1),E5e=[M5e,A5e],D5e={key:0,class:"list-group-item"},z5e={"data-bs-toggle":"modal","data-bs-target":"#person-modal",class:"mb-0 d-flex justify-content-between"},B5e={class:"fw-bold text-primary"},L5e=t("i",{class:"fa-solid fa-people-group mr-2"},null,-1),R5e={key:1,class:"list-group-item"},N5e={class:"mb-2 d-flex justify-content-between"},q5e=["data-bs-toggle","data-bs-target"],W5e={key:1,class:"d-flex justify-content-end text-decoration-underline"},Y5e=t("i",{class:"fa-solid fa-money-bill-wave"},null,-1),H5e={key:2},Q5e=t("p",{class:"my-3 text-center"},"Мы можем подготовить для вас сдачу с:",-1),G5e={class:"row row-cols-2 mb-0"},K5e={class:"col"},J5e=["onClick"],X5e=t("p",{class:"mb-2"},[t("em",null,"или введите другую сумму...")],-1),Z5e={class:"form-floating"},eCe=t("label",{for:"data-money"},"С какой суммы нужна сдача",-1),tCe={class:"list-group-item"},sCe={class:"mb-0 d-flex justify-content-between"},oCe={class:"fw-bold"},iCe={key:0,class:"list-group-item"},nCe={class:"mb-0 d-flex justify-content-between"},lCe={class:"fw-bold text-primary"},aCe={class:"fw-bold text-primary"},rCe={key:1,class:"list-group-item"},dCe={class:"mb-0 d-flex justify-content-between"},cCe={class:"fw-bold"},uCe={key:4,class:"list-group-item"},mCe={class:"mb-0 d-flex justify-content-between"},hCe={class:"fw-bold"},pCe={class:"list-group-item"},_Ce={class:"mb-0 d-flex justify-content-between"},fCe={class:"fw-bold"},bCe=["innerHTML"],gCe={key:1},yCe={class:"fw-bold"},vCe={class:"modal fade",id:"promocode-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},$Ce={class:"modal-dialog modal-dialog-centered"},kCe={class:"modal-content"},wCe={class:"modal-body"},FCe={key:0,class:"text-center py-3 border-primary border rounded-2"},CCe={class:"fw-bold"},PCe={class:"modal fade",id:"person-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},SCe={class:"modal-dialog modal-dialog-centered"},xCe={class:"modal-content"},jCe={class:"modal-body"},OCe=t("h6",{class:"opacity-75 mb-3"},"Укажите на сколько человек добавить приборы?",-1),TCe={class:"row text-center"},UCe={class:"col-4"},ICe=t("i",{class:"fa-solid fa-minus font-22"},null,-1),VCe=[ICe],MCe={class:"col-4 d-flex justify-content-center align-items-center"},ACe={class:"fw-bold",style:{"font-size":"16px"}},ECe={class:"col-4"},DCe=t("i",{class:"fa-solid fa-plus font-22"},null,-1),zCe=[DCe],BCe={props:["modelValue"],data(){return{deliveryForm:null,moneyVariants:[500,1e3,2e3,5e3]}},watch:{deliveryForm:{handler:function(s){this.$emit("update:modelValue",this.deliveryForm)},deep:!0},modelValue:{handler:function(s){this.deliveryForm=s},deep:!0},cartTotalPrice:{handler:function(s){this.settings.free_shipping_starts_from<=this.cartTotalPrice&&(this.deliveryForm.delivery_price=0)},deep:!0}},computed:{...G(["cartProducts","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},settings(){return this.bot.settings},finallyPrice(){var o,n;let s=(o=this.deliveryForm)!=null&&o.use_cashback?this.cartTotalPrice-xo():this.cartTotalPrice,e=this.settings.need_automatic_delivery_request?(((n=this.deliveryForm.cdek.tariff)==null?void 0:n.delivery_sum)||0)+(this.deliveryForm.delivery_price||0):0;return s+e}},mounted(){this.deliveryForm=this.modelValue},methods:{goToProductCart(){document.dispatchEvent(new Event("switch-to-cart"))},recalcDeliveryPrice(){this.$emit("calc-delivery-price")},activateDiscount(s){this.deliveryForm.discount=s.discount||0},decPersons(){this.deliveryForm.persons=this.deliveryForm.persons>1?this.deliveryForm.persons-1:this.deliveryForm.persons},incPersons(){this.deliveryForm.persons=this.deliveryForm.persons<100?this.deliveryForm.persons+1:this.deliveryForm.persons}}},Jr=Object.assign(BCe,{__name:"Summary",setup(s){return(e,o)=>{var n,i,r,d,c;return e.deliveryForm!=null?(l(),a(v,{key:0},[t("div",y5e,[t("div",v5e,[t("ul",$5e,[t("li",k5e,[t("p",w5e,[_("Суммарно, ед. "),t("strong",{class:"text-decoration-underline text-primary",onClick:o[0]||(o[0]=(...h)=>e.goToProductCart&&e.goToProductCart(...h))},p(e.cartTotalCount)+" шт.",1)])]),t("li",F5e,[t("p",C5e,[_("Цена "),t("strong",null,[_(p(e.cartTotalPrice)+" ",1),P5e,_("₽")])])]),(n=e.deliveryForm)!=null&&n.use_cashback?(l(),a("li",S5e,[t("p",x5e,[_("Оплата бонусами "),(i=e.deliveryForm)!=null&&i.use_cashback?(l(),a("strong",j5e,p(Ie(xo))+" ₽",1)):(l(),a("strong",O5e,"-"))])])):u("",!0),e.settings.need_promo_code?(l(),a("li",T5e,[t("p",U5e,[_(" Промокод "),((r=e.deliveryForm)==null?void 0:r.discount)>0?(l(),a("strong",I5e,p(e.deliveryForm.discount)+" ₽ ",1)):(l(),a("strong",V5e,E5e))])])):u("",!0),e.settings.shop_display_type==0?(l(),a(v,{key:2},[e.settings.need_person_counter&&e.settings.shop_display_type==0?(l(),a("li",D5e,[t("p",z5e,[_("Число гостей "),t("strong",B5e,[L5e,_(p(e.deliveryForm.persons)+" чел.",1)])])])):u("",!0),e.deliveryForm.need_pickup?u("",!0):(l(),a("li",R5e,[t("p",N5e,[_(" Цена доставки "),e.settings.need_automatic_delivery_request?(l(),a("span",{key:0,class:"d-flex justify-content-end text-decoration-underline","data-bs-toggle":e.deliveryForm.delivery_price>0?"modal":null,"data-bs-target":e.deliveryForm.delivery_price>0?"#delivery-price-modal":null},[e.deliveryForm.delivery_price>0?(l(),a(v,{key:0},[_(p(e.deliveryForm.delivery_price)+"₽ ",1)],64)):(l(),a(v,{key:1},[_(" не рассчитана ")],64))],8,q5e)):(l(),a("span",W5e,[_(" Рассчитывается курьером "),t("span",{class:"text-primary underline fw-bold cursor-pointer",onClick:o[1]||(o[1]=(...h)=>e.recalcDeliveryPrice&&e.recalcDeliveryPrice(...h))}," (повторить расчет) ")]))]),e.deliveryForm.delivery_price===0?(l(),a("button",{key:0,type:"button",class:"w-100 p-3 btn btn-primary",onClick:o[2]||(o[2]=(...h)=>e.recalcDeliveryPrice&&e.recalcDeliveryPrice(...h))},[Y5e,_(" Рассчитать цену доставки ")])):u("",!0)])),e.deliveryForm.payment_type===3&&e.settings.can_use_cash?(l(),a("div",H5e,[Q5e,t("div",G5e,[(l(!0),a(v,null,O(e.moneyVariants,h=>(l(),a("div",K5e,[t("button",{class:C(["btn btn-outline-primary w-100 mb-2 rounded-5",{"btn-primary text-white":e.deliveryForm.money===h}]),type:"button",onClick:g=>e.deliveryForm.money=h},p(h)+"₽ ",11,J5e)]))),256))]),X5e,t("div",Z5e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[3]||(o[3]=h=>e.deliveryForm.money=h),class:"form-control",id:"data-money",placeholder:"С какой суммы нужна сдача"},null,512),[[k,e.deliveryForm.money]]),eCe])])):u("",!0)],64)):u("",!0),e.settings.shop_display_type==1&&e.deliveryForm.cdek.tariff&&e.settings.need_automatic_delivery_request?(l(),a(v,{key:3},[t("li",tCe,[t("p",sCe,[_("Тариф "),t("strong",oCe,p(e.deliveryForm.cdek.tariff.tariff_name),1)])]),e.settings.need_hide_delivery_period?u("",!0):(l(),a("li",iCe,[t("p",nCe,[_("Время доставки займет от "),t("strong",lCe,p(e.deliveryForm.cdek.tariff.calendar_min),1),_(" до "),t("strong",aCe,p(e.deliveryForm.cdek.tariff.calendar_max),1),_(" дней ")])])),e.settings.need_automatic_delivery_request?(l(),a("li",rCe,[t("p",dCe,[_("Стоимость доставки "),t("strong",cCe,p(e.deliveryForm.cdek.tariff.delivery_sum)+" ₽",1)])])):u("",!0)],64)):u("",!0),(d=e.deliveryForm)!=null&&d.discount?(l(),a("li",uCe,[t("p",mCe,[_("Величина скидки "),t("strong",hCe,p((c=e.deliveryForm)==null?void 0:c.discount)+" ₽",1)])])):u("",!0),t("li",pCe,[t("p",_Ce,[_("Итого, цена "),t("strong",fCe,p(e.finallyPrice)+" ₽",1)])])])])]),e.settings.delivery_price_text?(l(),a("p",{key:0,innerHTML:e.settings.delivery_price_text},null,8,bCe)):u("",!0),(e.settings.min_price||0)>e.cartTotalPrice?(l(),a("p",gCe,[_("Минимальная цена заказа "),t("strong",yCe,p(e.settings.min_price||0)+" руб",1)])):u("",!0),t("div",vCe,[t("div",$Ce,[t("div",kCe,[t("div",wCe,[T(g5e,{onCallback:e.activateDiscount},null,8,["onCallback"]),e.deliveryForm.discount>0?(l(),a("h6",FCe,[_("Скидка за промокод "),t("strong",CCe,p(e.deliveryForm.discount)+" ₽",1)])):u("",!0)])])])]),t("div",PCe,[t("div",SCe,[t("div",xCe,[t("div",jCe,[OCe,t("div",TCe,[t("div",UCe,[t("button",{onClick:o[4]||(o[4]=(...h)=>e.decPersons&&e.decPersons(...h)),type:"button",class:"btn p-2 w-100 btn-primary"},VCe)]),t("div",MCe,[t("strong",ACe,p(e.deliveryForm.persons),1)]),t("div",ECe,[t("button",{type:"button",onClick:o[5]||(o[5]=(...h)=>e.incPersons&&e.incPersons(...h)),class:"btn p-2 w-100 btn-primary"},zCe)])])])])])])],64)):u("",!0)}}}),LCe={key:0,class:"list-group my-3"},RCe=t("i",{class:"fa-solid fa-file-invoice mr-2"},null,-1),NCe={class:"d-inline-flex justify-content-between w-100 px-2"},qCe={style:{width:"45px"},alt:""},WCe=t("i",{class:"fa-solid fa-earth-americas mr-2"},null,-1),YCe=t("span",{class:"px-2"},"Онлайн через бота",-1),HCe=[WCe,YCe],QCe=t("i",{class:"fa-regular fa-credit-card mr-2"},null,-1),GCe=t("span",{class:"px-2"},"Картой",-1),KCe=[QCe,GCe],JCe=t("i",{class:"fa-solid fa-file-invoice mr-2"},null,-1),XCe=t("span",{class:"px-2"},"Переводом",-1),ZCe=[JCe,XCe],ePe=t("i",{class:"fa-regular fa-money-bill-1 mr-2"},null,-1),tPe=t("span",{class:"px-2"},"Наличными",-1),sPe=[ePe,tPe],oPe=t("h6",{class:"opacity-75"},[_("Бонусы "),t("small",null,"(нажми для использования)")],-1),iPe={class:"card-body"},nPe={class:"d-flex justify-content-between mb-0"},lPe=t("span",null," Списать баллы",-1),aPe={props:["modelValue"],data(){return{deliveryForm:null}},watch:{deliveryForm:{handler:function(s){this.$emit("update:modelValue",this.deliveryForm)},deep:!0},modelValue:{handler:function(s){this.deliveryForm=s},deep:!0}},mounted(){this.deliveryForm=this.modelValue,this.settings.can_use_sbp&&(this.deliveryForm.payment_type=4)},computed:{...G(["cartProducts","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),settings(){return this.bot.settings},bot(){return window.currentBot}}},Xr=Object.assign(aPe,{__name:"PaymentTypes",setup(s){return(e,o)=>{var i;const n=ie("lazy");return l(),a(v,null,[e.deliveryForm?(l(),a("div",LCe,[e.settings.can_use_sbp?(l(),a("a",{key:0,href:"javascript:void(0)",class:C([{active:e.deliveryForm.payment_type===4},"list-group-item list-group-item-action p-3 d-flex align-items-center"]),onClick:o[0]||(o[0]=r=>e.deliveryForm.payment_type=4)},[RCe,t("span",NCe,[_(" Оплата по СБП "),f(t("img",qCe,null,512),[[n,"/images/СБП_логотип.svg"]])])],2)):u("",!0),e.settings.can_use_card&&e.settings.payment_token!=null?(l(),a("a",{key:1,href:"javascript:void(0)",onClick:o[1]||(o[1]=r=>e.deliveryForm.payment_type=0),class:C([{active:e.deliveryForm.payment_type===0},"list-group-item list-group-item-action p-3"]),"aria-current":"true"},HCe,2)):u("",!0),e.deliveryForm.pick_up_type==0&&e.settings.can_use_cash?(l(),a("a",{key:2,href:"javascript:void(0)",class:C([{active:e.deliveryForm.payment_type===1},"list-group-item list-group-item-action p-3"]),onClick:o[2]||(o[2]=r=>e.deliveryForm.payment_type=1)},KCe,2)):u("",!0),e.settings.can_use_cash?(l(),a("a",{key:3,href:"javascript:void(0)",class:C([{active:e.deliveryForm.payment_type===2},"list-group-item list-group-item-action p-3"]),onClick:o[3]||(o[3]=r=>e.deliveryForm.payment_type=2)},ZCe,2)):u("",!0),e.settings.can_use_cash?(l(),a("a",{key:4,href:"javascript:void(0)",class:C([{active:e.deliveryForm.payment_type===3},"list-group-item list-group-item-action p-3"]),onClick:o[4]||(o[4]=r=>e.deliveryForm.payment_type=3)},sPe,2)):u("",!0)])):u("",!0),e.settings.need_bonuses_section&&Ie(xo)()>0?(l(),a(v,{key:1},[oPe,t("div",{class:C(["card my-3",{"text-bg-primary":(i=e.deliveryForm)==null?void 0:i.use_cashback}]),onClick:o[5]||(o[5]=r=>{var d;return e.deliveryForm.use_cashback=!((d=e.deliveryForm)!=null&&d.use_cashback)})},[t("div",iPe,[t("p",nPe,[lPe,t("strong",null,p(Ie(xo)())+"₽",1)])])],2)],64)):u("",!0)],64)}}}),rPe={props:["modelValue"],data(){return{offer_agreement:!1}},watch:{modelValue:{handler:function(s){this.offer_agreement=s},deep:!0},offer_agreement:{handler:function(s){this.$emit("update:modelValue",this.offer_agreement)},deep:!0}},mounted(){this.offer_agreement=this.modelValue||!1},computed:{bot(){return window.currentBot},settings(){return this.bot.settings}}},dPe={key:0,class:"alert alert-light my-2 border-primary"},cPe={class:"mb-2"},uPe=["href"],mPe=t("a",{href:"https://www.consultant.ru/document/cons_doc_LAW_61801/",target:"_blank"}," Федеральному закону №152-ФЗ ",-1),hPe={class:"form-check form-switch"},pPe=t("label",{class:"form-check-label fw-bold",for:"offerSwitch"},"Я соглашаюсь",-1),_Pe={key:1,class:"alert alert-light my-2 border-primary"},fPe=t("p",{class:"mb-2"}," Нажимая кнопку, вы соглашаетесь с условиями договора оферты данной компании. ",-1),bPe={class:"form-check form-switch"},gPe=t("label",{class:"form-check-label fw-bold",for:"offerSwitch"},"Я соглашаюсь",-1);function yPe(s,e,o,n,i,r){var d,c;return(d=r.bot.company.law_params)!=null&&d.offer_link?(l(),a("div",dPe,[t("p",cPe,[_(" Нажимая кнопку, вы соглашаетесь с условиями "),t("a",{href:(c=r.bot.company.law_params)==null?void 0:c.offer_link,class:"fw-bold",target:"_blank"},"договора оферты",8,uPe),_(", а также вы даете согласие на обработку персональных данных согласно "),mPe]),t("div",hPe,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>i.offer_agreement=h),class:"form-check-input",type:"checkbox",role:"switch",id:"offerSwitch",checked:""},null,512),[[z,i.offer_agreement]]),pPe])])):(l(),a("div",_Pe,[fPe,t("div",bPe,[f(t("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>i.offer_agreement=h),class:"form-check-input",type:"checkbox",role:"switch",id:"offerSwitch",checked:""},null,512),[[z,i.offer_agreement]]),gPe])]))}const Zr=oe(rPe,[["render",yPe]]),vPe={props:["modelValue","mode"],data(){return{deliveryForm:null,need_select_table_by_number:!1}},watch:{deliveryForm:{handler:function(s){localStorage.setItem("cashman_self_product_delivery_form_address",this.deliveryForm.address||""),localStorage.setItem("cashman_self_product_delivery_form_city",this.deliveryForm.city||""),localStorage.setItem("cashman_self_product_delivery_form_street",this.deliveryForm.street||""),localStorage.setItem("cashman_self_product_delivery_form_building",this.deliveryForm.building||""),localStorage.setItem("cashman_self_product_delivery_form_flat_number",this.deliveryForm.flat_number||""),localStorage.setItem("cashman_self_product_delivery_form_entrance_number",this.deliveryForm.entrance_number||""),(this.deliveryForm.disabilities||[]).length>0?localStorage.setItem("cashman_self_product_delivery_form_entrance_disabilities",JSON.stringify(this.deliveryForm.disabilities||[])):localStorage.removeItem("cashman_self_product_delivery_form_entrance_disabilities"),this.$emit("update:modelValue",this.deliveryForm)},deep:!0},modelValue:{handler:function(s){this.deliveryForm=s},deep:!0}},mounted(){this.deliveryForm=this.modelValue,this.deliveryForm.name=localStorage.getItem("cashman_self_product_delivery_form_name")!=null?localStorage.getItem("cashman_self_product_delivery_form_name"):null,this.deliveryForm.phone=localStorage.getItem("cashman_self_product_delivery_form_phone")!=null?localStorage.getItem("cashman_self_product_delivery_form_phone"):null,this.deliveryForm.address=localStorage.getItem("cashman_self_product_delivery_form_address")!=null?localStorage.getItem("cashman_self_product_delivery_form_address"):null,this.deliveryForm.city=localStorage.getItem("cashman_self_product_delivery_form_city")!=null?localStorage.getItem("cashman_self_product_delivery_form_city"):null,this.deliveryForm.street=localStorage.getItem("cashman_self_product_delivery_form_street")!=null?localStorage.getItem("cashman_self_product_delivery_form_street"):null,this.deliveryForm.building=localStorage.getItem("cashman_self_product_delivery_form_building")!=null?localStorage.getItem("cashman_self_product_delivery_form_building"):null,this.deliveryForm.flat_number=localStorage.getItem("cashman_self_product_delivery_form_flat_number")!=null?localStorage.getItem("cashman_self_product_delivery_form_flat_number"):null,this.deliveryForm.entrance_number=localStorage.getItem("cashman_self_product_delivery_form_entrance_number")!=null?localStorage.getItem("cashman_self_product_delivery_form_entrance_number"):null,this.deliveryForm.disabilities=localStorage.getItem("cashman_self_product_delivery_form_entrance_disabilities")!=null?JSON.parse(localStorage.getItem("cashman_self_product_delivery_form_entrance_disabilities")):[],this.deliveryForm.disabilities.length>0&&(this.deliveryForm.has_disability=!0)},computed:{bot(){return window.currentBot},settings(){return this.bot.settings}}},$Pe={class:"form-floating mb-2"},kPe=t("label",{for:"deliveryForm-name"},[_("Ф.И.О. "),t("span",{class:"fw-bold text-danger"},"*")],-1),wPe={class:"form-floating mb-2"},FPe=t("label",{for:"deliveryForm-phone"},[_("Номер телефона "),t("span",{class:"fw-bold text-danger"},"*")],-1),CPe={class:"form-floating"},PPe=t("label",{for:"deliveryForm-info"},"Информация для сотрудника",-1),SPe={class:"form-floating mb-2"},xPe=t("label",{for:"deliveryForm-name"},[_("Ф.И.О. "),t("span",{class:"fw-bold text-danger"},"*")],-1),jPe={class:"form-floating mb-2"},OPe=t("label",{for:"deliveryForm-phone"},[_("Номер телефона "),t("span",{class:"fw-bold text-danger"},"*")],-1),TPe={class:"form-floating mb-2"},UPe=t("label",{for:"deliveryForm-city"},[_("Ваш город "),t("span",{class:"fw-bold text-danger"},"*")],-1),IPe={class:"form-floating mb-2"},VPe=t("label",{for:"deliveryForm-street"},[_("Улица "),t("span",{class:"fw-bold text-danger"},"*")],-1),MPe={class:"form-floating mb-2"},APe=t("label",{for:"deliveryForm-building"},[_("Номер дома "),t("span",{class:"fw-bold text-danger"},"*")],-1),EPe={class:"form-floating mb-2"},DPe=t("label",{for:"deliveryForm-flat-number"},"Номер квартиры ",-1),zPe={class:"form-floating mb-2"},BPe=t("label",{for:"deliveryForm-entrance-number"},"Номер подъезда",-1),LPe={class:"form-floating mb-2"},RPe=t("label",{for:"deliveryForm-floor-number"},"Номер этажа",-1),NPe={class:"form-check form-switch mb-2"},qPe=t("label",{class:"form-check-label",for:"select-table-number-from-list"},"Выбрать номер столика из списка",-1),WPe={key:0,class:"row row-cols-5"},YPe={class:"col"},HPe=["onClick"],QPe={key:1,class:"form-floating mb-2"},GPe=t("label",{for:"deliveryForm-table-number"},"Номер столика",-1),KPe={class:"form-floating"},JPe={key:0,for:"deliveryForm-info"},XPe={key:1,for:"deliveryForm-info"},ZPe=t("h6",{class:"opacity-75 mt-3"},"К какому времени приготовить?",-1),eSe={class:"list-group my-3"},tSe=t("i",{class:"fa-solid fa-stopwatch-20 mr-2"},null,-1),sSe=t("span",{class:"px-2"},"По готовности",-1),oSe=[tSe,sSe],iSe=t("i",{class:"fa-regular fa-clock mr-2"},null,-1),nSe=t("span",{class:"px-2"},"К указанному времени",-1),lSe=[iSe,nSe],aSe={key:0,class:"form-floating"},rSe=t("label",{for:"deliveryForm-time"},"Время доставки",-1),dSe={key:0,class:"opacity-75 mt-3"},cSe={key:1,class:"list-group my-3"},uSe=t("i",{class:"fa-regular fa-heart mr-2"},null,-1),mSe=t("span",{class:"px-2"},"Нет ограничений по здоровью",-1),hSe=[uSe,mSe],pSe=t("i",{class:"fa-solid fa-house-medical-flag mr-2"},null,-1),_Se=t("span",{class:"px-2"},"Есть ограничения по здоровью",-1),fSe=[pSe,_Se],bSe={key:2,class:"list-group my-3"},gSe={href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between","aria-current":"true"},ySe=t("label",{for:"switch-1"},[t("i",{class:"fa-solid fa-head-side-mask mr-2"}),_(" Болею")],-1),vSe={href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between","aria-current":"true"},$Se=t("label",{for:"switch-5"},[t("i",{class:"fa-solid fa-ear-deaf mr-2"}),_(" Плохо слышит \\ говорит")],-1),kSe={href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between","aria-current":"true"},wSe=t("label",{for:"switch-3"},[t("i",{class:"fa-solid fa-glasses mr-2"}),_(" Слабовидящий")],-1),FSe={href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between","aria-current":"true"},CSe=t("label",{for:"switch-4"},[t("i",{class:"fa-solid fa-wheelchair mr-2"}),_(" Ограничения мобильности")],-1),PSe={href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between","aria-current":"true"},SSe=t("label",{for:"switch-5"},[t("i",{class:"fa-solid fa-person-dots-from-line mr-2"}),_(" Пищевая аллергия")],-1),xSe={key:3,class:"form-floating mb-2"},jSe=t("label",{for:"floatingInput"},[_("Укажите на что аллергия "),t("span",{class:"fw-bold text-danger"},"*")],-1);function OSe(s,e,o,n,i,r){const d=ie("mask");return l(),a(v,null,[o.mode===1&&i.deliveryForm?(l(),a(v,{key:0},[t("div",$Pe,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=c=>i.deliveryForm.name=c),class:"form-control",id:"deliveryForm-name",placeholder:"Иванов Иван Иванович",required:""},null,512),[[k,i.deliveryForm.name]]),kPe]),t("div",wPe,[f(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=c=>i.deliveryForm.phone=c),class:"form-control",id:"deliveryForm-phone",placeholder:"+7(000)000-00-00",required:""},null,512),[[d,"+7(###)###-##-##"],[k,i.deliveryForm.phone]]),FPe]),t("div",CPe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=c=>i.deliveryForm.info=c),style:{height:"200px","line-height":"150%"},placeholder:"Информация",id:"deliveryForm-info"},null,512),[[k,i.deliveryForm.info]]),PPe])],64)):u("",!0),o.mode===0&&i.deliveryForm?(l(),a(v,{key:1},[t("div",SPe,[f(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=c=>i.deliveryForm.name=c),class:"form-control",id:"deliveryForm-name",placeholder:"Иванов Иван Иванович",required:""},null,512),[[k,i.deliveryForm.name]]),xPe]),t("div",jPe,[f(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>i.deliveryForm.phone=c),class:"form-control",id:"deliveryForm-phone",placeholder:"+7(000)000-00-00",required:""},null,512),[[d,"+7(###)###-##-##"],[k,i.deliveryForm.phone]]),OPe]),i.deliveryForm.need_pickup?(l(),a(v,{key:1},[r.settings.need_table_list?(l(),a(v,{key:0},[t("div",NPe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=c=>i.need_select_table_by_number=c),role:"switch",id:"select-table-number-from-list"},null,512),[[z,i.need_select_table_by_number]]),qPe]),i.need_select_table_by_number?(l(),a("div",WPe,[(l(!0),a(v,null,O(parseInt(r.settings.max_tables),c=>(l(),a("div",YPe,[t("a",{href:"javascript:void(0)",onClick:h=>i.deliveryForm.table_number=c,class:C([{"btn-primary":i.deliveryForm.table_number==c,"btn-outline-primary":i.deliveryForm.table_number!=c},"btn w-100 mb-2"])},p(c),11,HPe)]))),256))])):u("",!0)],64)):u("",!0),i.deliveryForm.pick_up_type=="0"?(l(),a("div",QPe,[f(t("input",{type:"number",min:"1",max:"200","onUpdate:modelValue":e[12]||(e[12]=c=>i.deliveryForm.table_number=c),class:"form-control",id:"deliveryForm-table-number",placeholder:"Номер столика"},null,512),[[k,i.deliveryForm.table_number]]),GPe])):u("",!0)],64)):(l(),a(v,{key:0},[t("div",TPe,[f(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=c=>i.deliveryForm.city=c),class:"form-control",id:"deliveryForm-city",placeholder:"Ваш город",required:""},null,512),[[k,i.deliveryForm.city]]),UPe]),t("div",IPe,[f(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=c=>i.deliveryForm.street=c),class:"form-control",id:"deliveryForm-street",placeholder:"Улица",required:""},null,512),[[k,i.deliveryForm.street]]),VPe]),t("div",MPe,[f(t("input",{type:"text","onUpdate:modelValue":e[7]||(e[7]=c=>i.deliveryForm.building=c),class:"form-control",id:"deliveryForm-building",placeholder:"Номер дома",required:""},null,512),[[k,i.deliveryForm.building]]),APe]),t("div",EPe,[f(t("input",{type:"text","onUpdate:modelValue":e[8]||(e[8]=c=>i.deliveryForm.flat_number=c),class:"form-control",id:"deliveryForm-flat-number",placeholder:"Номер квартиры"},null,512),[[k,i.deliveryForm.flat_number]]),DPe]),t("div",zPe,[f(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=c=>i.deliveryForm.entrance_number=c),class:"form-control",id:"deliveryForm-entrance-number",placeholder:"Номер подъезда"},null,512),[[k,i.deliveryForm.entrance_number]]),BPe]),t("div",LPe,[f(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=c=>i.deliveryForm.floor_number=c),class:"form-control",id:"deliveryForm-floor-number",placeholder:"Номер этажа"},null,512),[[k,i.deliveryForm.floor_number]]),RPe])],64)),t("div",KPe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[13]||(e[13]=c=>i.deliveryForm.info=c),style:{height:"200px","line-height":"150%"},placeholder:"Информация",id:"deliveryForm-info"},null,512),[[k,i.deliveryForm.info]]),i.deliveryForm.need_pickup?(l(),a("label",XPe,"Информация для сотрудника")):(l(),a("label",JPe,"Информация для доставщика"))]),i.deliveryForm.need_pickup?u("",!0):(l(),a(v,{key:2},[ZPe,t("div",eSe,[t("a",{href:"javascript:void(0)",class:C([{active:i.deliveryForm.when_ready},"list-group-item list-group-item-action p-3"]),onClick:e[14]||(e[14]=c=>i.deliveryForm.when_ready=!0),"aria-current":"true"},oSe,2),t("a",{href:"javascript:void(0)",onClick:e[15]||(e[15]=c=>i.deliveryForm.when_ready=!1),class:C([{active:!i.deliveryForm.when_ready},"list-group-item list-group-item-action p-3"])},lSe,2)]),i.deliveryForm.when_ready?u("",!0):(l(),a("div",aSe,[f(t("input",{type:"datetime-local","onUpdate:modelValue":e[16]||(e[16]=c=>i.deliveryForm.time=c),class:"form-control",id:"deliveryForm-time",placeholder:"Время доставки",required:""},null,512),[[k,i.deliveryForm.time]]),rSe]))],64)),r.settings.need_health_restrictions?(l(),a(v,{key:3},[i.deliveryForm.need_pickup?u("",!0):(l(),a("h6",dSe,"Ограничения по здоровью")),i.deliveryForm.need_pickup?u("",!0):(l(),a("div",cSe,[t("a",{href:"javascript:void(0)",onClick:e[17]||(e[17]=c=>i.deliveryForm.has_disability=!1),class:C([{active:!i.deliveryForm.has_disability},"list-group-item list-group-item-action p-3"])},hSe,2),t("a",{href:"javascript:void(0)",class:C([{active:i.deliveryForm.has_disability},"list-group-item list-group-item-action p-3"]),onClick:e[18]||(e[18]=c=>i.deliveryForm.has_disability=!0),"aria-current":"true"},fSe,2)])),i.deliveryForm.has_disability&&!i.deliveryForm.need_pickup?(l(),a("div",bSe,[t("a",gSe,[ySe,f(t("input",{type:"checkbox",value:"болею",class:"form-check-input","onUpdate:modelValue":e[19]||(e[19]=c=>i.deliveryForm.disabilities=c),id:"switch-1"},null,512),[[z,i.deliveryForm.disabilities]])]),t("a",vSe,[$Se,f(t("input",{type:"checkbox",value:"плохо слышит или говорит",class:"form-check-input","onUpdate:modelValue":e[20]||(e[20]=c=>i.deliveryForm.disabilities=c),id:"switch-5"},null,512),[[z,i.deliveryForm.disabilities]])]),t("a",kSe,[wSe,f(t("input",{type:"checkbox",value:"слабовидящий",class:"form-check-input","onUpdate:modelValue":e[21]||(e[21]=c=>i.deliveryForm.disabilities=c),id:"switch-3"},null,512),[[z,i.deliveryForm.disabilities]])]),t("a",FSe,[CSe,f(t("input",{type:"checkbox",class:"form-check-input",value:"ограничения мобильности","onUpdate:modelValue":e[22]||(e[22]=c=>i.deliveryForm.disabilities=c),id:"switch-4"},null,512),[[z,i.deliveryForm.disabilities]])]),t("a",PSe,[SSe,f(t("input",{type:"checkbox",class:"form-check-input",value:"пищевая аллергия","onUpdate:modelValue":e[23]||(e[23]=c=>i.deliveryForm.disabilities=c),id:"switch-5"},null,512),[[z,i.deliveryForm.disabilities]])])])):u("",!0),i.deliveryForm.disabilities.indexOf("пищевая аллергия")!==-1?(l(),a("div",xSe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[24]||(e[24]=c=>i.deliveryForm.allergy=c),id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,i.deliveryForm.allergy]]),jSe])):u("",!0)],64)):u("",!0)],64)):u("",!0)],64)}const ed=oe(vPe,[["render",OSe]]),TSe={props:["modelValue"],data(){return{deliveryForm:null}},watch:{deliveryForm:{handler:function(s){this.$emit("update:modelValue",this.deliveryForm)},deep:!0},modelValue:{handler:function(s){this.deliveryForm=s},deep:!0}},mounted(){this.deliveryForm=this.modelValue},computed:{bot(){return window.currentBot},settings(){return this.bot.settings}}},USe={key:0,class:"list-group my-3"},ISe=t("i",{class:"fa-solid fa-truck mr-2"},null,-1),VSe=t("span",{class:"px-2"},"Доставка",-1),MSe=[ISe,VSe],ASe=t("i",{class:"fa-brands fa-shopify mr-2"},null,-1),ESe=t("span",{class:"px-2"},"Самовывоз",-1),DSe=[ASe,ESe],zSe={key:0,href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between"},BSe=t("label",{class:"form-check-label",for:"in-restaurant"},[t("i",{class:"fa-solid fa-utensils mr-2"}),t("span",{class:"px-2"},"В заведении")],-1),LSe={key:1,href:"javascript:void(0)",class:"list-group-item list-group-item-action p-3 d-flex justify-content-between"},RSe=t("label",{class:"form-check-label",for:"pick-up-in-package"},[t("i",{class:"fa-solid fa-person-walking-luggage mr-2"}),t("span",{class:"px-2"},"Забрать с собой")],-1);function NSe(s,e,o,n,i,r){return i.deliveryForm?(l(),a("div",USe,[t("a",{href:"javascript:void(0)",class:C([{active:!i.deliveryForm.need_pickup},"list-group-item list-group-item-action p-3"]),onClick:e[0]||(e[0]=d=>i.deliveryForm.need_pickup=!1),"aria-current":"true"},MSe,2),t("a",{href:"javascript:void(0)",onClick:e[1]||(e[1]=d=>i.deliveryForm.need_pickup=!0),class:C([{active:i.deliveryForm.need_pickup},"list-group-item list-group-item-action p-3"])},DSe,2),i.deliveryForm.need_pickup?(l(),a("a",zSe,[BSe,f(t("input",{class:"form-check-input",name:"pickup-format","onUpdate:modelValue":e[2]||(e[2]=d=>i.deliveryForm.pick_up_type=d),type:"radio",value:"0",id:"in-restaurant"},null,512),[[ct,i.deliveryForm.pick_up_type]])])):u("",!0),i.deliveryForm.need_pickup?(l(),a("a",LSe,[RSe,f(t("input",{class:"form-check-input",type:"radio",value:"1","onUpdate:modelValue":e[3]||(e[3]=d=>i.deliveryForm.pick_up_type=d),name:"pickup-format",id:"pick-up-in-package"},null,512),[[ct,i.deliveryForm.pick_up_type]])])):u("",!0)])):u("",!0)}const qSe=oe(TSe,[["render",NSe]]),WSe=t("h6",{class:"opacity-75"},"Способы получения заказа",-1),YSe=t("h6",{class:"opacity-75 mb-3"},"Информация",-1),HSe=t("h6",{class:"opacity-75"},"Способы оплаты",-1),QSe={key:0,class:"alert alert-danger fw-bold mb-2"},GSe=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),KSe={key:1,class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},JSe=["disabled"],XSe=t("i",{class:"fa-solid fa-map-location-dot mr-2"},null,-1),ZSe=t("span",{class:"px-2"},"Рассчитать цену доставки",-1),e4e={key:0,class:"spinner-border ml-2 spinner-border-sm",role:"status"},t4e=t("span",{class:"visually-hidden"},"Loading...",-1),s4e=[t4e],o4e=["disabled"],i4e={key:0,class:"fa-solid fa-file-invoice mr-2"},n4e={key:1,class:"fa-solid fa-hourglass mr-2"},l4e=["disabled"],a4e={style:{width:"80px","object-fit":"cover","margin-left":"10px"},alt:""},r4e=["disabled"],d4e=t("i",{class:"fa-solid fa-receipt mr-2"},null,-1),c4e={key:1,type:"button",class:"btn btn-primary p-3 w-100 d-flex align-items-center justify-content-center"},u4e={key:0,class:"spinner-border ml-2 spinner-border-sm",role:"status"},m4e=t("span",{class:"visually-hidden"},"Loading...",-1),h4e=[m4e],p4e={class:"modal fade",id:"delivery-price-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},_4e={class:"modal-dialog modal-dialog-centered"},f4e={class:"modal-content"},b4e=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Детали расчета цены доставки"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g4e={class:"modal-body"},y4e=t("div",{class:"d-flex justify-content-center align-items-center",style:{height:"100px"}},[t("div",{class:"spinner-border text-primary",role:"status"},[t("span",{class:"visually-hidden"},"Загрузка...")])],-1),v4e=t("p",{class:"text-primary text-center fw-bold"},"Рассчитываем стоимость доставки",-1),$4e={key:1,class:"container"},k4e={class:"fw-bold mb-2"},w4e={key:0},F4e={key:1},C4e={class:"list-group mb-2 list-group-flush"},P4e={class:"list-group-item"},S4e={class:"d-flex justify-content-between w-100"},x4e={class:"fw-bold"},j4e={class:"badge bg-primary mx-2"},O4e={class:"badge bg-primary"},T4e={class:"fw-bold d-flex justify-content-between"},U4e={class:"badge bg-primary"},I4e={class:"fw-bold d-flex justify-content-between"},V4e={class:"badge bg-primary"},M4e={key:1,class:"alert alert-light"},A4e=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary p-3 w-100","data-bs-dismiss":"modal"},"Закрыть ")],-1),E4e={props:["modelValue"],data(){return{spent_time:0,deliveryForm:null,offer_agreement:!0,delivery_price_request_step:0,loading_delivery:!1,delivery_message:"",need_select_table_by_number:!1,need_request_delivery_price:!0,error_delivery_price_message:null,moneyVariants:[500,1e3,2e3,5e3]}},watch:{deliveryForm:{handler:function(s){this.$emit("update:modelValue",this.deliveryForm)},deep:!0},"deliveryForm.need_pickup":{handler:function(s){this.delivery_price_request_step=(this.deliveryForm.need_pickup===!0?1:0)||(this.settings.need_automatic_delivery_request?0:1)},deep:!0},modelValue:{handler:function(s){this.deliveryForm=s},deep:!0},cartTotalPrice:{handler:function(s){this.settings.free_shipping_starts_from<=this.cartTotalPrice&&(this.deliveryForm.delivery_price=0,this.delivery_price_request_step=1)},deep:!0}},computed:{...G(["cartProducts","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},settings(){return this.bot.settings},canRequestDeliverPrice(){return this.need_request_delivery_price&&this.deliveryForm.city!=null&&this.deliveryForm.street!=null&&this.deliveryForm.building!=null},canSubmitForm(){var e;return((e=this.deliveryForm)!=null&&e.use_cashback?this.cartTotalPrice-xo()>(this.settings.min_price||0):this.cartTotalPrice>=(this.settings.min_price||0))&&!(this.spent_time>0)}},mounted(){this.deliveryForm=this.modelValue,el(),window.addEventListener("trigger-spent-timer",s=>{this.spent_time=s.detail}),this.delivery_price_request_step=(this.deliveryForm.need_pickup===!0?1:0)||(this.settings.need_automatic_delivery_request?0:1)},methods:{goToProductCart(){document.dispatchEvent(new Event("switch-to-cart"))},requestDeliveryPrice(){this.need_request_delivery_price=!1,this.error_delivery_price_message=null,this.loading_delivery=!0,this.$notify({title:"Корзина",text:"Мы начали процесс расчета цены доставки"});const s=bootstrap.Modal.getOrCreateInstance(document.getElementById("delivery-price-modal"));s&&s.show(),this.$store.dispatch("requestDeliveryPrice",{city:this.deliveryForm.city,street:this.deliveryForm.street,building:this.deliveryForm.building}).then(e=>{this.deliveryForm.delivery_price=e.price||0,this.deliveryForm.distance=e.distance||0,this.deliveryForm.delivery_details=e.config||[],this.need_request_delivery_price=!0,this.delivery_price_request_step=1,this.$notify({title:"Корзина",text:"Цена доставки успешно просчитана",type:"success"}),this.loading_delivery=!1}).catch(()=>{this.deliveryForm.delivery_price=0,this.deliveryForm.distance=0,this.need_request_delivery_price=!0,this.delivery_price_request_step=1,this.error_delivery_price_message="Цена будет рассчитана курьером в момент доставки!",this.$notify({title:"Корзина",text:"Ошибка расчёта цены доставки",type:"error"}),this.loading_delivery=!1})},startCheckout(){this.spent_time>0||(console.log("startCheckout"),this.$emit("start-checkout"),jo(10))},nextStep(){if(this.spent_time>0)return;const e=document.getElementById("basket").querySelectorAll("[required]");let o=!0;if(Array.from(e).reverse().forEach(r=>{r.value.trim()||(r.focus(),o=!1)}),!o){this.$notify({title:"Корзина",text:"Пожалуйста, заполните все обязательные поля.",type:"error"});return}this.$emit("change-tab",3),jo(10)}}},D4e=Object.assign(E4e,{__name:"CheckoutProductForm",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[e.deliveryForm?(l(),a("form",{key:0,id:"basket",class:"container py-3",onSubmit:o[8]||(o[8]=W((...i)=>e.startCheckout&&e.startCheckout(...i),["prevent"]))},[WSe,T(qSe,{modelValue:e.deliveryForm,"onUpdate:modelValue":o[0]||(o[0]=i=>e.deliveryForm=i)},null,8,["modelValue"]),YSe,T(ed,{modelValue:e.deliveryForm,"onUpdate:modelValue":o[1]||(o[1]=i=>e.deliveryForm=i),mode:0},null,8,["modelValue"]),T(Zr,{modelValue:e.offer_agreement,"onUpdate:modelValue":o[2]||(o[2]=i=>e.offer_agreement=i)},null,8,["modelValue"]),HSe,T(Xr,{modelValue:e.deliveryForm,"onUpdate:modelValue":o[3]||(o[3]=i=>e.deliveryForm=i)},null,8,["modelValue"]),T(Jr,{onCalcDeliveryPrice:e.requestDeliveryPrice,modelValue:e.deliveryForm,"onUpdate:modelValue":o[4]||(o[4]=i=>e.deliveryForm=i)},null,8,["onCalcDeliveryPrice","modelValue"]),e.error_delivery_price_message?(l(),a("p",QSe,p(e.error_delivery_price_message),1)):u("",!0),t("button",{type:"button",onClick:o[5]||(o[5]=(...i)=>e.goToProductCart&&e.goToProductCart(...i)),class:"btn btn-primary w-100 p-3"},[GSe,_(" Корзина с товаром ")]),e.offer_agreement?(l(),a("nav",KSe,[e.spent_time<=0?(l(),a(v,{key:0},[e.settings.need_automatic_delivery_request?(l(),a(v,{key:0},[e.delivery_price_request_step===0?(l(),a("button",{key:0,onClick:o[6]||(o[6]=(...i)=>e.requestDeliveryPrice&&e.requestDeliveryPrice(...i)),class:"btn btn-primary text-white p-3 w-100 d-flex align-items-center justify-content-center",disabled:!e.canRequestDeliverPrice},[XSe,ZSe,e.need_request_delivery_price?u("",!0):(l(),a("div",e4e,s4e))],8,JSe)):u("",!0)],64)):u("",!0),e.delivery_price_request_step===1?(l(),a(v,{key:1},[e.settings.need_pay_after_call||e.deliveryForm.payment_type===3?(l(),a("button",{key:0,disabled:!e.canSubmitForm,class:"btn btn-primary p-3 w-100"},[e.spent_time<=0?(l(),a("i",i4e)):(l(),a("i",n4e)),_(" Оформить ")],8,o4e)):u("",!0),e.deliveryForm.payment_type===4&&!e.settings.need_pay_after_call?(l(),a("button",{key:1,disabled:!e.canSubmitForm,class:"btn btn-primary p-3 w-100 d-flex justify-content-center align-items-center"},[_(" Оплатить через "),f(t("img",a4e,null,512),[[n,"/images/Т-Банк.png"]])],8,l4e)):u("",!0),e.deliveryForm.payment_type===2&&!e.settings.need_pay_after_call?(l(),a("button",{key:2,type:"button",onClick:o[7]||(o[7]=(...i)=>e.nextStep&&e.nextStep(...i)),disabled:!e.canSubmitForm,class:"btn btn-primary p-3 w-100"},[d4e,_(" Оплатить переводом ")],8,r4e)):u("",!0)],64)):u("",!0)],64)):(l(),a("button",c4e,[_(" Осталось ждать "+p(e.spent_time||0)+" сек. ",1),e.canSubmitForm?u("",!0):(l(),a("div",u4e,h4e))]))])):u("",!0)],32)):u("",!0),t("div",p4e,[t("div",_4e,[t("div",f4e,[b4e,t("div",g4e,[!e.deliveryForm||e.loading_delivery?(l(),a(v,{key:0},[y4e,v4e],64)):u("",!0),e.deliveryForm&&!e.loading_delivery?(l(),a("div",$4e,[t("h6",k4e,[(e.deliveryForm.delivery_details||[]).length>1?(l(),a("span",w4e,"Цена доставки формируется из")):(l(),a("span",F4e,"Цена доставки"))]),t("ul",C4e,[(e.deliveryForm.delivery_details||[]).length>0?(l(!0),a(v,{key:0},O(Object.keys(e.deliveryForm.delivery_details),i=>(l(),a("li",P4e,[t("div",S4e,[t("span",x4e,p(e.deliveryForm.delivery_details[i].title),1),t("span",null,[t("span",j4e,p(e.deliveryForm.delivery_details[i].distance)+" км",1),t("span",O4e,p(e.deliveryForm.delivery_details[i].price)+" руб.",1)])])]))),256)):u("",!0)]),e.deliveryForm.distance>0&&e.deliveryForm.delivery_price>0?(l(),a(v,{key:0},[t("h6",T4e,[_(" Общее расстояние "),t("span",U4e,p(e.deliveryForm.distance)+" км",1)]),t("h6",I4e,[_(" Общая сумма за доставку "),t("span",V4e,p(e.deliveryForm.delivery_price)+" руб.",1)])],64)):(l(),a("p",M4e,"Цена доставки будет рассчитана курьером! Проверьте корректность введенного вами адреса и попробуйте расчитать доставку еще раз!"))])):u("",!0)]),A4e])])])],64)}}});const z4e={props:["config"],data(){return{officeModal:null,load_regions:!1,load_cities:!1,search_office:null,regions:[],cities:[],offices:[],region:null,city:null,office:null}},computed:{filteredOffices(){return this.search_office?this.offices.filter(s=>s.location.address_full.toLowerCase().indexOf(this.search_office.toLowerCase().trim())!==-1):this.offices},uuid(){return Bt()}},mounted(){this.config&&(this.region=this.config.region||null,this.city=this.config.city||null,this.office=this.config.office||null),this.officeModal=new bootstrap.Modal(document.getElementById("select-cdek-office"+this.uuid),{}),this.loadCdekRegions()},methods:{onInputCity(){this.offices=[]},openOfficeModal(){this.officeModal.show()},selectOffice(s){this.office=s,this.$emit("callback",{city:this.city,region:this.region,office:this.office}),this.officeModal.toggle()},selectCity(s){this.city=s,this.loadCdekOffices()},selectRegion(s){this.region=s,this.loadCdekCities()},loadCdekRegions(){this.load_regions=!1,this.$store.dispatch("loadCdekRegions").then(s=>{this.regions=s||[],this.region&&this.regions.findIndex(o=>o.region_code===this.region.region_code)===-1&&(this.region=null),this.load_regions=!0})},loadCdekOffices(){this.$store.dispatch("loadCdekOffices",{page:0,size:100,city_code:this.city.code}).then(s=>{this.offices=s,this.office&&this.offices.findIndex(o=>o.code===this.office.code)===-1&&(this.office=null)})},loadCdekCities(){this.region==null||!this.region.region_code||(this.load_cities=!1,this.$store.dispatch("loadCdekCities",{region_code:this.region.region_code}).then(s=>{this.cities=s,this.city&&this.cities.findIndex(o=>o.code===this.city.code)===-1&&(this.city=null),this.load_cities=!0}))}}},B4e={key:1,class:"alert alert-light"},L4e=t("p",{class:"text-center"},"Загружаем данные по регионам...",-1),R4e=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),N4e=[L4e,R4e],q4e={key:1,class:"alert alert-light"},W4e=t("p",{class:"text-center"},"Загружаем данные по городам...",-1),Y4e=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),H4e=[W4e,Y4e],Q4e=["disabled"],G4e={key:0},K4e=t("i",{class:"fa-solid fa-city text-primary"},null,-1),J4e={class:"fw-bold"},X4e={key:1},Z4e=t("i",{class:"fa-solid fa-building-circle-arrow-right"},null,-1),e6e=["id"],t6e={class:"modal-dialog modal-fullscreen"},s6e={class:"modal-content"},o6e=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор офиса"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i6e={key:0,class:"modal-body"},n6e={class:"input-group mb-2"},l6e={class:"form-floating"},a6e=t("label",{for:"search-product"},"Поиск по адресам",-1),r6e=t("button",{class:"btn btn-outline-light",type:"button",id:"button-addon2"},[t("i",{class:"fa-solid fa-magnifying-glass-arrow-right"})],-1),d6e={class:"card w-100 mb-2 border-light"},c6e=["src"],u6e={class:"card-body"},m6e={class:"card-title"},h6e={class:"card-text small fst-italic"},p6e={class:"card-text"},_6e=["href"],f6e=t("i",{class:"fa-solid fa-map-location-dot"},null,-1),b6e=["onClick"],g6e=t("i",{class:"fa-solid fa-building-circle-arrow-right"},null,-1);function y6e(s,e,o,n,i,r){const d=Qe("vue3-simple-typeahead");return l(),a(v,null,[i.load_regions?(l(),M(d,{key:0,items:i.regions,defaultItem:i.region,class:"form-control w-100 p-3 mb-2",placeholder:"Выбор региона",onSelectItem:r.selectRegion,onOnInput:s.onInput,onOnBlur:s.onBlur,minInputLength:1,itemProjection:c=>c.region},null,8,["items","defaultItem","onSelectItem","onOnInput","onOnBlur","itemProjection"])):(l(),a("div",B4e,N4e)),i.region?(l(),a(v,{key:2},[i.load_cities?(l(),M(d,{key:0,items:i.cities,defaultItem:i.city,class:"form-control w-100 p-3 mb-2",placeholder:"Выбор города в регионе",onSelectItem:r.selectCity,onOnInput:r.onInputCity,onOnBlur:s.onBlur,minInputLength:1,itemProjection:c=>c.city},null,8,["items","defaultItem","onSelectItem","onOnInput","onOnBlur","itemProjection"])):(l(),a("div",q4e,H4e))],64)):u("",!0),i.city?(l(),a("button",{key:3,type:"button",disabled:i.offices.length===0,onClick:e[0]||(e[0]=(...c)=>r.openOfficeModal&&r.openOfficeModal(...c)),class:"btn btn-light w-100 p-3"},[i.office?(l(),a("span",X4e,[Z4e,_(" "+p(i.office.location.address_full),1)])):(l(),a("span",G4e,[K4e,_(" Выбрать офис "),t("span",J4e,"("+p(i.offices.length)+")",1)]))],8,Q4e)):u("",!0),t("div",{class:"modal fade",id:"select-cdek-office"+r.uuid,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",t6e,[t("div",s6e,[o6e,i.offices.length>0?(l(),a("div",i6e,[t("div",n6e,[t("div",l6e,[f(t("input",{type:"search","onUpdate:modelValue":e[1]||(e[1]=c=>i.search_office=c),class:"form-control border-light",id:"search-product",placeholder:"name@example.com"},null,512),[[k,i.search_office]]),a6e]),r6e]),(l(!0),a(v,null,O(r.filteredOffices,c=>(l(),a("div",d6e,[(c.office_image_list||[]).length>0?(l(),a("img",{key:0,class:"card-img-top mb-2",style:{"max-height":"150px","object-fit":"cover"},src:c.office_image_list[0].url,alt:""},null,8,c6e)):u("",!0),t("div",u6e,[t("h5",m6e,p(c.name||"-"),1),t("div",h6e,p(c.location.address_full||"-"),1),t("p",p6e,p(c.address_comment||"-"),1),t("a",{class:"btn btn-link text-center mb-3 w-100",href:"https://yandex.ru/maps/?ll="+c.location.longitude+"%2C"+c.location.latitude+"&z=15&mode=whatshere&whatshere%5Bpoint%5D="+c.location.longitude+"%2C"+c.location.latitude+"&whatshere%5Bzoom%5D=15&z=15",target:"_blank"},[f6e,_(" На карте")],8,_6e),t("a",{onClick:h=>r.selectOffice(c),href:"javascript:void(0)",class:"btn btn-primary w-100"},[g6e,_(" Выбрать")],8,b6e)])]))),256))])):u("",!0)])])],8,e6e)],64)}const Vi=oe(z4e,[["render",y6e]]),v6e={props:["shopMode"],data(){return{selectedIndex:0,loaded:!0,calcSizeModal:null,formSize:{width:null,height:null,weight:null,length:null,items:[{name:"",ware_key:"",price:0,amount:1,weight:0}]}}},computed:{summaryWeight(){let s=0;return this.formSize.items.forEach(e=>s+=e.weight),s},emptyCalc(){return this.formSize.width==null&&this.formSize.height==null&&this.formSize.length==null&&this.formSize.weight==null}},mounted(){this.calcSizeModal=new bootstrap.Modal(document.getElementById("calc-size-modal"),{})},methods:{selectProduct(s){this.selectedIndex=s,this.loaded=!1,this.$nextTick(()=>{this.loaded=!0})},openCalcSizeModal(){this.calcSizeModal.show()},removeProduct(s){this.formSize.items.splice(s,1),this.selectedIndex=0},addProduct(){this.formSize.items.push({name:"",ware_key:"",price:0,amount:1,weight:0}),this.selectProduct(this.formSize.items.length-1)},submitSizeForm(){this.shopMode&&(this.formSize.weight=this.summaryWeight),this.$emit("callback",this.formSize),this.calcSizeModal.toggle(),this.$nextTick(()=>{this.formSize.weight=null,this.formSize.height=null,this.formSize.width=null,this.formSize.length=null})}}},$6e={key:0},k6e=t("i",{class:"fa-solid fa-dolly text-primary"},null,-1),w6e={key:1},F6e={class:"modal fade",id:"calc-size-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},C6e={class:"modal-dialog modal-fullscreen"},P6e=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Расчёт размеров"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),S6e={class:"modal-body"},x6e=t("div",{class:"divider my-3"},"Габариты",-1),j6e={class:"form-floating mb-3"},O6e=t("label",{for:"floatingInput"},"Ширина, см",-1),T6e={class:"form-floating mb-3"},U6e=t("label",{for:"floatingInput"},"Высота, см",-1),I6e={class:"form-floating mb-3"},V6e=t("label",{for:"floatingInput"},"Длина, см",-1),M6e={key:0,class:"form-floating mb-3"},A6e=t("label",{for:"floatingInput"},"Вес, кг",-1),E6e={key:1,class:"alert alert-light"},D6e=t("div",{class:"divider my-3"},"Товары в упаковке",-1),z6e={class:"row row-cols-4 mb-3"},B6e=["onClick"],L6e={class:"col mb-2"},R6e={class:"form-floating mb-3"},N6e=t("label",{for:"floatingInput"},"Название",-1),q6e={class:"form-floating mb-3"},W6e=t("label",{for:"floatingInput"},"Артикул товара",-1),Y6e={class:"form-floating mb-3"},H6e=t("label",{for:"floatingInput"},"Вес, кг",-1),Q6e={class:"form-floating mb-3"},G6e=t("label",{for:"floatingInput"},"Объявленная стоимость товара, руб",-1),K6e={class:"form-floating mb-3"},J6e=t("label",{for:"floatingInput"},"Кол-во товара, ед.",-1),X6e={class:"modal-footer"},Z6e={type:"submit",class:"btn btn-primary w-100"},exe={key:0},txe=t("i",{class:"fa-solid fa-dolly"},null,-1),sxe={key:1};function oxe(s,e,o,n,i,r){return l(),a(v,null,[t("button",{type:"button",onClick:e[0]||(e[0]=(...d)=>r.openCalcSizeModal&&r.openCalcSizeModal(...d)),class:"btn btn-light w-100 p-3 my-2"},[r.emptyCalc?(l(),a("span",$6e,[k6e,_(" Размер посылки")])):(l(),a("span",w6e,p(i.formSize.width||0)+"x"+p(i.formSize.height||0)+"x"+p(i.formSize.length||0)+" см, до "+p(i.formSize.weight||0)+"кг ",1))]),t("div",F6e,[t("div",C6e,[t("form",{class:"modal-content",onSubmit:e[12]||(e[12]=W((...d)=>r.submitSizeForm&&r.submitSizeForm(...d),["prevent"]))},[P6e,t("div",S6e,[x6e,t("div",j6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[1]||(e[1]=d=>i.formSize.width=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.width]]),O6e]),t("div",T6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[2]||(e[2]=d=>i.formSize.height=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.height]]),U6e]),t("div",I6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[3]||(e[3]=d=>i.formSize.length=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.length]]),V6e]),o.shopMode?(l(),a("div",E6e,p(r.summaryWeight)+", кг ",1)):(l(),a("div",M6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[4]||(e[4]=d=>i.formSize.weight=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.weight]]),A6e])),o.shopMode?(l(),a(v,{key:2},[D6e,t("div",z6e,[(l(!0),a(v,null,O(i.formSize.items.length,(d,c)=>(l(),a("div",{key:c,class:"col mb-2"},[t("button",{type:"button",class:C([{"btn-primary":i.selectedIndex===c,"btn-light":i.selectedIndex!==c},"btn mr-2 w-100"]),onClick:h=>r.selectProduct(c)},p(c+1),11,B6e)]))),128)),t("div",L6e,[t("button",{type:"button",onClick:e[5]||(e[5]=(...d)=>r.addProduct&&r.addProduct(...d)),class:"btn btn-primary mr-2 w-100"},"+ ")])]),i.loaded?(l(),a(v,{key:0},[t("div",R6e,[f(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=d=>i.formSize.items[i.selectedIndex].name=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.items[i.selectedIndex].name]]),N6e]),t("div",q6e,[f(t("input",{type:"text",maxlength:"255","onUpdate:modelValue":e[7]||(e[7]=d=>i.formSize.items[i.selectedIndex].ware_key=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.items[i.selectedIndex].ware_key]]),W6e]),t("div",Y6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[8]||(e[8]=d=>i.formSize.items[i.selectedIndex].weight=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.items[i.selectedIndex].weight]]),H6e]),t("div",Q6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[9]||(e[9]=d=>i.formSize.items[i.selectedIndex].price=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.items[i.selectedIndex].price]]),G6e]),t("div",K6e,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[10]||(e[10]=d=>i.formSize.items[i.selectedIndex].amount=d),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.formSize.items[i.selectedIndex].amount]]),J6e]),i.selectedIndex>0?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:e[11]||(e[11]=d=>r.removeProduct(i.selectedIndex)),class:"btn btn-link text-danger w-100 text-center"},"Удалить товар")):u("",!0)],64)):u("",!0)],64)):u("",!0)]),t("div",X6e,[t("button",Z6e,[r.emptyCalc?(l(),a("span",exe,[txe,_(" Добавить")])):(l(),a("span",sxe,p(i.formSize.width||0)+"x"+p(i.formSize.height||0)+"x"+p(i.formSize.length||0)+" см, до "+p(i.formSize.weight||r.summaryWeight||0)+"кг ",1))])])],32)])])],64)}const ixe=oe(v6e,[["render",oxe]]),nxe=t("h6",null,"Офис получения",-1),lxe={key:0,class:"alert alert-light my-2"},axe={class:"mb-0"},rxe={class:"fw-bold text-primary"},dxe={class:"fw-bold text-primary"},cxe={class:"mb-0"},uxe={class:"fw-bold text-primary"},mxe={props:["needDeliveryPrice"],data(){return{calcTariffForm:{tariff:null,to:{region:null,city:null,office:null}}}},watch:{"calcTariffForm.to":{handler:function(s){this.calcTariffForm.tariff=null,this.calcTariffForm.to.region!=null&&this.calcTariffForm.to.city!=null&&this.calcTariffForm.to.office!=null&&this.loadTariffForCdek()},deep:!0}},computed:{canCalcTariff(){return this.calcTariffForm.packages.length>0&&this.calcTariffForm.to.region!=null&&this.calcTariffForm.to.city!=null}},mounted(){this.loadTariffForCdek()},methods:{selectOffice(s){this.calcTariffForm.to.region=s.region,this.calcTariffForm.to.city=s.city,this.calcTariffForm.to.office=s.office,this.calcTariffForm.tariff=null},loadTariffForCdek(){this.$store.dispatch("calcCdekTariffFromCart",this.calcTariffForm).then(s=>{this.calcTariffForm.tariff=s.tariff,this.$emit("calc",this.calcTariffForm)})}}},hxe=Object.assign(mxe,{__name:"CdekCalcForm",setup(s){return(e,o)=>(l(),a(v,null,[nxe,T(Vi,{onCallback:e.selectOffice},null,8,["onCallback"]),e.calcTariffForm.tariff&&s.needDeliveryPrice?(l(),a("div",lxe,[t("p",axe,[_("Доставка от "),t("span",rxe,p(e.calcTariffForm.tariff.period_min||0),1),_(" до "),t("span",dxe,p(e.calcTariffForm.tariff.period_max||0),1),_(" рабочих дней")]),t("p",cxe,[_("Стоимость доставки "),t("span",uxe,p(e.calcTariffForm.tariff.delivery_sum||0),1),_(" руб.")])])):u("",!0)],64))}}),pxe=t("h6",{class:"opacity-75"},"Способы оплаты",-1),_xe={key:0,class:"opacity-75 my-3"},fxe=t("h6",{class:"opacity-75 my-3"},"Общая информация",-1),bxe=t("h6",{class:"opacity-75 my-3"},"Сводка",-1),gxe=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),yxe={key:1,class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},vxe=["disabled"],$xe={key:0,class:"fa-solid fa-file-invoice mr-2"},kxe={key:1,class:"fa-solid fa-hourglass mr-2"},wxe=["disabled"],Fxe=t("i",{class:"fa-solid fa-receipt mr-2"},null,-1),Cxe=["disabled"],Pxe=t("i",{class:"fa-solid fa-receipt mr-2"},null,-1),Sxe={key:1,class:"alert alert-info"},xxe={key:1,type:"button",class:"btn btn-primary p-3 w-100 d-flex align-items-center justify-content-center"},jxe={key:0,class:"spinner-border ml-2 spinner-border-sm",role:"status"},Oxe=t("span",{class:"visually-hidden"},"Loading...",-1),Txe=[Oxe],Uxe={props:["modelValue"],data(){return{spent_time:0,deliveryForm:null,can_start_payment:!1,offer_agreement:!0,need_request_delivery_price:!0,moneyVariants:[500,1e3,2e3,5e3]}},watch:{modelValue:{handler:function(s){this.deliveryForm=s},deep:!0},deliveryForm:{handler:function(s){this.$emit("update:modelValue",this.deliveryForm)},deep:!0},cartTotalPrice:{handler:function(s){this.settings.free_shipping_starts_from<=this.cartTotalPrice&&(this.deliveryForm.delivery_price=0)},deep:!0}},computed:{...G(["cartProducts","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},settings(){return this.bot.settings},canRequestDeliverPrice(){return this.need_request_delivery_price?this.can_start_payment:!0},canSubmitForm(){var e;let s=(e=this.deliveryForm)!=null&&e.use_cashback?this.cartTotalPrice-xo()>(this.settings.min_price||0):this.cartTotalPrice>=(this.settings.min_price||0);return this.can_start_payment&&s&&!(this.spent_time>0)}},mounted(){this.deliveryForm=this.modelValue,this.is_requested=el(),window.addEventListener("trigger-spent-timer",s=>{this.spent_time=s.detail})},methods:{goToProductCart(){document.dispatchEvent(new Event("switch-to-cart"))},calcTariff(s){var e,o,n,i;if(this.deliveryForm.cdek.tariff=s.tariff||null,this.deliveryForm.cdek.to.region=((e=s.to)==null?void 0:e.region)||null,this.deliveryForm.cdek.to.city=((o=s.to)==null?void 0:o.city)||null,this.deliveryForm.cdek.to.office=((n=s.to)==null?void 0:n.office)||null,(i=this.deliveryForm.cdek.tariff)!=null&&i.errors){this.can_start_payment=!1;return}this.deliveryForm.cdek.tariff&&(this.can_start_payment=!0)},startCheckout(){this.$emit("start-checkout")},nextStep(){this.$emit("change-tab",3)}}},Ixe=Object.assign(Uxe,{__name:"CheckoutNonFoodGoodsForm",setup(s){return(e,o)=>e.deliveryForm?(l(),a("form",{key:0,id:"basket",class:"container py-3",onSubmit:o[8]||(o[8]=W((...n)=>e.startCheckout&&e.startCheckout(...n),["prevent"]))},[pxe,T(Xr,{modelValue:e.deliveryForm,"onUpdate:modelValue":o[0]||(o[0]=n=>e.deliveryForm=n)},null,8,["modelValue"]),e.settings.need_automatic_delivery_request?(l(),a("h6",_xe,"Расчёт цены доставки CDEK")):u("",!0),T(hxe,{"need-delivery-price":e.settings.need_automatic_delivery_request,onCalc:e.calcTariff},null,8,["need-delivery-price","onCalc"]),fxe,T(ed,{modelValue:e.deliveryForm,"onUpdate:modelValue":o[1]||(o[1]=n=>e.deliveryForm=n),mode:1},null,8,["modelValue"]),T(Zr,{modelValue:e.offer_agreement,"onUpdate:modelValue":o[2]||(o[2]=n=>e.offer_agreement=n)},null,8,["modelValue"]),bxe,T(Jr,{modelValue:e.deliveryForm,"onUpdate:modelValue":o[3]||(o[3]=n=>e.deliveryForm=n)},null,8,["modelValue"]),t("button",{type:"button",onClick:o[4]||(o[4]=(...n)=>e.goToProductCart&&e.goToProductCart(...n)),class:"btn btn-primary w-100 p-3"},[gxe,_(" Корзина с товаром ")]),e.offer_agreement?(l(),a("nav",yxe,[e.spent_time<=0?(l(),a(v,{key:0},[e.deliveryForm.cdek.tariff!=null||!e.settings.need_automatic_delivery_request?(l(),a(v,{key:0},[e.settings.need_pay_after_call||e.deliveryForm.payment_type===3?(l(),a("button",{key:0,type:"button",onClick:o[5]||(o[5]=(...n)=>e.startCheckout&&e.startCheckout(...n)),disabled:!e.canSubmitForm,class:"btn btn-primary p-3 w-100 mb-2"},[e.spent_time<=0?(l(),a("i",$xe)):(l(),a("i",kxe)),_(" Оформить ")],8,vxe)):u("",!0),e.deliveryForm.payment_type===4&&!e.settings.need_pay_after_call?(l(),a("button",{key:1,type:"button",onClick:o[6]||(o[6]=(...n)=>e.startCheckout&&e.startCheckout(...n)),disabled:!e.canSubmitForm,class:"btn btn-primary p-3 w-100"},[Fxe,_(" Оформить и оплатить через СБП ")],8,wxe)):u("",!0),e.deliveryForm.payment_type===2&&!e.settings.need_pay_after_call?(l(),a("button",{key:2,type:"button",onClick:o[7]||(o[7]=(...n)=>e.nextStep&&e.nextStep(...n)),disabled:!e.canSubmitForm,class:"btn btn-primary p-3 w-100"},[Pxe,_(" Оплатить переводом ")],8,Cxe)):u("",!0)],64)):(l(),a("div",Sxe," Для оформления выберите офис доставки СДЭК "))],64)):(l(),a("button",xxe,[_(" Осталось ждать "+p(e.spent_time||0)+" сек. ",1),e.canSubmitForm?u("",!0):(l(),a("div",jxe,Txe))]))])):u("",!0)],32)):u("",!0)}}),Vxe={props:["modelValue"],data(){return{spent_time_counter:0}},computed:{...G(["cartProducts","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),cashbackLimit(){let s=this.getSelf.cashBack?this.getSelf.cashBack.amount:0,e=this.cartTotalPrice||0,o=this.bot.max_cashback_use_percent||0,n=e*(o/100);return Math.min(n,s)},settings(){return window.currentBot.settings||null},finallyPrice(){var o,n,i;let s=((o=this.modelValue.promo)==null?void 0:o.activate_price)||0,e=((n=this.modelValue.promo)==null?void 0:n.discount)||0;return(i=this.modelValue)!=null&&i.use_cashback?Math.max(1,this.cartTotalPrice-this.cashbackLimit-(this.cartTotalPrice>=s?e:0))+this.modelValue.delivery_price:Math.max(1,this.cartTotalPrice-(this.cartTotalPrice>=s?e:0))+this.modelValue.delivery_price}},watch:{modelValue:{handler:function(s){this.$emit("update:modelValue",this.modelValue)},deep:!0}},mounted(){},methods:{startCheckout(){this.spent_time_counter>0||(this.startTimer(10),this.$emit("startCheckout"))},onChangePhotos(s){const e=s.target.files[0];e&&(this.modelValue.image=e)},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(){this.modelValue.image=null},canSubmitForm(){return this.modelValue.image!=null},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.spent_time_counter=null),localStorage.setItem("cashman_self_product_delivery_counter",this.spent_time_counter)},1e3)}}},Mxe=t("h5",{class:"my-3 text-left"},[t("i",{class:"fa-regular fa-image mr-2"}),_("Фотография чека")],-1),Axe=["innerHTML"],Exe=t("h6",{class:"opacity-75 mt-3"},"Сводка",-1),Dxe={class:"card my-3"},zxe={class:"card-body p-2"},Bxe={class:"list-group list-group-flush"},Lxe={class:"list-group-item"},Rxe={class:"mb-0 d-flex justify-content-between"},Nxe={class:"list-group-item"},qxe={class:"mb-0 d-flex justify-content-between"},Wxe={class:"list-group-item"},Yxe={class:"mb-0 d-flex justify-content-between"},Hxe={key:0},Qxe={key:1},Gxe={key:0,class:"list-group-item"},Kxe=t("p",{class:"mb-2 text-justify"},[t("strong",{class:"fw-bold"},"Внимание!"),_(" Не распространяется на цену доставки! ")],-1),Jxe={class:"mb-0 d-flex justify-content-between"},Xxe={key:1,class:"list-group-item"},Zxe={class:"mb-0 d-flex justify-content-between"},eje={key:0},tje={key:1},sje={class:"list-group-item"},oje={class:"mb-0 d-flex justify-content-between"},ije={key:0},nje=t("p",{class:"my-3 text-center"},"Мы можем подготовить для вас сдачу с:",-1),lje={class:"row row-cols-2 mb-0"},aje={class:"col"},rje=["onClick"],dje=t("p",{class:"mb-2"},[t("em",null,"или введите другую сумму...")],-1),cje={class:"form-floating"},uje=t("label",{for:"modelValue-money"},"С какой суммы нужна сдача",-1),mje={class:"d-flex justify-content-center flex-wrap w-100"},hje={key:0,for:"menu-photos",class:"photo-loader-bill d-flex flex-column justify-content-center align-items-center mb-2"},pje=t("i",{class:"fa-regular fa-image my-2 text-primary",style:{"font-size":"20px"}},null,-1),_je=t("span",{class:"text-primary fw-bold text-center"},"Выбрать фотографию чека в формате: jpg, png, bmp",-1),fje={key:1,class:"mb-2 img-preview-bill"},bje={class:"remove"},gje=t("i",{class:"fa-solid fa-trash-can mr-2 text-primary"},null,-1),yje={class:"form-floating mb-2"},vje=t("label",{for:"modelValue-image_info"},[_("Текст к оплате "),t("small",null,"(не обязательно)")],-1),$je=["disabled"],kje={key:0,class:"fa-solid fa-file-invoice mr-2"},wje={key:1,class:"fa-solid fa-hourglass mr-2"},Fje={key:2,class:"color-white"},Cje={key:3,class:"color-white"};function Pje(s,e,o,n,i,r){var c,h;const d=ie("lazy");return l(),a("form",{class:"container py-3",onSubmit:e[4]||(e[4]=W((...g)=>r.startCheckout&&r.startCheckout(...g),["prevent"]))},[Mxe,(c=r.settings)!=null&&c.payment_info?(l(),a("div",{key:0,class:"alert alert-light mb-2 fw-bold",role:"alert",innerHTML:r.settings.payment_info},null,8,Axe)):u("",!0),Exe,t("div",Dxe,[t("div",zxe,[t("ul",Bxe,[t("li",Lxe,[t("p",Rxe,[_("Суммарно, ед. "),t("strong",null,p(s.cartTotalCount)+" шт.",1)])]),t("li",Nxe,[t("p",qxe,[_("Цена "),t("strong",null,p(s.cartTotalPrice)+" ₽",1)])]),t("li",Wxe,[t("p",Yxe,[_("Оплата бонусами "),(h=o.modelValue)!=null&&h.use_cashback?(l(),a("strong",Hxe,p(r.cashbackLimit)+" ₽",1)):(l(),a("strong",Qxe,"-"))])]),o.modelValue.discount>0?(l(),a("li",Gxe,[Kxe,t("p",Jxe,[_("Промокод "),t("strong",null,p(o.modelValue.discount)+" ₽",1)])])):u("",!0),o.modelValue.need_pickup?u("",!0):(l(),a("li",Xxe,[t("p",Zxe,[_("Цена доставки "),o.modelValue.delivery_price>0?(l(),a("strong",eje,p(o.modelValue.delivery_price)+"₽",1)):(l(),a("strong",tje,"от курьера"))])])),t("li",sje,[t("p",oje,[_("Итого, цена "),t("strong",null,p(r.finallyPrice)+" ₽",1)])])]),o.modelValue.payment_type===3&&r.settings.can_use_cash?(l(),a("div",ije,[nje,t("div",lje,[(l(!0),a(v,null,O(s.moneyVariants,g=>(l(),a("div",aje,[t("button",{class:C(["btn btn-outline-primary w-100 mb-2 rounded-5",{"btn-primary text-white":o.modelValue.money===g}]),type:"button",onClick:w=>o.modelValue.money=g},p(g)+"₽ ",11,rje)]))),256))]),dje,t("div",cje,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[0]||(e[0]=g=>o.modelValue.money=g),class:"form-control",id:"modelValue-money",placeholder:"С какой суммы нужна сдача"},null,512),[[k,o.modelValue.money]]),uje])])):u("",!0)])]),t("div",mje,[o.modelValue.image==null?(l(),a("label",hje,[pje,_je,t("input",{type:"file",required:"",id:"menu-photos",accept:"image/*",onChange:e[1]||(e[1]=(...g)=>r.onChangePhotos&&r.onChangePhotos(...g)),style:{display:"none"}},null,32)])):u("",!0),o.modelValue.image!=null?(l(),a("div",fje,[f(t("img",null,null,512),[[d,r.getPhoto(o.modelValue.image).imageUrl]]),t("div",bje,[t("a",{onClick:e[2]||(e[2]=g=>r.removePhoto())},[gje,_("Удалить")])])])):u("",!0)]),t("div",yje,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=g=>o.modelValue.image_info=g),style:{height:"100px","line-height":"150%"},placeholder:"Информация",id:"modelValue-image_info"},null,512),[[k,o.modelValue.image_info]]),vje]),t("button",{type:"submit",disabled:!r.canSubmitForm,class:"btn btn-primary p-3 w-100"},[i.spent_time_counter<=0?(l(),a("i",kje)):(l(),a("i",wje)),i.spent_time_counter<=0?(l(),a("span",Fje,"Оформить")):(l(),a("span",Cje,"Осталось ждать "+p(i.spent_time_counter)+" сек.",1))],8,$je)],32)}const Sje=oe(Vxe,[["render",Pje]]);const xje=s=>(Ge("data-v-11b2d633"),s=s(),Ke(),s),jje={key:0,class:"row my-3"},Oje=xje(()=>t("div",{class:"col-12"},[t("h6",{class:"fw-bold"},"Также рекомендуем")],-1)),Tje={class:"col-12"},Uje={class:"carousel__item"},Ije={name:"ProductRecommendationList",data(){return{products:[]}},mounted(){this.loadRecommendedProducts()},methods:{loadRecommendedProducts(){return this.$store.dispatch("loadRecommendedProducts").then(s=>{this.products=s.data||[]})}}},Vje=Object.assign(Ije,{setup(s){const e={itemsToShow:2.1,wrapAround:!0};return(o,n)=>(o.products||[]).length>0?(l(),a("div",jje,[Oje,t("div",Tje,[T(Ie(Yi),up(mp(e)),{addons:A(()=>[]),default:A(()=>[(l(!0),a(v,null,O(o.products,i=>(l(),M(Ie(Go),{key:i.id},{default:A(()=>[t("div",Uje,[T(Xi,{item:i},null,8,["item"])])]),_:2},1024))),128))]),_:1},16)])])):u("",!0)}}),Mje=oe(Vje,[["__scopeId","data-v-11b2d633"]]);const Aje={key:0},Eje=t("h4",null,"Итого",-1),Dje=t("p",null," Ниже приведена итоговая цена заказа без учета стоимости доставки. Цена доставки рассчитывается отдельно и зависит от расстояния. ",-1),zje={key:1},Bje={key:1,class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},Lje={class:"d-flex justify-content-center flex-column align-items-center"},Rje=t("i",{class:"fa-brands fa-shopify mb-3",style:{"font-size":"36px"}},null,-1),Nje=t("p",null,"Корзина пустая:(",-1),qje=t("i",{class:"fa-solid fa-arrows-rotate"},null,-1),Wje={key:2,class:"navbar navbar-expand-sm fixed-bottom p-2 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},Yje={key:0,class:"w-100"},Hje={key:0,class:"ios-nav-group w-100"},Qje=t("button",{type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#sidebar-menu","aria-controls":"sidebar-menu",class:"btn btn-primary ios-btn"},[t("i",{class:"fa-solid fa-bars"}),t("span",{class:"ios-label"},"Меню")],-1),Gje=t("i",{class:"fa-solid fa-shop"},null,-1),Kje=t("span",{class:"ios-label"},"Магазин",-1),Jje=[Gje,Kje],Xje=t("i",{class:"fa-solid fa-money-bill"},null,-1),Zje=t("span",{class:"ios-label"},"Оформить заказ",-1),eOe=[Xje,Zje],tOe={key:1,class:"w-100"},sOe={key:3,class:"navbar navbar-expand-sm fixed-bottom p-2 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},oOe=t("p",{style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-secondary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-between"}," В данный момент покупки недоступны ",-1),iOe=[oOe],nOe={props:["type"],data(){return{tab:0,deliveryForm:{name:null,phone:null,address:null,discount:0,cdek:{tariff:null,to:{region:null,city:null,office:null,address:null}},city:null,street:null,building:null,flat_number:null,entrance_number:null,floor_number:null,table_number:null,info:null,need_pickup:!1,pick_up_type:1,has_disability:!1,use_cashback:!1,disabilities:[],money:null,cash:!0,payment_type:2,persons:1,time:null,when_ready:!0,image:null,image_info:null,delivery_price:0,distance:0,delivery_details:[],allergy:null,action_prize:null}}},watch:{tab:{handler:function(s){window.scroll(0,80)},deep:!0},"deliveryForm.need_pickup":{handler:function(s){this.deliveryForm.need_pickup&&(this.deliveryForm.delivery_price=0,this.deliveryForm.distance=0)},deep:!0},"deliveryForm.cash":{handler:function(s){this.deliveryForm.cash||(this.deliveryForm.money=null)},deep:!0},"deliveryForm.has_disability":{handler:function(s){this.deliveryForm.disabilities=[],this.deliveryForm.allergy=null},deep:!0}},computed:{...G(["cartTotalCount","cartTotalPrice","getSelf"]),settings(){return this.bot.settings},bot(){return window.currentBot},tg(){return window.Telegram.WebApp}},mounted(){this.loadBasketData(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()}),window.addEventListener("scroll-to-basket",s=>{this.tab=2,document.querySelector("#basket").scrollIntoView({behavior:"smooth"})}),document.addEventListener("switch-to-cart",()=>{this.changeTab(0),document.querySelector("#basket").scrollIntoView({behavior:"smooth"})})},methods:{doSwipeLeft(){this.$router.push({name:"CatalogV2"})},doSwipeRight(){this.$router.push({name:"MenuV2"})},changeTab(s){this.tab=s},goToCatalog(){this.$router.push({name:"CatalogV2"})},selectPrize(s){this.deliveryForm.action_prize=s},loadBasketData(){return this.$store.dispatch("loadProductsInBasket")},startCheckout(){let s=new FormData;if(s.append("display_type",this.settings.shop_display_type),Object.keys(this.deliveryForm).forEach(e=>{const o=this.deliveryForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.type&&s.append("type",this.type),s.append("need_automatic_delivery_request",this.settings.need_automatic_delivery_request),this.deliveryForm.payment_type===0&&this.settings.can_use_card){this.$store.dispatch("createCheckoutLink",{deliveryForm:s}).then(e=>{this.tg.openInvoice(e.result)});return}typeof this.deliveryForm.image!="string"&&(s.append("photo",this.deliveryForm.image),s.delete("image")),this.sending=!0,this.$store.dispatch("startCheckout",{deliveryForm:s}).then(e=>{this.$notify({title:"Доставка",text:"Дальнейшая инструкция отправлена вам в бот!",type:"success"}),this.tab=1,this.$store.dispatch("clearCart"),e.url&&(window.location.href=e.url),this.sending=!1}).catch(e=>{this.sending=!1,this.$notify({title:"Доставка",text:"Ошибка! Обратитесь к администратору",type:"error"})}),jo(10)}}},td=Object.assign(nOe,{__name:"ShopCart",setup(s){return(e,o)=>{const n=ie("touch");return l(),a(v,null,[e.cartTotalCount>0?(l(),a("div",Aje,[e.tab===0?(l(),M(Kr,{key:0,onSelectPrize:e.selectPrize,onChangeTab:e.changeTab,"form-data":e.deliveryForm},{"upper-text":A(()=>[Eje,Dje]),"recommendation-list":A(()=>[T(Mje)]),_:1},8,["onSelectPrize","onChangeTab","form-data"])):u("",!0),e.tab===1?f((l(),a("div",zje,[e.settings.shop_display_type===0?(l(),M(D4e,{key:0,onStartCheckout:e.startCheckout,onChangeTab:e.changeTab,modelValue:e.deliveryForm,"onUpdate:modelValue":o[0]||(o[0]=i=>e.deliveryForm=i)},null,8,["onStartCheckout","onChangeTab","modelValue"])):(l(),M(Ixe,{key:1,onStartCheckout:e.startCheckout,onChangeTab:e.changeTab,modelValue:e.deliveryForm,"onUpdate:modelValue":o[1]||(o[1]=i=>e.deliveryForm=i)},null,8,["onStartCheckout","onChangeTab","modelValue"]))])),[[n,e.doSwipeLeft,"swipe",{left:!0}],[n,e.doSwipeRight,"swipe",{right:!0}]]):u("",!0),e.tab===3?(l(),M(Sje,{key:2,onStartCheckout:e.startCheckout,modelValue:e.deliveryForm,"onUpdate:modelValue":o[2]||(o[2]=i=>e.deliveryForm=i)},null,8,["onStartCheckout","modelValue"])):u("",!0)])):f((l(),a("div",Bje,[t("div",Lje,[Rje,Nje,t("a",{class:"btn btn-primary",onClick:o[3]||(o[3]=i=>e.loadBasketData()),href:"javascript:void(0)"},[qje,_(" Обновить корзину ")])])])),[[n,e.doSwipeLeft,"swipe",{left:!0}],[n,e.doSwipeRight,"swipe",{right:!0}]]),Ie(a2e)?(l(),a("nav",Wje,[e.cartTotalCount>0?(l(),a("div",Yje,[e.tab===0?(l(),a("div",Hje,[Qje,t("button",{onClick:o[4]||(o[4]=(...i)=>e.goToCatalog&&e.goToCatalog(...i)),type:"button",class:"btn btn-primary ios-btn"},Jje),e.tab===0?(l(),a("button",{key:0,type:"button",onClick:o[5]||(o[5]=i=>e.tab=1),style:{flex:"3"},class:"btn btn-primary ios-btn p-2"},eOe)):u("",!0)])):u("",!0)])):(l(),a("div",tOe,[t("button",{type:"button",onClick:o[6]||(o[6]=(...i)=>e.goToCatalog&&e.goToCatalog(...i)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center"}," Вернуться в магазин ")]))])):(l(),a("nav",sOe,iOe))],64)}}}),lOe=Object.freeze(Object.defineProperty({__proto__:null,default:td},Symbol.toStringTag,{value:"Module"})),aOe={data(){return{sending:!1,callbackForm:{name:null,phone:null,message:null,images:[]}}},watch:{getSelf:{handler:function(s){this.callbackForm.name=this.self.fio_from_telegram||this.self.name,this.callbackForm.phone=this.self.phone||null},deep:!0}},computed:{...G(["getSelf"]),self(){return this.getSelf}},mounted(){this.self&&(this.callbackForm.name=this.self.fio_from_telegram||this.self.name,this.callbackForm.phone=this.self.phone||null)},methods:{onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)e[o].size<=10485760&&this.callbackForm.images.push(e[o])},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.callbackForm.images.splice(s,1)},submitCallback(){let s=new FormData;this.sending=!0,Object.keys(this.callbackForm).forEach(e=>{const o=this.callbackForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.callbackForm.images.length>0&&(this.callbackForm.images.forEach(e=>{s.append("photos[]",e)}),s.delete("images")),this.$store.dispatch("feedBackForm",{callbackForm:s}).then(e=>{this.callbackForm={message:null,name:null,phone:null,images:[]},this.$notify({title:"Обратная связь",text:"Спасибо за сообщение"}),this.sending=!1}).catch(e=>{this.sending=!1})}}},rOe={key:0,class:"container py-3"},dOe=t("h3",null,"Обратная связь",-1),cOe=t("p",{class:"alert alert-light"},[_(" Уважаемый клиент, ваш отзыв будет опубликован в нашем канале "),t("strong",{class:"fw-bold text-primary"},"анонимно"),_(", ваши данные увидит только администрация проекта, заранее благодарим за обратную связь! ")],-1),uOe={class:"form-floating mb-2"},mOe=t("label",{for:"callbackForm-name"},[_("Ваше имя "),t("span",{class:"text-danger"},"*")],-1),hOe={class:"form-floating mb-2"},pOe=t("label",{for:"callbackForm-phone"},[_("Номер телефона "),t("span",{class:"text-danger"},"*")],-1),_Oe={class:"form-floating"},fOe=t("label",{for:"callbackForm-message",required:""},[_("Текст сообщения "),t("span",{class:"text-danger"},"*")],-1),bOe=t("h6",{class:"my-3 text-center fw-bold"},[_("Прикрепить фотографию (до 10МБ) "),t("span",{class:"text-danger"},"*")],-1),gOe={class:"photo-preview d-flex justify-content-center flex-wrap w-100 my-3"},yOe={for:"menu-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},vOe=t("span",{class:"text-primary fw-bold"},"+",-1),$Oe={class:"mb-2 img-preview",style:{"margin-right":"10px"}},kOe={class:"remove"},wOe=["onClick"],FOe={key:0,class:"alert alert-light mb-2"},COe=["disabled"];function POe(s,e,o,n,i,r){const d=ie("mask"),c=ie("lazy");return r.self?(l(),a("div",rOe,[dOe,cOe,t("form",{onSubmit:e[4]||(e[4]=W((...h)=>r.submitCallback&&r.submitCallback(...h),["prevent"]))},[t("div",uOe,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=h=>i.callbackForm.name=h),class:"form-control",id:"callbackForm-name",placeholder:"name@example.com",required:""},null,512),[[k,i.callbackForm.name]]),mOe]),t("div",hOe,[f(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=h=>i.callbackForm.phone=h),class:"form-control",id:"callbackForm-phone",placeholder:"name@example.com",required:""},null,512),[[d,"+7(###)###-##-##"],[k,i.callbackForm.phone]]),pOe]),t("div",_Oe,[f(t("textarea",{class:"form-control",style:{height:"200px","line-height":"150%"},"onUpdate:modelValue":e[2]||(e[2]=h=>i.callbackForm.message=h),placeholder:"Leave a comment here",id:"callbackForm-message"},null,512),[[k,i.callbackForm.message]]),fOe]),bOe,t("div",gOe,[t("label",yOe,[vOe,t("input",{type:"file",id:"menu-photos",accept:"image/*",required:"",onChange:e[3]||(e[3]=(...h)=>r.onChangePhotos&&r.onChangePhotos(...h)),style:{display:"none"}},null,32)]),(i.callbackForm.images||[]).length>0?(l(!0),a(v,{key:0},O(i.callbackForm.images,(h,g)=>(l(),a("div",$Oe,[f(t("img",null,null,512),[[c,r.getPhoto(h).imageUrl]]),t("div",kOe,[t("a",{onClick:w=>r.removePhoto(g)},"Удалить",8,wOe)])]))),256)):u("",!0)]),i.callbackForm.image?u("",!0):(l(),a("p",FOe," Вам необходимо прикрепить изображение перед отправкой! ")),t("button",{type:"submit",disabled:i.sending&&(i.callbackForm.images||[]).length===0,class:"btn btn-primary mt-2 p-3 w-100"}," Отправить сообщение ",8,COe)],32)])):u("",!0)}const sd=oe(aOe,[["render",POe]]),SOe=Object.freeze(Object.defineProperty({__proto__:null,default:sd},Symbol.toStringTag,{value:"Module"}));const xOe={props:["item","defaultImage","defaultText","route","disabled"],methods:{goTo(s){this.$router.push({name:s})}}},jOe=["disabled"],OOe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},TOe={class:"img-fluid menu-item-img",alt:""},UOe={class:"my-2"},IOe={key:0,style:{"font-size":"12px"}},VOe=t("i",{class:"fa-solid fa-lock"},null,-1);function MOe(s,e,o,n,i,r){var c,h,g;const d=ie("lazy");return(c=o.item)!=null&&c.is_visible,l(),a("button",{key:0,type:"button",onClick:e[0]||(e[0]=w=>r.goTo(o.route)),style:{"min-height":"250px"},disabled:o.disabled||!1,class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",OOe,[f(t("img",TOe,null,512),[[d,"/images/shop-v2-2/"+(((h=o.item)==null?void 0:h.image_url)||o.defaultImage)]]),t("p",UOe,[_(p(((g=o.item)==null?void 0:g.title)||o.defaultText)+" ",1),jt(s.$slots,"post-text")]),o.disabled?(l(),a("span",IOe,[VOe,_(" закрыто")])):u("",!0)])],8,jOe)}const Js=oe(xOe,[["render",MOe]]);var AOe={value:()=>{}};function od(){for(var s=0,e=arguments.length,o={},n;s<e;++s){if(!(n=arguments[s]+"")||n in o||/[\s.]/.test(n))throw new Error("illegal type: "+n);o[n]=[]}return new ji(o)}function ji(s){this._=s}function EOe(s,e){return s.trim().split(/^|\s+/).map(function(o){var n="",i=o.indexOf(".");if(i>=0&&(n=o.slice(i+1),o=o.slice(0,i)),o&&!e.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:n}})}ji.prototype=od.prototype={constructor:ji,on:function(s,e){var o=this._,n=EOe(s+"",o),i,r=-1,d=n.length;if(arguments.length<2){for(;++r<d;)if((i=(s=n[r]).type)&&(i=DOe(o[i],s.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++r<d;)if(i=(s=n[r]).type)o[i]=Kl(o[i],s.name,e);else if(e==null)for(i in o)o[i]=Kl(o[i],s.name,null);return this},copy:function(){var s={},e=this._;for(var o in e)s[o]=e[o].slice();return new ji(s)},call:function(s,e){if((i=arguments.length-2)>0)for(var o=new Array(i),n=0,i,r;n<i;++n)o[n]=arguments[n+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(r=this._[s],n=0,i=r.length;n<i;++n)r[n].value.apply(e,o)},apply:function(s,e,o){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var n=this._[s],i=0,r=n.length;i<r;++i)n[i].value.apply(e,o)}};function DOe(s,e){for(var o=0,n=s.length,i;o<n;++o)if((i=s[o]).name===e)return i.value}function Kl(s,e,o){for(var n=0,i=s.length;n<i;++n)if(s[n].name===e){s[n]=AOe,s=s.slice(0,n).concat(s.slice(n+1));break}return o!=null&&s.push({name:e,value:o}),s}var An="http://www.w3.org/1999/xhtml";const Jl={svg:"http://www.w3.org/2000/svg",xhtml:An,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zi(s){var e=s+="",o=e.indexOf(":");return o>=0&&(e=s.slice(0,o))!=="xmlns"&&(s=s.slice(o+1)),Jl.hasOwnProperty(e)?{space:Jl[e],local:s}:s}function zOe(s){return function(){var e=this.ownerDocument,o=this.namespaceURI;return o===An&&e.documentElement.namespaceURI===An?e.createElement(s):e.createElementNS(o,s)}}function BOe(s){return function(){return this.ownerDocument.createElementNS(s.space,s.local)}}function nd(s){var e=Zi(s);return(e.local?BOe:zOe)(e)}function LOe(){}function tl(s){return s==null?LOe:function(){return this.querySelector(s)}}function ROe(s){typeof s!="function"&&(s=tl(s));for(var e=this._groups,o=e.length,n=new Array(o),i=0;i<o;++i)for(var r=e[i],d=r.length,c=n[i]=new Array(d),h,g,w=0;w<d;++w)(h=r[w])&&(g=s.call(h,h.__data__,w,r))&&("__data__"in h&&(g.__data__=h.__data__),c[w]=g);return new zt(n,this._parents)}function NOe(s){return s==null?[]:Array.isArray(s)?s:Array.from(s)}function qOe(){return[]}function ld(s){return s==null?qOe:function(){return this.querySelectorAll(s)}}function WOe(s){return function(){return NOe(s.apply(this,arguments))}}function YOe(s){typeof s=="function"?s=WOe(s):s=ld(s);for(var e=this._groups,o=e.length,n=[],i=[],r=0;r<o;++r)for(var d=e[r],c=d.length,h,g=0;g<c;++g)(h=d[g])&&(n.push(s.call(h,h.__data__,g,d)),i.push(h));return new zt(n,i)}function ad(s){return function(){return this.matches(s)}}function rd(s){return function(e){return e.matches(s)}}var HOe=Array.prototype.find;function QOe(s){return function(){return HOe.call(this.children,s)}}function GOe(){return this.firstElementChild}function KOe(s){return this.select(s==null?GOe:QOe(typeof s=="function"?s:rd(s)))}var JOe=Array.prototype.filter;function XOe(){return Array.from(this.children)}function ZOe(s){return function(){return JOe.call(this.children,s)}}function e8e(s){return this.selectAll(s==null?XOe:ZOe(typeof s=="function"?s:rd(s)))}function t8e(s){typeof s!="function"&&(s=ad(s));for(var e=this._groups,o=e.length,n=new Array(o),i=0;i<o;++i)for(var r=e[i],d=r.length,c=n[i]=[],h,g=0;g<d;++g)(h=r[g])&&s.call(h,h.__data__,g,r)&&c.push(h);return new zt(n,this._parents)}function dd(s){return new Array(s.length)}function s8e(){return new zt(this._enter||this._groups.map(dd),this._parents)}function Mi(s,e){this.ownerDocument=s.ownerDocument,this.namespaceURI=s.namespaceURI,this._next=null,this._parent=s,this.__data__=e}Mi.prototype={constructor:Mi,appendChild:function(s){return this._parent.insertBefore(s,this._next)},insertBefore:function(s,e){return this._parent.insertBefore(s,e)},querySelector:function(s){return this._parent.querySelector(s)},querySelectorAll:function(s){return this._parent.querySelectorAll(s)}};function o8e(s){return function(){return s}}function i8e(s,e,o,n,i,r){for(var d=0,c,h=e.length,g=r.length;d<g;++d)(c=e[d])?(c.__data__=r[d],n[d]=c):o[d]=new Mi(s,r[d]);for(;d<h;++d)(c=e[d])&&(i[d]=c)}function n8e(s,e,o,n,i,r,d){var c,h,g=new Map,w=e.length,x=r.length,P=new Array(w),I;for(c=0;c<w;++c)(h=e[c])&&(P[c]=I=d.call(h,h.__data__,c,e)+"",g.has(I)?i[c]=h:g.set(I,h));for(c=0;c<x;++c)I=d.call(s,r[c],c,r)+"",(h=g.get(I))?(n[c]=h,h.__data__=r[c],g.delete(I)):o[c]=new Mi(s,r[c]);for(c=0;c<w;++c)(h=e[c])&&g.get(P[c])===h&&(i[c]=h)}function l8e(s){return s.__data__}function a8e(s,e){if(!arguments.length)return Array.from(this,l8e);var o=e?n8e:i8e,n=this._parents,i=this._groups;typeof s!="function"&&(s=o8e(s));for(var r=i.length,d=new Array(r),c=new Array(r),h=new Array(r),g=0;g<r;++g){var w=n[g],x=i[g],P=x.length,I=r8e(s.call(w,w&&w.__data__,g,n)),V=I.length,B=c[g]=new Array(V),L=d[g]=new Array(V),ee=h[g]=new Array(P);o(w,x,B,L,ee,I,e);for(var J=0,re=0,se,de;J<V;++J)if(se=B[J]){for(J>=re&&(re=J+1);!(de=L[re])&&++re<V;);se._next=de||null}}return d=new zt(d,n),d._enter=c,d._exit=h,d}function r8e(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function d8e(){return new zt(this._exit||this._groups.map(dd),this._parents)}function c8e(s,e,o){var n=this.enter(),i=this,r=this.exit();return typeof s=="function"?(n=s(n),n&&(n=n.selection())):n=n.append(s+""),e!=null&&(i=e(i),i&&(i=i.selection())),o==null?r.remove():o(r),n&&i?n.merge(i).order():i}function u8e(s){for(var e=s.selection?s.selection():s,o=this._groups,n=e._groups,i=o.length,r=n.length,d=Math.min(i,r),c=new Array(i),h=0;h<d;++h)for(var g=o[h],w=n[h],x=g.length,P=c[h]=new Array(x),I,V=0;V<x;++V)(I=g[V]||w[V])&&(P[V]=I);for(;h<i;++h)c[h]=o[h];return new zt(c,this._parents)}function m8e(){for(var s=this._groups,e=-1,o=s.length;++e<o;)for(var n=s[e],i=n.length-1,r=n[i],d;--i>=0;)(d=n[i])&&(r&&d.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(d,r),r=d);return this}function h8e(s){s||(s=p8e);function e(x,P){return x&&P?s(x.__data__,P.__data__):!x-!P}for(var o=this._groups,n=o.length,i=new Array(n),r=0;r<n;++r){for(var d=o[r],c=d.length,h=i[r]=new Array(c),g,w=0;w<c;++w)(g=d[w])&&(h[w]=g);h.sort(e)}return new zt(i,this._parents).order()}function p8e(s,e){return s<e?-1:s>e?1:s>=e?0:NaN}function _8e(){var s=arguments[0];return arguments[0]=this,s.apply(null,arguments),this}function f8e(){return Array.from(this)}function b8e(){for(var s=this._groups,e=0,o=s.length;e<o;++e)for(var n=s[e],i=0,r=n.length;i<r;++i){var d=n[i];if(d)return d}return null}function g8e(){let s=0;for(const e of this)++s;return s}function y8e(){return!this.node()}function v8e(s){for(var e=this._groups,o=0,n=e.length;o<n;++o)for(var i=e[o],r=0,d=i.length,c;r<d;++r)(c=i[r])&&s.call(c,c.__data__,r,i);return this}function $8e(s){return function(){this.removeAttribute(s)}}function k8e(s){return function(){this.removeAttributeNS(s.space,s.local)}}function w8e(s,e){return function(){this.setAttribute(s,e)}}function F8e(s,e){return function(){this.setAttributeNS(s.space,s.local,e)}}function C8e(s,e){return function(){var o=e.apply(this,arguments);o==null?this.removeAttribute(s):this.setAttribute(s,o)}}function P8e(s,e){return function(){var o=e.apply(this,arguments);o==null?this.removeAttributeNS(s.space,s.local):this.setAttributeNS(s.space,s.local,o)}}function S8e(s,e){var o=Zi(s);if(arguments.length<2){var n=this.node();return o.local?n.getAttributeNS(o.space,o.local):n.getAttribute(o)}return this.each((e==null?o.local?k8e:$8e:typeof e=="function"?o.local?P8e:C8e:o.local?F8e:w8e)(o,e))}function cd(s){return s.ownerDocument&&s.ownerDocument.defaultView||s.document&&s||s.defaultView}function x8e(s){return function(){this.style.removeProperty(s)}}function j8e(s,e,o){return function(){this.style.setProperty(s,e,o)}}function O8e(s,e,o){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(s):this.style.setProperty(s,n,o)}}function T8e(s,e,o){return arguments.length>1?this.each((e==null?x8e:typeof e=="function"?O8e:j8e)(s,e,o??"")):Oo(this.node(),s)}function Oo(s,e){return s.style.getPropertyValue(e)||cd(s).getComputedStyle(s,null).getPropertyValue(e)}function U8e(s){return function(){delete this[s]}}function I8e(s,e){return function(){this[s]=e}}function V8e(s,e){return function(){var o=e.apply(this,arguments);o==null?delete this[s]:this[s]=o}}function M8e(s,e){return arguments.length>1?this.each((e==null?U8e:typeof e=="function"?V8e:I8e)(s,e)):this.node()[s]}function ud(s){return s.trim().split(/^|\s+/)}function sl(s){return s.classList||new md(s)}function md(s){this._node=s,this._names=ud(s.getAttribute("class")||"")}md.prototype={add:function(s){var e=this._names.indexOf(s);e<0&&(this._names.push(s),this._node.setAttribute("class",this._names.join(" ")))},remove:function(s){var e=this._names.indexOf(s);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(s){return this._names.indexOf(s)>=0}};function hd(s,e){for(var o=sl(s),n=-1,i=e.length;++n<i;)o.add(e[n])}function pd(s,e){for(var o=sl(s),n=-1,i=e.length;++n<i;)o.remove(e[n])}function A8e(s){return function(){hd(this,s)}}function E8e(s){return function(){pd(this,s)}}function D8e(s,e){return function(){(e.apply(this,arguments)?hd:pd)(this,s)}}function z8e(s,e){var o=ud(s+"");if(arguments.length<2){for(var n=sl(this.node()),i=-1,r=o.length;++i<r;)if(!n.contains(o[i]))return!1;return!0}return this.each((typeof e=="function"?D8e:e?A8e:E8e)(o,e))}function B8e(){this.textContent=""}function L8e(s){return function(){this.textContent=s}}function R8e(s){return function(){var e=s.apply(this,arguments);this.textContent=e??""}}function N8e(s){return arguments.length?this.each(s==null?B8e:(typeof s=="function"?R8e:L8e)(s)):this.node().textContent}function q8e(){this.innerHTML=""}function W8e(s){return function(){this.innerHTML=s}}function Y8e(s){return function(){var e=s.apply(this,arguments);this.innerHTML=e??""}}function H8e(s){return arguments.length?this.each(s==null?q8e:(typeof s=="function"?Y8e:W8e)(s)):this.node().innerHTML}function Q8e(){this.nextSibling&&this.parentNode.appendChild(this)}function G8e(){return this.each(Q8e)}function K8e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J8e(){return this.each(K8e)}function X8e(s){var e=typeof s=="function"?s:nd(s);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Z8e(){return null}function eTe(s,e){var o=typeof s=="function"?s:nd(s),n=e==null?Z8e:typeof e=="function"?e:tl(e);return this.select(function(){return this.insertBefore(o.apply(this,arguments),n.apply(this,arguments)||null)})}function tTe(){var s=this.parentNode;s&&s.removeChild(this)}function sTe(){return this.each(tTe)}function oTe(){var s=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(s,this.nextSibling):s}function iTe(){var s=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(s,this.nextSibling):s}function nTe(s){return this.select(s?iTe:oTe)}function lTe(s){return arguments.length?this.property("__data__",s):this.node().__data__}function aTe(s){return function(e){s.call(this,e,this.__data__)}}function rTe(s){return s.trim().split(/^|\s+/).map(function(e){var o="",n=e.indexOf(".");return n>=0&&(o=e.slice(n+1),e=e.slice(0,n)),{type:e,name:o}})}function dTe(s){return function(){var e=this.__on;if(e){for(var o=0,n=-1,i=e.length,r;o<i;++o)r=e[o],(!s.type||r.type===s.type)&&r.name===s.name?this.removeEventListener(r.type,r.listener,r.options):e[++n]=r;++n?e.length=n:delete this.__on}}}function cTe(s,e,o){return function(){var n=this.__on,i,r=aTe(e);if(n){for(var d=0,c=n.length;d<c;++d)if((i=n[d]).type===s.type&&i.name===s.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=o),i.value=e;return}}this.addEventListener(s.type,r,o),i={type:s.type,name:s.name,value:e,listener:r,options:o},n?n.push(i):this.__on=[i]}}function uTe(s,e,o){var n=rTe(s+""),i,r=n.length,d;if(arguments.length<2){var c=this.node().__on;if(c){for(var h=0,g=c.length,w;h<g;++h)for(i=0,w=c[h];i<r;++i)if((d=n[i]).type===w.type&&d.name===w.name)return w.value}return}for(c=e?cTe:dTe,i=0;i<r;++i)this.each(c(n[i],e,o));return this}function _d(s,e,o){var n=cd(s),i=n.CustomEvent;typeof i=="function"?i=new i(e,o):(i=n.document.createEvent("Event"),o?(i.initEvent(e,o.bubbles,o.cancelable),i.detail=o.detail):i.initEvent(e,!1,!1)),s.dispatchEvent(i)}function mTe(s,e){return function(){return _d(this,s,e)}}function hTe(s,e){return function(){return _d(this,s,e.apply(this,arguments))}}function pTe(s,e){return this.each((typeof e=="function"?hTe:mTe)(s,e))}function*_Te(){for(var s=this._groups,e=0,o=s.length;e<o;++e)for(var n=s[e],i=0,r=n.length,d;i<r;++i)(d=n[i])&&(yield d)}var fd=[null];function zt(s,e){this._groups=s,this._parents=e}function ni(){return new zt([[document.documentElement]],fd)}function fTe(){return this}zt.prototype=ni.prototype={constructor:zt,select:ROe,selectAll:YOe,selectChild:KOe,selectChildren:e8e,filter:t8e,data:a8e,enter:s8e,exit:d8e,join:c8e,merge:u8e,selection:fTe,order:m8e,sort:h8e,call:_8e,nodes:f8e,node:b8e,size:g8e,empty:y8e,each:v8e,attr:S8e,style:T8e,property:M8e,classed:z8e,text:N8e,html:H8e,raise:G8e,lower:J8e,append:X8e,insert:eTe,remove:sTe,clone:nTe,datum:lTe,on:uTe,dispatch:pTe,[Symbol.iterator]:_Te};function Xl(s){return typeof s=="string"?new zt([[document.querySelector(s)]],[document.documentElement]):new zt([[s]],fd)}function ol(s,e,o){s.prototype=e.prototype=o,o.constructor=s}function bd(s,e){var o=Object.create(s.prototype);for(var n in e)o[n]=e[n];return o}function li(){}var Xo=.7,Ai=1/Xo,Po="\\s*([+-]?\\d+)\\s*",Zo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ns="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bTe=/^#([0-9a-f]{3,8})$/,gTe=new RegExp(`^rgb\\(${Po},${Po},${Po}\\)$`),yTe=new RegExp(`^rgb\\(${ns},${ns},${ns}\\)$`),vTe=new RegExp(`^rgba\\(${Po},${Po},${Po},${Zo}\\)$`),$Te=new RegExp(`^rgba\\(${ns},${ns},${ns},${Zo}\\)$`),kTe=new RegExp(`^hsl\\(${Zo},${ns},${ns}\\)$`),wTe=new RegExp(`^hsla\\(${Zo},${ns},${ns},${Zo}\\)$`),Zl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ol(li,co,{copy(s){return Object.assign(new this.constructor,this,s)},displayable(){return this.rgb().displayable()},hex:ea,formatHex:ea,formatHex8:FTe,formatHsl:CTe,formatRgb:ta,toString:ta});function ea(){return this.rgb().formatHex()}function FTe(){return this.rgb().formatHex8()}function CTe(){return gd(this).formatHsl()}function ta(){return this.rgb().formatRgb()}function co(s){var e,o;return s=(s+"").trim().toLowerCase(),(e=bTe.exec(s))?(o=e[1].length,e=parseInt(e[1],16),o===6?sa(e):o===3?new Vt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):o===8?vi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):o===4?vi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=gTe.exec(s))?new Vt(e[1],e[2],e[3],1):(e=yTe.exec(s))?new Vt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=vTe.exec(s))?vi(e[1],e[2],e[3],e[4]):(e=$Te.exec(s))?vi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kTe.exec(s))?na(e[1],e[2]/100,e[3]/100,1):(e=wTe.exec(s))?na(e[1],e[2]/100,e[3]/100,e[4]):Zl.hasOwnProperty(s)?sa(Zl[s]):s==="transparent"?new Vt(NaN,NaN,NaN,0):null}function sa(s){return new Vt(s>>16&255,s>>8&255,s&255,1)}function vi(s,e,o,n){return n<=0&&(s=e=o=NaN),new Vt(s,e,o,n)}function PTe(s){return s instanceof li||(s=co(s)),s?(s=s.rgb(),new Vt(s.r,s.g,s.b,s.opacity)):new Vt}function En(s,e,o,n){return arguments.length===1?PTe(s):new Vt(s,e,o,n??1)}function Vt(s,e,o,n){this.r=+s,this.g=+e,this.b=+o,this.opacity=+n}ol(Vt,En,bd(li,{brighter(s){return s=s==null?Ai:Math.pow(Ai,s),new Vt(this.r*s,this.g*s,this.b*s,this.opacity)},darker(s){return s=s==null?Xo:Math.pow(Xo,s),new Vt(this.r*s,this.g*s,this.b*s,this.opacity)},rgb(){return this},clamp(){return new Vt(lo(this.r),lo(this.g),lo(this.b),Ei(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oa,formatHex:oa,formatHex8:STe,formatRgb:ia,toString:ia}));function oa(){return`#${no(this.r)}${no(this.g)}${no(this.b)}`}function STe(){return`#${no(this.r)}${no(this.g)}${no(this.b)}${no((isNaN(this.opacity)?1:this.opacity)*255)}`}function ia(){const s=Ei(this.opacity);return`${s===1?"rgb(":"rgba("}${lo(this.r)}, ${lo(this.g)}, ${lo(this.b)}${s===1?")":`, ${s})`}`}function Ei(s){return isNaN(s)?1:Math.max(0,Math.min(1,s))}function lo(s){return Math.max(0,Math.min(255,Math.round(s)||0))}function no(s){return s=lo(s),(s<16?"0":"")+s.toString(16)}function na(s,e,o,n){return n<=0?s=e=o=NaN:o<=0||o>=1?s=e=NaN:e<=0&&(s=NaN),new Zt(s,e,o,n)}function gd(s){if(s instanceof Zt)return new Zt(s.h,s.s,s.l,s.opacity);if(s instanceof li||(s=co(s)),!s)return new Zt;if(s instanceof Zt)return s;s=s.rgb();var e=s.r/255,o=s.g/255,n=s.b/255,i=Math.min(e,o,n),r=Math.max(e,o,n),d=NaN,c=r-i,h=(r+i)/2;return c?(e===r?d=(o-n)/c+(o<n)*6:o===r?d=(n-e)/c+2:d=(e-o)/c+4,c/=h<.5?r+i:2-r-i,d*=60):c=h>0&&h<1?0:d,new Zt(d,c,h,s.opacity)}function xTe(s,e,o,n){return arguments.length===1?gd(s):new Zt(s,e,o,n??1)}function Zt(s,e,o,n){this.h=+s,this.s=+e,this.l=+o,this.opacity=+n}ol(Zt,xTe,bd(li,{brighter(s){return s=s==null?Ai:Math.pow(Ai,s),new Zt(this.h,this.s,this.l*s,this.opacity)},darker(s){return s=s==null?Xo:Math.pow(Xo,s),new Zt(this.h,this.s,this.l*s,this.opacity)},rgb(){var s=this.h%360+(this.h<0)*360,e=isNaN(s)||isNaN(this.s)?0:this.s,o=this.l,n=o+(o<.5?o:1-o)*e,i=2*o-n;return new Vt(Sn(s>=240?s-240:s+120,i,n),Sn(s,i,n),Sn(s<120?s+240:s-120,i,n),this.opacity)},clamp(){return new Zt(la(this.h),$i(this.s),$i(this.l),Ei(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const s=Ei(this.opacity);return`${s===1?"hsl(":"hsla("}${la(this.h)}, ${$i(this.s)*100}%, ${$i(this.l)*100}%${s===1?")":`, ${s})`}`}}));function la(s){return s=(s||0)%360,s<0?s+360:s}function $i(s){return Math.max(0,Math.min(1,s||0))}function Sn(s,e,o){return(s<60?e+(o-e)*s/60:s<180?o:s<240?e+(o-e)*(240-s)/60:e)*255}const il=s=>()=>s;function jTe(s,e){return function(o){return s+o*e}}function OTe(s,e,o){return s=Math.pow(s,o),e=Math.pow(e,o)-s,o=1/o,function(n){return Math.pow(s+n*e,o)}}function TTe(s){return(s=+s)==1?yd:function(e,o){return o-e?OTe(e,o,s):il(isNaN(e)?o:e)}}function yd(s,e){var o=e-s;return o?jTe(s,o):il(isNaN(s)?e:s)}const Di=function s(e){var o=TTe(e);function n(i,r){var d=o((i=En(i)).r,(r=En(r)).r),c=o(i.g,r.g),h=o(i.b,r.b),g=yd(i.opacity,r.opacity);return function(w){return i.r=d(w),i.g=c(w),i.b=h(w),i.opacity=g(w),i+""}}return n.gamma=s,n}(1);function UTe(s,e){e||(e=[]);var o=s?Math.min(e.length,s.length):0,n=e.slice(),i;return function(r){for(i=0;i<o;++i)n[i]=s[i]*(1-r)+e[i]*r;return n}}function ITe(s){return ArrayBuffer.isView(s)&&!(s instanceof DataView)}function VTe(s,e){var o=e?e.length:0,n=s?Math.min(o,s.length):0,i=new Array(n),r=new Array(o),d;for(d=0;d<n;++d)i[d]=zi(s[d],e[d]);for(;d<o;++d)r[d]=e[d];return function(c){for(d=0;d<n;++d)r[d]=i[d](c);return r}}function MTe(s,e){var o=new Date;return s=+s,e=+e,function(n){return o.setTime(s*(1-n)+e*n),o}}function is(s,e){return s=+s,e=+e,function(o){return s*(1-o)+e*o}}function ATe(s,e){var o={},n={},i;(s===null||typeof s!="object")&&(s={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in s?o[i]=zi(s[i],e[i]):n[i]=e[i];return function(r){for(i in o)n[i]=o[i](r);return n}}var Dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(Dn.source,"g");function ETe(s){return function(){return s}}function DTe(s){return function(e){return s(e)+""}}function vd(s,e){var o=Dn.lastIndex=xn.lastIndex=0,n,i,r,d=-1,c=[],h=[];for(s=s+"",e=e+"";(n=Dn.exec(s))&&(i=xn.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),c[d]?c[d]+=r:c[++d]=r),(n=n[0])===(i=i[0])?c[d]?c[d]+=i:c[++d]=i:(c[++d]=null,h.push({i:d,x:is(n,i)})),o=xn.lastIndex;return o<e.length&&(r=e.slice(o),c[d]?c[d]+=r:c[++d]=r),c.length<2?h[0]?DTe(h[0].x):ETe(e):(e=h.length,function(g){for(var w=0,x;w<e;++w)c[(x=h[w]).i]=x.x(g);return c.join("")})}function zi(s,e){var o=typeof e,n;return e==null||o==="boolean"?il(e):(o==="number"?is:o==="string"?(n=co(e))?(e=n,Di):vd:e instanceof co?Di:e instanceof Date?MTe:ITe(e)?UTe:Array.isArray(e)?VTe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ATe:is)(s,e)}var aa=180/Math.PI,$d={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function kd(s,e,o,n,i,r){var d,c,h;return(d=Math.sqrt(s*s+e*e))&&(s/=d,e/=d),(h=s*o+e*n)&&(o-=s*h,n-=e*h),(c=Math.sqrt(o*o+n*n))&&(o/=c,n/=c,h/=c),s*n<e*o&&(s=-s,e=-e,h=-h,d=-d),{translateX:i,translateY:r,rotate:Math.atan2(e,s)*aa,skewX:Math.atan(h)*aa,scaleX:d,scaleY:c}}var ki;function zTe(s){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(s+"");return e.isIdentity?$d:kd(e.a,e.b,e.c,e.d,e.e,e.f)}function BTe(s){return s==null||(ki||(ki=document.createElementNS("http://www.w3.org/2000/svg","g")),ki.setAttribute("transform",s),!(s=ki.transform.baseVal.consolidate()))?$d:(s=s.matrix,kd(s.a,s.b,s.c,s.d,s.e,s.f))}function wd(s,e,o,n){function i(g){return g.length?g.pop()+" ":""}function r(g,w,x,P,I,V){if(g!==x||w!==P){var B=I.push("translate(",null,e,null,o);V.push({i:B-4,x:is(g,x)},{i:B-2,x:is(w,P)})}else(x||P)&&I.push("translate("+x+e+P+o)}function d(g,w,x,P){g!==w?(g-w>180?w+=360:w-g>180&&(g+=360),P.push({i:x.push(i(x)+"rotate(",null,n)-2,x:is(g,w)})):w&&x.push(i(x)+"rotate("+w+n)}function c(g,w,x,P){g!==w?P.push({i:x.push(i(x)+"skewX(",null,n)-2,x:is(g,w)}):w&&x.push(i(x)+"skewX("+w+n)}function h(g,w,x,P,I,V){if(g!==x||w!==P){var B=I.push(i(I)+"scale(",null,",",null,")");V.push({i:B-4,x:is(g,x)},{i:B-2,x:is(w,P)})}else(x!==1||P!==1)&&I.push(i(I)+"scale("+x+","+P+")")}return function(g,w){var x=[],P=[];return g=s(g),w=s(w),r(g.translateX,g.translateY,w.translateX,w.translateY,x,P),d(g.rotate,w.rotate,x,P),c(g.skewX,w.skewX,x,P),h(g.scaleX,g.scaleY,w.scaleX,w.scaleY,x,P),g=w=null,function(I){for(var V=-1,B=P.length,L;++V<B;)x[(L=P[V]).i]=L.x(I);return x.join("")}}}var LTe=wd(zTe,"px, ","px)","deg)"),RTe=wd(BTe,", ",")",")"),To=0,Yo=0,No=0,Fd=1e3,Bi,Ho,Li=0,uo=0,en=0,ei=typeof performance=="object"&&performance.now?performance:Date,Cd=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(s){setTimeout(s,17)};function nl(){return uo||(Cd(NTe),uo=ei.now()+en)}function NTe(){uo=0}function Ri(){this._call=this._time=this._next=null}Ri.prototype=Pd.prototype={constructor:Ri,restart:function(s,e,o){if(typeof s!="function")throw new TypeError("callback is not a function");o=(o==null?nl():+o)+(e==null?0:+e),!this._next&&Ho!==this&&(Ho?Ho._next=this:Bi=this,Ho=this),this._call=s,this._time=o,zn()},stop:function(){this._call&&(this._call=null,this._time=1/0,zn())}};function Pd(s,e,o){var n=new Ri;return n.restart(s,e,o),n}function qTe(){nl(),++To;for(var s=Bi,e;s;)(e=uo-s._time)>=0&&s._call.call(void 0,e),s=s._next;--To}function ra(){uo=(Li=ei.now())+en,To=Yo=0;try{qTe()}finally{To=0,YTe(),uo=0}}function WTe(){var s=ei.now(),e=s-Li;e>Fd&&(en-=e,Li=s)}function YTe(){for(var s,e=Bi,o,n=1/0;e;)e._call?(n>e._time&&(n=e._time),s=e,e=e._next):(o=e._next,e._next=null,e=s?s._next=o:Bi=o);Ho=s,zn(n)}function zn(s){if(!To){Yo&&(Yo=clearTimeout(Yo));var e=s-uo;e>24?(s<1/0&&(Yo=setTimeout(ra,s-ei.now()-en)),No&&(No=clearInterval(No))):(No||(Li=ei.now(),No=setInterval(WTe,Fd)),To=1,Cd(ra))}}function da(s,e,o){var n=new Ri;return e=e==null?0:+e,n.restart(i=>{n.stop(),s(i+e)},e,o),n}var HTe=od("start","end","cancel","interrupt"),QTe=[],Sd=0,ca=1,Bn=2,Oi=3,ua=4,Ln=5,Ti=6;function tn(s,e,o,n,i,r){var d=s.__transition;if(!d)s.__transition={};else if(o in d)return;GTe(s,o,{name:e,index:n,group:i,on:HTe,tween:QTe,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Sd})}function ll(s,e){var o=ts(s,e);if(o.state>Sd)throw new Error("too late; already scheduled");return o}function as(s,e){var o=ts(s,e);if(o.state>Oi)throw new Error("too late; already running");return o}function ts(s,e){var o=s.__transition;if(!o||!(o=o[e]))throw new Error("transition not found");return o}function GTe(s,e,o){var n=s.__transition,i;n[e]=o,o.timer=Pd(r,0,o.time);function r(g){o.state=ca,o.timer.restart(d,o.delay,o.time),o.delay<=g&&d(g-o.delay)}function d(g){var w,x,P,I;if(o.state!==ca)return h();for(w in n)if(I=n[w],I.name===o.name){if(I.state===Oi)return da(d);I.state===ua?(I.state=Ti,I.timer.stop(),I.on.call("interrupt",s,s.__data__,I.index,I.group),delete n[w]):+w<e&&(I.state=Ti,I.timer.stop(),I.on.call("cancel",s,s.__data__,I.index,I.group),delete n[w])}if(da(function(){o.state===Oi&&(o.state=ua,o.timer.restart(c,o.delay,o.time),c(g))}),o.state=Bn,o.on.call("start",s,s.__data__,o.index,o.group),o.state===Bn){for(o.state=Oi,i=new Array(P=o.tween.length),w=0,x=-1;w<P;++w)(I=o.tween[w].value.call(s,s.__data__,o.index,o.group))&&(i[++x]=I);i.length=x+1}}function c(g){for(var w=g<o.duration?o.ease.call(null,g/o.duration):(o.timer.restart(h),o.state=Ln,1),x=-1,P=i.length;++x<P;)i[x].call(s,w);o.state===Ln&&(o.on.call("end",s,s.__data__,o.index,o.group),h())}function h(){o.state=Ti,o.timer.stop(),delete n[e];for(var g in n)return;delete s.__transition}}function KTe(s,e){var o=s.__transition,n,i,r=!0,d;if(o){e=e==null?null:e+"";for(d in o){if((n=o[d]).name!==e){r=!1;continue}i=n.state>Bn&&n.state<Ln,n.state=Ti,n.timer.stop(),n.on.call(i?"interrupt":"cancel",s,s.__data__,n.index,n.group),delete o[d]}r&&delete s.__transition}}function JTe(s){return this.each(function(){KTe(this,s)})}function XTe(s,e){var o,n;return function(){var i=as(this,s),r=i.tween;if(r!==o){n=o=r;for(var d=0,c=n.length;d<c;++d)if(n[d].name===e){n=n.slice(),n.splice(d,1);break}}i.tween=n}}function ZTe(s,e,o){var n,i;if(typeof o!="function")throw new Error;return function(){var r=as(this,s),d=r.tween;if(d!==n){i=(n=d).slice();for(var c={name:e,value:o},h=0,g=i.length;h<g;++h)if(i[h].name===e){i[h]=c;break}h===g&&i.push(c)}r.tween=i}}function eUe(s,e){var o=this._id;if(s+="",arguments.length<2){for(var n=ts(this.node(),o).tween,i=0,r=n.length,d;i<r;++i)if((d=n[i]).name===s)return d.value;return null}return this.each((e==null?XTe:ZTe)(o,s,e))}function al(s,e,o){var n=s._id;return s.each(function(){var i=as(this,n);(i.value||(i.value={}))[e]=o.apply(this,arguments)}),function(i){return ts(i,n).value[e]}}function xd(s,e){var o;return(typeof e=="number"?is:e instanceof co?Di:(o=co(e))?(e=o,Di):vd)(s,e)}function tUe(s){return function(){this.removeAttribute(s)}}function sUe(s){return function(){this.removeAttributeNS(s.space,s.local)}}function oUe(s,e,o){var n,i=o+"",r;return function(){var d=this.getAttribute(s);return d===i?null:d===n?r:r=e(n=d,o)}}function iUe(s,e,o){var n,i=o+"",r;return function(){var d=this.getAttributeNS(s.space,s.local);return d===i?null:d===n?r:r=e(n=d,o)}}function nUe(s,e,o){var n,i,r;return function(){var d,c=o(this),h;return c==null?void this.removeAttribute(s):(d=this.getAttribute(s),h=c+"",d===h?null:d===n&&h===i?r:(i=h,r=e(n=d,c)))}}function lUe(s,e,o){var n,i,r;return function(){var d,c=o(this),h;return c==null?void this.removeAttributeNS(s.space,s.local):(d=this.getAttributeNS(s.space,s.local),h=c+"",d===h?null:d===n&&h===i?r:(i=h,r=e(n=d,c)))}}function aUe(s,e){var o=Zi(s),n=o==="transform"?RTe:xd;return this.attrTween(s,typeof e=="function"?(o.local?lUe:nUe)(o,n,al(this,"attr."+s,e)):e==null?(o.local?sUe:tUe)(o):(o.local?iUe:oUe)(o,n,e))}function rUe(s,e){return function(o){this.setAttribute(s,e.call(this,o))}}function dUe(s,e){return function(o){this.setAttributeNS(s.space,s.local,e.call(this,o))}}function cUe(s,e){var o,n;function i(){var r=e.apply(this,arguments);return r!==n&&(o=(n=r)&&dUe(s,r)),o}return i._value=e,i}function uUe(s,e){var o,n;function i(){var r=e.apply(this,arguments);return r!==n&&(o=(n=r)&&rUe(s,r)),o}return i._value=e,i}function mUe(s,e){var o="attr."+s;if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;var n=Zi(s);return this.tween(o,(n.local?cUe:uUe)(n,e))}function hUe(s,e){return function(){ll(this,s).delay=+e.apply(this,arguments)}}function pUe(s,e){return e=+e,function(){ll(this,s).delay=e}}function _Ue(s){var e=this._id;return arguments.length?this.each((typeof s=="function"?hUe:pUe)(e,s)):ts(this.node(),e).delay}function fUe(s,e){return function(){as(this,s).duration=+e.apply(this,arguments)}}function bUe(s,e){return e=+e,function(){as(this,s).duration=e}}function gUe(s){var e=this._id;return arguments.length?this.each((typeof s=="function"?fUe:bUe)(e,s)):ts(this.node(),e).duration}function yUe(s,e){if(typeof e!="function")throw new Error;return function(){as(this,s).ease=e}}function vUe(s){var e=this._id;return arguments.length?this.each(yUe(e,s)):ts(this.node(),e).ease}function $Ue(s,e){return function(){var o=e.apply(this,arguments);if(typeof o!="function")throw new Error;as(this,s).ease=o}}function kUe(s){if(typeof s!="function")throw new Error;return this.each($Ue(this._id,s))}function wUe(s){typeof s!="function"&&(s=ad(s));for(var e=this._groups,o=e.length,n=new Array(o),i=0;i<o;++i)for(var r=e[i],d=r.length,c=n[i]=[],h,g=0;g<d;++g)(h=r[g])&&s.call(h,h.__data__,g,r)&&c.push(h);return new Fs(n,this._parents,this._name,this._id)}function FUe(s){if(s._id!==this._id)throw new Error;for(var e=this._groups,o=s._groups,n=e.length,i=o.length,r=Math.min(n,i),d=new Array(n),c=0;c<r;++c)for(var h=e[c],g=o[c],w=h.length,x=d[c]=new Array(w),P,I=0;I<w;++I)(P=h[I]||g[I])&&(x[I]=P);for(;c<n;++c)d[c]=e[c];return new Fs(d,this._parents,this._name,this._id)}function CUe(s){return(s+"").trim().split(/^|\s+/).every(function(e){var o=e.indexOf(".");return o>=0&&(e=e.slice(0,o)),!e||e==="start"})}function PUe(s,e,o){var n,i,r=CUe(e)?ll:as;return function(){var d=r(this,s),c=d.on;c!==n&&(i=(n=c).copy()).on(e,o),d.on=i}}function SUe(s,e){var o=this._id;return arguments.length<2?ts(this.node(),o).on.on(s):this.each(PUe(o,s,e))}function xUe(s){return function(){var e=this.parentNode;for(var o in this.__transition)if(+o!==s)return;e&&e.removeChild(this)}}function jUe(){return this.on("end.remove",xUe(this._id))}function OUe(s){var e=this._name,o=this._id;typeof s!="function"&&(s=tl(s));for(var n=this._groups,i=n.length,r=new Array(i),d=0;d<i;++d)for(var c=n[d],h=c.length,g=r[d]=new Array(h),w,x,P=0;P<h;++P)(w=c[P])&&(x=s.call(w,w.__data__,P,c))&&("__data__"in w&&(x.__data__=w.__data__),g[P]=x,tn(g[P],e,o,P,g,ts(w,o)));return new Fs(r,this._parents,e,o)}function TUe(s){var e=this._name,o=this._id;typeof s!="function"&&(s=ld(s));for(var n=this._groups,i=n.length,r=[],d=[],c=0;c<i;++c)for(var h=n[c],g=h.length,w,x=0;x<g;++x)if(w=h[x]){for(var P=s.call(w,w.__data__,x,h),I,V=ts(w,o),B=0,L=P.length;B<L;++B)(I=P[B])&&tn(I,e,o,B,P,V);r.push(P),d.push(w)}return new Fs(r,d,e,o)}var UUe=ni.prototype.constructor;function IUe(){return new UUe(this._groups,this._parents)}function VUe(s,e){var o,n,i;return function(){var r=Oo(this,s),d=(this.style.removeProperty(s),Oo(this,s));return r===d?null:r===o&&d===n?i:i=e(o=r,n=d)}}function jd(s){return function(){this.style.removeProperty(s)}}function MUe(s,e,o){var n,i=o+"",r;return function(){var d=Oo(this,s);return d===i?null:d===n?r:r=e(n=d,o)}}function AUe(s,e,o){var n,i,r;return function(){var d=Oo(this,s),c=o(this),h=c+"";return c==null&&(h=c=(this.style.removeProperty(s),Oo(this,s))),d===h?null:d===n&&h===i?r:(i=h,r=e(n=d,c))}}function EUe(s,e){var o,n,i,r="style."+e,d="end."+r,c;return function(){var h=as(this,s),g=h.on,w=h.value[r]==null?c||(c=jd(e)):void 0;(g!==o||i!==w)&&(n=(o=g).copy()).on(d,i=w),h.on=n}}function DUe(s,e,o){var n=(s+="")=="transform"?LTe:xd;return e==null?this.styleTween(s,VUe(s,n)).on("end.style."+s,jd(s)):typeof e=="function"?this.styleTween(s,AUe(s,n,al(this,"style."+s,e))).each(EUe(this._id,s)):this.styleTween(s,MUe(s,n,e),o).on("end.style."+s,null)}function zUe(s,e,o){return function(n){this.style.setProperty(s,e.call(this,n),o)}}function BUe(s,e,o){var n,i;function r(){var d=e.apply(this,arguments);return d!==i&&(n=(i=d)&&zUe(s,d,o)),n}return r._value=e,r}function LUe(s,e,o){var n="style."+(s+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,BUe(s,e,o??""))}function RUe(s){return function(){this.textContent=s}}function NUe(s){return function(){var e=s(this);this.textContent=e??""}}function qUe(s){return this.tween("text",typeof s=="function"?NUe(al(this,"text",s)):RUe(s==null?"":s+""))}function WUe(s){return function(e){this.textContent=s.call(this,e)}}function YUe(s){var e,o;function n(){var i=s.apply(this,arguments);return i!==o&&(e=(o=i)&&WUe(i)),e}return n._value=s,n}function HUe(s){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(s==null)return this.tween(e,null);if(typeof s!="function")throw new Error;return this.tween(e,YUe(s))}function QUe(){for(var s=this._name,e=this._id,o=Od(),n=this._groups,i=n.length,r=0;r<i;++r)for(var d=n[r],c=d.length,h,g=0;g<c;++g)if(h=d[g]){var w=ts(h,e);tn(h,s,o,g,d,{time:w.time+w.delay+w.duration,delay:0,duration:w.duration,ease:w.ease})}return new Fs(n,this._parents,s,o)}function GUe(){var s,e,o=this,n=o._id,i=o.size();return new Promise(function(r,d){var c={value:d},h={value:function(){--i===0&&r()}};o.each(function(){var g=as(this,n),w=g.on;w!==s&&(e=(s=w).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(h)),g.on=e}),i===0&&r()})}var KUe=0;function Fs(s,e,o,n){this._groups=s,this._parents=e,this._name=o,this._id=n}function Od(){return++KUe}var ws=ni.prototype;Fs.prototype={constructor:Fs,select:OUe,selectAll:TUe,selectChild:ws.selectChild,selectChildren:ws.selectChildren,filter:wUe,merge:FUe,selection:IUe,transition:QUe,call:ws.call,nodes:ws.nodes,node:ws.node,size:ws.size,empty:ws.empty,each:ws.each,on:SUe,attr:aUe,attrTween:mUe,style:DUe,styleTween:LUe,text:qUe,textTween:HUe,remove:jUe,tween:eUe,delay:_Ue,duration:gUe,ease:vUe,easeVarying:kUe,end:GUe,[Symbol.iterator]:ws[Symbol.iterator]};function JUe(s){return((s*=2)<=1?s*s*s:(s-=2)*s*s+2)/2}var rl=1.70158;(function s(e){e=+e;function o(n){return(n=+n)*n*(e*(n-1)+n)}return o.overshoot=s,o})(rl);var XUe=function s(e){e=+e;function o(n){return--n*n*((n+1)*e+n)+1}return o.overshoot=s,o}(rl);(function s(e){e=+e;function o(n){return((n*=2)<1?n*n*((e+1)*n-e):(n-=2)*n*((e+1)*n+e)+2)/2}return o.overshoot=s,o})(rl);var ZUe={time:null,delay:0,duration:250,ease:JUe};function e7e(s,e){for(var o;!(o=s.__transition)||!(o=o[e]);)if(!(s=s.parentNode))throw new Error(`transition ${e} not found`);return o}function t7e(s){var e,o;s instanceof Fs?(e=s._id,s=s._name):(e=Od(),(o=ZUe).time=nl(),s=s==null?null:s+"");for(var n=this._groups,i=n.length,r=0;r<i;++r)for(var d=n[r],c=d.length,h,g=0;g<c;++g)(h=d[g])&&tn(h,s,e,g,d,o||e7e(h,e));return new Fs(n,this._parents,s,e)}ni.prototype.interrupt=JTe;ni.prototype.transition=t7e;const Rn=Math.PI,Nn=2*Rn,so=1e-6,s7e=Nn-so;function qn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Td(){return new qn}qn.prototype=Td.prototype={constructor:qn,moveTo:function(s,e){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(s,e){this._+="L"+(this._x1=+s)+","+(this._y1=+e)},quadraticCurveTo:function(s,e,o,n){this._+="Q"+ +s+","+ +e+","+(this._x1=+o)+","+(this._y1=+n)},bezierCurveTo:function(s,e,o,n,i,r){this._+="C"+ +s+","+ +e+","+ +o+","+ +n+","+(this._x1=+i)+","+(this._y1=+r)},arcTo:function(s,e,o,n,i){s=+s,e=+e,o=+o,n=+n,i=+i;var r=this._x1,d=this._y1,c=o-s,h=n-e,g=r-s,w=d-e,x=g*g+w*w;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=s)+","+(this._y1=e);else if(x>so)if(!(Math.abs(w*c-h*g)>so)||!i)this._+="L"+(this._x1=s)+","+(this._y1=e);else{var P=o-r,I=n-d,V=c*c+h*h,B=P*P+I*I,L=Math.sqrt(V),ee=Math.sqrt(x),J=i*Math.tan((Rn-Math.acos((V+x-B)/(2*L*ee)))/2),re=J/ee,se=J/L;Math.abs(re-1)>so&&(this._+="L"+(s+re*g)+","+(e+re*w)),this._+="A"+i+","+i+",0,0,"+ +(w*P>g*I)+","+(this._x1=s+se*c)+","+(this._y1=e+se*h)}},arc:function(s,e,o,n,i,r){s=+s,e=+e,o=+o,r=!!r;var d=o*Math.cos(n),c=o*Math.sin(n),h=s+d,g=e+c,w=1^r,x=r?n-i:i-n;if(o<0)throw new Error("negative radius: "+o);this._x1===null?this._+="M"+h+","+g:(Math.abs(this._x1-h)>so||Math.abs(this._y1-g)>so)&&(this._+="L"+h+","+g),o&&(x<0&&(x=x%Nn+Nn),x>s7e?this._+="A"+o+","+o+",0,1,"+w+","+(s-d)+","+(e-c)+"A"+o+","+o+",0,1,"+w+","+(this._x1=h)+","+(this._y1=g):x>so&&(this._+="A"+o+","+o+",0,"+ +(x>=Rn)+","+w+","+(this._x1=s+o*Math.cos(i))+","+(this._y1=e+o*Math.sin(i))))},rect:function(s,e,o,n){this._+="M"+(this._x0=this._x1=+s)+","+(this._y0=this._y1=+e)+"h"+ +o+"v"+ +n+"h"+-o+"Z"},toString:function(){return this._}};function xt(s){return function(){return s}}const ma=Math.abs,wt=Math.atan2,Xs=Math.cos,o7e=Math.max,jn=Math.min,ss=Math.sin,Co=Math.sqrt,It=1e-12,ti=Math.PI,Ni=ti/2,Ui=2*ti;function i7e(s){return s>1?0:s<-1?ti:Math.acos(s)}function ha(s){return s>=1?Ni:s<=-1?-Ni:Math.asin(s)}function n7e(s){return s.innerRadius}function l7e(s){return s.outerRadius}function a7e(s){return s.startAngle}function r7e(s){return s.endAngle}function d7e(s){return s&&s.padAngle}function c7e(s,e,o,n,i,r,d,c){var h=o-s,g=n-e,w=d-i,x=c-r,P=x*h-w*g;if(!(P*P<It))return P=(w*(e-r)-x*(s-i))/P,[s+P*h,e+P*g]}function wi(s,e,o,n,i,r,d){var c=s-o,h=e-n,g=(d?r:-r)/Co(c*c+h*h),w=g*h,x=-g*c,P=s+w,I=e+x,V=o+w,B=n+x,L=(P+V)/2,ee=(I+B)/2,J=V-P,re=B-I,se=J*J+re*re,de=i-r,K=P*B-V*I,ne=(re<0?-1:1)*Co(o7e(0,de*de*se-K*K)),te=(K*re-J*ne)/se,E=(-K*J-re*ne)/se,R=(K*re+J*ne)/se,N=(-K*J+re*ne)/se,q=te-L,Q=E-ee,le=R-L,pe=N-ee;return q*q+Q*Q>le*le+pe*pe&&(te=R,E=N),{cx:te,cy:E,x01:-w,y01:-x,x11:te*(i/de-1),y11:E*(i/de-1)}}function u7e(){var s=n7e,e=l7e,o=xt(0),n=null,i=a7e,r=r7e,d=d7e,c=null;function h(){var g,w,x=+s.apply(this,arguments),P=+e.apply(this,arguments),I=i.apply(this,arguments)-Ni,V=r.apply(this,arguments)-Ni,B=ma(V-I),L=V>I;if(c||(c=g=Td()),P<x&&(w=P,P=x,x=w),!(P>It))c.moveTo(0,0);else if(B>Ui-It)c.moveTo(P*Xs(I),P*ss(I)),c.arc(0,0,P,I,V,!L),x>It&&(c.moveTo(x*Xs(V),x*ss(V)),c.arc(0,0,x,V,I,L));else{var ee=I,J=V,re=I,se=V,de=B,K=B,ne=d.apply(this,arguments)/2,te=ne>It&&(n?+n.apply(this,arguments):Co(x*x+P*P)),E=jn(ma(P-x)/2,+o.apply(this,arguments)),R=E,N=E,q,Q;if(te>It){var le=ha(te/x*ss(ne)),pe=ha(te/P*ss(ne));(de-=le*2)>It?(le*=L?1:-1,re+=le,se-=le):(de=0,re=se=(I+V)/2),(K-=pe*2)>It?(pe*=L?1:-1,ee+=pe,J-=pe):(K=0,ee=J=(I+V)/2)}var ge=P*Xs(ee),he=P*ss(ee),_e=x*Xs(se),Pe=x*ss(se);if(E>It){var Oe=P*Xs(J),Se=P*ss(J),Be=x*Xs(re),Re=x*ss(re),Me;if(B<ti&&(Me=c7e(ge,he,Be,Re,Oe,Se,_e,Pe))){var ce=ge-Me[0],pt=he-Me[1],_t=Oe-Me[0],ot=Se-Me[1],Ct=1/ss(i7e((ce*_t+pt*ot)/(Co(ce*ce+pt*pt)*Co(_t*_t+ot*ot)))/2),nt=Co(Me[0]*Me[0]+Me[1]*Me[1]);R=jn(E,(x-nt)/(Ct-1)),N=jn(E,(P-nt)/(Ct+1))}}K>It?N>It?(q=wi(Be,Re,ge,he,P,N,L),Q=wi(Oe,Se,_e,Pe,P,N,L),c.moveTo(q.cx+q.x01,q.cy+q.y01),N<E?c.arc(q.cx,q.cy,N,wt(q.y01,q.x01),wt(Q.y01,Q.x01),!L):(c.arc(q.cx,q.cy,N,wt(q.y01,q.x01),wt(q.y11,q.x11),!L),c.arc(0,0,P,wt(q.cy+q.y11,q.cx+q.x11),wt(Q.cy+Q.y11,Q.cx+Q.x11),!L),c.arc(Q.cx,Q.cy,N,wt(Q.y11,Q.x11),wt(Q.y01,Q.x01),!L))):(c.moveTo(ge,he),c.arc(0,0,P,ee,J,!L)):c.moveTo(ge,he),!(x>It)||!(de>It)?c.lineTo(_e,Pe):R>It?(q=wi(_e,Pe,Oe,Se,x,-R,L),Q=wi(ge,he,Be,Re,x,-R,L),c.lineTo(q.cx+q.x01,q.cy+q.y01),R<E?c.arc(q.cx,q.cy,R,wt(q.y01,q.x01),wt(Q.y01,Q.x01),!L):(c.arc(q.cx,q.cy,R,wt(q.y01,q.x01),wt(q.y11,q.x11),!L),c.arc(0,0,x,wt(q.cy+q.y11,q.cx+q.x11),wt(Q.cy+Q.y11,Q.cx+Q.x11),L),c.arc(Q.cx,Q.cy,R,wt(Q.y11,Q.x11),wt(Q.y01,Q.x01),!L))):c.arc(0,0,x,se,re,L)}if(c.closePath(),g)return c=null,g+""||null}return h.centroid=function(){var g=(+s.apply(this,arguments)+ +e.apply(this,arguments))/2,w=(+i.apply(this,arguments)+ +r.apply(this,arguments))/2-ti/2;return[Xs(w)*g,ss(w)*g]},h.innerRadius=function(g){return arguments.length?(s=typeof g=="function"?g:xt(+g),h):s},h.outerRadius=function(g){return arguments.length?(e=typeof g=="function"?g:xt(+g),h):e},h.cornerRadius=function(g){return arguments.length?(o=typeof g=="function"?g:xt(+g),h):o},h.padRadius=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:xt(+g),h):n},h.startAngle=function(g){return arguments.length?(i=typeof g=="function"?g:xt(+g),h):i},h.endAngle=function(g){return arguments.length?(r=typeof g=="function"?g:xt(+g),h):r},h.padAngle=function(g){return arguments.length?(d=typeof g=="function"?g:xt(+g),h):d},h.context=function(g){return arguments.length?(c=g??null,h):c},h}function m7e(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function h7e(s,e){return e<s?-1:e>s?1:e>=s?0:NaN}function p7e(s){return s}function _7e(){var s=p7e,e=h7e,o=null,n=xt(0),i=xt(Ui),r=xt(0);function d(c){var h,g=(c=m7e(c)).length,w,x,P=0,I=new Array(g),V=new Array(g),B=+n.apply(this,arguments),L=Math.min(Ui,Math.max(-Ui,i.apply(this,arguments)-B)),ee,J=Math.min(Math.abs(L)/g,r.apply(this,arguments)),re=J*(L<0?-1:1),se;for(h=0;h<g;++h)(se=V[I[h]=h]=+s(c[h],h,c))>0&&(P+=se);for(e!=null?I.sort(function(de,K){return e(V[de],V[K])}):o!=null&&I.sort(function(de,K){return o(c[de],c[K])}),h=0,x=P?(L-g*re)/P:0;h<g;++h,B=ee)w=I[h],se=V[w],ee=B+(se>0?se*x:0)+re,V[w]={data:c[w],index:h,value:se,startAngle:B,endAngle:ee,padAngle:J};return V}return d.value=function(c){return arguments.length?(s=typeof c=="function"?c:xt(+c),d):s},d.sortValues=function(c){return arguments.length?(e=c,o=null,d):e},d.sort=function(c){return arguments.length?(o=c,e=null,d):o},d.startAngle=function(c){return arguments.length?(n=typeof c=="function"?c:xt(+c),d):n},d.endAngle=function(c){return arguments.length?(i=typeof c=="function"?c:xt(+c),d):i},d.padAngle=function(c){return arguments.length?(r=typeof c=="function"?c:xt(+c),d):r},d}function Qo(s,e,o){this.k=s,this.x=e,this.y=o}Qo.prototype={constructor:Qo,scale:function(s){return s===1?this:new Qo(this.k*s,this.x,this.y)},translate:function(s,e){return s===0&e===0?this:new Qo(this.k,this.x+this.k*s,this.y+this.k*e)},apply:function(s){return[s[0]*this.k+this.x,s[1]*this.k+this.y]},applyX:function(s){return s*this.k+this.x},applyY:function(s){return s*this.k+this.y},invert:function(s){return[(s[0]-this.x)/this.k,(s[1]-this.y)/this.k]},invertX:function(s){return(s-this.x)/this.k},invertY:function(s){return(s-this.y)/this.k},rescaleX:function(s){return s.copy().domain(s.range().map(this.invertX,this).map(s.invert,s))},rescaleY:function(s){return s.copy().domain(s.range().map(this.invertY,this).map(s.invert,s))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Qo.prototype;const dl=Yn({__name:"Wheel",props:{animDuration:{type:Number,default:6e3},modelValue:{type:Object,default:()=>({}),validator:s=>s.length<=8},gift:{type:Number,default:0},imgParams:{type:Object,default:()=>({})}},emits:["done"],setup(s,{expose:e,emit:o}){const n=s,i=Et(null),r=Et(!1),d=Et(),c=Et(null),h=Et(0),g=Et(0),w=Et({width:600,height:600}),x=Et(20),P=Et(),I=Et(null),V=Ii(()=>({width:`${B.value.width}px`,height:`${B.value.height}px`})),B=Ii(()=>{const Q=window.innerWidth,le=Math.min(Q,w.value.width)-x.value,pe=Math.min(Q,w.value.width)+120;return{width:le,height:pe}});let L=zi(0,0);const ee=()=>{P.value=Xl("#wheel").append("svg").attr("font-size","16px").attr("height","100%").attr("width","100%").attr("viewBox",`0 0 ${B.value.width+x.value*2} ${B.value.height}`).data([n.modelValue]).append("g").attr("class","wrapper").attr("transform",`translate(${(B.value.width+x.value*2)/2}, ${B.value.height/2})`)},J=()=>{const Q=P.value.append("defs").append("filter").attr("id","shadow").attr("x","-100%").attr("y","-100%").attr("width","550%").attr("height","550%");Q.append("feOffset").attr("in","SourceAlpha").attr("dx",0).attr("dy",0).attr("result","offsetOut"),Q.append("feGaussianBlur").attr("stdDeviation","9").attr("in","offsetOut").attr("result","drop"),Q.append("feColorMatrix").attr("in","drop").attr("result","color-out").attr("type","matrix").attr("values",`0 0 0 0   0
          0 0 0 0   0
          0 0 0 0   0
          0 0 0 .3 0
        `),Q.append("feBlend").attr("in","SourceGraphic").attr("in2","color-out").attr("mode","normal")},re=()=>{d.value=P.value.append("g").attr("class","wheelholder"),I.value=d.value.append("g"),c.value=_7e().value(()=>1).padAngle(.01).sort(null)},se=()=>{const Q=u7e().outerRadius(h.value).innerRadius(0);I.value.selectAll(".middleArcText").data(c.value(n.modelValue)).enter().append("path").attr("class","slice").attr("d",Q).attr("stroke","#000000").attr("stroke-width","3").attr("fill",(le,pe)=>le.data.bgColor).each(function(le,pe){let ge=/(^.+?)L/.exec(Xl(this).attr("d"))[1].replace(/,/g," ");if(le.endAngle>90*Math.PI/180){const he=/M(.*?)A/,_e=/A(.*?)0 0 1/,Pe=/0 0 1 (.*?)$/.exec(ge)[1],Oe=he.exec(ge)[1],Se=_e.exec(ge)[1];ge=`M${Pe}A${Se}0 0 0${Oe}`}I.value.append("path").attr("class","hiddenarcs").attr("id","middleArc"+pe).attr("d",ge).style("fill","none")})},de=()=>{I.value.selectAll(".middleArcText").data(c.value(n.modelValue)).enter().append("text").attr("class","middleArcText").attr("dy",Q=>Q.endAngle>90*Math.PI/180?-35:42).append("textPath").attr("startOffset","50%").attr("text-anchor","middle").attr("fill",(Q,le)=>Q.data.value.color).attr("xlink:href",(Q,le)=>"#middleArc"+le).text(Q=>Q.data.value)},K=()=>{d.value.append("circle").attr("cx",0).attr("cy",0).attr("r",h.value/2.5).attr("fill","#ffffff").attr("filter","url(#shadow)").attr("stroke-width",4).attr("stroke","#000000")},ne=()=>{d.value.append("g").append("circle").attr("cx",0).attr("cy",0).attr("r",(B.value.width-4)/2).attr("fill","transparent").attr("stroke-width","8").attr("filter","url(#shadow)").attr("stroke","#ffffff")},te=()=>{const{width:Q,height:le,src:pe}=n.imgParams;d.value.append("svg:image").attr("x",`-${Q/2}`).attr("y",`-${Q/2}`).attr("width",Q).attr("height",le).attr("xlink:href",pe)},E=()=>{const Q="M95.3,9.8c-16.5,0-23.7,15.6-21.9,27c3.4,21.7,21.9,42.2,21.9,42.2s18.5-20.5,21.9-42.2 C118.9,25.4,111.8,9.8,95.3,9.8z";d.value&&(i.value=d.value.append("g").append("path").attr("d",Q).attr("transform","translate(-20, -300)").attr("stroke","#ffffff").attr("fill","#FFFFFF").attr("filter","url(#shadow)").attr("transform",`matrix(1, 0, 0, 1, -95, -${B.value.height/2-x.value})`).attr("stroke-linejoin","round").attr("stroke-width","4"))},R=Q=>n.modelValue.findIndex(le=>le.id===Q)+1,N=()=>Q=>`rotate(${L(Q)})`,q=()=>{ee(),J(),re(),se(),de(),K(),ne(),n.imgParams&&te(),E()};return e({spin:async()=>{if(!r.value){r.value=!0;const Q=R(n.gift),le=n.modelValue.length,pe=360/le,ge=360-pe*(Q-1),he=360*5,_e=ge+he;g.value=Math.round(_e/pe)*pe;let Pe=Math.round(le-g.value%360/pe);Pe=Pe>=le?Pe%le:Pe;const Oe=pe+pe/2;g.value+=Oe-Math.round(pe*2),L=zi(0,g.value),await(()=>I.value.transition().duration(n.animDuration).ease(XUe.overshoot(.3)).attrTween("transform",N).end())(),r.value=!1,o("done",n.modelValue[Pe])}}}),hp(()=>{h.value=Math.min(B.value.width,B.value.height)/2,q()}),(Q,le)=>(l(),a("div",{id:"wheel",class:C(["wheel",`wheel_font-size--${s.modelValue.length}`]),style:dt(Ie(V))},null,6))}}),f7e={props:["modelValue","canPlay","actionData","isAdmin","interval"],computed:{preparedInterval(){if(!this.interval)return"24 часа";switch(this.interval){default:case 1:return"одного дня";case 7:return"7 дней";case 30:return"одного месяца"}},enabledToPlay(){return this.isAdmin?!0:!this.started&&this.canPlay}},data(){return{loaded:!0,selected_prize:null,started:!1,completed_at:null,gift:0,form:{win:null},logo:{src:"/wheel.png",width:120,height:120},settings:[{id:1,value:"🍅",bgColor:"#fac600",color:"#ffffff"},{id:2,value:"🍲",bgColor:"#ffffff",color:"#000000"},{id:3,value:"🍦",bgColor:"#ff2e55",color:"#ffffff"},{id:4,value:"😍",bgColor:"#a1043a",color:"#ffffff"},{id:5,value:"☕",bgColor:"#ffffff",color:"#000000"},{id:6,value:"🍕",bgColor:"#c92729",color:"#ffffff"},{id:7,value:"📲",bgColor:"#ffffff",color:"#000000"},{id:8,value:"📌",bgColor:"#c92729",color:"#ffffff"},{id:9,value:"🚀",bgColor:"#c92729",color:"#ffffff"}]}},mounted(){this.loaded=!1,this.$nextTick(()=>{this.settings=this.modelValue,this.actionData&&(this.form.win=(this.actionData.data||[]).length>0&&this.actionData.data[this.actionData.data.length-1]||null,this.completed_at=this.actionData.completed_at||null),this.loaded=!0})},methods:{selectPrize(s){this.selected_prize=this.settings[s]},done(s){this.form.win=s,this.isAdmin||this.$emit("win",this.form),this.$notify({title:"Колесо фортуны",text:"Поздравляем! Вы выиграли!",type:"success"}),this.completed_at=new Date,this.$nextTick(()=>{document.querySelector("#result").scrollIntoView()})},launchWheel(){if(!this.enabledToPlay)return;this.gift=Math.floor(Math.random()*this.settings.length)+1;let s=this.$refs.wheel;this.started=!0,s.spin()}},components:{Wheel:dl}};const b7e={class:"d-flex justify-content-center flex-wrap"},g7e={class:"item-wrap p-1"},y7e=["onClick"],v7e={class:"card-body"},$7e={class:"mb-2 text-center"},k7e={class:"mb-2 fst-italic"},w7e={class:"mb-0"},F7e={class:"fw-bold text-primary"},C7e={key:0,class:"wrap"},P7e={key:0,class:"start-panel"},S7e={key:1,class:"card",id:"result"},x7e={class:"card-body"},j7e={class:"text-center fw-bold"},O7e={key:0},T7e={key:1},U7e={class:"mb-2 text-center"},I7e={class:"mb-0 fst-italic"},V7e={key:0,class:"mb-0 mt-2"},M7e={class:"fw-bold text-primary"},A7e={key:1,class:"mb-2 p-0"},E7e={key:2,class:"mb-0"},D7e=t("span",{class:"fw-bold"},"Внимание!",-1),z7e={class:"fw-bold text-primary"},B7e={class:"fw-bold text-primary"};function L7e(s,e,o,n,i,r){const d=Qe("Wheel");return l(),a(v,null,[t("div",b7e,[i.selected_prize?(l(),a("div",{key:1,class:"card w-100",onClick:e[0]||(e[0]=c=>i.selected_prize=null)},[t("div",v7e,[t("h6",$7e,p(i.selected_prize.value||"-")+" (#"+p(i.selected_prize.id)+")",1),t("p",k7e,p(i.selected_prize.description||"не указно"),1),t("p",w7e,[_("Способ получения: "),t("span",F7e,p(i.selected_prize.mark||"не указано"),1)])])])):(l(!0),a(v,{key:0},O(i.settings,(c,h)=>(l(),a("div",g7e,[t("span",{onClick:g=>r.selectPrize(h),class:"btn btn-outline-light"},p(c.value),9,y7e)]))),256))]),i.loaded?(l(),a("div",C7e,[T(d,{gift:i.gift,imgParams:i.logo,onDone:r.done,ref:"wheel",modelValue:i.settings,"onUpdate:modelValue":e[1]||(e[1]=c=>i.settings=c)},null,8,["gift","imgParams","onDone","modelValue"]),r.enabledToPlay?(l(),a("div",P7e,[t("button",{type:"button",onClick:e[2]||(e[2]=(...c)=>r.launchWheel&&r.launchWheel(...c)),class:"btn btn-outline-primary bg-white border-5 text-black w-100 h-100 rounded-circle"},"Нажми старт ")])):u("",!0)])):u("",!0),i.form.win?(l(),a("div",S7e,[t("div",x7e,[t("h6",j7e,[i.completed_at?(l(),a("span",O7e,"Ваш текущий выигрыш")):(l(),a("span",T7e,"Ваш прошлый выигрыш"))]),t("h6",U7e,p(i.form.win.value||i.form.win.id||"-")+" (#"+p(i.form.win.id)+")",1),t("p",I7e,p(i.form.win.description||"не указно"),1),i.completed_at?(l(),a("p",V7e,[_("Вы сможете получить приз: "),t("span",M7e,p(i.form.win.mark||"не указано"),1)])):u("",!0),i.completed_at?(l(),a("hr",A7e)):u("",!0),i.completed_at?(l(),a("p",E7e,[D7e,_(" Приз возможно получить только течении "),t("span",z7e,p(r.preparedInterval),1),_(" с момента выигрыша: "),t("span",B7e,p(s.$filters.currentFull(i.completed_at)),1)])):u("",!0)])])):u("",!0)],64)}const Ud=oe(f7e,[["render",L7e]]),R7e={props:["modelValue","maxlength","params","required"],computed:{uuid(){return Bt()}},data(){return{message:null,selection:{start:0},settings:[{title:"Имя пользователя",key:"{{name}}"},{title:"Домен аккаунта",key:"{{username}}"},{title:"Номер телефона",key:"{{phone}}"},{title:"Название приза",key:"{{prize}}"}]}},watch:{message:{handler:function(s){this.$emit("update:modelValue",this.message)},deep:!0}},mounted(){this.$nextTick(()=>{this.message=this.modelValue||"-",this.params&&(this.settings=this.params)})},methods:{insert(s){let e=document.querySelector("#script-settings-text"+this.uuid).selectionStart||0,o=this.message;this.message=o.slice(0,e)+"<b>"+s+"</b>"+o.slice(e)},addCommand(s){this.message||(this.message=""),this.insert(s.key)}}},N7e={class:"alert alert-light mb-2"},q7e={class:"dropdown d-inline"},W7e=t("button",{class:"text-primary btn btn-link p-0",style:{"font-size":"14px"},type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),Y7e={class:"dropdown-menu"},H7e=["onClick"],Q7e={class:"form-floating"},G7e=["name","maxlength","required","id"],K7e=["for"],J7e={key:0};function X7e(s,e,o,n,i,r){return l(),a("div",null,[t("div",N7e,[_(" Данное сообщение может содержать параметры для отображения: "),t("div",q7e,[W7e,t("ul",Y7e,[(l(!0),a(v,null,O(i.settings,d=>(l(),a("li",null,[t("a",{onClick:c=>r.addCommand(d),class:"dropdown-item",href:"javascript:void(0)"},p(d.title||"Не указано"),9,H7e)]))),256))])])]),t("div",Q7e,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=d=>i.message=d),name:"script-settings-text"+r.uuid,maxlength:o.maxlength||"4000",style:{"min-height":"150px"},required:o.required||!1,placeholder:"Leave a comment here",id:"script-settings-text"+r.uuid},null,8,G7e),[[k,i.message]]),t("label",{for:"script-settings-text"+r.uuid},[jt(s.$slots,"title"),(i.message||"").length>0?(l(),a("span",J7e,p((i.message||"").length)+"/"+p(o.maxlength||4e3),1)):u("",!0)],8,K7e)])])}const Id=oe(R7e,[["render",X7e]]),Z7e={key:0},e9e=t("p",{class:"alert alert-warning mb-2"}," Данный интерактивный розыгрыш относится только к магазину! ",-1),t9e={class:"form-check form-switch mb-2"},s9e={class:"form-check-label",for:"script-settings-wheel-of-fortune-can_play"},o9e={class:"alert alert-light mb-2"},i9e=["onClick"],n9e={class:"form-floating mb-2"},l9e=["value"],a9e=t("label",{for:"interval"},"Период обновления",-1),r9e={class:"form-floating mb-2"},d9e={for:"script-settings-disabled_text"},c9e={key:0},u9e={class:"alert alert-light mb-2"},m9e=t("span",{class:"fw-bold text-primary"},"10",-1),h9e={class:"fw-bold text-primary"},p9e=t("strong",{class:"fw-bold text-primary"},"Внимание!",-1),_9e={class:"accordion accordion-flush",id:"wheel_of_fortune"},f9e={class:"accordion-item"},b9e={class:"accordion-header"},g9e=["data-bs-target","aria-controls"],y9e=["id"],v9e={class:"input-group my-2"},$9e={class:"form-floating"},k9e=["onUpdate:modelValue"],w9e=t("label",{for:"floatingInput"},"Телеграм-эмодзи",-1),F9e={class:"dropdown"},C9e=t("button",{class:"btn btn-outline-light text-primary w-100 h-100 rounded-0",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-regular fa-face-smile-beam"})],-1),P9e={class:"dropdown-menu p-0",style:{width:"300px"}},S9e={class:"row row-cols-5 w-100 p-2"},x9e={class:"col mb-2"},j9e=["onClick"],O9e={class:"form-floating mb-2"},T9e=["onUpdate:modelValue","name","id"],U9e=["for"],I9e={class:"form-floating mb-2"},V9e=["onUpdate:modelValue","id"],M9e=["for"],A9e={class:"alert-light alert mb-2"},E9e=["onClick"],D9e=["onClick"],z9e={class:"form-floating my-2"},B9e=["onUpdate:modelValue","name","id"],L9e=["for"],R9e=["onClick"],N9e=t("i",{class:"fa-regular fa-trash-can"},null,-1),q9e={class:"form-check form-switch my-2"},W9e=t("label",{class:"form-check-label",for:"need_auto_random_smiles"},"Добавлять смайл случайным образом",-1),Y9e=["disabled"],H9e={class:"alert alert-light mb-2"},Q9e=t("p",null,"Демонстрация заполнения",-1),G9e={props:["modelValue"],data(){return{loaded:!0,loaded_params:!1,need_auto_random_smiles:!0,smiles:["🥤","🥗","🍔","🍗","🍟","🥓","🌯","🍱","🍜","🍲","🍧","🍨","🧁","🥞","🤖","🎲","🎯","😊","😎","🌻","👽","💌","📚","🐶","👻","🏀","👓","🎓","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","💡","🚀","⭐","💎","☘","🏆","🎁"],intervals:[{title:"Один день",value:1},{title:"Одна неделя",value:7},{title:"Один месяц",value:30}],form:{win_message:null,interval:1,wheel_of_fortune:{can_play:!0,rules:"Колесо фортуны доступно 1 раз в сутки. В качестве приза вы можете выиграть 1 из предложенных призов и воспользоваться ими в заведении или на доставке:) Приятного отдыха!",items:[{id:1,value:"🍅",bgColor:"#fac600",color:"#ffffff",mark:"в заведении",description:"Приз 1"},{id:2,value:"🍲",bgColor:"#ffffff",color:"#000000",mark:"в заведении & на доставке",description:"Приз 2"},{id:3,value:"🍦",bgColor:"#ff2e55",color:"#ffffff",description:"Приз 3",mark:"на доставке"},{id:4,value:"🍓",bgColor:"#a1043a",color:"#ffffff",description:"Приз 4",mark:"в заведении"},{id:5,value:"☕",bgColor:"#ffffff",color:"#000000",description:"Приз 5",mark:"в заведении"},{id:6,value:"🍕",bgColor:"#c92729",color:"#ffffff",description:"Приз 6",mark:"на доставке"},{id:7,value:"⭐",bgColor:"#ffffff",color:"#000000",description:"Приз 7",mark:"в заведении & на доставке"},{id:8,value:"🎁",bgColor:"#c92729",color:"#ffffff",description:"Приз 8",mark:"в заведении & на доставке"},{id:9,value:"🚀",bgColor:"#ffffff",color:"#ffffff",description:"Приз 9",mark:"в заведении & на доставке"}]}}}},watch:{"form.wheel_of_fortune.items":{handler:function(s){this.loaded=!1,this.$nextTick(()=>{this.loaded=!0})},deep:!0},form:{handler:function(s){this.$emit("update:modelValue",this.form)},deep:!0}},mounted(){this.loaded_params=!1,this.$nextTick(()=>{function s(e,o){if(typeof e!="object"||e===null)return o??e;const n=Array.isArray(e)?[]:{};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i],d=o==null?void 0:o[i];typeof r=="object"&&r!==null&&!Array.isArray(r)?n[i]=s(r,d):n[i]=d!==void 0?d:r}return n}this.form=s(this.form,this.modelValue),this.loaded_params=!0,this.loaded=!0})},methods:{removeSector(s){this.form.wheel_of_fortune.items.splice(s,1);let e=1;this.form.wheel_of_fortune.items.forEach(o=>{o.id=e,e++}),this.$notify({title:"Редактор",text:"Сектор успешно удален! Идентификаторы секторов пересчитаны",type:"success"})},attachMarkText(s,e){this.form.wheel_of_fortune.items[s].mark+=(this.form.wheel_of_fortune.items[s].mark||"").length===0?e:" & "+e},addSector(){(this.form.wheel_of_fortune.items||[]).length===0&&(this.form.wheel_of_fortune.items=[]);let s=(o,n)=>(o=Math.ceil(o),n=Math.floor(n),Math.floor(Math.random()*(n-o+1))+o),e=this.need_auto_random_smiles?this.smiles[s(0,this.smiles.length-1)]:this.form.wheel_of_fortune.items.length+1;this.form.wheel_of_fortune.items.length<10?(this.form.wheel_of_fortune.items.push({id:this.form.wheel_of_fortune.items.length+1,value:e,bgColor:((this.form.wheel_of_fortune.items||[]).length+1)%2===0?"#c92729":"#ffffff",color:"#ffffff",description:"Описание приза №"+(this.form.wheel_of_fortune.items.length+1),mark:"в заведении & на доставке"}),this.$notify({title:"Редактор",text:"Сектор успешно добавлен!",type:"success"})):this.$notify({title:"Редактор",text:"Достигнут лимит секторов!",type:"error"})},addSmile(s,e){this.form.wheel_of_fortune.items[s].value=e}}},K9e=Object.assign(G9e,{__name:"ShopWheelForm",setup(s){return(e,o)=>{var n,i;return e.loaded_params?(l(),a("div",Z7e,[e9e,t("div",t9e,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=r=>e.form.wheel_of_fortune.can_play=r),role:"switch",id:"script-settings-is_disabled"},null,512),[[z,e.form.wheel_of_fortune.can_play]]),t("label",s9e,[_("Состояние колеса фортуны: "),t("span",{class:C({"text-primary fw-bold":e.form.wheel_of_fortune.can_play})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.wheel_of_fortune.can_play})},"выкл",2)])]),t("p",o9e,[_(" Выберите интервал автоматического обновления розыгрыша, доступны следующие варианты: "),(l(!0),a(v,null,O(e.intervals,r=>(l(),a("span",{class:C(["text-primary",{"fw-bold":e.form.interval===r.value}]),onClick:d=>e.form.interval=r.value},p(r.title||"-")+", ",11,i9e))),256))]),t("div",n9e,[f(t("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=r=>e.form.interval=r),required:"",id:"interval","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(e.intervals,r=>(l(),a("option",{value:r.value},p(r.title||"-"),9,l9e))),256))],512),[[Ve,e.form.interval]]),a9e]),t("div",r9e,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=r=>e.form.wheel_of_fortune.rules=r),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-wheel-of-fortune-can_play"},null,512),[[k,e.form.wheel_of_fortune.rules]]),t("label",d9e,[_("Правила колеса фортуны "),(((n=e.form)==null?void 0:n.wheel_of_fortune.rules)||"").length>0?(l(),a("span",c9e,p((((i=e.form)==null?void 0:i.wheel_of_fortune.rules)||"").length)+"/4000",1)):u("",!0)])]),T(Id,{modelValue:e.form.win_message,"onUpdate:modelValue":o[3]||(o[3]=r=>e.form.win_message=r),maxlength:4e3,class:"mb-2"},{title:A(()=>[_(" Текст пользователю при выигрыше ")]),_:1},8,["modelValue"]),t("p",u9e,[_("Редактирование призов, описания, отметки места получения приза, цвет сектора и цвет текста. Максимальное число секторов "),m9e,_(", сейчас создано "),t("span",h9e,p((e.form.wheel_of_fortune.items||[]).length),1),_(" секторов. "),p9e,_(" При удалении сектора идет пересчет его номера!")]),t("div",_9e,[(l(!0),a(v,null,O(e.form.wheel_of_fortune.items,(r,d)=>(l(),a("div",f9e,[t("h2",b9e,[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#wheel-sector-"+d,"aria-expanded":"false","aria-controls":"wheel-sector-"+d}," Сектор "+p(r.value)+" #"+p(r.id),9,g9e)]),t("div",{id:"wheel-sector-"+d,class:"accordion-collapse collapse","data-bs-parent":"#wheel_of_fortune"},[t("div",v9e,[t("div",$9e,[f(t("input",{type:"text","onUpdate:modelValue":c=>e.form.wheel_of_fortune.items[d].value=c,class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,8,k9e),[[k,e.form.wheel_of_fortune.items[d].value]]),w9e]),t("div",F9e,[C9e,t("div",P9e,[t("div",S9e,[(l(!0),a(v,null,O(e.smiles,c=>(l(),a("div",x9e,[t("a",{onClick:h=>e.addSmile(d,c),href:"javascript:void(0)",class:"btn btn-outline-light"},p(c),9,j9e)]))),256))])])])]),t("div",O9e,[f(t("textarea",{class:"form-control","onUpdate:modelValue":c=>e.form.wheel_of_fortune.items[d].description=c,maxlength:"4000",style:{"min-height":"100px"},name:"script-settings-description-"+d,placeholder:"Leave a comment here",id:"script-settings-description-"+d,required:""},`
                             `,8,T9e),[[k,e.form.wheel_of_fortune.items[d].description]]),t("label",{for:"script-settings-description-"+d},"Описание приза",8,U9e)]),t("div",I9e,[f(t("input",{type:"color","onUpdate:modelValue":c=>e.form.wheel_of_fortune.items[d].bgColor=c,class:"form-control",id:"script-settings-bgColor-"+d,placeholder:"name@example.com",required:""},null,8,V9e),[[k,e.form.wheel_of_fortune.items[d].bgColor]]),t("label",{for:"script-settings-bgColor-"+d},"Цвет фона сектора",8,M9e)]),t("p",A9e,[_("Впишите или выберите где можно получить приз: "),t("span",{onClick:c=>e.attachMarkText(d,"во время доставки"),class:"fw-bold text-primary cursor-pointer text-decoration-underline"},"во время доставки",8,E9e),_(" или "),t("span",{onClick:c=>e.attachMarkText(d,"в заведении"),class:"fw-bold text-primary cursor-pointer text-decoration-underline"},"в заведении",8,D9e),_(". Вы можете вписать сразу несколько вариантов.")]),t("div",z9e,[f(t("input",{type:"search","onUpdate:modelValue":c=>e.form.wheel_of_fortune.items[d].mark=c,class:"form-control",name:"wheel_of_fortune-mark-"+d,id:"wheel_of_fortune-mark-"+d,placeholder:"name@example.com",required:""},null,8,B9e),[[k,e.form.wheel_of_fortune.items[d].mark]]),t("label",{for:"wheel_of_fortune-mark-"+d},"Где выдается приз",8,L9e)]),t("a",{href:"javascript:void(0)",onClick:c=>e.removeSector(d),class:"btn btn-link w-100 text-center my-3"},[N9e,_(" Удалить сектор #"+p(r.id)+" ("+p(r.value||"-")+")",1)],8,R9e)],8,y9e)]))),256))]),t("div",q9e,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=r=>e.need_auto_random_smiles=r),type:"checkbox",role:"switch",id:"need_auto_random_smiles"},null,512),[[z,e.need_auto_random_smiles]]),W9e]),t("button",{type:"button",disabled:(e.form.wheel_of_fortune.items||[]).length===10,onClick:o[5]||(o[5]=(...r)=>e.addSector&&e.addSector(...r)),class:"btn btn-outline-primary w-100 p-3 mb-2"},"Добавить еще сектор ",8,Y9e),t("div",H9e,[Q9e,e.loaded&&(e.form.wheel_of_fortune.items||[]).length>=3?(l(),M(Ud,{key:0,"is-admin":!0,interval:e.form.interval,modelValue:e.form.wheel_of_fortune.items,"onUpdate:modelValue":o[6]||(o[6]=r=>e.form.wheel_of_fortune.items=r)},null,8,["interval","modelValue"])):u("",!0)])])):u("",!0)}}}),J9e={key:0},X9e={class:"form-check form-switch mb-2"},Z9e={class:"form-check-label",for:"script-settings-is_edit_mode"},eIe={class:"form-check form-switch mb-2"},tIe={class:"form-check-label",for:"script-settings-is_disabled"},sIe={class:"form-check form-switch mb-2"},oIe={class:"form-check-label",for:"script-settings-is_product_list"},iIe=t("p",{class:"alert alert-light mb-2"}," Тип магазина влияет на отображение самого магазина и на корзину. ",-1),nIe={class:"form-floating mb-2"},lIe=t("option",{value:0},"Продовольственный",-1),aIe=t("option",{value:1},"Бытовые товары",-1),rIe=[lIe,aIe],dIe=t("label",{for:"floatingSelect"},"Тип магазина",-1),cIe={class:"alert alert-light mb-2"},uIe={class:"form-check form-switch mb-2"},mIe={class:"form-check-label",for:"script-settings-can_buy_after_closing"},hIe=t("p",{class:"alert alert-light mb-2"},"Текст для клиентов, который отображается пользователю если магазин в данный момент выключен администратором",-1),pIe={class:"form-floating mb-2"},_Ie=t("label",{for:"script-settings-disabled_text"},"Текст при выключении",-1),fIe={class:"form-check form-switch mb-2"},bIe={class:"form-check-label",for:"script-settings-need_bonuses_section"},gIe=t("p",{class:"alert alert-light mb-2"},"Сумма, от которой будет доступен заказа в магазине",-1),yIe={class:"form-floating mb-2"},vIe=t("label",{for:"floatingInput"},"Минимальная сумма заказа",-1),$Ie=t("p",{class:"alert alert-light mb-2"},"Описание процесса доставки \\ оплаты доставки. Текст размещен в корзине перед нажатием кнопки оформления заказа.",-1),kIe={class:"form-floating mb-2"},wIe=t("label",{for:"script-settings-disabled_text"},"Текст доставки",-1),FIe={class:"form-check form-switch mb-2"},CIe={class:"form-check-label",for:"script-settings-need_automatic_delivery_request"},PIe={key:0},SIe={class:"form-check form-switch mb-2"},xIe={class:"form-check-label",for:"script-settings-need_bonuses_section"},jIe=t("p",{class:"alert alert-light mb-2"},"Далее настройка параметров доставки: базовая цена для расчёта стоимости доставки. Расчёт доставки идет по прямой от точки А к точке Б. Формула: базовая цена + N км * цена за км",-1),OIe={class:"form-floating mb-2"},TIe=t("label",{for:"floatingInput"},"Базовая цена доставки",-1),UIe=t("p",{class:"alert alert-light mb-2"},"Цена доставки за 1км пути",-1),IIe={class:"form-floating mb-2"},VIe=t("label",{for:"floatingInput"},"Цена за км пути",-1),MIe={class:"form-floating mb-2"},AIe=t("label",{for:"floatingInput"},"Бесплатная доставка от",-1),EIe=t("p",{class:"alert alert-light mb-2"},[_("Расчет цены доставки происходит на основе координат. Укажите координаты вашего заведения из "),t("a",{class:"text-primary fw-bold",href:"https://yandex.ru/maps/",target:"_blank"},"Яндекс.Карты"),_(" - скопируйте и вставьте "),t("span",{class:"fw-bold text-primary"},"00.000000"),_(", "),t("span",{class:"fw-bold text-primary"},"00.000000"),_(" координаты в это поле. ")],-1),DIe={class:"form-floating mb-2"},zIe=t("label",{for:"floatingInput"},"Координаты заведения",-1),BIe=t("p",{class:"alert alert-light mb-2"},"Платежная информация: как оплатить и дальнейшие инструкции",-1),LIe={class:"form-floating mb-2"},RIe=t("label",{for:"script-settings-disabled_text"},"Текст оплаты",-1),NIe=t("p",{class:"alert alert-light mb-2"},"Данный флаг позволяет отключить прием платежа через скриншот. После оформления заказа клиент будет ждать звонка с инструкцией от оператора",-1),qIe={class:"form-check form-switch mb-2"},WIe={class:"form-check-label",for:"script-settings-need_pay_after_call"},YIe={class:"form-check form-switch mb-2"},HIe={class:"form-check-label",for:"script-settings-can_use_cash"},QIe=t("p",{class:"alert alert-light mb-2"},"Оплата картой подразумевает использование платежного агрегатора и требует ввода тоукена платежной системы. Оплата через агрегатора облагается налогом.",-1),GIe={class:"form-check form-switch mb-2"},KIe={class:"form-check-label",for:"script-settings-can_use_card"},JIe={key:1,class:"form-floating mb-2"},XIe=t("label",{for:"floatingInput"},"Тоукен платежной системы",-1),ZIe=t("div",{class:"divider my-3"},"Секции",-1),eVe=t("p",{class:"alert alert-light"}," Данный блок переключателей включает \\ выключает отображение соответствующих секций в корзине. ",-1),tVe={class:"form-check form-switch mb-2"},sVe={class:"form-check-label",for:"script-settings-need_promo_code"},oVe={class:"form-check form-switch mb-2"},iVe={class:"form-check-label",for:"script-settings-need_bonuses_section"},nVe={class:"form-check form-switch mb-2"},lVe={class:"form-check-label",for:"script-settings-need_prizes_from_wheel_of_fortune"},aVe={class:"form-check form-switch mb-2"},rVe={class:"form-check-label",for:"script-settings-need_person_counter"},dVe={class:"form-check form-switch mb-2"},cVe={class:"form-check-label",for:"script-settings-need_health_restrictions"},uVe=t("div",{class:"divider my-3"},"Настройка СБП",-1),mVe={class:"form-check form-switch mb-2"},hVe={class:"form-check-label",for:"script-settings-need_use_sbp"},pVe=t("p",{class:"mb-2 alert alert-light"},[_("Внимание! На текущий момент для СБП используется только "),t("a",{href:"https://telegra.ph/Nastrojka-SBP-v-T-bank-12-28",target:"_blank",class:"text-primary fw-bold"},"Т-Банк")],-1),_Ve={class:"form-floating mb-2"},fVe=t("label",{for:"modelValue-tinkoff-terminal-key"},"Ключ терминала",-1),bVe={class:"form-floating mb-2"},gVe=t("label",{for:"modelValue-tinkoff-terminal-password"},"Пароль терминала",-1),yVe={class:"form-floating mb-2"},vVe=["value"],$Ve=t("label",{for:"floatingSelect"},"Схема налогооблажения",-1),kVe={class:"form-floating mb-2"},wVe=["value"],FVe=t("label",{for:"floatingSelect"},"% НДС",-1),CVe=t("p",{class:"alert alert-light mb-2"},[_(" Ссылка для добавления в оповещения "),t("a",{href:"https://www.tbank.ru/",target:"_blank"},"Т-Банка")],-1),PVe=t("i",{class:"fa-regular fa-clipboard mr-2"},null,-1),SVe=t("div",{class:"divider my-3"},"Настройка призов из розыгрыша",-1),xVe=t("p",{class:"alert alert-light mb-2"}," Вам нужно выбрать скрипт колеса, призы которого будут автоматически вносится в заказ пользователем. ",-1),jVe=t("h6",null,"Доступные для выбора скрипты",-1),OVe={key:4,class:"list-group mb-2"},TVe=["onClick"],UVe={class:"fw-bold"},IVe=t("div",{class:"divider my-3"},"Кнопка связи с менеджером",-1),VVe={class:"form-floating mb-2"},MVe=t("label",{for:"floatingInput"},"Полная ссылка на менеджера",-1),AVe={class:"form-floating mb-2"},EVe=t("label",{for:"floatingInput"},"Текст на кнопке",-1),DVe={props:["modelValue"],data(){return{loaded_params:!1,scripts:[],vat_variants:[{value:"none",title:"Нет"},{value:"vat0",title:"0%"},{value:"vat10",title:"10%"},{value:"vat18",title:"18%"},{value:"vat20",title:"20%"}],tax_variants:[{tax:"osn",title:"общая"},{tax:"usn_income",title:"упрощенная (доходы)"},{tax:"usn_income_outcome",title:"упрощенная (доходы минус расходы)"},{tax:"patent",title:"патентная"},{tax:"envd",title:"единый налог на вмененный доход"},{tax:"esn",title:"единый сельскохозяйственный налог"},{tax:"self",title:"НПД"}],form:{shop_coords:null,yandex_geocoder:null,free_shipping_starts_from:0,min_base_delivery_price:0,price_per_km:80,payment_info:null,main_text:null,delivery_price_text:null,min_price:80,is_edit_mode:!1,is_disabled:!1,can_buy_after_closing:!1,can_use_cash:!0,can_use_card:!0,payment_token:null,need_pay_after_call:!1,need_hide_disabled_products:!1,need_hide_delivery_period:!1,can_use_booking:!1,tables_variants:[],manager:{link:null,title:"Написать"},disabled_text:null,shop_display_type:0,is_product_list:!1,can_use_sbp:!1,sbp:{selected_sbp_bank:"tinkoff",tinkoff:{terminal_key:null,terminal_password:null,tax:null,vat:null},sber:{}},max_tables:0,need_table_list:!1,need_promo_code:!0,need_automatic_delivery_request:!0,need_person_counter:!0,need_bonuses_section:!0,need_health_restrictions:!0,need_prizes_from_wheel_of_fortune:!0,selected_script_id:null}}},computed:{bot(){return window.currentBot},pageTinkoffLink(){return"https://your-cashman.com/payment-products-notify/tinkoff/"+this.bot.bot_domain},scriptId(){return window.currentScript||null}},watch:{form:{handler:function(s){this.$emit("update:modelValue",this.form)},deep:!0},"form.can_use_sbp":{handler:function(s){this.form.can_use_sbp||(this.form.sbp={selected_sbp_bank:"tinkoff",tinkoff:{terminal_key:null,terminal_password:null,tax:null,vat:null},sber:{}})},deep:!0}},mounted(){this.loadWheelScriptVariants(),this.loaded_params=!1,this.$nextTick(()=>{Object.keys(this.modelValue).forEach(s=>{s in this.form&&(this.form[s]=this.modelValue[s])}),this.loaded_params=!0})},methods:{normalizeTelegramLink(){var e;if(!this.form.manager)return;let s=((e=this.form.manager)==null?void 0:e.link)||"";if(!s.includes("https://t.me")){if(s.startsWith("@")){this.form.manager.link="https://t.me/"+s.slice(1);return}!s.startsWith("https://")&&!s.includes("t.me")&&/^[a-zA-Z0-9_]+$/.test(s)&&(this.form.manager.link="https://t.me/"+s)}},copyToClipBoard(){let s=this.pageTinkoffLink;navigator.clipboard.writeText(s).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},selectScript(s){if(s==null){this.form.selected_script_id=null;return}this.form.selected_script_id=null,this.$nextTick(()=>{this.form.selected_script_id=s.id})},loadWheelScriptVariants(){this.$store.dispatch("wheelOfFortuneLoadScriptVariants").then(s=>{this.scripts=s||[]}).catch(s=>{})}}},zVe=Object.assign(DVe,{__name:"ShopForm",setup(s){return(e,o)=>{const n=ie("mask");return e.loaded_params?(l(),a("div",J9e,[t("div",X9e,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=i=>e.form.is_edit_mode=i),role:"switch",id:"script-settings-is_edit_mode"},null,512),[[z,e.form.is_edit_mode]]),t("label",Z9e,[_("Режим редактирования страниц: "),t("span",{class:C({"text-primary fw-bold":!e.form.is_edit_mode})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":e.form.is_edit_mode})},"выкл",2)])]),t("div",eIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=i=>e.form.is_disabled=i),role:"switch",id:"script-settings-is_disabled"},null,512),[[z,e.form.is_disabled]]),t("label",tIe,[_("Состояние магазина: "),t("span",{class:C({"text-primary fw-bold":!e.form.is_disabled})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":e.form.is_disabled})},"выкл",2)])]),t("div",sIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=i=>e.form.is_product_list=i),role:"switch",id:"script-settings-is_product_list"},null,512),[[z,e.form.is_product_list]]),t("label",oIe,[_("Отображение товаров: "),t("span",{class:C({"text-primary fw-bold":!e.form.is_product_list})},"плитка",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":e.form.is_product_list})},"список",2)])]),iIe,t("div",nIe,[f(t("select",{class:"form-select","onUpdate:modelValue":o[3]||(o[3]=i=>e.form.shop_display_type=i),id:"floatingSelect","aria-label":"Floating label select example"},rIe,512),[[Ve,e.form.shop_display_type]]),dIe]),t("p",cIe,[_("Вы можете разрешить или запретить клиентам оставлять заказы вне рабочего времени вашего сервиса. Если переключатель выключен, то покупки будут доступны "),t("span",{class:C({"text-primary fw-bold":!e.form.can_buy_after_closing})},"согласно графика",2),_(" работы вашего заведения, а если включен - "),t("span",{class:C({"text-primary fw-bold":e.form.can_buy_after_closing})},"всегда",2),_(".")]),t("div",uIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=i=>e.form.can_buy_after_closing=i),role:"switch",id:"script-settings-can_buy_after_closing"},null,512),[[z,e.form.can_buy_after_closing]]),t("label",mIe,[_("Покупки после закрытия: "),t("span",{class:C({"text-primary fw-bold":e.form.can_buy_after_closing})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.can_buy_after_closing})},"выкл",2)])]),hIe,t("div",pIe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[5]||(o[5]=i=>e.form.disabled_text=i),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-disabled_text"},null,512),[[k,e.form.disabled_text]]),_Ie]),t("div",fIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=i=>e.form.need_hide_disabled_products=i),role:"switch",id:"script-settings-need_bonuses_section"},null,512),[[z,e.form.need_hide_disabled_products]]),t("label",bIe,[_("Скрывать товары, которых нет в наличии: "),t("span",{class:C({"text-primary fw-bold":e.form.need_hide_disabled_products})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_hide_disabled_products})},"выкл",2)])]),gIe,t("div",yIe,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[7]||(o[7]=i=>e.form.min_price=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.min_price]]),vIe]),$Ie,t("div",kIe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[8]||(o[8]=i=>e.form.delivery_price_text=i),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-disabled_text"},null,512),[[k,e.form.delivery_price_text]]),wIe]),t("div",FIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[9]||(o[9]=i=>e.form.need_automatic_delivery_request=i),role:"switch",id:"script-settings-need_automatic_delivery_request"},null,512),[[z,e.form.need_automatic_delivery_request]]),t("label",CIe,[_("Автоматический расчет цены доставки: "),t("span",{class:C({"text-primary fw-bold":e.form.need_automatic_delivery_request})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_automatic_delivery_request})},"выкл",2),e.form.shop_display_type===1?(l(),a("span",PIe," (через СДЭК)")):u("",!0)])]),t("div",SIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[10]||(o[10]=i=>e.form.need_hide_delivery_period=i),role:"switch",id:"script-settings-need_bonuses_section"},null,512),[[z,e.form.need_hide_delivery_period]]),t("label",xIe,[_("Скрывать период доставки при расчете СДЭК: "),t("span",{class:C({"text-primary fw-bold":e.form.need_hide_delivery_period})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_hide_delivery_period})},"выкл",2)])]),e.form.shop_display_type===0?(l(),a(v,{key:0},[e.form.need_automatic_delivery_request?(l(),a(v,{key:0},[jIe,t("div",OIe,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[11]||(o[11]=i=>e.form.min_base_delivery_price=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.min_base_delivery_price]]),TIe]),UIe,t("div",IIe,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[12]||(o[12]=i=>e.form.price_per_km=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.price_per_km]]),VIe]),t("div",MIe,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[13]||(o[13]=i=>e.form.free_shipping_starts_from=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.free_shipping_starts_from]]),AIe]),EIe,t("div",DIe,[f(t("input",{type:"text","onUpdate:modelValue":o[14]||(o[14]=i=>e.form.shop_coords=i),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[n,["##.######, ##.######"]],[k,e.form.shop_coords]]),zIe])],64)):u("",!0)],64)):u("",!0),BIe,t("div",LIe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[15]||(o[15]=i=>e.form.payment_info=i),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-disabled_text"},null,512),[[k,e.form.payment_info]]),RIe]),NIe,t("div",qIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=i=>e.form.need_pay_after_call=i),role:"switch",id:"script-settings-need_pay_after_call"},null,512),[[z,e.form.need_pay_after_call]]),t("label",WIe,[_("Режим оплаты после звонка: "),t("span",{class:C({"text-primary fw-bold":e.form.need_pay_after_call})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_pay_after_call})},"выкл",2)])]),t("div",YIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[17]||(o[17]=i=>e.form.can_use_cash=i),role:"switch",id:"script-settings-can_use_cash"},null,512),[[z,e.form.can_use_cash]]),t("label",HIe,[_("Оплата наличными или переводом: "),t("span",{class:C({"text-primary fw-bold":e.form.can_use_cash})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.can_use_cash})},"выкл",2)])]),QIe,t("div",GIe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[18]||(o[18]=i=>e.form.can_use_card=i),role:"switch",id:"script-settings-can_use_card"},null,512),[[z,e.form.can_use_card]]),t("label",KIe,[_("Оплата картой: "),t("span",{class:C({"text-primary fw-bold":e.form.can_use_card})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.can_use_card})},"выкл",2)])]),e.form.can_use_card?(l(),a("div",JIe,[f(t("input",{type:"text","onUpdate:modelValue":o[19]||(o[19]=i=>e.form.payment_token=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.payment_token]]),XIe])):u("",!0),ZIe,eVe,t("div",tVe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[20]||(o[20]=i=>e.form.need_promo_code=i),role:"switch",id:"script-settings-need_promo_code"},null,512),[[z,e.form.need_promo_code]]),t("label",sVe,[_("Промокод: "),t("span",{class:C({"text-primary fw-bold":e.form.need_promo_code})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_promo_code})},"выкл",2)])]),t("div",oVe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[21]||(o[21]=i=>e.form.need_bonuses_section=i),role:"switch",id:"script-settings-need_bonuses_section"},null,512),[[z,e.form.need_bonuses_section]]),t("label",iVe,[_("Использовать бонусы при оплате: "),t("span",{class:C({"text-primary fw-bold":e.form.need_bonuses_section})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_bonuses_section})},"выкл",2)])]),t("div",nVe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[22]||(o[22]=i=>e.form.need_prizes_from_wheel_of_fortune=i),role:"switch",id:"script-settings-need_prizes_from_wheel_of_fortune"},null,512),[[z,e.form.need_prizes_from_wheel_of_fortune]]),t("label",lVe,[_("Призы колеса фортуны: "),t("span",{class:C({"text-primary fw-bold":e.form.need_prizes_from_wheel_of_fortune})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_prizes_from_wheel_of_fortune})},"выкл",2)])]),e.form.shop_display_type===0?(l(),a(v,{key:2},[t("div",aVe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[23]||(o[23]=i=>e.form.need_person_counter=i),role:"switch",id:"script-settings-need_person_counter"},null,512),[[z,e.form.need_person_counter]]),t("label",rVe,[_("Число персон: "),t("span",{class:C({"text-primary fw-bold":e.form.need_person_counter})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_person_counter})},"выкл",2)])]),t("div",dVe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[24]||(o[24]=i=>e.form.need_health_restrictions=i),role:"switch",id:"script-settings-need_health_restrictions"},null,512),[[z,e.form.need_health_restrictions]]),t("label",cVe,[_("Ограничения по здоровью: "),t("span",{class:C({"text-primary fw-bold":e.form.need_health_restrictions})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_health_restrictions})},"выкл",2)])])],64)):u("",!0),uVe,t("div",mVe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[25]||(o[25]=i=>e.form.can_use_sbp=i),role:"switch",id:"script-settings-need_use_sbp"},null,512),[[z,e.form.can_use_sbp]]),t("label",hVe,[_("Использовать СБП для оплат: "),t("span",{class:C({"text-primary fw-bold":e.form.can_use_sbp})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.can_use_sbp})},"выкл",2)])]),e.form.can_use_sbp&&e.form.sbp?(l(),a(v,{key:3},[pVe,t("div",_Ve,[f(t("input",{type:"text",required:"","onUpdate:modelValue":o[26]||(o[26]=i=>e.form.sbp.tinkoff.terminal_key=i),class:"form-control",id:"modelValue-tinkoff-terminal-key",placeholder:"Ключ терминала"},null,512),[[k,e.form.sbp.tinkoff.terminal_key]]),fVe]),t("div",bVe,[f(t("input",{type:"text",required:"","onUpdate:modelValue":o[27]||(o[27]=i=>e.form.sbp.tinkoff.terminal_password=i),class:"form-control",id:"modelValue-tinkoff-terminal-password",placeholder:"Пароль терминала"},null,512),[[k,e.form.sbp.tinkoff.terminal_password]]),gVe]),t("div",yVe,[f(t("select",{class:"form-select",required:"","onUpdate:modelValue":o[28]||(o[28]=i=>e.form.sbp.tinkoff.tax=i),id:"floatingSelect","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(e.tax_variants,(i,r)=>(l(),a("option",{value:i.tax},p(i.title),9,vVe))),256))],512),[[Ve,e.form.sbp.tinkoff.tax]]),$Ve]),t("div",kVe,[f(t("select",{class:"form-select",required:"","onUpdate:modelValue":o[29]||(o[29]=i=>e.form.sbp.tinkoff.vat=i),id:"floatingSelect","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(e.vat_variants,(i,r)=>(l(),a("option",{value:i.value},p(i.title),9,wVe))),256))],512),[[Ve,e.form.sbp.tinkoff.vat]]),FVe]),CVe,t("button",{onClick:o[30]||(o[30]=(...i)=>e.copyToClipBoard&&e.copyToClipBoard(...i)),type:"button",class:"btn btn-info p-3 w-100"},[PVe,_("Скопировать ссылку ")])],64)):u("",!0),SVe,xVe,jVe,(e.scripts||[]).length>0?(l(),a("ul",OVe,[t("li",{onClick:o[31]||(o[31]=i=>e.selectScript(null)),class:C([{"bg-primary text-white":(e.form.selected_script_id||null)==null},"list-group-item d-flex justify-content-between"])},"Не выбрано ",2),(l(!0),a(v,null,O(e.scripts,i=>(l(),a("li",{onClick:r=>e.selectScript(i),class:C([{"bg-primary text-white":(e.form.selected_script_id||null)==i.id},"list-group-item d-flex justify-content-between"])},[_(p(i.command||"-")+" ",1),t("small",UVe,"#"+p(i.id),1)],10,TVe))),256))])):u("",!0),e.form.manager?(l(),a(v,{key:5},[IVe,t("div",VVe,[f(t("input",{type:"text",onBlur:o[32]||(o[32]=(...i)=>e.normalizeTelegramLink&&e.normalizeTelegramLink(...i)),"onUpdate:modelValue":o[33]||(o[33]=i=>e.form.manager.link=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,544),[[k,e.form.manager.link]]),MVe]),t("div",AVe,[f(t("input",{type:"text","onUpdate:modelValue":o[34]||(o[34]=i=>e.form.manager.title=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.manager.title]]),EVe])],64)):u("",!0)])):u("",!0)}}}),BVe={data(){return{step:0,load:!1,photo:null,removedImage:null,need_reset:!1,vat_codes:[{id:1,title:"Общая система налогообложения"},{id:2,title:"Упрощенная (УСН, доходы)"},{id:3,title:"Упрощенная (УСН, доходы минус расходы)"},{id:4,title:"Единый налог на вмененный доход (ЕНВД)"},{id:5,title:"Единый сельскохозяйственный налог (ЕСН)"},{id:6,title:"Патентная система налогообложения"}],business_form_categories:[{id:0,title:"Физическое-лицо"},{id:1,title:"Самозанятый"},{id:2,title:"Индивидуальный предприниматель (ИП)"},{id:3,title:"Общество с ограниченной ответственностью (ООО)"}],companyForm:{id:null,law_params:{selected_type:2,full_name:null,inn:null,ogrnip:null,name:null,kpp:null,ogrn:null,phisical_adress:null,passport_number:null,passport_date:null,passport_issuer:null,agreement:!0,offer_link:null},vat_code:1}}},computed:{currentBot(){return window.currentBot}},watch:{companyForm:{handler(s){this.need_reset=!0},deep:!0}},mounted(){this.currentBot.company&&this.$nextTick(()=>{const s=this.currentBot.company;this.companyForm.id=s.id||null,this.companyForm.law_params.selected_type=s.law_params.selected_type||null,this.companyForm.law_params.full_name=s.law_params.full_name||null,this.companyForm.law_params.inn=s.law_params.inn||null,this.companyForm.law_params.ogrnip=s.law_params.ogrnip||null,this.companyForm.law_params.name=s.law_params.name||null,this.companyForm.law_params.kpp=s.law_params.kpp||null,this.companyForm.law_params.ogrn=s.law_params.ogrn||null,this.companyForm.law_params.phisical_adress=s.law_params.phisical_adress||null,this.companyForm.law_params.passport_number=s.law_params.passport_number||null,this.companyForm.law_params.passport_date=s.law_params.passport_date||null,this.companyForm.law_params.passport_issuer=s.law_params.passport_issuer||null,this.companyForm.law_params.agreement=s.law_params.agreement||null,this.companyForm.law_params.offer_link=s.law_params.offer_link||null,this.companyForm.vat_code=s.vat_code||null})},methods:{resetForm(){this.companyForm.id=null,this.companyForm.law_params.selected_type=null,this.companyForm.law_params.full_name=null,this.companyForm.law_params.inn=null,this.companyForm.law_params.ogrnip=null,this.companyForm.law_params.name=null,this.companyForm.law_params.kpp=null,this.companyForm.law_params.ogrn=null,this.companyForm.law_params.phisical_adress=null,this.companyForm.law_params.passport_number=null,this.companyForm.law_params.passport_date=null,this.companyForm.law_params.passport_issuer=null,this.companyForm.law_params.agreement=null,this.companyForm.law_params.offer_link=null,this.companyForm.vat_code=null},submit(){let s=new FormData;Object.keys(this.companyForm).forEach(e=>{const o=this.companyForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("updateCompanyLawParams",{companyForm:s}).then(e=>{this.$notify({title:"Юридические параметры",text:"Параметры успешно обновлены",type:"success"})}).catch(e=>{this.$notify({title:"Юридические параметры",text:"Ошибка обновления параметров",type:"error"})})}}},LVe={key:0,class:"alert alert-light mb-2"},RVe={class:"form-floating mb-2"},NVe=t("label",{for:"offerLink"},"Ссылка на договор оферты",-1),qVe={class:"form-floating mb-2"},WVe=t("option",{value:null,selected:""},"Выберите тип",-1),YVe=["value"],HVe=t("label",{for:"orgType"},"Тип организации",-1),QVe={key:1,id:"ipFields",class:"org-fields"},GVe={class:"form-floating mb-2"},KVe=t("label",{for:"ipFullName"},"ФИО ИП",-1),JVe={class:"form-floating mb-2"},XVe=t("label",{for:"ipInn"},"ИНН",-1),ZVe={class:"form-floating mb-2"},eMe=t("label",{for:"ipOgrnip"},"ОГРНИП",-1),tMe={key:2,id:"oooFields",class:"org-fields"},sMe={class:"form-floating mb-2"},oMe=t("label",{for:"oooName"},"Наименование ООО",-1),iMe={class:"form-floating mb-2"},nMe=t("label",{for:"oooName"},"Юридический адрес",-1),lMe={class:"form-floating mb-2"},aMe=t("label",{for:"oooInn"},"ИНН",-1),rMe={class:"form-floating mb-2"},dMe=t("label",{for:"oooKpp"},"КПП",-1),cMe={class:"form-floating mb-2"},uMe=t("label",{for:"oooOgrn"},"ОГРН",-1),mMe={key:3,id:"selfFields",class:"org-fields"},hMe={class:"form-floating mb-2"},pMe=t("label",{for:"selfFullName"},"ФИО",-1),_Me={class:"form-floating mb-2"},fMe=t("label",{for:"selfInn"},"ИНН",-1),bMe={class:"form-floating mb-2"},gMe=t("label",{for:"selfPassportNumber"},"Серия и номер паспорта",-1),yMe={class:"form-floating mb-2"},vMe=t("label",{for:"selfPassportDate"},"Дата выдачи паспорта",-1),$Me={class:"form-floating mb-2"},kMe=t("label",{for:"selfPassportIssuer"},"Кем выдан",-1),wMe={class:"form-check mb-2"},FMe=t("label",{class:"form-check-label",for:"agreementCheck"},[_(" Я согласен с "),t("a",{target:"_blank",href:"https://telegra.ph/PUBLICHNAYA-OFERTA-na-ispolzovanie-platformy-CashMan-05-24"},"условиями")],-1),CMe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1);function PMe(s,e,o,n,i,r){const d=ie("mask");return l(),a("form",{onSubmit:e[16]||(e[16]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[i.companyForm.law_params.offer_link?u("",!0):(l(),a("p",LVe," Внимание! Обязательно разместите ссылку на договор оферты! ")),t("div",RVe,[f(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>i.companyForm.law_params.offer_link=c),type:"url",class:"form-control",required:"",id:"offerLink",placeholder:"https://example.com/offer"},null,512),[[k,i.companyForm.law_params.offer_link]]),NVe]),t("div",qVe,[f(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=c=>i.companyForm.law_params.selected_type=c),id:"orgType",required:""},[WVe,(l(!0),a(v,null,O(i.business_form_categories,c=>(l(),a("option",{value:c.id},p(c.title||"-"),9,YVe))),256))],512),[[Ve,i.companyForm.law_params.selected_type]]),HVe]),i.companyForm.law_params.selected_type===2?(l(),a("div",QVe,[t("div",GVe,[f(t("input",{type:"text",class:"form-control",id:"ipFullName",placeholder:"Иванов Иван Иванович","onUpdate:modelValue":e[2]||(e[2]=c=>i.companyForm.law_params.full_name=c)},null,512),[[k,i.companyForm.law_params.full_name]]),KVe]),t("div",JVe,[f(t("input",{type:"text",class:"form-control",id:"ipInn",placeholder:"123456789012",maxlength:"12","onUpdate:modelValue":e[3]||(e[3]=c=>i.companyForm.law_params.inn=c)},null,512),[[d,["############"]],[k,i.companyForm.law_params.inn]]),XVe]),t("div",ZVe,[f(t("input",{type:"text",class:"form-control",id:"ipOgrnip",placeholder:"123456789012345",maxlength:"15","onUpdate:modelValue":e[4]||(e[4]=c=>i.companyForm.law_params.ogrnip=c)},null,512),[[d,["###############"]],[k,i.companyForm.law_params.ogrnip]]),eMe])])):u("",!0),i.companyForm.law_params.selected_type===3?(l(),a("div",tMe,[t("div",sMe,[f(t("input",{type:"text",class:"form-control",id:"oooName",placeholder:"ООО Ромашка","onUpdate:modelValue":e[5]||(e[5]=c=>i.companyForm.law_params.name=c)},null,512),[[k,i.companyForm.law_params.name]]),oMe]),t("div",iMe,[f(t("input",{type:"text",class:"form-control",id:"oooName",placeholder:"23055, г. Краснодар, ул. Красная, д. 1, офис 234","onUpdate:modelValue":e[6]||(e[6]=c=>i.companyForm.law_params.phisical_adress=c)},null,512),[[k,i.companyForm.law_params.phisical_adress]]),nMe]),t("div",lMe,[f(t("input",{type:"text",class:"form-control",id:"oooInn",placeholder:"1234567890",maxlength:"10","onUpdate:modelValue":e[7]||(e[7]=c=>i.companyForm.law_params.inn=c),required:""},null,512),[[d,["##########"]],[k,i.companyForm.law_params.inn]]),aMe]),t("div",rMe,[f(t("input",{type:"text",class:"form-control",id:"oooKpp",placeholder:"123456789",maxlength:"9","onUpdate:modelValue":e[8]||(e[8]=c=>i.companyForm.law_params.kpp=c),required:""},null,512),[[d,["#########"]],[k,i.companyForm.law_params.kpp]]),dMe]),t("div",cMe,[f(t("input",{type:"text",class:"form-control",id:"oooOgrn",placeholder:"1234567890123",maxlength:"13","onUpdate:modelValue":e[9]||(e[9]=c=>i.companyForm.law_params.ogrn=c),required:""},null,512),[[d,["#############"]],[k,i.companyForm.law_params.ogrn]]),uMe])])):u("",!0),i.companyForm.law_params.selected_type===1||i.companyForm.law_params.selected_type===0?(l(),a("div",mMe,[t("div",hMe,[f(t("input",{type:"text",class:"form-control",id:"selfFullName",placeholder:"Иванов Иван Иванович","onUpdate:modelValue":e[10]||(e[10]=c=>i.companyForm.law_params.full_name=c)},null,512),[[k,i.companyForm.law_params.full_name]]),pMe]),t("div",_Me,[f(t("input",{type:"text",class:"form-control",id:"selfInn",placeholder:"123456789012",maxlength:"12","onUpdate:modelValue":e[11]||(e[11]=c=>i.companyForm.law_params.inn=c)},null,512),[[d,["############"]],[k,i.companyForm.law_params.inn]]),fMe]),t("div",bMe,[f(t("input",{type:"text",class:"form-control",id:"selfPassportNumber",placeholder:"1234 567890",maxlength:"10","onUpdate:modelValue":e[12]||(e[12]=c=>i.companyForm.law_params.passport_number=c)},null,512),[[d,["#### ######"]],[k,i.companyForm.law_params.passport_number]]),gMe]),t("div",yMe,[f(t("input",{type:"date",class:"form-control",id:"selfPassportDate","onUpdate:modelValue":e[13]||(e[13]=c=>i.companyForm.law_params.passport_date=c)},null,512),[[k,i.companyForm.law_params.passport_date]]),vMe]),t("div",$Me,[f(t("input",{type:"text",class:"form-control",id:"selfPassportIssuer",placeholder:"Отделением УФМС России","onUpdate:modelValue":e[14]||(e[14]=c=>i.companyForm.law_params.passport_issuer=c)},null,512),[[k,i.companyForm.law_params.passport_issuer]]),kMe])])):u("",!0),t("div",wMe,[f(t("input",{class:"form-check-input",type:"checkbox",id:"agreementCheck","onUpdate:modelValue":e[15]||(e[15]=c=>i.companyForm.law_params.agreement=c)},null,512),[[z,i.companyForm.law_params.agreement]]),FMe]),CMe],32)}const SMe=oe(BVe,[["render",PMe]]);const xMe={props:["modelValue"],data(){return{loaded_params:!1,form:null}},watch:{form:{handler:function(s){this.$emit("update:modelValue",this.form)},deep:!0}},mounted(){this.loaded_params=!1,this.$nextTick(()=>{this.form=this.modelValue,this.modelValue.init_certificate||(this.form.init_certificate={title:"Подарочный сертификат",description:"500 рублей на CashBack",amount:500,type:"cashback",is_active:!1}),this.loaded_params=!0})}},rs=s=>(Ge("data-v-838cadd5"),s=s(),Ke(),s),jMe={key:0,class:"d-flex flex-column justify-content-center align-items-center pb-5"},OMe={class:"p-1 w-100"},TMe={class:"form-floating mb-2"},UMe=rs(()=>t("label",{htmlFor:"title"},"Название сертификата",-1)),IMe={class:"form-floating mb-2"},VMe=rs(()=>t("label",{htmlFor:"title"},"Описание приза",-1)),MMe={key:0,class:"form-floating mb-2"},AMe={htmlFor:"amount"},EMe={key:0},DMe={key:1},zMe={key:2},BMe={class:"mb-2 form-floating"},LMe=rs(()=>t("option",{value:"cashback"},"CashBack",-1)),RMe=rs(()=>t("option",{value:"discount"},"Скидка",-1)),NMe=rs(()=>t("option",{value:"gift"},"Подарок",-1)),qMe=[LMe,RMe,NMe],WMe=rs(()=>t("label",{htmlFor:"type",class:"form-label"},"Тип сертификата",-1)),YMe={class:"form-check form-switch mb-2"},HMe=rs(()=>t("label",{class:"form-check-label",htmlFor:"isActive"},"Активен",-1)),QMe={class:"image-with-labels"},GMe=rs(()=>t("img",{src:"/images/certificate_1.png",alt:"Certificate Background",class:"bg-image"},null,-1)),KMe={class:"text-data"},JMe={class:"title mb-0"},XMe={class:"description mb-0"},ZMe=rs(()=>t("p",{class:"data"},"25.05.2025",-1)),eAe=rs(()=>t("p",{class:"qr"}," Место под QR-код ",-1));function tAe(s,e,o,n,i,r){return i.loaded_params?(l(),a("div",jMe,[t("form",OMe,[t("div",TMe,[f(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[0]||(e[0]=d=>i.form.init_certificate.title=d),placeholder:"Подарочный сертификат",required:""},null,512),[[k,i.form.init_certificate.title]]),UMe]),t("div",IMe,[f(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=d=>i.form.init_certificate.description=d),placeholder:"Подарочный сертификат",required:""},null,512),[[k,i.form.init_certificate.description]]),VMe]),i.form.init_certificate.type==="cashback"||i.form.init_certificate.type==="discount"?(l(),a("div",MMe,[f(t("input",{type:"number",class:"form-control",id:"amount","onUpdate:modelValue":e[2]||(e[2]=d=>i.form.init_certificate.amount=d),placeholder:"500"},null,512),[[k,i.form.init_certificate.amount]]),t("label",AMe,[i.form.init_certificate.type==="cashback"?(l(),a("span",EMe,"Сумма кэшбэка, руб")):u("",!0),i.form.init_certificate.type==="discount"?(l(),a("span",DMe,"Процент скидки, %")):u("",!0),i.form.init_certificate.type==="gift"?(l(),a("span",zMe,"Идентификатор подарка")):u("",!0)])])):u("",!0),t("div",BMe,[f(t("select",{class:"form-select",id:"type","onUpdate:modelValue":e[3]||(e[3]=d=>i.form.init_certificate.type=d),required:""},qMe,512),[[Ve,i.form.init_certificate.type]]),WMe]),t("div",YMe,[f(t("input",{class:"form-check-input",type:"checkbox",id:"isActive",required:"","onUpdate:modelValue":e[4]||(e[4]=d=>i.form.init_certificate.is_active=d)},null,512),[[z,i.form.init_certificate.is_active]]),HMe])]),t("div",QMe,[GMe,t("div",KMe,[t("p",JMe,p(i.form.init_certificate.title||"Заголовок"),1),t("p",XMe,p(i.form.init_certificate.description||"Описание"),1),ZMe,eAe])])])):u("",!0)}const sAe=oe(xMe,[["render",tAe],["__scopeId","data-v-838cadd5"]]);const oAe={name:"TableTypeSelector",data(){return{selectedTypes:[],tableTypes:[{id:"all",label:"Все"},{id:2,label:"2 места"},{id:3,label:"3 места"},{id:4,label:"4 места"},{id:5,label:"5 мест"},{id:6,label:"6 мест"},{id:8,label:"8 мест"},{id:10,label:"10 мест"}]}},methods:{selectType(s){if(s==="all"){this.selectedTypes=[],this.$emit("selection",this.selectedTypes);return}let e=this.selectedTypes.findIndex(o=>o===s);e!==-1?this.selectedTypes.splice(e,1):this.selectedTypes.push(s),this.$emit("selection",this.selectedTypes)}}},iAe={class:"table-type-selector"},nAe={class:"scroll-container"},lAe=["onClick"];function aAe(s,e,o,n,i,r){return l(),a("div",iAe,[t("div",nAe,[(l(!0),a(v,null,O(i.tableTypes,d=>(l(),a("button",{key:d.id,type:"button",class:C(["btn",{"btn-primary":i.selectedTypes.indexOf(d.id)!==-1,"btn-light":i.selectedTypes.indexOf(d.id)===-1}]),onClick:c=>r.selectType(d.id)},p(d.label),11,lAe))),128))])])}const rAe=oe(oAe,[["render",aAe],["__scopeId","data-v-39720295"]]);const dAe={name:"SelectedTablesList",props:{sortedSelectedTables:{type:Array,required:!0}},methods:{removeItem(s){this.$emit("remove",s)}}},cAe=s=>(Ge("data-v-f4d4be27"),s=s(),Ke(),s),uAe={key:0,class:"selected-tables-list mt-2"},mAe={class:"fw-bold"},hAe={class:"scroll-container"},pAe=["onClick"],_Ae=cAe(()=>t("i",{class:"fa-solid fa-xmark"},null,-1)),fAe=[_Ae];function bAe(s,e,o,n,i,r){return o.sortedSelectedTables.length>0?(l(),a("div",uAe,[t("h6",mAe,"Выбранные столики - "+p(o.sortedSelectedTables.length)+" шт.",1),t("div",hAe,[(l(!0),a(v,null,O(o.sortedSelectedTables,(d,c)=>(l(),a("div",{class:"badge",key:c},[_(p(d.description)+" ("+p(d.seats)+" места) ",1),t("span",{onClick:h=>r.removeItem(d.id)},fAe,8,pAe)]))),128))])])):u("",!0)}const gAe=oe(dAe,[["render",bAe],["__scopeId","data-v-f4d4be27"]]);const ho=s=>(Ge("data-v-e77e24f2"),s=s(),Ke(),s),yAe={key:0,class:"hall-constructor"},vAe={class:"form-check form-switch mb-2"},$Ae={class:"form-check-label",for:"script-settings-need_table_list"},kAe=ho(()=>t("p",{class:"alert alert-light mb-2"}," Укажите максимальное число столиков в заведении ",-1)),wAe={class:"form-floating mb-2"},FAe=ho(()=>t("label",{for:"modelValue-table-number"},"Число столиков",-1)),CAe=["href"],PAe=ho(()=>t("i",{class:"fa-solid fa-qrcode"},null,-1)),SAe=ho(()=>t("div",{class:"divider my-3"},"Настройка бронирования",-1)),xAe={class:"form-check form-switch mb-2"},jAe={class:"form-check-label",for:"script-settings-need_bonuses_section"},OAe=ho(()=>t("h6",{class:"fw-bold"},"Выберите тип столика",-1)),TAe=ho(()=>t("h6",{class:"fw-bold"},"Выберите столик",-1)),UAe={key:0,class:"row"},IAe={class:"border border-light p-2"},VAe={alt:"table",class:"table-img"},MAe=["onClick"],AAe=["onClick"],EAe={class:"fw-bold p-0"},DAe={key:1,class:"alert alert-light"},zAe={key:0,class:"p-2"},BAe=ho(()=>t("h6",{class:"fw-bold"},"Выбранные столики",-1)),LAe={class:"col-4"},RAe={alt:"table",class:"table-img-small"},NAe={class:"col-8"},qAe={class:"d-flex"},WAe=["onClick"],YAe=["onClick"],HAe={key:0,class:"col-12"},QAe={class:"form-floating mb-2"},GAe=["onUpdate:modelValue","id"],KAe=["for"],JAe={class:"form-floating mb-2"},XAe=["onUpdate:modelValue","id"],ZAe=["for"],eEe={class:"form-floating"},tEe=["onUpdate:modelValue","id"],sEe=["for"],oEe={key:1,class:"alert alert-light"},iEe={name:"HallConstructor",props:["modelValue"],data(){return{loaded_params:!1,tab:"configurator",form:null,tableFilters:[],tablesTemplate:[{id:1,image:"1.png",description:"Угловой стол на 4 места",seats:4},{id:2,image:"2.png",description:"Угловой стол на 4 места",seats:4},{id:3,image:"3.png",description:"Круглый стол на 8 мест",seats:8},{id:4,image:"4.png",description:"Овальный стол на 6 мест",seats:6},{id:5,image:"5.png",description:"Овальный стол на 8 мест",seats:8},{id:6,image:"6.png",description:"Овальный стол с диваном на 8 мест",seats:8},{id:7,image:"7.png",description:"Прямоугольный стол с диваном на 8 мест",seats:8},{id:8,image:"8.png",description:"Овальный стол с диваном на 6 мест",seats:6},{id:9,image:"9.png",description:"Прямоугольный стол с диваном на 6 мест",seats:6},{id:10,image:"10.png",description:"Овальный стол с диваном на 4 места",seats:4},{id:11,image:"11.png",description:"Прямоугольный стол с диваном на 4 мест",seats:4},{id:12,image:"12.png",description:"Прямоугольный стол на 4 места",seats:4},{id:13,image:"13.png",description:"Прямоугольный стол на 6 мест",seats:6},{id:14,image:"14.png",description:"Круглый стол на 6 мест",seats:6},{id:15,image:"15.png",description:"Круглый стол на 5 мест",seats:5},{id:16,image:"16.png",description:"Круглый стол на 2 места",seats:2},{id:17,image:"17.png",description:"Круглый стол на 4 места",seats:4},{id:18,image:"18.png",description:"Квадратный стол на 2 места",seats:2},{id:19,image:"19.png",description:"Квадратный стол на 4 места",seats:4}]}},watch:{form:{handler:function(s){this.$emit("update:modelValue",this.form)},deep:!0}},mounted(){this.loaded_params=!1,this.$nextTick(()=>{this.form=this.modelValue,this.modelValue.tables_variants||(this.form.tables_variants=[]),this.loaded_params=!0})},computed:{scriptId(){return window.currentScript||null},bot(){return window.currentBot||null},filteredTables(){return this.tableFilters.length===0?(this.tablesTemplate||[]).slice().sort((s,e)=>s.seats-e.seats):this.tablesTemplate.filter(s=>this.tableFilters.includes(s.seats)).sort((s,e)=>s.seats-e.seats)},sortedSelectedTables(){return this.form.tables_variants?this.form.tables_variants.sort((s,e)=>s.seats-e.seats):[]}},methods:{countTableInSelection(s){return(this.form.tables_variants.filter(e=>e.id===s)||[]).length},removeFromSelectedTableList(s){console.log("removeFromSelectedTableList",s,this.form.tables_variants);let e=this.form.tables_variants.findIndex(o=>o.id===s);e!==-1&&this.form.tables_variants.splice(e,1)},changeTableFilter(s){this.tableFilters=s},selectTable(s){s.edit=!1,s.number=s.id,this.form.tables_variants.push({...s}),this.$notify({title:"Информация о столиках",text:"Столик добавлен в общий список!",type:"success"})}}},nEe=Object.assign(iEe,{setup(s){return(e,o)=>{const n=ie("lazy");return e.loaded_params?(l(),a("div",yAe,[t("div",vAe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=i=>e.form.need_table_list=i),role:"switch",id:"script-settings-need_table_list"},null,512),[[z,e.form.need_table_list]]),t("label",$Ae,[_("Столики в заведении: "),t("span",{class:C({"text-primary fw-bold":e.form.need_table_list})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.need_table_list})},"выкл",2)])]),e.form.need_table_list?(l(),a(v,{key:0},[kAe,t("div",wAe,[f(t("input",{type:"number",min:"0",max:"200","onUpdate:modelValue":o[1]||(o[1]=i=>e.form.max_tables=i),class:"form-control",id:"modelValue-table-number",placeholder:"Номер столика"},null,512),[[k,e.form.max_tables]]),FAe]),t("a",{href:"/bot-client/"+e.bot.bot_domain+"/tables-qr?count="+e.form.max_tables+"&script-id="+e.scriptId,target:"_blank",class:"btn btn-info w-100 p-3 mb-2"},[PAe,_(" Скачать QR-коды для столиков")],8,CAe)],64)):u("",!0),SAe,t("div",xAe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=i=>e.form.can_use_booking=i),role:"switch",id:"script-settings-need_bonuses_section"},null,512),[[z,e.form.can_use_booking]]),t("label",jAe,[_("Разрешить бронирование столиков: "),t("span",{class:C({"text-primary fw-bold":e.form.can_use_booking})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.can_use_booking})},"выкл",2)])]),e.tab==="table-selector"?(l(),a(v,{key:1},[t("button",{type:"button",class:"btn btn-primary mb-2",onClick:o[3]||(o[3]=i=>e.tab="configurator")},"Закрыть "),OAe,T(rAe,{onSelection:e.changeTableFilter},null,8,["onSelection"]),T(gAe,{onRemove:e.removeFromSelectedTableList,"sorted-selected-tables":e.form.tables_variants},null,8,["onRemove","sorted-selected-tables"]),TAe,e.filteredTables.length>0?(l(),a("div",UAe,[(l(!0),a(v,null,O(e.filteredTables,i=>(l(),a("div",{key:i.id,class:"col-6 p-2"},[t("div",IAe,[f(t("img",VAe,null,512),[[n,"/images/tables/"+i.image]]),t("p",null,"Столик №"+p(i.id),1),t("p",null,p(i.description),1),e.countTableInSelection(i.id)===0?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:r=>e.selectTable(i),class:"text-center p-0 m-0 w-100 btn btn-primary"},"Выбрать",8,MAe)):(l(),a("a",{key:1,href:"javascript:void(0)",onClick:r=>e.selectTable(i),class:"text-center p-0 m-0 w-100 btn btn-primary"},[t("strong",EAe,p(e.countTableInSelection(i.id)),1),_(" ед.")],8,AAe))])]))),128))])):(l(),a("div",DAe," Подходящие варианты не найдены "))],64)):u("",!0),e.tab==="configurator"?(l(),a(v,{key:2},[t("button",{type:"button",class:"btn btn-outline-primary mb-3 w-100 p-2",onClick:o[4]||(o[4]=i=>e.tab="table-selector")},"Конфигуратор столиков "),e.sortedSelectedTables.length>0?(l(),a("div",zAe,[BAe,(l(!0),a(v,null,O(e.sortedSelectedTables,(i,r)=>(l(),a("div",{key:r,class:"row mb-2 border-light border py-2"},[t("div",LAe,[f(t("img",RAe,null,512),[[n,"/images/tables/"+i.image]])]),t("div",NAe,[t("p",null,"Столик №"+p(i.number)+" — "+p(i.description),1),t("div",qAe,[t("a",{style:{"font-size":"12px","margin-right":"10px"},onClick:d=>e.removeFromSelectedTableList(i.id),href:"javascript:void(0)"},"Удалить",8,WAe),_(", "),t("a",{style:{"font-size":"12px","margin-right":"10px"},onClick:d=>i.edit=!i.edit,href:"javascript:void(0)"},"Редактировать",8,YAe)])]),i.edit?(l(),a("div",HAe,[t("div",QAe,[f(t("input",{type:"number","onUpdate:modelValue":d=>i.number=d,class:"form-control",id:"table-number"+i.id,placeholder:"Password"},null,8,GAe),[[k,i.number,void 0,{number:!0}]]),t("label",{for:"table-number"+i.id},"Номер",8,KAe)]),t("div",JAe,[f(t("input",{type:"number","onUpdate:modelValue":d=>i.seats=d,class:"form-control",id:"seats-count"+i.id,placeholder:"Password"},null,8,XAe),[[k,i.seats,void 0,{number:!0}]]),t("label",{for:"seats-count"+i.id},"Мест",8,ZAe)]),t("div",eEe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":d=>i.description=d,placeholder:"Leave a comment here",id:"seats-description"+i.id},null,8,tEe),[[k,i.description,void 0,{number:!0}]]),t("label",{for:"seats-description"+i.id},"Описание",8,sEe)])])):u("",!0)]))),128))])):(l(),a("p",oEe," Вы еще не добавили столики для бронирования "))],64)):u("",!0)])):u("",!0)}}}),lEe=oe(nEe,[["__scopeId","data-v-e77e24f2"]]),aEe={props:["modelValue"],data(){return{loaded_params:!1,form:null}},watch:{form:{handler:function(s){this.$emit("update:modelValue",this.form)},deep:!0}},mounted(){this.loaded_params=!1,this.$nextTick(()=>{this.form=this.modelValue,this.modelValue.coffee||(this.form.coffee={enabled:!0,max:7,rules:`
1. За каждую покупку кофе — 1 отметка.
2. После 7 кружек — 1 кофе бесплатно.
3. Отметки действуют 30 дней.
4. Бесплатный кофе нельзя обменять на деньги.
        `}),this.loaded_params=!0})}},rEe={class:"form-check form-switch mb-2"},dEe={class:"form-check-label",for:"script-settings-is_edit_mode"},cEe={class:"form-floating mb-2"},uEe=t("label",{for:"script-settings-disabled_text"},"Текст правил",-1),mEe={class:"form-floating mb-2"},hEe=t("label",{for:"floatingInput"},"Необходимое кол-во",-1);function pEe(s,e,o,n,i,r){var d;return(d=i.form)!=null&&d.coffee?(l(),a(v,{key:0},[t("div",rEe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=c=>i.form.coffee.enabled=c),role:"switch",id:"script-settings-is_edit_mode"},null,512),[[z,i.form.coffee.enabled]]),t("label",dEe,[_("Режим бонусного кофе: "),t("span",{class:C({"text-primary fw-bold":i.form.coffee.enabled})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!i.form.coffee.enabled})},"выкл",2)])]),t("div",cEe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[1]||(e[1]=c=>i.form.coffee.rules=c),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-disabled_text"},null,512),[[k,i.form.coffee.rules]]),uEe]),t("div",mEe,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[2]||(e[2]=c=>i.form.coffee.max=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.form.coffee.max]]),hEe])],64)):u("",!0)}const _Ee=oe(aEe,[["render",pEe]]),fEe={class:"row",style:{position:"sticky",top:"0px","z-index":"1000"}},bEe={class:"col-12"},gEe={class:"btn-group w-100 px-3 py-2",style:{"overflow-x":"auto"}},yEe=t("i",{class:"fa-solid fa-scroll mr-2"},null,-1),vEe=t("i",{class:"fa-solid fa-table mr-2"},null,-1),$Ee=t("i",{class:"fa fa-coffee mr-2"},null,-1),kEe=t("i",{class:"fa-solid fa-certificate mr-2"},null,-1),wEe=t("i",{class:"fa-solid fa-coins mr-2"},null,-1),FEe=t("i",{class:"fa-solid fa-users mr-2"},null,-1),CEe={key:0,class:"py-3"},PEe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),SEe={key:1,class:"py-3"},xEe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),jEe={key:2,class:"py-3"},OEe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),TEe={key:3,class:"py-3"},UEe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),IEe={key:4,class:"py-3"},VEe=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),MEe={props:["modelValue","defaultType"],data(){return{tab:0,form:null}},watch:{form:{handler:function(s){this.$emit("updated:modelValue",this.form)},deep:!0}},mounted(){this.$nextTick(()=>{this.form=this.modelValue,this.defaultType&&(this.tab=this.defaultType||0)})},methods:{submit(){let s=new FormData;Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("updateScriptParams",{slugForm:s}).then(e=>{this.$notify({title:"Информация о скрипте",text:"Информация о скрипте успешно обновлена!",type:"success"}),this.$emit("callback",e.data)}).catch(e=>{this.$notify({title:"Информация о скрипте",text:"Ошибка обновления информации о скрипте",type:"error"})})}}},Vd=Object.assign(MEe,{__name:"ShopScriptEditor",setup(s){return(e,o)=>(l(),a(v,null,[t("div",fEe,[t("div",bEe,[t("div",gEe,[t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===0}]),onClick:o[0]||(o[0]=n=>e.tab=0),style:{"line-height":"100%","white-space":"nowrap"},"aria-current":"page"},[yEe,_(" Магазин ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===4}]),onClick:o[1]||(o[1]=n=>e.tab=4),style:{"line-height":"100%","white-space":"nowrap"},"aria-current":"page"},[vEe,_(" Столики и бронь ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===5}]),onClick:o[2]||(o[2]=n=>e.tab=5),style:{"line-height":"100%","white-space":"nowrap"},"aria-current":"page"},[$Ee,_(" Кофе в подарок ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===3}]),onClick:o[3]||(o[3]=n=>e.tab=3),style:{"line-height":"100%","white-space":"nowrap"},"aria-current":"page"},[kEe,_(" Реферальный сертификат ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===2}]),onClick:o[4]||(o[4]=n=>e.tab=2),style:{"line-height":"100%","white-space":"nowrap"},"aria-current":"page"},[wEe,_(" Юридические данные ")],2),t("button",{type:"button",class:C(["btn-info d-block btn p-3",{active:e.tab===1}]),onClick:o[5]||(o[5]=n=>e.tab=1),style:{"line-height":"100%","white-space":"nowrap"},"aria-current":"page"},[FEe,_(" Интерактив в магазине ")],2)])])]),t("form",{onSubmit:o[11]||(o[11]=W((...n)=>e.submit&&e.submit(...n),["prevent"]))},[e.tab===0?(l(),a("div",CEe,[e.form?(l(),M(zVe,{key:0,modelValue:e.form,"onUpdate:modelValue":o[6]||(o[6]=n=>e.form=n)},null,8,["modelValue"])):u("",!0),PEe])):u("",!0),e.tab===4?(l(),a("div",SEe,[e.form?(l(),M(lEe,{key:0,modelValue:e.form,"onUpdate:modelValue":o[7]||(o[7]=n=>e.form=n)},null,8,["modelValue"])):u("",!0),xEe])):u("",!0),e.tab===5?(l(),a("div",jEe,[e.form?(l(),M(_Ee,{key:0,modelValue:e.form,"onUpdate:modelValue":o[8]||(o[8]=n=>e.form=n)},null,8,["modelValue"])):u("",!0),OEe])):u("",!0),e.tab===3?(l(),a("div",TEe,[e.form?(l(),M(sAe,{key:0,modelValue:e.form,"onUpdate:modelValue":o[9]||(o[9]=n=>e.form=n)},null,8,["modelValue"])):u("",!0),UEe])):u("",!0),e.tab===1?(l(),a("div",IEe,[e.form?(l(),M(K9e,{key:0,modelValue:e.form,"onUpdate:modelValue":o[10]||(o[10]=n=>e.form=n)},null,8,["modelValue"])):u("",!0),VEe])):u("",!0)],32),e.tab===2?(l(),M(SMe,{key:0,class:"py-3"})):u("",!0)],64))}});const AEe={key:0,class:"container py-3"},EEe={key:0,class:"alert alert-danger mb-3"},DEe=["innerHTML"],zEe=t("h6",{class:"opacity-75 mb-3 text-center"},[t("i",{class:"fa-solid fa-house-chimney mr-2 text-primary"}),_("Доступные сервисы")],-1),BEe={key:3,class:"row g-2"},LEe={class:"col-12"},REe={key:0,class:"alert alert-light",role:"alert"},NEe=t("span",{class:"text-primary fw-bold"},"не работаем",-1),qEe=t("span",{"data-bs-toggle":"modal","data-bs-target":"#schedule-list-display",class:"text-primary fw-bold text-decoration-underline cursor-pointer"},"графиком работы",-1),WEe={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},YEe={class:"col"},HEe={key:0,class:"col"},QEe={class:"col"},GEe={class:"col"},KEe={key:0,class:"badge bg-primary"},JEe={class:"col"},XEe={key:1,class:"col"},ZEe={class:"col"},eDe=t("div",{class:"divider my-3"}," Дополнительно",-1),tDe=t("i",{class:"fa fa-dot-circle"},null,-1),sDe=t("i",{class:"fa fa-people-carry"},null,-1),oDe=t("h6",{class:"opacity-75 my-3 text-center"},[t("i",{class:"fa-solid fa-house-lock mr-2 text-primary"}),_("Управление магазином")],-1),iDe={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},nDe={class:"col"},lDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},aDe={class:"img-fluid",alt:""},rDe=t("p",{class:"my-2"},"Счет на оплату",-1),dDe={class:"col"},cDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},uDe={class:"img-fluid",alt:""},mDe=t("p",{class:"my-2"},"Управление товарами",-1),hDe={key:0,class:"col"},pDe={type:"button","data-bs-toggle":"modal","data-bs-target":"#script-setting-editor",style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},_De={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},fDe={class:"img-fluid",alt:""},bDe=t("p",{class:"my-2"},"Настройка магазина",-1),gDe={class:"col"},yDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},vDe={style:{"max-width":"150px"},class:"img-fluid",alt:""},$De=t("p",{class:"my-2"},"Работа с партнерами",-1),kDe={class:"col"},wDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},FDe={class:"img-fluid",alt:""},CDe=t("p",{class:"my-2"},"Управление историями",-1),PDe={class:"col"},SDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},xDe={class:"menu-item-img img-fluid",alt:""},jDe=t("p",{class:"my-2"},"Управление столиками",-1),ODe=t("h6",{class:"opacity-75 my-3 text-center"},[t("i",{class:"fa-solid fa-house-lock mr-2 text-primary"}),_("Другие админ сервисы")],-1),TDe={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},UDe={class:"col"},IDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},VDe={style:{"max-width":"150px"},class:"img-fluid",alt:""},MDe=t("p",{class:"my-2"},"Управление клиентами",-1),ADe={class:"col"},EDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},DDe={style:{"max-width":"150px"},class:"img-fluid",alt:""},zDe=t("p",{class:"my-2"},"UTM-метки",-1),BDe={class:"col"},LDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},RDe={style:{"max-width":"150px"},class:"img-fluid",alt:""},NDe=t("p",{class:"my-2"},"Управление рассылками",-1),qDe={class:"col"},WDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},YDe={style:{"max-width":"150px"},class:"img-fluid",alt:""},HDe=t("p",{class:"my-2"},"Управление заказами",-1),QDe={class:"col"},GDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},KDe={style:{"max-width":"150px"},class:"img-fluid",alt:""},JDe=t("p",{class:"my-2"},"Управление промокодами",-1),XDe={class:"col"},ZDe={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},eze={style:{"max-width":"150px"},class:"img-fluid",alt:""},tze=t("p",{class:"my-2"},"Статистика",-1),sze={key:1,class:"menu-preloader"},oze=t("div",{class:"d-flex flex-column align-items-center"},[t("div",{class:"spinner-grow bg-primary",style:{width:"3rem",height:"3rem"},role:"status"},[t("span",{class:"visually-hidden"},"Loading...")]),t("p",{class:"py-2"},"Загружаем...")],-1),ize=[oze],nze={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},lze=t("i",{class:"fa-brands fa-telegram"},null,-1),aze={class:"modal fade",id:"script-setting-editor",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},rze={class:"modal-dialog modal-fullscreen"},dze={class:"modal-content"},cze=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),uze={class:"modal-body"},mze={data(){return{loadScriptData:!1,stories:[],script_data:{is_disabled:!0,wheel_of_fortune:{can_play:!1}}}},computed:{...G(["getSelf","cartTotalCount","getStories"]),preparedMenuItem(){if(!this.bot.settings)return[];let s=this.bot.settings.icons||[],e=[];return s.forEach(o=>{e[o.slug]=o}),e},isWork(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work:!0},tg(){return window.Telegram.WebApp},bot(){return window.currentBot}},mounted(){var s;this.tg.BackButton.show(),(s=this.bot.settings)!=null&&s.self_updated?(this.script_data=this.bot.settings,this.loadStories(),this.loadScriptData=!0):this.loadScriptModuleData().then(()=>{this.loadStories()}),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>e.click()),this.$router.back()})},methods:{doSwipeLeft(){this.$router.push({name:"ShopCartV2"})},doSwipeRight(){this.$router.push({name:"CatalogV2"})},goTo(s){this.$router.push({name:s})},switchToPage(s){this.$store.dispatch("switchToPage",{page:s}).then(()=>{this.tg.close()}).catch(()=>{this.$notify({title:"Упс...",text:"Данная функция временно недоступна...",type:"error"})})},startMenu(){this.$store.dispatch("switchToMainMenu"),this.tg.close()},loadStories(){this.$store.dispatch("loadStories").then(s=>{this.stories=this.getStories||[]})},loadScriptModuleData(){return this.loadScriptData=!1,this.$store.dispatch("loadShopModuleData").then(s=>{let e=s.data;this.script_data=[],this.$nextTick(()=>{e&&Object.keys(e).forEach(o=>{o&&(this.script_data[o]=e[o])}),this.loadScriptData=!0})})}}},Md=Object.assign(mze,{__name:"Menu",setup(s){return(e,o)=>{var r,d,c,h,g,w,x,P,I,V,B;const n=ie("lazy"),i=ie("touch");return l(),a(v,null,[e.getSelf?f((l(),a("div",AEe,[e.script_data.is_disabled?(l(),a("div",EEe,[t("p",{class:"mb-0",innerHTML:e.script_data.disabled_text||"-"},null,8,DEe)])):u("",!0),(e.stories||[]).length>0?(l(),M(Lr,{key:1,stories:e.stories||[]},null,8,["stories"])):u("",!0),e.getSelf.is_admin&&(e.stories||[]).length>0?(l(),a("a",{key:2,href:"javascript:void(0)",style:{"font-size":"10pt"},class:"text-center d-block my-2",onClick:o[0]||(o[0]=L=>e.goTo("StoryManagerV2"))},"Редактировать")):u("",!0),zEe,e.bot?(l(),a("div",BEe,[t("div",LEe,[e.isWork?u("",!0):(l(),a("div",REe,[_(" В данный момент мы "),NEe,_(". Вы можете ознакомиться с нашим "),qEe,_(". ")]))])])):u("",!0),t("div",WEe,[t("div",YEe,[(r=e.preparedMenuItem.profile)!=null&&r.is_visible?(l(),M(Js,{key:0,route:"ProfileV2","default-image":"profile.png","default-text":"Профиль",item:e.preparedMenuItem.profile||null},null,8,["default-image","item"])):u("",!0)]),(d=e.bot.settings)!=null&&d.can_use_booking?(l(),a("div",HEe,[(c=e.preparedMenuItem.booking)!=null&&c.is_visible?(l(),M(Js,{key:0,route:"TableBookingV2","default-image":"profile.png","default-text":"Бронирование столика",item:e.preparedMenuItem.booking||null},null,8,["default-image","item"])):u("",!0)])):u("",!0),t("div",QEe,[(h=e.preparedMenuItem.shop)!=null&&h.is_visible?(l(),M(Js,{key:0,disabled:e.script_data.is_disabled,route:"CatalogV2","default-image":"shop.png","default-text":"Магазин",item:e.preparedMenuItem.shop||null},null,8,["disabled","default-image","item"])):u("",!0)]),t("div",GEe,[(g=e.preparedMenuItem.basket)!=null&&g.is_visible?(l(),M(Js,{key:0,route:"ShopCartV2","default-image":"basket.png","default-text":"Корзина",item:e.preparedMenuItem.basket||null},{"post-text":A(()=>[e.cartTotalCount>0?(l(),a("span",KEe,p(e.cartTotalCount),1)):u("",!0)]),_:1},8,["default-image","item"])):u("",!0)]),t("div",JEe,[(w=e.preparedMenuItem.history)!=null&&w.is_visible?(l(),M(Js,{key:0,route:"OrdersV2","default-image":"history.png","default-text":"История заказов",item:e.preparedMenuItem.history||null},null,8,["default-image","item"])):u("",!0)]),e.script_data.wheel_of_fortune?(l(),a("div",XEe,[(x=e.preparedMenuItem.events)!=null&&x.is_visible?(l(),M(Js,{key:0,disabled:!e.script_data.wheel_of_fortune.can_play,route:"WheelOfFortuneV2","default-image":"events.png","default-text":"Розыгрыши",item:e.preparedMenuItem.events||null},null,8,["disabled","default-image","item"])):u("",!0)])):u("",!0),t("div",ZEe,[(P=e.preparedMenuItem.about)!=null&&P.is_visible?(l(),M(Js,{key:0,route:"ContactsV2","default-image":"contacts.png","default-text":"О Нас & Контакты",item:e.preparedMenuItem.about||null},null,8,["default-image","item"])):u("",!0)])]),eDe,(I=e.preparedMenuItem.wheel_of_fortune_btn)!=null&&I.is_visible?(l(),a("button",{key:4,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:o[1]||(o[1]=L=>e.switchToPage("Колесо фортуны")),class:"btn btn-outline-light text-primary w-100 p-3 rounded-3 shadow-sm mb-2"},[tDe,_(" "+p(e.preparedMenuItem.wheel_of_fortune_btn.title||"Колесо фортуны"),1)])):u("",!0),(V=e.preparedMenuItem.friends_btn)!=null&&V.is_visible?(l(),a("button",{key:5,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:o[2]||(o[2]=L=>e.switchToPage("Пригласить друзей")),class:"btn btn-outline-light text-primary mb-2 w-100 p-3 rounded-3 shadow-sm"},[sDe,_(" "+p(e.preparedMenuItem.friends_btn.title||"Пригласить друзей"),1)])):u("",!0),e.getSelf.is_admin?(l(),a(v,{key:6},[oDe,t("div",iDe,[t("div",nDe,[t("button",{type:"button",onClick:o[3]||(o[3]=L=>e.goTo("SendInvoiceV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",lDe,[f(t("img",aDe,null,512),[[n,"/images/shop-v2-2/clients.png"]]),rDe])])]),t("div",dDe,[t("button",{type:"button",onClick:o[4]||(o[4]=L=>e.goTo("ShopV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",cDe,[f(t("img",uDe,null,512),[[n,"/images/shop-v2-2/products.png"]]),mDe])])]),e.script_data?(l(),a("div",hDe,[t("button",pDe,[t("div",_De,[f(t("img",fDe,null,512),[[n,"/images/shop-v2-2/orders.png"]]),bDe])])])):u("",!0),t("div",gDe,[t("button",{type:"button",onClick:o[5]||(o[5]=L=>e.goTo("PartnersV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",yDe,[f(t("img",vDe,null,512),[[n,"/images/shop-v2-2/partners.png"]]),$De])])]),t("div",kDe,[t("button",{type:"button",onClick:o[6]||(o[6]=L=>e.goTo("StoryManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",wDe,[f(t("img",FDe,null,512),[[n,"/images/shop-v2-2/promo.png"]]),CDe])])]),t("div",PDe,[e.script_data.need_table_list?(l(),a("button",{key:0,type:"button",onClick:o[7]||(o[7]=L=>e.goTo("TablesManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",SDe,[f(t("img",xDe,null,512),[[n,"/images/shop-v2-2/clients.png"]]),jDe])])):u("",!0)])]),ODe,t("div",TDe,[t("div",UDe,[t("button",{type:"button",onClick:o[8]||(o[8]=L=>e.goTo("ClientsV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",IDe,[f(t("img",VDe,null,512),[[n,"/images/shop-v2-2/clients.png"]]),MDe])])]),t("div",ADe,[t("button",{type:"button",onClick:o[9]||(o[9]=L=>e.goTo("LinkManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",EDe,[f(t("img",DDe,null,512),[[n,"/images/shop-v2-2/utm.png"]]),zDe])])]),t("div",BDe,[t("button",{type:"button",onClick:o[10]||(o[10]=L=>e.goTo("MailingV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",LDe,[f(t("img",RDe,null,512),[[n,"/images/shop-v2-2/mail.png"]]),NDe])])]),t("div",qDe,[t("button",{type:"button",onClick:o[11]||(o[11]=L=>e.goTo("AdminOrdersV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",WDe,[f(t("img",YDe,null,512),[[n,"/images/shop-v2-2/orders.png"]]),HDe])])]),t("div",QDe,[t("button",{type:"button",onClick:o[12]||(o[12]=L=>e.goTo("PromoCodesV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",GDe,[f(t("img",KDe,null,512),[[n,"/images/shop-v2-2/promo.png"]]),JDe])])]),t("div",XDe,[t("button",{type:"button",onClick:o[13]||(o[13]=L=>e.goTo("StatisticV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",ZDe,[f(t("img",eze,null,512),[[n,"/images/shop-v2-2/statistic.png"]]),tze])])])])],64)):u("",!0)])),[[i,e.doSwipeLeft,"swipe",{left:!0}],[i,e.doSwipeRight,"swipe",{right:!0}]]):u("",!0),e.loadScriptData?u("",!0):(l(),a("div",sze,ize)),t("nav",nze,[(B=e.preparedMenuItem.main_menu_btn)!=null&&B.is_visible?(l(),a("button",{key:0,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:o[14]||(o[14]=(...L)=>e.startMenu&&e.startMenu(...L)),class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg"},[lze,_(" "+p(e.preparedMenuItem.main_menu_btn.title||"Главное меню"),1)])):u("",!0)]),t("div",aze,[t("div",rze,[t("div",dze,[cze,t("div",uze,[e.loadScriptData?(l(),M(Vd,{key:0,modelValue:e.script_data,"onUpdate:modelValue":o[15]||(o[15]=L=>e.script_data=L)},null,8,["modelValue"])):u("",!0)])])])])],64)}}}),hze=Object.freeze(Object.defineProperty({__proto__:null,default:Md},Symbol.toStringTag,{value:"Module"}));const pze={data(){return{gridSize:5,goodPrizeChance:2,cards:[],score:0,prizes:[{id:1,emoji:"🎉",description:"Большой праздник"},{id:2,emoji:"🎁",description:"Подарок"},{id:3,emoji:"🍀",description:"Удача"},{id:4,emoji:"⭐",description:"Звезда"},{id:5,emoji:"🏆",description:"Трофей"}],bonuses:[{id:1,emoji:"✨",description:"Искра"},{id:2,emoji:"💫",description:"Звездопад"},{id:3,emoji:"🔥",description:"Огонь"},{id:4,emoji:"🌟",description:"Сияние"},{id:5,emoji:"⚡",description:"Молния"}]}},created(){this.initGame()},methods:{initGame(){this.score=0,this.cards=Array.from({length:this.gridSize*this.gridSize},()=>({flipped:!1,isGoodPrize:Math.random()<this.goodPrizeChance/100,display:"",prize:null}))},revealCard(s){const e=this.cards[s];if(!e.flipped)if(e.flipped=!0,e.isGoodPrize){const o=this.prizes[Math.floor(Math.random()*this.prizes.length)];e.display=o.emoji,e.prize=o,this.score+=50}else{const o=Math.floor(Math.random()*50)+1,n=this.bonuses[Math.floor(Math.random()*this.bonuses.length)];e.display=`${n.emoji} +${o}`,e.prize={...n,points:o},this.score+=o}},resetGame(){this.initGame()}}},_ze={id:"app"},fze=t("h1",null,"Игра: Выбери карточку",-1),bze={class:"game-grid"},gze=["onClick"],yze={key:0},vze={class:"info"};function $ze(s,e,o,n,i,r){return l(),a("div",_ze,[fze,t("div",bze,[(l(!0),a(v,null,O(i.cards,(d,c)=>(l(),a("div",{key:c,class:C(["game-card",{flipped:d.flipped}]),onClick:h=>r.revealCard(c)},[d.flipped?(l(),a("span",yze,p(d.display),1)):u("",!0)],10,gze))),128))]),t("div",vze,[t("p",null,"Ваши очки: "+p(i.score),1),t("p",null,"Шанс хорошего приза: "+p(i.goodPrizeChance)+"%",1),t("button",{onClick:e[0]||(e[0]=(...d)=>r.resetGame&&r.resetGame(...d))},"Начать заново")])])}const kze=oe(pze,[["render",$ze]]),wze={class:"container g-2 py-3"},Fze=ze('<div class="card mb-2"><div class="card-body"><p class="mb-2 text-center fw-bold"><strong class="text-primary">Внимание!</strong> Правила игры: </p><ul style="padding:0px 20px;" class="fw-bold"><li>цена ставки меняется в зависимости от популярности игры (чем популярнее тем выше)</li><li>ставка берется из ваших баллов</li><li>за каждый выигрыш вы получаете игровые деньги, которые суммируются к вашему CashBack и используются для игровой ставки, но не начисляются вам как CashBack</li><li>каждый проигрыш списывает ваш реальный CashBack</li><li>одна из игровых комбинация может принести вам супер-приз - <strong>Пицца 50 см</strong></li></ul></div></div>',1),Cze={__name:"OneArmedBanditPage",setup(s){return(e,o)=>(l(),a("div",wze,[Fze,T(kze)]))}},Pze={props:["item"],methods:{open(s){s.is_open=!s.is_open}}},Sze={class:"d-flex justify-content-between w-100"},xze={key:0,class:"fa fa-circle-up text-success mr-2",style:{"font-size":"24px"}},jze={key:1,class:"fa-regular fa-circle-down text-danger mr-2",style:{"font-size":"24px"}},Oze={class:"fw-bold"},Tze={key:0,class:"text-primary fw-bold"},Uze={key:1,class:"text-primary fw-bold"},Ize={key:0,class:"w-100 mt-2"},Vze={class:"table table-borderless rounded-sm shadow-l m-0 p-0",style:{overflow:"hidden"}},Mze=t("thead",null,[t("tr",{class:"bg-gray1-dark"},[t("th",{scope:"col",class:"color-theme"},"Параметр"),t("th",{scope:"col",class:"color-theme"},"Значение")])],-1),Aze=t("th",{scope:"row"},"Тип операции",-1),Eze={class:"fw-bold text-primary"},Dze=t("th",{scope:"row"},"Сумма баллов, руб",-1),zze={class:"fw-bold text-primary"},Bze={key:0},Lze=t("th",{scope:"row"},"Уровень начисления",-1),Rze={class:"fw-bold text-primary"},Nze={key:1},qze=t("th",{scope:"row"},"Сумма в чеке, руб",-1),Wze={class:"fw-bold text-primary"},Yze=t("th",{scope:"row"},"Дата операции",-1),Hze={class:"fw-bold text-primary"},Qze=t("th",{scope:"row"},"Описание операции",-1),Gze={class:"fw-bold text-primary"},Kze=t("th",{scope:"row"},"TG id сотрудника",-1),Jze={class:"fw-bold text-primary"},Xze=t("th",{scope:"row"},"Имя сотрудника",-1),Zze={class:"fw-bold text-primary"},eBe=t("th",{scope:"row"},"Телефон сотрудника",-1),tBe={class:"fw-bold text-primary"};function sBe(s,e,o,n,i,r){return l(),a("div",{onClick:e[0]||(e[0]=d=>r.open(o.item)),class:"list-group-item d-flex flex-column"},[t("div",Sze,[t("div",null,[o.item.operation_type?(l(),a("i",xze)):(l(),a("i",jze)),t("span",Oze,p(o.item.amount||0)+" руб. ",1)]),o.item.operation_type?(l(),a("span",Tze,"чек "+p(o.item.money_in_check||0)+" руб.",1)):(l(),a("span",Uze,"списание"))]),o.item.is_open?(l(),a("div",Ize,[t("table",Vze,[Mze,t("tbody",null,[t("tr",null,[Aze,t("td",Eze,p(o.item.operation_type?"Начисление":"Списание"),1)]),t("tr",null,[Dze,t("td",zze,p(o.item.amount||0),1)]),o.item.operation_type?(l(),a("tr",Bze,[Lze,t("td",Rze,p(o.item.level||0),1)])):u("",!0),o.item.operation_type?(l(),a("tr",Nze,[qze,t("td",Wze,p(o.item.money_in_check||0),1)])):u("",!0),t("tr",null,[Yze,t("td",Hze,p(s.$filters.current(o.item.created_at)),1)]),t("tr",null,[Qze,t("td",Gze,p(o.item.description||"Нет описания"),1)]),t("tr",null,[Kze,t("td",Jze,p(o.item.employee.telegram_chat_id||"Не указано"),1)]),t("tr",null,[Xze,t("td",Zze,p(o.item.employee.fio_from_telegram||"Не указано"),1)]),t("tr",null,[eBe,t("td",tBe,p(o.item.employee.phone||"Не указано"),1)])])])])):u("",!0)])}const oBe=oe(Pze,[["render",sBe]]),iBe={key:0,class:"list-group"},nBe={key:1,class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},lBe=t("div",{class:"d-flex justify-content-center flex-column align-items-center"},[t("i",{class:"fa-brands fa-bitcoin mb-3",style:{"font-size":"36px"}}),t("p",null,"Операция с CashBack-ом еще нет:(")],-1),aBe=[lBe],rBe={props:["botUser"],data(){return{cashback:[],cashback_paginate_object:null}},watch:{self:{handler:function(s){this.loadCashBack()},deep:!0}},computed:{...G(["getCashBack","getCashBackPaginateObject"])},mounted(){this.loadCashBack()},methods:{nextCashBackPage(s){this.loadCashBack(s)},loadCashBack(s=0){this.$store.dispatch("loadCashBack",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id},page:s}).then(e=>{this.cashback=this.getCashBack,this.cashback_paginate_object=this.getCashBackPaginateObject}).catch(()=>{this.loading=!1})}}},Ad=Object.assign(rBe,{__name:"CashBackList",setup(s){return(e,o)=>(l(),a(v,null,[e.cashback.length>0?(l(),a("ul",iBe,[(l(!0),a(v,null,O(e.cashback,n=>(l(),M(oBe,{item:n},null,8,["item"]))),256))])):(l(),a("div",nBe,aBe)),e.cashback_paginate_object?(l(),M(Ce,{key:2,onPagination_page:e.nextCashBackPage,pagination:e.cashback_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64))}}),dBe={key:0,class:"container"},cBe={class:"row"},uBe={class:"col-12"},mBe=t("h6",{class:"opacity-75 my-3"},"Ваш текущий баланс",-1),hBe={class:"list-group"},pBe={class:"list-group-item d-flex justify-content-between p-3","aria-current":"true"},_Be=t("span",null,"Получено CashBack",-1),fBe={class:"text-primary fw-bold"},bBe={class:"col-12"},gBe={key:0,class:"opacity-75 my-3"},yBe={key:1,class:"list-group"},vBe={class:"list-group-item d-flex justify-content-between p-3","aria-current":"true"},$Be={class:"text-primary fw-bold"},kBe={class:"row"},wBe=t("div",{class:"col-12"},[t("h5",{class:"my-3"},[t("i",{class:"fa-solid fa-list-check mr-1 text-primary"}),_(" История операция")])],-1),FBe={class:"col-12"},CBe={data(){return{cashback:[],cashback_paginate_object:null}},watch:{self:{handler:function(s){this.loadCashBack()},deep:!0}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),self(){return this.getSelf},tg(){return window.Telegram.WebApp}},mounted(){this.self&&this.loadCashBack(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{nextCashBackPage(s){this.loadCashBack(s)},loadCashBack(s=0){this.$store.dispatch("loadCashBack",{dataObject:{user_telegram_chat_id:this.self.telegram_chat_id},page:s}).then(e=>{this.cashback=this.getCashBack,this.cashback_paginate_object=this.getCashBackPaginateObject}).catch(()=>{this.loading=!1})}}},Ed=Object.assign(CBe,{__name:"MyCashBack",setup(s){return(e,o)=>e.self?(l(),a("div",dBe,[t("div",cBe,[t("div",uBe,[mBe,t("ul",hBe,[t("li",pBe,[_Be,t("span",fBe,p(e.self.cashBack.amount||0)+" ₽",1)])])]),t("div",bBe,[e.self.cashBack?(l(),a(v,{key:0},[(e.self.cashBack.subs||[]).length>0?(l(),a("h6",gBe,"Специальные начисления")):u("",!0),(e.self.cashBack.subs||[]).length>0?(l(),a("ul",yBe,[(l(!0),a(v,null,O(e.self.cashBack.subs,n=>(l(),a("li",vBe,[t("span",null,p(n.title||"-"),1),t("span",$Be,p(n.amount||0)+" ₽",1)]))),256))])):u("",!0)],64)):u("",!0)])]),t("div",kBe,[wBe,t("div",FBe,[e.getSelf?(l(),M(Ad,{key:0,"bot-user":e.getSelf},null,8,["bot-user"])):u("",!0)])])])):u("",!0)}}),PBe=Object.freeze(Object.defineProperty({__proto__:null,default:Ed},Symbol.toStringTag,{value:"Module"})),SBe={class:"container"},xBe={key:0,class:"row"},jBe=t("div",{class:"col-12"},[t("h5",{class:"my-3"},[t("i",{class:"fa-solid fa-handshake mr-1 text-primary"}),_(" Вас пригласили")])],-1),OBe={class:"col-12"},TBe={class:"alert alert-light d-flex justify-content-between"},UBe={class:"mb-0"},IBe=["href"],VBe={class:"row"},MBe=t("div",{class:"col-12"},[t("h5",{class:"mb-3"},[t("i",{class:"fa-solid fa-list-check mr-1 text-primary"}),_(" Приглашенные вами люди")])],-1),ABe={class:"col-12"},EBe={key:0,class:"list-group"},DBe={class:"list-group-item d-flex flex-column"},zBe={class:"d-flex justify-content-between w-100"},BBe=t("i",{class:"fa-regular fa-face-smile mr-2 text-success"},null,-1),LBe={class:"fw-bold"},RBe=["href"],NBe={class:"text-primary fw-bold"},qBe={key:1,class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},WBe=t("div",{class:"d-flex justify-content-center flex-column align-items-center"},[t("i",{class:"fa-solid fa-handshake mb-3",style:{"font-size":"36px"}}),t("p",null,"Вы никого не пригласили:(")],-1),YBe=[WBe],HBe={data(){return{friends:[],friends_paginate_object:null}},computed:{...G(["getSelf","getFriends","getFriendsPaginateObject"]),self(){return this.getSelf},tg(){return window.Telegram.WebApp}},mounted(){this.loadFriends(0),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{nextFriendsPage(s){this.loadFriends(s)},loadFriends(s=0){this.$store.dispatch("loadFriends",{page:s}).then(e=>{this.friends=this.getFriends,this.friends_paginate_object=this.getFriendsPaginateObject}).catch(()=>{this.loading=!1})}}},Dd=Object.assign(HBe,{__name:"MyFriends",setup(s){return(e,o)=>{var n;return l(),a("div",SBe,[((n=e.getSelf)==null?void 0:n.parent_friend)!=null?(l(),a("div",xBe,[jBe,t("div",OBe,[t("div",TBe,[t("p",UBe,p(e.getSelf.parent_friend.username),1),e.getSelf.parent_friend.username?(l(),a("a",{key:0,href:"https://t.me/"+e.getSelf.parent_friend.username,target:"_blank"},"@"+p(e.getSelf.parent_friend.username||"-"),9,IBe)):u("",!0)])])])):u("",!0),t("div",VBe,[MBe,t("div",ABe,[t("p",null,"У вас "+p(e.getSelf.friends_count)+" друзей",1),e.friends.length>0?(l(),a("ul",EBe,[(l(!0),a(v,null,O(e.friends,(i,r)=>(l(),a("li",DBe,[t("div",zBe,[t("div",null,[BBe,t("span",LBe,[i.username?(l(),a("a",{key:0,href:"https://t.me/"+i.username,target:"_blank"},"@"+p(i.username||"-"),9,RBe)):u("",!0)])]),t("span",NBe,p(i.fio_from_telegram||"-"),1)])]))),256))])):(l(),a("div",qBe,YBe)),e.friends_paginate_object?(l(),M(Ce,{key:2,onPagination_page:e.nextFriendsPage,pagination:e.friends_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])])])}}}),QBe=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),GBe={key:0,class:"container py-3"},KBe={class:"row"},JBe={key:0,class:"col-12"},XBe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#shop-wheel-form-modal",class:"btn btn-outline-light text-primary w-100 mb-2",style:{"font-size":"12px"}},[t("i",{class:"fa-regular fa-pen-to-square"}),_(" Редактор скрипта ")],-1),ZBe=[XBe],eLe={key:1,class:"col-12"},tLe={class:"alert alert-light mb-2"},sLe={class:"col-12"},oLe={key:1,class:"container py-3"},iLe=t("div",{class:"row"},[t("div",{class:"col-12"},[t("div",{class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},[_(" Подготавливаем данные... "),t("div",{class:"spinner-border text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])])],-1),nLe=[iLe],lLe={key:2,class:"modal fade",id:"shop-wheel-form-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},aLe={class:"modal-dialog modal-fullscreen"},rLe={class:"modal-content"},dLe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),cLe={class:"modal-body"},uLe={data(){return{loadScriptData:!1,script_data:null,action:null}},computed:{...G(["getSelf"]),canPlay(){return this.action?this.action.completed_at==null&&this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.loadScriptModuleData().then(()=>{this.prepareUserData()})},methods:{loadScriptModuleData(){return this.loadScriptData=!1,this.$store.dispatch("loadShopModuleData").then(s=>{this.script_data=[];const e=s.data;console.log("Resp data",e),this.$nextTick(()=>{e&&Object.keys(e).forEach(o=>{o&&(this.script_data[o]=e[o])}),this.loadScriptData=!0})})},winHandler(s){this.$store.dispatch("wheelOfFortuneV3Win",{winForm:(s==null?void 0:s.win)||null}).then(e=>{this.prepareUserData()}).catch(e=>{})},shuffle(s){let e=s.length,o;for(;e>0;)o=Math.floor(Math.random()*e),e--,[s[e],s[o]]=[s[o],s[e]];return s},prepareUserData(){return this.$store.dispatch("wheelOfFortuneV3Prepare").then(s=>{this.action=s.action})}}},zd=Object.assign(uLe,{__name:"WheelOfFortune",setup(s){return(e,o)=>{var n;return l(),a(v,null,[e.loadScriptData&&e.action?(l(),a("div",GBe,[t("div",KBe,[(e.getSelf||{is_admin:!1}).is_admin?(l(),a("div",JBe,ZBe)):u("",!0),(e.script_data.wheel_of_fortune||{rules:null}).rules?(l(),a("div",eLe,[t("div",tLe,p((e.script_data.wheel_of_fortune||{rules:null}).rules||"Правила игры"),1)])):u("",!0),t("div",sLe,[(((n=e.script_data.wheel_of_fortune)==null?void 0:n.items)||[]).length>=3?(l(),M(Ud,{key:0,"can-play":e.canPlay,"is-admin":!1,interval:e.script_data.interval||1,"action-data":e.action,onWin:e.winHandler,modelValue:e.script_data.wheel_of_fortune.items,"onUpdate:modelValue":o[0]||(o[0]=i=>e.script_data.wheel_of_fortune.items=i)},null,8,["can-play","interval","action-data","onWin","modelValue"])):u("",!0)])])])):(l(),a("div",oLe,nLe)),(e.getSelf||{is_admin:!1}).is_admin?(l(),a("div",lLe,[t("div",aLe,[t("div",rLe,[dLe,t("div",cLe,[e.script_data?(l(),M(Vd,{key:0,"default-type":1,modelValue:e.script_data,"onUpdate:modelValue":o[1]||(o[1]=i=>e.script_data=i)},null,8,["modelValue"])):u("",!0)])])])])):u("",!0)],64)}}}),mLe=Object.freeze(Object.defineProperty({__proto__:null,default:zd},Symbol.toStringTag,{value:"Module"}));const Ps=s=>(Ge("data-v-f0be18d5"),s=s(),Ke(),s),hLe=Ps(()=>t("h2",{class:"mb-2"},"Истории",-1)),pLe={class:"modal fade",id:"storyModal",tabindex:"-1","aria-labelledby":"storyModalLabel","aria-hidden":"true"},_Le={class:"modal-dialog modal-dialog-centered modal-fullscreen"},fLe={class:"modal-header"},bLe={class:"modal-title",id:"storyModalLabel"},gLe={class:"modal-body"},yLe={class:"form-floating mb-2"},vLe=Ps(()=>t("label",{for:"title"},"Заголовок",-1)),$Le={class:"mb-2"},kLe=Ps(()=>t("label",{class:"form-label"},"Миниатюра",-1)),wLe={key:0,class:"img-thumbnail w-100 mb-2"},FLe={class:"mb-2"},CLe=Ps(()=>t("label",{class:"form-label"},"Изображение истории",-1)),PLe={class:"img-thumbnail w-100 mb-2"},SLe={class:"form-floating mb-2"},xLe=Ps(()=>t("label",{for:"description"},"Описание",-1)),jLe={class:"form-floating mb-2"},OLe=Ps(()=>t("label",{for:"title"},[t("i",{class:"fa-solid fa-link"}),_(" Ссылка")],-1)),TLe={key:0,class:"form-floating mb-2"},ULe=["value"],ILe=Ps(()=>t("label",{for:"link_type"},"Тип ссылки",-1)),VLe={class:"modal-footer"},MLe={class:"form-check form-switch mb-2"},ALe={class:"form-check-label",for:"script-settings-can_use_cash"},ELe=Ps(()=>t("button",{type:"submit",class:"btn btn-primary p-2 w-100"},"Сохранить",-1)),DLe={key:0,class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},zLe=Ps(()=>t("div",{class:"spinner-border text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1)),BLe={class:"row row-cols-1 row-cols-md-1 g-1"},LLe={class:"card h-100"},RLe={class:"card-body text-center"},NLe=["onClick"],qLe=["src","alt"],WLe={class:"card-title mt-3"},YLe={class:"card-text"},HLe={class:"card-footer d-flex flex-column align-items-center"},QLe=["onClick"],GLe={class:"modal-dialog modal-dialog-centered w-100 mw-100 m-0 h-100 mh-100"},KLe={class:"modal-content bg-transparent border-0 h-100 position-relative"},JLe={class:"progress position-absolute top-0 start-0 end-0",style:{height:"4px","z-index":"10"}},XLe=["src"],ZLe={class:"text-white p-3 bg-black bg-opacity-50 position-absolute bottom-0 start-0 end-0"},eRe={class:"mb-1"},tRe={class:"mb-2"},sRe=["href"],oRe={key:0,class:"row"},iRe={class:"col-12"},nRe={name:"AdminPanel",data(){return{currentStory:null,progress:0,timer:null,loadingStories:!1,stories:[],stories_paginate_object:null,formStory:{title:null,need_auto_send_stories:!0,thumbnail:null,image:null,description:null,link:null,link_type:"product"},link_types:[{key:"product",title:"Открывает товар в магазине"},{key:"bot",title:"Открывает раздел бота"},{key:"url",title:"Переход на внешнюю страницу"}],isEditing:!1,useThumbnailFile:!0,useImageFile:!0,viewedStories:JSON.parse(localStorage.getItem("viewedStories"))||[]}},mounted(){this.loadStoriesList()},methods:{goToProductLink(s){try{const o=new URL(s).searchParams.get("start"),i=atob(o).match(/^001slug(\d+)product(\d+)$/);i||this.$router.push({name:"CatalogV2"});const r=i[2];this.$router.push({name:"ProductV2",params:{productId:r}})}catch{this.$router.push({name:"CatalogV2"})}},openStory(s){this.currentStory=s,this.progress=0,this.startTimer(),this.markAsViewed(this.stories[s].id)},closeStory(){this.currentStory=null,this.progress=0,clearInterval(this.timer)},nextStory(){this.currentStory<this.stories.length-1?(this.currentStory++,this.progress=0,this.markAsViewed(this.stories[this.currentStory].id),this.startTimer()):this.closeStory()},startTimer(){clearInterval(this.timer),this.timer=setInterval(()=>{this.progress+=2,this.progress>=100&&this.nextStory()},100)},loadStoriesList(s=1){return this.loadingStories=!0,this.$store.dispatch("loadStories",{page:s,size:20}).then(()=>{this.stories=this.$store.getters.getStories,this.stories_paginate_object=this.$store.getters.getStoriesPaginateObject,this.loadingStories=!1}).catch(()=>{this.loadingStories=!1})},nextStories(s){this.loadStoriesList(s)},startCreateStory(){this.formStory={title:null,thumbnail:null,image:null,description:null},this.isEditing=!1,this.useThumbnailFile=!0,this.useImageFile=!0},saveStory(){let s=new FormData;Object.keys(this.formStory).forEach(e=>{const o=this.formStory[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("media_thumbnail",this.useThumbnailFile),s.append("media_image",this.useImageFile),s.append("thumbnail[]",this.formStory.thumbnail),s.append("image[]",this.formStory.image),this.$store.dispatch("saveStory",{storyForm:s}).then(()=>{this.startCreateStory(),this.closeModal(),this.$notify({title:"Истории",text:"История успешно сохранена",type:"success"}),document.getElementById("story-form").reset(),this.loadStoriesList()}).catch(()=>{this.$notify({title:"Истории",text:"Ошибка сохранения истории",type:"error"})})},cancelForm(){this.startCreateStory(),this.closeModal()},handleThumbnailUpload(s,e){const o=s.target.files[0];o&&o.size<=5*1024*1024?this.formStory[e]=o:(alert("Размер файла миниатюры не должен превышать 5 МБ"),s.target.value=null)},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},handleImageUpload(s){const e=s.target.files[0];e&&e.size<=5*1024*1024?this.formStory.image=e:(alert("Размер изображения не должен превышать 5 МБ"),s.target.value=null)},deleteStory(s){this.$store.dispatch("deleteStory",{id:s}).then(()=>{this.$notify({title:"Истории",text:"История успешно удалена",type:"success"}),this.loadStoriesList()}).catch(()=>{this.$notify({title:"Истории",text:"Ошибка удаления истории",type:"error"})})},duplicateStory(s){const e={...s,id:Date.now(),title:`${s.title} (Copy)`};this.$emit("create-story",e)},viewStory(s){this.$emit("view-story",s)},isStoryViewed(s){return this.viewedStories.includes(s)},closeModal(){const s=document.getElementById("storyModal"),e=bootstrap.Modal.getInstance(s);e&&e.hide()}}},lRe=Object.assign(nRe,{setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[hLe,t("button",{type:"button",class:"btn btn-success p-3 w-100 mb-2","data-bs-toggle":"modal","data-bs-target":"#storyModal",onClick:o[0]||(o[0]=(...i)=>e.startCreateStory&&e.startCreateStory(...i))}," Создать новую историю "),t("div",pLe,[t("div",_Le,[t("form",{class:"modal-content",id:"story-form",onSubmit:o[9]||(o[9]=W((...i)=>e.saveStory&&e.saveStory(...i),["prevent"]))},[t("div",fLe,[t("h5",bLe,p(e.isEditing?"Редактировать историю":"Создать историю"),1),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Закрыть",onClick:o[1]||(o[1]=(...i)=>e.cancelForm&&e.cancelForm(...i))})]),t("div",gLe,[t("div",yLe,[f(t("input",{"onUpdate:modelValue":o[2]||(o[2]=i=>e.formStory.title=i),type:"text",class:"form-control",id:"title",placeholder:"Введите заголовок",required:""},null,512),[[k,e.formStory.title]]),vLe]),t("div",$Le,[kLe,e.formStory.thumbnail?f((l(),a("img",wLe,null,512)),[[n,e.getPhoto(e.formStory.thumbnail).imageUrl]]):u("",!0),t("input",{type:"file",accept:"image/*",class:"form-control",onChange:o[3]||(o[3]=i=>e.handleThumbnailUpload(i,"thumbnail")),required:""},null,32)]),t("div",FLe,[CLe,e.formStory.image?(l(),a(v,{key:0},[_(" test "),f(t("img",PLe,null,512),[[n,e.getPhoto(e.formStory.image).imageUrl]])],64)):u("",!0),t("input",{type:"file",id:"image",accept:"image/*",class:"form-control",onChange:o[4]||(o[4]=i=>e.handleThumbnailUpload(i,"image")),required:""},null,32)]),t("div",SLe,[f(t("textarea",{"onUpdate:modelValue":o[5]||(o[5]=i=>e.formStory.description=i),class:"form-control",placeholder:"Введите описание",id:"description",style:{height:"150px"},required:""},null,512),[[k,e.formStory.description]]),xLe]),t("div",jLe,[f(t("input",{"onUpdate:modelValue":o[6]||(o[6]=i=>e.formStory.link=i),type:"url",class:"form-control",id:"title",placeholder:"Введите заголовок"},null,512),[[k,e.formStory.link]]),OLe]),e.formStory.link?(l(),a("div",TLe,[f(t("select",{required:"","onUpdate:modelValue":o[7]||(o[7]=i=>e.formStory.link_type=i),class:"form-select",id:"link_type","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(e.link_types,i=>(l(),a("option",{value:i.key},p(i.title),9,ULe))),256))],512),[[Ve,e.formStory.link_type]]),ILe])):u("",!0)]),t("div",VLe,[t("div",MLe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=i=>e.formStory.need_auto_send_stories=i),role:"switch",id:"script-settings-can_use_cash"},null,512),[[z,e.formStory.need_auto_send_stories]]),t("label",ALe,[_("Автоматическая рассылка оповещения про новую историю: "),t("span",{class:C({"text-primary fw-bold":e.formStory.need_auto_send_stories})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.formStory.need_auto_send_stories})},"выкл",2)])]),ELe])],32)])]),e.loadingStories?(l(),a("div",DLe,[_(" Подготавливаем данные... "),zLe])):(l(),a(v,{key:1},[t("div",BLe,[(l(!0),a(v,null,O(e.stories,(i,r)=>(l(),a("div",{key:i.id,class:"col"},[t("div",LLe,[t("div",RLe,[t("div",{class:C(["story-item rounded-circle overflow-hidden cursor-pointer border mx-auto",{"border-primary":!e.isStoryViewed(i.id),"border-secondary":e.isStoryViewed(i.id)}]),style:{width:"80px",height:"80px"},onClick:d=>e.openStory(r)},[t("img",{src:i.thumbnail,class:C(["w-100 h-100 object-fit-cover",{"filter-grayscale":e.isStoryViewed(i.id)}]),alt:i.title},null,10,qLe)],10,NLe),t("h5",WLe,p(i.title),1),t("p",YLe,p(i.description),1)]),t("div",HLe,[t("button",{type:"button",class:"btn btn-link text-danger",onClick:d=>e.deleteStory(i.id)},"Удалить ",8,QLe)])])]))),128))]),e.currentStory!==null?(l(),a("div",{key:0,class:"modal fade show d-block",style:{"background-color":"rgba(0, 0, 0, 0.9)"},onClick:o[12]||(o[12]=W((...i)=>e.closeStory&&e.closeStory(...i),["self"]))},[t("div",GLe,[t("div",KLe,[t("div",JLe,[t("div",{class:"progress-bar bg-primary",role:"progressbar",style:dt({width:`${e.progress}%`})},null,4)]),t("img",{src:e.stories[e.currentStory].image,class:"w-100 h-100 object-fit-cover",alt:"Story"},null,8,XLe),t("div",ZLe,[t("h5",eRe,p(e.stories[e.currentStory].title),1),t("p",tRe,p(e.stories[e.currentStory].description),1),e.stories[e.currentStory].link?(l(),a(v,{key:0},[e.stories[e.currentStory].link_type==="url"||e.stories[e.currentStory].link_type==="bot"?(l(),a("a",{key:0,href:e.stories[e.currentStory].link,target:"_blank",class:"btn btn-primary rounded-5 w-100 p-3"}," Перейти по ссылке ",8,sRe)):u("",!0),e.stories[e.currentStory].link_type==="product"?(l(),a("a",{key:1,href:"javascript:void(0)",onClick:o[10]||(o[10]=i=>e.goToProductLink(e.stories[e.currentStory].link)),class:"btn btn-primary rounded-5 w-100 p-3"}," Открыть товар ")):u("",!0)],64)):u("",!0)]),t("button",{type:"button",class:"btn-close btn-close-white position-absolute top-0 end-0 m-2",style:{"z-index":"10"},onClick:o[11]||(o[11]=(...i)=>e.closeStory&&e.closeStory(...i))})])])])):u("",!0)],64)),e.stories_paginate_object?(l(),a(v,{key:2},[e.stories_paginate_object.meta.last_page>1?(l(),a("div",oRe,[t("div",iRe,[e.stories_paginate_object?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextStories,pagination:e.stories_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])])):u("",!0)],64)):u("",!0)],64)}}}),aRe=oe(lRe,[["__scopeId","data-v-f0be18d5"]]),rRe={class:"container py-3"},dRe={class:"row"},cRe={class:"col-12"},uRe={data(){return{}},computed:{...G(["getSelf"]),currentBot(){return window.currentBot},tg(){return window.Telegram.WebApp}},mounted(){},methods:{}},Bd=Object.assign(uRe,{__name:"StoryManager",setup(s){return(e,o)=>(l(),a("div",rRe,[t("div",dRe,[t("div",cRe,[T(aRe)])])]))}}),mRe=Object.freeze(Object.defineProperty({__proto__:null,default:Bd},Symbol.toStringTag,{value:"Module"})),hRe=t("p",{class:"my-2"},"Выберите канал рассылки:",-1),pRe={class:"btn-group-vertical w-100 mb-2",role:"group","aria-label":"Vertical button group"},_Re={class:"form-floating mb-3"},fRe=t("label",{for:"floatingInput"},"id канала",-1),bRe={class:"form-floating mb-2"},gRe={for:"floatingTextarea"},yRe={key:0,class:"small"},vRe={class:"form-check"},$Re=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),kRe={key:0,class:"mb-2"},wRe=t("h6",null,"Изображения на странице",-1),FRe={class:"d-flex justify-content-center flex-wrap"},CRe={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},PRe={class:"row"},SRe={key:0,class:"col-12 d-flex flex-wrap"},xRe={class:"mb-2 img-preview",style:{"margin-right":"10px"}},jRe={class:"remove"},ORe=["onClick"],TRe={class:"form-check"},URe=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),IRe={key:1,class:"mb-2"},VRe={key:0},MRe={key:1},ARe=t("button",{type:"submit",class:"btn btn-primary p-3 w-100"},[t("i",{class:"fa-regular fa-paper-plane mr-2"}),_(" Отправить в канал ")],-1),ERe={data(){return{load:!1,photos:[],showInlineTemplateSelector:!1,need_page_images:!1,need_inline_menu:!1,mailForm:{text:"",inline_keyboard:null,channel:null}}},computed:{currentBot(){return window.currentBot}},mounted(){window.addEventListener("select-telegram-channel-id",s=>{this.mailForm[s.detail.param]=s.detail.channel})},methods:{toggleMainChannel(){this.mailForm.channel=this.currentBot.main_channel},toggleOrderChannel(){this.mailForm.channel=this.currentBot.order_channel},addTextTo(s={param:null,text:null}){this.mailForm.channel=s.text},submitMail(){let s=new FormData;if(Object.keys(this.mailForm).forEach(e=>{const o=this.mailForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.$store.dispatch("sendToChannel",{mailForm:s}).then(e=>{this.load=!0,this.photos=[],this.need_inline_menu=!1,this.need_page_images=!1,this.mailForm={text:"",channel:null,inline_keyboard:null},this.$notify({title:"Отлично",text:"Сообщение успешно отправлено в канал!",type:"success"})}).catch(e=>{this.$notify({title:"Упс...",text:"Ошибка отправки сообщения в канал!",type:"error"})})},saveInlineKeyboard(s){this.mailForm.inline_keyboard=s},selectInlineKeyboard(s){this.mailForm.inline_keyboard=s,this.showInlineTemplateSelector=!1},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.mailForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},requestTelegramChannelId(){new RegExp("^d+$").test(this.mailForm.channel)||(this.mailForm.channel.indexOf("https://")!==-1&&(this.mailForm.channel="@"+this.mailForm.channel.split("https://t.me/")[1]),this.$store.dispatch("requestTelegramChannelId",{dataObject:{channel:this.mailForm.channel}}).then(e=>{e.ok&&(this.mailForm.channel=e.result.chat.id),e.ok&&this.$notify({title:"Отлично",text:"Канал успешно найден!",type:"success"}),e.ok||(this.$notify({title:"Ошибочка",text:"Неверно указанный канал!",type:"error"}),this.mailForm.channel=null)}).catch(()=>{}))}}},DRe=Object.assign(ERe,{__name:"MailToChannel",setup(s){return(e,o)=>{const n=ie("lazy");return e.currentBot?(l(),a("form",{key:0,onSubmit:o[9]||(o[9]=W((...i)=>e.submitMail&&e.submitMail(...i),["prevent"]))},[hRe,t("div",pRe,[e.currentBot.main_channel!=null?(l(),a("button",{key:0,type:"button",class:C(["btn p-3 mb-2",{"btn-primary":e.mailForm.channel===e.currentBot.main_channel,"btn-secondary":e.mailForm.channel!==e.currentBot.main_channel}]),onClick:o[0]||(o[0]=(...i)=>e.toggleMainChannel&&e.toggleMainChannel(...i))},"Главный канал ",2)):u("",!0),e.currentBot.order_channel!=null?(l(),a("button",{key:1,type:"button",class:C(["btn p-3",{"btn-primary":e.mailForm.channel===e.currentBot.order_channel,"btn-secondary":e.mailForm.channel!==e.currentBot.order_channel}]),onClick:o[1]||(o[1]=(...i)=>e.toggleOrderChannel&&e.toggleOrderChannel(...i))},"Канал заказов ",2)):u("",!0)]),t("div",_Re,[f(t("input",{maxlength:"255","onUpdate:modelValue":o[2]||(o[2]=i=>e.mailForm.channel=i),type:"search",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.mailForm.channel]]),fRe]),t("div",bRe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=i=>e.mailForm.text=i),maxlength:"4096",style:{"min-height":"100px"},placeholder:"Leave a comment here",id:"floatingTextarea",required:""},null,512),[[k,e.mailForm.text]]),t("label",gRe,[_("Текстовое содержимое рассылки "),e.mailForm.text?(l(),a("span",yRe,p(e.mailForm.text.length)+"/4096 ",1)):u("",!0)])]),t("div",vRe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=i=>e.need_page_images=i),type:"checkbox",id:"need-page-images"},null,512),[[z,e.need_page_images]]),$Re]),e.need_page_images?(l(),a("div",kRe,[wRe,t("div",FRe,[t("label",CRe,[_(" + "),t("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:o[5]||(o[5]=(...i)=>e.onChangePhotos&&e.onChangePhotos(...i)),style:{display:"none"}},null,32)]),t("div",PRe,[e.photos.length>0?(l(),a("div",SRe,[(l(!0),a(v,null,O(e.photos,(i,r)=>(l(),a("div",xRe,[f(t("img",null,null,512),[[n,e.getPhoto(i).imageUrl]]),t("div",jRe,[t("a",{onClick:d=>e.removePhoto(r)},"Удалить",8,ORe)])]))),256))])):u("",!0)])])])):u("",!0),t("div",TRe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=i=>e.need_inline_menu=i),type:"checkbox",id:"need-inline-menu"},null,512),[[z,e.need_inline_menu]]),URe]),e.need_inline_menu?(l(),a("div",IRe,[t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:o[7]||(o[7]=i=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(l(),a("span",MRe," Скрыть шаблоны меню")):(l(),a("span",VRe," Открыть шаблоны меню"))],2),e.showInlineTemplateSelector?(l(),M(ao,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(ls,{key:1,type:"inline",onSave:e.saveInlineKeyboard,modelValue:e.mailForm.inline_keyboard,"onUpdate:modelValue":o[8]||(o[8]=i=>e.mailForm.inline_keyboard=i)},null,8,["onSave","modelValue"]))])):u("",!0),ARe],32)):u("",!0)}}});const zRe={key:0},BRe=t("p",{class:"mb-2"},[t("i",{class:"fa-regular fa-circle-question mr-1"}),_("Инструкция")],-1),LRe=t("div",{class:"text-left w-100"},[t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-arrow-down"}),_(" - добавление в нижнюю часть новой строки (кнопки)")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-arrow-turn-up"}),_(" - добавление строки над выбранной строкой")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-arrow-turn-down"}),_(" - добавление строки под выбранной строкой")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-plus"}),_(" - добавление кнопки на строку")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-minus"}),_(" - удаление крайней левой кнопки из строки либо самой строки")]),t("p",{class:"mb-0 text-white"},[t("i",{class:"fa-solid fa-xmark"}),_(" - отмена выделения")])],-1),RRe={class:"mb-2 d-flex"},NRe=t("i",{class:"fa-solid fa-arrow-down"},null,-1),qRe=t("i",{class:"fa-solid fa-arrow-turn-up"},null,-1),WRe=[qRe],YRe=t("i",{class:"fa-solid fa-arrow-turn-down"},null,-1),HRe=[YRe],QRe=t("i",{class:"fa-solid fa-arrows-up-to-line"},null,-1),GRe=[QRe],KRe=t("i",{class:"fa-solid fa-arrows-down-to-line"},null,-1),JRe=[KRe],XRe=t("i",{class:"fa-solid fa-xmark"},null,-1),ZRe=[XRe],eNe={key:0,class:"text-danger font-weight-bold p-0 m-0"},tNe={key:1},sNe={class:"row mb-0"},oNe={class:"col-12 d-flex justify-content-center"},iNe=["onClick"],nNe=["onUpdate:modelValue"],lNe={class:"dropdown"},aNe=t("button",{style:{"border-radius":"0 5px 5px 0px"},class:"btn btn-outline-light text-primary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),rNe={class:"dropdown-menu"},dNe=["onClick"],cNe=t("i",{class:"fa-solid fa-plus"},null,-1),uNe=["onClick"],mNe=t("i",{class:"fa-solid fa-minus"},null,-1),hNe=["onClick"],pNe=t("i",{class:"fa-solid fa-caret-left"},null,-1),_Ne=["onClick"],fNe=t("i",{class:"fa-solid fa-caret-right"},null,-1),bNe=["onClick"],gNe=t("a",{class:"dropdown-item",href:"javascript:void(0)"},[t("i",{class:"fa-solid fa-caret-up mr-2"}),_(" переместить вверх ")],-1),yNe=[gNe],vNe=["onClick"],$Ne=t("a",{class:"dropdown-item",href:"javascript:void(0)"},[t("i",{class:"fa-solid fa-caret-down mr-2"}),_(" переместить вниз ")],-1),kNe=[$Ne],wNe={class:"form-check"},FNe=["id"],CNe=["for"],PNe={key:2,class:"mb-0"},SNe=t("label",{class:"form-label",id:"bot-domain"},"JSON-код клавиатуры",-1),xNe={key:1},jNe={class:"row"},ONe={class:"col-12 mb-2"},TNe={class:"col-12"},UNe=t("div",{class:"alert alert-danger",role:"alert"}," Возможно выбрать только 1 тип действия ",-1),INe={class:"mb-3"},VNe={class:"input-group"},MNe={class:"form-floating"},ANe=["id"],ENe=t("label",{for:"floatingInput"},"Название кнопки",-1),DNe=t("i",{class:"fa-solid fa-bars"},null,-1),zNe=[DNe],BNe={key:0,class:"form-floating mb-2"},LNe=["id"],RNe=["for"],NNe={key:1,class:"form-floating mb-2"},qNe=["id"],WNe=["for"],YNe={key:2,class:"form-floating mb-2"},HNe=["id"],QNe=["for"],GNe={key:3,class:"mb-3"},KNe=["for"],JNe=t("div",{class:"alert alert-warning",role:"alert"}," Внимание! Режим всплывающего меню должен быть настроен в BotFather-е в разделе редактирования бота InlineMode. Сперва нужно включить данный режим. ",-1),XNe={class:"input-group mb-3"},ZNe=["id"],eqe=t("i",{class:"fa-solid fa-bars"},null,-1),tqe=[eqe],sqe={key:4,class:"mb-3"},oqe={class:"form-check"},iqe=t("label",{class:"form-check-label",for:"need-login-url"}," Добавить ссылку авторизации ",-1),nqe={key:0,class:"mb-3"},lqe=["for"],aqe=["id"],rqe={key:1,class:"mb-3"},dqe=["for"],cqe=["id"],uqe={key:2,class:"mb-3"},mqe=["for"],hqe=["id"],pqe={key:3,class:"form-check mb-3"},_qe=t("label",{class:"form-check-label",for:"need-request_write_access"}," Запросить отправку сообщений ботом ",-1),fqe={key:5,class:"form-check"},bqe=["id"],gqe=["for"],yqe={key:6,class:"form-check"},vqe=["checked","id"],$qe=["for"],kqe={key:7,class:"form-check"},wqe=["checked","id"],Fqe=["for"],Cqe=t("hr",null,null,-1),Pqe=["id"],Sqe={class:"modal-dialog"},xqe={class:"modal-content"},jqe={class:"modal-body"},Oqe=["id"],Tqe={class:"modal-dialog"},Uqe={class:"modal-content"},Iqe={class:"modal-body"},Vqe={props:["modelValue","type"],components:{Vue3JsonEditor:qs},computed:{uuid(){return Bt()}},watch:{settings:{handler:function(s){this.$emit("update:modelValue",{menu:this.keyboard,settings:this.settings})},deep:!0},need_login_url:{handler:function(s){this.need_login_url?this.keyboard[this.select.row][this.select.col].login_url={url:null,forward_text:null,bot_username:null,request_write_access:!0}:delete this.keyboard[this.select.row][this.select.col].login_url},deep:!0},keyboard:{handler:function(s){this.save(),this.$emit("update:modelValue",{menu:this.keyboard,settings:this.settings})},deep:!0}},data(){return{need_input_field_placeholder:!1,settings:{resize_keyboard:!0,one_time_keyboard:!1,input_field_placeholder:null,is_persistent:!1},need_login_url:!1,pageModal:null,inlineQueryModal:null,mode:0,editor:!1,showCode:!1,showAssign:!1,selectedRow:null,load:!1,rowCount:1,keyboard:[],select:{row:0,col:0,type:this.type||"reply"}}},mounted(){this.pageModal=new bootstrap.Modal(document.getElementById("page-list-in-keyboard-"+this.uuid),{}),this.inlineQueryModal=new bootstrap.Modal(document.getElementById("inline-query-list-in-keyboard-"+this.uuid),{}),this.modelValue&&this.$nextTick(()=>{var s,e,o,n,i,r;this.keyboard=((s=this.modelValue)==null?void 0:s.menu)||[],(e=this.modelValue)!=null&&e.settings&&(this.settings={resize_keyboard:((o=this.modelValue)==null?void 0:o.settings.resize_keyboard)||!0,one_time_keyboard:((n=this.modelValue)==null?void 0:n.settings.one_time_keyboard)||!1,input_field_placeholder:((i=this.modelValue)==null?void 0:i.settings.input_field_placeholder)||null,is_persistent:((r=this.modelValue)==null?void 0:r.settings.is_persistent)||!1},this.settings.input_field_placeholder!=null&&(this.need_input_field_placeholder=!0))})},methods:{selectInlineQuery(s){this.keyboard[this.select.row][this.select.col].switch_inline_query_current_chat=s.command,this.$notify({title:"Конструктор страниц",text:"Вы успешно выбрали страницу",type:"success"}),this.inlineQueryModal.hide()},openInlineQueryModal(){this.inlineQueryModal.show()},openPageModal(){this.pageModal.show()},attachPage(s){let e=(s.slug.command||"Нет команды").replace(".*","");this.keyboard[this.select.row][this.select.col].text=e,this.$notify({title:"Конструктор страниц",text:"Вы успешно выбрали страницу",type:"success"}),this.type==="inline"&&(this.keyboard[this.select.row][this.select.col].callback_data=e)},reset(){this.selectedRow=null,this.select={row:-1,col:-1,type:this.type||"reply"}},removeSelectedButton(){this.keyboard[this.select.row].splice(this.select.col,1);let s=this.select.row;this.reset(),this.keyboard[s].length===0&&this.keyboard.splice(s,1)},needRemoveField(s,e,o){Object.keys(this.keyboard[e][o]).forEach(n=>{n!=="text"&&n!==s&&delete this.keyboard[e][o][n]})},moveColVertical(s,e){let o=this.keyboard.length,n=e===0?this.select.row-1>=0?this.select.row-1:o-1:this.select.row<o-1?this.select.row+1:0,i=this.keyboard[this.select.row][this.select.col];this.keyboard[this.select.row].splice(this.select.col,1),console.log(this.keyboard[this.select.row].length,this.select.row),this.keyboard[n].push(i),this.keyboard[this.select.row].length===0&&this.keyboard.splice(this.select.row,1),this.select.row=n,this.select.col=this.keyboard[n].length-1,this.select.text=this.keyboard[n][0].text,this.selectedRow=n},moveCol(s,e=0){s!==this.select.row&&(this.select.row=s,this.select.col=0,this.select.text=this.keyboard[this.select.row][this.select.col]);let o=this.select.row,n=this.select.col,i=this.keyboard[o].length,r=e===0?n-1>=0?n-1:i-1:n<i-1?n+1:0,d=this.keyboard[o][n];this.keyboard[o][n]=this.keyboard[o][r],this.keyboard[o][r]=d,this.select.row=o,this.select.col=r,this.select.text=this.keyboard[o][r].text},moveRow(s=0){if(this.selectedRow==null)return;let e=this.keyboard.length,o=s===0?this.selectedRow-1>=0?this.selectedRow-1:e-1:this.selectedRow<e-1?this.selectedRow+1:0,n=this.keyboard[this.selectedRow];this.keyboard[this.selectedRow]=this.keyboard[o],this.keyboard[o]=n,this.select.row=o,this.select.col=0,this.select.text=this.keyboard[o][0].text,this.selectedRow=o},openKeyboardEditorMenu(s,e){this.mode=1},save(){this.$emit("save",this.keyboard),this.type==="reply"&&this.$emit("save-settings",this.settings)},onJsonChange(s){this.keyboard=s,this.save()},removeColFromRow(s){this.keyboard[s].length>1?this.keyboard[s].splice(this.keyboard[s].length-1,1):this.keyboard.splice(s,1),this.keyboard.length===0&&(this.selectedRow=null),this.save()},addRowAbove(){this.addRow(!0)},addRowBelow(){this.addRow(!1)},addRow(s=!1){if(this.selectedRow==null)this.keyboard?this.keyboard.push([{text:"No Text"}]):this.keyboard=[[{text:"No Text"}]],this.selectedRow=null;else{let e=s?this.selectedRow:this.selectedRow+1;this.keyboard.splice(e,0,[{text:"No Text"}])}this.save()},addColToRow(){let s=this.selectedRow;this.keyboard[s].push({text:"No Text"}),this.save()},selectIndex(s,e){this.selectedRow=s,this.select.row=s,this.select.col=e,this.keyboard[s]&&(this.select.text=this.keyboard[s][e].text),this.load=!0,this.$nextTick(()=>{this.load=!1})},removeCol(s,e){this.keyboard[s].length>1?this.keyboard[s].splice(e,1):this.keyboard.splice(1,1),this.save()}}},si=Object.assign(Vqe,{__name:"KeyboardConstructor",setup(s){return(e,o)=>{const n=Qe("Popper"),i=Qe("PagesList"),r=Qe("InlineQueryList");return l(),a(v,null,[!e.editor&&e.mode===0?(l(),a("div",zRe,[T(n,null,{content:A(()=>[LRe]),default:A(()=>[BRe]),_:1}),t("div",RRe,[e.selectedRow==null?(l(),a("button",{key:0,title:"добавление в нижнюю часть новой строки (кнопки)",type:"button",class:"btn btn-link mb-2 w-100",style:{"font-size":"12px"},onClick:o[0]||(o[0]=(...d)=>e.addRow&&e.addRow(...d))},[NRe,_(" Добавить строку ")])):u("",!0),e.selectedRow!=null?(l(),a("button",{key:1,type:"button",title:"добавление строки над выбранной строкой",class:"btn btn-primary mb-2 mr-2",onClick:o[1]||(o[1]=(...d)=>e.addRowAbove&&e.addRowAbove(...d))},WRe)):u("",!0),e.selectedRow!=null?(l(),a("button",{key:2,type:"button",title:"добавление строки под выбранной строкой",class:"btn btn-primary mb-2 mr-2",onClick:o[2]||(o[2]=(...d)=>e.addRowBelow&&e.addRowBelow(...d))},HRe)):u("",!0),e.selectedRow!=null?(l(),a("button",{key:3,type:"button",class:"btn btn-primary mb-2 mr-2",onClick:o[3]||(o[3]=d=>e.moveRow(0))},GRe)):u("",!0),e.selectedRow!=null?(l(),a("button",{key:4,type:"button",class:"btn btn-primary mb-2 mr-2",onClick:o[4]||(o[4]=d=>e.moveRow(1))},JRe)):u("",!0),e.selectedRow!=null?(l(),a("button",{key:5,type:"button",class:"btn btn-outline-danger mb-2 mr-2",onClick:o[5]||(o[5]=d=>e.selectedRow=null)},ZRe)):u("",!0)]),(e.keyboard||[]).length===0?(l(),a("p",eNe,"Элементы клавиатуры еще не добавлены")):u("",!0),(e.keyboard||[]).length>0?(l(),a("div",tNe,[(l(!0),a(v,null,O(e.keyboard,(d,c)=>(l(),a("div",sNe,[t("div",oNe,[(l(!0),a(v,null,O(d,(h,g)=>(l(),a("div",{style:{"margin-right":"5px"},class:"btn-group dropdown-center w-100 mb-1",onClick:w=>e.selectIndex(c,g)},[f(t("input",{style:{"font-size":"10px"},type:"text",class:"btn btn-outline-light text-primary w-100","onUpdate:modelValue":w=>e.keyboard[c][g].text=w},null,8,nNe),[[k,e.keyboard[c][g].text]]),t("div",lNe,[aNe,t("ul",rNe,[t("li",null,[t("a",{class:"dropdown-item",onClick:w=>e.openKeyboardEditorMenu(c,g),href:"javascript:void(0)"},"Редактор",8,dNe)]),t("li",null,[e.selectedRow!=null?(l(),a("a",{key:0,href:"javascript:void(0)",title:"добавление кнопки на строку",class:"dropdown-item",onClick:o[6]||(o[6]=w=>e.addColToRow())},[cNe,_(" Добавить ")])):u("",!0)]),t("li",null,[e.selectedRow!=null?(l(),a("a",{key:0,href:"javascript:void(0)",title:"удаление крайней левой кнопки из строки либо самой строки",class:"dropdown-item",onClick:w=>e.removeColFromRow(g)},[mNe,_(" Удалить ")],8,uNe)):u("",!0)]),t("li",null,[e.selectedRow!=null?(l(),a("a",{key:0,href:"javascript:void(0)",class:"dropdown-item",onClick:w=>e.moveCol(c,0)},[pNe,_(" Переместить ")],8,hNe)):u("",!0)]),t("li",null,[e.selectedRow!=null?(l(),a("a",{key:0,href:"javascript:void(0)",class:"dropdown-item",onClick:w=>e.moveCol(c,1)},[fNe,_(" Переместить ")],8,_Ne)):u("",!0)]),t("li",{onClick:w=>e.moveColVertical(c,0)},yNe,8,bNe),t("li",{onClick:w=>e.moveColVertical(c,1)},kNe,8,vNe)])])],8,iNe))),256))])]))),256))])):u("",!0),t("div",wNe,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[7]||(o[7]=d=>e.showCode=d),id:"showCode"+e.uuid},null,8,FNe),[[z,e.showCode]]),t("label",{class:"form-check-label",for:"showCode"+e.uuid}," Отобразить код ",8,CNe)]),e.showCode?(l(),a("div",PNe,[SNe,e.load?u("",!0):(l(),M(Ie(qs),{key:0,mode:"code",modelValue:e.keyboard,"onUpdate:modelValue":o[8]||(o[8]=d=>e.keyboard=d),"show-btns":!1,expandedOnStart:!0,onJsonChange:e.onJsonChange},null,8,["modelValue","onJsonChange"]))])):u("",!0)])):u("",!0),e.mode===1?(l(),a("div",xNe,[t("div",jNe,[t("div",ONe,[t("button",{type:"button",onClick:o[9]||(o[9]=d=>e.mode=0),class:"btn btn-outline-light text-primary"},"Назад ")]),t("form",TNe,[UNe,t("div",INe,[t("div",VNe,[t("div",MNe,[f(t("input",{type:"text",id:"command-title-"+e.select.row+"-col-"+e.select.col,class:"form-control border-light","onUpdate:modelValue":o[10]||(o[10]=d=>e.keyboard[e.select.row][e.select.col].text=d)},null,8,ANe),[[k,e.keyboard[e.select.row][e.select.col].text]]),ENe]),t("button",{type:"button",onClick:o[11]||(o[11]=(...d)=>e.openPageModal&&e.openPageModal(...d)),class:"btn btn-outline-light","aria-expanded":"false"},zNe)])]),s.type==="inline"?(l(),a("div",BNe,[f(t("input",{type:"text",onChange:o[12]||(o[12]=d=>e.needRemoveField("callback_data",e.select.row,e.select.col)),"onUpdate:modelValue":o[13]||(o[13]=d=>e.keyboard[e.select.row][e.select.col].callback_data=d),class:"form-control",id:"command-row-"+e.select.row+"-col-"+e.select.col,placeholder:"/start"},null,40,LNe),[[k,e.keyboard[e.select.row][e.select.col].callback_data]]),t("label",{for:"command-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Команда (для меню в сообщении)",8,RNe)])):u("",!0),s.type==="inline"?(l(),a("div",NNe,[f(t("input",{type:"text",class:"form-control",onChange:o[14]||(o[14]=d=>e.needRemoveField("switch_inline_query",e.select.row,e.select.col)),"onUpdate:modelValue":o[15]||(o[15]=d=>e.keyboard[e.select.row][e.select.col].switch_inline_query=d),id:"switch-inline-query-row-"+e.select.row+"-col-"+e.select.col,placeholder:"@YourAccountLink"},null,40,qNe),[[k,e.keyboard[e.select.row][e.select.col].switch_inline_query]]),t("label",{for:"switch-inline-query-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Ссылка на аккаунт в ТЕЛЕГРАММ",8,WNe)])):u("",!0),s.type==="inline"?(l(),a("div",YNe,[f(t("input",{type:"text",class:"form-control",onChange:o[16]||(o[16]=d=>e.needRemoveField("url",e.select.row,e.select.col)),"onUpdate:modelValue":o[17]||(o[17]=d=>e.keyboard[e.select.row][e.select.col].url=d),id:"url-row-"+e.select.row+"-col-"+e.colIndex,placeholder:"https://t.me/example"},null,40,HNe),[[k,e.keyboard[e.select.row][e.select.col].url]]),t("label",{for:"url-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Внешняя URL-ссылка",8,QNe)])):u("",!0),s.type==="inline"?(l(),a("div",GNe,[t("label",{for:"switch-inline-query-current-chat-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Команда всплывающего меню бота",8,KNe),JNe,t("div",XNe,[f(t("input",{type:"text",class:"form-control",onChange:o[18]||(o[18]=d=>e.needRemoveField("switch_inline_query_current_chat",e.select.row,e.select.col)),"onUpdate:modelValue":o[19]||(o[19]=d=>e.keyboard[e.select.row][e.select.col].switch_inline_query_current_chat=d),id:"switch-inline-query-current-chat-row-"+e.select.row+"-col-"+e.select.col,placeholder:"команда"},null,40,ZNe),[[k,e.keyboard[e.select.row][e.select.col].switch_inline_query_current_chat]]),t("button",{type:"button",onClick:o[20]||(o[20]=(...d)=>e.openInlineQueryModal&&e.openInlineQueryModal(...d)),class:"btn btn-outline-primary","aria-expanded":"false"},tqe)])])):u("",!0),s.type==="inline"?(l(),a("div",sqe,[t("div",oqe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[21]||(o[21]=d=>e.need_login_url=d),type:"checkbox",id:"need-login-url"},null,512),[[z,e.need_login_url]]),iqe]),e.need_login_url?(l(),a("div",nqe,[t("label",{for:"login-link-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Ссылка авторизации ",8,lqe),f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[22]||(o[22]=d=>e.keyboard[e.select.row][e.select.col].login_url.url=d),id:"login-link-row-"+e.select.row+"-col-"+e.select.col,placeholder:"Ссылка авторизации",required:""},null,8,aqe),[[k,e.keyboard[e.select.row][e.select.col].login_url.url]])])):u("",!0),e.need_login_url?(l(),a("div",rqe,[t("label",{for:"login-link-forward-text-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Новый текст кнопки в пересылаемых сообщениях ",8,dqe),f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[23]||(o[23]=d=>e.keyboard[e.select.row][e.select.col].login_url.forward_text=d),id:"login-link-forward-text-row-"+e.select.row+"-col-"+e.select.col,placeholder:"Текст кнопки"},null,8,cqe),[[k,e.keyboard[e.select.row][e.select.col].login_url.forward_text]])])):u("",!0),e.need_login_url?(l(),a("div",uqe,[t("label",{for:"login-link-bot-username-row-"+e.select.row+"-col-"+e.select.col,class:"form-label"},"Имя бота, которое будет использоваться для авторизации ",8,mqe),f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[24]||(o[24]=d=>e.keyboard[e.select.row][e.select.col].login_url.bot_username=d),id:"login-link-bot-username-row-"+e.select.row+"-col-"+e.select.col,placeholder:"Имя бота"},null,8,hqe),[[k,e.keyboard[e.select.row][e.select.col].login_url.bot_username]])])):u("",!0),e.need_login_url?(l(),a("div",pqe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[25]||(o[25]=d=>e.keyboard[e.select.row][e.select.col].login_url.request_write_access=d),type:"checkbox",id:"need-request_write_access"},null,512),[[z,e.keyboard[e.select.row][e.select.col].login_url.request_write_access]]),_qe])):u("",!0)])):u("",!0),s.type==="reply"?(l(),a("div",fqe,[t("input",{type:"radio",onChange:o[26]||(o[26]=d=>e.needRemoveField(null,e.select.row,e.select.col)),name:"request-radio",class:"form-check-input",id:"no-action-row-"+e.select.row+"-col-"+e.select.col},null,40,bqe),t("label",{class:"form-check-label",for:"no-action-row-"+e.select.row+"-col-"+e.select.col}," Без действий ",8,gqe)])):u("",!0),s.type==="reply"?(l(),a("div",yqe,[t("input",{type:"radio",onChange:o[27]||(o[27]=d=>e.needRemoveField("request_contact",e.select.row,e.select.col)),onClick:o[28]||(o[28]=d=>e.keyboard[e.select.row][e.select.col].request_contact=!0),name:"request-radio",checked:e.keyboard[e.select.row][e.select.col].request_contact,class:"form-check-input",id:"phone-row-"+e.select.row+"-col-"+e.select.col},null,40,vqe),t("label",{class:"form-check-label",for:"phone-row-"+e.select.row+"-col-"+e.select.col}," Запросить телефон ",8,$qe)])):u("",!0),s.type==="reply"?(l(),a("div",kqe,[t("input",{type:"radio",name:"request-radio",checked:e.keyboard[e.select.row][e.select.col].request_location,onChange:o[29]||(o[29]=d=>e.needRemoveField("request_location",e.select.row,e.select.col)),onClick:o[30]||(o[30]=d=>e.keyboard[e.select.row][e.select.col].request_location=!0),class:"form-check-input",id:"location-row-"+e.select.row+"-col-"+e.select.col},null,40,wqe),t("label",{class:"form-check-label",for:"location-row-"+e.select.row+"-col-"+e.select.col}," Запросить локацию ",8,Fqe)])):u("",!0)])]),Cqe])):u("",!0),t("div",{class:"modal fade",id:"page-list-in-keyboard-"+e.uuid,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",Sqe,[t("div",xqe,[t("div",jqe,[T(i,{onCallback:e.attachPage,editor:!1},null,8,["onCallback"])])])])],8,Pqe),t("div",{class:"modal fade",id:"inline-query-list-in-keyboard-"+e.uuid,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",Tqe,[t("div",Uqe,[t("div",Iqe,[T(r,{onSelect:e.selectInlineQuery},null,8,["onSelect"])])])])],8,Oqe)],64)}}}),Mqe={class:"row py-2"},Aqe={class:"col-12"},Eqe={class:"input-group mb-2"},Dqe={class:"form-floating"},zqe=t("label",{for:"floatingInput"},"Поиск рассылки",-1),Bqe={class:"col-12"},Lqe={class:"w-100",style:{"overflow-x":"scroll"}},Rqe={key:0,class:"table w-100"},Nqe=t("th",{scope:"col"},"Есть нижняя клавиатура",-1),qqe=t("th",{scope:"col"},"Есть клавиатура под текстом",-1),Wqe=t("th",{scope:"col"},"Действие",-1),Yqe={scope:"row"},Hqe=["onClick"],Qqe={style:{"min-width":"150px"}},Gqe={key:0,class:"mb-0"},Kqe={key:1},Jqe={style:{"min-width":"150px"}},Xqe={key:0,class:"dropdown"},Zqe=t("button",{class:"btn btn-outline-secondary",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),eWe={class:"dropdown-menu"},tWe={key:0},sWe=["onClick"],oWe={key:0},iWe=t("div",{class:"alert alert-warning",role:"alert"},[t("strong",null,"Внимание!"),_(" Вы еще не добавили ни одной рассылки! ")],-1),nWe=[iWe],lWe={key:0,class:"col-12"},aWe={data(){return{direction:"desc",order:"updated_at",show:!0,loading:!0,queues:[],search:null,paginate_object:null}},computed:{...G(["getQueues","getQueuesPaginateObject"])},mounted(){this.loadQueues()},methods:{removeQueue(s){this.loading=!0,this.$store.dispatch("removeQueue",{queueId:s}).then(e=>{this.loading=!1,this.loadQueues(0),this.$notify("Событие успешно удалено")}).catch(()=>{this.loading=!1,this.$notify("Ошибка удаления события")})},createQueue(){this.$emit("create")},nextQueues(s){this.loadQueues(s)},selectEvent(s){this.$emit("select",s)},loadAndOrder(s){this.order=s,this.direction=this.direction==="desc"?"asc":"desc",this.loadQueues(0)},loadQueues(s=0){this.loading=!0,this.$store.dispatch("loadQueues",{dataObject:{search:this.search,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.queues=this.getQueues,this.paginate_object=this.getQueuesPaginateObject}).catch(()=>{this.loading=!1})}}},rWe=Object.assign(aWe,{__name:"MailingTable",setup(s){return(e,o)=>(l(),a("div",Mqe,[t("div",Aqe,[t("div",Eqe,[t("div",Dqe,[f(t("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"form-control border-light",id:"floatingInput",placeholder:"Поиск рассылки"},null,512),[[k,e.search]]),zqe]),t("button",{class:"btn btn-outline-light",onClick:o[1]||(o[1]=n=>e.loadQueues(0)),type:"button",id:"queue-search-queue"},"Найти ")])]),t("div",Bqe,[t("div",Lqe,[e.queues.length>0?(l(),a("table",Rqe,[t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"cursor-pointer",onClick:o[2]||(o[2]=n=>e.loadAndOrder("id"))},"#"),t("th",{scope:"col",style:{"min-width":"200px"},class:"cursor-pointer",onClick:o[3]||(o[3]=n=>e.loadAndOrder("content"))},"Содержимое"),Nqe,qqe,t("th",{scope:"col",class:"cursor-pointer",onClick:o[4]||(o[4]=n=>e.loadAndOrder("images"))},"Изображения к рассылке"),t("th",{scope:"col",style:{"min-width":"150px"},class:"cursor-pointer",onClick:o[5]||(o[5]=n=>e.loadAndOrder("sent_at"))},"Отправлено в"),t("th",{scope:"col",style:{"min-width":"150px"},class:"cursor-pointer",onClick:o[6]||(o[6]=n=>e.loadAndOrder("cron_time"))},"Дата отправки"),Wqe])]),t("tbody",null,[(l(!0),a(v,null,O(e.queues,(n,i)=>(l(),a("tr",{class:C({"border-info":n.deleted_at==null,"border-danger":n.deleted_at!=null})},[t("th",Yqe,p(n.id),1),t("td",{style:{"min-width":"200px"},onClick:r=>e.selectEvent(n)},p(n.content||"Не указано"),9,Hqe),t("td",null,p(n.reply_keyboard?"Есть":"Нет"),1),t("td",null,p(n.inline_keyboard?"Есть":"Нет"),1),t("td",null,p((n.images||[]).length),1),t("td",Qqe,[n.sent_at?(l(),a("p",Gqe,p(e.$filters.currentFull(n.sent_at)),1)):(l(),a("p",Kqe,"Не задано"))]),t("td",Jqe,p(e.$filters.currentFull(n.cron_time)),1),t("td",null,[n.id?(l(),a("div",Xqe,[Zqe,t("ul",eWe,[n.deleted_at==null?(l(),a("li",tWe,[t("a",{class:"dropdown-item",onClick:r=>e.removeQueue(n.id),href:"javascript:void(0)"},"Удалить",8,sWe)])):u("",!0)])])):u("",!0)])],2))),256))])])):u("",!0)]),e.queues.length===0?(l(),a("div",oWe,nWe)):u("",!0)]),e.queues.length>0?(l(),a("div",lWe,[e.paginate_object?(l(),M(ja,{key:0,onPagination_page:e.nextQueues,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0)]))}}),dWe={class:"form-floating mb-2"},cWe={for:"floatingTextarea"},uWe={key:0,class:"small"},mWe={class:"form-check"},hWe=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения в рассылке (максимум 10) ",-1),pWe={key:0,class:"mb-2"},_We=t("div",{class:"divider my-3"},"Изображения",-1),fWe={key:0,class:"mb-2"},bWe={class:"fw-bold text-primary"},gWe=t("span",{class:"fw-bold text-primary"},"10",-1),yWe=t("button",{type:"button",class:"btn btn-outline-light text-primary w-100 p-3","data-bs-toggle":"modal","data-bs-target":"#select-images"},[t("i",{class:"fa-solid fa-image mr-2"}),_(" Выбрать изображение ")],-1),vWe={class:"modal fade",id:"select-images","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},$We={class:"modal-dialog modal-fullscreen"},kWe={class:"modal-content"},wWe={class:"modal-body"},FWe={class:"modal-footer"},CWe={key:0},PWe={key:1},SWe={class:"form-check"},xWe=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),jWe={key:1,class:"mb-2"},OWe=t("div",{class:"divider my-3"},"Меню",-1),TWe=t("button",{class:"btn mb-2 w-100 p-3 btn-outline-light text-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#show-keyboard-template-list"}," Открыть шаблоны меню ",-1),UWe={class:"modal fade",id:"show-keyboard-template-list","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},IWe={class:"modal-dialog modal-fullscreen"},VWe={class:"modal-content"},MWe={class:"modal-body"},AWe=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-primary p-3 w-100",id:"show-keyboard-template-list-btn-close","data-bs-dismiss":"modal"},"Выбрать и закрыть ")],-1),EWe=t("div",{class:"alert alert-light mb-2"},[_(" Вы можете указать "),t("span",{class:"fw-bold text-primary"},"любое время"),_(" для рассылки! Наши рассылки запускаются "),t("span",{class:"fw-bold text-primary"},"каждые 2 часа"),_(" и будут выполнены, если указанное вами время уже наступило. ")],-1),DWe={class:"form-floating mb-2"},zWe=t("label",{for:"floatingInput"},"Планируемое время",-1),BWe=t("button",{type:"submit",class:"btn btn-primary w-100 p-3"},[t("i",{class:"fa-regular fa-paper-plane mr-2"}),_(" Поставить в очередь ")],-1),LWe=t("div",{class:"divider my-3"},[t("i",{class:"fa-solid fa-hourglass-half text-primary mr-2"}),_(" Рассылки в очереди")],-1),RWe={key:2,class:"alert alert-light d-flex justify-content-center align-items-center flex-column py-3",role:"alert"},NWe=t("div",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Загружаем...")],-1),qWe=t("p",{class:"mt-3 mb-0"},"Загружаем...",-1),WWe=[NWe,qWe],YWe={data(){return{load_form:!0,load:!0,showInlineTemplateSelector:!1,need_page_images:!1,need_inline_menu:!1,mailForm:{id:null,message:null,inline_keyboard:null,cron_time:null,images:[]}}},watch:{need_inline_menu:{handler:function(s){this.need_inline_menu},deep:!0},need_page_images:{handler:function(s){this.need_page_images||(this.mailForm.images=[])},deep:!0}},computed:{currentBot(){return window.currentBot}},methods:{clearImages(){this.mailForm.images=[],this.$notify({title:"Отлично!",text:"Изображения успешно очищены!",type:"success"})},selectMailing(s){s.inline_keyboard&&(this.need_inline_menu=!0),this.load_form=!1,this.$nextTick(()=>{this.mailForm.id=s.id||null,this.mailForm.cron_time=s.cron_time?this.$filters.local(s.cron_time):null,this.mailForm.images=s.images||[],this.mailForm.message=s.content||null,this.load_form=!0,this.mailForm.images.length>0&&(this.need_page_images=!0),s.inline_keyboard&&(this.mailForm.inline_keyboard={menu:JSON.parse(s.inline_keyboard)}),window.scroll(0,0)})},selectImages(s){(!this.mailForm.images||typeof this.mailForm.images=="string")&&(this.mailForm.images=[]);let e=this.mailForm.images.indexOf(s.file_id);e!==-1?this.mailForm.images.splice(e,1):this.mailForm.images.push(s.file_id)},addTextTo(s={param:null,text:null}){this.mailForm.channel=s.text},submitMail(){this.load=!1;let s=new FormData;Object.keys(this.mailForm).forEach(e=>{const o=this.mailForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.$store.dispatch("storeQueue",{queueForm:s}).then(e=>{this.load=!0,this.need_inline_menu=!1,this.need_page_images=!1,this.mailForm={message:"",images:null,inline_keyboard:null},this.$notify({title:"Отлично!",text:"Сообщение успешно отправлено в очередь рассылки!",type:"success"})}).catch(e=>{this.$notify({title:"Упс...",text:"Ошибка отправки сообщения в очередь",type:"error"})})},saveInlineKeyboard(s){this.mailForm.inline_keyboard=s},selectInlineKeyboard(s){this.showInlineTemplateSelector=!0,this.$nextTick(()=>{this.mailForm.inline_keyboard=s,this.showInlineTemplateSelector=!1});let e=document.querySelector("#show-keyboard-template-list-btn-close");e&&e.click()},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.images.splice(s,1)},removeImage(s){this.mailForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.images.push(e[o])}}},HWe=Object.assign(YWe,{__name:"MailToBot",setup(s){return(e,o)=>(l(),a(v,null,[e.currentBot&&e.load_form?(l(),a("form",{key:0,onSubmit:o[5]||(o[5]=W((...n)=>e.submitMail&&e.submitMail(...n),["prevent"])),class:"py-3"},[t("div",dWe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=n=>e.mailForm.message=n),maxlength:"4096",style:{"min-height":"100px"},placeholder:"Leave a comment here",id:"floatingTextarea",required:""},null,512),[[k,e.mailForm.message]]),t("label",cWe,[_("Текстовое содержимое рассылки "),e.mailForm.message?(l(),a("span",uWe,p((e.mailForm.message||"").length)+"/4096 ",1)):u("",!0)])]),t("div",mWe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=n=>e.need_page_images=n),type:"checkbox",id:"need-page-images"},null,512),[[z,e.need_page_images]]),hWe]),e.need_page_images?(l(),a("div",pWe,[_We,(e.mailForm.images||[]).length>0?(l(),a("p",fWe,[_("Выбрано "),t("span",bWe,p(e.mailForm.images.length),1),_(" из "),gWe,_(" изображений. Нажмите "),t("span",{class:"fw-bold text-danger text-decoration-underline cursor-pointer",onClick:o[2]||(o[2]=(...n)=>e.clearImages&&e.clearImages(...n))},"очистить"),_(" чтоб отменить выбор изображений.")])):u("",!0),yWe,t("div",vWe,[t("div",$We,[t("div",kWe,[t("div",wWe,[T(Dt,{"need-photo":!0,selected:e.mailForm.images,onSelect:e.selectImages},null,8,["selected","onSelect"])]),t("div",FWe,[t("button",{type:"button",class:C([{"btn-secondary":(e.mailForm.images||[]).length===0,"btn-primary":(e.mailForm.images||[]).length>0},"btn w-100 p-3"]),"data-bs-dismiss":"modal"},[(e.mailForm.images||[]).length===0?(l(),a("span",CWe,"Закрыть")):u("",!0),(e.mailForm.images||[]).length>0?(l(),a("span",PWe,"Выбрать и закрыть")):u("",!0)],2)])])])])])):u("",!0),t("div",SWe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=n=>e.need_inline_menu=n),type:"checkbox",id:"need-inline-menu"},null,512),[[z,e.need_inline_menu]]),xWe]),e.need_inline_menu?(l(),a("div",jWe,[OWe,TWe,t("div",UWe,[t("div",IWe,[t("div",VWe,[t("div",MWe,[T(ao,{class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])]),AWe])])]),e.showInlineTemplateSelector?u("",!0):(l(),M(si,{key:0,type:"inline",onSave:e.saveInlineKeyboard,"edited-keyboard":e.mailForm.inline_keyboard},null,8,["onSave","edited-keyboard"]))])):u("",!0),EWe,t("div",DWe,[f(t("input",{type:"datetime-local",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=n=>e.mailForm.cron_time=n),required:"",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.mailForm.cron_time]]),zWe]),BWe],32)):u("",!0),LWe,e.load?(l(),M(rWe,{key:1,onSelect:e.selectMailing},null,8,["onSelect"])):(l(),a("div",RWe,WWe))],64))}}),QWe={key:0,class:"container py-3"},GWe={class:"row"},KWe={class:"col-12"},JWe={class:"nav nav-tabs justify-content-center catalog-tabs"},XWe={class:"nav-item"},ZWe=t("i",{class:"fa-solid fa-robot mr-2"},null,-1),eYe={class:"nav-item"},tYe=t("i",{class:"fa-regular fa-message mr-2"},null,-1),sYe={key:0,class:"col-12"},oYe={key:1,class:"col-12"},iYe={data(){return{tab:0,loading:!1}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})}},Ld=Object.assign(iYe,{__name:"Mailing",setup(s){return(e,o)=>e.getSelf?(l(),a("div",QWe,[t("div",GWe,[t("div",KWe,[t("ul",JWe,[t("li",XWe,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[0]||(o[0]=n=>e.tab=0),style:{"font-weight":"bold"},"aria-current":"page",href:"javascript:void(0)"},[ZWe,_("В бота")],2)]),t("li",eYe,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[1]||(o[1]=n=>e.tab=1),style:{"font-weight":"bold"},href:"javascript:void(0)"},[tYe,_("В канал")],2)])])]),e.tab===1?(l(),a("div",sYe,[T(DRe)])):u("",!0),e.tab===0?(l(),a("div",oYe,[T(HWe)])):u("",!0)])])):u("",!0)}}),nYe=Object.freeze(Object.defineProperty({__proto__:null,default:Ld},Symbol.toStringTag,{value:"Module"})),lYe=t("p",{class:"my-3"},"Введите номер телефона (или фрагмент) пользователя или его Ф.И.О.",-1),aYe={class:"form-floating mb-3"},rYe=t("label",{for:"floatingInput"},"Кого ищем?",-1),dYe={class:"d-flex w-100",style:{"overflow-x":"scroll"}},cYe={class:"scroll d-flex px-2",style:{"min-width":"1300px"}},uYe={class:"form-check form-switch mx-2"},mYe=t("label",{class:"form-check-label",for:"need-admins-checkbox"},"Только администраторы",-1),hYe={class:"form-check form-switch mx-2"},pYe=t("label",{class:"form-check-label",for:"need-with-phone-checkbox"},"Только с телефоном",-1),_Ye={class:"form-check form-switch mx-2"},fYe=t("label",{class:"form-check-label",for:"need-deliveryman"},"Только доставщики",-1),bYe={class:"form-check form-switch mx-2"},gYe=t("label",{class:"form-check-label",for:"need-without-phone-checkbox"},"Только без телефоном",-1),yYe={class:"form-check form-switch mx-2"},vYe=t("label",{class:"form-check-label",for:"need-vip-checkbox"},"Только VIP",-1),$Ye={class:"form-check form-switch mx-2"},kYe=t("label",{class:"form-check-label",for:"need-not-vip-checkbox"},"Только не VIP",-1),wYe=t("button",{type:"submit",class:"btn btn-primary w-100 p-3 my-3"},[t("i",{class:"fa-solid fa-magnifying-glass mr-2"}),_("Искать ")],-1),FYe={class:"w-100 text-center mb-2 small"},CYe={class:"text-primary fw-bold"},PYe={class:"list-group"},SYe=["onClick"],xYe={key:0,class:"fa-solid fa-a text-danger mr-2"},jYe={key:1,class:"fa-solid fa-u text-success mr-2"},OYe={key:2,style:{"font-size":"12px"}},TYe={key:3,style:{"font-size":"12px"}},UYe={style:{"font-size":"12px"}},IYe=ze('<div class="card card-info mb-3"><div class="card-body"><p class="mb-2"><i class="fa-solid fa-a text-danger mr-2"></i> - администратор системы</p><p class="mb-0"><i class="fa-solid fa-u text-success mr-2"></i> - пользователь</p></div></div>',1),VYe=t("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),MYe=t("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),AYe={props:["selectedBotUser"],data(){return{loading:!0,users:null,search:null,need_admins:!1,need_vip:!1,need_not_vip:!1,need_with_phone:!1,need_without_phone:!1,need_deliveryman:!1,users_paginate_object:null}},computed:{...G(["getUsers","getUsersPaginateObject"])},mounted(){this.loadUsers(0)},methods:{downloadBotUsers(){this.$notify({title:"Внимание!",text:"Начался формироваться документ статистики!"}),this.$store.dispatch("downloadBotUsers").then(s=>{this.$notify({title:"Отлично!",text:"Документ успешно сформирован!",type:"success"})}).catch(()=>{this.$notify({title:"Упс...!",text:"Что-то пошло не так...!",type:"error"})})},downloadCashBackHistory(){this.$notify({title:"Внимание!",text:"Начался формироваться документ статистики!"}),this.$store.dispatch("downloadCashBackHistory").then(s=>{this.$notify({title:"Отлично!",text:"Документ успешно сформирован!",type:"success"})}).catch(()=>{this.$notify({title:"Упс...!",text:"Что-то пошло не так...!",type:"error"})})},nextUsers(s){this.loadUsers(s)},selectUser(s){this.$emit("select",s)},loadUsers(s=0){this.loading=!0,this.$store.dispatch("loadUsers",{dataObject:{search:this.search,need_admins:this.need_admins,need_vip:this.need_vip,need_not_vip:this.need_not_vip,need_deliveryman:this.need_deliveryman,need_with_phone:this.need_with_phone,need_without_phone:this.need_without_phone},page:s}).then(e=>{this.loading=!1,this.users=this.getUsers,this.users_paginate_object=this.getUsersPaginateObject,this.$emit("cancel")}).catch(()=>{this.loading=!1})}}},EYe=Object.assign(AYe,{__name:"Users",setup(s){return(e,o)=>(l(),a(v,null,[lYe,t("form",{onSubmit:o[7]||(o[7]=W(n=>e.loadUsers(0),["prevent"]))},[t("div",aYe,[f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.search]]),rYe]),t("div",dYe,[t("div",cYe,[t("div",uYe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=n=>e.need_admins=n),value:"false",type:"checkbox",role:"switch",id:"need-admins-checkbox"},null,512),[[z,e.need_admins]]),mYe]),t("div",hYe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=n=>e.need_with_phone=n),value:"false",type:"checkbox",role:"switch",id:"need-with-phone-checkbox"},null,512),[[z,e.need_with_phone]]),pYe]),t("div",_Ye,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=n=>e.need_deliveryman=n),value:"false",type:"checkbox",role:"switch",id:"need-deliveryman"},null,512),[[z,e.need_deliveryman]]),fYe]),t("div",bYe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=n=>e.need_without_phone=n),value:"false",type:"checkbox",role:"switch",id:"need-without-phone-checkbox"},null,512),[[z,e.need_without_phone]]),gYe]),t("div",yYe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=n=>e.need_vip=n),value:"false",type:"checkbox",role:"switch",id:"need-vip-checkbox"},null,512),[[z,e.need_vip]]),vYe]),t("div",$Ye,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=n=>e.need_not_vip=n),value:"false",type:"checkbox",role:"switch",id:"need-not-vip-checkbox"},null,512),[[z,e.need_not_vip]]),kYe])])]),wYe],32),e.users&&!e.loading?(l(),a(v,{key:0},[t("p",FYe,[_("Найдено пользователей "),t("span",CYe,p(e.users_paginate_object.meta.total),1)]),t("ul",PYe,[(l(!0),a(v,null,O(e.users,(n,i)=>(l(),a("li",{onClick:r=>e.selectUser(n),class:C([{"bg-primary text-white":n.id==(s.selectedBotUser||{id:null}).id},"list-group-item d-flex justify-content-between"])},[t("div",null,[n.is_admin?(l(),a("i",xYe)):(l(),a("i",jYe)),(n.name||n.fio_from_telegram||"Не указано").length>26?(l(),a("span",OYe,p((n.name||n.fio_from_telegram||"Не указано").substring(0,26))+"...",1)):(l(),a("span",TYe,p(n.name||n.fio_from_telegram||"Не указано"),1))]),t("strong",UYe,p(n.phone||"Телефон не указан"),1)],10,SYe))),256))]),e.users_paginate_object?(l(),M(Ce,{key:0,simple:!0,class:"mt-4",onPagination_page:e.nextUsers,pagination:e.users_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64)):u("",!0),IYe,t("a",{href:"javascript:void(0)",onClick:o[8]||(o[8]=(...n)=>e.downloadBotUsers&&e.downloadBotUsers(...n)),class:"btn btn-outline-info w-100 p-3 mb-2"},[VYe,_(" Скачать список пользователей ")]),t("a",{href:"javascript:void(0)",onClick:o[9]||(o[9]=(...n)=>e.downloadCashBackHistory&&e.downloadCashBackHistory(...n)),class:"btn btn-outline-info w-100 p-3 mb-2"},[MYe,_(" Скачать историю начисления ")])],64))}}),DYe={class:"mb-2 d-flex justify-content-between w-100 align-items-center"},zYe={class:"badge bg-primary"},BYe={key:0,style:{"font-size":"12px"}},LYe=t("i",{class:"fa-solid fa-check mr-2 text-success"},null,-1),RYe={key:1,style:{"font-size":"12px"}},NYe=t("i",{class:"fa-solid fa-xmark mr-1 text-danger"},null,-1),qYe=t("i",{class:"fa-solid fa-stopwatch mr-1 text-primary"},null,-1),WYe={key:0},YYe={class:"mb-2"},HYe={class:"fw-bold"},QYe=["disabled"],GYe={key:0,class:"color-white"},KYe={key:1,class:"color-white"},JYe={props:["item"],data(){return{spent_time_counter:0}},mounted(){localStorage.getItem("cashman_order_cashback_add_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_order_cashback_add_counter")||0))},methods:{addCashBack(){this.startTimer(),this.$store.dispatch("addCashBackToOrder",{order_id:this.item.id}).then(()=>{this.item.is_cashback_crediting=!0,this.$notify({title:"Отзывы",text:"Вы успешно начислили CashBack пользователю",type:"success"})}).catch(()=>{this.item.is_cashback_crediting=!1,this.$notify({title:"Отзывы",text:"Ошибка начисления CashBack",type:"error"})})},select(s){return this.$emit("select",s)},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_order_cashback_add_counter",this.spent_time_counter)},1e3)}}},Rd=Object.assign(JYe,{__name:"OrderItem",setup(s){return(e,o)=>(l(),a("div",{onClick:o[2]||(o[2]=n=>e.select(s.item)),style:{"font-weight":"bold"},class:"list-group-item d-flex justify-content-between p-3 align-items-start flex-column","aria-current":"true"},[t("p",DYe,[t("span",zYe,"Заказ #"+p(s.item.id),1),s.item.is_cashback_crediting?(l(),a("span",BYe,[LYe,_(" Баллы начислены")])):(l(),a("span",RYe,[NYe,_(" Баллы не начислены")]))]),t("p",null,[qYe,_(" Время заказа "+p(s.item.created_at),1)]),(s.item.product_details||[]).length>0?(l(),a("ul",WYe,[(l(!0),a(v,null,O(s.item.product_details[0].products,n=>(l(),a("li",null,p(n.title),1))),256))])):u("",!0),t("p",YYe,[_("Цена заказа: "),t("strong",HYe,p(s.item.summary_price)+" руб.",1)]),s.item.review?(l(),M(ro,{key:1,"is-admin":!0,modelValue:s.item.review,"onUpdate:modelValue":o[0]||(o[0]=n=>s.item.review=n)},null,8,["modelValue"])):u("",!0),s.item.is_cashback_crediting?u("",!0):(l(),a("button",{key:2,type:"button",disabled:e.spent_time_counter>0,onClick:o[1]||(o[1]=(...n)=>e.addCashBack&&e.addCashBack(...n)),class:"btn btn-outline-success w-100 mt-2"},[e.spent_time_counter<=0?(l(),a("span",GYe,"Начислить баллы")):(l(),a("span",KYe,"Осталось ждать "+p(e.spent_time_counter||0)+" сек.",1))],8,QYe))]))}}),XYe={class:"row"},ZYe={class:"col-12"},eHe=t("h5",{class:"my-3"},[t("i",{class:"fa-solid fa-list-check mr-1 text-primary"}),_(" Список заказов")],-1),tHe={class:"form-floating mb-2"},sHe=t("label",{for:"floatingInput"},"Поиск по заказам",-1),oHe={class:"col-12"},iHe={class:"nav nav-tabs justify-content-center"},nHe={class:"nav-item"},lHe={class:"nav-item"},aHe={key:0,class:"col-12"},rHe={class:"form-floating my-2"},dHe=t("option",{value:"id"},"По номеру заказа",-1),cHe=t("option",{value:"is_cashback_crediting"},"По начислению CashBack",-1),uHe=t("option",{value:"summary_price"},"По цене заказа",-1),mHe=t("option",{value:"product_count"},"По числу товара в заказе",-1),hHe=t("option",{value:"updated_at"},"По дате добавления",-1),pHe=t("label",{for:"floatingSelect"},"Сортировать заказы по",-1),_He={key:0},fHe=t("i",{class:"fa-solid fa-caret-up"},null,-1),bHe=t("i",{class:"fa-solid fa-caret-down"},null,-1),gHe={key:1,class:"list-group my-2"},yHe={key:2,class:"d-flex flex-column justify-content-center align-items-center",style:{height:"100vh"}},vHe=t("div",{class:"d-flex justify-content-center flex-column align-items-center"},[t("i",{class:"fa-brands fa-shopify mb-3",style:{"font-size":"36px"}}),t("p",null,"Заказов еще нет:(")],-1),$He=[vHe],kHe={key:1,class:"col-12"},wHe=t("hr",null,null,-1),FHe={props:["botUser"],data(){return{search:null,tab:0,sort:{param:"id",direction:"desc"},orders:null,orders_paginate_object:null,reviews:[],reviews_paginate_object:null}},computed:{...G(["getOrders","getOrdersPaginateObject","inCart","getReviews","getReviewsPaginateObject"]),tg(){return window.Telegram.WebApp}},mounted(){this.loadOrders(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.push({name:"MenuV2"})})},methods:{changeDirection(s){this.sort.direction=s,this.loadOrders(0)},loadProductInOrders(s=0){return this.tab=1,this.$store.dispatch("loadReviews",{dataObject:{bot_user_id:this.botUser?this.botUser.id:null},page:s||0,size:20}).then(()=>{this.reviews=this.getReviews,this.reviews_paginate_object=this.getReviewsPaginateObject})},nextOrders(s){this.loadOrders(s)},nextReviews(s){this.loadProductInOrders(s)},loadOrders(s=0){return this.$store.dispatch("loadAllOrders",{dataObject:{search:this.search||null,order_by:this.sort.param||null,direction:this.sort.direction||"asc",bot_user_id:this.botUser?this.botUser.id:null},page:s,size:20}).then(()=>{this.orders=this.getOrders,this.orders_paginate_object=this.getOrdersPaginateObject})}}},Nd=Object.assign(FHe,{__name:"OrderList",setup(s){return(e,o)=>(l(),a("div",XYe,[t("div",ZYe,[eHe,t("div",tHe,[f(t("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.search]]),sHe])]),t("div",oHe,[t("ul",iHe,[t("li",nHe,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[1]||(o[1]=n=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Заказы",2)]),t("li",lHe,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[2]||(o[2]=n=>e.loadProductInOrders(0)),href:"javascript:void(0)"},"Товары",2)])])]),e.tab===0?(l(),a("div",aHe,[t("div",rHe,[f(t("select",{onChange:o[3]||(o[3]=n=>e.loadOrders(0)),"onUpdate:modelValue":o[4]||(o[4]=n=>e.sort.param=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},[dHe,cHe,_(" > "),uHe,mHe,hHe],544),[[Ve,e.sort.param]]),pHe]),e.sort.param!=null?(l(),a("p",_He,[_("Направление сортировки: "),e.sort.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[5]||(o[5]=n=>e.changeDirection("desc"))},[_("по возрастанию "),fHe])):u("",!0),e.sort.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[6]||(o[6]=n=>e.changeDirection("asc"))},[_("по убыванию "),bHe])):u("",!0)])):u("",!0),(e.orders||[]).length>0?(l(),a("div",gHe,[(l(!0),a(v,null,O(e.orders,n=>(l(),M(Rd,{item:n},null,8,["item"]))),256))])):(l(),a("div",yHe,$He)),e.orders_paginate_object?(l(),M(Ce,{key:3,simple:!0,onPagination_page:e.nextOrders,pagination:e.orders_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),e.tab===1?(l(),a("div",kHe,[(l(!0),a(v,null,O(e.reviews,(n,i)=>(l(),a(v,null,[T(ro,{"is-admin":!0,modelValue:e.reviews[i],"onUpdate:modelValue":r=>e.reviews[i]=r,"need-product":!0},null,8,["modelValue","onUpdate:modelValue"]),wHe],64))),256)),e.reviews_paginate_object?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextReviews,pagination:e.reviews_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0)]))}}),CHe={props:["botUser"],data(){return{isEdit:!1,messages:[],botUserForm:{id:null,is_vip:!1,is_admin:!1,is_work:!1,is_manager:!1,is_deliveryman:!1,user_in_location:!1,name:null,phone:null,email:null,birthday:null,age:null,city:null,country:null,address:null,sex:null,is_blocked:null,blocked_message:null}}},watch:{isEdit:function(){this.botUserForm.id=this.botUser.id,this.botUserForm.is_vip=this.botUser.is_vip,this.botUserForm.is_admin=this.botUser.is_admin,this.botUserForm.is_work=this.botUser.is_work,this.botUserForm.is_manager=this.botUser.is_manager,this.botUserForm.is_deliveryman=this.botUser.is_deliveryman,this.botUserForm.user_in_location=this.botUser.user_in_location,this.botUserForm.name=this.botUser.name||this.botUser.username||this.botUser.id,this.botUserForm.phone=this.botUser.phone,this.botUserForm.email=this.botUser.email,this.botUserForm.birthday=this.botUser.birthday||null,this.botUserForm.city=this.botUser.city||null,this.botUserForm.country=this.botUser.country||null,this.botUserForm.address=this.botUser.address||null,this.botUserForm.sex=this.botUser.sex||!1,this.botUserForm.is_blocked=this.botUser.blocked_at!=null,this.botUserForm.blocked_message=this.botUser.blocked_message||null}},methods:{alert(s){this.messages.push(s)},removeMessage(s){this.messages.splice(s,1)},submit(){this.$store.dispatch("updateBotUser",{botUserForm:this.botUserForm}).then(()=>{this.isEdit=!1,this.messages=[],this.botUserForm={id:null,is_vip:!1,is_admin:!1,is_work:!1,is_manager:!1,is_deliveryman:!1,user_in_location:!1,name:null,phone:null,email:null,birthday:null,age:null,city:null,country:null,address:null,sex:null,is_blocked:!1},this.$emit("update"),this.$notify({title:"Редактирование данных",text:"Данные успешно обновлены!",type:"success"})}).catch(()=>{this.$notify({title:"Редактирование данных",text:"Ошибка обновления данных",type:"error"})})}}},PHe={key:0},SHe=t("i",{class:"fa-solid fa-user-pen mr-2"},null,-1),xHe={key:1},jHe=t("i",{class:"fa-solid fa-chevron-up mr-2"},null,-1),OHe={key:0},THe=t("h6",null,"Основные данные пользователя",-1),UHe={class:"table"},IHe=t("thead",null,[t("tr",{class:"bg-gray1-dark"},[t("th",{scope:"col",class:"color-theme"},"Ключ"),t("th",{scope:"col",class:"color-theme"},"Значение")])],-1),VHe=t("th",{scope:"row"},"ID в системе",-1),MHe={class:"font-weight-bold"},AHe=t("th",{scope:"row"},"Дата регистрации",-1),EHe={class:"font-weight-bold"},DHe=t("th",{scope:"row"},"Телеграм ID",-1),zHe={class:"font-weight-bold"},BHe=t("th",{scope:"row"},"Имя",-1),LHe={class:"font-weight-bold"},RHe=t("th",{scope:"row"},"Имя из телеграмма",-1),NHe={class:"font-weight-bold"},qHe=t("th",{scope:"row"},"Домен пользователя",-1),WHe={class:"font-weight-bold"},YHe=t("th",{scope:"row"},"Номер телефона",-1),HHe={class:"font-weight-bold"},QHe=t("th",{scope:"row"},"Возраст",-1),GHe={class:"font-weight-bold"},KHe=t("th",{scope:"row"},"Пол",-1),JHe={class:"font-weight-bold"},XHe=t("th",{scope:"row"},"Страна",-1),ZHe={class:"font-weight-bold"},eQe=t("th",{scope:"row"},"Город",-1),tQe={class:"font-weight-bold"},sQe=t("th",{scope:"row"},"Адрес",-1),oQe={class:"font-weight-bold"},iQe=t("h6",null,"Статусы пользователя",-1),nQe={class:"table"},lQe=t("thead",null,[t("tr",{class:"bg-gray1-dark"},[t("th",{scope:"col",class:"color-theme"},"Ключ"),t("th",{scope:"col",class:"color-theme"},"Значение")])],-1),aQe=t("th",{scope:"row"},"VIP",-1),rQe={class:"font-weight-bold"},dQe=t("th",{scope:"row"},"Администратор",-1),cQe={class:"font-weight-bold"},uQe=t("th",{scope:"row"},"Доставщик",-1),mQe={class:"font-weight-bold"},hQe=t("th",{scope:"row"},"На работе",-1),pQe={class:"font-weight-bold"},_Qe=t("th",{scope:"row"},"В заведении",-1),fQe={class:"font-weight-bold"},bQe={key:0},gQe=t("th",{scope:"row"},"Пользователь заблокирован",-1),yQe={class:"font-weight-bold"},vQe={class:"mb-0"},$Qe={class:"mb-0"},kQe={class:"form-floating mb-2"},wQe=t("label",{for:""},"Ф.И.О пользователя",-1),FQe={class:"form-floating mb-2"},CQe=t("label",{for:""},"Телефон",-1),PQe={class:"form-floating mb-2"},SQe=t("label",{for:""},"Почта",-1),xQe={class:"form-floating mb-2"},jQe=t("label",{for:""},"Адрес",-1),OQe={class:"form-floating mb-2"},TQe=t("label",{for:""},"Дата рождения",-1),UQe={class:"form-floating mb-2"},IQe=t("label",{for:""},"Страна",-1),VQe={class:"form-floating mb-2"},MQe=t("label",{for:""},"Город",-1),AQe={class:"row mb-0"},EQe=t("p",{class:"col-12 my-2"},"Администратор",-1),DQe={class:"col-6"},zQe=t("i",{class:"fa-solid fa-check mr-1"},null,-1),BQe={class:"col-6"},LQe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),RQe={class:"row mb-0"},NQe=t("p",{class:"col-12 my-2"},"VIP",-1),qQe={class:"col-6"},WQe=t("i",{class:"fa-solid fa-check mr-1"},null,-1),YQe={class:"col-6"},HQe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),QQe={class:"row mb-0"},GQe=t("p",{class:"col-12 my-2"},"Доставщик",-1),KQe={class:"col-6"},JQe=t("i",{class:"fa-solid fa-check mr-1"},null,-1),XQe={class:"col-6"},ZQe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),eGe={class:"row mb-0"},tGe=t("p",{class:"col-12 my-2"},"Менеджер",-1),sGe={class:"col-6"},oGe=t("i",{class:"fa-solid fa-check mr-1"},null,-1),iGe={class:"col-6"},nGe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),lGe={class:"row mb-0"},aGe=t("p",{class:"col-12 my-2"},"Работает",-1),rGe={class:"col-6"},dGe=t("i",{class:"fa-solid fa-check mr-1"},null,-1),cGe={class:"col-6"},uGe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),mGe={class:"row mb-0"},hGe=t("p",{class:"col-12 my-2"},"В заведении",-1),pGe={class:"col-6"},_Ge=t("i",{class:"fa-solid fa-check mr-1"},null,-1),fGe={class:"col-6"},bGe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),gGe={class:"row mb-0"},yGe=t("p",{class:"col-12 my-2"},"Блокировка пользователя",-1),vGe={class:"col-6"},$Ge=t("i",{class:"fa-solid fa-check mr-1"},null,-1),kGe={class:"col-6"},wGe=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),FGe={key:0,class:"col-12"},CGe={class:"form-floating my-2"},PGe=t("label",{for:""},"Сообщение блокировки",-1),SGe={class:"row mb-0"},xGe=t("p",{class:"col-12 my-2"},"Пол",-1),jGe={class:"col-6"},OGe=t("i",{class:"fa-solid fa-mars mr-1"},null,-1),TGe={class:"col-6"},UGe=t("i",{class:"fa-solid fa-venus mr-1"},null,-1),IGe={class:"alert alert-small rounded-s shadow-xl bg-red2-dark w-100",role:"alert"},VGe={class:"custom-alert-text"},MGe=["onClick"],AGe=t("nav",{class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},[t("button",{type:"submit",class:"btn btn-primary p-3 my-3 w-100"}," Сохранить ")],-1);function EGe(s,e,o,n,i,r){const d=ie("mask");return l(),a(v,null,[t("a",{href:"javascript:void(0)",onClick:e[0]||(e[0]=c=>i.isEdit=!i.isEdit),class:"btn btn-outline-light text-primary w-100 p-3 mb-2"},[i.isEdit?(l(),a("span",xHe,[jHe,_(" Завершить редактирование")])):(l(),a("span",PHe,[SHe,_(" Редактировать пользователя")]))]),i.isEdit?u("",!0):(l(),a("div",OHe,[THe,t("table",UHe,[IHe,t("tbody",null,[t("tr",null,[VHe,t("td",MHe,p(o.botUser.id||"Не указано"),1)]),t("tr",null,[AHe,t("td",EHe,p(s.$filters.current(o.botUser.created_at)),1)]),t("tr",null,[DHe,t("td",zHe,p(o.botUser.telegram_chat_id||"Не указано"),1)]),t("tr",{class:C({"bg-red1-light":o.botUser.name==null})},[BHe,t("td",LHe,p(o.botUser.name||"Не указано"),1)],2),t("tr",null,[RHe,t("td",NHe,p(o.botUser.fio_from_telegram||"Не указано"),1)]),t("tr",null,[qHe,t("td",WHe,p(o.botUser.username||"Не указано"),1)]),t("tr",{class:C({"bg-red1-light":o.botUser.phone==null})},[YHe,t("td",HHe,p(o.botUser.phone||"Не указано"),1)],2),t("tr",{class:C({"bg-red1-light":o.botUser.age==null})},[QHe,t("td",GHe,p(o.botUser.age||"Не указано"),1)],2),t("tr",null,[KHe,t("td",JHe,p(o.botUser.sex?"Мужчина":"Женщина"),1)]),t("tr",{class:C({"bg-red1-light":o.botUser.country==null})},[XHe,t("td",ZHe,p(o.botUser.country||"Не указано"),1)],2),t("tr",{class:C({"bg-red1-light":o.botUser.city==null})},[eQe,t("td",tQe,p(o.botUser.city||"Не указано"),1)],2),t("tr",{class:C({"bg-red1-light":o.botUser.address==null})},[sQe,t("td",oQe,p(o.botUser.address||"Не указано"),1)],2)])]),iQe,t("table",nQe,[lQe,t("tbody",null,[t("tr",null,[aQe,t("td",rQe,p(o.botUser.is_vip?"Да":"Нет"),1)]),t("tr",null,[dQe,t("td",cQe,p(o.botUser.is_admin?"Да":"Нет"),1)]),t("tr",null,[uQe,t("td",mQe,p(o.botUser.is_deliveryman?"Да":"Нет"),1)]),t("tr",null,[hQe,t("td",pQe,p(o.botUser.is_work?"Да":"Нет"),1)]),t("tr",null,[_Qe,t("td",fQe,p(o.botUser.user_in_location?"Да":"Нет"),1)]),o.botUser.blocked_at?(l(),a("tr",bQe,[gQe,t("td",yQe,[t("p",vQe,p(s.$filters.current(o.botUser.blocked_at)),1),t("p",$Qe,[t("em",null,p(o.botUser.blocked_message??"Без сообщения"),1)])])])):u("",!0)])])])),i.isEdit?(l(),a("form",{key:1,onSubmit:e[27]||(e[27]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[t("div",kQe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=c=>i.botUserForm.name=c),onInvalid:e[2]||(e[2]=c=>r.alert("Вы не указали имя!")),placeholder:"Иванов Иван Иванович",required:""},null,544),[[k,i.botUserForm.name]]),wQe]),t("div",FQe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=c=>i.botUserForm.phone=c),onInvalid:e[4]||(e[4]=c=>r.alert("Вы не указали телефон!")),placeholder:"+7(XXX) XXX-XX-XX",required:""},null,544),[[k,i.botUserForm.phone],[d,"+7(###)###-##-##"]]),CQe]),t("div",PQe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[5]||(e[5]=c=>i.botUserForm.email=c),placeholder:"example@gmail.com"},null,512),[[k,i.botUserForm.email]]),SQe]),t("div",xQe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=c=>i.botUserForm.address=c),placeholder:"ул. Петрова, 123, кв 45"},null,512),[[k,i.botUserForm.address]]),jQe]),t("div",OQe,[f(t("input",{type:"date",class:"form-control","onUpdate:modelValue":e[7]||(e[7]=c=>i.botUserForm.birthday=c),placeholder:"12/01/2023"},null,512),[[k,i.botUserForm.birthday]]),TQe]),t("div",UQe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[8]||(e[8]=c=>i.botUserForm.country=c),placeholder:"Россия"},null,512),[[k,i.botUserForm.country]]),IQe]),t("div",VQe,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":e[9]||(e[9]=c=>i.botUserForm.city=c),placeholder:"Краснодар"},null,512),[[k,i.botUserForm.city]]),MQe]),t("div",AQe,[EQe,t("div",DQe,[t("button",{type:"button",onClick:e[10]||(e[10]=c=>i.botUserForm.is_admin=!0),class:C([{"btn-info":i.botUserForm.is_admin,"btn-outline-secondary":!i.botUserForm.is_admin},"w-100 btn"])},[zQe,_(" Да ")],2)]),t("div",BQe,[t("button",{type:"button",onClick:e[11]||(e[11]=c=>i.botUserForm.is_admin=!1),class:C([{"btn-info":!i.botUserForm.is_admin,"btn-outline-secondary":i.botUserForm.is_admin},"w-100 btn"])},[LQe,_(" Нет ")],2)])]),t("div",RQe,[NQe,t("div",qQe,[t("button",{type:"button",onClick:e[12]||(e[12]=c=>i.botUserForm.is_vip=!0),class:C([{"btn-info":i.botUserForm.is_vip,"btn-outline-secondary":!i.botUserForm.is_vip},"w-100 btn"])},[WQe,_(" Да ")],2)]),t("div",YQe,[t("button",{type:"button",onClick:e[13]||(e[13]=c=>i.botUserForm.is_vip=!1),class:C([{"btn-info":!i.botUserForm.is_vip,"btn-outline-secondary":i.botUserForm.is_vip},"w-100 btn"])},[HQe,_(" Нет ")],2)])]),t("div",QQe,[GQe,t("div",KQe,[t("button",{type:"button",onClick:e[14]||(e[14]=c=>i.botUserForm.is_deliveryman=!0),class:C([{"btn-info":i.botUserForm.is_deliveryman,"btn-outline-secondary":!i.botUserForm.is_deliveryman},"w-100 btn"])},[JQe,_(" Да ")],2)]),t("div",XQe,[t("button",{type:"button",onClick:e[15]||(e[15]=c=>i.botUserForm.is_deliveryman=!1),class:C([{"btn-info":!i.botUserForm.is_deliveryman,"btn-outline-secondary":i.botUserForm.is_deliveryman},"w-100 btn"])},[ZQe,_(" Нет ")],2)])]),t("div",eGe,[tGe,t("div",sGe,[t("button",{type:"button",onClick:e[16]||(e[16]=c=>i.botUserForm.is_manager=!0),class:C([{"btn-info":i.botUserForm.is_manager,"btn-outline-secondary":!i.botUserForm.is_manager},"w-100 btn"])},[oGe,_(" Да ")],2)]),t("div",iGe,[t("button",{type:"button",onClick:e[17]||(e[17]=c=>i.botUserForm.is_manager=!1),class:C([{"btn-info":!i.botUserForm.is_manager,"btn-outline-secondary":i.botUserForm.is_manager},"w-100 btn"])},[nGe,_(" Нет ")],2)])]),t("div",lGe,[aGe,t("div",rGe,[t("button",{type:"button",onClick:e[18]||(e[18]=c=>i.botUserForm.is_work=!0),class:C([{"btn-info":i.botUserForm.is_work,"btn-outline-secondary":!i.botUserForm.is_work},"w-100 btn"])},[dGe,_(" Да ")],2)]),t("div",cGe,[t("button",{type:"button",onClick:e[19]||(e[19]=c=>i.botUserForm.is_work=!1),class:C([{"btn-info":!i.botUserForm.is_work,"btn-outline-secondary":i.botUserForm.is_work},"w-100 btn"])},[uGe,_(" Нет ")],2)])]),t("div",mGe,[hGe,t("div",pGe,[t("button",{type:"button",onClick:e[20]||(e[20]=c=>i.botUserForm.user_in_location=!0),class:C([{"btn-info":i.botUserForm.user_in_location,"btn-outline-secondary":!i.botUserForm.user_in_location},"w-100 btn"])},[_Ge,_(" Да ")],2)]),t("div",fGe,[t("button",{type:"button",onClick:e[21]||(e[21]=c=>i.botUserForm.user_in_location=!1),class:C([{"btn-info":!i.botUserForm.user_in_location,"btn-outline-secondary":i.botUserForm.user_in_location},"w-100 btn"])},[bGe,_(" Нет ")],2)])]),t("div",gGe,[yGe,t("div",vGe,[t("button",{type:"button",onClick:e[22]||(e[22]=c=>i.botUserForm.is_blocked=!0),class:C([{"btn-info":i.botUserForm.is_blocked,"btn-outline-secondary":!i.botUserForm.is_blocked},"w-100 btn"])},[$Ge,_(" Да ")],2)]),t("div",kGe,[t("button",{type:"button",onClick:e[23]||(e[23]=c=>i.botUserForm.is_blocked=!1),class:C([{"btn-info":!i.botUserForm.is_blocked,"btn-outline-secondary":i.botUserForm.is_blocked},"w-100 btn"])},[wGe,_(" Нет ")],2)]),i.botUserForm.is_blocked?(l(),a("div",FGe,[t("div",CGe,[f(t("textarea",{type:"text",class:"form-control","onUpdate:modelValue":e[24]||(e[24]=c=>i.botUserForm.blocked_message=c),style:{"min-height":"150px"},placeholder:"Увы и ах.. "},`
                     `,512),[[k,i.botUserForm.blocked_message]]),PGe])])):u("",!0)]),t("div",SGe,[xGe,t("div",jGe,[t("button",{type:"button",onClick:e[25]||(e[25]=c=>i.botUserForm.sex=!0),class:C([{"btn-info text-white":i.botUserForm.sex,"btn-outline-secondary":!i.botUserForm.sex},"w-100 btn"])},[OGe,_(" Муж ")],2)]),t("div",TGe,[t("button",{type:"button",onClick:e[26]||(e[26]=c=>i.botUserForm.sex=!1),class:C([{"btn-info text-white":!i.botUserForm.sex,"btn-outline-secondary":i.botUserForm.sex},"w-100 btn"])},[UGe,_(" Жен ")],2)])]),i.messages.length>0?(l(!0),a(v,{key:0},O(i.messages,(c,h)=>(l(),a("div",IGe,[t("p",VGe,p(c||"Ошибка"),1),t("button",{type:"button",onClick:g=>r.removeMessage(h),class:"close color-white opacity-60 font-16"},"× ",8,MGe)]))),256)):u("",!0),AGe],32)):u("",!0)],64)}const DGe=oe(CHe,[["render",EGe]]),zGe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-to-user",class:"btn btn-outline-light text-primary w-100 p-3"},"Написать пользователю сообщение",-1),BGe={class:"modal fade",id:"message-to-user",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},LGe={class:"modal-dialog modal-fullscreen"},RGe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),NGe={class:"modal-body"},qGe={class:"mb-3"},WGe={class:"form-floating mb-3"},YGe=t("label",{for:"bill-info",class:"form-label"},"Написать сообщение",-1),HGe={class:"form-check form-switch"},QGe=t("label",{for:"toggle-need-media"},"Нужен медиа контент",-1),GGe={key:0,class:"mb-3"},KGe={class:"modal-footer"},JGe=["disabled"],XGe={props:["botUser"],data(){return{loading:!1,locationForm:{info:null,content:null,content_type:null,need_media_content:!1}}},methods:{acceptUserInLocation(){this.loading=!0,this.$store.dispatch("userMessage",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.locationForm}}).then(s=>{this.loading=!1,this.locationForm.info=null,this.locationForm.content=null,this.locationForm.content_type=null,this.locationForm.need_media_content=!1,this.$notify({title:"Отлично!",text:"Вы отметили пользователя в заведении и отправили ему сообщение",type:"success"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})},goToUserChatHistory(){this.$router.push({name:"AdminChatLog",params:{botUserId:this.botUser.id}})},selectMediaForMessage(s){this.locationForm.content=s.file_id||null,this.locationForm.content_type=s.type||null}}},ZGe=Object.assign(XGe,{__name:"MessageToUser",setup(s){return(e,o)=>(l(),a("div",null,[zGe,t("div",BGe,[t("div",LGe,[t("form",{onSubmit:o[3]||(o[3]=W((...n)=>e.acceptUserInLocation&&e.acceptUserInLocation(...n),["prevent"])),class:"modal-content"},[RGe,t("div",NGe,[t("div",qGe,[t("a",{href:"javascript:void(0)",class:"btn btn-link w-100",onClick:o[0]||(o[0]=(...n)=>e.goToUserChatHistory&&e.goToUserChatHistory(...n))},"Глянуть историю переписки с пользователем")]),t("div",WGe,[f(t("textarea",{class:"form-control",placeholder:"Текст сообщения","onUpdate:modelValue":o[1]||(o[1]=n=>e.locationForm.info=n),id:"bill-info",style:{"min-height":"200px"},required:""},null,512),[[k,e.locationForm.info]]),YGe]),t("div",HGe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=n=>e.locationForm.need_media_content=n),type:"checkbox",role:"switch",id:"toggle-need-media"},null,512),[[z,e.locationForm.need_media_content]]),QGe]),e.locationForm.need_media_content?(l(),a("div",GGe,[T(Dt,{"need-audio":!0,"need-video-note":!0,"need-video":!0,"need-photo":!0,onSelect:e.selectMediaForMessage,selected:[e.locationForm.content]},null,8,["onSelect","selected"])])):u("",!0)]),t("div",KGe,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",8,JGe)])],32)])])]))}}),eKe={props:["botUser"],data(){return{loading:!1,cashbackForm:{percent:null,need_custom_percents:!1,category:null,amount:null,info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},methods:{removeCashBack(){if(!this.botUser.telegram_chat_id){this.$notify({title:"Упс!",text:"Вы должны выбрать пользователя!",type:"error"});return}this.loading=!0,this.$store.dispatch("removeCashBack",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.cashbackForm}}).then(s=>{this.loading=!1,this.cashbackForm.amount=0,this.cashbackForm.info=null,this.$notify({title:"Отлично!",text:"Вы успешно списали кэшбэк",type:"success"}),this.$emit("callback")}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},tKe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#remove-cashback-from-user",class:"btn btn-outline-light text-primary w-100 p-3"},"Списать CashBack",-1),sKe={class:"modal fade",id:"remove-cashback-from-user",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},oKe={class:"modal-dialog modal-fullscreen"},iKe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),nKe={class:"modal-body"},lKe={class:"mb-2"},aKe={key:1},rKe=t("h6",null,"В боте поддерживается списание CashBack по категориям",-1),dKe={class:"form-floating mb-3"},cKe=t("option",{selected:"",value:null},"Общий CashBack",-1),uKe=["value"],mKe=t("label",{for:"floatingSelect"},"Категория CashBack-а",-1),hKe={class:"form-floating mb-3"},pKe=t("label",{for:"bill-amount",class:"form-label"},"Сумма списания CashBack, руб",-1),_Ke={class:"form-floating mb-3"},fKe=t("label",{for:"bill-info",class:"form-label"},"Причина списания",-1),bKe={class:"modal-footer"},gKe=["disabled"];function yKe(s,e,o,n,i,r){return l(),a("div",null,[tKe,t("div",sKe,[t("div",oKe,[t("form",{onSubmit:e[3]||(e[3]=W((...d)=>r.removeCashBack&&r.removeCashBack(...d),["prevent"])),class:"modal-content"},[iKe,t("div",nKe,[t("p",null,[_("У пользователя "),t("strong",null,p(o.botUser.cashBack.amount||0)+" руб",1),_(" CashBack")]),o.botUser.cashBack.subs?(l(!0),a(v,{key:0},O(o.botUser.cashBack.subs,d=>(l(),a("p",lKe,p(d.title||"Без названия")+" - "+p(d.amount||0)+" руб. ",1))),256)):u("",!0),r.currentBot.cashback_config?(l(),a("div",aKe,[rKe,t("div",dKe,[f(t("select",{class:"form-select",id:"floatingSelect","onUpdate:modelValue":e[0]||(e[0]=d=>i.cashbackForm.category=d),required:""},[cKe,(l(!0),a(v,null,O(r.currentBot.cashback_config,d=>(l(),a("option",{value:d.title},p(d.title||"Без названия"),9,uKe))),256))],512),[[Ve,i.cashbackForm.category]]),mKe])])):u("",!0),t("div",hKe,[f(t("input",{type:"number",min:"0",class:"form-control",id:"bill-amount","onUpdate:modelValue":e[1]||(e[1]=d=>i.cashbackForm.amount=d),placeholder:"Сумма",required:""},null,512),[[k,i.cashbackForm.amount]]),pKe]),t("div",_Ke,[f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":e[2]||(e[2]=d=>i.cashbackForm.info=d),style:{"min-height":"200px"},id:"bill-info",rows:"3",required:""},null,512),[[k,i.cashbackForm.info]]),fKe])]),t("div",bKe,[t("button",{disabled:i.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",8,gKe)])],32)])])])}const vKe=oe(eKe,[["render",yKe]]),$Ke={props:["botUser"],data(){return{loading:!1,cashbackForm:{percent:null,need_custom_percents:!1,need_user_review:!1,category:null,amount:null,message:null,info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot},"cashbackForm.need_custom_percents":function(){this.cashbackForm.need_custom_percents||(this.cashbackForm.percent=null,this.cashbackForm.amount=null)}},methods:{addCashBack(){if(!this.botUser.telegram_chat_id){this.$notify({title:"Упс",text:"Вы должны выбрать пользователя!",type:"error"});return}this.loading=!0,this.$store.dispatch("addCashBack",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.cashbackForm}}).then(s=>{this.loading=!1,this.cashbackForm.amount=0,this.cashbackForm.info=null,this.cashbackForm.message=null,this.$emit("callback"),this.$notify({title:"Отлично!",text:"Вы успешно начислили кэшбэк",type:"success"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},kKe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#add-cashback-to-user",class:"btn btn-outline-light text-primary w-100 p-3"},"Начислить Баллы",-1),wKe={class:"modal fade",id:"add-cashback-to-user",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},FKe={class:"modal-dialog modal-fullscreen"},CKe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),PKe={class:"modal-body"},SKe={class:"mb-2"},xKe={class:"mb-2"},jKe={key:1},OKe=t("h6",null,"В боте поддерживается начисление CashBack по категориям",-1),TKe={class:"form-floating"},UKe=t("option",{selected:"",value:null},"Общий CashBack",-1),IKe=["value"],VKe=t("label",{for:"floatingSelect"},"Категории CashBack",-1),MKe=t("em",null,"Начисления по реферальной системе происходя только для общего CashBack-а. CashBack-по категориям не суммируется с общим и отображается пользователю отдельно.",-1),AKe={class:"form-check my-3"},EKe=t("label",{class:"form-check-label",for:"need_user_review"}," Нужен отзыв от пользователя ",-1),DKe={class:"form-check my-3"},zKe=t("label",{class:"form-check-label",for:"need_custom_cashback_amount"}," Нужен нестандартный % CashBack ",-1),BKe={key:2,class:"form-floating mb-3"},LKe=t("label",{for:"bill-percent",class:"form-label"},"% CashBack-а",-1),RKe={class:"form-floating mb-3"},NKe=t("label",{for:"bill-amount",class:"form-label"},"Сумма в чеке, руб",-1),qKe={class:"form-floating mb-3"},WKe=t("label",{for:"bill-info",class:"form-label"},"Информация о чеке, номер",-1),YKe={class:"form-floating mb-3"},HKe=t("label",{for:"message",class:"form-label"},"Комментарий для пользователя",-1),QKe={class:"modal-footer"},GKe=["disabled"];function KKe(s,e,o,n,i,r){return l(),a("div",null,[kKe,t("div",wKe,[t("div",FKe,[t("form",{onSubmit:e[7]||(e[7]=W((...d)=>r.addCashBack&&r.addCashBack(...d),["prevent"])),class:"modal-content"},[CKe,t("div",PKe,[t("p",SKe,[_("У пользователя "),t("strong",null,p(o.botUser.cashBack.amount||0)+" руб",1),_(" CashBack")]),o.botUser.cashBack.subs?(l(!0),a(v,{key:0},O(o.botUser.cashBack.subs,d=>(l(),a("p",xKe,p(d.title||"Без названия")+" - "+p(d.amount||0)+" руб. ",1))),256)):u("",!0),r.currentBot.cashback_config?(l(),a("div",jKe,[OKe,t("div",TKe,[f(t("select",{class:"form-control mb-2","onUpdate:modelValue":e[0]||(e[0]=d=>i.cashbackForm.category=d),required:""},[UKe,(l(!0),a(v,null,O(r.currentBot.cashback_config,d=>(l(),a("option",{value:d.title},p(d.title||"Без названия"),9,IKe))),256))],512),[[Ve,i.cashbackForm.category]]),VKe]),MKe])):u("",!0),t("div",AKe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=d=>i.cashbackForm.need_user_review=d),type:"checkbox",value:"",id:"need_user_review"},null,512),[[z,i.cashbackForm.need_user_review]]),EKe]),t("div",DKe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[2]||(e[2]=d=>i.cashbackForm.need_custom_percents=d),type:"checkbox",value:"",id:"need_custom_cashback_amount"},null,512),[[z,i.cashbackForm.need_custom_percents]]),zKe]),i.cashbackForm.need_custom_percents?(l(),a("div",BKe,[f(t("input",{type:"number",min:"0",class:"form-control",id:"bill-percent","onUpdate:modelValue":e[3]||(e[3]=d=>i.cashbackForm.percent=d),placeholder:"Значите %",required:""},null,512),[[k,i.cashbackForm.percent]]),LKe])):u("",!0),t("div",RKe,[f(t("input",{type:"number",min:"0",class:"form-control",id:"bill-amount","onUpdate:modelValue":e[4]||(e[4]=d=>i.cashbackForm.amount=d),placeholder:"Сумма",required:""},null,512),[[k,i.cashbackForm.amount]]),NKe]),t("div",qKe,[f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":e[5]||(e[5]=d=>i.cashbackForm.info=d),id:"bill-info",rows:"3",required:""},null,512),[[k,i.cashbackForm.info]]),WKe]),t("div",YKe,[f(t("textarea",{class:"form-control",placeholder:"Комментарий","onUpdate:modelValue":e[6]||(e[6]=d=>i.cashbackForm.message=d),id:"message",style:{"min-height":"150px"}},null,512),[[k,i.cashbackForm.message]]),HKe])]),t("div",QKe,[t("button",{disabled:i.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",8,GKe)])],32)])])])}const JKe=oe($Ke,[["render",KKe]]),XKe={props:["botUser"],data(){return{silent_mode:!1,loading:!1,adminForm:{info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},methods:{changeStatus(){this.loading=!0,this.$store.dispatch(this.botUser.is_admin?"removeAdmin":"addAdmin",{dataObject:{silent_mode:this.silent_mode,user_telegram_chat_id:this.botUser.telegram_chat_id,...this.adminForm}}).then(s=>{this.loading=!1,this.adminForm.info=null,this.$emit("callback"),this.$notify({title:"Отлично!",text:this.botUser.is_admin?"Вы успешно разжаловали администратора до уровня пользователя":"Вы успешно назначили пользователя администратором",type:"success"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},ZKe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#change-admin-status",class:"btn btn-outline-light text-primary w-100 p-3"},"Изменить статус администратора ",-1),eJe={class:"modal fade",id:"change-admin-status",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},tJe={class:"modal-dialog modal-fullscreen"},sJe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),oJe={class:"modal-body"},iJe={class:"form-check form-switch my-2"},nJe=t("label",{class:"form-check-label",for:"switchCheckDefault"}," Тихий режим (не оповещать пользователя о смене статуса) ",-1),lJe={key:0},aJe={key:1},rJe={class:"text-primary fw-bold"},dJe={class:"form-floating mb-3"},cJe={for:"bill-info",class:"form-label"},uJe={key:0},mJe={key:1},hJe={class:"modal-footer"},pJe=["disabled"];function _Je(s,e,o,n,i,r){return l(),a("div",null,[ZKe,t("div",eJe,[t("div",tJe,[t("form",{onSubmit:e[2]||(e[2]=W((...d)=>r.changeStatus&&r.changeStatus(...d),["prevent"])),class:"modal-content"},[sJe,t("div",oJe,[t("div",iJe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=d=>i.silent_mode=d),type:"checkbox",role:"switch",id:"switchCheckDefault"},null,512),[[z,i.silent_mode]]),nJe]),t("p",null,[_(" Вы хотите "),o.botUser.is_admin?(l(),a("span",lJe,"удалить из администраторов")):(l(),a("span",aJe,"назначить администратором")),_(" пользователя "),t("strong",rJe,p(o.botUser.fio_from_telegram||o.botUser.telegram_chat_id||"-"),1)]),t("div",dJe,[f(t("textarea",{class:"form-control",placeholder:"Информация","onUpdate:modelValue":e[1]||(e[1]=d=>i.adminForm.info=d),style:{"min-height":"300px"},id:"bill-info",required:""},null,512),[[k,i.adminForm.info]]),t("label",cJe,[o.botUser.is_admin?(l(),a("span",uJe,"Причина удаления администратора")):(l(),a("span",mJe,"Причина добавления администратора"))])])]),t("div",hJe,[t("button",{disabled:i.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Подтвердить ",8,pJe)])],32)])])])}const fJe=oe(XKe,[["render",_Je]]),bJe={props:["botUser"],data(){return{loading:!1,userDataForm:{info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},methods:{requestUserMenu(){this.loading=!0,this.$store.dispatch("requestRefreshMenu",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.userDataForm}}).then(s=>{this.loading=!1,this.userDataForm.info=null,this.$notify({title:"Отлично!",text:"Вы успешно отправили запрос на обновление меню!",type:"error"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},gJe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#refresh-user-menu",class:"btn btn-outline-light text-primary w-100 p-3"},"Обновить меню пользователю",-1),yJe={class:"modal fade",id:"refresh-user-menu",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},vJe={class:"modal-dialog modal-fullscreen"},$Je=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),kJe={class:"modal-body"},wJe={class:"form-floating mb-3"},FJe=t("label",{for:"bill-info",class:"form-label"},"Комментарий",-1),CJe={class:"modal-footer"},PJe=["disabled"];function SJe(s,e,o,n,i,r){return l(),a("div",null,[gJe,t("div",yJe,[t("div",vJe,[t("form",{onSubmit:e[1]||(e[1]=W((...d)=>r.requestUserMenu&&r.requestUserMenu(...d),["prevent"])),class:"modal-content"},[$Je,t("div",kJe,[t("div",wJe,[f(t("textarea",{class:"form-control",placeholder:"Комментарий к запросу","onUpdate:modelValue":e[0]||(e[0]=d=>i.userDataForm.info=d),id:"bill-info",style:{"min-height":"200px"},required:""},null,512),[[k,i.userDataForm.info]]),FJe])]),t("div",CJe,[t("button",{disabled:i.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",8,PJe)])],32)])])])}const xJe=oe(bJe,[["render",SJe]]),jJe={props:["botUser"],data(){return{loading:!1,userDataForm:{info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},methods:{requestUserData(){this.loading=!0,this.$store.dispatch("requestUserData",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.userDataForm}}).then(s=>{this.loading=!1,this.userDataForm.info=null,this.$notify({title:"Отлично!",text:"Вы отправили запрос на заполнение пользовательских данных",type:"success"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},OJe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#request-user-profile",class:"btn btn-outline-light text-primary w-100 p-3"},"Запросить заполнение анкеты",-1),TJe={class:"modal fade",id:"request-user-profile",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},UJe={class:"modal-dialog modal-fullscreen"},IJe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),VJe={class:"modal-body"},MJe={class:"form-floating mb-3"},AJe=t("label",{for:"bill-info",class:"form-label"},"Комментарий",-1),EJe={class:"modal-footer"},DJe=["disabled"];function zJe(s,e,o,n,i,r){return l(),a("div",null,[OJe,t("div",TJe,[t("div",UJe,[t("form",{onSubmit:e[1]||(e[1]=W((...d)=>r.requestUserData&&r.requestUserData(...d),["prevent"])),class:"modal-content"},[IJe,t("div",VJe,[t("div",MJe,[f(t("textarea",{class:"form-control",placeholder:"Комментарий к запросу","onUpdate:modelValue":e[0]||(e[0]=d=>i.userDataForm.info=d),style:{"min-height":"150px"},id:"bill-info",rows:"3",required:""},null,512),[[k,i.userDataForm.info]]),AJe])]),t("div",EJe,[t("button",{disabled:i.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",8,DJe)])],32)])])])}const BJe=oe(jJe,[["render",zJe]]),LJe={props:["botUser"],data(){return{loading:!1,invoiceForm:{amount:100,info:null}}},computed:{...G(["getSelf","getCashBack","getCashBackPaginateObject"]),currentBot(){return window.currentBot}},methods:{sendInvoice(){this.loading=!0,this.$store.dispatch("sendInvoice",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.invoiceForm}}).then(s=>{this.loading=!1,this.invoiceForm.info=null,this.$emit("callback"),this.$notify({title:"Отлично!",text:"Вы успешно отправили пользователю запрос на оплату",type:"success"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},RJe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#request-invoice",class:"btn btn-outline-light text-primary w-100 p-3"},"Запрос на оплату",-1),NJe={class:"modal fade",id:"request-invoice",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},qJe={class:"modal-dialog modal-fullscreen"},WJe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),YJe={class:"modal-body"},HJe={class:"form-floating mb-3"},QJe=t("label",{for:"bill-amount",class:"form-label"},"Значение на оплату, руб",-1),GJe={class:"form-floating mb-3"},KJe=t("label",{for:"bill-info",class:"form-label"},"Введите сообщение для пользователя",-1),JJe={class:"modal-footer"},XJe=["disabled"];function ZJe(s,e,o,n,i,r){return l(),a("div",null,[RJe,t("div",NJe,[t("div",qJe,[t("form",{onSubmit:e[2]||(e[2]=W((...d)=>r.sendInvoice&&r.sendInvoice(...d),["prevent"])),class:"modal-content"},[WJe,t("div",YJe,[t("div",HJe,[f(t("input",{class:"form-control",type:"number",min:"100",step:"50",placeholder:"100","onUpdate:modelValue":e[0]||(e[0]=d=>i.invoiceForm.amount=d),id:"bill-amount",required:""},null,512),[[k,i.invoiceForm.amount]]),QJe]),t("div",GJe,[f(t("textarea",{class:"form-control",placeholder:"Текст запроса","onUpdate:modelValue":e[1]||(e[1]=d=>i.invoiceForm.info=d),id:"bill-info",style:{"min-height":"200px"},required:""},null,512),[[k,i.invoiceForm.info]]),KJe])]),t("div",JJe,[t("button",{disabled:i.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить запрос ",8,XJe)])],32)])])])}const eXe=oe(LJe,[["render",ZJe]]),tXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#request-user-review",class:"btn btn-outline-light text-primary w-100 p-3"},"Запросить оценку",-1),sXe={class:"modal fade",id:"request-user-review",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},oXe={class:"modal-dialog modal-fullscreen"},iXe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Админ. панель"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),nXe={class:"modal-body"},lXe={class:"form-floating mb-3"},aXe=t("label",{for:"bill-info",class:"form-label"},"Сообщение для пользователя",-1),rXe={class:"modal-footer"},dXe=["disabled"],cXe={props:["botUser"],data(){return{loading:!1,reviewForm:{message:null}}},methods:{requestReview(){this.loading=!0,this.$store.dispatch("userReviewRequest",{dataObject:{telegram_chat_id:this.botUser.telegram_chat_id,...this.reviewForm}}).then(s=>{this.loading=!1,this.reviewForm.message=null,this.$notify({title:"Отлично!",text:"Вы запросили у пользователя оставить отзыв!",type:"success"})}).catch(()=>{this.loading=!1,this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})}}},uXe=Object.assign(cXe,{__name:"RequestReview",setup(s){return(e,o)=>(l(),a("div",null,[tXe,t("div",sXe,[t("div",oXe,[t("form",{onSubmit:o[1]||(o[1]=W((...n)=>e.requestReview&&e.requestReview(...n),["prevent"])),class:"modal-content"},[iXe,t("div",nXe,[t("div",lXe,[f(t("textarea",{class:"form-control",placeholder:"Текст сообщения","onUpdate:modelValue":o[0]||(o[0]=n=>e.reviewForm.message=n),id:"bill-info",style:{"min-height":"200px"}},null,512),[[k,e.reviewForm.message]]),aXe])]),t("div",rXe,[t("button",{disabled:e.loading,type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",8,dXe)])],32)])])]))}});const mXe=t("div",{class:"divider mb-3"},"Управление заказом",-1),hXe={class:"text-center my-3 fw-bold text-primary d-flex justify-content-between"},pXe=t("a",{"data-bs-toggle":"modal","data-bs-target":"#order-details",href:"javascript:void(0)"},[t("i",{class:"fa-solid fa-circle-info"}),_(" Детали заказа")],-1),_Xe={key:0,class:"alert alert-danger"},fXe=t("strong",{class:"fw-bold"},"Внимание!",-1),bXe={class:"btn-group mb-2 w-100",role:"group"},gXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-settings",class:"btn btn-outline-primary w-auto d-flex justify-content-center align-items-center",style:{"max-width":"60px"},"aria-expanded":"false"},[t("i",{class:"fa-solid fa-cogs"})],-1),yXe={class:"btn-group mb-2 w-100",role:"group"},vXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-settings",class:"btn btn-outline-primary w-auto d-flex justify-content-center align-items-center",style:{"max-width":"60px"},"aria-expanded":"false"},[t("i",{class:"fa-solid fa-cogs"})],-1),$Xe={class:"btn-group mb-2 w-100",role:"group"},kXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-settings",class:"btn btn-outline-primary w-auto d-flex justify-content-center align-items-center",style:{"max-width":"60px"},"aria-expanded":"false"},[t("i",{class:"fa-solid fa-cogs"})],-1),wXe={class:"btn-group mb-2 w-100",role:"group"},FXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-settings",class:"btn btn-outline-primary w-auto d-flex justify-content-center align-items-center",style:{"max-width":"60px"},"aria-expanded":"false"},[t("i",{class:"fa-solid fa-cogs"})],-1),CXe=["disabled"],PXe={key:0,class:"color-white"},SXe={key:1,class:"color-white"},xXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-settings",class:"btn btn-outline-primary w-auto d-flex justify-content-center align-items-center",style:{"max-width":"60px"},"aria-expanded":"false"},[t("i",{class:"fa-solid fa-cogs"})],-1),jXe=t("div",{class:"divider my-3"},"Самовывоз",-1),OXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#order-self-delivery",class:"btn btn-outline-success p-3 w-100"},[t("i",{class:"fa fa-shopping-bag mr-2","aria-hidden":"true"}),_("Готово (самовывоз) ")],-1),TXe=t("div",{class:"divider my-3"},"Отмена заказа",-1),UXe={class:"btn-group mb-2 w-100",role:"group"},IXe=t("i",{class:"fa-solid fa-triangle-exclamation mr-2"},null,-1),VXe=t("button",{type:"button","data-bs-toggle":"modal","data-bs-target":"#message-settings",class:"btn btn-outline-primary w-auto d-flex justify-content-center align-items-center",style:{"max-width":"60px"},"aria-expanded":"false"},[t("i",{class:"fa-solid fa-cogs"})],-1),MXe=t("i",{class:"fa-solid fa-triangle-exclamation mr-2"},null,-1),AXe={key:1,class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},EXe=t("div",{class:"spinner-border text-primary mt-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),DXe={class:"mb-0"},zXe=t("i",{class:"fa-solid fa-triangle-exclamation text-danger"},null,-1),BXe={class:"modal fade",id:"order-self-delivery","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},LXe={class:"modal-dialog modal-fullscreen"},RXe={class:"modal-content"},NXe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Самовывоз"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),qXe={class:"modal-body"},WXe={class:"form-floating mb-3"},YXe=t("label",{for:"pickup-form-info",class:"form-label"},"Написать сообщение",-1),HXe=t("button",{"data-bs-dismiss":"modal","aria-label":"Close",type:"submit",class:"btn btn-primary w-100 p-3"}," Отправить ",-1),QXe={class:"modal fade",id:"order-details","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},GXe={class:"modal-dialog modal-fullscreen"},KXe={class:"modal-content"},JXe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"staticBackdropLabel"},"Детали заказа"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),XXe={class:"modal-body"},ZXe={class:"modal fade",id:"message-settings",tabindex:"-1","aria-labelledby":"message-settings","aria-hidden":"true"},eZe={class:"modal-dialog modal-fullscreen"},tZe=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Настройка сообщений"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),sZe={class:"modal-body"},oZe={class:"form-floating mb-2"},iZe={for:"floatingTextarea2"},nZe={key:0},lZe={class:"form-floating mb-2"},aZe={for:"floatingTextarea2"},rZe={key:0},dZe={class:"form-floating mb-2"},cZe={for:"floatingTextarea2"},uZe={key:0},mZe={class:"form-floating mb-2"},hZe={for:"floatingTextarea2"},pZe={key:0},_Ze={class:"form-floating mb-2"},fZe={for:"floatingTextarea2"},bZe={key:0},gZe=t("div",{class:"modal-footer"},[t("button",{type:"submit",class:"btn btn-primary w-100 p-3","data-bs-dismiss":"modal"},[t("i",{class:"fa fa-floppy-o mr-2","aria-hidden":"true"}),_(" Сохранить настройки ")])],-1),yZe={props:["orderId","botUser"],data(){return{loaded:!0,order:{status:0},errors:[],spent_time_counter:0,settings:{order_status_0:"Статус вашего заказа установлен как 'Принят в работу'",order_status_1:"Статус вашего заказа изменен на 'Доставляется'",order_status_2:"Статус вашего заказа изменен на 'Завершен'",order_status_3:"Статус вашего заказа изменен на 'Отменен'",order_status_4:"Статус вашего заказа изменен на 'Готов к доставке'",order_status_5:"Статус вашего заказа изменен на 'Передан на кухню'"},pickupForm:{info:null}}},computed:{currentBot(){return window.currentBot}},mounted(){this.orderId&&this.loadOrderById(),this.currentBot.settings&&(this.settings.order_status_0=this.currentBot.settings.order_status_0||"Статус вашего заказа установлен как 'Принят в работу'",this.settings.order_status_1=this.currentBot.settings.order_status_1||"Статус вашего заказа изменен на 'Доставляется'",this.settings.order_status_2=this.currentBot.settings.order_status_2||"Статус вашего заказа изменен на 'Завершен'",this.settings.order_status_3=this.currentBot.settings.order_status_3||"Статус вашего заказа изменен на 'Отменен'",this.settings.order_status_4=this.currentBot.settings.order_status_4||"Статус вашего заказа изменен на 'Готов к доставке'",this.settings.order_status_5=this.currentBot.settings.order_status_5||"Статус вашего заказа изменен на 'Передан на кухню'"),localStorage.getItem("cashman_order_cashback_add_counter")!=null&&this.startTimer(localStorage.getItem("cashman_order_cashback_add_counter")||0)},methods:{sendPickupMessage(){this.$store.dispatch("userMessage",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id,...this.pickupForm}}).then(s=>{this.pickupForm.info=null,this.$notify({title:"Отлично!",text:"Вы отправили пользователю сообщение",type:"success"})}).catch(()=>{this.$notify({title:"Упс...!",text:"Ошибочка...",type:"error"})})},loadOrderById(){this.errors=[],this.loaded=!1,this.$store.dispatch("loadOrderById",{dataObject:{order_id:this.orderId}}).then(s=>{this.order=s.data,this.loaded=!0}).catch(()=>{this.$notify({title:"Упс...!",text:"Ошибка загрузки заказа",type:"error"}),this.errors.push(`Заказ #${this.orderId} не найден в системе!`)})},startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_order_cashback_add_counter",this.spent_time_counter)},1e3)},autoCashback(){this.startTimer(),this.$store.dispatch("addCashBackToOrder",{order_id:this.orderId}).then(()=>{this.order.is_cashback_crediting=!0,this.$notify({title:"Отзывы",text:"Вы успешно начислили баллы пользователю",type:"success"})}).catch(()=>{this.order.is_cashback_crediting=!1,this.$notify({title:"Отзывы",text:"Ошибка начисления баллов",type:"error"})})},storeTextConfig(){this.$store.dispatch("storeMessageSettings",{dataObject:{settings:this.settings}}).then(s=>{this.$notify({title:"Отлично!",text:"Данные успешно сохранены",type:"success"})}).catch(()=>{this.$notify({title:"Упс...!",text:"Ошибка сохранения данных",type:"error"})})},declineOrder(){this.$store.dispatch("declineOrder",{dataObject:{order_id:this.orderId}}).then(s=>{this.$notify({title:"Отлично!",text:"Вы отклонили заказ и изменили его статус!",type:"success"})}).catch(()=>{this.$notify({title:"Упс...!",text:"Ошибка смены статуса заказа!",type:"error"})})},changeStatus(s){this.order.status=s,this.$store.dispatch("changeOrderStatus",{dataObject:{order_id:this.orderId,user_telegram_chat_id:this.botUser.telegram_chat_id||null,status:s}}).then(e=>{this.$notify({title:"Отлично!",text:"Вы изменили статус заказа",type:"success"})}).catch(()=>{this.$notify({title:"Упс...!",text:"Ошибка смены статуса заказа!",type:"error"})})}}},vZe=Object.assign(yZe,{__name:"LastOrderHandler",setup(s){return(e,o)=>(l(),a(v,null,[mXe,e.loaded&&e.errors.length===0?(l(),a(v,{key:0},[t("p",hXe,[t("span",null,"Заказ №"+p(s.orderId),1),pXe]),e.order.status===0?(l(),a("div",_Xe,[fXe,_(" Заказ еще не взят в работу! Выберите актуальный статус из предложенных ниже! ")])):u("",!0),t("div",bXe,[t("button",{type:"button",class:C([{"current-step-success text-primary fw-bold":e.order.status===5},"btn btn-outline-primary p-3"]),onClick:o[0]||(o[0]=n=>e.changeStatus(5))},"Принять в работу ",2),gXe]),t("div",yXe,[t("button",{type:"button",class:C([{"current-step text-primary fw-bold":e.order.status===4},"btn btn-outline-primary p-3"]),onClick:o[1]||(o[1]=n=>e.changeStatus(4))},"Передать на доставку ",2),vXe]),t("div",$Xe,[t("button",{type:"button",class:C([{"current-step text-primary fw-bold":e.order.status===1},"btn btn-outline-primary p-3"]),onClick:o[2]||(o[2]=n=>e.changeStatus(1))},"Доставляется ",2),kXe]),t("div",wXe,[t("button",{type:"button",class:C([{"current-step text-primary fw-bold":e.order.status===2},"btn btn-outline-primary p-3"]),onClick:o[3]||(o[3]=n=>e.changeStatus(2))},"Прибыло к заказчику ",2),FXe]),t("div",{class:"btn-group mb-2 w-100",onClick:o[4]||(o[4]=(...n)=>e.autoCashback&&e.autoCashback(...n)),role:"group"},[t("button",{type:"button",disabled:e.order.is_cashback_crediting||e.spent_time_counter>0,class:C([{"current-step-success text-primary fw-bold":e.order.is_cashback_crediting},"btn btn-outline-primary p-3"])},[e.spent_time_counter<=0?(l(),a("span",PXe,"Начислить баллы")):(l(),a("span",SXe,"Осталось ждать "+p(e.spent_time_counter||0)+" сек.",1))],10,CXe),xXe]),jXe,OXe,TXe,t("div",UXe,[t("button",{type:"button",class:C([{"current-step-danger text-danger fw-bold":e.order.status===3},"btn btn-outline-danger p-3"]),onClick:o[5]||(o[5]=n=>e.changeStatus(3))},[IXe,_(" Отклонить заказ ")],2),VXe]),t("button",{type:"button",onClick:o[6]||(o[6]=(...n)=>e.declineOrder&&e.declineOrder(...n)),class:"btn btn-outline-danger p-3 w-100 mb-3"},[MXe,_(" Закрыть заказ без оповещения ")])],64)):(l(),a("div",AXe,[e.errors.length===0?(l(),a(v,{key:0},[_(" Данные о заказе еще не загружены! "),EXe],64)):(l(!0),a(v,{key:1},O(e.errors,n=>(l(),a("p",DXe,[zXe,_(" "+p(n),1)]))),256))])),t("div",BXe,[t("div",LXe,[t("div",RXe,[NXe,t("div",qXe,[t("form",{onSubmit:o[8]||(o[8]=W((...n)=>e.sendPickupMessage&&e.sendPickupMessage(...n),["prevent"]))},[t("div",WXe,[f(t("textarea",{class:"form-control",placeholder:"Текст сообщения","onUpdate:modelValue":o[7]||(o[7]=n=>e.pickupForm.info=n),id:"pickup-form-info",style:{"min-height":"200px"},required:""},null,512),[[k,e.pickupForm.info]]),YXe]),HXe],32)])])])]),t("div",QXe,[t("div",GXe,[t("div",KXe,[JXe,t("div",XXe,[e.loaded?(l(),M(Rd,{key:0,item:e.order},null,8,["item"])):u("",!0)])])])]),t("div",ZXe,[t("div",eZe,[t("form",{class:"modal-content",onSubmit:o[14]||(o[14]=W((...n)=>e.storeTextConfig&&e.storeTextConfig(...n),["prevent"]))},[tZe,t("div",sZe,[t("div",oZe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[9]||(o[9]=n=>e.settings.order_status_5=n),maxlength:"512",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[k,e.settings.order_status_5]]),t("label",iZe,[_("Заказ принят в работу "),(e.settings.order_status_5||"").length>0?(l(),a("span",nZe,p(e.settings.order_status_5.length)+"/512",1)):u("",!0)])]),t("div",lZe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[10]||(o[10]=n=>e.settings.order_status_1=n),maxlength:"512",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[k,e.settings.order_status_1]]),t("label",aZe,[_("Заказ передан на доставку "),(e.settings.order_status_1||"").length>0?(l(),a("span",rZe,p(e.settings.order_status_1.length)+"/512",1)):u("",!0)])]),t("div",dZe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[11]||(o[11]=n=>e.settings.order_status_4=n),maxlength:"512",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[k,e.settings.order_status_4]]),t("label",cZe,[_("Заказ доставляется "),(e.settings.order_status_4||"").length>0?(l(),a("span",uZe,p(e.settings.order_status_4.length)+"/512",1)):u("",!0)])]),t("div",mZe,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[12]||(o[12]=n=>e.settings.order_status_2=n),maxlength:"512",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[k,e.settings.order_status_2]]),t("label",hZe,[_("Заказ был доставлен "),(e.settings.order_status_2||"").length>0?(l(),a("span",pZe,p(e.settings.order_status_2.length)+"/512",1)):u("",!0)])]),t("div",_Ze,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[13]||(o[13]=n=>e.settings.order_status_3=n),maxlength:"512",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[k,e.settings.order_status_3]]),t("label",fZe,[_("Заказ отклонен "),(e.settings.order_status_3||"").length>0?(l(),a("span",bZe,p(e.settings.order_status_3.length)+"/512",1)):u("",!0)])])]),gZe],32)])])],64))}}),$Ze={class:"btn-group w-100 my-3 px-3",style:{"overflow-x":"auto"},role:"group","aria-label":"Basic example"},kZe={key:0},wZe={key:1},FZe={key:2},CZe={key:3},PZe=t("div",{class:"divider"},"Сервисы",-1),SZe={props:["modelValue"],data(){return{work_with_orders:!1,loading:!1,reloadUsers:!1,order_id:null,tab:0,botUser:null,request_telegram_chat_id:null}},computed:{...G(["getSelf"]),currentBot(){return window.currentBot}},mounted(){const s=new URLSearchParams(window.location.search);this.order_id=JSON.parse(s.get("order_id")),this.order_id&&(this.work_with_orders=!0),this.modelValue&&this.$nextTick(()=>{this.botUser=this.modelValue,this.work_with_orders&&(this.tab=2)})},methods:{updateUserInfo(){this.reloadUsers=!0,this.botUser=null,this.request_telegram_chat_id=null,this.$nextTick(()=>{this.reloadUsers=!1})}}},xZe=Object.assign(SZe,{__name:"UserProfileCard",setup(s){return(e,o)=>(l(),a(v,null,[t("div",$Ze,[t("button",{type:"button",class:C([{"btn-primary":e.tab===0,"btn-outline-primary":e.tab!==0},"btn"]),onClick:o[0]||(o[0]=n=>e.tab=0)},"Информация ",2),t("button",{type:"button",onClick:o[1]||(o[1]=n=>e.tab=2),class:C([{"btn-primary":e.tab===2,"btn-outline-primary":e.tab!==2},"btn"])},"Управление ",2),t("button",{type:"button",onClick:o[2]||(o[2]=n=>e.tab=1),class:C([{"btn-primary":e.tab===1,"btn-outline-primary":e.tab!==1},"btn"])},"CashBack ",2),t("button",{type:"button",onClick:o[3]||(o[3]=n=>e.tab=3),class:C([{"btn-primary":e.tab===3,"btn-outline-primary":e.tab!==3},"btn"])},"Заказы ",2)]),e.tab===0?(l(),a("div",kZe,[e.botUser&&!e.reloadUsers?(l(),M(DGe,{key:0,onUpdate:e.updateUserInfo,"bot-user":e.botUser},null,8,["onUpdate","bot-user"])):u("",!0)])):u("",!0),e.tab===1?(l(),a("div",wZe,[e.botUser?(l(),M(Ad,{key:0,"bot-user":e.botUser},null,8,["bot-user"])):u("",!0)])):u("",!0),e.tab===3?(l(),a("div",FZe,[e.botUser?(l(),M(Nd,{key:0,"bot-user":e.botUser},null,8,["bot-user"])):u("",!0)])):u("",!0),e.botUser&&e.tab===2?(l(),a("div",CZe,[e.work_with_orders?(l(),M(vZe,{key:0,class:"mb-2","order-id":e.order_id,"bot-user":e.botUser},null,8,["order-id","bot-user"])):u("",!0),PZe,T(ZGe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(uXe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(vKe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(JKe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(fJe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(xJe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(BJe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"]),T(eXe,{class:"mb-2","bot-user":e.botUser},null,8,["bot-user"])])):u("",!0)],64))}}),jZe={class:"container py-3"},OZe={class:"row"},TZe={class:"col-12"},UZe={class:"nav nav-tabs justify-content-center catalog-tabs"},IZe={class:"nav-item"},VZe=t("i",{class:"fa-solid fa-users mr-2"},null,-1),MZe={class:"nav-item"},AZe=["disabled"],EZe=t("i",{class:"fa-solid fa-user-secret mr-2"},null,-1),DZe={class:"col-12"},zZe={key:0,class:"col-12"},BZe={key:1,class:"alert alert-light mt-2"},LZe={data(){return{loadedUser:!1,tab:0,request_telegram_chat_id:null,selected_bot_user:null}},computed:{...G(["getSelf"]),currentBot(){return window.currentBot},tg(){return window.Telegram.WebApp}},mounted(){this.getSelf&&(this.selected_bot_user=this.getSelf);const s=new URLSearchParams(window.location.search);let e=JSON.parse(s.get("user")),o=s.has("hide_menu")||!1;e&&(this.request_telegram_chat_id=e,this.loadReceiverUserData()),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(n=>n.click()),o?this.tg.close():this.$router.back()})},methods:{updateUserInfo(){this.selected_bot_user=null,this.request_telegram_chat_id=null},cancelUserSelected(){this.request_telegram_chat_id=null,this.selected_bot_user=null,window.scroll(0,0)},selectUser(s){this.request_telegram_chat_id=s.telegram_chat_id,this.loadReceiverUserData()},loadReceiverUserData(){this.loadedUser=!1,this.selected_bot_user=null,this.$store.dispatch("loadReceiverUserData",{dataObject:{user_telegram_chat_id:this.request_telegram_chat_id}}).then(s=>{this.selected_bot_user=s.data,this.request_telegram_chat_id=this.selected_bot_user.telegram_chat_id,this.$nextTick(()=>{this.loadedUser=!0,this.tab=1,window.scroll(0,0)})}).catch(()=>{this.loadedUser=!1})}}},qd=Object.assign(LZe,{__name:"Clients",setup(s){return(e,o)=>(l(),a("div",jZe,[t("div",OZe,[t("div",TZe,[t("ul",UZe,[t("li",IZe,[t("button",{type:"button",class:C(["nav-link",{active:e.tab===0}]),onClick:o[0]||(o[0]=n=>e.tab=0),style:{"font-weight":"bold"},"aria-current":"page"},[VZe,_("Клиенты ")],2)]),t("li",MZe,[t("button",{type:"button",class:C(["nav-link",{active:e.tab===1}]),onClick:o[1]||(o[1]=n=>e.tab=1),disabled:!e.selected_bot_user,style:{"font-weight":"bold"}},[EZe,_("Результат ")],10,AZe)])])]),f(t("div",DZe,[T(EYe,{"selected-bot-user":e.selected_bot_user,onCancel:e.cancelUserSelected,onSelect:e.selectUser},null,8,["selected-bot-user","onCancel","onSelect"])],512),[[tt,e.tab===0]]),e.tab===1?(l(),a("div",zZe,[e.loadedUser?(l(),M(xZe,{key:0,modelValue:e.selected_bot_user,"onUpdate:modelValue":o[2]||(o[2]=n=>e.selected_bot_user=n)},null,8,["modelValue"])):(l(),a("div",BZe," Пользователь еще не выбран! "))])):u("",!0)])]))}}),RZe=Object.freeze(Object.defineProperty({__proto__:null,default:qd},Symbol.toStringTag,{value:"Module"})),NZe={props:["bot","modelValue"],data(){return{sectionForm:{section:null},tab:0,types:[{title:"Готовый продукт",value:1},{title:"Товар на вес",value:2},{title:"Конструктор товара",value:3}],productCategories:[],sections:["Общие характеристики","Дополнительная информация"],photos:[],categories:[],removed_options:[],productForm:{article:null,vk_product_id:null,frontpad_article:null,iiko_article:null,title:null,rating:5,description:null,delivery_terms:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],not_for_delivery:!1,is_weight_product:!1,weight_config:{min:0,max:0,step:0},dimension:{width:0,height:0,length:0,weight:0},categories:[]}}},computed:{...G(["getCategories"])},mounted(){var s,e,o,n,i,r,d,c;this.loadProductCategories(),this.modelValue&&(this.productForm={id:this.modelValue.id||null,article:this.modelValue.article||null,frontpad_article:this.modelValue.frontpad_article||null,iiko_article:this.modelValue.iiko_article||null,vk_product_id:this.modelValue.vk_product_id||null,title:this.modelValue.title||null,rating:this.modelValue.rating||5,description:this.modelValue.description||null,delivery_terms:this.modelValue.delivery_terms||null,images:this.modelValue.images||null,type:this.modelValue.type||1,old_price:this.modelValue.old_price||null,current_price:this.modelValue.current_price||null,variants:this.modelValue.variants||null,in_stop_list_at:this.modelValue.in_stop_list_at||null,bot_id:this.modelValue.bot_id||null,options:this.modelValue.options||null,reviews:this.modelValue.reviews||null,not_for_delivery:this.modelValue.not_for_delivery||!1,is_weight_product:this.modelValue.is_weight_product||!1,weight_config:{min:((s=this.modelValue.weight_config)==null?void 0:s.min)||0,max:((e=this.modelValue.weight_config)==null?void 0:e.max)||0,step:((o=this.modelValue.weight_config)==null?void 0:o.step)||0},dimension:{width:((n=this.modelValue.dimension)==null?void 0:n.width)||0,height:((i=this.modelValue.dimension)==null?void 0:i.height)||0,length:((r=this.modelValue.dimension)==null?void 0:r.length)||0,weight:((d=this.modelValue.dimension)==null?void 0:d.weight)||0}},this.options=[],(c=this.modelValue.categories)==null||c.forEach(h=>{this.productCategories.push(h.id)}))},methods:{openInvalidTab(s){let e=document.querySelector(`.accordion-button:nth-child(${s+1})`);e.classList="accordion-button";let o=document.querySelector(`.accordion-collapse:nth-of-type(${s+1})`);o.classList="accordion-collapse collapse show"},prepareCategoryName(s){let e=this.categories.find(o=>o.value===s);return e?e.label:s},removeProduct(){this.$emit("remove-product")},removeCategory(s){let e=this.categories.findIndex(o=>o.id===s)||null;e&&this.categories.splice(e,1),this.$store.dispatch("removeProductCategory",{category_id:s}).then(()=>{this.$notify({title:"Редактор товара",text:"Категория успешно удалена",type:"success"})}).catch(()=>{this.$notify({title:"Редактор товара",text:"Ошибка удаления категории",type:"error"})})},selectCategory(s){this.productCategories||(this.productCategories=[]);let e=this.productCategories.indexOf(s.id);e!==-1?this.productCategories.splice(e,1):this.productCategories.push(s.id)},submit(){let s=new FormData;if(Object.keys(this.productForm).forEach(e=>{const o=this.productForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.removed_options.length>0&&s.append("removed_options",JSON.stringify(this.removed_options)),this.productCategories.length>0&&s.append("categories",JSON.stringify(this.productCategories)),this.$store.dispatch("saveProduct",{productForm:s}).then(e=>{this.load=!0,this.$notify({title:"Редактор товара",text:"Товар успешно сохранен",type:"success"}),this.$emit("callback")}).catch(e=>{this.$notify({title:"Редактор товара",text:"Ошибка сохранения товара",type:"error"}),this.$emit("callback")})},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},loadProductCategories(){this.$store.dispatch("loadCategories").then(()=>{this.categories=this.getCategories})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removeSection(s){this.sections.splice(s,1)},addSection(){this.sections.push(this.sectionForm.section),this.sectionForm.section=null},addOption(){this.productForm.options||(this.productForm.options=[]),this.productForm.options.push({id:null,key:null,value:null,title:null,section:null})},addVariant(){this.productForm.variants||(this.productForm.variants=[]),this.productForm.variants.push({key:null,value:null})},removeVariant(s){this.productForm.variants.splice(s,1)},removeOption(s){this.productForm.options[s].id&&this.removed_options.push(this.productForm.options[s].id),this.productForm.options.splice(s,1)},removeImage(s){this.productForm.images.splice(s,1)},removePhoto(s){this.photos.splice(s,1)},clearForm(){const s={article:null,vk_product_id:null,title:null,description:null,delivery_terms:null,images:[],type:1,old_price:null,current_price:null,variants:[],in_stop_list_at:null,bot_id:null,options:[],reviews:[],categories:[],not_for_delivery:!1,is_weight_product:!1,weight_config:{min:0,max:0,step:0},dimension:{width:0,height:0,length:0,weight:0}};this.photos=[],this.removed_options=[],this.productCategories=[],this.productForm=s}}},qZe={class:"py-3"},WZe={class:"accordion",id:"shop-product-item"},YZe={class:"accordion-item border-0"},HZe=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," Базовая информация о товаре ")],-1),QZe={id:"collapseOne",class:"accordion-collapse collapse show","data-bs-parent":"#shop-product-item"},GZe={class:"accordion-body px-0"},KZe={class:"form-check"},JZe=["id"],XZe=["for"],ZZe={class:"form-check"},eet=t("label",{class:"form-check-label",for:"not_for_delivery"}," Не для доставки ",-1),tet={class:"form-floating mb-2"},set=t("label",{for:"title"},"Название товара",-1),oet={class:"form-floating mb-2"},iet=t("label",{for:"rating"},"Рейтинг товара",-1),net={class:"form-floating mb-2"},aet=t("label",{for:"description"},"Описание товара",-1),ret={class:"form-floating mb-2"},det=t("label",{for:"description"},[t("i",{class:"fa-solid fa-clock text-primary"}),_(" Особенности доставки товара")],-1),cet={class:"form-floating mb-2"},uet=t("label",{for:"article"},"Артикул товара",-1),met={class:"form-floating mb-2"},het=["value"],pet=t("label",{for:"type"},"Тип товара",-1),_et={class:"form-floating mb-2"},fet=t("label",{for:"current-price"},"Актуальная цена, руб",-1),bet={class:"form-floating mb-2"},get=t("label",{for:"old-price"},"Старая цена, руб",-1),yet={class:"form-check mb-2"},vet=["id"],$et=["for"],ket=t("p",{class:"alert alert-light mb-2"}," Оставьте 0, если нет ограничения на максимальный вес ",-1),wet={class:"form-floating mb-2"},Fet=t("label",{for:"weight_config-max"},"Максимально для покупки, грамм",-1),Cet=t("p",{class:"alert alert-light mb-2"}," Оставьте 0, если нет ограничения на минимальный вес ",-1),Pet={class:"form-floating mb-2"},xet=t("label",{for:"weight_config-min"},"Минимально для покупки, грамм",-1),jet=t("p",{class:"alert alert-light mb-2"}," Укажите с каким шагом можно купить данный товар. ",-1),Oet={class:"form-floating mb-2"},Tet=t("label",{for:"weight_config-step"},"Шаг покупки, грамм",-1),Uet={class:"accordion-item border-0"},Iet=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapse-dimension","aria-expanded":"false","aria-controls":"collapseFive"}," Параметры ")],-1),Vet={id:"collapse-dimension",class:"accordion-collapse collapse","data-bs-parent":"#shop-product-item"},Met={class:"accordion-body px-0"},Aet={class:"form-floating mb-2"},Eet=t("label",{for:"vk-product-id"},"Высота, см",-1),Det={class:"form-floating mb-2"},zet=t("label",{for:"vk-product-id"},"Ширина, см",-1),Bet={class:"form-floating mb-2"},Let=t("label",{for:"vk-product-id"},"Длина, см",-1),Ret={class:"form-floating mb-2"},Net=t("label",{for:"vk-product-id"},"Вес, кг",-1),qet={class:"accordion-item border-0"},Wet=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFive","aria-expanded":"false","aria-controls":"collapseFive"}," Изображения к товару ")],-1),Yet={id:"collapseFive",class:"accordion-collapse collapse","data-bs-parent":"#shop-product-item"},Het={class:"accordion-body px-0"},Qet={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},Get={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Ket=t("span",null,"+",-1),Jet={class:"mb-2 img-preview",style:{"margin-right":"10px"}},Xet={class:"remove"},Zet=["onClick"],ett={class:"mb-2 img-preview",style:{"margin-right":"10px"}},ttt={class:"remove"},stt=["onClick"],ott={class:"accordion-item border-0"},itt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-expanded":"false","aria-controls":"collapseTwo"}," Интеграции ")],-1),ntt={id:"collapseTwo",class:"accordion-collapse collapse","data-bs-parent":"#shop-product-item"},ltt={class:"accordion-body px-0"},att={class:"form-floating mb-2"},rtt=t("label",{for:"vk-product-id"},"Идентификатор товара VK",-1),dtt={class:"form-floating mb-2"},ctt=t("label",{for:"iiko"},"Идентификатор в IIKO",-1),utt={class:"form-floating mb-2"},mtt=t("label",{for:"fronpad"},"Идентификатор во FrontPad",-1),htt={class:"accordion-item border-0"},ptt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-expanded":"false","aria-controls":"collapseThree"}," Категории ")],-1),_tt={id:"collapseThree",class:"accordion-collapse collapse","data-bs-parent":"#shop-product-item"},ftt={class:"accordion-body px-0"},btt={key:0,class:"d-flex flex-wrap mb-2"},gtt=["onClick"],ytt={class:"accordion-item border-0"},vtt=t("h2",{class:"accordion-header"},[t("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-expanded":"false","aria-controls":"collapseFour"}," Характеристики ")],-1),$tt={id:"collapseFour",class:"accordion-collapse collapse","data-bs-parent":"#shop-product-item"},ktt={class:"accordion-body px-0"},wtt={class:"input-group mb-3"},Ftt={class:"form-floating"},Ctt=t("label",{for:"floatingInput"},"Название секции",-1),Ptt=t("button",{class:"btn btn-outline-light text-primary"},[t("i",{class:"fa-solid fa-plus"})],-1),Stt={key:0,class:"d-flex flex-wrap"},xtt={class:"badge bg-light p-2 mr-2 mb-1"},jtt=["onClick"],Ott={class:"form-floating mb-2"},Ttt={class:"form-floating mb-2"},Utt=["onUpdate:modelValue","id"],Itt=["for"],Vtt={class:"form-floating mb-2"},Mtt=["onUpdate:modelValue","id"],Att=["for"],Ett={class:"form-floating mb-2"},Dtt=["onUpdate:modelValue","id"],ztt=t("option",{value:null},"Без секции",-1),Btt=["value"],Ltt=["for"],Rtt=t("button",{type:"submit",class:"btn btn-primary w-100 sticky-bottom bottom-0 p-3"}," Сохранить товар ",-1);function Ntt(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",qZe,[t("form",{onSubmit:e[30]||(e[30]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[t("div",WZe,[t("div",YZe,[HZe,t("div",QZe,[t("div",GZe,[t("div",KZe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=c=>i.productForm.in_stop_list_at=c),type:"checkbox",value:"false",id:"in-stop-list-"+(i.productForm.id||"new")},null,8,JZe),[[z,i.productForm.in_stop_list_at]]),t("label",{class:"form-check-label",for:"in-stop-list-"+(i.productForm.id||"new")}," Товар находится в стоп-листе ",8,XZe)]),t("div",ZZe,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=c=>i.productForm.not_for_delivery=c),type:"checkbox",value:"false",id:"not_for_delivery"},null,512),[[z,i.productForm.not_for_delivery]]),eet]),t("div",tet,[f(t("input",{type:"text",onInvalid:e[2]||(e[2]=c=>r.openInvalidTab(0)),"onUpdate:modelValue":e[3]||(e[3]=c=>i.productForm.title=c),class:"form-control",id:"title",placeholder:"Название",required:""},null,544),[[k,i.productForm.title]]),set]),t("div",oet,[f(t("input",{type:"number",min:"0",max:"5",step:"0.5","onUpdate:modelValue":e[4]||(e[4]=c=>i.productForm.rating=c),class:"form-control",id:"rating",placeholder:"Рейтинг товара"},null,512),[[k,i.productForm.rating]]),iet]),t("div",net,[f(t("textarea",{class:"form-control font-12","onUpdate:modelValue":e[5]||(e[5]=c=>i.productForm.description=c),style:{"min-height":"200px"},onInvalid:e[6]||(e[6]=c=>r.openInvalidTab(0)),placeholder:"Напишите полное описание товара",id:"description"},`

                                `,544),[[k,i.productForm.description]]),aet]),t("div",ret,[f(t("textarea",{class:"form-control font-12","onUpdate:modelValue":e[7]||(e[7]=c=>i.productForm.delivery_terms=c),style:{"min-height":"200px"},onInvalid:e[8]||(e[8]=c=>r.openInvalidTab(0)),placeholder:"Укажите особенности доставки товара",id:"delivery_terms"},`

                                `,544),[[k,i.productForm.delivery_terms]]),det]),t("div",cet,[f(t("input",{type:"text","onUpdate:modelValue":e[9]||(e[9]=c=>i.productForm.article=c),class:"form-control",id:"article",placeholder:"Название артикула"},null,512),[[k,i.productForm.article]]),uet]),t("div",met,[f(t("select",{class:"form-select font-12","onUpdate:modelValue":e[10]||(e[10]=c=>i.productForm.type=c),id:"type","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(i.types,(c,h)=>(l(),a("option",{value:c.value},p(c.title),9,het))),256))],512),[[Ve,i.productForm.type]]),pet]),t("div",_et,[f(t("input",{type:"number",onInvalid:e[11]||(e[11]=c=>r.openInvalidTab(0)),"onUpdate:modelValue":e[12]||(e[12]=c=>i.productForm.current_price=c),class:"form-control",id:"current-price",placeholder:"0 руб.",required:""},null,544),[[k,i.productForm.current_price]]),fet]),t("div",bet,[f(t("input",{type:"number","onUpdate:modelValue":e[13]||(e[13]=c=>i.productForm.old_price=c),class:"form-control",id:"old-price",placeholder:"0 руб"},null,512),[[k,i.productForm.old_price]]),get]),t("div",yet,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[14]||(e[14]=c=>i.productForm.is_weight_product=c),type:"checkbox",value:"false",id:"is_weight_product-"+(i.productForm.id||"new")},null,8,vet),[[z,i.productForm.is_weight_product]]),t("label",{class:"form-check-label",for:"is_weight_product-"+(i.productForm.id||"new")},[t("span",{class:C({"fw-bold text-primary":!i.productForm.is_weight_product})},"Поштучный",2),_(" \\ "),t("span",{class:C({"fw-bold text-primary":i.productForm.is_weight_product})},"весовой",2)],8,$et)]),i.productForm.is_weight_product?(l(),a(v,{key:0},[ket,t("div",wet,[f(t("input",{type:"number","onUpdate:modelValue":e[15]||(e[15]=c=>i.productForm.weight_config.max=c),class:"form-control",id:"weight_config-max",placeholder:"0 грамм"},null,512),[[k,i.productForm.weight_config.max]]),Fet]),Cet,t("div",Pet,[f(t("input",{type:"number","onUpdate:modelValue":e[16]||(e[16]=c=>i.productForm.weight_config.min=c),class:"form-control",id:"weight_config-min",placeholder:"0 грамм"},null,512),[[k,i.productForm.weight_config.min]]),xet]),jet,t("div",Oet,[f(t("input",{type:"number","onUpdate:modelValue":e[17]||(e[17]=c=>i.productForm.weight_config.step=c),class:"form-control",id:"weight_config-step",placeholder:"0 грамм"},null,512),[[k,i.productForm.weight_config.step]]),Tet])],64)):u("",!0)])])]),t("div",Uet,[Iet,t("div",Vet,[t("div",Met,[t("div",Aet,[f(t("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=c=>i.productForm.dimension.height=c),class:"form-control",id:"vk-product-id",placeholder:"Идентификатор"},null,512),[[k,i.productForm.dimension.height]]),Eet]),t("div",Det,[f(t("input",{type:"text","onUpdate:modelValue":e[19]||(e[19]=c=>i.productForm.dimension.width=c),class:"form-control",id:"vk-product-id",placeholder:"Идентификатор"},null,512),[[k,i.productForm.dimension.width]]),zet]),t("div",Bet,[f(t("input",{type:"text","onUpdate:modelValue":e[20]||(e[20]=c=>i.productForm.dimension.length=c),class:"form-control",id:"vk-product-id",placeholder:"Идентификатор"},null,512),[[k,i.productForm.dimension.length]]),Let]),t("div",Ret,[f(t("input",{type:"text","onUpdate:modelValue":e[21]||(e[21]=c=>i.productForm.dimension.weight=c),class:"form-control",id:"vk-product-id",placeholder:"Идентификатор"},null,512),[[k,i.productForm.dimension.weight]]),Net])])])]),t("div",qet,[Wet,t("div",Yet,[t("div",Het,[t("div",Qet,[t("label",Get,[Ket,t("input",{type:"file",onInvalid:e[22]||(e[22]=c=>r.openInvalidTab(1)),id:"location-photos",multiple:"",accept:"image/*",onChange:e[23]||(e[23]=(...c)=>r.onChangePhotos&&r.onChangePhotos(...c)),style:{display:"none"}},null,32)]),i.productForm.images?(l(!0),a(v,{key:0},O(i.productForm.images,(c,h)=>(l(),a("div",Jet,[f(t("img",null,null,512),[[d,c]]),t("div",Xet,[t("a",{href:"javascript:void(0)",onClick:g=>r.removeImage(h)},"Удалить",8,Zet)])]))),256)):u("",!0),i.photos.length>0?(l(!0),a(v,{key:1},O(i.photos,(c,h)=>(l(),a("div",ett,[f(t("img",null,null,512),[[d,r.getPhoto(c).imageUrl]]),t("div",ttt,[t("a",{href:"javascript:void(0)",onClick:g=>r.removePhoto(h)},"Удалить",8,stt)])]))),256)):u("",!0)])])])]),t("div",ott,[itt,t("div",ntt,[t("div",ltt,[t("div",att,[f(t("input",{type:"text","onUpdate:modelValue":e[24]||(e[24]=c=>i.productForm.vk_product_id=c),class:"form-control",id:"vk-product-id",placeholder:"Идентификатор"},null,512),[[k,i.productForm.vk_product_id]]),rtt]),t("div",dtt,[f(t("input",{type:"text","onUpdate:modelValue":e[25]||(e[25]=c=>i.productForm.iiko_article=c),class:"form-control",id:"iiko",placeholder:"Название артикула IIKO"},null,512),[[k,i.productForm.iiko_article]]),ctt]),t("div",utt,[f(t("input",{type:"text","onUpdate:modelValue":e[26]||(e[26]=c=>i.productForm.frontpad_article=c),class:"form-control",id:"fronpad",placeholder:"Название артикула FrontPad"},null,512),[[k,i.productForm.frontpad_article]]),mtt])])])]),t("div",htt,[ptt,t("div",_tt,[t("div",ftt,[i.categories.length>0?(l(),a("div",btt,[(l(!0),a(v,null,O(i.categories,(c,h)=>(l(),a("span",{onClick:g=>r.selectCategory(c),class:C(["px-3 badge cursor-pointer mr-2 mb-1",{"bg-primary":i.productCategories.indexOf(c.id)!==-1,"bg-light":i.productCategories.indexOf(c.id)===-1}])},p(c.title),11,gtt))),256))])):u("",!0)])])]),t("div",ytt,[vtt,t("div",$tt,[t("div",ktt,[t("form",{onSubmit:e[28]||(e[28]=W((...c)=>r.addSection&&r.addSection(...c),["prevent"])),class:"form-floating mb-2"},[t("div",wtt,[t("div",Ftt,[f(t("input",{type:"text","onUpdate:modelValue":e[27]||(e[27]=c=>i.sectionForm.section=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.sectionForm.section]]),Ctt]),Ptt])],32),i.sections.length>0?(l(),a("div",Stt,[(l(!0),a(v,null,O(i.sections,(c,h)=>(l(),a("span",xtt,[_(p(c)+" ",1),t("i",{onClick:g=>r.removeSection(h),class:"fa-solid fa-trash ml-2 color-red2-dark"},null,8,jtt)]))),256))])):u("",!0),(l(!0),a(v,null,O(i.productForm.options,(c,h)=>(l(),a("div",Ott,[t("div",Ttt,[f(t("input",{type:"text","onUpdate:modelValue":g=>i.productForm.options[h].title=g,class:"form-control",id:"option-title-"+h,placeholder:"Характеристика"},null,8,Utt),[[k,i.productForm.options[h].title]]),t("label",{for:"option-title-"+h,class:"font-12 my-0 w-100 d-flex justify-content-between"}," Название характеристики ",8,Itt)]),t("div",Vtt,[f(t("input",{type:"text","onUpdate:modelValue":g=>i.productForm.options[h].value=g,class:"form-control",id:"option-value-"+h,placeholder:"Значение"},null,8,Mtt),[[k,i.productForm.options[h].value]]),t("label",{for:"option-value-"+h,class:"font-12 my-0"},"Значение характеристики",8,Att)]),t("div",Ett,[f(t("select",{class:"form-select","onUpdate:modelValue":g=>i.productForm.options[h].section=g,id:"option-section-"+h,"aria-label":"Floating label select example"},[ztt,(l(!0),a(v,null,O(i.sections,g=>(l(),a("option",{value:g},p(g),9,Btt))),256))],8,Dtt),[[Ve,i.productForm.options[h].section]]),t("label",{for:"option-section-"+h,class:"font-12 my-0"},"Секция товара",8,Ltt)])]))),256)),t("button",{type:"button",class:"btn btn-outline-primary w-100",onClick:e[29]||(e[29]=(...c)=>r.addOption&&r.addOption(...c))},"Добавить характеристику ")])])])]),Rtt],32)])}const Wn=oe(NZe,[["render",Ntt]]);const qtt={class:"card product-card"},Wtt={class:"rounded-3"},Ytt={class:"controls"},Htt={class:"top d-flex justify-content-between w-100 align-items-center"},Qtt={class:"rating w-100 p-2"},Gtt={class:"text-white fw-bold"},Ktt=t("i",{class:"fa-regular fa-star text-primary mr-1"},null,-1),Jtt={key:0,class:"badge bg-primary mr-2 fw-bold"},Xtt={class:"text-center mb-2",style:{"font-size":"12px"}},Ztt={key:0},est={class:"text-center mb-2"},tst={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},sst={key:0,class:"card-footer"},ost={props:["item","displayType"],data(){return{showCart:!1}},computed:{...G(["inCart","getReviews","getReviewsPaginateObject"]),currentPrice(){return this.item.current_price/100},oldPrice(){return this.item.old_price/100},checkInCart(){return this.inCart(this.item.id)}},methods:{showProductDetails(){this.$emit("select",this.item)},goToProduct(){this.$router.push({name:"ProductV2",params:{productId:this.item.id}})},repairProduct(){this.$store.dispatch("restoreProduct",this.item.id).then(()=>{this.$notify({title:"Восстановление товара",text:"Товар успешно восстановлен",type:"success"}),this.item.deleted_at=null}).catch(()=>{this.$notify({title:"Восстановление товара",text:"Товар не удалось восстановить",type:"error"})})},incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.item):this.$store.dispatch("incQuantity",this.item.id),this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.item.id):this.$store.dispatch("decQuantity",this.item.id),this.$notify({title:"Добавление товара",text:"Товар успешно удален",type:"success"})}}},ist=Object.assign(ost,{__name:"AdminProductCard",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a("div",qtt,[t("div",{onClick:o[0]||(o[0]=(...i)=>e.showProductDetails&&e.showProductDetails(...i)),class:"img-container"},[f(t("img",Wtt,null,512),[[n,s.item.images[0]]]),t("div",Ytt,[t("div",Htt,[t("div",Qtt,[t("span",Gtt,[Ktt,_(" "+p(s.item.rating||0),1)])]),s.item.old_price>0?(l(),a("span",Jtt,"%")):u("",!0)])])]),t("div",{class:"card-body",onClick:o[1]||(o[1]=(...i)=>e.showProductDetails&&e.showProductDetails(...i))},[t("p",Xtt,[_(p(s.item.title.slice(0,50))+" ",1),s.item.title.length>50?(l(),a("span",Ztt,"...")):u("",!0)]),t("p",est,[_(p(s.item.current_price||0)+"₽ ",1),s.item.old_price>0?(l(),a("span",tst,p(s.item.old_price||0)+"₽",1)):u("",!0)])]),s.item.deleted_at?(l(),a("div",sst,[t("button",{onClick:o[2]||(o[2]=(...i)=>e.repairProduct&&e.repairProduct(...i)),class:"btn btn-primary w-100",type:"button"},"Восстановить")])):u("",!0)])}}}),nst={class:"input-group mb-2"},lst={class:"form-floating"},ast=t("label",{for:"floatingInput"},"Критерии поиска товара",-1),rst=t("button",{class:"btn btn-outline-light text-primary",type:"submit",id:"button-addon2"}," Найти ",-1),dst={class:"form-floating my-2"},cst=ze('<option value="id">По номеру товара</option><option value="title">По названию</option><option value="description">По описанию</option><option value="price">По цене</option><option value="old_price">По наличию скидки</option><option value="rating">По рейтингу</option><option value="updated_at">По дате добавления</option>',7),ust=[cst],mst=t("label",{for:"floatingSelect"},"Сортировать заказы по",-1),hst={key:0},pst=t("i",{class:"fa-solid fa-caret-up"},null,-1),_st=t("i",{class:"fa-solid fa-caret-down"},null,-1),fst={class:"form-check form-switch mb-2"},bst={class:"form-check-label",for:"need_in_stop"},gst={class:"form-check form-switch mb-2"},yst=t("label",{class:"form-check-label",for:"need_removed"},"Отображать удаленные",-1),vst={class:"form-check form-switch mb-2"},$st=t("label",{class:"form-check-label",for:"need_table"},"Отображать в виде таблицы",-1),kst={class:"form-check form-switch mb-2"},wst=t("label",{class:"form-check-label",for:"need_recommendation_config"},"Режим настройки рекомендаций",-1),Fst={key:0},Cst={key:1,class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 g-2"},Pst={class:"col"},Sst={key:2,class:"row"},xst={class:"col-12"},jst={class:"list-group"},Ost={class:"row row-cols-2"},Tst={class:"col"},Ust=["onClick"],Ist={class:"d-flex align-items-center"},Vst={key:0,class:"badge text-bg-primary",style:{"font-size":"8px","min-width":"30px","margin-right":"5px"}},Mst={key:1,class:"badge text-bg-danger",style:{"font-size":"8px","min-width":"30px","margin-right":"5px"}},Ast={key:2,class:"badge text-bg-warning",style:{"font-size":"8px","min-width":"30px","margin-right":"5px"}},Est={class:"col d-flex justify-content-end align-items-center"},Dst={class:"dropdown"},zst=t("button",{class:"btn",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),Bst={class:"dropdown-menu"},Lst={key:0},Rst=["onClick"],Nst={key:1},qst=["onClick"],Wst=["onClick"],Yst=["onClick"],Hst={key:0,class:"row row-cols-1"},Qst={class:"col"},Gst={class:"d-flex mt-2 mb-2 justify-content-center"},Kst={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},Jst=["onChange","name","id"],Xst=["for"],Zst=["onChange","checked","name","id"],eot=["for"],tot=["onChange","checked","name","id"],sot=["for"],oot={class:"modal fade",id:"product-modal-admin-info",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},iot={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen"},not={class:"modal-content"},lot={class:"modal-header"},aot=t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},null,-1),rot={class:"modal-body"},dot={class:"card border-0"},cot={style:{"min-height":"350px","object-fit":"contain"},class:"card-img",alt:"..."},uot={class:"card-img-overlay d-flex flex-column justify-content-between p-0"},mot={class:"shadow-bg"},hot={class:"text-left text-white",style:{"font-weight":"700","line-height":"100%"}},pot={class:"text-left mb-0 text-white"},_ot={class:"text-primary fw-bold"},fot={key:0,class:"row g-2 row-cols-5"},bot={class:"col"},got=["onClick"],yot={class:"p-2"},vot=t("p",{class:"mb-0"},"Рейтинг товара",-1),$ot={class:"d-flex justify-content-between mb-3"},kot={class:"nav nav-tabs justify-content-center"},wot={class:"text-justify py-2 fst-italic"},Fot={key:0},Cot={class:"list-group w-100 py-2 rounded-0"},Pot={class:"list-group-item"},Sot={key:1,class:"alert alert-light my-2 d-flex justify-content-center align-items-center",role:"alert"},xot=t("div",{class:"d-flex justify-content-center align-items-center flex-column"},[t("div",{class:"spinner-grow text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Загружаем....")]),t("p",null,"Загружаем отзывы...")],-1),jot=[xot],Oot={key:2,class:"alert alert-light my-2",role:"alert"},Tot={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},Uot={class:"modal fade",id:"add-product-modal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Iot={class:"modal-dialog modal-fullscreen"},Vot={class:"modal-content"},Mot=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Добавление товара"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Aot={class:"modal-body"},Eot={class:"modal fade",id:"restore-modal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Dot={class:"modal-dialog modal-dialog-centered"},zot={class:"modal-content"},Bot={class:"modal-body"},Lot=t("h6",{class:"text-center my-3"},"Восстановить данный товар?",-1),Rot={class:"d-flex justify-content-center"},Not={class:"modal fade",id:"remove-modal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},qot={class:"modal-dialog modal-dialog-centered"},Wot={class:"modal-content"},Yot={class:"modal-body"},Hot=t("h6",{class:"text-center my-3"},"Вы действительно хотите удалить этот товар?",-1),Qot={class:"d-flex justify-content-center"},Got={class:"modal fade",id:"stop-list-modal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Kot={class:"modal-dialog modal-dialog-centered"},Jot={class:"modal-content"},Xot={class:"modal-body"},Zot={class:"text-center my-3"},eit={class:"d-flex justify-content-center"},tit={props:["selected","isSimple"],data(){return{tab:0,operation_text:null,selected_image:null,search:null,products:[],reviews:[],modal:null,accept_stop_list_modal:null,accept_remove_modal:null,accept_restore_modal:null,add_product_modal:null,selected_product:null,paginate:null,review_paginate:null,loading_reviews:!0,need_removed:!1,need_in_stop:!1,need_table:!0,recommendations:[],need_recommendation_config:!1,sort:{param:null,direction:"asc"}}},watch:{need_in_stop:{handler:function(s){this.loadProducts()},deep:!0},need_removed:{handler:function(s){this.loadProducts()},deep:!0}},computed:{...G(["getProducts","getProductsPaginateObject"]),filteredProducts(){if(!this.products||this.products.length===0)return[];if(this.search instanceof Event)return this.products;if(!this.search)return this.products;const s=this.search instanceof Event||!this.search?"":this.search.toLowerCase();return this.products.filter(e=>{var o;return(o=e.title)==null?void 0:o.toLowerCase().includes(s)})},bot(){return window.currentBot},excludes(){var s,e;return((e=(s=this.bot.settings)==null?void 0:s.recommendation)==null?void 0:e.excludes)||[]}},mounted(){var e,o;this.recommendations=((o=(e=this.bot.settings)==null?void 0:e.recommendation)==null?void 0:o.products)||[];const s=localStorage.getItem("cashman_admin_product_list_page_index")!=null?localStorage.getItem("cashman_admin_product_list_page_index"):0;this.loadProducts(s),this.modal=new bootstrap.Modal(document.getElementById("product-modal-admin-info"),{}),this.accept_remove_modal=new bootstrap.Modal(document.getElementById("remove-modal"),{}),this.accept_restore_modal=new bootstrap.Modal(document.getElementById("restore-modal"),{}),this.add_product_modal=new bootstrap.Modal(document.getElementById("add-product-modal"),{}),this.accept_stop_list_modal=new bootstrap.Modal(document.getElementById("stop-list-modal"),{})},methods:{changeStatus(s,e){this.$store.dispatch("changeProductRecommendationStatus",{product_id:s,status:e}).then(o=>{let n=o;this.recommendations=n.products||[]}).catch(()=>{})},openAddProductModal(){this.add_product_modal.show()},openRestoreModal(s){this.selected_product=null,this.$nextTick(()=>{this.selected_product=s,this.accept_restore_modal.show()})},openStopListModal(s,e=null){this.operation_text=null,this.selected_product=null,this.$nextTick(()=>{this.operation_text=e,this.selected_product=s,this.accept_stop_list_modal.show()})},openRemoveModal(s){this.selected_product=null,this.$nextTick(()=>{this.selected_product=s,this.accept_remove_modal.show()})},nextReviews(s){this.loadReviews(s)},changeDirection(s){this.sort.direction=s,this.loadOrders(0)},loadReviews(s=0){return this.loading_reviews=!0,this.$store.dispatch("loadReviewsByProductId",{dataObject:{product_id:this.selected_product.id},page:s,size:30}).then(e=>{this.reviews=this.getReviews,this.review_paginate=this.getReviewsPaginateObject,this.loading_reviews=!1}).catch(()=>{this.loading_reviews=!1})},hideModal(){this.$nextTick(()=>{this.selected_product=null,this.modal.hide()})},hideStopListModal(){this.accept_stop_list_modal.hide()},hideRestoreModal(){this.accept_restore_modal.hide()},hideRemoveModal(){this.accept_remove_modal.hide()},selectProduct(s){this.selected_product=null,this.$nextTick(()=>{this.selected_product=s,this.loadReviews(),this.selected_image=this.selected_product.images[0]||null,this.selected_image=this.selected_product.images[0]||null,this.modal.show()})},nextProducts(s){localStorage.setItem("cashman_admin_product_list_page_index",s),this.loadProducts(s)},loadProducts(s=0){return s==null&&(s=localStorage.getItem("cashman_admin_product_list_page_index")!=null?localStorage.getItem("cashman_admin_product_list_page_index"):0),this.$store.dispatch("loadProducts",{dataObject:{search:this.search,direction:this.sort.direction,order_by:this.sort.param,need_removed:this.need_removed,need_all:!this.need_in_stop},page:s}).then(()=>{this.products=this.getProducts,this.paginate=this.getProductsPaginateObject})},addToStopListProduct(){this.selected_product&&this.$store.dispatch("addToStopListProduct",this.selected_product.id).then(s=>{this.hideStopListModal(),this.loadProducts(),this.$notify({title:"Редактор товара",text:"Товар успешно восстановлен",type:"success"})}).catch(()=>{this.hideStopListModal(),this.loadProducts()})},restoreProduct(){this.selected_product&&this.$store.dispatch("restoreProduct",this.selected_product.id).then(s=>{this.hideRestoreModal(),this.loadProducts(),this.$notify({title:"Редактор товара",text:"Товар успешно восстановлен",type:"success"})}).catch(()=>{this.hideRestoreModal(),this.loadProducts()})},removeProduct(){this.selected_product&&this.$store.dispatch("removeShopProduct",this.selected_product.id).then(s=>{this.hideRemoveModal(),this.loadProducts(),this.$notify({title:"Редактор товара",text:"Товар успешно удален",type:"success"})}).catch(()=>{this.hideRemoveModal(),this.loadProducts()})}}},sit=Object.assign(tit,{__name:"ProductList",setup(s){return(e,o)=>{var i,r;const n=ie("lazy");return l(),a(v,null,[t("form",{onSubmit:o[1]||(o[1]=W(d=>e.loadProducts(0),["prevent"]))},[t("div",nst,[t("div",lst,[f(t("input",{type:"text",class:"form-control border-light",placeholder:"Поиск товара","aria-label":"Поиск товара","onUpdate:modelValue":o[0]||(o[0]=d=>e.search=d),"aria-describedby":"button-addon2"},null,512),[[k,e.search]]),ast]),rst])],32),t("div",dst,[f(t("select",{onChange:o[2]||(o[2]=d=>e.loadProducts(0)),"onUpdate:modelValue":o[3]||(o[3]=d=>e.sort.param=d),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},ust,544),[[Ve,e.sort.param]]),mst]),e.sort.param!=null?(l(),a("p",hst,[_("Направление сортировки: "),e.sort.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[4]||(o[4]=d=>e.changeDirection("desc"))},[_("по возрастанию "),pst])):u("",!0),e.sort.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[5]||(o[5]=d=>e.changeDirection("asc"))},[_("по убыванию "),_st])):u("",!0)])):u("",!0),t("div",fst,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=d=>e.need_in_stop=d),type:"checkbox",role:"switch",id:"need_in_stop"},null,512),[[z,e.need_in_stop]]),t("label",bst,[t("span",{class:C({"fw-bold text-primary":e.need_in_stop})},"Товар в стоп листе",2),_(" / "),t("span",{class:C({"fw-bold text-primary":!e.need_in_stop})},"Все товары",2)])]),t("div",gst,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=d=>e.need_removed=d),type:"checkbox",role:"switch",id:"need_removed"},null,512),[[z,e.need_removed]]),yst]),t("div",vst,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[8]||(o[8]=d=>e.need_table=d),type:"checkbox",role:"switch",id:"need_table"},null,512),[[z,e.need_table]]),$st]),t("div",kst,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=d=>e.need_recommendation_config=d),type:"checkbox",role:"switch",id:"need_recommendation_config"},null,512),[[z,e.need_recommendation_config]]),wst]),t("p",null,[_("Всего товаров: "),e.paginate?(l(),a("span",Fst,p(e.paginate.meta.total||0),1)):u("",!0)]),!s.isSimple&&!e.need_table?(l(),a("div",Cst,[(l(!0),a(v,null,O(e.filteredProducts,(d,c)=>(l(),a("div",Pst,[(l(),M(ist,{key:"product-"+d.id,class:C({selected:(s.selected||[]).indexOf(d.id)!=-1}),onSelect:h=>e.selectProduct(d),item:d},null,8,["class","onSelect","item"]))]))),256))])):u("",!0),s.isSimple||e.need_table?(l(),a("div",Sst,[t("div",xst,[t("ul",jst,[(l(!0),a(v,null,O(e.filteredProducts,(d,c)=>(l(),a("li",{class:C(["list-group-item",{"bg-success text-white fw-bold":(s.selected||[]).indexOf(d.id)!=-1,"bg-danger":d.deleted_at,"bg-warning":d.in_stop_list_at}])},[t("div",Ost,[t("div",Tst,[t("p",{class:"text-decoration-underline mb-0",onClick:h=>e.selectProduct(d)},p(d.title),9,Ust),t("div",Ist,[d.vk_product_id?(l(),a("span",Vst,"VK")):u("",!0),d.iiko_article?(l(),a("span",Mst,"IIKO")):u("",!0),d.frontpad_article?(l(),a("span",Ast,"FrontPad")):u("",!0)])]),t("div",Est,[t("div",Dst,[zst,t("ul",Bst,[d.deleted_at==null?(l(),a("li",Lst,[t("a",{class:"dropdown-item",onClick:h=>e.openRemoveModal(d),href:"javascript:void(0)"},"Удалить товар",8,Rst)])):u("",!0),d.deleted_at?(l(),a("li",Nst,[t("a",{class:"dropdown-item",onClick:h=>e.openRestoreModal(d),href:"javascript:void(0)"},"Восстановить товар",8,qst)])):u("",!0),t("li",null,[d.in_stop_list_at==null?(l(),a("a",{key:0,class:"dropdown-item",onClick:h=>e.openStopListModal(d,"добавления в стоп лист"),href:"javascript:void(0)"},"Добавить в стоп-лист",8,Wst)):u("",!0)]),t("li",null,[d.in_stop_list_at!=null?(l(),a("a",{key:0,class:"dropdown-item",onClick:h=>e.openStopListModal(d,"извлечения из стоп листа"),href:"javascript:void(0)"},"Вернуть из стоп-листа",8,Yst)):u("",!0)])])])])]),e.need_recommendation_config?(l(),a("div",Hst,[t("div",Qst,[t("div",Gst,[t("div",Kst,[t("input",{type:"radio",onChange:h=>e.changeStatus(d.id,0),class:"btn-check",name:"config-recommendation"+d.id,id:"config-recommendation-1-"+d.id,autocomplete:"off",checked:""},null,40,Jst),t("label",{class:"btn btn-outline-primary",style:{"font-size":"10px"},for:"config-recommendation-1-"+d.id},"Отмена",8,Xst),t("input",{type:"radio",onChange:h=>e.changeStatus(d.id,1),checked:e.recommendations.indexOf(d.id)!==-1,class:"btn-check",name:"config-recommendation"+d.id,id:"config-recommendation-2-"+d.id,autocomplete:"off"},null,40,Zst),t("label",{class:"btn btn-outline-primary",style:{"font-size":"10px"},for:"config-recommendation-2-"+d.id},"Рекомендация",8,eot),t("input",{type:"radio",onChange:h=>e.changeStatus(d.id,2),checked:e.excludes.indexOf(d.id)!==-1,class:"btn-check",name:"config-recommendation"+d.id,id:"config-recommendation-3-"+d.id,autocomplete:"off"},null,40,tot),t("label",{class:"btn btn-outline-primary",style:{"font-size":"10px"},for:"config-recommendation-3-"+d.id},"Исключение",8,sot)])])])])):u("",!0)],2))),256))])])])):u("",!0),e.paginate?(l(),M(Ce,{key:3,simple:!0,onPagination_page:e.nextProducts,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0),t("div",oot,[t("div",iot,[t("div",not,[t("div",lot,[aot,t("button",{type:"button",class:"btn-close",onClick:o[10]||(o[10]=(...d)=>e.hideModal&&e.hideModal(...d))})]),t("div",rot,[e.selected_product!=null?(l(),a(v,{key:0},[t("div",dot,[f(t("img",cot,null,512),[[n,e.selected_image]]),t("div",uot,[t("div",mot,[t("h6",hot,p(e.selected_product.title||"Не указан"),1),t("p",pot,[_("Цена "),t("strong",_ot,p(e.selected_product.current_price||0)+"₽",1)])])])]),(((i=e.selected_product)==null?void 0:i.images)||[]).length>1?(l(),a("div",fot,[(l(!0),a(v,null,O((r=e.selected_product)==null?void 0:r.images,d=>(l(),a("div",bot,[f(t("img",{style:{"min-height":"60px","object-fit":"contain"},onClick:c=>e.selected_image=d,class:C([{"border border-primary":e.selected_image===d},"img-thumbnail my-2"]),alt:"..."},null,10,got),[[n,d]])]))),256))])):u("",!0),t("div",yot,[vot,t("h6",$ot,[T(Uo,{rating:e.selected_product.rating},null,8,["rating"]),_(" "+p(e.selected_product.rating)+" из 5 ",1)])]),t("ul",kot,[t("li",{onClick:o[11]||(o[11]=d=>e.tab=0),class:"nav-item"},[t("a",{class:C(["nav-link",{active:e.tab===0}]),"aria-current":"page",href:"javascript:void(0)"},"Описание",2)]),t("li",{onClick:o[12]||(o[12]=d=>e.tab=2),class:"nav-item"},[t("a",{class:C(["nav-link",{active:e.tab===2}]),href:"javascript:void(0)"},"Редактор",2)]),t("li",{onClick:o[13]||(o[13]=d=>e.tab=1),class:"nav-item"},[t("a",{class:C(["nav-link",{active:e.tab===1}]),href:"javascript:void(0)"},"Отзывы",2)])]),f(t("div",null,[t("p",wot,p(e.selected_product.description||"-"),1)],512),[[tt,e.tab===0]]),f(t("div",null,[(e.reviews||[]).length>0?(l(),a("div",Fot,[t("ul",Cot,[(l(!0),a(v,null,O(e.reviews,(d,c)=>(l(),a("li",Pot,[T(ro,{"need-product":!1,modelValue:e.reviews[c],"onUpdate:modelValue":h=>e.reviews[c]=h},null,8,["modelValue","onUpdate:modelValue"])]))),256))]),e.review_paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextReviews,pagination:e.review_paginate},null,8,["onPagination_page","pagination"])):u("",!0)])):u("",!0),(e.reviews||[]).length===0&&e.loading_reviews?(l(),a("div",Sot,jot)):u("",!0),(e.reviews||[]).length===0&&!e.loading_reviews?(l(),a("div",Oot," У данного товара еще нет отзывов! Для того чтобы оставить отзыв Вам необходимо заказать данный товар, после чего у вас появится возможность написать ваше впечатление от него;) ")):u("",!0)],512),[[tt,e.tab===1]]),f(t("div",null,[T(Wn,{onRemoveProduct:e.openRemoveModal,onCallback:o[14]||(o[14]=d=>e.loadProducts(null)),modelValue:e.selected_product,"onUpdate:modelValue":o[15]||(o[15]=d=>e.selected_product=d)},null,8,["onRemoveProduct","modelValue"])],512),[[tt,e.tab===2]])],64)):u("",!0)])])])]),t("nav",Tot,[t("button",{onClick:o[16]||(o[16]=(...d)=>e.openAddProductModal&&e.openAddProductModal(...d)),class:"btn btn-primary w-100 p-3",type:"button"}," Добавить новый товар ")]),t("div",Uot,[t("div",Iot,[t("div",Vot,[Mot,t("div",Aot,[T(Wn,{onCallback:o[17]||(o[17]=d=>e.loadProducts(null))})])])])]),t("div",Eot,[t("div",Dot,[t("div",zot,[t("div",Bot,[Lot,t("div",Rot,[t("button",{type:"button",style:{"margin-right":"10px"},class:"btn btn-primary px-3 mr-2",onClick:o[18]||(o[18]=(...d)=>e.restoreProduct&&e.restoreProduct(...d))},"Да "),t("button",{type:"button",class:"btn btn-secondary px-3",onClick:o[19]||(o[19]=(...d)=>e.hideRestoreModal&&e.hideRestoreModal(...d))},"Нет")])])])])]),t("div",Not,[t("div",qot,[t("div",Wot,[t("div",Yot,[Hot,t("div",Qot,[t("button",{type:"button",style:{"margin-right":"10px"},class:"btn btn-primary px-3 mr-2",onClick:o[20]||(o[20]=(...d)=>e.removeProduct&&e.removeProduct(...d))},"Да "),t("button",{type:"button",class:"btn btn-secondary px-3",onClick:o[21]||(o[21]=(...d)=>e.hideRemoveModal&&e.hideRemoveModal(...d))},"Нет")])])])])]),t("div",Got,[t("div",Kot,[t("div",Jot,[t("div",Xot,[t("h6",Zot,"Выполнить операцию "+p(e.operation_text)+"?",1),t("div",eit,[t("button",{type:"button",style:{"margin-right":"10px"},class:"btn btn-primary px-3 mr-2",onClick:o[22]||(o[22]=(...d)=>e.addToStopListProduct&&e.addToStopListProduct(...d))},"Да "),t("button",{type:"button",class:"btn btn-secondary px-3",onClick:o[23]||(o[23]=(...d)=>e.hideStopListModal&&e.hideStopListModal(...d))},"Нет")])])])])])],64)}}}),oit={props:["item"],data(){return{categoryForm:{id:null,title:null,order_position:0}}},mounted(){this.item&&this.$nextTick(()=>{this.categoryForm.id=this.item.id||null,this.categoryForm.title=this.item.title||null,this.categoryForm.order_position=this.item.order_position||0})},methods:{storyCategory(){this.$store.dispatch("addProductCategory",{category:this.categoryForm}).then(()=>{this.$notify({title:"Категории товаров",text:"Данные успешно сохранены!",type:"success"}),this.$emit("callback")}).catch(()=>{this.$notify({title:"Категории товаров",text:"Ошибка сохранения категории!",type:"error"})})}}},iit={class:"form-floating mb-2"},nit=t("label",{for:"floatingInput"},"Название категории",-1),lit={class:"form-floating mb-3"},ait=t("label",{for:"floatingInput"},"Позиция в выдаче",-1),rit={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},dit={class:"btn btn-primary w-100 p-3",type:"submit"},cit={key:0},uit={key:1};function mit(s,e,o,n,i,r){return l(),a("form",{onSubmit:e[2]||(e[2]=W((...d)=>r.storyCategory&&r.storyCategory(...d),["prevent"]))},[t("div",iit,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>i.categoryForm.title=d),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,i.categoryForm.title]]),nit]),t("div",lit,[f(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=d=>i.categoryForm.order_position=d),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.categoryForm.order_position]]),ait]),t("nav",rit,[t("button",dit,[i.categoryForm.id?(l(),a("span",cit,"Обновить категорию")):(l(),a("span",uit,"Добавить категорию"))])])],32)}const pa=oe(oit,[["render",mit]]),hit={class:"form-floating"},pit=t("label",{for:"floatingInput"},"Поиск категории товара",-1),_it=t("button",{class:"btn btn-outline-light text-primary",type:"submit",id:"button-addon2"}," Найти ",-1),fit={class:"form-floating my-2"},bit=t("option",{value:"id"},"По id",-1),git=t("option",{value:"title"},"По названию",-1),yit=t("option",{value:"order_position"},"По позиции выдачи",-1),vit=t("option",{value:"is_active"},"По статусу",-1),$it=t("option",{value:"updated_at"},"По дате добавления",-1),kit=t("label",{for:"floatingSelect"},"Сортировать заказы по",-1),wit={key:0},Fit=t("i",{class:"fa-solid fa-caret-up"},null,-1),Cit=t("i",{class:"fa-solid fa-caret-down"},null,-1),Pit={class:"form-check form-switch mb-2"},Sit=t("label",{class:"form-check-label",for:"need_recommendation_config"},"Режим настройки рекомендаций",-1),xit={key:0},jit={class:"row row-cols-1 row-cols-sm-1 row-cols-md-2 g-2"},Oit={class:"col"},Tit={class:"list-group"},Uit={class:"list-group-item"},Iit={class:"mb-2 d-flex justify-content-between"},Vit={class:"fw-bold"},Mit=["onClick"],Ait=t("i",{class:"fa-regular fa-pen-to-square"},null,-1),Eit=[Ait],Dit={class:"input-group"},zit=["onClick"],Bit={key:0,class:"fa-solid fa-eye text-primary"},Lit={key:1,class:"fa-solid fa-eye-slash text-light"},Rit={class:"form-floating"},Nit=["onChange","onUpdate:modelValue"],qit=t("label",{for:""},"Позиция в выдаче",-1),Wit=["onClick"],Yit=t("i",{class:"fa-solid fa-trash-can text-danger"},null,-1),Hit=[Yit],Qit={key:0,class:"row row-cols-1"},Git={class:"col"},Kit={class:"d-flex mt-2 mb-2 justify-content-center"},Jit={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},Xit=["onChange","name","id"],Zit=["for"],ent=["onChange","checked","name","id"],tnt=["for"],snt={key:2,class:"alert alert-light"},ont=t("nav",{class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},[t("button",{style:{"box-shadow":"1px 1px 6px 0px #0000004a"},"data-bs-toggle":"modal","data-bs-target":"#category-form",class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg text-center"}," Добавить категорию ")],-1),int={class:"modal fade",id:"category-edit-item-form",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},nnt={class:"modal-dialog modal-fullscreen"},lnt={class:"modal-content"},ant=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),rnt={class:"modal-body"},dnt={class:"modal fade",id:"remove-category-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},cnt={class:"modal-dialog"},unt={class:"modal-content"},mnt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Удаление категории"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),hnt={key:0,class:"modal-body"},pnt={class:"text-primary fw-bold"},_nt={key:1,class:"modal-footer"},fnt=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть ",-1),bnt={class:"modal fade",id:"category-form",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},gnt={class:"modal-dialog modal-fullscreen"},ynt={class:"modal-content"},vnt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$nt={class:"modal-body"},knt={data(){return{selectedCategory:null,categoryEditorModal:null,removeModal:null,need_recommendation_config:!1,search:null,categories:[],paginate:null,recommendations:[],sort:{param:"id",direction:"asc"}}},computed:{...G(["getCategories","getCategoriesPaginateObject"]),bot(){return window.currentBot},recommendations(){var s,e;return((e=(s=this.bot.settings)==null?void 0:s.recommendation)==null?void 0:e.categories)||[]},filteredProductCategories(){return this.search?this.categories.filter(s=>s.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.categories}},mounted(){var s,e;this.recommendations=((e=(s=this.bot.settings)==null?void 0:s.recommendation)==null?void 0:e.categories)||[],this.loadProductCategories(),this.categoryEditorModal=new bootstrap.Modal(document.getElementById("category-edit-item-form"),{}),this.removeModal=new bootstrap.Modal(document.getElementById("remove-category-modal"),{})},methods:{changeStatus(s,e){this.$store.dispatch("changeCategoryRecommendationStatus",{category_id:s,status:e}).then(o=>{let n=o;this.recommendations=n.categories||[]}).catch(()=>{})},changeDirection(s){this.sort.direction=s,this.loadProductCategories(0)},updateCategory(s){this.$store.dispatch("storeProductCategory",{category:s,bot_id:this.bot.id}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Данные сохранены!",type:"success"}),this.loadProductCategories(),this.categoryEditorModal.hide()}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибка сохранения данных!",type:"error"}),this.categoryEditorModal.hide()})},changeCategoryStatus(s){let e=this.categories.findIndex(o=>s.id===o.id);e!==-1&&(this.categories[e].is_active=!this.categories[e].is_active,this.$store.dispatch("changeProductCategoryStatus",s.id).then(o=>{this.$notify({title:"Конструктор ботов",text:"Статус категории успешно изменен!",type:"success"})}).catch(o=>{}))},selectProductCategory(s){this.selectedCategory=null,this.$nextTick(()=>{this.selectedCategory=s,this.categoryEditorModal.show()})},nextProductCategories(s){this.loadProductCategories(s)},openRemoveModal(s){this.selectedCategory=null,this.$nextTick(()=>{this.selectedCategory=s,this.removeModal.show()})},removeProductCategory(s){this.$store.dispatch("removeProductCategory",{category_id:s.id}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно удален!",type:"success"}),this.loadProductCategories(),this.removeModal.hide(),this.selectedCategory=null}).catch(e=>{this.loadProductCategories(),this.$notify({title:"Конструктор ботов",text:"Ошибка удаления категории!",type:"error"}),this.selectedCategory=null,this.removeModal.hide()})},categoryFormCallback(){this.categoryEditorModal.hide(),this.loadProductCategories()},loadProductCategories(s=0){return this.$store.dispatch("loadCategories",{dataObject:{bot_id:this.bot.id,search:this.search,order_by:this.sort.param,direction:this.sort.direction},page:s,size:50}).then(()=>{this.categories=this.getCategories,this.paginate=this.getCategoriesPaginateObject})}}},wnt=Object.assign(knt,{__name:"ProductCategoryList",setup(s){return(e,o)=>(l(),a(v,null,[t("form",{class:"input-group mb-2",onSubmit:o[1]||(o[1]=W(n=>e.loadProductCategories(0),["prevent"]))},[t("div",hit,[f(t("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.search]]),pit]),_it],32),t("div",fit,[f(t("select",{onChange:o[2]||(o[2]=n=>e.loadProductCategories(0)),"onUpdate:modelValue":o[3]||(o[3]=n=>e.sort.param=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},[bit,git,_(" > "),yit,vit,$it],544),[[Ve,e.sort.param]]),kit]),e.sort.param!=null?(l(),a("p",wit,[_("Направление сортировки: "),e.sort.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[4]||(o[4]=n=>e.changeDirection("desc"))},[_("по возрастанию "),Fit])):u("",!0),e.sort.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[5]||(o[5]=n=>e.changeDirection("asc"))},[_("по убыванию "),Cit])):u("",!0)])):u("",!0),t("div",Pit,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[6]||(o[6]=n=>e.need_recommendation_config=n),type:"checkbox",role:"switch",id:"need_recommendation_config"},null,512),[[z,e.need_recommendation_config]]),Sit]),t("p",null,[_("Всего категорий: "),e.paginate?(l(),a("span",xit,p(e.paginate.meta.total||0),1)):u("",!0)]),e.filteredProductCategories.length>0?(l(),a(v,{key:1},[t("div",jit,[t("div",Oit,[t("ul",Tit,[(l(!0),a(v,null,O(e.filteredProductCategories,(n,i)=>(l(),a("li",Uit,[t("p",Iit,[t("span",Vit,p(n.title),1),t("a",{href:"javascript:void(0)",onClick:r=>e.selectProductCategory(n),class:"text-secondary"},Eit,8,Mit)]),t("div",Dit,[t("button",{type:"button",onClick:r=>e.changeCategoryStatus(n),class:"btn border-light"},[n.is_active?(l(),a("i",Bit)):u("",!0),n.is_active?u("",!0):(l(),a("i",Lit))],8,zit),t("div",Rit,[f(t("input",{type:"number",onChange:r=>e.updateCategory(n),"onUpdate:modelValue":r=>n.order_position=r,class:"form-control border-light"},null,40,Nit),[[k,n.order_position]]),qit]),t("button",{title:"Удалить товар",onClick:r=>e.openRemoveModal(n),class:"btn border-light"},Hit,8,Wit)]),e.need_recommendation_config?(l(),a("div",Qit,[t("div",Git,[t("div",Kit,[t("div",Jit,[t("input",{type:"radio",onChange:r=>e.changeStatus(n.id,0),class:"btn-check",name:"config-category-recommendation-"+n.id,id:"config-category-recommendation-1-"+n.id,autocomplete:"off",checked:""},null,40,Xit),t("label",{class:"btn btn-outline-primary",for:"config-category-recommendation-1-"+n.id},"Отмена",8,Zit),t("input",{type:"radio",onChange:r=>e.changeStatus(n.id,1),checked:e.recommendations.indexOf(n.id)!==-1,class:"btn-check",name:"config-category-recommendation-"+n.id,id:"config-category-recommendation-2-"+n.id,autocomplete:"off"},null,40,ent),t("label",{class:"btn btn-outline-primary",for:"config-category-recommendation-2-"+n.id},"Рекомендация",8,tnt)])])])])):u("",!0)]))),256))])])]),e.paginate?(l(),M(Ce,{key:0,onPagination_page:e.nextProductCategories,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)],64)):(l(),a("p",snt," К сожалению, вы еще не добавили ни одной категории продуктов! ")),ont,t("div",int,[t("div",nnt,[t("div",lnt,[ant,t("div",rnt,[e.selectedCategory?(l(),M(pa,{key:0,onCallback:e.categoryFormCallback,item:e.selectedCategory},null,8,["onCallback","item"])):u("",!0)])])])]),t("div",dnt,[t("div",cnt,[t("div",unt,[mnt,e.selectedCategory?(l(),a("div",hnt,[_(" Вы действительно хотите удалить "),t("strong",pnt,p(e.selectedCategory.title||"-")+"?",1)])):u("",!0),e.selectedCategory?(l(),a("div",_nt,[fnt,t("button",{type:"button",onClick:o[7]||(o[7]=n=>e.removeProductCategory(e.selectedCategory)),class:"btn btn-primary"},"Да, удалить ")])):u("",!0)])])]),t("div",bnt,[t("div",gnt,[t("div",ynt,[vnt,t("div",$nt,[T(pa,{onCallback:e.categoryFormCallback},null,8,["onCallback"])])])])])],64))}}),Fnt=["id"],Cnt={class:"list-group"},Pnt=["onClick"],Snt={key:0,class:"col-12"},xnt=["onClick"],jnt={key:0},Ont={key:1,class:"d-inline-flex align-items-center"},Tnt=t("span",{class:"spinner-border",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),Unt={props:["selected"],data(){return{search:null,products:[],paginate:null,sort:{param:null,direction:"asc"}}},computed:{...G(["getProducts","getProductsPaginateObject"]),filteredCategories(){return this.products.length===0?[]:(this.search||"").length===0?this.products:this.products.filter(s=>s.products.filter(e=>e.title.toLowerCase().indexOf(this.search.toLowerCase())!=-1).length>0)},filteredProducts(){return this.categories.length===0?this.products:this.products.filter(s=>s.categories.findIndex(e=>this.categories.indexOf(e.id)!==-1)!==-1)}},mounted(){this.loadProducts()},methods:{loadMore(s,e){var o;return this.load_content=!0,this.$store.dispatch("loadMoreProductsByCategory",{partner_id:((o=this.selected_partner)==null?void 0:o.bot_partner_id)||null,category_id:s,offset:e}).then(n=>{let i=n.length||0;if(this.load_content=!1,i===0){this.products.find(r=>r.id===s).products_count=e;return}this.products.find(r=>r.id===s).products.push(...n)}).catch(()=>{this.load_content=!1})},changeDirection(s){this.sort.direction=s,this.loadOrders(0)},selectProduct(s){this.$emit("select",s)},nextProducts(s){this.loadProducts(s)},loadProducts(s=0){return this.$store.dispatch("loadProductsByCategory",{dataObject:{search:this.search,direction:this.sort.direction,order_by:this.sort.param},page:s,size:100}).then(e=>{this.products=e.data}).catch(()=>{})}}},Wd=Object.assign(Unt,{__name:"SimpleProductList",setup(s){return(e,o)=>e.filteredCategories.length>0?(l(!0),a(v,{key:0},O(e.filteredCategories,n=>(l(),a(v,null,[t("h5",{class:"my-4 divider",id:"cat-"+n.id},p(n.title||"-"),9,Fnt),t("ul",Cnt,[(l(!0),a(v,null,O(n.products,(i,r)=>(l(),a("li",{class:C(["list-group-item d-flex justify-content-between align-items-center",{"bg-success text-white fw-bold":(s.selected||[]).indexOf(i.id)!=-1}]),onClick:d=>e.selectProduct(i)},p(i.title),11,Pnt))),256))]),n.products_count>n.products.length?(l(),a("div",Snt,[t("button",{onClick:i=>e.loadMore(n.id,n.products.length),class:"btn btn-outline-light text-primary p-3 my-3 w-100",type:"button"},[e.load_content?(l(),a("span",Ont,[_(" Загружаем.... "),Tnt])):(l(),a("span",jnt,"Загрузить еще ("+p(n.products_count-n.products.length)+") ",1))],8,xnt)])):u("",!0)],64))),256)):(l(),M(Ns,{key:1}))}});const ds=s=>(Ge("data-v-5c95131a"),s=s(),Ke(),s),Int=["for"],Vnt=ds(()=>t("i",{class:"fa-solid fa-image text-primary"},null,-1)),Mnt=["id"],Ant=ds(()=>t("p",{class:"mt-3 font-16 text-primary"}," Нажмите для выбора фотографии",-1)),Ent={key:1,style:{"font-size":"14px","min-height":"300px"},class:"img-preview w-100 overflow-hidden my-2"},Dnt={key:0,class:"w-100 object-fit-cover",alt:""},znt={class:"remove"},Bnt=ds(()=>t("i",{class:"fa-regular fa-trash-can mr-2 text-primary"},null,-1)),Lnt={key:2,style:{"font-size":"14px","min-height":"300px"},class:"img-preview w-100 overflow-hidden my-2"},Rnt={class:"w-100 object-fit-cover"},Nnt={class:"remove"},qnt=ds(()=>t("i",{class:"fa-regular fa-trash-can mr-2 text-primary"},null,-1)),Wnt={class:"form-floating mb-2"},Ynt=ds(()=>t("label",{for:"floatingInput"},"Название подборки",-1)),Hnt={class:"form-floating mb-2"},Qnt=ds(()=>t("label",{for:"floatingTextarea"},"Описание",-1)),Gnt={class:"form-floating mb-2"},Knt=ds(()=>t("label",{for:"floatingInput"},"Скидка на подборку, %",-1)),Jnt={class:"form-floating mb-3"},Xnt=ds(()=>t("label",{for:"floatingInput"},"Позиция в выдаче",-1)),Znt=ds(()=>t("p",{class:"alert alert-light mb-2"}," Делает подборку доступной для всех пользователей, позволяя им формировать заказ. ",-1)),elt={class:"form-check form-switch mb-2"},tlt=["id"],slt=["for"],olt={class:"form-check form-switch mb-2"},ilt=["id"],nlt=["for"],llt={key:0,class:"fa-solid fa-chevron-up"},alt={key:1,class:"fa-solid fa-chevron-down"},rlt={key:3},dlt=ds(()=>t("p",{class:"alert alert-light"},[_(" При выборе товаров из одной и той же категории пользователь сможет указать один из этих продуктов по своему усмотрению. Если выбран флаг "),t("span",{class:"text-primary fw-bold"},'"все в категории"'),_(", то у пользователя не будет возможности выбирать, ему можно будет заказать всё как есть. ")],-1)),clt={class:"form-check form-switch mb-2"},ult={class:"form-check-label",for:"collectionForm_choose_all_in_category"},mlt={class:"form-check form-switch mb-2"},hlt={class:"form-check-label",for:"collectionForm_choose_all_in_category"},plt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},_lt={class:"btn btn-primary w-100 p-3",type:"submit"},flt={key:0},blt={key:1},glt={props:["item"],data(){return{photo:null,show_products:!1,collectionForm:{id:null,title:null,order_position:0,image:null,description:null,is_public:!0,is_active:!0,discount:0,products:[],config:{choose_all_in_category:!1,can_skip_categories:!1}}}},computed:{bot(){return window.currentBot},mappedProducts(){return this.collectionForm.products.map(({id:s})=>s)},uuid(){return Bt()}},mounted(){this.item&&this.$nextTick(()=>{this.collectionForm.id=this.item.id||null,this.collectionForm.title=this.item.title||null,this.collectionForm.order_position=this.item.order_position||0,this.collectionForm.image=this.item.image||null,this.collectionForm.description=this.item.description||null,this.collectionForm.discount=this.item.discount||0,this.collectionForm.is_public=this.item.is_public||!0,this.collectionForm.is_active=this.item.is_active||!0,this.collectionForm.config=this.item.config||{},this.collectionForm.products=this.item.products||[],(this.item.products||[]).length>0&&(this.show_products=!0)})},methods:{removePhoto(){this.photo=null},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(s){const e=s.target.files;this.photo=e[0]},storeCollection(){let s=new FormData;Object.keys(this.collectionForm).forEach(e=>{const o=this.collectionForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photo&&s.append("photo",this.photo),this.$store.dispatch("storeCollection",{collectionForm:s}).then(()=>{this.$notify({title:"Коллекция товаров",text:"Данные успешно сохранены!",type:"success"}),this.$emit("callback"),document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>e.click())}).catch(()=>{this.$notify({title:"Коллекция товаров",text:"Ошибка сохранения категории!",type:"error"}),document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>e.click())})},selectProduct(s){let e=this.collectionForm.products.findIndex(o=>o.id==s.id);e===-1?this.collectionForm.products.push(s):this.collectionForm.products.splice(e,1)}}},ylt=Object.assign(glt,{__name:"CollectionForm",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a("form",{onSubmit:o[12]||(o[12]=W((...i)=>e.storeCollection&&e.storeCollection(...i),["prevent"])),class:"pb-5 mb-5"},[!e.photo&&!e.collectionForm.image?(l(),a("label",{key:0,for:"photos-"+e.uuid,style:{"font-size":"14px","min-height":"300px"},class:"photo-loader my-2 d-flex justify-content-center align-items-center flex-column text-center w-100"},[Vnt,t("input",{type:"file",id:"photos-"+e.uuid,accept:"image/*",onChange:o[0]||(o[0]=(...i)=>e.onChangePhotos&&e.onChangePhotos(...i)),style:{display:"none"}},null,40,Mnt),Ant],8,Int)):u("",!0),e.collectionForm.image?(l(),a("div",Ent,[e.collectionForm.image?f((l(),a("img",Dnt,null,512)),[[n,"/images-by-company-id/"+e.bot.company_id+"/"+e.collectionForm.image]]):u("",!0),t("div",znt,[t("a",{onClick:o[1]||(o[1]=i=>e.collectionForm.image=null),class:"btn btn-outline-light rounded-5 p-3 shadow-s"},[Bnt,_(" Удалить фото")])])])):u("",!0),e.photo&&!e.collectionForm.image?(l(),a("div",Lnt,[f(t("img",Rnt,null,512),[[n,e.getPhoto().imageUrl]]),t("div",Nnt,[t("a",{onClick:o[2]||(o[2]=(...i)=>e.removePhoto&&e.removePhoto(...i)),class:"btn btn-outline-light rounded-5 p-3 shadow-s"},[qnt,_(" Удалить фото")])])])):u("",!0),t("div",Wnt,[f(t("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=i=>e.collectionForm.title=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.collectionForm.title]]),Ynt]),t("div",Hnt,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[4]||(o[4]=i=>e.collectionForm.description=i),placeholder:"Leave a comment here",style:{"min-height":"150px"},required:"",id:"floatingTextarea"},null,512),[[k,e.collectionForm.description]]),Qnt]),t("div",Gnt,[f(t("input",{type:"number",min:"0",max:"100","onUpdate:modelValue":o[5]||(o[5]=i=>e.collectionForm.discount=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.collectionForm.discount]]),Knt]),t("div",Jnt,[f(t("input",{type:"number","onUpdate:modelValue":o[6]||(o[6]=i=>e.collectionForm.order_position=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.collectionForm.order_position]]),Xnt]),Znt,t("div",elt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[7]||(o[7]=i=>e.collectionForm.is_active=i),role:"switch",id:"collectionForm_is_active-"+e.uuid},null,8,tlt),[[z,e.collectionForm.is_active]]),t("label",{class:"form-check-label",for:"collectionForm_is_active-"+e.uuid},[_("Отображение подборки: "),t("span",{class:C({"text-primary fw-bold":e.collectionForm.is_active})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.collectionForm.is_active})},"выкл",2)],8,slt)]),t("div",olt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=i=>e.collectionForm.is_public=i),role:"switch",id:"collectionForm_is_public-"+e.uuid},null,8,ilt),[[z,e.collectionForm.is_public]]),t("label",{class:"form-check-label",for:"collectionForm_is_public-"+e.uuid},[_("Является публичной: "),t("span",{class:C({"text-primary fw-bold":e.collectionForm.is_public})},"да",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.collectionForm.is_public})},"нет",2)],8,nlt)]),t("button",{type:"button",onClick:o[9]||(o[9]=i=>e.show_products=!e.show_products),class:"btn btn-outline-primary p-2 w-100 mb-2"},[e.show_products?(l(),a("i",alt)):(l(),a("i",llt)),_(" Открыть выбор продуктов ")]),e.show_products?(l(),a("div",rlt,[dlt,t("div",clt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[10]||(o[10]=i=>e.collectionForm.config.choose_all_in_category=i),role:"switch",id:"collectionForm_choose_all_in_category"},null,512),[[z,e.collectionForm.config.choose_all_in_category]]),t("label",ult,[_("Все в категории: "),t("span",{class:C({"text-primary fw-bold":e.collectionForm.config.choose_all_in_category})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.collectionForm.config.choose_all_in_category})},"выкл",2)])]),t("div",mlt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=i=>e.collectionForm.config.can_skip_categories=i),role:"switch",id:"collectionForm_choose_all_in_category"},null,512),[[z,e.collectionForm.config.can_skip_categories]]),t("label",hlt,[_("Разрешить пропуск категорий: "),t("span",{class:C({"text-primary fw-bold":e.collectionForm.config.can_skip_categories})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.collectionForm.config.can_skip_categories})},"выкл",2)])]),T(Wd,{selected:e.mappedProducts,onSelect:e.selectProduct},null,8,["selected","onSelect"])])):u("",!0),t("nav",plt,[t("button",_lt,[e.collectionForm.id?(l(),a("span",flt,"Обновить подборку")):(l(),a("span",blt,"Добавить подборку"))])])],32)}}}),vlt=oe(ylt,[["__scopeId","data-v-5c95131a"]]),$lt={class:"form-floating"},klt=t("label",{for:"floatingInput"},"Поиск подборок",-1),wlt=t("button",{class:"btn btn-outline-light text-primary",type:"submit",id:"button-addon2"}," Найти ",-1),Flt={class:"form-floating my-2"},Clt=t("option",{value:"id"},"По id",-1),Plt=t("option",{value:"title"},"По названию",-1),Slt=ze('<option value="order_position">По позиции выдачи</option><option value="is_active">По статусу</option><option value="is_public">По публичности</option><option value="discount">По величине скидки</option><option value="updated_at">По дате добавления</option>',5),xlt=t("label",{for:"floatingSelect"},"Сортировать заказы по",-1),jlt={key:0},Olt=t("i",{class:"fa-solid fa-caret-up"},null,-1),Tlt=t("i",{class:"fa-solid fa-caret-down"},null,-1),Ult={key:0},Ilt={class:"row row-cols-1 row-cols-sm-1 row-cols-md-2 g-2"},Vlt={class:"col"},Mlt={class:"list-group"},Alt={class:"list-group-item"},Elt={class:"d-flex justify-content-between"},Dlt={class:"mb-0"},zlt={class:"badge bg-primary mr-2"},Blt=["onClick"],Llt={class:"fw-bold"},Rlt={class:"dropdown"},Nlt=t("button",{class:"btn btn-outline-light",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-bars"})],-1),qlt={class:"dropdown-menu"},Wlt=["onClick"],Ylt=t("i",{class:"fa-solid fa-eye"},null,-1),Hlt=["onClick"],Qlt=t("i",{class:"fa-regular fa-pen-to-square"},null,-1),Glt=["onClick"],Klt=t("i",{class:"fa-solid fa-trash-can"},null,-1),Jlt={key:2,class:"alert alert-light"},Xlt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},Zlt={class:"modal fade",id:"collection-items-show",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},eat={class:"modal-dialog modal-fullscreen"},tat={class:"modal-content"},sat=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Демонстрация"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),oat={class:"modal-body pb-5 mb-5"},iat={class:"modal fade",id:"collection-item-form",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},nat={class:"modal-dialog modal-fullscreen"},lat={class:"modal-content"},aat=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),rat={class:"modal-body"},dat={class:"modal fade",id:"remove-collection-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},cat={class:"modal-dialog"},uat={class:"modal-content"},mat=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Удаление категории"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),hat={key:0,class:"modal-body"},pat={class:"text-primary fw-bold"},_at={key:1,class:"modal-footer"},fat=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть ",-1),bat={data(){return{search:null,collections:[],paginate:null,loaded:!0,selected:null,sort:{param:"id",direction:"asc"}}},computed:{...G(["getCollections","getCollectionsPaginateObject"]),bot(){return window.currentBot},filteredProductCollections(){return this.search?this.collections.filter(s=>s.title.toLowerCase().trim().indexOf(this.search.toLowerCase().trim())>=0):this.collections.filter(s=>!s.is_deleted)}},mounted(){this.loadProductCollections()},methods:{openModalDemo(s){this.loaded=!1,this.selected=s,new bootstrap.Modal("#collection-items-show",{}).show(),this.$nextTick(()=>{this.loaded=!0})},openRemoveModal(s){this.loaded=!1,this.selected=s,new bootstrap.Modal("#remove-collection-modal",{}).show(),this.$nextTick(()=>{this.loaded=!0})},openModalEditor(s){this.loaded=!1,this.selected=s,new bootstrap.Modal("#collection-item-form",{}).show(),this.$nextTick(()=>{this.loaded=!0})},changeDirection(s){this.sort.direction=s,this.loadProductCollections(0)},updateCollection(s){this.$store.dispatch("storeCollection",{collectionForm:s,bot_id:this.bot.id}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Данные сохранены!",type:"success"})}).catch(e=>{this.$notify({title:"Конструктор ботов",text:"Ошибка сохранения данных!",type:"error"})})},selectProductCollection(s){this.loaded=!1,this.selected=s,this.$nextTick(()=>{this.loaded=!0})},nextProductCollections(s){this.loadProductCollections(s)},removeProductCollection(s){s.is_deleted=!0,this.$store.dispatch("removeProductCollection",{collectionId:s.id}).then(e=>{this.$notify({title:"Конструктор ботов",text:"Продукт успешно удален!",type:"success"}),this.loadProductCollections(),document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(o=>o.click())}).catch(e=>{this.loadProductCollections(),this.$notify({title:"Конструктор ботов",text:"Ошибка удаления категории!",type:"error"}),document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(o=>o.click())})},loadProductCollections(s=0){return this.$store.dispatch("loadCollections",{dataObject:{search:this.search,order_by:this.sort.param,direction:this.sort.direction},page:s,size:10}).then(()=>{this.collections=this.getCollections,this.paginate=this.getCollectionsPaginateObject})}}},gat=Object.assign(bat,{__name:"CollectionList",setup(s){return(e,o)=>(l(),a(v,null,[t("form",{class:"input-group mb-2",onSubmit:o[1]||(o[1]=W(n=>e.loadProductCollections(0),["prevent"]))},[t("div",$lt,[f(t("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.search]]),klt]),wlt],32),t("div",Flt,[f(t("select",{onClick:o[2]||(o[2]=n=>e.loadProductCollections(0)),"onUpdate:modelValue":o[3]||(o[3]=n=>e.sort.param=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},[Clt,Plt,_(" > "),Slt],512),[[Ve,e.sort.param]]),xlt]),e.sort.param!=null?(l(),a("p",jlt,[_("Направление сортировки: "),e.sort.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[4]||(o[4]=n=>e.changeDirection("desc"))},[_("по возрастанию "),Olt])):u("",!0),e.sort.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[5]||(o[5]=n=>e.changeDirection("asc"))},[_("по убыванию "),Tlt])):u("",!0)])):u("",!0),t("p",null,[_("Всего подборок: "),e.paginate?(l(),a("span",Ult,p(e.paginate.meta.total||0),1)):u("",!0)]),e.filteredProductCollections.length>0?(l(),a(v,{key:1},[t("div",Ilt,[t("div",Vlt,[t("ul",Mlt,[(l(!0),a(v,null,O(e.filteredProductCollections,(n,i)=>(l(),a("li",Alt,[t("div",Elt,[t("p",Dlt,[t("span",zlt," #"+p(n.id),1),t("span",{onClick:r=>e.openModalEditor(n),class:"fw-bold"},p(n.title),9,Blt),t("small",Llt," ("+p((n.products||[]).length)+" товаров)",1)]),t("div",Rlt,[Nlt,t("ul",qlt,[t("li",null,[t("a",{href:"javascript:void(0)",onClick:r=>e.openModalDemo(n),class:"dropdown-item"},[Ylt,_(" Демо")],8,Wlt)]),t("li",null,[t("a",{href:"javascript:void(0)",onClick:r=>e.openModalEditor(n),class:"dropdown-item"},[Qlt,_(" Редактировать")],8,Hlt)]),t("li",null,[t("a",{href:"javascript:void(0)",onClick:r=>e.openRemoveModal(n),class:"dropdown-item"},[Klt,_(" Удалить")],8,Glt)])])])])]))),256))])])]),e.paginate?(l(),M(Ce,{key:0,onPagination_page:e.nextProductCollections,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)],64)):(l(),a("p",Jlt," К сожалению, вы еще не добавили ни одной коллекции продуктов! ")),t("nav",Xlt,[t("button",{style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:o[6]||(o[6]=n=>e.openModalEditor(null)),class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg text-center"}," Добавить подборку ")]),t("div",Zlt,[t("div",eat,[t("div",tat,[sat,t("div",oat,[e.selected&&e.loaded?(l(),M(zr,{key:0,item:e.selected},null,8,["item"])):u("",!0)])])])]),t("div",iat,[t("div",nat,[t("div",lat,[aat,t("div",rat,[e.loaded?(l(),M(vlt,{key:0,onCallback:o[7]||(o[7]=n=>e.loadProductCollections(0)),item:e.selected},null,8,["item"])):u("",!0)])])])]),t("div",dat,[t("div",cat,[t("div",uat,[mat,e.selected&&e.loaded?(l(),a("div",hat,[_(" Вы действительно хотите удалить "),t("strong",pat,p(e.selected.title||"-")+" (#"+p(e.selected.id||"-")+")?",1)])):u("",!0),e.selected&&e.loaded?(l(),a("div",_at,[fat,t("button",{type:"button",onClick:o[8]||(o[8]=n=>e.removeProductCollection(e.selected)),class:"btn btn-primary"},"Да, удалить ")])):u("",!0)])])])],64))}});const yat={class:"container py-3"},vat={class:"row"},$at={class:"col-12 py-2",style:{position:"sticky",top:"0px","z-index":"1000"}},kat={class:"btn-group w-100 px-3 catalog-tabs py-2",style:{"overflow-x":"auto"}},wat=t("i",{class:"fa-solid fa-users mr-2"},null,-1),Fat=t("i",{class:"fa-solid fa-user-secret mr-2"},null,-1),Cat=t("i",{class:"fa-solid fa-box-open mr-2"},null,-1),Pat=t("i",{class:"fa-solid fa-arrows-rotate mr-2"},null,-1),Sat={class:"col-12"},xat={class:"col-12"},jat={key:0,class:"col-12"},Oat={class:"col-12"},Tat={class:"form-floating mb-2"},Uat=t("label",{for:"floatingInput"},"Ссылка на страницу ВК с товарами",-1),Iat=["disabled"],Vat=t("i",{class:"fa-regular fa-floppy-disk mr-2"},null,-1),Mat={key:0,class:"btn btn-outline-warning p-3 mb-1 w-100"},Aat=t("i",{class:"fa-brands fa-vk mr-2"},null,-1),Eat=t("span",{class:"spinner-border text-warning ml-2",style:{"border-width":"2px",width:"1rem",height:"1rem"},role:"status"},null,-1),Dat=t("i",{class:"fa-brands fa-vk mr-2"},null,-1),zat={key:0,class:"col-12"},Bat=t("i",{class:"fa-solid fa-gears mr-2"},null,-1),Lat={key:1,class:"col-12"},Rat=t("i",{class:"fa-solid fa-gears mr-2"},null,-1),Nat={class:"col-12"},qat=t("i",{class:"fa-solid fa-lock mr-2"},null,-1),Wat=t("i",{class:"fa-solid fa-lock mr-2"},null,-1),Yat={class:"col-12"},Hat={class:"modal fade",id:"update-products-modal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Qat={class:"modal-dialog modal-dialog-centered"},Gat={class:"modal-content"},Kat={class:"modal-body"},Jat=t("h6",{class:"text-center my-3"},"Вы действительно хотите обновить товар?",-1),Xat=t("p",{class:"alert alert-warning mb-2"},"При обновлении будут загружены все товары из вк, текущие ваши товары будут удалены и заменены на новые.",-1),Zat={class:"d-flex justify-content-center"},ert={class:"modal fade",id:"update-products-from-frontpad-modal","data-bs-backdrop":"static",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},trt={class:"modal-dialog modal-dialog-centered"},srt={class:"modal-content"},ort={class:"modal-body"},irt={class:"nav nav-tabs mb-2 d-flex justify-content-center"},nrt={class:"nav-item"},lrt={class:"nav-item"},art=t("h6",{class:"text-center my-3"},"Вы действительно хотите обновить товар?",-1),rrt=t("p",{class:"alert alert-warning mb-2"}," Товар с фронтпада можно обвить раз в час!!Будут загружены полностью новые товары из FrontPad ",-1),drt={class:"d-flex justify-content-center"},crt={class:"form-floating mb-2"},urt=t("label",{for:"excelFileInput"},"Файл Excel",-1),mrt=t("button",{class:"btn p-3 w-100 btn-primary"},"Отправить",-1),hrt={data(){return{tab:0,load:!1,url:null,link:null,frontpad_tab:0,selectedFile:null,update_products_modal:null,update_products_from_frontpad_modal:null,selectedProduct:null,botForm:{vk_shop_link:null}}},computed:{tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},mounted(){this.updateProducts(),this.botForm.vk_shop_link=window.currentBot.vk_shop_link||null,this.update_products_modal=new bootstrap.Modal(document.getElementById("update-products-modal"),{}),this.update_products_from_frontpad_modal=new bootstrap.Modal(document.getElementById("update-products-from-frontpad-modal"),{}),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{handleFileUpload(s){const e=s.target.files[0];e&&(this.selectedFile=e)},async submitFrontPadFile(){const s=new FormData;s.append("excel_file",this.selectedFile),this.$store.dispatch("updateProductsFromFrontPadExcel",{form:s}).then(e=>{this.$notify({title:"Импорт данных",text:"Успешно!"}),this.frontpad_tab=0,this.hideUpdateFrontPadModal()}).catch(e=>{this.frontpad_tab=0,this.hideUpdateFrontPadModal()})},doUpdateProducts(){this.exportProducts(),this.open(this.link,"_blank")},doUpdateFrontPadProducts(){this.load=!0,this.$store.dispatch("updateProductsFromFrontPad").then(s=>{this.load=!1,this.hideUpdateFrontPadModal()}).catch(()=>{this.load=!1,this.hideUpdateFrontPadModal()})},hideUpdateFrontPadModal(){this.update_products_from_frontpad_modal.hide()},openFrontPadUpdateModal(){this.update_products_from_frontpad_modal.show()},openUpdateModal(){this.update_products_modal.show()},hideUpdateModal(){this.update_products_modal.hide()},goTo(s){this.$router.push({name:s})},updateShopLink(){this.load=!0,this.$store.dispatch("updateShopLink",{botForm:this.botForm}).then(s=>{this.load=!1,this.updateProducts(),this.$notify({title:"Менеджер магазина",text:"Ссылка на источник в ВК обновлена",type:"success"})}).catch(()=>{this.load=!1})},refresh(){this.load=!0,this.selectedProduct=null,this.$nextTick(()=>{this.load=!1})},removeAllProducts(){this.load=!0,this.$store.dispatch("removeAllProducts").then(s=>{this.load=!1,this.$notify({title:"Менеджер магазина",text:"Все продукты удалены",type:"success"})}).catch(()=>{this.load=!1})},selectProduct(s){this.load=!0,this.$nextTick(()=>{this.selectedProduct=s,this.load=!1})},exportOrders(){this.$store.dispatch("exportAllOrders").then(s=>{this.load=!1,this.$notify({title:"Менеджер магазина",text:"Все заказы экспортированы в файл",type:"success"})}).catch(()=>{this.load=!1})},exportProducts(){this.$store.dispatch("exportAllProducts").then(s=>{this.load=!1,this.$notify({title:"Менеджер магазина",text:"Все продукты экспортированы в файл",type:"success"})}).catch(()=>{this.load=!1})},importProducts(){this.$notify({title:"Менеджер магазина",text:"Функция недоступна"})},updateProducts(){this.load=!0,this.$store.dispatch("updateProductsFromVk").then(s=>{this.link=s.data.url||null,this.load=!1,this.url=null}).catch(()=>{this.load=!1})},open(s){this.tg.openLink(s)}}},Yd=Object.assign(hrt,{__name:"Shop",setup(s){return(e,o)=>{var n,i;return l(),a(v,null,[t("div",yat,[t("div",vat,[t("div",$at,[t("div",kat,[t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===0}]),onClick:o[0]||(o[0]=r=>e.tab=0),style:{"min-width":"200px","line-height":"100%"},"aria-current":"page"},[wat,_("Товары ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===2}]),onClick:o[1]||(o[1]=r=>e.tab=2),style:{"min-width":"200px","line-height":"100%"}},[Fat,_("Категории ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===3}]),onClick:o[2]||(o[2]=r=>e.tab=3),style:{"min-width":"300px","line-height":"100%"}},[Cat,_(" Подборки товара (комбо) ")],2),t("button",{type:"button",class:C(["btn-info btn p-3",{active:e.tab===4}]),onClick:o[3]||(o[3]=r=>e.tab=4),style:{"min-width":"300px","line-height":"100%"},"aria-current":"page"},[Pat,_("Обновление данных ")],2)])]),f(t("div",Sat,[e.load?u("",!0):(l(),M(sit,{key:0,onSelect:e.selectProduct},null,8,["onSelect"]))],512),[[tt,e.tab===0]]),f(t("div",xat,[e.load?u("",!0):(l(),M(gat,{key:0}))],512),[[tt,e.tab===3]]),e.tab===1?(l(),a("div",jat,[e.load?u("",!0):(l(),M(Wn,{key:0,item:e.selectedProduct,onRefresh:e.refresh},null,8,["item","onRefresh"]))])):u("",!0),e.tab===4?(l(),a(v,{key:1},[t("div",Oat,[t("form",{onSubmit:o[5]||(o[5]=W((...r)=>e.updateShopLink&&e.updateShopLink(...r),["prevent"])),class:"mb-2"},[t("div",Tat,[f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[4]||(o[4]=r=>e.botForm.vk_shop_link=r),"aria-describedby":"vk_shop_link"},null,512),[[k,e.botForm.vk_shop_link]]),Uat]),t("button",{disabled:e.load,class:"btn btn-outline-info w-100 p-3"},[Vat,_(" Сохранить ")],8,Iat)],32),e.link?u("",!0):(l(),a("p",Mat,[Aat,_("Подготовка ссылки "),Eat])),e.link?(l(),a("a",{key:1,onClick:o[6]||(o[6]=(...r)=>e.openUpdateModal&&e.openUpdateModal(...r)),href:"javascript:void(0)",class:"btn btn-primary p-3 w-100 mb-2"},[Dat,_(" Обновить товар из ВК ")])):u("",!0)]),(n=e.currentBot.frontPad)!=null&&n.is_active?(l(),a("div",zat,[t("a",{onClick:o[7]||(o[7]=(...r)=>e.openFrontPadUpdateModal&&e.openFrontPadUpdateModal(...r)),href:"javascript:void(0)",class:"btn btn-primary p-3 w-100 mb-2"},[Bat,_(" Обновить товар из FrontPad ")])])):u("",!0),(i=e.currentBot.iiko)!=null&&i.is_active?(l(),a("div",Lat,[t("a",{onClick:o[8]||(o[8]=r=>e.goTo("IikoV2")),href:"javascript:void(0)",class:"btn btn-primary p-3 w-100 mb-2"},[Rat,_(" Обновить товар из IIKO ")])])):u("",!0),t("div",Nat,[t("button",{disabled:!0,onClick:o[9]||(o[9]=(...r)=>e.exportOrders&&e.exportOrders(...r)),class:"btn btn-success p-3 w-100 mb-2"},[qat,_(" Экспортировать заказы ")]),t("button",{disabled:!0,onClick:o[10]||(o[10]=(...r)=>e.importProducts&&e.importProducts(...r)),class:"btn btn-success p-3 w-100 mb-2"},[Wat,_(" Импорт из XLS ")]),t("button",{onClick:o[11]||(o[11]=(...r)=>e.exportProducts&&e.exportProducts(...r)),class:"btn btn-success p-3 w-100 mb-2"}," Экспорт в XLS ")])],64)):u("",!0),f(t("div",Yat,[T(wnt)],512),[[tt,e.tab===2]])])]),t("div",Hat,[t("div",Qat,[t("div",Gat,[t("div",Kat,[Jat,Xat,t("div",Zat,[t("button",{type:"button",style:{"margin-right":"10px"},class:"btn btn-primary px-3 mr-2",onClick:o[12]||(o[12]=(...r)=>e.doUpdateProducts&&e.doUpdateProducts(...r))},"Да "),t("button",{type:"button",class:"btn btn-secondary px-3",onClick:o[13]||(o[13]=(...r)=>e.hideUpdateModal&&e.hideUpdateModal(...r))},"Нет")])])])])]),t("div",ert,[t("div",trt,[t("div",srt,[t("div",ort,[t("ul",irt,[t("li",nrt,[t("a",{class:C(["nav-link",{active:e.frontpad_tab===1}]),onClick:o[14]||(o[14]=r=>e.frontpad_tab=1),"aria-current":"page",href:"javascript:void(0)"},"API",2)]),t("li",lrt,[t("a",{onClick:o[15]||(o[15]=r=>e.frontpad_tab=0),class:C([{active:e.frontpad_tab===0},"nav-link"]),href:"javascript:void(0)"},"Эксель",2)])]),e.frontpad_tab===1?(l(),a(v,{key:0},[art,rrt,t("div",drt,[t("button",{type:"button",style:{"margin-right":"10px"},class:"btn btn-primary px-3 mr-2 p-3",onClick:o[16]||(o[16]=(...r)=>e.doUpdateFrontPadProducts&&e.doUpdateFrontPadProducts(...r))},"Да "),t("button",{type:"button",class:"btn btn-secondary px-3",onClick:o[17]||(o[17]=(...r)=>e.hideUpdateFrontPadModal&&e.hideUpdateFrontPadModal(...r))},"Нет ")])],64)):u("",!0),e.frontpad_tab===0?(l(),a("form",{key:1,onSubmit:o[19]||(o[19]=W((...r)=>e.submitFrontPadFile&&e.submitFrontPadFile(...r),["prevent"]))},[t("div",crt,[t("input",{type:"file",class:"form-control",id:"excelFileInput",accept:".xlsx,.xls",onChange:o[18]||(o[18]=(...r)=>e.handleFileUpload&&e.handleFileUpload(...r))},null,32),urt]),mrt],32)):u("",!0)])])])])],64)}}}),prt=Object.freeze(Object.defineProperty({__proto__:null,default:Yd},Symbol.toStringTag,{value:"Module"})),_rt={class:"container"},frt={data(){},computed:{tg(){return window.Telegram.WebApp}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})}},Hd=Object.assign(frt,{__name:"Orders",setup(s){return(e,o)=>(l(),a("div",_rt,[T(Nd)]))}}),brt=Object.freeze(Object.defineProperty({__proto__:null,default:Hd},Symbol.toStringTag,{value:"Module"})),grt={components:{Chart:oo,Grid:wo,Line:Sa,Bar:Fo,Tooltip:io,Responsive:xa,Pie:Hn},props:["date"],data(){return{traffics:[],tooltipConfig:{source:{label:"Источник",color:"#5d1010"},count:{label:"Кол-во",color:"#5d1010"}},margin:{left:0,top:20,right:0,bottom:0},axis:{primary:{type:"band"},secondary:{domain:["dataMin","dataMax + 100"],type:"linear",ticks:11}},need_chart:!1,sort:{is_individual:!1,key:"created_at",direction:"asc"}}},watch:{sort:{handler:function(s){this.prepareStatistic()},deep:!0}},mounted(){this.prepareStatistic()},methods:{changeSort(s){this.sort.key=s,this.sort.direction=this.sort.direction==="asc"?"desc":"asc"},prepareStatistic(){return this.loadedChart=!1,this.$store.dispatch("trafficLoad",{date:this.date,need_all:!this.need_date_range,sort:this.sort}).then(s=>{this.traffics=s.traffics})}}},yrt={class:"form-check form-switch mb-2"},vrt=t("label",{class:"form-check-label",for:"need-individual"},"Индивидуальные переходы",-1),$rt={class:"form-check form-switch mb-2"},krt=t("label",{class:"form-check-label",for:"need-chart-display"},"Отображать диаграмму",-1),wrt={class:"table"},Frt={scope:"col"},Crt={key:0,class:"fa-solid fa-arrow-up-wide-short"},Prt={key:1,class:"fa-solid fa-arrow-up-short-wide"},Srt={scope:"col"},xrt={key:0,class:"fa-solid fa-arrow-up-wide-short"},jrt={key:1,class:"fa-solid fa-arrow-up-short-wide"},Ort={scope:"col"},Trt={key:0,class:"fa-solid fa-arrow-up-wide-short"},Urt={key:1,class:"fa-solid fa-arrow-up-short-wide"},Irt={scope:"row"},Vrt={key:0,class:"d-flex justify-content-center mb-3"},Mrt={key:1,class:"text-danger my-3 text-center"};function Art(s,e,o,n,i,r){const d=Qe("Pie"),c=Qe("Tooltip"),h=Qe("Chart");return l(),a(v,null,[t("div",yrt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=g=>i.sort.is_individual=g),type:"checkbox",role:"switch",id:"need-individual"},null,512),[[z,i.sort.is_individual]]),vrt]),t("div",$rt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=g=>i.need_chart=g),type:"checkbox",role:"switch",id:"need-chart-display"},null,512),[[z,i.need_chart]]),krt]),(i.traffics||[]).length>0?(l(),a(v,{key:0},[t("table",wrt,[t("thead",null,[t("tr",null,[t("th",Frt,[t("a",{href:"javascript:void(0)",onClick:e[2]||(e[2]=g=>r.changeSort("id"))},[i.sort.key==="id"?(l(),a(v,{key:0},[i.sort.direction==="asc"?(l(),a("i",Crt)):(l(),a("i",Prt))],64)):u("",!0),_(" # ")])]),t("th",Srt,[t("a",{href:"javascript:void(0)",onClick:e[3]||(e[3]=g=>r.changeSort("source"))},[i.sort.key==="source"?(l(),a(v,{key:0},[i.sort.direction==="asc"?(l(),a("i",xrt)):(l(),a("i",jrt))],64)):u("",!0),_(" Источник ")])]),t("th",Ort,[t("a",{href:"javascript:void(0)",onClick:e[4]||(e[4]=g=>r.changeSort("count"))},[i.sort.key==="count"?(l(),a(v,{key:0},[i.sort.direction==="asc"?(l(),a("i",Trt)):(l(),a("i",Urt))],64)):u("",!0),_(" Число переходов ")])])])]),t("tbody",null,[(l(!0),a(v,null,O(i.traffics,g=>(l(),a("tr",null,[t("th",Irt,p(g.id),1),t("td",null,p(g.source),1),t("td",null,p(g.count),1)]))),256))])]),i.need_chart?(l(),a("div",Vrt,[T(h,{direction:"circular",size:{width:400,height:400},data:i.traffics,margin:i.margin,axis:i.axis,config:{controlHover:!1}},{layers:A(()=>[T(d,{dataKeys:["source","count"],"pie-style":{innerRadius:10,padAngle:.05}},null,8,["pie-style"])]),widgets:A(()=>[T(c,{config:i.tooltipConfig,hideLine:""},null,8,["config"])]),_:1},8,["data","margin","axis"])])):u("",!0)],64)):(l(),a("p",Mrt,"Нет данных по переходам:("))],64)}const Qd=oe(grt,[["render",Art]]);const Ert={class:"container"},Drt={class:"row my-3",style:{position:"sticky",top:"10px","z-index":"100"}},zrt={key:0,class:"col-md-4"},Brt={class:"row"},Lrt={class:"col-12"},Rrt={class:"form-check form-switch"},Nrt=t("label",{class:"form-check-label",for:"flexSwitchCheckDefault"}," Использовать временной период ",-1),qrt={class:"row"},Wrt={class:"col-12"},Yrt=t("h6",{class:"my-3 fw-bold"},"Основная статистика",-1),Hrt=t("p",{class:"fst-italic"}," Сводка всех показателей эффективности работы системы ",-1),Qrt={key:0,class:"table"},Grt=t("thead",null,[t("tr",{class:"bg-light"},[t("th",{scope:"col",style:{width:"200px"}},"Ключ"),t("th",{scope:"col"},"Значение")])],-1),Krt=t("th",{scope:"row"},"Всего пользователей в БД",-1),Jrt={class:"font-weight-bold"},Xrt=t("th",{scope:"row"},"Всего VIP",-1),Zrt={class:"font-weight-bold"},edt=t("th",{scope:"row"},"Администраторы в БД",-1),tdt={class:"font-weight-bold"},sdt=t("th",{scope:"row"},"Администраторы за работой",-1),odt={class:"font-weight-bold"},idt=t("th",{scope:"row"},"Всего кэшбэка на счету у пользователей, руб",-1),ndt={class:"font-weight-bold"},ldt={key:0},adt=t("th",{scope:"row"},"Всего кэшбэка начислено пользователям, руб",-1),rdt={class:"font-weight-bold"},ddt={key:0},cdt=t("th",{scope:"row"},"Всего кэшбэка списано у пользователей, руб",-1),udt={class:"font-weight-bold"},mdt={key:0},hdt=t("th",{scope:"row"},"Всего начислено кэшбэка первого уровня, руб",-1),pdt={class:"font-weight-bold"},_dt={key:0},fdt=t("th",{scope:"row"},"Всего начислено кэшбэка второго уровня, руб",-1),bdt={class:"font-weight-bold"},gdt={key:0},ydt=t("th",{scope:"row"},"Всего начислено кэшбэка третьего уровня, руб",-1),vdt={class:"font-weight-bold"},$dt={key:0},kdt=t("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),wdt={class:"col-12"},Fdt={class:"form-check form-switch my-3"},Cdt=t("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Отобразить графики",-1),Pdt={class:"row my-3 sticky-charts"},Sdt={class:"col-12"},xdt={class:"nav nav-tabs"},jdt={class:"nav-item"},Odt={class:"nav-item"},Tdt={class:"nav-item"},Udt={class:"nav-item"},Idt={key:0,class:"col-12"},Vdt={key:0,class:"d-flex justify-content-center mb-3"},Mdt={key:1,class:"text-danger my-2"},Adt={key:1,class:"w-100 overflow-x-scroll"},Edt={class:"table"},Ddt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Год"),t("th",{scope:"col"},"Месяц"),t("th",{scope:"col"},"Число пользователей")])],-1),zdt={scope:"row"},Bdt={key:1,class:"col-12"},Ldt=t("h6",{class:"my-2"},"Начисления",-1),Rdt={class:"d-flex justify-content-center mb-3"},Ndt={key:1,class:"text-danger my-3"},qdt=t("h6",{class:"my-2"},"Списания",-1),Wdt={class:"d-flex justify-content-center mb-3"},Ydt={key:1,class:"text-danger my-3"},Hdt={key:1,class:"w-100 overflow-x-scroll"},Qdt={class:"table"},Gdt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Год"),t("th",{scope:"col"},"Месяц"),t("th",{scope:"col"},"Начислено"),t("th",{scope:"col"},"Списано")])],-1),Kdt={scope:"row"},Jdt={key:2,class:"col-12"},Xdt={key:0,class:"d-flex justify-content-center mb-3"},Zdt={key:1,class:"text-danger my-3"},ect={key:1,class:"d-flex"},tct={class:"w-100 overflow-x-scroll"},sct={class:"w-100 overflow-x-scroll"},oct={key:0,class:"table"},ict=t("th",{scope:"col"},"#",-1),nct={scope:"col"},lct={key:0,class:"fa-solid fa-arrow-up-wide-short"},act={key:1,class:"fa-solid fa-arrow-up-short-wide"},rct={scope:"col"},dct={key:0,class:"fa-solid fa-arrow-up-wide-short"},cct={key:1,class:"fa-solid fa-arrow-up-short-wide"},uct={scope:"col"},mct={key:0,class:"fa-solid fa-arrow-up-wide-short"},hct={key:1,class:"fa-solid fa-arrow-up-short-wide"},pct={scope:"col"},_ct={key:0,class:"fa-solid fa-arrow-up-wide-short"},fct={key:1,class:"fa-solid fa-arrow-up-short-wide"},bct={scope:"col"},gct={key:0,class:"fa-solid fa-arrow-up-wide-short"},yct={key:1,class:"fa-solid fa-arrow-up-short-wide"},vct={scope:"row"},$ct={key:1,class:"text-danger my-3"},kct={key:3,class:"col-12"},wct={class:"w-100 overflow-x-scroll"},Fct={components:{Chart:oo,Grid:wo,Line:Sa,Bar:Fo,Tooltip:io,Responsive:xa,Pie:Hn,VueDatePicker:oi},data(){return{sort:{key:"price",direction:"asc"},need_charts:!1,need_date_range:!1,date:null,tab:0,botUser:null,loadedChart:!1,statistic:null,loading:!1,tooltipConfig:{sump:{label:"Сумма продаж",color:"#5d1010"},sum:{label:"Сумма",color:"#5d1010"},count:{label:"Кол-во",color:"#5d1010"},m:{label:"Месяц",color:"#54a375"},y:{label:"Год",color:"#0ea9cb"}},products:[{title:"1",count:1,price:2020},{title:"2",count:2,price:2020},{title:"3",count:3,price:2020},{title:"4",count:4,price:2020},{title:"5",count:5,price:2020}],orders:[{sump:0,m:1,y:2020},{sump:111,m:2,y:2020},{sump:222,m:3,y:2020},{sump:333,m:4,y:2020},{sump:444,m:5,y:2020}],users:[{count:0,m:1,y:2020},{count:111,m:2,y:2020},{count:222,m:3,y:2020},{count:333,m:4,y:2020},{count:444,m:5,y:2020}],cashback_up:[{sum:0,m:1,y:2020},{sum:111,m:2,y:2020},{sum:222,m:3,y:2020},{sum:333,m:4,y:2020},{sum:444,m:5,y:2020}],cashback_down:[{sum:0,m:1,y:2020},{sum:111,m:2,y:2020},{sum:222,m:3,y:2020},{sum:333,m:4,y:2020},{sum:444,m:5,y:2020}],direction:"horizontal",margin:{left:0,top:20,right:20,bottom:0},axis:{primary:{type:"band"},secondary:{domain:["dataMin","dataMax + 100"],type:"linear",ticks:11}}}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},preparedCashback(){if(this.cashback_up.length===0&&this.cashback_down.length===0)return[];let s=[];for(let e=0;e<this.cashback_up.length;e++){let o=null;for(let n=0;n<this.cashback_down.length;n++){let i=this.cashback_down[n],r=this.cashback_up[e];if(r.m===i.m&&r.y===i.y){o=this.cashback_down[n];break}}s.push({y:this.cashback_up[e].y||0,m:this.cashback_up[e].m||0,up:this.cashback_up[e].sum||0,down:o===null?0:o.sum})}return s}},watch:{sort:{handler:function(s){this.prepareStatistic()},deep:!0},need_date_range:function(){this.prepareStatistic()},date:function(){this.prepareStatistic()}},mounted(){const s=new Date,e=new Date(new Date().setDate(s.getDate()+7));this.date=[s,e],this.getSelf&&(this.botUser=this.getSelf,this.prepareStatistic()),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(o=>o.click()),this.$router.back()})},methods:{changeSort(s){this.sort.key=s,this.sort.direction=this.sort.direction==="asc"?"desc":"asc"},prepareStatistic(){return this.loadedChart=!1,this.$store.dispatch("statisticLoad",{date:this.date,need_all:!this.need_date_range,sort:this.sort}).then(s=>{this.statistic=s.statistic,this.orders=this.statistic.orders.sum,this.products=this.statistic.orders.products,this.users=this.statistic.users.sum,this.cashback_up=this.statistic.cashback_up.sum,this.cashback_down=this.statistic.cashback_down.sum,this.loadedChart=!0})},downloadBotStatistic(){this.$notify({title:"Внимание!",text:"Начался формироваться документ статистики!"}),this.$store.dispatch("downloadBotStatistic").then(s=>{this.$notify({title:"Отлично!",text:"Документ успешно сформирован",type:"success"})}).catch(()=>{this.$notify({title:"Упс!",text:"Что-то пошло не так...",type:"error"})})}}},Gd=Object.assign(Fct,{__name:"Statistic",setup(s){return(e,o)=>{const n=Qe("Marker");return l(),a("div",Ert,[t("div",Drt,[e.need_date_range?(l(),a("div",zrt,[T(Ie(oi),{modelValue:e.date,"onUpdate:modelValue":o[0]||(o[0]=i=>e.date=i),locale:"ru",range:""},null,8,["modelValue"])])):u("",!0)]),t("div",Brt,[t("div",Lrt,[t("div",Rrt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=i=>e.need_date_range=i),type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"},null,512),[[z,e.need_date_range]]),Nrt])])]),t("div",qrt,[t("div",Wrt,[Yrt,Hrt,e.statistic?(l(),a("table",Qrt,[Grt,t("tbody",null,[t("tr",null,[Krt,t("td",Jrt,p(e.statistic.users_in_bd||0),1)]),t("tr",null,[Xrt,t("td",Zrt,p(e.statistic.vip_in_bd||0),1)]),t("tr",null,[edt,t("td",tdt,p(e.statistic.admin_in_bd||0),1)]),t("tr",null,[sdt,t("td",odt,p(e.statistic.work_admin_in_bd||0),1)]),t("tr",null,[idt,t("td",ndt,[_(p((e.statistic.summary_cashback||0).toFixed(2))+" ",1),e.statistic.summary_cashback_people_count?(l(),a("strong",ldt,"("+p(e.statistic.summary_cashback_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[adt,t("td",rdt,[_(p((e.statistic.cashback_summary_up||0).toFixed(2))+" ",1),e.statistic.cashback_summary_up_people_count?(l(),a("strong",ddt,"("+p(e.statistic.cashback_summary_up_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[cdt,t("td",udt,[_(p((e.statistic.cashback_summary_down||0).toFixed(2))+" ",1),e.statistic.cashback_summary_down_people_count?(l(),a("strong",mdt,"("+p(e.statistic.cashback_summary_down_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[hdt,t("td",pdt,[_(p((e.statistic.cashback_up_level_1||0).toFixed(2))+" ",1),e.statistic.cashback_up_level_1_people_count?(l(),a("strong",_dt,"("+p(e.statistic.cashback_up_level_1_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[fdt,t("td",bdt,[_(p((e.statistic.cashback_up_level_2||0).toFixed(2))+" ",1),e.statistic.cashback_up_level_2_people_count?(l(),a("strong",gdt,"("+p(e.statistic.cashback_up_level_2_people_count)+" чел)",1)):u("",!0)])]),t("tr",null,[ydt,t("td",vdt,[_(p((e.statistic.cashback_up_level_3||0).toFixed(2))+" ",1),e.statistic.cashback_up_level_3_people_count?(l(),a("strong",$dt,"("+p(e.statistic.cashback_up_level_3_people_count)+" чел)",1)):u("",!0)])])])])):u("",!0),t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=(...i)=>e.downloadBotStatistic&&e.downloadBotStatistic(...i)),class:"btn w-100 btn-outline-info p-3"},[kdt,_(" Скачать статистику ")])]),t("div",wdt,[t("div",Fdt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=i=>e.need_charts=i),type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"},null,512),[[z,e.need_charts]]),Cdt]),t("div",Pdt,[t("div",Sdt,[t("ul",xdt,[t("li",jdt,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[4]||(o[4]=i=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Пользователи",2)]),t("li",Odt,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[5]||(o[5]=i=>e.tab=1),"aria-current":"page",href:"javascript:void(0)"},"Бонусы",2)]),t("li",Tdt,[t("a",{class:C(["nav-link",{active:e.tab===2}]),onClick:o[6]||(o[6]=i=>e.tab=2),"aria-current":"page",href:"javascript:void(0)"},"Продажи",2)]),t("li",Udt,[t("a",{class:C(["nav-link",{active:e.tab===3}]),onClick:o[7]||(o[7]=i=>e.tab=3),"aria-current":"page",href:"javascript:void(0)"},"Переходы",2)])])]),e.tab===0?(l(),a("div",Idt,[e.need_charts?(l(),a("div",Vdt,[e.loadedChart&&(e.users||[]).length>0?(l(),M(Ie(oo),{key:0,size:{width:300,height:320},data:e.users,margin:e.margin,direction:e.direction,axis:e.axis},{layers:A(()=>[T(Ie(wo),{strokeDasharray:"2,2"}),T(Ie(Fo),{dataKeys:["m","count"],barStyle:{fill:"#ffe775"}}),T(n,{value:1e3,label:"Avg.",color:"#e76f51",strokeWidth:"2",strokeDasharray:"6 6"})]),widgets:A(()=>[T(Ie(io),{borderColor:"#48CAE4",config:e.tooltipConfig},null,8,["config"])]),_:1},8,["data","margin","direction","axis"])):(l(),a("p",Mdt,"Статистика еще не загружена или её нет"))])):u("",!0),(e.users||[]).length>0?(l(),a("div",Adt,[t("table",Edt,[Ddt,t("tbody",null,[(l(!0),a(v,null,O(e.users,(i,r)=>(l(),a("tr",null,[t("th",zdt,p(r+1),1),t("td",null,p(i.y),1),t("td",null,p(i.m),1),t("td",null,p(i.count),1)]))),256))])])])):u("",!0)])):u("",!0),e.tab===1?(l(),a("div",Bdt,[e.need_charts?(l(),a(v,{key:0},[Ldt,t("div",Rdt,[e.loadedChart&&(e.cashback_up||[]).length>0?(l(),M(Ie(oo),{key:0,size:{width:300,height:320},data:e.cashback_up,margin:e.margin,direction:e.direction,axis:e.axis},{layers:A(()=>[T(Ie(wo),{strokeDasharray:"2,2"}),T(Ie(Fo),{dataKeys:["m","sum"],barStyle:{fill:"#ffe775"}}),T(n,{value:1e3,label:"Avg.",color:"#e76f51",strokeWidth:"2",strokeDasharray:"6 6"})]),widgets:A(()=>[T(Ie(io),{borderColor:"#48CAE4",config:e.tooltipConfig},null,8,["config"])]),_:1},8,["data","margin","direction","axis"])):(l(),a("p",Ndt,"Статистика еще не загружена или её нет"))]),qdt,t("div",Wdt,[e.loadedChart&&(e.cashback_down||[]).length>0?(l(),M(Ie(oo),{key:0,size:{width:300,height:320},data:e.cashback_down,margin:e.margin,direction:e.direction,axis:e.axis},{layers:A(()=>[T(Ie(wo),{strokeDasharray:"2,2"}),T(Ie(Fo),{dataKeys:["m","sum"],barStyle:{fill:"#ffe775"}}),T(n,{value:1e3,label:"Avg.",color:"#e76f51",strokeWidth:"2",strokeDasharray:"6 6"})]),widgets:A(()=>[T(Ie(io),{borderColor:"#48CAE4",config:e.tooltipConfig},null,8,["config"])]),_:1},8,["data","margin","direction","axis"])):(l(),a("p",Ydt,"Статистика еще не загружена или её нет"))])],64)):u("",!0),(e.preparedCashback||[]).length>0?(l(),a("div",Hdt,[t("table",Qdt,[Gdt,t("tbody",null,[(l(!0),a(v,null,O(e.preparedCashback,(i,r)=>(l(),a("tr",null,[t("th",Kdt,p(r+1),1),t("td",null,p(i.y),1),t("td",null,p(i.m),1),t("td",null,p(i.up),1),t("td",null,p(i.down),1)]))),256))])])])):u("",!0)])):u("",!0),e.tab===2?(l(),a("div",Jdt,[e.need_charts?(l(),a("div",Xdt,[e.loadedChart&&(e.orders||[]).length>0?(l(),M(Ie(oo),{key:0,size:{width:300,height:320},data:e.orders,margin:e.margin,direction:e.direction,axis:e.axis},{layers:A(()=>[T(Ie(wo),{strokeDasharray:"2,2"}),T(Ie(Fo),{dataKeys:["m","sump"],barStyle:{fill:"#ffe775"}}),T(n,{value:1e3,label:"Avg.",color:"#e76f51",strokeWidth:"2",strokeDasharray:"6 6"})]),widgets:A(()=>[T(Ie(io),{borderColor:"#48CAE4",config:e.tooltipConfig},null,8,["config"])]),_:1},8,["data","margin","direction","axis"])):(l(),a("p",Zdt,"Статистика еще не загружена или её нет"))])):u("",!0),e.need_charts?(l(),a("div",ect,[t("div",tct,[T(Ie(oo),{direction:"circular",size:{width:600,height:400},data:e.products,margin:{left:0,top:50,right:0,bottom:0},axis:e.axis,config:{controlHover:!1}},{layers:A(()=>[T(Ie(Hn),{dataKeys:["title","count","price"],"pie-style":{innerRadius:10,padAngle:.05}},null,8,["pie-style"])]),widgets:A(()=>[T(Ie(io),{config:{title:{label:"Название"},price:{label:"Выручено средств"},count:{label:"Кол-во"},volume_count_ratio:{hide:!0},volume_price_ratio:{hide:!0}},hideLine:""})]),_:1},8,["data","axis"])])])):u("",!0),t("div",sct,[(e.products||[]).length>0?(l(),a("table",oct,[t("thead",null,[t("tr",null,[ict,t("th",nct,[t("a",{href:"javascript:void(0)",onClick:o[8]||(o[8]=i=>e.changeSort("title"))},[e.sort.key==="title"?(l(),a(v,{key:0},[e.sort.direction==="asc"?(l(),a("i",lct)):(l(),a("i",act))],64)):u("",!0),_(" Название ")])]),t("th",rct,[t("a",{href:"javascript:void(0)",onClick:o[9]||(o[9]=i=>e.changeSort("price"))},[e.sort.key==="price"?(l(),a(v,{key:0},[e.sort.direction==="asc"?(l(),a("i",dct)):(l(),a("i",cct))],64)):u("",!0),_(" Объем продаж ")])]),t("th",uct,[t("a",{href:"javascript:void(0)",onClick:o[10]||(o[10]=i=>e.changeSort("count"))},[e.sort.key==="count"?(l(),a(v,{key:0},[e.sort.direction==="asc"?(l(),a("i",mct)):(l(),a("i",hct))],64)):u("",!0),_(" Продано ед. ")])]),t("th",pct,[t("a",{href:"javascript:void(0)",onClick:o[11]||(o[11]=i=>e.changeSort("volume_count_ratio"))},[e.sort.key==="volume_count_ratio"?(l(),a(v,{key:0},[e.sort.direction==="asc"?(l(),a("i",_ct)):(l(),a("i",fct))],64)):u("",!0),_(" % от объема ")])]),t("th",bct,[t("a",{href:"javascript:void(0)",onClick:o[12]||(o[12]=i=>e.changeSort("volume_price_ratio"))},[e.sort.key==="volume_price_ratio"?(l(),a(v,{key:0},[e.sort.direction==="asc"?(l(),a("i",gct)):(l(),a("i",yct))],64)):u("",!0),_(" % от числа ")])])])]),t("tbody",null,[(l(!0),a(v,null,O(e.products,(i,r)=>(l(),a("tr",null,[t("th",vct,p(r+1),1),t("td",null,p(i.title),1),t("td",null,p(i.price),1),t("td",null,p(i.count),1),t("td",null,p(i.volume_count_ratio),1),t("td",null,p(i.volume_price_ratio),1)]))),256))])])):(l(),a("p",$ct,"Нет данных по продажам за выбранный период:("))])])):u("",!0),e.tab===3?(l(),a("div",kct,[t("div",wct,[T(Qd,{date:e.date},null,8,["date"])])])):u("",!0)])])])])}}}),Cct=Object.freeze(Object.defineProperty({__proto__:null,default:Gd},Symbol.toStringTag,{value:"Module"})),Pct={class:"form-floating mb-2"},Sct=t("label",{for:"floatingInput"},"Текст промокода",-1),xct={class:"form-floating mb-2"},jct=t("label",{for:"floatingTextarea"}," Назначение промокода",-1),Oct={class:"form-check form-switch mb-2"},Tct=t("label",{class:"form-check-label",for:"is_active"},"Доступен для активации",-1),Uct={class:"form-floating mb-2"},Ict=t("label",{for:"floatingInput"}," Максимальное число активаций кода",-1),Vct={class:"alert alert-light mb-2"},Mct={class:"form-check form-switch mb-2"},Act=t("label",{class:"form-check-label",for:"discount_in_percent"},"Скидка в процентах",-1),Ect={key:0,class:"form-floating mb-2"},Dct=t("label",{for:"floatingInput"}," Величина скидки \\ баллов, руб",-1),zct={key:1,class:"form-floating mb-2"},Bct=t("label",{for:"floatingInput"}," Величина скидки \\ баллов, %",-1),Lct={class:"form-floating mb-2"},Rct=t("label",{for:"floatingInput"}," Сумма активации от... руб",-1),Nct={class:"form-floating mb-2"},qct=t("label",{for:"floatingInput"},"Доступен до...",-1),Wct={class:"form-check form-switch mb-2"},Yct=t("label",{class:"form-check-label",for:"is_active"},"Сгенерировать красивый сертификат",-1),Hct={type:"submit",class:"btn btn-primary w-100 p-3"},Qct={key:0},Gct={key:1},Kct={props:["code"],data(){return{step:0,load:!1,need_reset:!1,promoCodeForm:{id:null,code:null,description:null,cashback_amount:0,max_activation_count:1,is_active:!0,available_to:null,activate_price:0,need_certificate:!0,config:{discount_in_percent:!1}}}},computed:{...G(["getSelf"]),bot(){return window.currentBot}},watch:{promoCodeForm:{handler(s){this.need_reset=!0},deep:!0},"promoCodeForm.config.discount_in_percent":{handler(s){this.promoCodeForm.config.discount_in_percent&&this.promoCodeForm.cashback_amount>100&&(this.promoCodeForm.cashback_amount=50)},deep:!0}},mounted(){this.code&&this.$nextTick(()=>{this.promoCodeForm={id:this.code.id||null,description:this.code.description||null,code:this.code.code||null,cashback_amount:this.code.cashback_amount||0,max_activation_count:this.code.max_activation_count||1,is_active:this.code.is_active||!1,available_to:this.code.available_to?this.$filters.local(this.code.available_to):null},this.code.config&&(this.promoCodeForm.config={discount_in_percent:this.code.config.discount_in_percent||!1})})},methods:{submitForm(){let s=new FormData;Object.keys(this.promoCodeForm).forEach(e=>{const o=this.promoCodeForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("bot_id",this.bot.id),this.$store.dispatch("storePromoCodes",{promoCodeForm:s}).then(e=>{this.promoCodeForm={id:null,code:null,description:null,cashback_amount:0,max_activation_count:1,is_active:!0,need_certificate:!0,config:{discount_in_percent:!1}},this.$emit("callback",e.data),this.$notify("Промокод успешно создан")}).catch(e=>{this.$notify("Ошибка создания промокода")})}}},Jct=Object.assign(Kct,{__name:"PromoCodesForm",setup(s){return(e,o)=>(l(),a("form",{onSubmit:o[10]||(o[10]=W((...n)=>e.submitForm&&e.submitForm(...n),["prevent"]))},[t("div",Pct,[f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.promoCodeForm.code=n),maxlength:"255",class:"form-control",required:"",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.promoCodeForm.code]]),Sct]),t("div",xct,[f(t("textarea",{class:"form-control",maxlength:"255","onUpdate:modelValue":o[1]||(o[1]=n=>e.promoCodeForm.description=n),placeholder:"Leave a comment here",id:"floatingTextarea",required:""},null,512),[[k,e.promoCodeForm.description]]),jct]),t("div",Oct,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=n=>e.promoCodeForm.is_active=n),type:"checkbox",role:"switch",id:"is_active"},null,512),[[z,e.promoCodeForm.is_active]]),Tct]),t("div",Uct,[f(t("input",{type:"number",step:"1",min:"1","onUpdate:modelValue":o[3]||(o[3]=n=>e.promoCodeForm.max_activation_count=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.promoCodeForm.max_activation_count]]),Ict]),t("div",Vct,[_(" Данный параметр позволяет настроить скидку при покупке товаров в магазине в "),t("span",{class:C(["text-primary",{"fw-bold":e.promoCodeForm.config.discount_in_percent}])},"%",2),_(" или в "),t("span",{class:C(["text-primary",{"fw-bold":!e.promoCodeForm.config.discount_in_percent}])},"рублях",2)]),t("div",Mct,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=n=>e.promoCodeForm.config.discount_in_percent=n),type:"checkbox",role:"switch",id:"discount_in_percent"},null,512),[[z,e.promoCodeForm.config.discount_in_percent]]),Act]),e.promoCodeForm.config.discount_in_percent?u("",!0):(l(),a("div",Ect,[f(t("input",{type:"number",step:"1",min:"1","onUpdate:modelValue":o[5]||(o[5]=n=>e.promoCodeForm.cashback_amount=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.promoCodeForm.cashback_amount]]),Dct])),e.promoCodeForm.config.discount_in_percent?(l(),a("div",zct,[f(t("input",{type:"number",step:"1",min:"1",max:"100","onUpdate:modelValue":o[6]||(o[6]=n=>e.promoCodeForm.cashback_amount=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.promoCodeForm.cashback_amount]]),Bct])):u("",!0),t("div",Lct,[f(t("input",{type:"number",step:"1",min:"0","onUpdate:modelValue":o[7]||(o[7]=n=>e.promoCodeForm.activate_price=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.promoCodeForm.activate_price]]),Rct]),t("div",Nct,[f(t("input",{type:"datetime-local","onUpdate:modelValue":o[8]||(o[8]=n=>e.promoCodeForm.available_to=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.promoCodeForm.available_to]]),qct]),t("div",Wct,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=n=>e.promoCodeForm.need_certificate=n),type:"checkbox",role:"switch",id:"need_certificate"},null,512),[[z,e.promoCodeForm.need_certificate]]),Yct]),t("button",Hct,[e.promoCodeForm.id==null?(l(),a("span",Qct,"Создать промокод")):(l(),a("span",Gct,"Обновить промокод"))])],32))}}),Xct={class:"row"},Zct={class:"col-12"},eut={class:"input-group mb-2"},tut={class:"form-floating"},sut=t("label",{for:"floatingInput"},"Поиск промокода",-1),out={class:"row"},iut={class:"col-12"},nut={class:"form-floating"},lut=ze('<option value="id">По номеру</option><option value="code">Код</option><option value="description">Описание</option><option value="cashback_amount">Сумма скидки</option><option value="is_active">Активные</option><option value="max_activation_count">Максимальное число активаций </option><option value="updated_at">По дате обновления</option>',7),aut=[lut],rut=t("label",{for:"floatingSelect"},"Тип сортировки",-1),dut={key:0,class:"mb-2"},cut=t("i",{class:"fa-solid fa-caret-up"},null,-1),uut=t("i",{class:"fa-solid fa-caret-down"},null,-1),mut={key:0,class:"row row-cols-1"},hut={class:"col mb-2"},put={class:"card"},_ut={class:"card-header d-flex justify-content-between align-items-center bg-transparent"},fut={key:0,class:"fa-solid fa-chevron-down text-success"},but={key:1,class:"fa-solid fa-xmark text-danger"},gut=["onClick"],yut={class:"card-body"},vut=["onClick"],$ut={class:"card-text mb-2 fst-italic"},kut={class:"card-text mb-0 d-flex justify-content-between"},wut={class:"fw-bold"},Fut={key:0},Cut={key:1},Put={class:"fw-bold"},Sut={key:1},xut=t("div",{class:"alert alert-warning alert-dismissible fade show mb-2",role:"alert"},[t("strong",null,"Внимание!"),_(" Вы еще не добавили ни одного промокода! "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close"})],-1),jut={class:"position-relative p-5 text-center text-muted bg-body border border-dashed rounded-2"},Out={class:"d-flex justify-content-center mb-3"},Tut={alt:"",width:"100",height:"100"},Uut=t("h1",{class:"text-body-emphasis"},"Создание промокода",-1),Iut=t("p",{class:"col-lg-8 mx-auto fs-6 text-muted"}," Промокод - это инструмент мотивации пользователей пользоваться вашим сервисом. Он позволяет клиентам получать некоторые бонусы за активацию кода, а вы в свою очередь будете видеть статистику активация прмокода. ",-1),Vut={class:"row"},Mut={class:"col-12"},Aut={class:"modal fade",id:"remove-promo-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Eut={class:"modal-dialog modal-dialog-centered"},Dut={key:0,class:"modal-content"},zut={class:"modal-body"},But={class:"d-flex justify-content-center w-100 flex-row-reverse"},Lut=t("button",{type:"button",class:"btn btn-secondary ml-2",style:{"margin-left":"10px"},"data-bs-dismiss":"modal"},"Нет, отменить ",-1),Rut={data(){return{direction:"desc",order:"updated_at",selected:null,remove_promocode_modal:null,show:!0,loading:!0,codes:[],search:null,paginate_object:null}},computed:{...G(["getSelf","getPromoCodes","getPromoCodesPaginateObject"]),bot(){return window.currentBot}},mounted(){this.remove_promocode_modal=new bootstrap.Modal(document.getElementById("remove-promo-modal"),{}),this.loadPromoCodes()},methods:{changeDirection(s){this.direction=s,this.loadPromoCodes(0)},prepareForRemove(s){this.selected=null,this.$nextTick(()=>{this.selected=s,this.remove_promocode_modal.show()})},removeCode(){this.selected&&(this.loading=!0,this.$store.dispatch("removePromoCodes",{promoCodeId:this.selected.id}).then(s=>{this.loading=!1,this.loadPromoCodes(0),this.$notify({type:"success",text:"Промокод успешно удален"}),this.remove_promocode_modal.hide()}).catch(()=>{this.loading=!1,this.$notify({type:"error",text:"Ошибка удаления промокода"}),this.remove_promocode_modal.hide()}))},createPromoCode(){this.$emit("create")},nextPromoCodes(s){this.loadPromoCodes(s)},selectEvent(s){this.$emit("select",s)},loadPromoCodes(s=0){this.loading=!0,this.$store.dispatch("loadPromoCodes",{dataObject:{bot_id:this.bot.id||null,search:this.search,order:this.order,direction:this.direction},page:s,size:20}).then(e=>{this.loading=!1,this.codes=this.getPromoCodes,this.paginate_object=this.getPromoCodesPaginateObject}).catch(()=>{this.loading=!1})}}},Nut=Object.assign(Rut,{__name:"PromoCodesList",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[t("div",Xct,[t("div",Zct,[t("div",eut,[t("div",tut,[f(t("input",{type:"search","onUpdate:modelValue":o[0]||(o[0]=i=>e.search=i),class:"form-control border-light",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.search]]),sut]),t("button",{class:"btn btn-outline-light text-secondary",onClick:o[1]||(o[1]=i=>e.loadPromoCodes(0)),type:"button",id:"promocode-search-and-filter"},"Найти ")])])]),t("div",out,[t("div",iut,[t("div",nut,[e.order?(l(),a("select",{key:0,class:"form-select",onChange:o[2]||(o[2]=i=>e.loadPromoCodes(0)),id:"floatingSelect","aria-label":"Floating label select example"},aut,32)):u("",!0),rut]),e.order!=null?(l(),a("p",dut,[_("Направление сортировки: "),e.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[3]||(o[3]=i=>e.changeDirection("desc"))},[_("по возрастанию "),cut])):u("",!0),e.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[4]||(o[4]=i=>e.changeDirection("asc"))},[_("по убыванию "),uut])):u("",!0)])):u("",!0)])]),e.codes.length>0?(l(),a("div",mut,[(l(!0),a(v,null,O(e.codes,(i,r)=>{var d,c;return l(),a("div",hut,[t("div",put,[t("div",_ut,[t("span",null,[i.is_active?(l(),a("i",fut)):(l(),a("i",but)),_(" #"+p(i.id),1)]),i.deleted_at==null?(l(),a("a",{key:0,href:"javascript:void(0)",onClick:h=>e.prepareForRemove(i),style:{"font-size":"12px"},class:"btn btn-link"}," Удалить ",8,gut)):u("",!0),t("span",null,p(i.current_activation_count||0)+" / "+p(i.max_activation_count),1)]),t("div",yut,[t("h5",{onClick:h=>e.selectEvent(i),class:"card-title fw-bold"},p(i.code||"Не указано"),9,vut),t("p",$ut,p(i.description||"Не указано"),1),t("p",kut,[t("span",null,[_(" Скидка:"),t("strong",wut,[_("-"+p(i.cashback_amount||0)+" ",1),(d=i.config)!=null&&d.discount_in_percent?u("",!0):(l(),a("span",Fut,"руб")),(c=i.config)!=null&&c.discount_in_percent?(l(),a("span",Cut,"%")):u("",!0)])]),t("span",null,[_("Активация от: "),t("strong",Put,p(i.activate_price||0)+" руб",1)])])])])])}),256))])):(l(),a("div",Sut,[xut,t("div",jut,[t("div",Out,[f(t("img",Tut,null,512),[[n,"/images/icon.png"]])]),Uut,Iut])])),t("div",Vut,[t("div",Mut,[e.paginate_object&&e.codes.length>0?(l(),M(ja,{key:0,onPagination_page:e.nextPromoCodes,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])]),t("div",Aut,[t("div",Eut,[e.selected?(l(),a("div",Dut,[t("div",zut,[t("p",null,"Вы действительно хотите удалить "+p(e.selected.code||e.selected.id||"этот промокод")+"?",1),t("div",But,[Lut,t("button",{type:"button",onClick:o[5]||(o[5]=(...i)=>e.removeCode&&e.removeCode(...i)),class:"btn btn-primary"},"Да, удалить ")])])])):u("",!0)])])],64)}}}),qut={class:"container py-2"},Wut={class:"modal fade",id:"promocode-form",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Yut={class:"modal-dialog modal-fullscreen"},Hut={class:"modal-content"},Qut=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Gut={class:"modal-body"},Kut={class:"col-12"},Jut={class:"fixed-footer p-3"},Xut={props:["bot"],data(){return{part:0,tab:0,promocodeFormModal:null,selectedPromoCode:null,loadForm:!1,loadTable:!1}},computed:{tg(){return window.Telegram.WebApp}},mounted(){this.promocodeFormModal=new bootstrap.Modal("#promocode-form",{}),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{callbackForm(){this.loadTable=!0,this.selectedPromoCode=null,this.promocodeFormModal.hide(),this.$nextTick(()=>{this.loadTable=!1})},createPromoCode(){this.selectedPromoCode=null,this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.promocodeFormModal.show()})},selectPromoCode(s){this.loadForm=!0,this.$nextTick(()=>{this.loadForm=!1,this.selectedPromoCode=s,this.promocodeFormModal.show()})}}},Kd=Object.assign(Xut,{__name:"Promocodes",setup(s){return(e,o)=>(l(),a(v,null,[t("div",qut,[e.loadTable?u("",!0):(l(),M(Nut,{key:0,onCreate:e.createPromoCode,onSelect:e.selectPromoCode,bot:s.bot},null,8,["onCreate","onSelect","bot"]))]),t("div",Wut,[t("div",Yut,[t("div",Hut,[Qut,t("div",Gut,[t("div",Kut,[e.loadForm?u("",!0):(l(),M(Jct,{key:0,onCallback:e.callbackForm,code:e.selectedPromoCode},null,8,["onCallback","code"]))])])])])]),t("div",Jut,[t("button",{type:"button",onClick:o[0]||(o[0]=(...n)=>e.createPromoCode&&e.createPromoCode(...n)),class:"btn btn-primary w-100 p-3"}," Создать новый промокод ")])],64))}}),Zut=Object.freeze(Object.defineProperty({__proto__:null,default:Kd},Symbol.toStringTag,{value:"Module"}));const emt={name:"App",data(){return{spent_time_counter:0,is_requested:!1,passwordForm:{password:null,page_id:null}}},computed:{tg(){return window.Telegram.WebApp}},mounted(){const s=new URLSearchParams(window.location.search);this.passwordForm.page_id=JSON.parse(s.get("page_id"))||null,localStorage.getItem("cashman_password_activate_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_password_activate_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_password_activate_counter",this.spent_time_counter)},1e3)},submit(){this.startTimer(),this.$store.dispatch("activatePassword",{passwordForm:this.passwordForm}).then(s=>{this.$notify({title:"Пароль страницы",text:"Пароль страницы успешно активирован!",type:"success"}),this.passwordForm.password=null,this.tg.close()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка активации пароля!",type:"error"})})}}},tmt={class:"container py-3"},smt={class:"row"},omt={class:"col-12"},imt={class:"card"},nmt={class:"card-body"},lmt=t("h5",{class:"text-center fw-bold my-3"},"Приветствуем!",-1),amt=t("p",{class:"text-center fst-italic"}," У вас есть пароль от данной страницы? Отлично! Активируйте его прямо сейчас и наслаждайтесь эксклюзивными преимуществами! ",-1),rmt={class:"form-floating mb-3"},dmt=t("label",{for:"floatingInput"},[t("i",{class:"input-icon fa-solid fa-terminal"}),_(" Ваш пароль")],-1),cmt=["disabled"],umt={key:0,class:"color-white"},mmt={key:1,class:"color-white"};function hmt(s,e,o,n,i,r){return l(),a("div",tmt,[t("div",smt,[t("div",omt,[t("div",imt,[t("div",nmt,[lmt,amt,t("form",{onSubmit:e[1]||(e[1]=W((...d)=>r.submit&&r.submit(...d),["prevent"]))},[t("div",rmt,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>i.passwordForm.password=d),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,i.passwordForm.password]]),dmt]),t("button",{type:"submit",disabled:i.spent_time_counter>0,class:"btn w-100 btn-primary mb-2 p-3"},[i.spent_time_counter<=0?(l(),a("span",umt,"Активировать пароль")):(l(),a("span",mmt,"Осталось ждать "+p(i.spent_time_counter)+" сек.",1))],8,cmt)],32)])])])])])}const Jd=oe(emt,[["render",hmt]]),pmt=Object.freeze(Object.defineProperty({__proto__:null,default:Jd},Symbol.toStringTag,{value:"Module"}));const _mt={name:"App",data(){return{rules:null,sending:!1,action:null,photo:null,hasProfileData:!1,instaForm:{comment:null,name:null,phone:null}}},computed:{canPlay(){return this.action?this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.loadServiceData().then(()=>{this.prepareUserData()})},methods:{lose(){this.$notify({title:"Упс!",text:"Вы израсходовали все попытки!",type:"error"})},prepareUserData(){return this.$store.dispatch("instagramQuestPrepare").then(s=>{this.action=s.action,this.canPlay||this.$notify({title:"Упс!",text:"Вы израсходовали все попытки!",type:"error"})})},loadServiceData(){return this.$store.dispatch("instagramQuestLoadData").then(s=>{this.rules=s.rules})},removePhoto(){this.photo=null},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(s){const e=s.target.files;this.photo=e[0]},callbackPlayerForm(s){this.instaForm={...this.instaForm,...s},this.hasProfileData=!0},submit(){let s=new FormData;Object.keys(this.instaForm).forEach(e=>{const o=this.instaForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("photo",this.photo),this.$store.dispatch("instagramQuestResult",{instaForm:s}).then(e=>{this.sending=!1,this.instaForm={comment:null,name:null,phone:null},this.photo=null,this.hasProfileData=!1,this.$notify({title:"Вы выиграли!",text:"Наш менеджер свяжется с вами для дальнейших инструкций.",type:"success"}),setTimeout(()=>{this.prepareUserData()},5e3)}).catch(e=>{})}}},sn=s=>(Ge("data-v-5f02037e"),s=s(),Ke(),s),fmt={class:"container py-3"},bmt={class:"row"},gmt={class:"col-12"},ymt=sn(()=>t("h4",null,"Правила данного задания",-1)),vmt={key:0,class:"alert-light alert"},$mt={key:1,class:"alert-light alert"},kmt={key:2,class:"text-center"},wmt={class:"fw-bold text-primary"},Fmt={class:"fw-bold text-primary"},Cmt={key:4,class:"card"},Pmt={class:"card-body"},Smt={key:0,for:"photos",style:{"font-size":"14px","min-height":"300px"},class:"photo-loader my-2 d-flex justify-content-center align-items-center flex-column text-center w-100"},xmt=sn(()=>t("i",{class:"fa-brands fa-instagram text-primary"},null,-1)),jmt=sn(()=>t("p",{class:"mt-3 font-16 text-primary"}," Нажмите для выбора фотографии",-1)),Omt={key:1,style:{"font-size":"14px","min-height":"300px"},class:"img-preview w-100 overflow-hidden my-2"},Tmt={class:"w-100 object-fit-cover"},Umt={class:"remove"},Imt=sn(()=>t("i",{class:"fa-regular fa-trash-can mr-2 text-primary"},null,-1));function Vmt(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",fmt,[t("div",bmt,[t("div",gmt,[ymt,i.rules?(l(),a("p",vmt,p(i.rules),1)):(l(),a("p",$mt," Вам необходима загрузить скриншот из социальной сети, на котором видно что вы поделились нашим рекламным банером и он находился у вас на странице какое-то время. ")),r.canPlay?(l(),a("p",kmt,[_("Ваши попытки: "),t("strong",wmt,p(i.action.current_attempts||0),1),_(" из "),t("strong",Fmt,p(i.action.max_attempts||1),1)])):(l(),a("p",{key:3,onClick:e[0]||(e[0]=(...c)=>r.lose&&r.lose(...c)),class:"alert alert-light text-center fw-bold text-danger"},"Вы израсходовали все ваши попытки")),r.canPlay?(l(),a("div",Cmt,[t("div",Pmt,[i.photo?u("",!0):(l(),a("label",Smt,[xmt,t("input",{type:"file",id:"photos",accept:"image/*",onChange:e[1]||(e[1]=(...c)=>r.onChangePhotos&&r.onChangePhotos(...c)),style:{display:"none"}},null,32),jmt])),i.photo?(l(),a("div",Omt,[f(t("img",Tmt,null,512),[[d,r.getPhoto().imageUrl]]),t("div",Umt,[t("a",{onClick:e[2]||(e[2]=(...c)=>r.removePhoto&&r.removePhoto(...c)),class:"btn btn-outline-light rounded-5 p-3 shadow-s"},[Imt,_(" Удалить фото")])])])):u("",!0),i.photo?(l(),a("button",{key:2,onClick:e[3]||(e[3]=(...c)=>r.submit&&r.submit(...c)),type:"button",class:"btn btn-primary p-3 w-100"}," Получить приз ")):u("",!0)])])):u("",!0)])])])}const Xd=oe(_mt,[["render",Vmt],["__scopeId","data-v-5f02037e"]]),Mmt=Object.freeze(Object.defineProperty({__proto__:null,default:Xd},Symbol.toStringTag,{value:"Module"}));const Amt={name:"App",data(){return{rules:null,sending:!1,photos:[],form:{comment:null,name:null,phone:null}}},computed:{},mounted(){this.loadServiceData()},methods:{loadServiceData(){return this.$store.dispatch("requestPhotoLoadData").then(s=>{this.rules=s.rules})},removePhoto(){this.photo=null},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},submit(){let s=new FormData;if(Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.$store.dispatch("requestPhotoResult",{form:s}).then(e=>{this.sending=!1,this.form={comment:null,name:null,phone:null},this.photos=[],this.$notify({title:"Отлично!",text:"Наш менеджер свяжется с вами для дальнейших инструкций.",type:"success"})}).catch(e=>{})}}},Zd=s=>(Ge("data-v-a474ca72"),s=s(),Ke(),s),Emt={class:"container py-3"},Dmt={class:"row"},zmt={class:"col-12"},Bmt=Zd(()=>t("h4",null,"Правила",-1)),Lmt={key:0,class:"alert-light alert"},Rmt={key:1,class:"alert-light alert"},Nmt={class:"card"},qmt={class:"card-body"},Wmt={class:"d-flex flex-wrap justify-content-center"},Ymt={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},Hmt={class:"mb-2 mr-2 img-preview"},Qmt={class:"remove"},Gmt=["onClick"],Kmt={class:"form-floating mb-2"},Jmt=Zd(()=>t("label",{for:"floatingTextarea"},"Ваше сообщение",-1));function Xmt(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",Emt,[t("div",Dmt,[t("div",zmt,[Bmt,i.rules?(l(),a("p",Lmt,p(i.rules),1)):(l(),a("p",Rmt," Вам необходима загрузить скриншот и добавить к нему комментарий ")),t("div",Nmt,[t("div",qmt,[t("div",Wmt,[t("label",Ymt,[_(" + "),t("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:e[0]||(e[0]=(...c)=>r.onChangePhotos&&r.onChangePhotos(...c)),style:{display:"none"}},null,32)]),i.photos.length>0?(l(!0),a(v,{key:0},O(i.photos,(c,h)=>(l(),a("div",Hmt,[f(t("img",null,null,512),[[d,r.getPhoto(c).imageUrl]]),t("div",Qmt,[t("a",{href:"javascript:void(0)",onClick:g=>r.removePhoto(h)},"Удалить",8,Gmt)])]))),256)):u("",!0)]),t("div",Kmt,[f(t("textarea",{class:"form-control","onUpdate:modelValue":e[1]||(e[1]=c=>i.form.comment=c),placeholder:"Введите текст",id:"floatingTextarea",style:{height:"150px"}},null,512),[[k,i.form.comment]]),Jmt]),i.photos.length>0?(l(),a("button",{key:0,onClick:e[2]||(e[2]=(...c)=>r.submit&&r.submit(...c)),type:"button",class:"btn btn-primary p-3 w-100"}," Отправить ")):u("",!0)])])])])])}const ec=oe(Amt,[["render",Xmt],["__scopeId","data-v-a474ca72"]]),Zmt=Object.freeze(Object.defineProperty({__proto__:null,default:ec},Symbol.toStringTag,{value:"Module"}));const eht={name:"App",data(){return{action:null,settings:{image:null,rules:null},friendsForm:{friends_invite:0,current_friends:0,needed_friends:0,friends_on_start:0,start_at:null,complete_at:null}}},computed:{currentBot(){return window.currentBot},progress(){let s=this.friendsForm.needed_friends||0,e=this.friendsForm.current_friends||0,o=this.friendsForm.friends_on_start||0;return(e-o)/(s-o)*100}},mounted(){this.prepareUserData()},methods:{start(){this.$store.dispatch("friendsGameStart").then(s=>{this.prepareUserData(),this.$notify({title:"Отлично!",text:"гра началась! Поехали приглашать друзей!",type:"success"})}).catch(()=>{this.$notify({title:"Упс!",text:"Игра почему-то не началась...",type:"error"})})},complete(){this.$store.dispatch("friendsGameFinish").then(s=>{this.prepareUserData(),this.$notify({title:"Отлично!",text:"гра началась! Спасибо за участие в задании, скоро вы получите свои бонусы!",type:"success"})}).catch(()=>{this.$notify({title:"Упс!",text:"Мы не можем закончить это задание....",type:"error"})})},lose(){this.$notify({title:"Упс!",text:"Вы израсходовали все попытки!",type:"error"})},prepareUserData(){return this.$store.dispatch("friendsGamePrepare").then(s=>{this.action=s.action,this.settings.rules=s.rules||null,this.settings.image=s.image||null,this.action.data&&(this.friendsForm.current_friends=this.action.data.current_friends||0,this.friendsForm.needed_friends=this.action.data.needed_friends||0,this.friendsForm.friends_invite=this.action.data.friends_invite||0,this.friendsForm.friends_on_start=this.action.data.friends_on_start||0,this.friendsForm.start_at=this.action.data.start_at||null,this.friendsForm.complete_at=this.action.data.complete_at||null)})}}},tht={class:"container py-2"},sht={class:"row"},oht={class:"col-12"},iht={class:"d-flex justify-content-center"},nht={class:"img-avatar"},lht={class:"alert-light alert"},aht=["innerHTML"],rht={class:"col-12"},dht={key:0,class:"card"},cht={class:"card-body"},uht={class:"text-center mb-2"},mht={class:"fw-bold text-primary"},hht={class:"fw-bold text-primary"},pht={class:"text-center mb-2"},_ht={class:"fw-bold text-primary"},fht={class:"mb-2 text-center"},bht={class:"fw-bold text-primary"},ght={class:"progress w-100",style:{height:"40px","border-radius":"25px"},role:"progressbar","aria-label":"Basic example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},yht=t("p",{class:"my-2"},[_("Когда полоска вашего прогресса достигнет "),t("strong",{class:"fw-bold text-primary"},"100%"),_(" вы сможете получить свои бонусы!")],-1),vht={key:1},$ht={key:2,class:"card mt-3"},kht={class:"card-body"},wht={key:0,class:"mt-2 mb-0"},Fht={class:"fw-bold text-primary"},Cht={key:1,class:"mt-2 mb-2"},Pht={class:"fw-bold text-primary"},Sht=["disabled"];function xht(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",tht,[t("div",sht,[t("div",oht,[t("div",iht,[t("div",nht,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("p",lht,[_(" Перед началом квеста нажмите кнопку «Начать». Затем перейдите в главное меню Бота и нажмите кнопку «Пригласить Друзей/Подруг». Там вы найдете свою реферальную ссылку, которую легко можно отправить тем, кого хотели бы пригласить в наш Бот. Для выполнения квеста нужно пригласить "),t("strong",null,p((i.friendsForm.needed_friends||0)-(i.friendsForm.friends_on_start||0)),1),_(" друзей/подруг , которые активируют нашего бота по вашей реферальной ссылке. ")]),i.settings.rules?(l(),a("p",{key:0,class:"alert-light alert",innerHTML:i.settings.rules},null,8,aht)):u("",!0)]),t("div",rht,[i.friendsForm.start_at!=null?(l(),a("div",dht,[t("div",cht,[t("p",uht,[_("У вас сейчас "),t("strong",mht,p(i.friendsForm.friends_invite||0),1),_(" / "),t("strong",hht,p((i.friendsForm.needed_friends||0)-(i.friendsForm.friends_on_start||0)),1),_(" друзей")]),t("p",pht,[_("По заданию приглашено "),t("strong",_ht,p(i.friendsForm.friends_invite||0),1),_(" друзей")]),t("p",fht,[_("Текущий прогресс "),t("strong",bht,p(r.progress)+"%",1)]),t("div",ght,[t("div",{class:"progress-bar bg-success progress-bar-striped",style:dt({width:r.progress+"%"})},p(r.progress.toFixed(2))+"% ",5)]),yht])])):u("",!0),i.friendsForm.start_at==null?(l(),a("div",vht,[i.friendsForm.complete_at==null&&i.friendsForm.start_at==null?(l(),a("button",{key:0,type:"button",class:"btn w-100 btn-success p-3",onClick:e[0]||(e[0]=(...c)=>r.start&&r.start(...c))},"Приступить к заданию")):u("",!0)])):(l(),a("div",$ht,[t("div",kht,[i.friendsForm.start_at!=null?(l(),a("p",wht,[_("Задание начато "),t("strong",Fht,p(i.friendsForm.start_at),1)])):u("",!0),i.friendsForm.complete_at!=null?(l(),a("p",Cht,[_("Задание завершено "),t("strong",Pht,p(i.friendsForm.complete_at),1)])):u("",!0),t("button",{type:"button",onClick:e[1]||(e[1]=(...c)=>r.complete&&r.complete(...c)),disabled:r.progress<100||i.friendsForm.complete_at!=null||i.friendsForm.start_at==null,class:"btn btn-primary p-3 w-100"},"Получить награды",8,Sht)])]))])])])}const tc=oe(eht,[["render",xht]]),jht=Object.freeze(Object.defineProperty({__proto__:null,default:tc},Symbol.toStringTag,{value:"Module"}));const Oht={name:"App",data(){return{spent_time_counter:0,is_requested:!1,promocodeForm:{code:null}}},mounted(){localStorage.getItem("cashman_promocode_activate_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_promocode_activate_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_promocode_activate_counter",this.spent_time_counter)},1e3)},submit(){this.startTimer(),this.$store.dispatch("activatePromocode",{promocodeForm:this.promocodeForm}).then(s=>{this.$notify({title:"Промокод",text:"Промокод успешно активирован!",type:"success"}),this.promocodeForm.code=null}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка активации промокода!",type:"error"})})}}},Tht={class:"container py-3"},Uht={class:"row"},Iht={class:"col-12"},Vht={class:"card"},Mht={class:"card-body"},Aht=t("h5",{class:"text-center fw-bold my-3"},"Приветствуем!",-1),Eht=t("p",{class:"text-center fst-italic"}," У вас есть промокод? Отлично! Активируйте его прямо сейчас и наслаждайтесь эксклюзивными преимуществами! ",-1),Dht={class:"form-floating mb-3"},zht=t("label",{for:"floatingInput"},[t("i",{class:"input-icon fa-solid fa-terminal"}),_(" Ваш промокод")],-1),Bht=["disabled"],Lht={key:0,class:"color-white"},Rht={key:1,class:"color-white"};function Nht(s,e,o,n,i,r){return l(),a("div",Tht,[t("div",Uht,[t("div",Iht,[t("div",Vht,[t("div",Mht,[Aht,Eht,t("form",{onSubmit:e[1]||(e[1]=W((...d)=>r.submit&&r.submit(...d),["prevent"]))},[t("div",Dht,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>i.promocodeForm.code=d),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,i.promocodeForm.code]]),zht]),t("button",{type:"submit",disabled:i.spent_time_counter>0,class:"btn w-100 btn-primary mb-2 p-3"},[i.spent_time_counter<=0?(l(),a("span",Lht,"Активировать промокод")):(l(),a("span",Rht,"Осталось ждать "+p(i.spent_time_counter)+" сек.",1))],8,Bht)],32)])])])])])}const sc=oe(Oht,[["render",Nht]]),qht=Object.freeze(Object.defineProperty({__proto__:null,default:sc},Symbol.toStringTag,{value:"Module"}));const Wht={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.$nextTick(()=>{this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0}}),this.loadCashBackModuleData()},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(s){const e={value:null};return this.botUser.fields&&this.botUser.fields.find(o=>o.bot_custom_field_setting_id===s)||e},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(s=>{(s.data||[]).forEach(o=>{if(o.is_active){let n=this.getUserFieldValue(o.id),i=n.value,r=n.config;this.vipForm.fields.push({id:o.id,title:o.label,description:o.description,key:o.key,value:o.type===2?i==="1":i,type:o.type,pattern:o.pattern,required:o.required,config:r})}})})},nextStep(){this.step++},loadCashBackModuleData(){this.loading=!0,this.$store.dispatch("loadCashBackModuleData").then(s=>{this.loading=!1,this.$nextTick(()=>{Object.keys(s).forEach(e=>{this.settings[e]=s[e]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveVip",{...this.vipForm}).then(s=>{this.loading=!1,this.$notify({title:"Отлично!",text:"Вы успешно заполнили форму и стали наши VIP-пользователем!",type:"success"}),this.tg.close()}).catch(()=>{this.loading=!1,this.$notify({title:"Упс!",text:"Ошибка заполнения формы!",type:"error"})})}}},Fe=s=>(Ge("data-v-233896c2"),s=s(),Ke(),s),Yht={key:0,class:"container py-3"},Hht={class:"row"},Qht={key:0,class:"col-12"},Ght={class:"col-12 d-flex justify-content-center mb-3"},Kht={class:"img-avatar"},Jht={class:"col-12"},Xht=Fe(()=>t("p",{class:"mb-3"},[t("em",null,[_("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),_(" Я хочу поздравить Вас и дать возможность получать неограниченные преимущества нашего сервиса! Для начала нам нужно с Вами познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1)),Zht=Fe(()=>t("h6",{class:"text-center my-3"},"Как мне к Вам обращаться?",-1)),ept={class:"form-floating"},tpt=Fe(()=>t("label",{for:"vipForm-name"},"Ф.И.О.",-1)),spt={class:"col-12"},opt={key:0,class:"mb-3"},ipt=Fe(()=>t("h6",{class:"text-center my-3"},"Введите свой номер телефона",-1)),npt={class:"form-floating"},lpt=Fe(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),apt={key:0,class:"col-12"},rpt=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),dpt=Fe(()=>t("h6",{class:"text-center my-3"},"Вы мужчина или женщина?",-1)),cpt={class:"row mb-2"},upt={class:"col-6"},mpt=Fe(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),hpt=Fe(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),ppt=[mpt,hpt],_pt={class:"col-6"},fpt=Fe(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),bpt=Fe(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),gpt=[fpt,bpt],ypt={key:1,class:"col-12"},vpt=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Для того, чтобы я мог поздравлять Вас с днем рождения и сделать Вам приятно, мне нужно знать, когда он у Вас")],-1)),$pt=Fe(()=>t("h6",{class:"text-center my-3"},"Введите свой день рождения",-1)),kpt={class:"form-floating"},wpt=Fe(()=>t("label",{for:"vipForm-phone"},"Дата рождения",-1)),Fpt={key:2,class:"col-12"},Cpt=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания.")],-1)),Ppt=Fe(()=>t("h6",{class:"text-center my-3"},"Какой у Вас город?",-1)),Spt={class:"form-floating"},xpt=Fe(()=>t("label",{for:"vipForm-city"},"Город проживания",-1)),jpt={class:"col-12"},Opt={key:0},Tpt={class:"text-center my-3"},Upt={key:0,class:"form-floating"},Ipt=["type","onUpdate:modelValue","placeholder","pattern","required"],Vpt=["for"],Mpt={key:1,class:"row mb-2"},Apt={class:"col-6"},Ept=["onClick"],Dpt=Fe(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),zpt=Fe(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),Bpt=[Dpt,zpt],Lpt={class:"col-6"},Rpt=["onClick"],Npt=Fe(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),qpt=Fe(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),Wpt=[Npt,qpt],Ypt={class:"col-12"},Hpt=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),Qpt=Fe(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"https://telegra.ph/Politika-konfidencialnosti-12-29-5",target:"_blank"},"политикой конфиденциальности"),_(".")],-1)),Gpt={class:"d-flex mb-3"},Kpt={class:"form-check form-switch"},Jpt={class:"form-check-label",for:"toggle-id-1"},Xpt={key:0},Zpt={key:1},e_t=["disabled"],t_t={key:1,class:"col-12"},s_t={class:"col-12 d-flex justify-content-center mb-3"},o_t={class:"img-avatar"},i_t={class:"col-12"},n_t=Fe(()=>t("p",{class:"mb-3"},[t("em",null,[_("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),_(" Я хочу поздравить Вас и дать возможность получать неограниченные преимушества нашего сервиса! Для начала нам нужно с Вами познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1)),l_t=Fe(()=>t("h6",{class:"text-center my-3"},"Как мне к Вам обращаться?",-1)),a_t={class:"form-floating"},r_t=Fe(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),d_t={class:"col-12 d-flex justify-content-center mb-3"},c_t={class:"img-avatar"},u_t={class:"col-12"},m_t={class:"mb-3"},h_t=Fe(()=>t("h6",{class:"text-center my-3"},"Введите свой номер телефона",-1)),p_t={class:"form-floating"},__t=Fe(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),f_t=Fe(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),b_t={class:"col-12 d-flex justify-content-center mb-3"},g_t={class:"img-avatar"},y_t={class:"col-12"},v_t=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),$_t=Fe(()=>t("h6",{class:"text-center my-3"},"Ты мужчина или женщина?",-1)),k_t={class:"row mb-2"},w_t={class:"col-6"},F_t=Fe(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),C_t=Fe(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),P_t=[F_t,C_t],S_t={class:"col-6"},x_t=Fe(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),j_t=Fe(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),O_t=[x_t,j_t],T_t=Fe(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),U_t={class:"col-12 d-flex justify-content-center mb-3"},I_t={class:"img-avatar"},V_t={class:"col-12"},M_t=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания.")],-1)),A_t=Fe(()=>t("h6",{class:"text-center my-3"},"Какой у Вас город?",-1)),E_t={class:"form-floating"},D_t=Fe(()=>t("label",{for:"vipForm-city"},"Город проживания",-1)),z_t=Fe(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),B_t={class:"col-12 d-flex justify-content-center mb-3"},L_t={class:"img-avatar"},R_t={class:"col-12"},N_t=Fe(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем продолжить, пожалуйста, прочитайте мои условия использования и дайте свое согласие на их принятие.")],-1)),q_t=Fe(()=>t("h6",{class:"text-center my-3"},"Последний шаг",-1)),W_t=Fe(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),_(".")],-1)),Y_t={class:"d-flex mb-3"},H_t={class:"pt-1"},Q_t={"data-activate":"toggle-id-1",class:"font-500 font-13"},G_t={key:0},K_t={key:1},J_t={class:"ml-auto mr-4 pr-2"},X_t={class:"custom-control ios-switch"},Z_t=Fe(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),eft=["disabled"],tft={key:2,class:"col-12"},sft={class:"card"},oft={class:"card-body"},ift=Fe(()=>t("li",null,"Накопление баллов за покупки",-1)),nft=Fe(()=>t("li",null,"Оплата товаров через баллы",-1)),lft=Fe(()=>t("li",null,"Реферальная программа",-1)),aft=Fe(()=>t("h6",null,"Ваши данные:",-1)),rft={class:"mb-0"},dft={class:"mb-0"},cft={class:"mb-0"},uft={class:"mb-0"},mft={class:"mb-0"},hft={key:0},pft={key:1};function _ft(s,e,o,n,i,r){const d=ie("lazy"),c=ie("mask");return i.botUser?(l(),a("div",Yht,[t("div",Hht,[!i.botUser.is_vip&&i.settings.display_type==0?(l(),a("div",Qht,[t("form",{onSubmit:e[7]||(e[7]=W((...h)=>r.submit&&r.submit(...h),["prevent"])),class:"row mb-2"},[t("div",Ght,[t("div",Kht,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("div",Jht,[Xht,Zht,t("div",ept,[f(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":e[0]||(e[0]=h=>i.vipForm.name=h),"aria-describedby":"vipForm-name",required:""},null,512),[[k,i.vipForm.name]]),tpt])]),t("div",spt,[i.vipForm.name?(l(),a("p",opt,[t("em",null,[_("- Отлично, "),t("strong",null,p(i.vipForm.name),1),_("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])])):u("",!0),ipt,t("div",npt,[f(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":e[1]||(e[1]=h=>i.vipForm.phone=h),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[c,"+7(###)###-##-##"],[k,i.vipForm.phone]]),lpt])]),i.settings.need_sex?(l(),a("div",apt,[rpt,dpt,t("div",cpt,[t("div",upt,[t("div",{class:C([{"bg-primary text-white":i.vipForm.sex},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:e[2]||(e[2]=h=>i.vipForm.sex=!0)},ppt,2)]),t("div",_pt,[t("div",{class:C([{"bg-primary text-white":!i.vipForm.sex},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:e[3]||(e[3]=h=>i.vipForm.sex=!1)},gpt,2)])])])):u("",!0),i.settings.need_birthday?(l(),a("div",ypt,[vpt,$pt,t("div",kpt,[f(t("input",{type:"date",class:"form-control text-center","onUpdate:modelValue":e[4]||(e[4]=h=>i.vipForm.birthday=h),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[k,i.vipForm.birthday]]),wpt])])):u("",!0),i.settings.need_city?(l(),a("div",Fpt,[Cpt,Ppt,t("div",Spt,[f(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=h=>i.vipForm.city=h),class:"form-control text-center",placeholder:"Краснодар","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[k,i.vipForm.city]]),xpt])])):u("",!0),(l(!0),a(v,null,O(i.vipForm.fields,(h,g)=>(l(),a("div",jpt,[i.settings[h.key]?(l(),a("div",Opt,[t("h6",Tpt,p(h.description),1),h.type===0||h.type===1?(l(),a("div",Upt,[f(t("input",{type:h.type===1?"number":"text","onUpdate:modelValue":w=>i.vipForm.fields[g].value=w,class:"form-control text-center",placeholder:h.title,pattern:i.vipForm.fields[g].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:i.vipForm.fields[g].required||!1},null,8,Ipt),[[Wi,i.vipForm.fields[g].value]]),t("label",{for:"vipForm-field"+g},p(h.title),9,Vpt)])):u("",!0),h.type===2?(l(),a("div",Mpt,[t("div",Apt,[t("div",{class:C([{"bg-primary":i.vipForm.fields[g].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:w=>i.vipForm.fields[g].value=!0},Bpt,10,Ept)]),t("div",Lpt,[t("div",{class:C([{"bg-primary":!i.vipForm.fields[g].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:w=>i.vipForm.fields[g].value=!1},Wpt,10,Rpt)])])):u("",!0)])):u("",!0)]))),256)),t("div",Ypt,[Hpt,Qpt,t("div",Gpt,[t("div",Kpt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[6]||(e[6]=h=>i.confirm=h),type:"checkbox",role:"switch",id:"toggle-id-1"},null,512),[[z,i.confirm]]),t("label",Jpt,[i.vipForm.sex?u("",!0):(l(),a("span",Xpt,"С правилами ознакомилась")),i.vipForm.sex?(l(),a("span",Zpt,"С правилами ознакомлен")):u("",!0)])])]),t("button",{type:"submit",disabled:!i.confirm||i.load,class:"btn btn-primary p-3 w-100"}," Отправить анкету ",8,e_t)])],32)])):u("",!0),!i.botUser.is_vip&&i.settings.display_type==1?(l(),a("div",t_t,[i.step===0?(l(),a("form",{key:0,onSubmit:e[9]||(e[9]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row mb-2"},[t("div",s_t,[t("div",o_t,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("div",i_t,[n_t,l_t,t("div",a_t,[f(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":e[8]||(e[8]=h=>i.vipForm.name=h),"aria-describedby":"vipForm-name",required:""},null,512),[[k,i.vipForm.name]])]),r_t])],32)):u("",!0),i.step===1?(l(),a("form",{key:1,onSubmit:e[11]||(e[11]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row mb-2"},[t("div",d_t,[t("div",c_t,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("div",u_t,[t("p",m_t,[t("em",null,[_("- Отлично, "),t("strong",null,p(i.vipForm.name),1),_("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])]),h_t,t("div",p_t,[f(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":e[10]||(e[10]=h=>i.vipForm.phone=h),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[c,"+7(###)###-##-##"],[k,i.vipForm.phone]]),__t]),f_t])],32)):u("",!0),i.step===2?(l(),a("form",{key:2,onSubmit:e[14]||(e[14]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row mb-2"},[t("div",b_t,[t("div",g_t,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("div",y_t,[v_t,$_t,t("div",k_t,[t("div",w_t,[t("div",{class:C([{"bg-highlight":i.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:e[12]||(e[12]=h=>i.vipForm.sex=!0)},P_t,2)]),t("div",S_t,[t("div",{class:C([{"bg-highlight ":!i.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:e[13]||(e[13]=h=>i.vipForm.sex=!1)},O_t,2)])]),T_t])],32)):u("",!0),i.step===3?(l(),a("form",{key:3,onSubmit:e[16]||(e[16]=W((...h)=>r.nextStep&&r.nextStep(...h),["prevent"])),class:"row mb-2"},[t("div",U_t,[t("div",I_t,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("div",V_t,[M_t,A_t,t("div",E_t,[f(t("input",{type:"text","onUpdate:modelValue":e[15]||(e[15]=h=>i.vipForm.city=h),class:"form-control text-center",placeholder:"Краснодар",id:"vipForm-city","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[k,i.vipForm.city]]),D_t]),z_t])],32)):u("",!0),i.step===4?(l(),a("form",{key:4,onSubmit:e[19]||(e[19]=W((...h)=>r.submit&&r.submit(...h),["prevent"])),class:"row mb-2"},[t("div",B_t,[t("div",L_t,[f(t("img",null,null,512),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("div",R_t,[N_t,q_t,W_t,t("div",Y_t,[t("div",H_t,[t("h5",Q_t,[i.vipForm.sex?u("",!0):(l(),a("span",G_t,"С правилами озакномилась")),i.vipForm.sex?(l(),a("span",K_t,"С правилами ознакомлен")):u("",!0)])]),t("div",J_t,[t("div",X_t,[f(t("input",{"onUpdate:modelValue":e[17]||(e[17]=h=>i.confirm=h),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[z,i.confirm]]),Z_t])])]),t("button",{type:"submit",disabled:!i.confirm||i.load,class:"btn btn-outline-primary p-3 w-100"}," Отправить анкету ",8,eft),t("button",{type:"button",onClick:e[18]||(e[18]=h=>i.step=0),class:"btn btn-outline-primary p-3 w-100 mb-2"}," Исправить ошибки ")])],32)):u("",!0)])):u("",!0),i.botUser.is_vip?(l(),a("div",tft,[t("div",sft,[t("div",oft,[_(" Поздравляем! Вы являетесь нашим VIP-пользователем! Вам доступны следующие возможности: "),t("ul",null,[ift,nft,lft,t("li",null,[aft,t("p",rft,"Имя: "+p(i.botUser.name||"Не указано"),1),t("p",dft,"Телефон: "+p(i.botUser.phone||"Не указано"),1),t("p",cft,"Город: "+p(i.botUser.city||"Не указано"),1),t("p",uft,"Пол: "+p(i.botUser.sex?"Мужской":"Женский"),1),(l(!0),a(v,null,O(i.vipForm.fields,h=>(l(),a("p",mft,[_(p(h.title)+": ",1),h.config.type===2?(l(),a("span",hft,p(h.value===!1?"Нет":"Да"),1)):u("",!0),h.config.type===0||h.config.type===1?(l(),a("span",pft,p(h.value),1)):u("",!0)]))),256))])])])])])):u("",!0)])])):u("",!0)}const oc=oe(Wht,[["render",_ft],["__scopeId","data-v-233896c2"]]),fft=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"}));const bft={data(){return{load:!1,confirm:!1,botUser:null,vipForm:{name:null,phone:null,page_id:null}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm.name=this.botUser.name||this.botUser.fio_from_telegram||null,this.vipForm.phone=this.botUser.phone||null}},mounted(){const s=new URLSearchParams(window.location.search);this.vipForm.page_id=JSON.parse(s.get("page_id"))||null},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{submit(){this.loading=!0,this.$store.dispatch("saveSimpleProfileFormData",{dataObject:this.vipForm}).then(s=>{this.loading=!1,this.$notify({title:"Отлично!",text:"Вы успешно заполнили форму и стали наши VIP-пользователем!",type:"success"}),this.tg.close()}).catch(()=>{this.loading=!1,this.$notify({title:"Упс!",text:"Ошибка заполнения формы!",type:"error"})})}}},ai=s=>(Ge("data-v-57f78e9d"),s=s(),Ke(),s),gft={key:0,class:"container py-3"},yft={class:"row"},vft={class:"col-12"},$ft={class:"col-12 mb-2"},kft={class:"form-floating"},wft=ai(()=>t("label",{for:"vipForm-name"},"Ф.И.О.",-1)),Fft={class:"col-12"},Cft={class:"form-floating"},Pft=ai(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),Sft={class:"col-12"},xft=ai(()=>t("p",{class:"mb-3"},[t("em",null,"Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),jft=ai(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"https://telegra.ph/Politika-konfidencialnosti-12-29-5",target:"_blank"},"политикой конфиденциальности"),_(".")],-1)),Oft={class:"d-flex mb-3"},Tft={class:"form-check form-switch"},Uft=ai(()=>t("label",{class:"form-check-label",for:"toggle-id-1"}," С правилами ознакомлен ",-1)),Ift=["disabled"];function Vft(s,e,o,n,i,r){const d=ie("mask");return i.botUser?(l(),a("div",gft,[t("div",yft,[t("div",vft,[t("form",{onSubmit:e[3]||(e[3]=W((...c)=>r.submit&&r.submit(...c),["prevent"])),class:"row mb-0"},[t("div",$ft,[t("div",kft,[f(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":e[0]||(e[0]=c=>i.vipForm.name=c),"aria-describedby":"vipForm-name",required:""},null,512),[[k,i.vipForm.name]]),wft])]),t("div",Fft,[t("div",Cft,[f(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":e[1]||(e[1]=c=>i.vipForm.phone=c),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[d,["+7(###)###-##-##"]],[k,i.vipForm.phone]]),Pft])]),t("div",Sft,[xft,jft,t("div",Oft,[t("div",Tft,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[2]||(e[2]=c=>i.confirm=c),type:"checkbox",role:"switch",id:"toggle-id-1"},null,512),[[z,i.confirm]]),Uft])]),t("button",{type:"submit",disabled:!i.confirm||i.load,class:"btn btn-primary p-3 w-100"}," Отправить анкету ",8,Ift)])],32)])])])):u("",!0)}const ic=oe(bft,[["render",Vft],["__scopeId","data-v-57f78e9d"]]),Mft=Object.freeze(Object.defineProperty({__proto__:null,default:ic},Symbol.toStringTag,{value:"Module"}));const Aft={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0,need_phone:!0,need_email:!0,need_profile_form_image:!0,form_image:null,pre_birthday_text:null,pre_email_text:null,pre_age_text:null,pre_city_text:null,pre_sex_text:null,pre_name_text:null,pre_phone_text:null,text_after_submit:null},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.loadProfileFormData()},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(s){const e={value:null};return this.botUser.fields&&this.botUser.fields.find(o=>o.bot_custom_field_setting_id===s)||e},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(s=>{(s.data||[]).forEach(o=>{if(o.is_active){let n=this.getUserFieldValue(o.id),i=n.value,r=n.config;this.vipForm.fields.push({id:o.id,title:o.label,description:o.description,key:o.key,value:o.type===2?i==="1":i,type:o.type,pattern:o.pattern,required:o.required,config:r})}})})},loadProfileFormData(){this.loading=!0,this.$store.dispatch("loadProfileFormData").then(s=>{this.loading=!1,this.$nextTick(()=>{Object.keys(s).forEach(e=>{this.settings[e]=s[e]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveProfileFormData",{dataObject:this.vipForm}).then(s=>{this.loading=!1,this.$notify({title:"Отлично!",text:"Вы успешно заполнили форму и стали наши VIP-пользователем!",type:"success"}),this.tg.close()}).catch(()=>{this.loading=!1,this.$notify({title:"Упс!",text:"Ошибка заполнения формы!",type:"error"})})}}},Ft=s=>(Ge("data-v-b5cc11e8"),s=s(),Ke(),s),Eft={key:0,class:"container py-3"},Dft={class:"row"},zft={key:0,class:"col-12"},Bft={key:0,class:"col-12 d-flex justify-content-center mb-3"},Lft={class:"img-avatar"},Rft={key:0,class:"img-avatar"},Nft={key:1},qft={class:"col-12"},Wft=["innerHTML"],Yft={class:"form-floating"},Hft=Ft(()=>t("label",{for:"vipForm-name"},"Ф.И.О.",-1)),Qft={key:1,class:"col-12"},Gft=["innerHTML"],Kft={class:"form-floating"},Jft=Ft(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),Xft={key:2,class:"col-12"},Zft=["innerHTML"],ebt={class:"form-floating"},tbt=Ft(()=>t("label",{for:"vipForm-email"},"Почта",-1)),sbt={key:3,class:"col-12"},obt=["innerHTML"],ibt={class:"row mb-0"},nbt={class:"col-6"},lbt=Ft(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),abt=Ft(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),rbt=[lbt,abt],dbt={class:"col-6"},cbt=Ft(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),ubt=Ft(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),mbt=[cbt,ubt],hbt={key:4,class:"col-12"},pbt=["innerHTML"],_bt={class:"form-floating"},fbt=Ft(()=>t("label",{for:"vipForm-birthday"},"Дата рождения",-1)),bbt={key:5,class:"col-12"},gbt=["innerHTML"],ybt={class:"form-floating"},vbt=Ft(()=>t("label",{for:"vipForm-city"},"Город проживания",-1)),$bt={class:"col-12"},kbt={key:0},wbt={class:"text-center my-3"},Fbt={key:0,class:"form-floating"},Cbt=["type","onUpdate:modelValue","placeholder","pattern","required"],Pbt=["for"],Sbt={key:1,class:"row mb-0"},xbt={class:"col-6 p-3"},jbt=["onClick"],Obt=Ft(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),Tbt=Ft(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),Ubt=[Obt,Tbt],Ibt={class:"col-6 p-3"},Vbt=["onClick"],Mbt=Ft(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),Abt=Ft(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),Ebt=[Mbt,Abt],Dbt={class:"col-12"},zbt=Ft(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),Bbt=Ft(()=>t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"https://telegra.ph/Politika-konfidencialnosti-12-29-5",target:"_blank"},"политикой конфиденциальности"),_(".")],-1)),Lbt={class:"d-flex mb-3"},Rbt={class:"form-check form-switch"},Nbt={class:"form-check-label",for:"toggle-id-1"},qbt={key:0},Wbt={key:1},Ybt=["disabled"],Hbt={key:1,class:"col-12"},Qbt=["innerHTML"],Gbt={class:"alert alert-light"},Kbt=Ft(()=>t("h6",{class:"text-primary text-center fw-bold"},"Ваши данные:",-1)),Jbt={class:"mb-2 d-flex justify-content-between"},Xbt={class:"fw-bold text-primary"},Zbt={key:0,class:"mb-2 d-flex justify-content-between"},egt={class:"fw-bold text-primary"},tgt={key:1,class:"mb-2 d-flex justify-content-between"},sgt={class:"fw-bold text-primary"},ogt={key:2,class:"mb-2 d-flex justify-content-between"},igt={class:"fw-bold text-primary"},ngt={key:3,class:"mb-2 d-flex justify-content-between"},lgt={class:"fw-bold text-primary"},agt={key:4,class:"mb-2 d-flex justify-content-between"},rgt={class:"fw-bold text-primary"},dgt={class:"mb-2 d-flex justify-content-between"},cgt={key:0},ugt={key:1};function mgt(s,e,o,n,i,r){const d=ie("lazy"),c=ie("mask");return i.botUser?(l(),a("div",Eft,[t("div",Dft,[i.botUser.is_vip?u("",!0):(l(),a("div",zft,[t("form",{onSubmit:e[8]||(e[8]=W((...h)=>r.submit&&r.submit(...h),["prevent"])),class:"row mb-0"},[i.settings.need_profile_form_image?(l(),a("div",Bft,[t("div",Lft,[(i.settings.form_image||"").length>0?f((l(),a("img",Rft,null,512)),[[d,i.settings.form_image]]):f((l(),a("img",Nft,null,512)),[[d,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])])):u("",!0),t("div",qft,[i.settings.pre_name_text?(l(),a("h6",{key:0,class:"text-center my-3",innerHTML:i.settings.pre_name_text},null,8,Wft)):u("",!0),t("div",Yft,[f(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":e[0]||(e[0]=h=>i.vipForm.name=h),"aria-describedby":"vipForm-name",required:""},null,512),[[k,i.vipForm.name]]),Hft])]),i.settings.need_phone?(l(),a("div",Qft,[i.settings.pre_phone_text?(l(),a("h6",{key:0,class:"text-center my-3",innerHTML:i.settings.pre_phone_text},null,8,Gft)):u("",!0),t("div",Kft,[f(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":e[1]||(e[1]=h=>i.vipForm.phone=h),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[c,["+7(###)###-##-##"]],[k,i.vipForm.phone]]),Jft])])):u("",!0),i.settings.need_email?(l(),a("div",Xft,[i.settings.pre_email_text?(l(),a("h6",{key:0,class:"text-center my-3",innerHTML:i.settings.pre_email_text},null,8,Zft)):u("",!0),t("div",ebt,[f(t("input",{type:"email",class:"form-control text-center","onUpdate:modelValue":e[2]||(e[2]=h=>i.vipForm.email=h),placeholder:"example@test.com","aria-label":"vipForm-email","aria-describedby":"vipForm-email",required:""},null,512),[[k,i.vipForm.email]]),tbt])])):u("",!0),i.settings.need_sex?(l(),a("div",sbt,[i.settings.pre_sex_text?(l(),a("h6",{key:0,class:"text-center my-3",innerHTML:i.settings.pre_sex_text},null,8,obt)):u("",!0),t("div",ibt,[t("div",nbt,[t("div",{class:C([{"bg-primary text-white":i.vipForm.sex},"btn w-100 btn-outline-primary p-2 d-flex justify-content-between flex-column align-items-center"]),onClick:e[3]||(e[3]=h=>i.vipForm.sex=!0)},rbt,2)]),t("div",dbt,[t("div",{class:C([{"bg-primary text-white":!i.vipForm.sex},"btn w-100 btn-outline-primary p-2 d-flex justify-content-between flex-column align-items-center"]),onClick:e[4]||(e[4]=h=>i.vipForm.sex=!1)},mbt,2)])])])):u("",!0),i.settings.need_birthday?(l(),a("div",hbt,[i.settings.pre_birthday_text?(l(),a("h6",{key:0,class:"text-center my-3",innerHTML:i.settings.pre_birthday_text},null,8,pbt)):u("",!0),t("div",_bt,[f(t("input",{type:"date",class:"form-control text-center","onUpdate:modelValue":e[5]||(e[5]=h=>i.vipForm.birthday=h),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[k,i.vipForm.birthday]]),fbt])])):u("",!0),i.settings.need_city?(l(),a("div",bbt,[i.settings.pre_city_text?(l(),a("h6",{key:0,class:"text-center my-3",innerHTML:i.settings.pre_city_text},null,8,gbt)):u("",!0),t("div",ybt,[f(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=h=>i.vipForm.city=h),class:"form-control text-center",placeholder:"Ваш город","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[k,i.vipForm.city]]),vbt])])):u("",!0),(i.vipForm.fields||[]).length>0?(l(!0),a(v,{key:6},O(i.vipForm.fields,(h,g)=>(l(),a("div",$bt,[i.settings[h.key]?(l(),a("div",kbt,[t("h6",wbt,p(h.description),1),h.type===0||h.type===1?(l(),a("div",Fbt,[f(t("input",{type:h.type===1?"number":"text","onUpdate:modelValue":w=>i.vipForm.fields[g].value=w,class:"form-control text-center",placeholder:h.title,pattern:i.vipForm.fields[g].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:i.vipForm.fields[g].required||!1},null,8,Cbt),[[Wi,i.vipForm.fields[g].value]]),t("label",{for:"vipForm-field"+g},p(h.title||"-"),9,Pbt)])):u("",!0),h.type===2?(l(),a("div",Sbt,[t("div",xbt,[t("div",{class:C([{"bg-primary":i.vipForm.fields[g].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:w=>i.vipForm.fields[g].value=!0},Ubt,10,jbt)]),t("div",Ibt,[t("div",{class:C([{"bg-primary":!i.vipForm.fields[g].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:w=>i.vipForm.fields[g].value=!1},Ebt,10,Vbt)])])):u("",!0)])):u("",!0)]))),256)):u("",!0),t("div",Dbt,[zbt,Bbt,t("div",Lbt,[t("div",Rbt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[7]||(e[7]=h=>i.confirm=h),type:"checkbox",role:"switch",id:"toggle-id-1"},null,512),[[z,i.confirm]]),t("label",Nbt,[i.vipForm.sex?u("",!0):(l(),a("span",qbt,"С правилами ознакомилась")),i.vipForm.sex?(l(),a("span",Wbt,"С правилами ознакомлен")):u("",!0)])])]),t("button",{type:"submit",disabled:!i.confirm||i.load,class:"btn btn-primary p-3 w-100"}," Отправить анкету ",8,Ybt)])],32)])),i.botUser.is_vip?(l(),a("div",Hbt,[t("p",{class:"alert alert-light my-2",innerHTML:i.settings.text_after_submit},null,8,Qbt),t("div",Gbt,[Kbt,t("p",Jbt,[_("Имя: "),t("span",Xbt,p(i.botUser.name||"Не указано"),1)]),i.settings.need_phone?(l(),a("p",Zbt,[_("Телефон: "),t("span",egt,p(i.botUser.phone||"Не указано"),1)])):u("",!0),i.settings.need_email?(l(),a("p",tgt,[_("Email: "),t("span",sgt,p(i.botUser.email||"Не указано"),1)])):u("",!0),i.settings.need_city?(l(),a("p",ogt,[_("Город: "),t("span",igt,p(i.botUser.city||"Не указано"),1)])):u("",!0),i.settings.need_birthday?(l(),a("p",ngt,[_("Дата рождения: "),t("span",lgt,p(i.botUser.birthday||"Не указано"),1)])):u("",!0),i.settings.need_sex?(l(),a("p",agt,[_("Пол: "),t("span",rgt,p(i.botUser.sex?"Мужской":"Женский"),1)])):u("",!0),(l(!0),a(v,null,O(i.vipForm.fields,h=>(l(),a("p",dgt,[_(p(h.title)+": ",1),h.config.type===2?(l(),a("span",cgt,p(h.value===!1?"Нет":"Да"),1)):u("",!0),h.config.type===0||h.config.type===1?(l(),a("span",ugt,p(h.value),1)):u("",!0)]))),256))])])):u("",!0)])])):u("",!0)}const nc=oe(Aft,[["render",mgt],["__scopeId","data-v-b5cc11e8"]]),hgt=Object.freeze(Object.defineProperty({__proto__:null,default:nc},Symbol.toStringTag,{value:"Module"})),pgt={class:"form-check form-switch mb-2"},_gt={class:"form-check-label",for:"script-settings-wheel-of-fortune-can_play"},fgt={class:"form-check form-switch mb-2"},bgt={class:"form-check-label",for:"script-settings-wheel-of-fortune-use_in_shop"},ggt={class:"form-floating mb-2"},ygt={for:"script-settings-disabled_text"},vgt={key:0},$gt={class:"form-floating mb-2"},kgt={for:"script-settings-disabled_text"},wgt={key:0},Fgt={class:"form-floating mb-2"},Cgt={for:"floatingInput"},Pgt={key:0},Sgt={class:"form-floating mb-2"},xgt={for:"script-settings-disabled_text"},jgt={key:0},Ogt={class:"form-floating mb-2"},Tgt=t("label",{for:"floatingInput"},"Максимальное число попыток",-1),Ugt={class:"form-floating mb-2"},Igt=t("option",{value:null,selected:""},"Не выбрано",-1),Vgt=["value"],Mgt=t("label",{for:"select-custom-script"},"Персональный скрипт",-1),Agt={class:"alert alert-light mb-2"},Egt=t("p",{class:"mb-0"},[t("i",{class:"fa-solid fa-trophy text-primary"}),_(" Призы, которые может выиграть пользователь, максимум "),t("strong",{class:"fw-bold text-primary"},"20")],-1),Dgt={key:0,class:"mb-0"},zgt=t("strong",{class:"fw-bold text-primary"},"Внимание!",-1),Bgt={class:"mb-2 align-items-start d-flex"},Lgt={class:"form-floating w-100",style:{"padding-right":"5px"}},Rgt=["onUpdate:modelValue"],Ngt={for:"script-settings-disabled_text"},qgt={key:0},Wgt={class:"dropdown"},Ygt=t("i",{class:"fa-solid fa-gear text-secondary"},null,-1),Hgt=[Ygt],Qgt={class:"dropdown-menu w-100"},Ggt=["onClick"],Kgt=t("i",{class:"fa-solid fa-cog"},null,-1),Jgt=["onClick"],Xgt=t("i",{class:"fa-solid fa-trash text-danger"},null,-1),Zgt=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),e1t={class:"modal fade",id:"prize-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},t1t={class:"modal-dialog"},s1t={class:"modal-content"},o1t=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор приз"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),i1t={class:"modal-body"},n1t={class:"form-floating mb-2"},l1t=["value"],a1t=t("label",{for:"floatingSelect"},"Тип приза",-1),r1t={key:0},d1t={key:1},c1t={key:1,class:"form-floating mb-2"},u1t=t("label",{for:"floatingInput"},"Значение эффекта",-1),m1t={style:{"max-height":"200px","overflow-y":"auto"},class:"row row-cols-5 w-100 p-2 mb-2"},h1t={class:"col mb-2"},p1t=["onClick"],_1t=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-success w-100 p-3","data-bs-dismiss":"modal"},"Сохранить")],-1),f1t={props:["modelValue"],data(){return{tab:"main",prize_config_modal:null,selected_prize_index:null,smiles:["🥤","🥗","🍔","🍗","🍟","🥓","🌯","🍱","🍜","🍲","🍧","🍨","🧁","🥞","🤖","🎲","🎯","😊","😎","🌻","👽","💌","📚","🐶","👻","🏀","👓","🎓","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣","🔟","💡","🚀","⭐","💎","☘","🏆","🎁"],loaded_params:!1,wheel_types:[{key:"text",title:"Приз выдается во время заказа"},{key:"product_discount",title:"Скидка на товары, %"},{key:"cashback",title:"Начисление кэшбэка, руб"},{key:"effect_product",title:"Скидка на конкретный товар, %"}],scripts:[{id:"marketplace_1",title:"Под маркетплейс (вариант 1)"},{id:"auth_1",title:"Форма регистрации"},{id:"review_1",title:"Форма отзыва"}],form:{use_in_shop:!1,can_play:!0,rules_text:null,max_attempts:1,main_text:null,callback_message:null,win_message:null,btn_text:null,before_script:null,after_script:null,wheels:[]}}},computed:{bot(){return window.currentBot}},watch:{form:{handler:function(s){this.$emit("updated:modelValue",this.form)},deep:!0}},mounted(){this.prize_config_modal=new bootstrap.Modal("#prize-modal",{}),this.loaded_params=!1,this.$nextTick(()=>{this.form=this.modelValue,this.loaded_params=!0,this.form.use_in_shop=this.bot.settings.selected_script_id==this.form.slug_id})},methods:{selectPrize(s){this.selected_prize_index=null,this.tab="main",this.$nextTick(()=>{this.selected_prize_index=s,this.prize_config_modal.show()})},selectProduct(s,e){this.form.wheels[e].effect_product=s,this.tab="main"},changeWheelColor(s){},removeWheel(s){this.form.wheels.splice(s,1),this.$notify({title:"Колесо фортуны",text:"Приз успешно удален",type:"success"})},addWheel(){this.form.wheels||(this.form.wheels=[]),this.form.wheels.length<20?(this.form.wheels.push({key:"wheel_text",type:"text",value:null,effect_value:0,effect_product:null}),this.$notify({title:"Колесо фортуны",text:"Новый приз успешно добавлен",type:"success"})):this.$notify({title:"Колесо фортуны",text:"Вы уже добавили максимальное число призов!",type:"error"})},addSmile(s,e){this.form.wheels[s].smile=e},submit(){let s=new FormData;Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("updateWheelCustomScriptParams",{slugForm:s}).then(e=>{this.$notify({title:"Информация о скрипте",text:"Информация о скрипте успешно обновлена!",type:"success"}),this.$emit("callback",e.data),window.location.reload()}).catch(e=>{this.$notify({title:"Информация о скрипте",text:"Ошибка обновления информации о скрипте",type:"error"})})}}},b1t=Object.assign(f1t,{__name:"WheelCustomScriptEditor",setup(s){return(e,o)=>{var n,i;return l(),a(v,null,[e.loaded_params?(l(),a("form",{key:0,onSubmit:o[10]||(o[10]=W((...r)=>e.submit&&e.submit(...r),["prevent"]))},[t("div",pgt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=r=>e.form.can_play=r),role:"switch",id:"script-settings-wheel-of-fortune-can_play"},null,512),[[z,e.form.can_play]]),t("label",_gt,[_("Состояние колеса фортуны: "),t("span",{class:C({"text-primary fw-bold":e.form.can_play})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.can_play})},"выкл",2)])]),t("div",fgt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=r=>e.form.use_in_shop=r),role:"switch",id:"script-settings-wheel-of-fortune-use_in_shop"},null,512),[[z,e.form.use_in_shop]]),t("label",bgt,[_("Использовать выигрыши колеса фортуны в корзине товаров : "),t("span",{class:C({"text-primary fw-bold":e.form.use_in_shop})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.use_in_shop})},"выкл",2)])]),t("div",ggt,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[2]||(o[2]=r=>e.form.rules_text=r),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-wheel-of-fortune-can_play"},null,512),[[k,e.form.rules_text]]),t("label",ygt,[_("Правила колеса фортуны "),(e.form.rules_text||"").length>0?(l(),a("span",vgt,p((e.form.rules_text||"").length)+"/4000",1)):u("",!0)])]),t("div",$gt,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=r=>e.form.main_text=r),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-wheel-of-fortune-can_play",required:""},null,512),[[k,e.form.main_text]]),t("label",kgt,[_("Текст в боте "),(e.form.main_text||"").length>0?(l(),a("span",wgt,p((e.form.main_text||"").length)+"/4000",1)):u("",!0)])]),t("div",Fgt,[f(t("input",{type:"text",maxlength:"100","onUpdate:modelValue":o[4]||(o[4]=r=>e.form.btn_text=r),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.form.btn_text]]),t("label",Cgt,[_("Текст кнопки "),(e.form.btn_text||"").length>0?(l(),a("span",Pgt,p((e.form.btn_text||"").length)+"/100",1)):u("",!0)])]),T(Id,{modelValue:e.form.win_message,"onUpdate:modelValue":o[5]||(o[5]=r=>e.form.win_message=r),maxlength:4e3,required:!0,class:"mb-2"},{title:A(()=>[_(" Текст при выигрыше ")]),_:1},8,["modelValue"]),t("div",Sgt,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=r=>e.form.callback_message=r),maxlength:"4000",style:{"min-height":"150px"},placeholder:"Leave a comment here",id:"script-settings-wheel-of-fortune-can_play",required:""},null,512),[[k,e.form.callback_message]]),t("label",xgt,[_(" Детали получения приза "),(e.form.callback_message||"").length>0?(l(),a("span",jgt,p((e.form.callback_message||"").length)+"/4000",1)):u("",!0)])]),t("div",Ogt,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[7]||(o[7]=r=>e.form.max_attempts=r),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.form.max_attempts]]),Tgt]),t("div",Ugt,[f(t("select",{class:"form-select","onUpdate:modelValue":o[8]||(o[8]=r=>e.form.before_script=r),id:"select-custom-script","aria-label":"Floating label select example"},[Igt,(l(!0),a(v,null,O(e.scripts,r=>(l(),a("option",{value:r.id},p(r.title||"-"),9,Vgt))),256))],512),[[Ve,e.form.before_script]]),Mgt]),t("div",Agt,[Egt,e.form.wheels.length===0?(l(),a("p",Dgt,[zgt,_(" Вы еще не добавили ни одного приза в колесо!")])):u("",!0)]),e.form.wheels.length>0?(l(!0),a(v,{key:0},O(e.form.wheels,(r,d)=>(l(),a("div",Bgt,[t("div",Lgt,[f(t("textarea",{class:"form-control border-light","onUpdate:modelValue":c=>e.form.wheels[d].value=c,maxlength:"4000",style:{"min-height":"100px"},placeholder:"Leave a comment here",id:"script-settings-wheel-of-fortune-can_play",required:""},`

                    `,8,Rgt),[[k,e.form.wheels[d].value]]),t("label",Ngt,[_("#"+p(d+1)+" - описание приза ",1),(e.form.wheels[d].value||"").length>0?(l(),a("span",qgt,p((e.form.wheels[d].value||"").length)+"/4000",1)):u("",!0)])]),t("div",Wgt,[t("button",{style:dt({"background-color":e.form.wheels[d].bg_color}),class:"btn btn-outline-light",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},Hgt,4),t("ul",Qgt,[t("li",null,[t("a",{class:"dropdown-item",onClick:c=>e.selectPrize(d),href:"javascript:void(0)"},[Kgt,_(" Настроить")],8,Ggt)]),t("li",null,[t("a",{class:"dropdown-item",onClick:c=>e.removeWheel(d),href:"javascript:void(0)"},[Xgt,_(" Удалить ")],8,Jgt)])])])]))),256)):u("",!0),e.form.wheels.length<20?(l(),a("button",{key:1,type:"button",onClick:o[9]||(o[9]=(...r)=>e.addWheel&&e.addWheel(...r)),class:"btn btn-outline-primary p-3 w-100 mb-5"},"Добавить приз ")):u("",!0),Zgt],32)):u("",!0),t("div",e1t,[t("div",t1t,[t("div",s1t,[o1t,t("div",i1t,[e.selected_prize_index!=null?(l(),a(v,{key:0},[e.tab==="main"?(l(),a(v,{key:0},[t("div",n1t,[f(t("select",{class:"form-select",id:"floatingSelect",onChange:o[11]||(o[11]=r=>e.selectProduct(null,e.selected_prize_index)),"onUpdate:modelValue":o[12]||(o[12]=r=>e.form.wheels[e.selected_prize_index].type=r),required:"","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(e.wheel_types,r=>(l(),a("option",{value:r.key},p(r.title||"-"),9,l1t))),256))],544),[[Ve,e.form.wheels[e.selected_prize_index].type]]),a1t]),e.form.wheels[e.selected_prize_index].type==="effect_product"?(l(),a("button",{key:0,onClick:o[13]||(o[13]=r=>e.tab="products"),class:"w-100 btn mb-2 btn-outline-light text-primary p-3",type:"button","aria-expanded":"false"},[e.form.wheels[e.selected_prize_index].effect_product?(l(),a("span",d1t,p(((n=e.form.wheels[e.selected_prize_index].effect_product)==null?void 0:n.title)||"Без названия"),1)):(l(),a("span",r1t,"Выбрать товар"))])):u("",!0),e.form.wheels[e.selected_prize_index].type!=="text"?(l(),a("div",c1t,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[14]||(o[14]=r=>e.form.wheels[e.selected_prize_index].effect_value=r),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.form.wheels[e.selected_prize_index].effect_value]]),u1t])):u("",!0),f(t("input",{type:"color",onChange:o[15]||(o[15]=r=>e.changeWheelColor(e.selected_prize_index)),"onUpdate:modelValue":o[16]||(o[16]=r=>e.form.wheels[e.selected_prize_index].bg_color=r),style:{"min-height":"30px"},class:"form-control p-0 mb-2",id:"floatingInput",placeholder:"name@example.com"},null,544),[[k,e.form.wheels[e.selected_prize_index].bg_color]]),t("div",m1t,[(l(!0),a(v,null,O(e.smiles,r=>(l(),a("div",h1t,[t("a",{class:C([{"bg-primary":r===(e.form.wheels[e.selected_prize_index]||{smile:null}).smile},"btn btn-outline-light"]),onClick:d=>e.addSmile(e.selected_prize_index,r),href:"javascript:void(0)"},p(r),11,p1t)]))),256))])],64)):u("",!0),e.tab==="products"?(l(),a(v,{key:1},[t("button",{onClick:o[17]||(o[17]=r=>e.tab="main"),class:"btn btn-light text-secondary mb-3"},"Назад "),T(Wd,{selected:[(i=e.form.wheels[e.selected_prize_index].effect_product)==null?void 0:i.id],onSelect:o[18]||(o[18]=r=>e.selectProduct(r,e.selected_prize_index))},null,8,["selected"])],64)):u("",!0)],64)):u("",!0)]),_1t])])])],64)}}});const g1t={data(){return{form:{marketplace_id:null,file_1:null,file_2:null}}},methods:{submit(){this.$preloader.show(),this.$emit("callback",this.form)},onChangePhotos1(s){const e=s.target.files[0];this.form.file_1=e},onChangePhotos2(s){const e=s.target.files[0];this.form.file_2=e},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}}}},y1t={class:"card"},v1t={class:"card-body"},$1t=t("h3",{class:"fw-bold text-primary text-center my-3"}," Три простых шага и вы в игре ",-1),k1t=t("h6",null,[t("span",{class:"fw-bold text-primary"},"Шаг 1."),_(" На каком маркетплейсе вы совершили покупку?")],-1),w1t={class:"d-flex justify-content-around my-2"},F1t={class:"form-check m-0 p-0"},C1t=t("label",{class:"form-check-label img-option",for:"radioDefault1"},[t("img",{src:"/images/marketplaces/yandex-market-sign-logo.png",alt:"Yandex"})],-1),P1t={class:"form-check m-0 p-0"},S1t=t("label",{class:"form-check-label img-option",for:"radioDefault2"},[t("img",{src:"/images/marketplaces/wildberries-sign-logo.svg",alt:"Wildberries"})],-1),x1t={class:"form-check m-0 p-0"},j1t=t("label",{class:"form-check-label img-option",for:"radioDefault3"},[t("img",{src:"/images/marketplaces/ozon-icon-logo.svg",alt:"Ozon"})],-1),O1t=t("h6",null,[t("span",{class:"fw-bold text-primary"},"Шаг 2."),_(" Отправьте скриншот отзыва")],-1),T1t=t("div",{class:"alert alert-warning"}," Внимание! Отзыв должен быть обязательно с ТЕКСТОМ! ",-1),U1t={class:"mb-3"},I1t={for:"fileInput-1",class:"upload-area"},V1t={key:0,class:"text-muted"},M1t={key:1},A1t=t("h6",null,[t("span",{class:"fw-bold text-primary"},"Шаг 3."),_(" Отправьте скриншот покупки")],-1),E1t={class:"mb-3"},D1t={for:"fileInput2",class:"upload-area"},z1t={key:0,class:"text-muted"},B1t={key:1},L1t=t("button",{type:"submit",class:"btn btn-primary w-100 p-3"},"Отправить",-1);function R1t(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",y1t,[t("div",v1t,[$1t,t("form",{onSubmit:e[5]||(e[5]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[k1t,t("div",w1t,[t("div",F1t,[f(t("input",{class:"form-check-input hide-input",value:"yandex","onUpdate:modelValue":e[0]||(e[0]=c=>i.form.marketplace_id=c),type:"radio",name:"radioDefault",id:"radioDefault1"},null,512),[[ct,i.form.marketplace_id]]),C1t]),t("div",P1t,[f(t("input",{class:"form-check-input hide-input",value:"wb","onUpdate:modelValue":e[1]||(e[1]=c=>i.form.type=c),type:"radio",name:"radioDefault",id:"radioDefault2"},null,512),[[ct,i.form.type]]),S1t]),t("div",x1t,[f(t("input",{class:"form-check-input hide-input","onUpdate:modelValue":e[2]||(e[2]=c=>i.form.type=c),value:"ozon",type:"radio",name:"radioDefault",id:"radioDefault3"},null,512),[[ct,i.form.type]]),j1t])]),O1t,T1t,t("div",U1t,[t("label",I1t,[i.form.file_1==null?(l(),a("div",V1t," 📁 Перетащите изображение сюда или нажмите, чтобы выбрать ")):f((l(),a("img",M1t,null,512)),[[d,r.getPhoto(i.form.file_1).imageUrl]])]),t("input",{type:"file",onChange:e[3]||(e[3]=(...c)=>r.onChangePhotos1&&r.onChangePhotos1(...c)),required:"",id:"fileInput-1",class:"hide-input",accept:"image/*"},null,32)]),A1t,t("div",E1t,[t("label",D1t,[i.form.file_2==null?(l(),a("div",z1t," 📁 Перетащите изображение сюда или нажмите, чтобы выбрать ")):f((l(),a("img",B1t,null,512)),[[d,r.getPhoto(i.form.file_2).imageUrl]])]),t("input",{type:"file",onChange:e[4]||(e[4]=(...c)=>r.onChangePhotos2&&r.onChangePhotos2(...c)),required:"",id:"fileInput2",class:"hide-input",accept:"image/*"},null,32)]),L1t],32)])])}const N1t=oe(g1t,[["render",R1t]]),q1t={props:["review"],data(){return{form:{review_text:null,review_rating:5,file_1:null}}},mounted(){},methods:{onChangePhotos(s){const e=s.target.files[0];this.form.file_1=e},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(){this.form.file_1=null},submitReview(){this.$emit("callback",this.form)}}},W1t={class:"card-body"},Y1t=t("h3",{class:"fw-bold text-primary text-center my-3"}," Оставить отзыв ",-1),H1t={class:"form-check mb-2"},Q1t=t("label",{class:"form-check-label",for:"review_ratingReview1"}," Очень хорошо ",-1),G1t={class:"form-check mb-2"},K1t=t("label",{class:"form-check-label",for:"review_ratingReview2"}," Хорошо ",-1),J1t={class:"form-check mb-2"},X1t=t("label",{class:"form-check-label",for:"review_ratingReview3"}," Средне ",-1),Z1t={class:"form-check mb-2"},eyt=t("label",{class:"form-check-label",for:"review_ratingReview4"}," Плохо ",-1),tyt={class:"form-check mb-2"},syt=t("label",{class:"form-check-label",for:"review_ratingReview5"}," Очень плохо ",-1),oyt=t("h6",{class:"my-3 text-center fw-bold"},"Прикрепить фотографию",-1),iyt={class:"photo-preview d-flex justify-content-center flex-wrap w-100 my-3"},nyt={for:"menu-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},lyt=t("span",{class:"text-primary fw-bold"},"+",-1),ayt={key:0,class:"mb-2 img-preview",style:{"margin-right":"10px"}},ryt={class:"remove"},dyt=t("p",{class:"text-center"},[t("strong",null,"Напишите ваш отзыв")],-1),cyt={class:"form-floating"},uyt=t("label",{for:"floatingTextarea"},"Текст отзыва",-1),myt=t("button",{type:"submit",class:"btn btn-primary my-2 w-100 p-3"},"Оставить отзыв",-1),hyt=t("button",{type:"button",class:"btn btn-link my-3 w-100 text-center","data-bs-dismiss":"modal","aria-label":"Close"}," Закрыть ",-1);function pyt(s,e,o,n,i,r){const d=ie("lazy");return l(),a("form",{class:"card",onSubmit:e[8]||(e[8]=W((...c)=>r.submitReview&&r.submitReview(...c),["prevent"]))},[t("div",W1t,[Y1t,t("div",H1t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=c=>i.form.review_rating=c),value:"5",type:"radio",name:"review_rating",id:"review_ratingReview1"},null,512),[[ct,i.form.review_rating]]),Q1t]),t("div",G1t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=c=>i.form.review_rating=c),value:"4",type:"radio",name:"review_rating",id:"review_ratingReview2"},null,512),[[ct,i.form.review_rating]]),K1t]),t("div",J1t,[f(t("input",{class:"form-check-input",value:"3","onUpdate:modelValue":e[2]||(e[2]=c=>i.form.review_rating=c),type:"radio",name:"review_rating",id:"review_ratingReview3"},null,512),[[ct,i.form.review_rating]]),X1t]),t("div",Z1t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=c=>i.form.review_rating=c),value:"2",type:"radio",name:"review_rating",id:"review_ratingReview4"},null,512),[[ct,i.form.review_rating]]),eyt]),t("div",tyt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[4]||(e[4]=c=>i.form.review_rating=c),value:"1",type:"radio",name:"review_rating",id:"review_ratingReview5"},null,512),[[ct,i.form.review_rating]]),syt]),oyt,t("div",iyt,[t("label",nyt,[lyt,t("input",{type:"file",id:"menu-photos",accept:"image/*",onChange:e[5]||(e[5]=(...c)=>r.onChangePhotos&&r.onChangePhotos(...c)),style:{display:"none"}},null,32)]),i.form.file_1?(l(),a("div",ayt,[f(t("img",null,null,512),[[d,r.getPhoto(i.form.file_1).imageUrl]]),t("div",ryt,[t("a",{onClick:e[6]||(e[6]=c=>r.removePhoto())},"Удалить")])])):u("",!0)]),dyt,t("div",cyt,[f(t("textarea",{class:"form-control",style:{"min-height":"250px"},"onUpdate:modelValue":e[7]||(e[7]=c=>i.form.review_text=c),placeholder:"Leave a comment here",id:"floatingTextarea",required:""},null,512),[[k,i.form.review_text]]),uyt]),myt,hyt])],32)}const _yt=oe(q1t,[["render",pyt]]);const fyt={data(){return{load:!1,botUser:null,confirm:!1,form:{name:null,phone:null}}},mounted(){this.botUser=this.getSelf},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},watch:{getSelf:function(){this.botUser=this.getSelf,this.form.name=this.botUser.name||this.botUser.fio_from_telegram||null,this.form.phone=this.botUser.phone||null}},methods:{submit(){this.$preloader.show(),this.$emit("callback",this.form)}}},byt={class:"card"},gyt={class:"card-body"},yyt=t("h3",{class:"fw-bold text-primary text-center my-3"}," Регистрация участника ",-1),vyt={key:0,class:"row"},$yt={class:"col-12 mb-2"},kyt={class:"form-floating"},wyt=t("label",{for:"form-name"},"Ф.И.О.",-1),Fyt={class:"col-12"},Cyt={class:"form-floating"},Pyt=t("label",{for:"form-phone"},"Номер телефона",-1),Syt={class:"col-12"},xyt=t("p",{class:"mb-3"},[t("em",null,"Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1),jyt=t("p",null,[_("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"https://telegra.ph/Politika-konfidencialnosti-12-29-5",target:"_blank"},"политикой конфиденциальности"),_(".")],-1),Oyt={class:"d-flex mb-3"},Tyt={class:"form-check form-switch"},Uyt=t("label",{class:"form-check-label",for:"toggle-id-1"}," С правилами ознакомлен ",-1),Iyt=["disabled"];function Vyt(s,e,o,n,i,r){const d=ie("mask");return l(),a("div",byt,[t("div",gyt,[yyt,t("form",{onSubmit:e[3]||(e[3]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[i.botUser?(l(),a("div",vyt,[t("div",$yt,[t("div",kyt,[f(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"form-name","onUpdate:modelValue":e[0]||(e[0]=c=>i.form.name=c),"aria-describedby":"form-name",required:""},null,512),[[k,i.form.name]]),wyt])]),t("div",Fyt,[t("div",Cyt,[f(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":e[1]||(e[1]=c=>i.form.phone=c),placeholder:"+7(000)000-00-00","aria-label":"form-phone","aria-describedby":"form-phone",required:""},null,512),[[d,["+7(###)###-##-##"]],[k,i.form.phone]]),Pyt])]),t("div",Syt,[xyt,jyt,t("div",Oyt,[t("div",Tyt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[2]||(e[2]=c=>i.confirm=c),type:"checkbox",role:"switch",id:"toggle-id-1"},null,512),[[z,i.confirm]]),Uyt])])])])):u("",!0),t("button",{type:"submit",disabled:!i.confirm||i.load,class:"btn btn-primary w-100 p-3"},"Отправить ",8,Iyt)],32)])])}const Myt=oe(fyt,[["render",Vyt]]);const Ayt={key:0,class:"container py-3"},Eyt={key:0,class:"row"},Dyt={class:"col-12"},zyt=t("i",{class:"fa-regular fa-pen-to-square"},null,-1),Byt={key:1,class:"row"},Lyt={class:"col-12"},Ryt={key:0},Nyt=["innerHTML"],qyt={key:2,class:"mb-2"},Wyt={class:"fw-bold text-primary"},Yyt={class:"fw-bold text-primary"},Hyt=t("p",{class:"mb-0 fw-bold text-danger"},"Вы израсходовали все ваши попытки",-1),Qyt=[Hyt],Gyt={key:4},Kyt={key:0,class:"alert-light alert mb-2"},Jyt=t("h6",{class:"text-center fw-bold"},"Результат розыгрыша",-1),Xyt={class:"mb-2 d-flex justify-content-between"},Zyt={class:"fw-bold text-primary"},evt={class:"mb-2 d-flex justify-content-between"},tvt={class:"fw-bold text-primary"},svt={class:"mb-2 d-flex justify-content-between"},ovt={class:"fw-bold text-primary"},ivt={key:0,class:"mb-0 d-flex justify-content-between"},nvt={class:"fw-bold text-primary"},lvt=t("h6",{class:"mt-3 mb-2 text-center fw-bold"},"Как получить приз",-1),avt=["innerHTML"],rvt={key:5,class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},dvt=t("div",{class:"spinner-border text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),cvt=t("span",null,[t("i",{class:"fa-solid fa-dharmachakra"}),_(" Доступны призы ")],-1),uvt={key:6,class:"alert alert-light w-100"},mvt=["onClick"],hvt={class:"wrap"},pvt={key:0,class:"start-panel"},_vt={key:0,class:"col-12"},fvt={class:"card",id:"result"},bvt={class:"card-body"},gvt=t("h6",{class:"text-center fw-bold"}," Ваш текущий выигрыш ",-1),yvt={class:"mb-2 text-center"},vvt={class:"mb-2 fst-italic"},$vt={key:1,class:"col-12"},kvt=t("h6",{class:"my-3"},"История розыгрышей",-1),wvt={class:"list-group"},Fvt={class:"list-group-item p"},Cvt={class:"mb-2 d-flex justify-content-between"},Pvt={class:"fw-bold text-primary text-right"},Svt={class:"mb-2 d-flex justify-content-between"},xvt={class:"fw-bold text-primary text-right"},jvt={class:"mb-2 d-flex justify-content-between"},Ovt={class:"fw-bold text-primary text-right"},Tvt={key:0,class:"mb-2 d-flex justify-content-between"},Uvt={class:"fw-bold text-primary text-right"},Ivt={key:1,class:"container py-3"},Vvt=t("div",{class:"row"},[t("div",{class:"col-12"},[t("div",{class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},[_(" Подготавливаем данные... "),t("div",{class:"spinner-border text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")])])])],-1),Mvt=[Vvt],Avt={components:{Wheel:dl},name:"App",data(){return{tab:"main",smiles:["💙","💜","💚","💰","👑","🍩","⚽","🦖","🌺","🌷","🐾","⏳","💊","💡","🚀","⭐","💎","☘","🏆","🎁"],rules:null,action:null,step:1,before_script:null,script_data:null,selected_prize:null,show_prizes:!1,wheelDataLoaded:!1,winForm:{win:null},gift:0,logo:{src:"/wheel.png",width:120,height:120},items:[{id:1,value:"🍅",bgColor:"#fac600",color:"#ffffff"},{id:2,value:"🍲",bgColor:"#ffffff",color:"#000000"},{id:3,value:"🍦",bgColor:"#ff2e55",color:"#ffffff"},{id:4,value:"😍",bgColor:"#a1043a",color:"#ffffff"},{id:5,value:"☕",bgColor:"#ffffff",color:"#000000"},{id:6,value:"🍕",bgColor:"#c92729",color:"#ffffff"},{id:7,value:"📲",bgColor:"#ffffff",color:"#000000"},{id:8,value:"📌",bgColor:"#c92729",color:"#ffffff"},{id:9,value:"🚀",bgColor:"#c92729",color:"#ffffff"}]}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp},sortedActionData(){var s;return!this.action||(((s=this.action)==null?void 0:s.data)||[]).length===0?[]:this.action.data.sort((e,o)=>new Date(o.played_at)-new Date(e.played_at))},canPlay(){return this.action?this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.wheelDataLoaded=!1,this.loadServiceData().then(()=>{this.prepareUserData().then(()=>{this.step=this.before_script!=null?0:1,this.wheelDataLoaded=!0})}),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.tg.close()})},methods:{shuffle(s){let e=s.length,o;for(;e>0;)o=Math.floor(Math.random()*e),e--,[s[e],s[o]]=[s[o],s[e]];return s},launchWheel(){if(!this.canPlay){this.$notify({title:"Колесо фортуны",text:"Вы израсходовали все попытки!",type:"error"});return}this.gift=Math.floor(Math.random()*this.items.length)+1;let s=this.$refs.wheel;this.started=!0,s.spin()},formCallback(s){this.step=1,this.winForm={...this.winForm,...s},console.log(this.winForm)},done(s){this.winForm.win=s,this.$notify({title:"Колесо фортуны",text:"Поздравляем! Вы выиграли!",type:"success"}),this.action.current_attempts++,this.$nextTick(()=>{document.querySelector("#result").scrollIntoView(),setTimeout(()=>{this.submit()},2e3)})},lose(){this.$notify({title:"Колесо фортуны",text:"Вы израсходовали все попытки!",type:"error"})},prepareUserData(){return this.$store.dispatch("wheelOfFortuneCustomPrepare").then(s=>{this.action=s.action})},selectPrize(s){this.selected_prize=this.items[s]},loadServiceData(){return this.$store.dispatch("wheelOfFortuneCustomLoadData").then(s=>{this.script_data=s,this.rules=s.rules,this.after_script=s.after_script||null,this.before_script=s.before_script||null;const e=this.shuffle(s.wheels);let o=0;this.items=[];let n=[],i=(r,d)=>(r=Math.ceil(r),d=Math.floor(d),Math.floor(Math.random()*(d-r+1))+r);e.forEach(r=>{let d=!1,c=o+1;for(;!d;)c=this.smiles[i(0,this.smiles.length-1)],n.indexOf(c)===-1&&(n.push(c),d=!0);this.items.push({id:o+1,value:r.smile!=null?r.smile:c,bgColor:r.bg_color!=null?r.bg_color:o%2===0?"#9a1717":"#ffffff",color:"#9a1717",description:r.value}),o++})})},submit(){let s=new FormData;Object.keys(this.winForm).forEach(e=>{const o=this.winForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.set("file_1",this.winForm.file_1),s.set("file_2",this.winForm.file_2),s.append("description",this.winForm.win.description||"Без описания"),this.$store.dispatch("wheelOfFortuneCustomWin",{winForm:s}).then(e=>{this.winForm.win=null,this.prepareUserData(),this.tg.close()}).catch(e=>{}),this.$notify({title:"Колесо фортуны",text:"Вы выиграли приз "+(this.winForm.win.description||"Что-то интересное..."),type:"success"})}}},lc=Object.assign(Avt,{setup(s){return(e,o)=>{var n,i;return e.wheelDataLoaded?(l(),a("div",Ayt,[(e.getSelf||{is_admin:!1}).is_admin?(l(),a("div",Eyt,[t("div",Dyt,[t("button",{type:"button",onClick:o[0]||(o[0]=r=>e.tab=e.tab==="main"?"config":"main"),class:"btn btn-outline-light text-primary w-100 mb-2",style:{"font-size":"12px"}},[zyt,_(" Редактор скрипта ")])])])):u("",!0),e.tab==="main"?(l(),a(v,{key:1},[e.step===0?(l(),a(v,{key:0},[e.before_script==="marketplace_1"?(l(),M(N1t,{key:0,onCallback:e.formCallback},null,8,["onCallback"])):u("",!0),e.before_script==="auth_1"?(l(),M(Myt,{key:1,onCallback:e.formCallback},null,8,["onCallback"])):u("",!0),e.before_script==="review_1"?(l(),M(_yt,{key:2,onCallback:e.formCallback},null,8,["onCallback"])):u("",!0)],64)):u("",!0),e.step===1?(l(),a("div",Byt,[t("div",Lyt,[e.rules?(l(),a("h4",Ryt,"Правила данной игры")):u("",!0),e.rules?(l(),a("p",{key:1,innerHTML:e.rules,class:"mb-2"},null,8,Nyt)):u("",!0),e.canPlay&&e.action?(l(),a("p",qyt,[_("Ваши попытки: "),t("strong",Wyt,p(((n=e.action)==null?void 0:n.current_attempts)||0),1),_(" из "),t("strong",Yyt,p(((i=e.action)==null?void 0:i.max_attempts)||1),1)])):(l(),a("div",{key:3,class:"alert-light alert mb-2",onClick:o[1]||(o[1]=(...r)=>e.lose&&e.lose(...r))},Qyt)),e.action?(l(),a("div",Gyt,[e.sortedActionData.length>0?(l(),a("div",Kyt,[Jyt,t("p",Xyt,[_("Название приза "),t("strong",Zyt,p(e.sortedActionData[0].description||"Отсутствует"),1)]),t("p",evt,[_("Победитель "),t("strong",tvt,p(e.sortedActionData[0].name||"Не указано"),1)]),t("p",svt,[_("Телефон "),t("strong",ovt,p(e.sortedActionData[0].phone||"Не указано"),1)]),e.sortedActionData[0].played_at?(l(),a("p",ivt,[_(" Дата розыгрыша "),t("strong",nvt,p(e.$filters.currentFull(e.sortedActionData[0].played_at)),1)])):u("",!0),lvt,e.script_data.callback_message?(l(),a("p",{key:1,class:"mb-0 fst-italic",innerHTML:e.script_data.callback_message},null,8,avt)):u("",!0)])):u("",!0)])):(l(),a("div",rvt,[_(" Подготавливаем информацию по вашим розыгрышам... "),dvt])),t("p",{class:C([{"alert-primary":!e.show_prizes,"alert-light":e.show_prizes},"my-2 d-flex justify-content-between alert rounded-2 align-items-center"])},[cvt,e.show_prizes?(l(),a("button",{key:0,type:"button",class:"btn btn-light text-primary rounded-5",onClick:o[2]||(o[2]=r=>e.show_prizes=!1)},"Скрыть ")):(l(),a("button",{key:1,type:"button",onClick:o[3]||(o[3]=r=>e.show_prizes=!0),class:"btn btn-primary rounded-5"},"Показать "))],2),e.show_prizes?(l(),a("div",uvt,[(l(!0),a(v,null,O(e.items,(r,d)=>(l(),a("p",{onClick:c=>e.selectPrize(d),class:"mb-0"},p(r.value)+" - "+p(r.description),9,mvt))),256))])):u("",!0),t("div",hvt,[T(Ie(dl),{gift:e.gift,imgParams:e.logo,onDone:e.done,ref:"wheel",modelValue:e.items,"onUpdate:modelValue":o[4]||(o[4]=r=>e.items=r)},null,8,["gift","imgParams","onDone","modelValue"]),e.canPlay?(l(),a("div",pvt,[t("button",{type:"button",onClick:o[5]||(o[5]=(...r)=>e.launchWheel&&e.launchWheel(...r)),class:"btn btn-outline-primary bg-white border-5 text-black w-100 h-100 rounded-circle"}," Нажми старт ")])):u("",!0)])]),e.winForm.win?(l(),a("div",_vt,[t("div",fvt,[t("div",bvt,[gvt,t("h6",yvt,p(e.winForm.win.value||e.winForm.win.id||"-")+" (#"+p(e.winForm.win.id)+")",1),t("p",vvt,p(e.winForm.win.description||"не указно"),1)])])])):u("",!0),e.sortedActionData.length>0?(l(),a("div",$vt,[kvt,t("ul",wvt,[e.action.data?(l(!0),a(v,{key:0},O(e.sortedActionData,r=>(l(),a("li",Fvt,[t("p",Cvt,[_("Название приза "),t("strong",Pvt,p(r.description||"Отсутствует"),1)]),t("p",Svt,[_("Победитель "),t("strong",xvt,p(r.name||"Не указано"),1)]),t("p",jvt,[_("Телефон "),t("strong",Ovt,p(r.phone||"Не указано"),1)]),r.played_at?(l(),a("p",Tvt,[_(" Дата розыгрыша "),t("strong",Uvt,p(e.$filters.currentFull(r.played_at)),1)])):u("",!0)]))),256)):u("",!0)])])):u("",!0)])):u("",!0)],64)):u("",!0),e.tab==="config"?(l(),a(v,{key:2},[t("button",{onClick:o[6]||(o[6]=r=>e.tab="main"),class:"btn btn-light text-secondary mb-3"},"Назад "),e.script_data?(l(),M(b1t,{key:0,modelValue:e.script_data,"onUpdate:modelValue":o[7]||(o[7]=r=>e.script_data=r)},null,8,["modelValue"])):u("",!0)],64)):u("",!0)])):(l(),a("div",Ivt,Mvt))}}}),Evt=Object.freeze(Object.defineProperty({__proto__:null,default:lc},Symbol.toStringTag,{value:"Module"}));const Dvt={computed:{tg(){return window.Telegram.WebApp}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{goTo(s){this.$router.push({name:s})}}},zvt={class:"container py-3"},Bvt={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-2"},Lvt={class:"col"},Rvt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Nvt={class:"menu-item-img img-fluid",alt:""},qvt=t("p",{class:"my-2"},"Управление клиентами",-1),Wvt={class:"col"},Yvt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Hvt={class:"menu-item-img img-fluid",alt:""},Qvt=t("p",{class:"my-2"},"Управление столиками",-1),Gvt={class:"col"},Kvt={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},Jvt={class:"menu-item-img img-fluid",alt:""},Xvt=t("p",{class:"my-2"},"UTM-метки",-1),Zvt={class:"col"},e0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},t0t={class:"menu-item-img img-fluid",alt:""},s0t=t("p",{class:"my-2"},"Управление рассылками",-1),o0t={class:"col"},i0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},n0t={class:"menu-item-img img-fluid",alt:""},l0t=t("p",{class:"my-2"},"Управление товарами",-1),a0t={class:"col"},r0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},d0t={class:"menu-item-img img-fluid",alt:""},c0t=t("p",{class:"my-2"},"Управление заказами",-1),u0t={class:"col"},m0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},h0t={class:"menu-item-img img-fluid",alt:""},p0t=t("p",{class:"my-2"},"Управление промокодами",-1),_0t={class:"col"},f0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},b0t={class:"menu-item-img img-fluid",alt:""},g0t=t("p",{class:"my-2"},"Статистика",-1),y0t={class:"col"},v0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},$0t={class:"menu-item-img img-fluid",alt:""},k0t=t("p",{class:"my-2"},"Управление ботом",-1),w0t={class:"col"},F0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},C0t={class:"menu-item-img img-fluid",alt:""},P0t=t("p",{class:"my-2"},"Управление страницами",-1),S0t={class:"col"},x0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},j0t={class:"menu-item-img img-fluid",alt:""},O0t=t("p",{class:"my-2"},"Управление диалогами",-1),T0t={class:"col"},U0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},I0t={class:"menu-item-img img-fluid",alt:""},V0t=t("p",{class:"my-2"},"Управление скриптами",-1),M0t={class:"col"},A0t={class:"card-body d-flex justify-content-center align-items-center flex-column w-100"},E0t={style:{"max-width":"150px"},class:"menu-item-img img-fluid",alt:""},D0t=t("p",{class:"my-2"},"Интеграции",-1);function z0t(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",zvt,[t("div",Bvt,[t("div",Lvt,[t("button",{type:"button",onClick:e[0]||(e[0]=c=>r.goTo("ClientsV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Rvt,[f(t("img",Nvt,null,512),[[d,"/images/shop-v2-2/clients.png"]]),qvt])])]),t("div",Wvt,[t("button",{type:"button",onClick:e[1]||(e[1]=c=>r.goTo("TablesManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Yvt,[f(t("img",Hvt,null,512),[[d,"/images/shop-v2-2/clients.png"]]),Qvt])])]),t("div",Gvt,[t("button",{type:"button",onClick:e[2]||(e[2]=c=>r.goTo("LinkManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",Kvt,[f(t("img",Jvt,null,512),[[d,"/images/shop-v2-2/utm.png"]]),Xvt])])]),t("div",Zvt,[t("button",{type:"button",onClick:e[3]||(e[3]=c=>r.goTo("MailingV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",e0t,[f(t("img",t0t,null,512),[[d,"/images/shop-v2-2/mail.png"]]),s0t])])]),t("div",o0t,[t("button",{type:"button",onClick:e[4]||(e[4]=c=>r.goTo("ShopV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",i0t,[f(t("img",n0t,null,512),[[d,"/images/shop-v2-2/products.png"]]),l0t])])]),t("div",a0t,[t("button",{type:"button",onClick:e[5]||(e[5]=c=>r.goTo("AdminOrdersV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",r0t,[f(t("img",d0t,null,512),[[d,"/images/shop-v2-2/orders.png"]]),c0t])])]),t("div",u0t,[t("button",{type:"button",onClick:e[6]||(e[6]=c=>r.goTo("PromoCodesV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",m0t,[f(t("img",h0t,null,512),[[d,"/images/shop-v2-2/promo.png"]]),p0t])])]),t("div",_0t,[t("button",{type:"button",onClick:e[7]||(e[7]=c=>r.goTo("StatisticV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",f0t,[f(t("img",b0t,null,512),[[d,"/images/shop-v2-2/statistic.png"]]),g0t])])]),t("div",y0t,[t("button",{type:"button",onClick:e[8]||(e[8]=c=>r.goTo("BotManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",v0t,[f(t("img",$0t,null,512),[[d,"/images/shop-v2-2/statistic.png"]]),k0t])])]),t("div",w0t,[t("button",{type:"button",onClick:e[9]||(e[9]=c=>r.goTo("PageManagerV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",F0t,[f(t("img",C0t,null,512),[[d,"/images/shop-v2-2/statistic.png"]]),P0t])])]),t("div",S0t,[t("button",{type:"button",onClick:e[10]||(e[10]=c=>r.goTo("DialogsV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",x0t,[f(t("img",j0t,null,512),[[d,"/images/shop-v2-2/statistic.png"]]),O0t])])]),t("div",T0t,[t("button",{type:"button",onClick:e[11]||(e[11]=c=>r.goTo("SlugsV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",U0t,[f(t("img",I0t,null,512),[[d,"/images/shop-v2-2/statistic.png"]]),V0t])])]),t("div",M0t,[t("button",{type:"button",onClick:e[12]||(e[12]=c=>r.goTo("IntegrationsV2")),style:{"min-height":"250px"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",A0t,[f(t("img",E0t,null,512),[[d,"/images/shop-v2-2/integrations.png"]]),D0t])])])])])}const ac=oe(Dvt,[["render",z0t]]),B0t=Object.freeze(Object.defineProperty({__proto__:null,default:ac},Symbol.toStringTag,{value:"Module"}));const L0t={data(){return{tab:0,selected_warning:null,load:!1,need_payments:!1,need_shop:!1,bot:null,need_threads:!1,need_cashback_config:!1,cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],botForm:{title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,description:null,info_link:null,commands:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,cashback_fire_percent:0,cashback_fire_period:0,photos:[],selected_bot_template_id:null,pages:[],warnings:[],amo:null,is_active:!1}}},computed:{filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(s=>!(this.botForm.warnings.findIndex(e=>e.rule_key===s.key)>=0))}},watch:{need_threads:function(s,e){let o=[{title:"Отзывы",key:"reviews",value:null},{title:"Операции с cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=o),this.need_threads&&this.botForm.message_threads&&o.forEach(n=>{this.botForm.message_threads.findIndex(r=>r.key===n.key)===-1&&this.botForm.message_threads.push(n)})},need_payments:function(s,e){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},mounted(){this.loadBotAdminConfig(),window.addEventListener("select-telegram-channel-id",s=>{this.botForm[s.detail.param]=s.detail.channel})},methods:{removeCommands(s){this.botForm.commands.splice(s,1)},addCommands(){this.botForm.commands==null&&(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.botForm={id:this.bot.id||null,title:this.bot.title||null,short_description:this.bot.short_description||null,long_description:this.bot.long_description||null,is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,commands:this.bot.commands||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,image:this.bot.image||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1||10,level_2:this.bot.level_2||0,level_3:this.bot.level_3||0,warnings:this.bot.warnings||[],photos:this.bot.photos||[],amo:this.bot.amo||null,is_active:this.bot.is_active||!1},this.botForm.commands==null&&(this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.vk_shop_link&&(this.need_shop=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0)})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},onChangePhotos(s){const e=s.target.files;this.botForm.image=null;for(let o=0;o<e.length;o++)this.botForm.photos.push(e[o])},addItem(s){this.botForm[s].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(s,e){this.botForm[s].splice(e,1)},removePhoto(s){s?this.botForm.photos.splice(s,1):this.botForm.image=null},switchStatus(){this.$store.dispatch("switchBotStatus").then(()=>{this.$notify({title:"Конструктор ботов",text:"Статус бота успешно изменен!",type:"success"})})},addBot(){let s=new FormData;Object.keys(this.botForm).forEach(e=>{const o=this.botForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.company&&s.append("company_id",this.company.id);for(let e=0;e<this.botForm.photos.length;e++)s.append("images[]",this.botForm.photos[e]);s.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:s}).then(e=>{this.$emit("callback",e.data),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.bot==null&&(this.botForm={title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,balance:null,tax_per_day:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],warnings:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[],is_active:!1})}).catch(e=>{})},getWarning(s){let e=this.warnings.find(o=>o.key===s);return e||{title:"Не найдено"}},removeWarning(s){this.botForm.warnings.splice(s,1)},removeCashBackConfig(s){this.botForm.cashback_config.splice(s,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},addWarning(){const s=this.selected_warning;this.botForm.warnings.push({rule_key:s.key,rule_value:0,is_active:!0}),this.selected_warning=null},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},openUrl(s){this.tg.openLink(s)}}},R0t={class:"container py-3"},N0t={class:"row"},q0t={class:"col-12"},W0t={class:"card",style:{height:"330px"}},Y0t={key:0,class:"card-body"},H0t={class:"w-100 d-flex justify-content-center p-3"},Q0t={class:"object-cover",style:{width:"100px","border-radius":"50%"},alt:""},G0t={class:"color-white font-700 text-center mb-2"},K0t={class:"color-white text-center opacity-60 mt-n1 my-1"},J0t=t("i",{class:"fa-solid fa-sack-dollar"},null,-1),X0t={class:"color-white text-center opacity-60 mt-n1 my-1"},Z0t=t("i",{class:"fa-solid fa-hand-holding-dollar"},null,-1),e2t={class:"color-white text-center opacity-60 mt-n1 my-1"},t2t=t("i",{class:"fa-regular fa-calendar-days"},null,-1),s2t={class:"w-100 d-flex justify-content-center py-4"},o2t={class:"form-check form-switch"},i2t={class:"form-check-label",for:"toggle-id-1"},n2t={key:0,class:"ml-5"},l2t={key:1,class:"ml-5"},a2t={key:1,class:"card-body"},r2t=t("p",null,"Загружаем данные бота",-1),d2t=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),c2t=[r2t,d2t],u2t=t("div",{class:"card-overlay bg-black opacity-70"},null,-1),m2t={class:"nav nav-tabs justify-content-center my-2"},h2t={class:"nav-item"},p2t={class:"nav-item"},_2t={class:"nav-item"},f2t={class:"nav-item"},b2t=t("div",{class:"alert alert-light my-2"},' Строго взять из BotFather! ТО что при создании с окончанием на "bot" ',-1),g2t={class:"form-floating mb-2"},y2t=t("label",{id:"bot-domain"}," Доменное имя бота из BotFather ",-1),v2t={key:0},$2t={class:"alert alert-light"},k2t={class:"form-floating mb-2"},w2t=t("label",{id:"bot-token"}," Токен бота ",-1),F2t={class:"form-floating mb-2"},C2t=t("label",{id:"bot-token-dev"},"Токен бота (для тестирования)",-1),P2t=t("div",{class:"alert alert-light"}," Имя бота, которая отображается у всех пользователей в боте ",-1),S2t={class:"form-floating mb-2"},x2t=t("label",{id:"bot-title"}," Отображаемое имя бота ",-1),j2t=t("div",{class:"alert alert-info"}," Описание бота, которое отобразится при переходе в бота по ссылке ",-1),O2t={class:"form-floating mb-2"},T2t={id:"bot-short-description"},U2t={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},I2t={class:"form-floating mb-2"},V2t={id:"bot-short-description"},M2t={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},A2t=t("h6",null,"Команды в боте",-1),E2t={key:0},D2t=t("em",null,"К сожалению, вы еще не добавили ни 1й команды в меню бота",-1),z2t=[D2t],B2t=t("p",{class:"mb-2"},[t("em",null,[_("Например, команда "),t("b",null,"/start"),_(", а описание к ней: "),t("b",null,"начало работы с системой")])],-1),L2t={class:"mb-2"},R2t=["onUpdate:modelValue","aria-describedby"],N2t={class:"mb-2"},q2t=["onUpdate:modelValue","aria-describedby"],W2t=["onClick"],Y2t=t("i",{class:"fa-regular fa-trash-can"},null,-1),H2t=t("div",{class:"divider divider-small my-4 bg-highlight"},null,-1),Q2t={class:"mb-2"},G2t=t("p",{class:"mb-2"},[t("em",null,[_("Данные команды отображаются в кнопке "),t("b",null,"Меню"),_(" слева от поля ввода в боте")])],-1),K2t={class:"mb-2"},J2t={class:"d-flex justify-content-between align-items-center flex-wrap"},X2t={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center w-100",id:"bot-order-channel"},Z2t=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),e$t=t("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),t$t=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),s$t=[t$t],o$t=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),i$t=t("div",null,"Нужно ",-1),n$t={class:"mb-2"},l$t={class:"d-flex justify-content-between"},a$t={class:"form-label d-flex justify-content-between mt-2",id:"bot-main-channel"},r$t=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),d$t=[r$t],c$t={class:"mb-2"},u$t={class:"form-check"},m$t=t("label",{class:"form-check-label",for:"need-payments"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),h$t={key:0,class:"mb-2"},p$t=t("p",{class:"mb-2 font-italic"},[_("Для того, чтоб узнать идентификатор топика в группе впишите в чат "),t("strong",null,'"Мой id"')],-1),_$t={class:"list-group"},f$t={class:"list-group-item"},b$t={class:"mb-0"},g$t=["onUpdate:modelValue"],y$t={key:1,class:"mb-0"},v$t={class:"mb-2"},$$t={class:"d-flex justify-content-between flex-wrap"},k$t={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-description"},w$t=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),F$t=t("div",null,"Отобразится пользователю при первом запуске",-1),C$t=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),P$t=t("div",null,"Нужно ",-1),S$t={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},x$t={class:"mb-2"},j$t={class:"d-flex justify-content-between flex-wrap"},O$t={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-description"},T$t=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),U$t=t("div",null,'Для меню "О Боте"',-1),I$t=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),V$t=t("div",null,"Нужно ",-1),M$t={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},A$t={class:"mb-2"},E$t={class:"d-flex justify-content-between flex-wrap"},D$t={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-maintenance-message"},z$t=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),B$t=t("div",null,'Для меню "О Боте"',-1),L$t=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),R$t=t("div",null,"Нужно ",-1),N$t={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},q$t={class:"mb-2"},W$t={class:"form-label d-flex justify-content-between mt-2",id:"bot-callback-url"},Y$t=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),H$t=t("div",null,"Ссылка на внешний сервис для обратной связи ",-1),Q$t=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),G$t={class:"mb-2"},K$t={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},J$t=t("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),X$t=t("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Z$t=t("a",{target:"_blank",href:"https://telegra.ph"},"Создать",-1),ekt=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),tkt=t("h6",null,"Ссылки на соц. сети",-1),skt={class:"d-flex justify-content-between align-items-center w-100"},okt=t("small",null,"Ссылка",-1),ikt=["onClick"],nkt=t("i",{class:"fa-regular fa-trash-can"},null,-1),lkt=[nkt],akt=["onUpdate:modelValue","aria-describedby"],rkt=["onUpdate:modelValue"],dkt=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),ckt={class:"d-flex justify-content-between align-items-center"},ukt=t("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),mkt=t("div",null,"Нужно ",-1),hkt={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},pkt={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},_kt=t("span",null,"+",-1),fkt={class:"mb-2 img-preview",style:{"margin-right":"10px"}},bkt={class:"remove"},gkt=["onClick"],ykt=t("i",{class:"fa-regular fa-trash-can"},null,-1),vkt=[ykt],$kt={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},kkt={class:"remove"},wkt=t("i",{class:"fa-regular fa-trash-can"},null,-1),Fkt=[wkt],Ckt={class:"form-floating mb-2"},Pkt=t("label",{id:"bot-level-1"}," Уровень баллов #1 , % ",-1),Skt={class:"form-floating mb-2"},xkt=t("label",{id:"bot-level-2"},"Уровень баллов #2, %",-1),jkt={class:"form-floating mb-2"},Okt=t("label",{id:"bot-level-3"},"Уровень баллов #3, %",-1),Tkt={class:"form-floating mb-2"},Ukt=["value"],Ikt=t("label",{id:"cashback-fired-period"},"Период сгорания баллов",-1),Vkt={key:0,class:"form-floating mb-2"},Mkt=t("label",{id:"cashback-fired-level"},"Уровень сгорания баллов, %",-1),Akt={class:"form-check mb-2"},Ekt=t("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить баллы по категориям ",-1),Dkt={key:1,class:"mb-2"},zkt=t("h6",null,"Настройка категорий баллов",-1),Bkt={class:"form-floating"},Lkt=["onUpdate:modelValue","aria-describedby"],Rkt=t("label",{for:""},"Название категории",-1),Nkt={class:"input-group-text",id:"basic-addon1"},qkt=["onClick"],Wkt=t("i",{class:"fa-regular fa-trash-can"},null,-1),Ykt=[Wkt],Hkt={class:"form-floating mb-2"},Qkt=t("option",{value:null},"Не выбрано",-1),Gkt=["value"],Kkt=t("label",{class:"form-check-label",for:"warning-rules"},[t("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),_(" Правила критических оповещений ")],-1),Jkt={class:"form-check form-switch"},Xkt=["onUpdate:modelValue","id"],Zkt=["for"],ewt={key:0,class:"fw-bold small text-primary"},twt={key:1,class:"fw-bold small text-primary"},swt={class:"input-group mb-2"},owt={class:"form-floating"},iwt=["onUpdate:modelValue"],nwt={class:"input-group-text",id:"basic-addon1"},lwt=["onClick"],awt=t("i",{class:"fa-solid fa-trash-can"},null,-1),rwt=[awt],dwt={class:"form-check form-switch mb-2"},cwt=t("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему",-1),uwt={class:"form-check form-switch"},mwt=["value"],hwt=t("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),pwt=t("div",{class:"alert alert-light mb-2"},[_(" Если в боте планируется оплата, то необходимо через BotFather "),t("a",{href:"https://t.me/botfather",target:"_blank"},"привязать нужную"),_(" платежную систему и указать в данном поле полученный токен ")],-1),_wt={class:"form-floating mb-2"},fwt=t("label",{for:""},"Токен платежной системы",-1),bwt={class:"form-check form-switch"},gwt=t("label",{class:"form-check-label",for:"need-shop"},"Необходимо интегрировать магазин в бота",-1),ywt=t("div",{class:"alert alert-light mb-2"},[_(" Ссылка на страницу ВК с товарами для вашего магазина в боте. "),t("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),vwt={class:"form-floating mb-2"},$wt=t("label",{for:"vk_shop_link"}," ВК-группа ",-1),kwt=t("p",null,"Загружаем данные бота",-1),wwt=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),Fwt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},Cwt=["disabled"];function Pwt(s,e,o,n,i,r){const d=Qe("Popper"),c=Qe("tempalte"),h=ie("lazy");return l(),a("div",R0t,[t("div",N0t,[t("div",q0t,[t("div",W0t,[i.bot?(l(),a("div",Y0t,[t("div",H0t,[f(t("img",Q0t,null,512),[[h,"/images-by-company-id/"+i.bot.company_id+"/"+i.bot.image]])]),t("h2",G0t,p(i.bot.bot_domain||"Нет домена"),1),t("p",K0t,[J0t,_(" Баланс "+p(i.bot.balance||"0")+" ₽ ",1)]),t("p",X0t,[Z0t,_(" Тариф "+p(i.bot.tax_per_day||"0")+" ₽/день ",1)]),t("p",e2t,[t2t,_(" Дней "+p(i.bot.balance/i.bot.tax_per_day)+" осталось ",1)]),t("div",s2t,[t("div",o2t,[f(t("input",{class:"form-check-input",onChange:e[0]||(e[0]=(...g)=>r.switchStatus&&r.switchStatus(...g)),"onUpdate:modelValue":e[1]||(e[1]=g=>i.botForm.is_active=g),type:"checkbox",role:"switch",id:"toggle-id-1"},null,544),[[z,i.botForm.is_active]]),t("label",i2t,[i.botForm.is_active?(l(),a("span",n2t,"Вкл")):(l(),a("span",l2t,"Выкл"))])])])])):(l(),a("div",a2t,c2t)),u2t]),t("form",{onSubmit:e[42]||(e[42]=W((...g)=>r.addBot&&r.addBot(...g),["prevent"]))},[i.bot?(l(),a(v,{key:0},[t("ul",m2t,[t("li",h2t,[t("a",{onClick:e[2]||(e[2]=g=>i.tab=0),class:C([{active:i.tab===0},"nav-link"]),href:"javascript:void(0)","aria-current":"page"},"Основное",2)]),t("li",p2t,[t("a",{class:C(["nav-link",{active:i.tab===1}]),onClick:e[3]||(e[3]=g=>i.tab=1),href:"javascript:void(0)"},"Команды",2)]),t("li",_2t,[t("a",{class:C(["nav-link",{active:i.tab===2}]),onClick:e[4]||(e[4]=g=>i.tab=2),href:"javascript:void(0)"},"Каналы",2)]),t("li",f2t,[t("a",{class:C(["nav-link",{active:i.tab===3}]),onClick:e[5]||(e[5]=g=>i.tab=3),href:"javascript:void(0)"},"CashBack и платежные системы",2)])]),f(t("div",null,[b2t,t("div",g2t,[f(t("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота","onUpdate:modelValue":e[6]||(e[6]=g=>i.botForm.bot_domain=g),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,i.botForm.bot_domain]]),y2t]),i.botForm.bot_domain?(l(),a("p",v2t,[_("Проверить работу бота "),t("a",{href:"javascript:void(0)",onClick:e[7]||(e[7]=g=>r.openUrl("https://t.me/"+i.botForm.bot_domain))},"@"+p(i.botForm.bot_domain),1)])):u("",!0),t("div",$2t,[_(" Взять из BotFater при создании бота! Длинная нечитаемая подсвеченная строка! "),t("a",{href:"javascript:void(0)",onClick:e[8]||(e[8]=g=>r.openUrl("https://t.me/botfather")),class:"w-100",target:"_blank"},"Создать нового бота в ТГ"),_(" или получить тоукен существюущего можно по ссылке. ")]),t("div",k2t,[f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[9]||(e[9]=g=>i.botForm.bot_token=g),maxlength:"255","aria-describedby":"bot-token",required:""},null,512),[[k,i.botForm.bot_token]]),w2t]),t("div",F2t,[f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[10]||(e[10]=g=>i.botForm.bot_token_dev=g),maxlength:"255","aria-describedby":"bot-token-dev"},null,512),[[k,i.botForm.bot_token_dev]]),C2t]),P2t,t("div",S2t,[f(t("input",{type:"text",class:"form-control",placeholder:"Отображаемое имя бота","aria-label":"Отображаемое имя бота","onUpdate:modelValue":e[11]||(e[11]=g=>i.botForm.title=g),maxlength:"64","aria-describedby":"bot-title"},null,512),[[k,i.botForm.title]]),x2t]),j2t,t("div",O2t,[f(t("textarea",{class:"form-control font-12",placeholder:"Короткое описание бота","aria-label":"Короткое описание бота","onUpdate:modelValue":e[12]||(e[12]=g=>i.botForm.short_description=g),maxlength:"120",style:{"min-height":"200px"},"aria-describedby":"short-description"},null,512),[[k,i.botForm.short_description]]),t("label",T2t,[_(" Короткое описание бота "),i.botForm.short_description?(l(),a("small",U2t,p(i.botForm.short_description.length)+" / 120",1)):u("",!0)])]),t("div",I2t,[f(t("textarea",{class:"form-control font-12",placeholder:"Длинное описание бота","aria-label":"Длинное описание бота","onUpdate:modelValue":e[13]||(e[13]=g=>i.botForm.long_description=g),maxlength:"512",style:{"min-height":"200px"},"aria-describedby":"short-description"},null,512),[[k,i.botForm.long_description]]),t("label",V2t,[_(" Длинное описание бота "),i.botForm.long_description?(l(),a("small",M2t,p(i.botForm.long_description.length)+" / 512",1)):u("",!0)])])],512),[[tt,i.tab===0]]),f(t("div",null,[A2t,i.botForm.commands?u("",!0):(l(),a("p",E2t,z2t)),B2t,(l(!0),a(v,null,O(i.botForm.commands,(g,w)=>(l(),a("div",{class:"mb-2",key:"commands-"+w},[t("div",L2t,[f(t("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":x=>i.botForm.commands[w].command=x,"aria-describedby":"bot-command-"+w,required:""},null,8,R2t),[[k,i.botForm.commands[w].command]])]),t("div",N2t,[f(t("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255","onUpdate:modelValue":x=>i.botForm.commands[w].description=x,"aria-describedby":"bot-command-description-"+w,required:""},null,8,q2t),[[k,i.botForm.commands[w].description]])]),t("button",{type:"button",onClick:x=>r.removeCommands(w),class:"btn btn-outline-danger w-100"},[Y2t,_(" Удалить команду ")],8,W2t),H2t]))),128)),t("div",Q2t,[G2t,t("button",{type:"button",onClick:e[14]||(e[14]=g=>r.addCommands()),class:"btn btn-success w-100"},"Добавить еще команду ")])],512),[[tt,i.tab===1]]),f(t("div",null,[t("div",K2t,[t("div",J2t,[t("label",X2t,[t("div",null,[T(d,null,{content:A(()=>[e$t]),default:A(()=>[Z2t]),_:1}),_(" Канал для заказов (id) "),t("span",{onClick:e[15]||(e[15]=g=>r.requestChannelId("order_channel"))},s$t)]),T(d,null,{content:A(()=>[i$t]),default:A(()=>[o$t]),_:1})])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":e[16]||(e[16]=g=>i.botForm.order_channel=g),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[k,i.botForm.order_channel]])]),t("div",n$t,[t("div",l$t,[t("label",a$t,[_("Канал для постов (id,рекламный) "),t("span",{onClick:e[17]||(e[17]=g=>r.requestChannelId("main_channel"))},d$t)])]),f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":e[18]||(e[18]=g=>i.botForm.main_channel=g),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[k,i.botForm.main_channel]])]),t("div",c$t,[t("div",u$t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[19]||(e[19]=g=>i.need_threads=g),type:"checkbox",id:"need-payments"},null,512),[[z,i.need_threads]]),m$t])]),i.need_threads?(l(),a("div",h$t,[p$t,t("ul",_$t,[(l(!0),a(v,null,O(i.botForm.message_threads,(g,w)=>(l(),a("li",f$t,[t("p",b$t,p(g.title)+" ("+p(g.key)+")",1),f(t("input",{type:"text",class:"form-control",placeholder:"Идентификатор топика","onUpdate:modelValue":x=>i.botForm.message_threads[w].value=x},null,8,g$t),[[k,i.botForm.message_threads[w].value]])]))),256))])])):u("",!0),i.botForm.bot_token?(l(),a("div",y$t,[t("div",v$t,[t("div",$$t,[t("label",k$t,[t("div",null,[T(d,null,{content:A(()=>[F$t]),default:A(()=>[w$t]),_:1}),_(" Приветственное сообщение ")]),T(d,null,{content:A(()=>[P$t]),default:A(()=>[C$t]),_:1})]),i.botForm.welcome_message?(l(),a("small",S$t," Длина текста "+p(i.botForm.welcome_message.length),1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":e[20]||(e[20]=g=>i.botForm.welcome_message=g),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[k,i.botForm.welcome_message]])]),t("div",x$t,[t("div",j$t,[t("label",O$t,[t("div",null,[T(d,null,{content:A(()=>[U$t]),default:A(()=>[T$t]),_:1}),_(" Описание бота ")]),T(d,null,{content:A(()=>[V$t]),default:A(()=>[I$t]),_:1})]),i.botForm.description?(l(),a("small",M$t," Длина текста "+p(i.botForm.description.length)+" / 255",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":e[21]||(e[21]=g=>i.botForm.description=g),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[k,i.botForm.description]])]),t("div",A$t,[t("div",E$t,[t("label",D$t,[t("div",null,[T(d,null,{content:A(()=>[B$t]),default:A(()=>[z$t]),_:1}),_(" Режим тех. работ ")]),T(d,null,{content:A(()=>[R$t]),default:A(()=>[L$t]),_:1})]),i.botForm.maintenance_message?(l(),a("small",N$t," Длина текста "+p(i.botForm.maintenance_message.length)+" / 255 ",1)):u("",!0)]),f(t("textarea",{class:"form-control font-12",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":e[22]||(e[22]=g=>i.botForm.maintenance_message=g),maxlength:"255",style:{"min-height":"200px"},"aria-describedby":"bot-maintenance-message",required:""},`
                    `,512),[[k,i.botForm.maintenance_message]])]),t("div",q$t,[t("label",W$t,[t("div",null,[T(d,null,{content:A(()=>[H$t]),default:A(()=>[Y$t]),_:1}),_(" ВК-группа ")])]),f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"Ссылка на внешний сервис","onUpdate:modelValue":e[23]||(e[23]=g=>i.botForm.callback_link=g),"aria-describedby":"callback_link"},null,512),[[k,i.botForm.callback_link]])]),Q$t,t("div",G$t,[t("label",K$t,[t("div",null,[T(d,null,{content:A(()=>[X$t]),default:A(()=>[J$t]),_:1}),_(" Информационная ссылка ")]),Z$t]),f(t("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":e[24]||(e[24]=g=>i.botForm.info_link=g),"aria-describedby":"bot-info-link"},null,512),[[k,i.botForm.info_link]])]),ekt,tkt,(l(!0),a(v,null,O(i.botForm.social_links,(g,w)=>(l(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+w},[t("div",skt,[okt,t("button",{type:"button",onClick:x=>r.removeItem("social_links",w),class:"btn btn-link text-danger"},lkt,8,ikt)]),f(t("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255","onUpdate:modelValue":x=>i.botForm.social_links[w].title=x,"aria-describedby":"bot-social-link-"+w,required:""},null,8,akt),[[k,i.botForm.social_links[w].title]]),f(t("input",{type:"text",class:"form-control mb-2",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":x=>i.botForm.social_links[w].url=x},null,8,rkt),[[k,i.botForm.social_links[w].url]])]))),128)),t("button",{type:"button",onClick:e[25]||(e[25]=g=>r.addSocialLinks()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще ссылку "),dkt,t("h6",ckt,[_("Аватар для бота "),T(d,null,{content:A(()=>[mkt]),default:A(()=>[ukt]),_:1})]),t("div",hkt,[t("label",pkt,[_kt,t("input",{type:"file",id:"bot-photos",multiple:"",accept:"image/*",onChange:e[26]||(e[26]=(...g)=>r.onChangePhotos&&r.onChangePhotos(...g)),style:{display:"none"}},null,32)]),i.botForm.photos?(l(!0),a(v,{key:0},O(i.botForm.photos,(g,w)=>(l(),a("div",fkt,[f(t("img",null,null,512),[[h,r.getPhoto(g).imageUrl]]),t("div",bkt,[t("a",{onClick:x=>r.removePhoto(w)},vkt,8,gkt)])]))),256)):(l(),a("div",$kt,[f(t("img",null,null,512),[[h,"/images-by-bot-id/"+i.bot.id+"/"+i.botForm.image]]),t("div",kkt,[t("a",{onClick:e[27]||(e[27]=g=>r.removePhoto())},Fkt)])]))])])):u("",!0)],512),[[tt,i.tab===2]]),f(t("div",null,[t("div",Ckt,[f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень баллов","onUpdate:modelValue":e[28]||(e[28]=g=>i.botForm.level_1=g),min:"0","aria-describedby":"bot-level-1",required:""},null,512),[[k,i.botForm.level_1]]),Pkt]),t("div",Skt,[f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень баллов","onUpdate:modelValue":e[29]||(e[29]=g=>i.botForm.level_2=g),min:"0","aria-describedby":"bot-level-2"},null,512),[[k,i.botForm.level_2]]),xkt]),t("div",jkt,[f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":e[30]||(e[30]=g=>i.botForm.level_3=g),min:"0","aria-describedby":"bot-level-3"},null,512),[[k,i.botForm.level_3]]),Okt]),t("div",Tkt,[f(t("select",{class:"form-control","onUpdate:modelValue":e[31]||(e[31]=g=>i.botForm.cashback_fire_period=g),id:"cashback-fired-period"},[(l(!0),a(v,null,O(i.cashback_fire_periods,g=>(l(),a("option",{value:g.value},p(g.title||"Не указано"),9,Ukt))),256))],512),[[Ve,i.botForm.cashback_fire_period]]),Ikt]),i.botForm.cashback_fire_period>0?(l(),a("div",Vkt,[f(t("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания баллов","onUpdate:modelValue":e[32]||(e[32]=g=>i.botForm.cashback_fire_percent=g),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[k,i.botForm.cashback_fire_percent]]),Mkt])):u("",!0),t("div",Akt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[33]||(e[33]=g=>i.need_cashback_config=g),type:"checkbox",id:"need-cashback-config"},null,512),[[z,i.need_cashback_config]]),Ekt]),i.need_cashback_config?(l(),a("div",Dkt,[zkt,(l(!0),a(v,null,O(i.botForm.cashback_config,(g,w)=>(l(),a("div",{key:"social-link"+w,class:"input-group mb-2"},[t("div",Bkt,[f(t("input",{type:"text",class:"form-control w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":x=>i.botForm.cashback_config[w].title=x,"aria-describedby":"bot-cashback-config-"+w,required:""},null,8,Lkt),[[k,i.botForm.cashback_config[w].title]]),Rkt]),t("span",Nkt,[t("button",{type:"button",onClick:x=>r.removeCashBackConfig(w),class:"btn text-danger p-1"},Ykt,8,qkt)])]))),128)),t("button",{type:"button",onClick:e[34]||(e[34]=g=>r.addCashBackConfig()),class:"btn btn-outline-primary p-3 w-100"}," Добавить еще категорию ")])):u("",!0),t("div",Hkt,[f(t("select",{class:"form-control","onUpdate:modelValue":e[35]||(e[35]=g=>i.selected_warning=g),onChange:e[36]||(e[36]=(...g)=>r.addWarning&&r.addWarning(...g)),id:"warning-rules"},[Qkt,(l(!0),a(v,null,O(r.filteredWarnings,g=>(l(),a("option",{value:g},p(g.title),9,Gkt))),256))],544),[[Ve,i.selected_warning]]),Kkt]),(l(!0),a(v,null,O(i.botForm.warnings,(g,w)=>(l(),a(v,null,[t("div",Jkt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":x=>i.botForm.warnings[w].is_active=x,type:"checkbox",role:"switch",id:"warning-is-active-"+w},null,8,Xkt),[[z,i.botForm.warnings[w].is_active]]),t("label",{class:"form-check-label",for:"warning-is-active-"+w},[_(p(r.getWarning(g.rule_key).title||"Не найдено")+" ",1),i.botForm.warnings[w].is_active?(l(),a("span",ewt,"(Вкл)")):(l(),a("span",twt,"(Выкл)"))],8,Zkt)]),t("div",swt,[t("div",owt,[f(t("input",{type:"number",class:"form-control",placeholder:"Значение","onUpdate:modelValue":x=>i.botForm.warnings[w].rule_value=x,min:"0","aria-describedby":"bot-level-3"},null,8,iwt),[[k,i.botForm.warnings[w].rule_value]])]),t("div",nwt,[t("button",{onClick:x=>r.removeWarning(w),type:"button",class:"btn p-1"},rwt,8,lwt)])])],64))),256)),t("div",dwt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[37]||(e[37]=g=>i.need_payments=g),type:"checkbox",role:"switch",id:"need-payments"},null,512),[[z,i.need_payments]]),cwt]),i.need_payments?(l(),a(v,{key:2},[t("div",uwt,[f(t("input",{class:"form-check-input",value:i.botForm.auto_cashback_on_payments,"onUpdate:modelValue":e[38]||(e[38]=g=>i.botForm.auto_cashback_on_payments=g),type:"checkbox",role:"switch",id:"bot-auto-cashback-on-payments"},null,8,mwt),[[z,i.botForm.auto_cashback_on_payments]]),hwt]),pwt,t("div",_wt,[f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"уровень CashBack","onUpdate:modelValue":e[39]||(e[39]=g=>i.botForm.payment_provider_token=g),"aria-describedby":"bot-level-3"},null,512),[[k,i.botForm.payment_provider_token]]),fwt])],64)):u("",!0),t("div",bwt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[40]||(e[40]=g=>i.need_shop=g),type:"checkbox",role:"switch",id:"need-shop"},null,512),[[z,i.need_shop]]),gwt]),i.need_shop?(l(),a(v,{key:3},[ywt,t("div",vwt,[f(t("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":e[41]||(e[41]=g=>i.botForm.vk_shop_link=g),id:"vk_shop_link","aria-describedby":"vk_shop_link"},null,512),[[k,i.botForm.vk_shop_link]]),$wt])],64)):u("",!0)],512),[[tt,i.tab===3]])],64)):(l(),M(c,{key:1},{default:A(()=>[kwt,wwt]),_:1})),t("nav",Fwt,[t("button",{disabled:!i.botForm.bot_token,type:"submit",class:"btn btn-primary p-3 w-100"}," Сохранить настройки ",8,Cwt)])],32)])])])}const rc=oe(L0t,[["render",Pwt]]),Swt=Object.freeze(Object.defineProperty({__proto__:null,default:rc},Symbol.toStringTag,{value:"Module"}));const xwt={class:"form-floating mb-2"},jwt=t("label",{for:""},[t("i",{class:"fa fa-search"}),_(" Поиск страниц")],-1),Owt={class:"form-floating my-2"},Twt=t("option",{value:"id"},"По номеру страницы",-1),Uwt=t("option",{value:"updated_at"},"По дате добавления",-1),Iwt=[Twt,Uwt],Vwt=t("label",{for:"floatingSelect"},"Сортировать по...",-1),Mwt={key:0},Awt=t("i",{class:"fa-solid fa-caret-up"},null,-1),Ewt=t("i",{class:"fa-solid fa-caret-down"},null,-1),Dwt={key:1,class:"list-group w-100"},zwt={class:"d-flex justify-content-between align-items-center"},Bwt=["onClick"],Lwt={class:"badge bg-primary mr-2 rounded-5",style:{"font-size":"10px"}},Rwt={key:0},Nwt={key:1},qwt=t("i",{class:"fa-solid fa-lock"},null,-1),Wwt=[qwt],Ywt={class:"component-icons mt-2"},Hwt={key:0},Qwt=t("i",{class:"fa-regular fa-images"},null,-1),Gwt=[Qwt],Kwt={key:1},Jwt=t("i",{class:"fa-regular fa-note-sticky"},null,-1),Xwt=[Jwt],Zwt={key:2},e3t=t("i",{class:"fa-solid fa-photo-film"},null,-1),t3t=[e3t],s3t={key:3},o3t=t("i",{class:"fa-regular fa-file-audio"},null,-1),i3t=[o3t],n3t={key:4},l3t=t("i",{class:"fa-regular fa-file-word"},null,-1),a3t=[l3t],r3t={key:5},d3t=t("i",{class:"fa-solid fa-link"},null,-1),c3t=[d3t],u3t={key:6},m3t=t("i",{class:"fa-solid fa-scroll"},null,-1),h3t=[m3t],p3t={key:7},_3t=t("i",{class:"fa-regular fa-comment-dots"},null,-1),f3t=[_3t],b3t={key:8},g3t=t("i",{class:"fa-solid fa-scale-balanced"},null,-1),y3t=[g3t],v3t={key:9},$3t=t("i",{class:"fa-regular fa-keyboard"},null,-1),k3t=[$3t],w3t={key:10},F3t=t("i",{class:"fa-solid fa-ellipsis"},null,-1),C3t=[F3t],P3t={key:0,class:"dropdown"},S3t=t("button",{class:"btn",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-ellipsis"})],-1),x3t={class:"dropdown-menu"},j3t=["onClick"],O3t=["onClick"],T3t={key:3,class:"alert alert-warning",role:"alert"},U3t={key:4,class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},I3t={props:["current","editor"],data(){return{bot:null,loading:!0,pages:[],sort:{param:"id",direction:"desc"},search:null,pages_paginate_object:null,need_new_page:!1}},computed:{...G(["getPages","getPagesPaginateObject"])},mounted(){this.loadPages(),window.addEventListener("reload-page-list",s=>{this.loadPages()})},methods:{changeDirection(s){this.sort.direction=s,this.loadPages(0)},duplicatePage(s){let e=this.pages.findIndex(o=>o.id===s);e!==-1&&(this.pages[e].before_duplicate=!0),this.$store.dispatch("duplicatePage",{dataObject:{pageId:s}}).then(o=>{this.$notify({title:"Управление страница",text:"Страница успешно продублирована!",type:"success"}),this.sort.param="id",this.sort.direction="desc",this.loadPages()}).catch(()=>{this.$notify({title:"Управление страница",text:"Ошибка дублирования страницы!",type:"error"})})},removePage(s){let e=this.pages.findIndex(o=>o.id===s);e!==-1&&(this.pages[e].before_deleted=!0),this.$store.dispatch("removePage",{dataObject:{pageId:s}}).then(o=>{this.$notify({title:"Управление страница",text:"Страница успешно удалена!",type:"success"}),this.loadPages()}).catch(()=>{this.$notify({title:"Управление страница",text:"Ошибка удаления страницы!",type:"error"})})},selectPage(s){this.$emit("callback",s)},nextPages(s){this.loadPages(s)},loadPages(s=0){this.$store.dispatch("loadPages",{dataObject:{search:this.search,order_by:this.sort.param||null,direction:this.sort.direction||"asc"},page:s}).then(e=>{this.pages=this.getPages,this.pages_paginate_object=this.getPagesPaginateObject}).catch(()=>{})}}},on=Object.assign(I3t,{__name:"PageList",setup(s){return(e,o)=>(l(),a(v,null,[t("div",xwt,[f(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),class:"form-control",placeholder:"Поиск страницы"},null,512),[[k,e.search]]),jwt]),t("div",Owt,[f(t("select",{onChange:o[1]||(o[1]=n=>e.loadPages(0)),"onUpdate:modelValue":o[2]||(o[2]=n=>e.sort.param=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},Iwt,544),[[Ve,e.sort.param]]),Vwt]),e.sort.param!=null?(l(),a("p",Mwt,[_("Направление сортировки: "),e.sort.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[3]||(o[3]=n=>e.changeDirection("desc"))},[_("по возрастанию "),Awt])):u("",!0),e.sort.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[4]||(o[4]=n=>e.changeDirection("asc"))},[_("по убыванию "),Ewt])):u("",!0)])):u("",!0),t("button",{class:"btn btn-primary p-3 mb-3 w-100",onClick:o[5]||(o[5]=(...n)=>e.loadPages&&e.loadPages(...n)),type:"button",id:"button-addon2"},"Найти "),e.pages.length>0?(l(),a("ul",Dwt,[(l(!0),a(v,null,O(e.pages,(n,i)=>(l(),a("li",{class:C([{"bg-danger text-white":n.before_deleted,"bg-success text-white":n.before_duplicate},"list-group-item cursor-pointer px-2 py-2 border-light"])},[t("div",zwt,[t("strong",{onClick:r=>e.selectPage(n)},[t("span",Lwt,"#"+p(n.id||"Не указано"),1),n.slug?(l(),a("span",Rwt,p(n.slug.command||"Не указано"),1)):u("",!0),s.current&&s.current===n.id?(l(),a("span",Nwt,Wwt)):u("",!0),t("ul",Ywt,[(n.images||[]).length>0?(l(),a("li",Hwt,Gwt)):u("",!0),n.sticker?(l(),a("li",Kwt,Xwt)):u("",!0),(n.videos||[]).length>0?(l(),a("li",Zwt,t3t)):u("",!0),(n.audios||[]).length>0?(l(),a("li",s3t,i3t)):u("",!0),(n.documents||[]).length>0?(l(),a("li",n3t,a3t)):u("",!0),n.next_page_id?(l(),a("li",r3t,c3t)):u("",!0),n.next_bot_menu_slug_id?(l(),a("li",u3t,h3t)):u("",!0),n.next_bot_dialog_command_id?(l(),a("li",p3t,f3t)):u("",!0),n.rules_if?(l(),a("li",b3t,y3t)):u("",!0),n.reply_keyboard_id?(l(),a("li",v3t,k3t)):u("",!0),n.inline_keyboard_id?(l(),a("li",w3t,C3t)):u("",!0)])],8,Bwt),s.editor?(l(),a("div",P3t,[S3t,t("ul",x3t,[t("li",null,[t("a",{class:"dropdown-item",onClick:r=>e.duplicatePage(n.id),href:"javascript:void(0)"},"Дублировать",8,j3t)]),t("li",null,[t("a",{class:"dropdown-item",onClick:r=>e.removePage(n.id),href:"javascript:void(0)"},"Удалить",8,O3t)])])])):u("",!0)])],2))),256))])):u("",!0),e.pages_paginate_object?(l(),M(Ce,{key:2,simple:!0,onPagination_page:e.nextPages,pagination:e.pages_paginate_object},null,8,["onPagination_page","pagination"])):(l(),a("div",T3t," Созданных страниц не найдено! ")),s.editor?(l(),a("nav",U3t,[t("button",{onClick:o[6]||(o[6]=n=>e.selectPage(null)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center"}," Добавить новую страницу ")])):u("",!0)],64))}}),V3t={key:0},M3t=t("h6",null,"Форма создания шаблона клавиатуры",-1),A3t={class:"mb-3"},E3t=t("label",{class:"form-label",id:"bot-domain"},"Тип",-1),D3t=t("option",{value:"reply"},"Нижняя клавиатура",-1),z3t=t("option",{value:"inline"},"Встроенная клавиатура",-1),B3t=[D3t,z3t],L3t={class:"mb-3"},R3t={class:"form-label d-flex justify-content-between",id:"bot-domain"},N3t=t("span",null,"Мнемоническое имя",-1),q3t=t("i",{class:"fa-solid fa-arrows-rotate"},null,-1),W3t=[q3t],Y3t={class:"col-12"},H3t=t("button",{class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-green1-dark w-100"}," Добавить новый шаблон клавиатуры ",-1),Q3t=t("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),G3t={key:1,class:"mb-1"},K3t={class:"badge bg-warning"},J3t={class:"mb-3"},X3t={key:1,class:"card"},Z3t={class:"card-body"},eFt={key:3,class:"mb-3"},tFt=t("div",{class:"alert alert-warning",role:"alert"},[t("p",null,"Список шаблонов клавиатур пуст!")],-1),sFt=[tFt],oFt={props:["selectMode","type"],data(){return{keyboards:[],load:!1,editedKeyboard:null,selectMenuIndex:null,keyboardForm:{type:"reply",slug:null,menu:[]}}},computed:{filteredKeyboard(){return this.type?this.keyboards.filter(s=>s.type==this.type):this.keyboards}},mounted(){this.loadMenusByBotTemplate(),this.generateSlug()},methods:{selectCard(s){this.$emit("select",s)},keyboardCallbackAction(s){let e=this.keyboards.find(o=>o.id===s);e.deleted_at=new Date,this.loadMenusByBotTemplate()},loadMenusByBotTemplate(){this.$store.dispatch("loadBotKeyboards").then(s=>{this.$nextTick(()=>{this.keyboards=s.data})})},submitKeyboard(){let s=new FormData;Object.keys(this.keyboardForm).forEach(e=>{const o=this.keyboardForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("createKeyboardTemplate",{keyboardForm:s}).then(e=>{this.keyboardForm={type:"reply",slug:null,menu:[]},this.load=!0,this.$nextTick(()=>{this.load=!1}),this.loadMenusByBotTemplate()})},generateSlug(){this.keyboardForm.slug=Bt()},changeKeyboardFormMenu(s){this.keyboardForm.menu=s}}},_a=Object.assign(oFt,{__name:"KeyboardList",setup(s){return(e,o)=>(l(),a(v,null,[s.selectMode?u("",!0):(l(),a("div",V3t,[M3t,t("form",{onSubmit:o[3]||(o[3]=W((...n)=>e.submitKeyboard&&e.submitKeyboard(...n),["prevent"]))},[t("div",A3t,[E3t,f(t("select",{"onUpdate:modelValue":o[0]||(o[0]=n=>e.keyboardForm.type=n),class:"form-control"},B3t,512),[[Ve,e.keyboardForm.type]])]),t("div",L3t,[t("label",R3t,[N3t,t("a",{onClick:o[1]||(o[1]=(...n)=>e.generateSlug&&e.generateSlug(...n)),href:"javascript:void(0)"},W3t)]),f(t("input",{type:"text",class:"form-control",placeholder:"Мнемоническое имя","aria-label":"Мнемоническое имя","onUpdate:modelValue":o[2]||(o[2]=n=>e.keyboardForm.slug=n),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,e.keyboardForm.slug]])]),t("div",Y3t,[e.load?u("",!0):(l(),M(ls,{key:0,onSave:e.changeKeyboardFormMenu,"edited-keyboard":e.keyboardForm},null,8,["onSave","edited-keyboard"]))]),H3t],32),Q3t])),e.keyboards?(l(),a("p",G3t,[_("В списке клавиатур "),t("span",K3t,p(e.filteredKeyboard.length)+" ед.",1)])):u("",!0),e.keyboards?(l(!0),a(v,{key:2},O(e.filteredKeyboard,(n,i)=>(l(),a("div",J3t,[n.deleted_at?(l(),a("div",X3t,[t("div",Z3t,[t("p",null,"Удаленная клавиатура #"+p(n.id),1)])])):(l(),M(dr,{key:0,"select-mode":s.selectMode,onSelect:e.selectCard,onReload:e.loadMenusByBotTemplate,onCallback:e.keyboardCallbackAction,keyboard:n},null,8,["select-mode","onSelect","onReload","onCallback","keyboard"]))]))),256)):u("",!0),e.filteredKeyboard.length===0?(l(),a("div",eFt,sFt)):u("",!0)],64))}});const iFt=t("h6",null,"Добавление нового скрипта в бота",-1),nFt={class:"form-floating"},lFt=t("label",{for:""},"Поиск скрипта",-1),aFt=["onClick"],rFt={class:"form-control d-flex flex-column mb-2"},dFt={class:"fw-bold"},cFt={class:"fst-italic",style:{"font-size":"12px"}},uFt={key:1,class:"alert alert-light",role:"alert"},mFt={class:"mb-3"},hFt={props:["global","selected"],data(){return{load:!1,paginate:null,search:null,slugs:[]}},computed:{...G(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs?this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",n=s.comment||"";return o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||n.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1}):[]}},mounted(){this.loadSlugs()},methods:{nextSlugs(s){this.loadSlugs(s)},selectSlug(s){this.$emit("callback",{id:s.id||null,slug:s.slug,comment:s.comment,command:s.command}),this.$notify({title:"Скрипты",text:"Вы выбрали скрипт из списка"})},loadSlugs(s){this.$store.dispatch("loadSlugs",{dataObject:{needGlobal:this.global||!1},page:s}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})}}},pFt=Object.assign(hFt,{__name:"BotSlugListSimple",setup(s){return(e,o)=>(l(),a(v,null,[iFt,t("div",nFt,[f(t("input",{type:"text",class:"form-control mt-1 mb-1","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),placeholder:"Поиск нужного скрипта по описанию"},null,512),[[k,e.search]]),lFt]),e.filteredSlugs.length>0?(l(!0),a(v,{key:0},O(e.filteredSlugs,(n,i)=>(l(),a("div",{onClick:r=>e.selectSlug(n),class:"input-group mb-0 align-items-start"},[t("div",{class:C(["input-group-text d-flex flex-column",{"bg-primary text-white":s.selected==n.id}]),style:{"font-size":"12px"},id:"basic-addon1"},[t("span",null," #"+p(n.id),1)],2),t("p",rFt,[t("span",dFt,p(n.command||"Нет команды"),1),t("span",cFt,p(n.comment||"Нет описания"),1)])],8,aFt))),256)):(l(),a("div",uFt,' У Вас еще нет добавленных скриптов! Воспользуйтесь разделом "Скрипты" для добавления. ')),t("div",mFt,[e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)])],64))}}),_Ft={key:0},fFt={class:"mb-2"},bFt={class:"mb-2"},gFt={key:0,class:"list-group list-boxes"},yFt=["onClick"],vFt={class:"bg-primary badge"},$Ft={key:1,class:"alert alert-warning",role:"alert"},kFt={data(){return{loading:!0,dialogs:[],search:null,dialogs_paginate_object:null}},computed:{...G(["getDialogs","getDialogsPaginateObject"])},mounted(){this.loadDialogs()},methods:{selectDialog(s){this.$emit("select-dialog",s),this.$notify({title:"Диалоги",text:"Вы выбрали диалог из списка!",type:"success"})},nextDialogs(s){this.loadDialogs(s)},loadDialogs(s=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{search:this.search},page:s}).then(e=>{this.loading=!1,this.dialogs=this.getDialogs,this.dialogs_paginate_object=this.getDialogsPaginateObject}).catch(()=>{this.loading=!1})}}},wFt=Object.assign(kFt,{__name:"BotDialogGroupListSimple",setup(s){return(e,o)=>e.dialogs.length>0?(l(),a("div",_Ft,[(l(!0),a(v,null,O(e.dialogs,(n,i)=>(l(),a("div",fFt,[t("p",bFt," #"+p(n.id)+" - "+p(n.title||"Не указано ")+" ("+p(n.slug||"Не указано")+")",1),n.bot_dialog_commands.length>0?(l(),a("div",gFt,[(l(!0),a(v,null,O(n.bot_dialog_commands,(r,d)=>(l(),a("div",{onClick:c=>e.selectDialog(r),class:"border rounded-2 p-3 mb-2"},[t("span",vFt,"#"+p(r.id),1),_(" "+p(r.pre_text||"-"),1)],8,yFt))),256))])):u("",!0)]))),256)),e.dialogs_paginate_object?(l(),M(Ce,{key:0,onPagination_page:e.nextDialogs,pagination:e.dialogs_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)])):(l(),a("div",$Ft," У выбранного бота нет созданных диалоговых групп "))}}),FFt=t("div",{class:"alert alert-success",role:"alert"},' Проверка правил идет по методу "И" - все правила должны выполняться для перехода на данную страницу, иначе будет вызвана страница из блока "иначе". Действия для "иначе" добавлять не обязательно. ',-1),CFt=t("h6",{class:"my-2 fw-bold"},"Блок условий (если)",-1),PFt=t("div",{class:"alert-light alert mb-2",id:"bot-domain"}," Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие будет выполнено. Не обязательно ",-1),SFt={class:"form-floating mb-2"},xFt=t("label",{for:"rules-if-message"},"Текст сообщения",-1),jFt={class:"dropdown"},OFt=t("button",{class:"btn btn-outline-primary w-100",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Доступные для выбора условия ",-1),TFt={class:"dropdown-menu w-100"},UFt=["onClick"],IFt={class:"dropdown-item",href:"javascript:void(0)"},VFt={key:1,class:"my-2"},MFt={key:2,class:"list-group"},AFt={key:0,class:"list-group-item d-flex justify-content-between align-items-center"},EFt={class:"form-check"},DFt={class:"form-check-label",for:"bot-user-is-vip"},zFt={key:0},BFt={key:1},LFt=t("i",{class:"fa-solid fa-trash-can"},null,-1),RFt=[LFt],NFt={key:1,class:"list-group-item d-flex justify-content-between align-items-center"},qFt={class:"form-check"},WFt={class:"form-check-label",for:"bot-user-is-admin"},YFt={key:0},HFt={key:1},QFt=t("i",{class:"fa-solid fa-trash-can"},null,-1),GFt=[QFt],KFt={key:2,class:"list-group-item d-flex justify-content-between align-items-center"},JFt={class:"form-check"},XFt={class:"form-check-label",for:"bot-user-is-deliveryman"},ZFt={key:0},e5t={key:1},t5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),s5t=[t5t],o5t={key:3,class:"list-group-item d-flex justify-content-between align-items-center"},i5t={class:"form-check"},n5t={class:"form-check-label",for:"bot-user-is-work"},l5t={key:0},a5t={key:1},r5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),d5t=[r5t],c5t={key:4,class:"list-group-item d-flex justify-content-between align-items-center"},u5t={class:"form-check"},m5t={class:"form-check-label",for:"bot-user-in-location"},h5t={key:0},p5t={key:1},_5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),f5t=[_5t],b5t={key:5,class:"list-group-item d-flex justify-content-between align-items-center"},g5t=t("label",{class:"form-label",id:"bot-domain"}," Возраст от ",-1),y5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),v5t=[y5t],$5t={key:6,class:"list-group-item d-flex justify-content-between align-items-center"},k5t=t("label",{class:"form-label",id:"bot-domain"}," Только для города ",-1),w5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),F5t=[w5t],C5t={key:7,class:"list-group-item d-flex justify-content-between align-items-center"},P5t={class:"form-check"},S5t={class:"form-check-label",for:"bot-user-sex"},x5t={key:0},j5t={key:1},O5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),T5t=[O5t],U5t={key:8,class:"list-group-item"},I5t={class:"mb-3"},V5t={class:"d-flex justify-content-between align-items-center"},M5t={class:"form-label d-flex w-100 align-items-center",id:"bot-order-channel"},A5t=["onClick"],E5t=t("i",{class:"fa-solid fa-trash-can"},null,-1),D5t=[E5t],z5t={class:"form-floating"},B5t=["onUpdate:modelValue"],L5t=t("label",{for:""},"id канала",-1),R5t={key:3,class:"my-3 fw-bold"},N5t={key:4,class:"d-flex justify-content-between"},q5t=t("div",{class:"alert-light alert mb-2",id:"bot-domain"},' Напишите текст, который будет отображен пользователю вместе с основным контентом в случае если условие не будет выполнено и будет вызван блок "иначе" ',-1),W5t={class:"form-floating mb-2"},Y5t=t("label",{for:"rules-else-message"},"Текст сообщения",-1),H5t={props:["bot","rulesForm"],data(){return{rules:[{id:1,title:"Является администратором",rules_block:"bot_user",rule:{is_admin:!0}},{id:2,title:"Является VIP-пользователем",rules_block:"bot_user",rule:{is_vip:!0}},{id:3,title:"Находится в заведении",rules_block:"bot_user",rule:{user_in_location:!0}},{id:4,title:"За работой",rules_block:"bot_user",rule:{is_work:!0}},{id:5,title:"Возраст от ...",rules_block:"bot_user",rule:{age:18}},{id:6,title:"Находится в городе ...",rules_block:"bot_user",rule:{city:"Краснодар"}},{id:7,title:"Пол",rules_block:"bot_user",rule:{sex:!0}},{id:8,title:"Состоит в канале",rules_block:"channels",rule:{channel:1}},{id:9,title:"Является Менеджером",rules_block:"bot_user",rule:{is_manager:!0}}]}},mounted(){window.addEventListener("select-rule-event",s=>{this.addRulesFromEvent(s.detail.rule)})},methods:{hasRuleKey(s){return this.rulesForm.rules_if==null?!1:Object.keys(this.rulesForm.rules_if.bot_user).find(e=>e===s)!=null},modifyChannel(s){this.rulesForm.rules_if.channels[s.param]=s.text},removeChannelFromRule(s){this.rulesForm.rules_if.channels.splice(s,1),this.checkRules()},checkRules(){const s=Object.getOwnPropertyNames(this.rulesForm.rules_if.bot_user),e=this.rulesForm.rules_if.channels;s.length===0&&e.length===0&&(this.rulesForm.rules_if=null)},removeRule(s){delete this.rulesForm.rules_if.bot_user[s],this.checkRules()},addRulesFromEvent(s){this.rulesForm.rules_if||(this.rulesForm.rules_if={bot_user:{},channels:[]}),s.rules_block==="bot_user"&&(this.rulesForm.rules_if.bot_user={...this.rulesForm.rules_if.bot_user,...s.rule}),s.rules_block==="channels"&&this.rulesForm.rules_if.channels.push(s.rule.channel)},attachPageToRule(s){s.id!=this.rulesForm.id?this.rulesForm.rules_else_page_id=s.id:this.$notify({title:"Правила страниц",text:"Вы не можете связать данную страницу с собой!",type:"error"})},openRulesModal(){this.$botPages.rules()}}},Q5t=Object.assign(H5t,{__name:"PageRules",setup(s){return(e,o)=>(l(),a(v,null,[FFt,CFt,s.rulesForm.rules_if?(l(),a(v,{key:0},[PFt,t("div",SFt,[f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[0]||(o[0]=n=>s.rulesForm.rules_if_message=n),maxlength:"255",id:"rules-if-message","aria-describedby":"rules-if-message"},`
            `,512),[[k,s.rulesForm.rules_if_message]]),xFt])],64)):u("",!0),t("div",jFt,[OFt,t("ul",TFt,[(l(!0),a(v,null,O(e.rules,n=>(l(),a("li",{onClick:i=>e.addRulesFromEvent(n)},[t("a",IFt,p(n.title||"Не указан"),1)],8,UFt))),256))])]),s.rulesForm.rules_if?(l(),a("h6",VFt,"Выбранные условия")):u("",!0),s.rulesForm.rules_if?(l(),a("ul",MFt,[e.hasRuleKey("is_vip")?(l(),a("li",AFt,[t("div",EFt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=n=>s.rulesForm.rules_if.bot_user.is_vip=n),type:"checkbox",id:"bot-user-is-vip"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_vip]]),t("label",DFt,[s.rulesForm.rules_if.bot_user.is_vip?(l(),a("span",zFt,"Является VIP-пользователем")):(l(),a("span",BFt,"Не является VIP-пользователем"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[2]||(o[2]=n=>e.removeRule("is_vip"))},RFt)])):u("",!0),e.hasRuleKey("is_admin")?(l(),a("li",NFt,[t("div",qFt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[3]||(o[3]=n=>s.rulesForm.rules_if.bot_user.is_admin=n),type:"checkbox",id:"bot-user-is-admin"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_admin]]),t("label",WFt,[s.rulesForm.rules_if.bot_user.is_admin?(l(),a("span",YFt,"Является администратором")):(l(),a("span",HFt,"Не является администратором"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[4]||(o[4]=n=>e.removeRule("is_admin"))},GFt)])):u("",!0),e.hasRuleKey("is_deliveryman")?(l(),a("li",KFt,[t("div",JFt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=n=>s.rulesForm.rules_if.bot_user.is_deliveryman=n),type:"checkbox",id:"bot-user-is-deliveryman"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_deliveryman]]),t("label",XFt,[s.rulesForm.rules_if.bot_user.is_deliveryman?(l(),a("span",ZFt,"Является доставщиком")):(l(),a("span",e5t,"Не является доставщиком"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[6]||(o[6]=n=>e.removeRule("is_deliveryman"))},s5t)])):u("",!0),e.hasRuleKey("is_work")?(l(),a("li",o5t,[t("div",i5t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=n=>s.rulesForm.rules_if.bot_user.is_work=n),type:"checkbox",id:"bot-user-is-work"},null,512),[[z,s.rulesForm.rules_if.bot_user.is_work]]),t("label",n5t,[s.rulesForm.rules_if.bot_user.is_work?(l(),a("span",l5t,"За работой")):(l(),a("span",a5t,"Не работает"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[8]||(o[8]=n=>e.removeRule("is_work"))},d5t)])):u("",!0),e.hasRuleKey("user_in_location")?(l(),a("li",c5t,[t("div",u5t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=n=>s.rulesForm.rules_if.bot_user.user_in_location=n),type:"checkbox",id:"bot-user-in-location"},null,512),[[z,s.rulesForm.rules_if.bot_user.user_in_location]]),t("label",m5t,[s.rulesForm.rules_if.bot_user.user_in_location?(l(),a("span",h5t,"Находится в заведении")):(l(),a("span",p5t,"Не находится в заведении"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[10]||(o[10]=n=>e.removeRule("user_in_location"))},f5t)])):u("",!0),e.hasRuleKey("age")?(l(),a("li",b5t,[t("div",null,[g5t,f(t("input",{type:"text",class:"form-control",placeholder:"Возраст от","aria-label":"Возраст от","onUpdate:modelValue":o[11]||(o[11]=n=>s.rulesForm.rules_if.bot_user.age=n),maxlength:"255","aria-describedby":"bot-user-age"},null,512),[[k,s.rulesForm.rules_if.bot_user.age]])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[12]||(o[12]=n=>e.removeRule("age"))},v5t)])):u("",!0),e.hasRuleKey("city")?(l(),a("li",$5t,[t("div",null,[k5t,f(t("input",{type:"text",class:"form-control",placeholder:"Город","aria-label":"Город","onUpdate:modelValue":o[13]||(o[13]=n=>s.rulesForm.rules_if.bot_user.city=n),maxlength:"255","aria-describedby":"bot-user-city"},null,512),[[k,s.rulesForm.rules_if.bot_user.city]])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[14]||(o[14]=n=>e.removeRule("city"))},F5t)])):u("",!0),e.hasRuleKey("sex")?(l(),a("li",C5t,[t("div",P5t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[15]||(o[15]=n=>s.rulesForm.rules_if.bot_user.sex=n),type:"checkbox",id:"bot-user-sex"},null,512),[[z,s.rulesForm.rules_if.bot_user.sex]]),t("label",S5t,[s.rulesForm.rules_if.bot_user.sex?(l(),a("span",x5t,"Только для мужчин")):(l(),a("span",j5t,"Только для женщин"))])]),t("button",{type:"button",class:"btn btn-outline-info",onClick:o[16]||(o[16]=n=>e.removeRule("sex"))},T5t)])):u("",!0),s.rulesForm.rules_if.channels.length>0?(l(),a("li",U5t,[_("Проверка нахождения в канале \\ группе: "),(l(!0),a(v,null,O(s.rulesForm.rules_if.channels,(n,i)=>(l(),a("div",I5t,[t("div",V5t,[t("label",M5t,[T(Pa,{token:s.bot.bot_token,param:`${i}`,onCallback:e.modifyChannel},null,8,["token","param","onCallback"]),_(" Канал для проверки ")]),t("button",{type:"button",class:"btn btn-link text-danger",onClick:r=>e.removeChannelFromRule(i)},D5t,8,A5t)]),t("div",z5t,[f(t("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":r=>s.rulesForm.rules_if.channels[i]=r,maxlength:"255","aria-describedby":"bot-order-channel"},null,8,B5t),[[k,s.rulesForm.rules_if.channels[i]]]),L5t])]))),256))])):u("",!0)])):u("",!0),s.rulesForm.rules_if?(l(),a("h6",R5t,"Иначе")):u("",!0),s.rulesForm.rules_else_page_id?(l(),a("p",N5t,[_("Вы выбрали страницу #"+p(s.rulesForm.rules_else_page_id)+' в качестве условия "иначе" ',1),t("a",{href:"javascript:void(0)",onClick:o[17]||(o[17]=n=>s.rulesForm.rules_else_page_id=null)},"Очистить")])):u("",!0),s.rulesForm.rules_if?(l(),M(on,{key:5,current:s.rulesForm.id,onCallback:e.attachPageToRule,editor:!1},null,8,["current","onCallback"])):u("",!0),s.rulesForm.rules_if?(l(),a(v,{key:6},[q5t,t("div",W5t,[f(t("textarea",{type:"text",class:"form-control",placeholder:"Текст сообщения","aria-label":"Текст сообщения","onUpdate:modelValue":o[18]||(o[18]=n=>s.rulesForm.rules_else_message=n),maxlength:"255",id:"rules-else-message","aria-describedby":"rules-else-message"},`
            `,512),[[k,s.rulesForm.rules_else_message]]),Y5t])],64)):u("",!0)],64))}}),G5t=t("i",{class:"fa-solid fa-xmark mr-1"},null,-1),K5t={key:1,class:"form-check form-switch mb-2"},J5t=t("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Отобразить QR-код и ссылку на страницу",-1),X5t={key:2,class:"alert alert-info mb-2"},Z5t={class:"d-flex justify-content-center"},eCt={style:{width:"300px",height:"300px"}},tCt=t("div",{class:"alert alert-light mb-2"},[_(" Команда должна начинаться с символа . и *"),t("br"),_(" Например: .*Меню ")],-1),sCt={class:"form-floating mb-2"},oCt=t("label",{class:"form-label",id:"bot-domain"},[_(" Команда "),t("span",{class:"fw-bold text-danger"},"*")],-1),iCt={class:"form-floating mb-2"},nCt=t("label",{class:"form-label",id:"bot-domain"},[_(" Описание страницы "),t("span",{class:"fw-bold text-danger"},"*")],-1),lCt={class:"mb-2"},aCt={class:"form-check"},rCt=t("label",{class:"form-check-label",for:"is_external"}," Внешнее управление страницей ",-1),dCt={class:"form-floating mb-2"},cCt={for:"floatingTextarea2"},uCt={key:0},mCt={class:"mb-2"},hCt={class:"form-check"},pCt=t("label",{class:"form-check-label",for:"need-page-images"}," Изображения на странице (максимум 10) ",-1),_Ct={key:0,class:"mb-2"},fCt=t("h6",null,"Изображения на странице",-1),bCt={class:"d-flex flex-wrap justify-content-center"},gCt={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},yCt={class:"mb-2 mr-2 img-preview"},vCt={class:"remove"},$Ct=["onClick"],kCt={key:0},wCt={key:1,class:"d-flex flex-wrap justify-content-center"},FCt={class:"mb-2 img-preview",style:{"margin-right":"10px"}},CCt={class:"remove"},PCt=["onClick"],SCt={class:"form-check mb-2"},xCt=t("label",{class:"form-check-label",for:"need-page-video"}," Видео к странице ",-1),jCt={key:1,class:"mb-2"},OCt=t("p",{class:"alert alert-danger mb-2 rounded-s"}," Внимание! не больше 10 видео на 1й странице! ",-1),TCt={class:"form-check mb-2"},UCt=t("label",{class:"form-check-label",for:"need-page-sticker"}," Стикер к странице ",-1),ICt={key:2,class:"mb-2"},VCt={class:"form-check mb-2"},MCt=t("label",{class:"form-check-label",for:"need-reply-menu"}," Нижнее меню страницы ",-1),ACt={class:"form-check mb-2"},ECt=t("label",{class:"form-check-label",for:"need-page-audio"}," Звук к странице ",-1),DCt={key:3,class:"mb-2"},zCt=t("p",{class:"alert alert-danger"}," Внимание! не больше 10 аудио (audio) на 1й странице! Или 1 голосовое (voice) ",-1),BCt={class:"form-check mb-2"},LCt=t("label",{class:"form-check-label",for:"need-page-document"}," Документ \\ презентацию к странице \\ картинку в оригинале ",-1),RCt={key:4,class:"mb-2"},NCt=t("p",{class:"alert alert-danger"}," Внимание! не больше 10 документов на 1й странице! ",-1),qCt={key:5,class:"mb-2"},WCt=t("h6",{class:"mb-2"},"Конструктор нижнего меню",-1),YCt={class:"form-floating mb-2"},HCt=t("label",{class:"form-check-label",for:"bot-reply_keyboard_title"}," Заголовок нижнего меню ",-1),QCt={key:0},GCt={key:1},KCt={class:"form-check mb-2"},JCt=t("label",{class:"form-check-label",for:"need-inline-menu"}," Меню под текстом страницы ",-1),XCt={key:6,class:"mb-2"},ZCt=t("h6",null,"Конструктор меню в сообщении",-1),ePt={key:0},tPt={key:1},sPt={class:"form-check mb-2"},oPt=t("label",{class:"form-check-label",for:"need-page-attach"}," Связать с другой страницей ",-1),iPt={key:7,class:"mb-2"},nPt={key:0,class:"d-flex justify-content-between mb-0 align-items-center"},lPt=t("i",{class:"fa-solid fa-trash"},null,-1),aPt=[lPt],rPt={class:"form-check mb-2"},dPt=t("label",{class:"form-check-label",for:"need-slug-attach"}," Привязать скрипт ",-1),cPt={key:8,class:"mb-2"},uPt={key:0,class:"d-flex justify-content-between mb-0 align-items-center"},mPt=t("i",{class:"fa-solid fa-trash"},null,-1),hPt=[mPt],pPt={class:"form-check mb-2"},_Pt=t("label",{class:"form-check-label",for:"need-dialog-attach"}," Привязать начало диалога ",-1),fPt={key:9,class:"mb-2"},bPt={key:0,class:"d-flex justify-content-between mb-0 align-items-center"},gPt=t("i",{class:"fa-solid fa-trash"},null,-1),yPt=[gPt],vPt={class:"form-check mb-2"},$Pt=t("label",{class:"form-check-label",for:"need-rules"}," Нужны правила загрузки страницы ",-1),kPt=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-success w-100 p-3 mb-3"},"Сохранить изменения ",-1),wPt={props:["page","onlyEdit"],data(){return{need_show_qr_and_link:!1,need_clean:!1,load:!1,photos:[],showReplyTemplateSelector:!1,showInlineTemplateSelector:!1,need_page_sticker:!1,need_page_audios:!1,need_page_documents:!1,need_page_video:!1,need_page_images:!1,need_rules:!1,need_inline_menu:!1,need_reply_menu:!1,need_attach_page:!1,need_attach_dialog:!1,need_attach_slug:!1,bot:null,pageForm:{id:null,content:"",command:null,slug:null,comment:null,sticker:null,images:[],videos:[],audios:[],documents:[],reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,next_page_id:null,next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if:null,rules_else_page_id:null,rules_if_message:null,rules_else_message:null}}},watch:{need_rules:function(s,e){this.need_rules||(this.pageForm.rules_if=null,this.pageForm.rules_else_page_id=null,this.pageForm.rules_if_message=null,this.pageForm.rules_else_message=null)},need_page_audios:function(s,e){this.need_page_audios||(this.pageForm.audios=[])},need_page_documents:function(s,e){this.need_page_documents||(this.pageForm.documents=[])},need_page_sticker:function(s,e){this.need_page_sticker||(this.pageForm.sticker=null)},need_page_images:function(s,e){this.need_page_images||(this.photos=[],this.pageForm.images=[])},need_page_video:function(s,e){this.need_page_video||(this.pageForm.videos=[])},need_inline_menu:function(s,e){this.need_inline_menu||(this.pageForm.inline_keyboard=null,this.pageForm.inline_keyboard_id=null)},need_reply_menu:function(s,e){this.need_reply_menu||(this.pageForm.reply_keyboard=null,this.pageForm.reply_keyboard_id=null)},need_attach_page:function(s,e){this.need_attach_page||(this.pageForm.next_page_id=null)},need_attach_dialog:function(s,e){this.need_attach_dialog||(this.pageForm.next_bot_dialog_command_id=null)},need_attach_slug:function(s,e){this.need_attach_slug||(this.pageForm.next_bot_menu_slug_id=null)},pageForm:{handler:function(s){this.pageForm.reply_keyboard!=null&&(this.need_reply_menu=!0),this.pageForm.inline_keyboard!=null&&(this.need_inline_menu=!0),this.pageForm.images.length>0&&(this.need_page_images=!0),this.pageForm.next_bot_dialog_command_id!=null&&(this.need_attach_dialog=!0),this.pageForm.next_bot_menu_slug_id!=null&&(this.need_attach_slug=!0),this.pageForm.next_page_id!=null&&(this.need_attach_page=!0),this.pageForm.rules_if!=null&&(this.need_rules=!0),this.pageForm.videos.length>0&&(this.need_page_video=!0),this.pageForm.audios.length>0&&(this.need_page_audios=!0),this.pageForm.documents.length>0&&(this.need_page_documents=!0),this.pageForm.sticker&&(this.need_page_sticker=!0),this.need_clean=!0},deep:!0}},computed:{currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},pageLink(){if(!this.pageForm.id)return"Ссылка недоступна";let s="";for(let e=0;e<10-(""+this.pageForm.id).length;e++)s+="0";return s+=this.pageForm.id,"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("004"+s)}},mounted(){if(this.loadBot(),this.page){let s=this.page;this.photos=[],this.pageForm={id:s.id,slug_id:s.slug?s.slug.id:null,content:s.content,command:s.slug?s.slug.command:null,slug:s.slug?s.slug.slug:null,comment:s.slug?s.slug.comment:null,images:s.images||[],reply_keyboard_title:s.reply_keyboard_title||null,reply_keyboard_id:s.reply_keyboard_id||null,inline_keyboard_id:s.inline_keyboard_id||null,reply_keyboard:s.replyKeyboard||null,inline_keyboard:s.inlineKeyboard||null,next_page_id:s.next_page_id||null,next_bot_dialog_command_id:s.next_bot_dialog_command_id||null,next_bot_menu_slug_id:s.next_bot_menu_slug_id||null,is_external:s.is_external||!1,videos:s.videos||[],audios:s.audios||[],sticker:s.sticker||null,documents:s.documents||[],rules_if:s.rules_if||null,rules_else_page_id:s.rules_else_page_id||null,rules_if_message:s.rules_if_message||null,rules_else_message:s.rules_else_message||null}}else this.clearForm()},methods:{copyToClipBoard(s){navigator.clipboard.writeText(s).then(()=>{this.$notify({title:"Конструктор страниц",text:"Ссылка скопирована в буфер",type:"success"})}).catch(e=>{this.$notify({title:"Конструктор страниц",text:"Ошибка копирования",type:"error"})})},loadBot(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})},associateDialog(s){this.pageForm.next_bot_dialog_command_id=s.id},associateSlug(s){this.pageForm.next_bot_menu_slug_id=s.id},attachPage(s){s.id!=this.pageForm.id?this.pageForm.next_page_id=s.id:this.$notify({title:"Конструктор страниц",text:"Вы не можете связать данную страницу с собой",type:"error"})},injectContent(s){this.pageForm.content?this.pageForm.content+=s.text:this.pageForm.content=s.text},clearForm(){this.photos=[],this.pageForm={id:null,content:null,command:null,slug:null,comment:null,sticker:null,images:[],reply_keyboard_title:null,reply_keyboard:null,inline_keyboard:null,is_external:!1,reply_keyboard_id:null,inline_keyboard_id:null,next_page_id:null,videos:[],audios:[],documents:[],next_bot_dialog_command_id:null,next_bot_menu_slug_id:null,rules_if_message:null,rules_else_message:null},this.photos=[],this.showReplyTemplateSelector=!1,this.showInlineTemplateSelector=!1,this.need_page_sticker=!1,this.need_page_video=!1,this.need_page_images=!1,this.need_inline_menu=!1,this.need_reply_menu=!1,this.need_attach_page=!1,this.need_attach_dialog=!1,this.need_attach_slug=!1,this.need_rules=!1,this.need_page_audios=!1,this.need_page_documents=!1,this.$nextTick(()=>{this.need_clean=!1})},submitPage(){let s=new FormData;if(Object.keys(this.pageForm).forEach(e=>{const o=this.pageForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos.length>0)for(let e=0;e<this.photos.length;e++)s.append("photos[]",this.photos[e]);this.$store.dispatch(this.pageForm.id==null?"createPage":"updatePage",{pageForm:s}).then(e=>{this.load=!0,this.$nextTick(()=>{this.load=!1,this.clearForm()}),this.$emit("callback",e.data),this.$notify({title:"Конструктор страниц",text:this.pageForm.id==null?"Страница успешно создана!":"Страница успешно обновлена!",type:"success"})}).catch(e=>{})},saveInlineKeyboard(s){this.pageForm.inline_keyboard=s},selectReplyKeyboard(s){this.pageForm.reply_keyboard=s,this.showReplyTemplateSelector=!1},selectInlineKeyboard(s){this.pageForm.inline_keyboard=s,this.showInlineTemplateSelector=!1},saveReplyKeyboard(s){this.pageForm.reply_keyboard=s},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.photos.splice(s,1)},removeImage(s){this.pageForm.images.splice(s,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},onChange(s){this.pageForm.content=s},selectVideo(s){this.pageForm.videos||(this.pageForm.videos=[]);let e=this.pageForm.videos.indexOf(s.file_id);e!==-1?this.pageForm.videos.splice(e,1):this.pageForm.videos.push(s.file_id)},selectAudio(s){this.pageForm.audios||(this.pageForm.audios=[]);let e=this.pageForm.audios.indexOf(s.file_id);if(s.type==="voice"){if(e!==-1){this.pageForm.audios.splice(e,1);return}this.pageForm.audios=[s.file_id];return}e!==-1?this.pageForm.audios.splice(e,1):this.pageForm.audios.push(s.file_id)},selectSticker(s){this.pageForm.sticker=s.file_id},selectDocument(s){this.pageForm.documents||(this.pageForm.documents=[]);let e=this.pageForm.documents.indexOf(s.file_id);e!==-1?this.pageForm.documents.splice(e,1):this.pageForm.documents.push(s.file_id)}}},dc=Object.assign(wPt,{__name:"Page",setup(s){return(e,o)=>{const n=ie("lazy");return e.bot?(l(),a("form",{key:0,onSubmit:o[27]||(o[27]=W((...i)=>e.submitPage&&e.submitPage(...i),["prevent"]))},[s.onlyEdit?u("",!0):(l(),a(v,{key:0},[e.pageForm.id||e.need_clean?(l(),a("a",{key:0,href:"javascript:void(0)",class:"w-100 btn text-center btn mb-2",onClick:o[0]||(o[0]=(...i)=>e.clearForm&&e.clearForm(...i))},[G5t,_(" Очистить форму")])):u("",!0)],64)),e.pageForm.id?(l(),a("div",K5t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=i=>e.need_show_qr_and_link=i),type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"},null,512),[[z,e.need_show_qr_and_link]]),J5t])):u("",!0),e.pageForm.id&&e.need_show_qr_and_link?(l(),a("div",X5t,[t("p",null,[_("Ссылка на текущую страницу: "),t("span",{class:"font-weight-bold",onClick:o[2]||(o[2]=i=>e.copyToClipBoard(e.pageLink))},p(e.pageLink),1)]),t("div",Z5t,[f(t("img",eCt,null,512),[[n,e.qr]])])])):u("",!0),tCt,t("div",sCt,[f(t("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":o[3]||(o[3]=i=>e.pageForm.command=i),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,e.pageForm.command]]),oCt]),t("div",iCt,[f(t("textarea",{type:"text",class:"form-control",placeholder:"Описание страницы","aria-label":"Описание страницы","onUpdate:modelValue":o[4]||(o[4]=i=>e.pageForm.comment=i),maxlength:"255",style:{"min-height":"150px"},"aria-describedby":"bot-domain",required:""},`
            `,512),[[k,e.pageForm.comment]]),nCt]),t("div",lCt,[t("div",aCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[5]||(o[5]=i=>e.pageForm.is_external=i),type:"checkbox",id:"is_external"},null,512),[[z,e.pageForm.is_external]]),rCt])]),e.pageForm.is_external?u("",!0):(l(),a(v,{key:3},[t("div",dCt,[f(t("textarea",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=i=>e.pageForm.content=i),maxlength:"4096",placeholder:"Введите текст",id:"floatingTextarea2",style:{"min-height":"100px"}},null,512),[[k,e.pageForm.content]]),t("label",cCt,[_("Содержимое страницы "),e.pageForm.content?(l(),a("span",uCt,p(e.pageForm.content.length)+"/4096 ",1)):u("",!0)])]),t("div",mCt,[t("div",hCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=i=>e.need_page_images=i),type:"checkbox",id:"need-page-images"},null,512),[[z,e.need_page_images]]),pCt])]),e.need_page_images?(l(),a("div",_Ct,[fCt,t("div",bCt,[t("label",gCt,[_(" + "),t("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:o[8]||(o[8]=(...i)=>e.onChangePhotos&&e.onChangePhotos(...i)),style:{display:"none"}},null,32)]),e.photos.length>0?(l(!0),a(v,{key:0},O(e.photos,(i,r)=>(l(),a("div",yCt,[f(t("img",null,null,512),[[n,e.getPhoto(i).imageUrl]]),t("div",vCt,[t("a",{href:"javascript:void(0)",onClick:d=>e.removePhoto(r)},"Удалить",8,$Ct)])]))),256)):u("",!0)]),e.pageForm.images.length>0?(l(),a("h6",kCt,"Ранее загруженные фотографии")):u("",!0),e.pageForm.images.length>0?(l(),a("div",wCt,[(l(!0),a(v,null,O(e.pageForm.images,(i,r)=>(l(),a("div",FCt,[f(t("img",null,null,512),[[n,"/images-by-bot-id/"+e.bot.id+"/"+i]]),t("div",CCt,[t("a",{href:"javascript:void(0)",onClick:d=>e.removeImage(r)},"Удалить",8,PCt)])]))),256))])):u("",!0)])):u("",!0),t("div",SCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[9]||(o[9]=i=>e.need_page_video=i),type:"checkbox",id:"need-page-video"},null,512),[[z,e.need_page_video]]),xCt]),e.need_page_video?(l(),a("div",jCt,[OCt,T(Dt,{"need-video":!0,"need-video-note":!0,selected:e.pageForm.videos,onSelect:e.selectVideo},null,8,["selected","onSelect"])])):u("",!0),t("div",TCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[10]||(o[10]=i=>e.need_page_sticker=i),type:"checkbox",id:"need-page-sticker"},null,512),[[z,e.need_page_sticker]]),UCt]),e.need_page_sticker?(l(),a("div",ICt,[T(Dt,{"need-sticker":!0,selected:[e.pageForm.sticker],onSelect:e.selectSticker},null,8,["selected","onSelect"])])):u("",!0),t("div",VCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[11]||(o[11]=i=>e.need_reply_menu=i),type:"checkbox",id:"need-reply-menu"},null,512),[[z,e.need_reply_menu]]),MCt]),t("div",ACt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[12]||(o[12]=i=>e.need_page_audios=i),type:"checkbox",id:"need-page-audio"},null,512),[[z,e.need_page_audios]]),ECt]),e.need_page_audios?(l(),a("div",DCt,[zCt,T(Dt,{"need-audio":!0,selected:e.pageForm.audios,onSelect:e.selectAudio},null,8,["selected","onSelect"])])):u("",!0),t("div",BCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[13]||(o[13]=i=>e.need_page_documents=i),type:"checkbox",id:"need-page-document"},null,512),[[z,e.need_page_documents]]),LCt]),e.need_page_documents?(l(),a("div",RCt,[NCt,T(Dt,{"need-document":!0,selected:e.pageForm.documents,onSelect:e.selectDocument},null,8,["selected","onSelect"])])):u("",!0),e.need_reply_menu?(l(),a("div",qCt,[WCt,t("div",YCt,[f(t("input",{type:"text",class:"form-control",placeholder:"Заголовок нижнего меню","aria-label":"Заголовок нижнего меню","onUpdate:modelValue":o[14]||(o[14]=i=>e.pageForm.reply_keyboard_title=i),maxlength:"255","aria-describedby":"bot-reply_keyboard_title"},null,512),[[k,e.pageForm.reply_keyboard_title]]),HCt]),t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showReplyTemplateSelector,"btn-primary":e.showReplyTemplateSelector}]),type:"button",onClick:o[15]||(o[15]=i=>e.showReplyTemplateSelector=!e.showReplyTemplateSelector)},[e.showReplyTemplateSelector?(l(),a("span",GCt," Скрыть шаблоны меню")):(l(),a("span",QCt," Открыть шаблоны меню"))],2),e.showReplyTemplateSelector?(l(),M(_a,{key:0,class:"mb-2",type:"reply",onSelect:e.selectReplyKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(si,{key:1,type:"reply",onSave:e.saveReplyKeyboard,modelValue:e.pageForm.reply_keyboard,"onUpdate:modelValue":o[16]||(o[16]=i=>e.pageForm.reply_keyboard=i)},null,8,["onSave","modelValue"]))])):u("",!0),t("div",KCt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[17]||(o[17]=i=>e.need_inline_menu=i),type:"checkbox",id:"need-inline-menu"},null,512),[[z,e.need_inline_menu]]),JCt]),e.need_inline_menu?(l(),a("div",XCt,[ZCt,t("button",{class:C(["btn mb-2 w-100",{"btn-outline-primary":!e.showInlineTemplateSelector,"btn-primary":e.showInlineTemplateSelector}]),type:"button",onClick:o[18]||(o[18]=i=>e.showInlineTemplateSelector=!e.showInlineTemplateSelector)},[e.showInlineTemplateSelector?(l(),a("span",tPt," Скрыть шаблоны меню")):(l(),a("span",ePt," Открыть шаблоны меню"))],2),e.showInlineTemplateSelector?(l(),M(_a,{key:0,class:"mb-2",type:"inline",onSelect:e.selectInlineKeyboard,"select-mode":!0},null,8,["onSelect"])):(l(),M(si,{key:1,type:"inline",onSave:e.saveInlineKeyboard,modelValue:e.pageForm.inline_keyboard,"onUpdate:modelValue":o[19]||(o[19]=i=>e.pageForm.inline_keyboard=i)},null,8,["onSave","modelValue"]))])):u("",!0),t("div",sPt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[20]||(o[20]=i=>e.need_attach_page=i),type:"checkbox",id:"need-page-attach"},null,512),[[z,e.need_attach_page]]),oPt]),e.need_attach_page?(l(),a("div",iPt,[e.pageForm.next_page_id?(l(),a("p",nPt,[_("Связано со страницей #"+p(e.pageForm.next_page_id)+" ",1),t("a",{href:"javascript:void(0)",class:"btn font-16 text-danger font-weight-bold",onClick:o[21]||(o[21]=i=>e.pageForm.next_page_id=null)},aPt)])):u("",!0),T(on,{current:e.pageForm.id,onCallback:e.attachPage,editor:!1},null,8,["current","onCallback"])])):u("",!0),t("div",rPt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[22]||(o[22]=i=>e.need_attach_slug=i),type:"checkbox",id:"need-slug-attach"},null,512),[[z,e.need_attach_slug]]),dPt]),e.need_attach_slug?(l(),a("div",cPt,[e.pageForm.next_bot_menu_slug_id?(l(),a("p",uPt,[_("Связано со скриптом #"+p(e.pageForm.next_bot_menu_slug_id)+" ",1),t("a",{href:"javascript:void(0)",class:"btn font-16 text-danger font-weight-bold",onClick:o[23]||(o[23]=i=>e.pageForm.next_bot_menu_slug_id=null)},hPt)])):u("",!0),T(pFt,{global:!0,selected:e.pageForm.next_bot_menu_slug_id,onCallback:e.associateSlug},null,8,["selected","onCallback"])])):u("",!0),t("div",pPt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[24]||(o[24]=i=>e.need_attach_dialog=i),type:"checkbox",id:"need-dialog-attach"},null,512),[[z,e.need_attach_dialog]]),_Pt]),e.need_attach_dialog?(l(),a("div",fPt,[e.pageForm.next_bot_dialog_command_id?(l(),a("p",bPt,[_(" Связано с диалогом #"+p(e.pageForm.next_bot_dialog_command_id)+" ",1),t("a",{href:"javascript:void(0)",class:"btn font-16 text-danger font-weight-bold",onClick:o[25]||(o[25]=i=>e.pageForm.next_bot_dialog_command_id=null)},yPt)])):u("",!0),T(wFt,{onSelectDialog:e.associateDialog},null,8,["onSelectDialog"])])):u("",!0),t("div",vPt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[26]||(o[26]=i=>e.need_rules=i),type:"checkbox",id:"need-rules"},null,512),[[z,e.need_rules]]),$Pt])],64)),e.need_rules?(l(),M(Q5t,{key:4,bot:e.bot,"rules-form":e.pageForm},null,8,["bot","rules-form"])):u("",!0),kPt],32)):u("",!0)}}}),FPt={class:"container py-3"},CPt={class:"row"},PPt={class:"col-12"},SPt={class:"modal fade",id:"page-form-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},xPt={class:"modal-dialog modal-fullscreen"},jPt={class:"modal-content"},OPt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),TPt={class:"modal-body mb-5"},UPt={key:1,class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},IPt=t("div",{class:"spinner-border text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),VPt={data(){return{page:null,loadPage:!1,loadPageList:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})},pageListCallback(s){this.loadPage=!0;const e=new bootstrap.Modal("#page-form-modal",{});this.$nextTick(()=>{this.loadPage=!1,this.page=s,e.show()})},pageCallback(s){this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})}}},cc=Object.assign(VPt,{__name:"Pages",setup(s){return(e,o)=>(l(),a(v,null,[t("div",FPt,[t("div",CPt,[t("div",PPt,[e.loadPageList?u("",!0):(l(),M(on,{key:0,editor:!0,onCallback:e.pageListCallback},null,8,["onCallback"]))])])]),t("div",SPt,[t("div",xPt,[t("div",jPt,[OPt,t("div",TPt,[e.loadPage?(l(),a("div",UPt,[_(" Подготавливаем данные... "),IPt])):(l(),M(dc,{key:0,page:e.page,onCallback:e.pageCallback},null,8,["page","onCallback"]))])])])])],64))}}),MPt=Object.freeze(Object.defineProperty({__proto__:null,default:cc},Symbol.toStringTag,{value:"Module"})),APt={class:"container py-3"},EPt=t("div",{class:"alert alert-light"}," Данный раздел предназначен для быстрой генерации ссылок с UTM-метками, по которым в дальнейшем будут переходит новые пользователи. Результат - отображение статистики по наиболее популярным точкам восприятия рекламы пользователем. ",-1),DPt={class:"row"},zPt={class:"col-12"},BPt=t("p",null,"Для начала выберите страницу, для которой будет создана ссылка",-1),LPt={key:0,class:"text-center mt-3"},RPt={class:"fw-bold text-primary"},NPt={key:0,class:"col-12 p-3"},qPt={class:"text-center fw-bold"},WPt=t("div",{class:"alert alert-light mb-2"},[t("strong",{class:"fw-bold"},"Внимание!"),_(" Используйте метки "),t("strong",{class:"fw-bold text-primary"},"на английском языке"),_(" или "),t("strong",{class:"fw-bold text-primary"},"число"),_("! ")],-1),YPt={style:{position:"sticky",bottom:"81px"},class:"form-floating mb-2"},HPt=t("label",{for:"utm-source"},"Укажите метку для статистики",-1),QPt={class:"d-flex justify-content-center"},GPt={style:{width:"200px",height:"200px"}},KPt={key:1,class:"col-12"},JPt=t("h6",{class:"fw-bold text-center mt-5"},"Статистика по переходам",-1),XPt={class:"w-100 overflow-x-scroll"},ZPt={class:"modal fade",id:"page-form-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},eSt={class:"modal-dialog modal-fullscreen"},tSt={class:"modal-content"},sSt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),oSt={class:"modal-body pb-5"},iSt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},nSt=["disabled"],lSt={data(){return{date:null,page:null,utm_source:null,loadPage:!1,loadPageList:!1,pageFormModal:null}},watch:{utm_source:{handler:s=>{const e=s.replace(/[а-яА-Я\s]/g,"");globalThis.utm_source=e},deep:!0}},computed:{bot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.pageLink},pageLink(){if(!this.page)return"https://t.me/next_service1_bot";let s="";for(let e=0;e<10-(""+this.page.id).length;e++)s+="0";return s+=this.page.id,"https://t.me/"+this.bot.bot_domain+"?start="+Op.encode("004"+s+(this.utm_source!=null?"utm"+this.utm_source:""))}},mounted(){this.pageFormModal=new bootstrap.Modal("#page-form-modal",{}),this.loadBotAdminConfig();const s=new Date,e=new Date(new Date().setDate(s.getDate()-31)),o=new Date(new Date().setDate(s.getDate()+31));this.date=[e,o]},methods:{copyLink(){this.copyToClipBoard(this.pageLink)},copyToClipBoard(s){navigator.clipboard.writeText(s).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(e=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})},openPageList(){this.pageFormModal.show()},pageListCallback(s){this.loadPage=!0,this.$nextTick(()=>{this.page=s,this.loadPage=!1,this.pageFormModal.hide()})},pageCallback(s){this.loadPageList=!0,this.$nextTick(()=>{this.loadPageList=!1})}}},uc=Object.assign(lSt,{__name:"Links",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a(v,null,[t("div",APt,[EPt,t("div",DPt,[t("div",zPt,[BPt,t("button",{onClick:o[0]||(o[0]=(...i)=>e.openPageList&&e.openPageList(...i)),class:"btn btn-primary w-100"},"Выбрать страницу "),e.page?(l(),a("p",LPt,[_(' Вы выбрали страницу "'),t("span",RPt,p(e.page.slug.command),1),_('" (#'+p(e.page.id)+") ",1)])):u("",!0)]),e.page?(l(),a("div",NPt,[t("p",qPt,[_("Ссылка на текущую страницу: "),t("span",{style:{"word-wrap":"break-word"},class:"bg-secondary text-white font-bold cursor-pointer",onClick:o[1]||(o[1]=i=>e.copyToClipBoard(e.pageLink))},p(e.pageLink),1)]),WPt,t("div",YPt,[f(t("input",{type:"text",maxlength:"100","onUpdate:modelValue":o[2]||(o[2]=i=>e.utm_source=i),class:"form-control",id:"utm-source",placeholder:"name@example.com"},null,512),[[k,e.utm_source]]),HPt]),t("div",QPt,[f(t("img",GPt,null,512),[[n,e.qr]])])])):u("",!0),e.date?(l(),a("div",KPt,[JPt,t("div",XPt,[T(Qd,{date:e.date},null,8,["date"])])])):u("",!0)])]),t("div",ZPt,[t("div",eSt,[t("div",tSt,[sSt,t("div",oSt,[e.loadPageList?u("",!0):(l(),M(on,{key:0,editor:!0,onCallback:e.pageListCallback},null,8,["onCallback"]))])])])]),t("nav",iSt,[t("button",{onClick:o[3]||(o[3]=(...i)=>e.copyLink&&e.copyLink(...i)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},disabled:!e.page,class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center"}," Скопировать ссылку в буфер ",8,nSt)])],64)}}}),aSt=Object.freeze(Object.defineProperty({__proto__:null,default:uc},Symbol.toStringTag,{value:"Module"})),rSt={computed:{tg(){return window.Telegram.WebApp}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{goTo(s){this.$router.push({name:s})}}},dSt={class:"container py-3"},cSt={class:"row row-cols-2 row-cols-sm-2 row-cols-md-3 g-2"},uSt={class:"col"},mSt={class:"card-body w-100 d-flex justify-content-center align-items-center flex-column"},hSt={class:"img-fluid",alt:""},pSt=t("p",{class:"my-2"},"Управление IIKO",-1),_St={class:"col"},fSt={class:"card-body w-100 d-flex justify-content-center align-items-center flex-column"},bSt={style:{"object-fit":"cover"},class:"img-fluid",alt:""},gSt=t("p",{class:"my-2"},"Управление CDEK",-1),ySt={class:"col"},vSt={class:"card-body w-100 d-flex justify-content-center align-items-center flex-column"},$St={class:"img-fluid",alt:""},kSt=t("p",{class:"my-2"},"Управление AMO",-1),wSt={class:"col"},FSt={class:"card-body w-100 d-flex justify-content-center align-items-center flex-column"},CSt={class:"img-fluid",alt:""},PSt=t("p",{class:"my-2"},"Управление Bitrix24",-1),SSt={class:"col"},xSt={class:"card-body w-100 d-flex justify-content-center align-items-center flex-column"},jSt={class:"img-fluid",alt:""},OSt=t("p",{class:"my-2"},"Управление yClients",-1),TSt={class:"col"},USt={class:"card-body w-100 d-flex justify-content-center align-items-center flex-column"},ISt={class:"img-fluid",alt:""},VSt=t("p",{class:"my-2"},"Управление FrontPad",-1);function MSt(s,e,o,n,i,r){const d=ie("lazy");return l(),a("div",dSt,[t("div",cSt,[t("div",uSt,[t("button",{type:"button",onClick:e[0]||(e[0]=c=>r.goTo("IikoV2")),style:{"min-height":"250px",height:"100%"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",mSt,[f(t("img",hSt,null,512),[[d,"/images/shop-v2-2/iiko.png"]]),pSt])])]),t("div",_St,[t("button",{type:"button",onClick:e[1]||(e[1]=c=>r.goTo("CdekV2")),style:{"min-height":"250px",height:"100%"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",fSt,[f(t("img",bSt,null,512),[[d,"/images/shop-v2-2/CDEK.png"]]),gSt])])]),t("div",ySt,[t("button",{type:"button",onClick:e[2]||(e[2]=c=>r.goTo("AmoV2")),style:{"min-height":"250px",height:"100%"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",vSt,[f(t("img",$St,null,512),[[d,"/images/shop-v2-2/amo.png"]]),kSt])])]),t("div",wSt,[t("button",{type:"button",onClick:e[3]||(e[3]=c=>r.goTo("BitrixV2")),style:{"min-height":"250px",height:"100%"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",FSt,[f(t("img",CSt,null,512),[[d,"/images/shop-v2-2/bitrix.png"]]),PSt])])]),t("div",SSt,[t("button",{type:"button",onClick:e[4]||(e[4]=c=>r.goTo("YClientsV2")),style:{"min-height":"250px",height:"100%"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",xSt,[f(t("img",jSt,null,512),[[d,"/images/shop-v2-2/yclients.png"]]),OSt])])]),t("div",TSt,[t("button",{type:"button",onClick:e[5]||(e[5]=c=>r.goTo("FrontPadV2")),style:{"min-height":"250px",height:"100%"},class:"btn shadow-sm border-0 btn-outline-primary w-100 mb-2 card"},[t("div",USt,[f(t("img",ISt,null,512),[[d,"/images/shop-v2-2/promo.png"]]),VSt])])])])])}const mc=oe(rSt,[["render",MSt]]),ASt=Object.freeze(Object.defineProperty({__proto__:null,default:mc},Symbol.toStringTag,{value:"Module"}));const ESt={data(){return{telegramInput:"",modal:null}},mounted(){this.modal=new bootstrap.Modal(document.getElementById("add-partner-modal"))},methods:{openModal(){this.modal.show()},handleSubmit(){const s=this.processTelegramLink(this.telegramInput);let e=new FormData;e.append("telegram_domain",s),this.$store.dispatch("storePartner",{form:e}).then(o=>{this.load=!0,this.telegramInput="",this.$notify({title:"Добавление партнера",text:"Партнер успешно добавлен",type:"success"}),this.modal.hide(),this.$emit("callback")}).catch(o=>{this.$notify({title:"Добавление партнера",text:o.response.data.message||"Ошибка добавления партнера",type:"error"})})},processTelegramLink(s){let e=s.trim();return e.startsWith("https://t.me/")?e=e.replace("https://t.me/",""):e.startsWith("@")&&(e=e.replace("@","")),e}}},nn=s=>(Ge("data-v-4139fdee"),s=s(),Ke(),s),DSt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px","z-index":"999!important"}},zSt={class:"container text-center"},BSt={class:"modal fade",id:"add-partner-modal",tabindex:"-1","aria-labelledby":"add-partner-modal-label","aria-hidden":"true"},LSt={class:"modal-dialog"},RSt={class:"modal-content"},NSt=nn(()=>t("div",{class:"modal-header"},[t("h5",{class:"modal-title",id:"add-partner-modal-label"},"Добавление партнера"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),qSt={class:"modal-body"},WSt=nn(()=>t("p",{class:"alert alert-light border-secondary mb-2"}," Настройка партнера происходит после его добавления ",-1)),YSt={class:"mb-3 form-floating"},HSt=nn(()=>t("label",{for:"telegram",class:"form-label"},"Ссылка на Telegram-бота",-1)),QSt=nn(()=>t("button",{type:"submit",class:"btn btn-primary w-100 p-3"},"Добавить",-1));function GSt(s,e,o,n,i,r){return l(),a(v,null,[t("nav",DSt,[t("div",zSt,[t("button",{class:"btn text-center btn-primary w-100 p-3 rounded-3 shadow-lg",onClick:e[0]||(e[0]=(...d)=>r.openModal&&r.openModal(...d))}," Добавить партнера ")])]),t("div",BSt,[t("div",LSt,[t("div",RSt,[NSt,t("div",qSt,[WSt,t("form",{onSubmit:e[2]||(e[2]=W((...d)=>r.handleSubmit&&r.handleSubmit(...d),["prevent"]))},[t("div",YSt,[f(t("input",{type:"text",class:"form-control",id:"telegram","onUpdate:modelValue":e[1]||(e[1]=d=>i.telegramInput=d),placeholder:"Введите ссылку на Telegram-бота"},null,512),[[k,i.telegramInput]]),HSt]),QSt],32)])])])])],64)}const KSt=oe(ESt,[["render",GSt],["__scopeId","data-v-4139fdee"]]);const JSt={props:["initialData"],data(){return{file:null,preview:null,activeTab:"partner",labels:{partner:{organization_name:"Название организации",inn:"ИНН",ogrn:"ОГРН",kpp:"КПП",legal_address:"Юридический адрес",actual_address:"Фактический адрес",email:"E-mail",phone:"Телефон",status:"Статус"},contract:{contract_number:"Номер договора",contract_name:"Название",start_date:"Дата начала",end_date:"Дата окончания",contract_status:"Статус",total_amount:"Сумма"},contact:{full_name:"ФИО",position:"Должность",email:"E-mail",phone:"Телефон"},document:{file_name:"Файл",document_type:"Тип документа"}},tabs:[{key:"partner",label:"Партнёр"},{key:"contract",label:"Договор"},{key:"contacts",label:"Контакты"},{key:"documents",label:"Документы"}],form:{id:null,title:"",description:"",image:"",is_active:!0,extra_charge:0,demo_mode:!0,config:{excludes:[],bg_color:"transparent"},legal_info:{partner:{organization_name:"ООО «Альфа-Партнер»",legal_form:"ООО",inn:"7701234567",ogrn:"1027700132195",kpp:"770101001",registration_date:"2015-04-10",legal_address:"г. Москва, ул. Центральная, д. 12",actual_address:"г. Москва, ул. Центральная, д. 14",bank_name:"ПАО Сбербанк",bik:"044525225",checking_account:"40702810900000012345",correspondent_account:"30101810400000000225",email:"info@alfapartner.ru",phone:"+7 (495) 123-45-67",status:"Активен",notes:"Надёжный партнёр, сотрудничество с 2018 года"},contacts:[{full_name:"Иванов Сергей Петрович",position:"Генеральный директор",email:"ivanov@alfapartner.ru",phone:"+7 (495) 555-12-34"},{full_name:"Кузнецова Анна Дмитриевна",position:"Юрист",email:"kuznetsova@alfapartner.ru",phone:"+7 (495) 555-12-35"}],contracts:{contract_number:"ДГ-2025/14",contract_name:"Договор на оказание консультационных услуг",contract_type:"Услуги",start_date:"2025-02-01",end_date:"2026-02-01",contract_status:"Подписан",total_amount:12e5,currency:"RUB",payment_terms:"Оплата в течение 10 рабочих дней после выставления счёта",responsible_person:"Петров И.А.",signed_by:"Иванов С.П.",signature_date:"2025-01-28",auto_renewal:!1,termination_reason:null},documents:[{file_name:"Договор_ДГ-2025-14.pdf",file_path:"/docs/contracts/ДГ-2025-14.pdf",document_type:"Договор",uploaded_at:"2025-01-28T14:12:00",verified:!0,comment:"Подписан обеими сторонами"}]}}}},computed:{bot(){return window.currentBot||null}},mounted(){this.initialData&&(this.form={...this.initialData})},methods:{addContract(){this.form.legal_info.contracts.value.push({id:Date.now(),partner_id:1})},addContact(){this.form.legal_info.contacts.value.push({id:Date.now(),partner_id:1})},addDocument(){this.form.legal_info.documents.value.push({id:Date.now(),contract_id:10})},onFileChange(s){const e=s.target.files[0];this.file=e,e&&(this.preview=URL.createObjectURL(e)),this.$emit("select",e)},handleSubmit(){let s=new FormData;Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.file&&s.append("file",this.file),this.$store.dispatch("updatePartner",{form:s}).then(e=>{this.$notify({title:"Отлично!",text:"Параметры успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Упс!",text:"Ошибка сохранения параметров",type:"error"})})}}},Yt=s=>(Ge("data-v-e64183e7"),s=s(),Ke(),s),XSt={class:"form-check form-switch mb-2"},ZSt=Yt(()=>t("label",{class:"form-check-label",for:"flexSwitchCheck"}," Активен ",-1)),e4t={class:"mb-2 form-floating"},t4t=Yt(()=>t("label",{for:"title"},"Заголовок",-1)),s4t={class:"mb-2 form-floating"},o4t=Yt(()=>t("label",{for:"description"},"Описание",-1)),i4t={class:"form-floating mb-2 file-floating"},n4t=Yt(()=>t("label",{for:"imageInput"},"Загрузить изображение",-1)),l4t={key:0,class:"mb-2"},a4t={class:"card"},r4t={class:"card-body"},d4t=["src"],c4t={key:1,class:"mb-2"},u4t={class:"card"},m4t={class:"card-body"},h4t={class:"img-fluid rounded border img-preview"},p4t={class:"mb-2 form-floating"},_4t=Yt(()=>t("label",{for:"extra_charge"},"Дополнительная плата",-1)),f4t={class:"form-check form-switch mb-2"},b4t=Yt(()=>t("label",{class:"form-check-label",for:"flexSwitchCheck"}," Режим тестирования ",-1)),g4t={class:"nav nav-tabs mb-2"},y4t=["onClick"],v4t=Yt(()=>t("h4",null,"Данные партнёра",-1)),$4t={class:"row row-cols-1"},k4t={class:"form-floating"},w4t=["onUpdate:modelValue","id"],F4t=["for"],C4t=Yt(()=>t("h4",null,"Контракт",-1)),P4t={class:"row row-cols-1"},S4t={class:"form-floating"},x4t=["onUpdate:modelValue","id"],j4t=["for"],O4t=Yt(()=>t("h4",null,"Контактные лица",-1)),T4t=Yt(()=>t("div",{class:"divider my-3"},"Контакт",-1)),U4t={class:"row row-cols-1"},I4t={class:"form-floating"},V4t=["onUpdate:modelValue","id"],M4t=["for"],A4t=["onClick"],E4t=Yt(()=>t("h4",null,"Документы",-1)),D4t=["onClick"],z4t={class:"row row-cols-1"},B4t={class:"form-floating"},L4t=["onUpdate:modelValue","id"],R4t=["for"],N4t=Yt(()=>t("nav",{class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},[t("button",{type:"submit",class:"btn btn-primary w-100 p-3"},"Отправить")],-1));function q4t(s,e,o,n,i,r){const d=ie("lazy");return l(),a("form",{onSubmit:e[8]||(e[8]=W((...c)=>r.handleSubmit&&r.handleSubmit(...c),["prevent"]))},[t("div",XSt,[f(t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheck","onUpdate:modelValue":e[0]||(e[0]=c=>i.form.is_active=c)},null,512),[[z,i.form.is_active]]),ZSt]),t("div",e4t,[f(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[1]||(e[1]=c=>i.form.title=c),placeholder:"Введите заголовок"},null,512),[[k,i.form.title]]),t4t]),t("div",s4t,[f(t("textarea",{class:"form-control",id:"description",style:{"min-height":"200px"},"onUpdate:modelValue":e[2]||(e[2]=c=>i.form.description=c),placeholder:"Введите описание"},null,512),[[k,i.form.description]]),o4t]),t("div",i4t,[t("input",{type:"file",class:"form-control",id:"imageInput",accept:"image/*",onChange:e[3]||(e[3]=(...c)=>r.onFileChange&&r.onFileChange(...c))},null,32),n4t]),i.preview?(l(),a("div",l4t,[t("div",a4t,[t("div",r4t,[t("img",{src:i.preview,class:"img-fluid rounded border img-preview"},null,8,d4t)])])])):u("",!0),i.form.image?(l(),a("div",c4t,[t("div",u4t,[t("div",m4t,[f(t("img",h4t,null,512),[[d,"/images-by-bot-id/"+r.bot.id+"/"+i.form.image]])])])])):u("",!0),t("div",p4t,[f(t("input",{type:"number",class:"form-control",id:"extra_charge","onUpdate:modelValue":e[4]||(e[4]=c=>i.form.extra_charge=c),placeholder:"Введите дополнительную плату"},null,512),[[k,i.form.extra_charge]]),_4t]),t("div",f4t,[f(t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheck","onUpdate:modelValue":e[5]||(e[5]=c=>i.form.demo_mode=c)},null,512),[[z,i.form.demo_mode]]),b4t]),i.form.demo_mode?u("",!0):(l(),a(v,{key:2},[t("ul",g4t,[(l(!0),a(v,null,O(i.tabs,c=>(l(),a("li",{class:"nav-item",key:c.key},[t("button",{type:"button",class:C(["nav-link",{active:i.activeTab===c.key}]),onClick:h=>i.activeTab=c.key},p(c.label),11,y4t)]))),128))]),f(t("template",null,[v4t,t("div",$4t,[(l(!0),a(v,null,O(i.form.legal_info.partner,(c,h)=>(l(),a("div",{class:"col mb-2",key:h},[t("div",k4t,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":g=>s.partner[h]=g,id:"partner_"+h,placeholder:" "},null,8,w4t),[[k,s.partner[h]]]),t("label",{for:"partner_"+h},p(i.labels.partner[h]||h),9,F4t)])]))),128))])],512),[[tt,i.activeTab==="partner"]]),f(t("template",null,[C4t,t("div",P4t,[(l(!0),a(v,null,O(i.form.legal_info.contract,(c,h)=>(l(),a("div",{class:"col mb-2",key:h},[t("div",S4t,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":g=>i.form.legal_info.contract[h]=g,id:"contract_"+h,placeholder:" "},null,8,x4t),[[k,i.form.legal_info.contract[h]]]),t("label",{for:"contract_"+h},p(i.labels.contract[h]||h),9,j4t)])]))),128))])],512),[[tt,i.activeTab==="contract"]]),f(t("template",null,[O4t,(l(!0),a(v,null,O(i.form.legal_info.contacts,(c,h)=>(l(),a("div",{key:"contact-"+h,class:"rounded mb-2 position-relative"},[T4t,t("div",U4t,[(l(!0),a(v,null,O(c,(g,w)=>(l(),a("div",{class:"col mb-2",key:w},[t("div",I4t,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":x=>c[w]=x,id:"contact_"+w+h,placeholder:" "},null,8,V4t),[[k,c[w]]]),t("label",{for:"contact_"+w+h},p(i.labels.contact[w]||w),9,M4t)])]))),128))]),t("button",{class:"btn btn-sm btn-danger w-100",onClick:g=>i.form.legal_info.contacts.splice(h,1)}," Удалить контакт ",8,A4t)]))),128)),t("button",{class:"btn btn-outline-primary",onClick:e[6]||(e[6]=(...c)=>r.addContact&&r.addContact(...c))},"+ Добавить контакт")],512),[[tt,i.activeTab==="contacts"]]),f(t("template",null,[E4t,(l(!0),a(v,null,O(i.form.legal_info.documents,(c,h)=>(l(),a("div",{key:"doc"+h,class:"border rounded p-3 mb-2 position-relative"},[t("button",{class:"btn btn-sm btn-danger position-absolute top-0 end-0 m-2",onClick:g=>i.form.legal_info.documents.splice(h,1)}," Удалить документ ",8,D4t),t("div",z4t,[(l(!0),a(v,null,O(c,(g,w)=>(l(),a("div",{class:"col mb-2",key:w},[t("div",B4t,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":x=>c[w]=x,id:"doc_"+w+h,placeholder:" "},null,8,L4t),[[k,c[w]]]),t("label",{for:"doc_"+w+h},p(i.labels.document[w]||w),9,R4t)])]))),128))])]))),128)),t("button",{class:"btn btn-outline-primary",onClick:e[7]||(e[7]=(...c)=>r.addDocument&&r.addDocument(...c))},"+ Добавить документ")],512),[[tt,i.activeTab==="documents"]])],64)),N4t],32)}const W4t=oe(JSt,[["render",q4t],["__scopeId","data-v-e64183e7"]]);const Y4t={props:["partner"],data(){return{extra_charge:0,need_product_config:!1}},computed:{excludes(){var s;return((s=this.partner.config)==null?void 0:s.excludes)||[]}},mounted(){this.extra_charge=this.partner.extra_charge||0},methods:{changeStatus(s,e){var i;let o=((i=this.partner.config)==null?void 0:i.excludes)||[],n=o.indexOf(s);n===-1?o.push(s):o.splice(n,1),this.partner.config.excludes=o,this.$store.dispatch("changePartnerProductStatus",{product_id:s,partner_id:this.partner.id,status:e}).then(r=>{}).catch(()=>{})}}},hc=s=>(Ge("data-v-9b93497d"),s=s(),Ke(),s),H4t={class:"form-floating mb-2"},Q4t=hc(()=>t("label",{for:""},"Наценка, %",-1)),G4t={class:"form-check form-switch mb-2"},K4t=hc(()=>t("label",{class:"form-check-label",for:"need_product_config"},"Режим настройки отображения товаров",-1)),J4t={key:0,class:"list-group"},X4t={class:"mb-0 d-flex justify-content-between align-items-center"},Z4t={key:0,class:"badge bg-primary"},e6t={key:1,class:"badge bg-info"},t6t={key:0,class:"row row-cols-1"},s6t={class:"col"},o6t={class:"d-flex mt-2 mb-2 justify-content-center"},i6t={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},n6t=["onChange","checked","name","id"],l6t=["for"],a6t=["onChange","checked","name","id"],r6t=["for"];function d6t(s,e,o,n,i,r){return l(),a(v,null,[t("div",H4t,[f(t("input",{type:"number","onUpdate:modelValue":e[0]||(e[0]=d=>i.extra_charge=d),class:"form-control",placeholder:"Поиск страницы"},null,512),[[k,i.extra_charge]]),Q4t]),t("div",G4t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=d=>i.need_product_config=d),type:"checkbox",role:"switch",id:"need_product_config"},null,512),[[z,i.need_product_config]]),K4t]),o.partner?(l(),a("ul",J4t,[(l(!0),a(v,null,O(o.partner.products,(d,c)=>(l(),a("li",{class:C([{"bg-exclude":r.excludes.indexOf(d.id)!==-1},"list-group-item"])},[t("p",X4t,[_(p(d.title)+" ",1),i.extra_charge===0?(l(),a("span",Z4t,p(d.current_price||0)+"₽",1)):(l(),a("span",e6t,p(parseFloat(d.current_price)+parseFloat((d.current_price*i.extra_charge/100).toFixed(2)))+"₽",1))]),i.need_product_config?(l(),a("div",t6t,[t("div",s6t,[t("div",o6t,[t("div",i6t,[t("input",{type:"radio",onChange:h=>r.changeStatus(d.id,0),checked:r.excludes.indexOf(d.id)===-1,class:"btn-check",name:"config-partner-product-"+d.id,id:"config-partner-product1-"+d.id,autocomplete:"off"},null,40,n6t),t("label",{class:"btn btn-outline-primary",for:"config-partner-product1-"+d.id},"Отображать",8,l6t),t("input",{type:"radio",onChange:h=>r.changeStatus(d.id,1),checked:r.excludes.indexOf(d.id)!==-1,class:"btn-check",name:"config-partner-product-"+d.id,id:"config-partner-product2-"+d.id,autocomplete:"off"},null,40,a6t),t("label",{class:"btn btn-outline-primary",for:"config-partner-product2-"+d.id},"Не отображать",8,r6t)])])])])):u("",!0)],2))),256))])):u("",!0)],64)}const c6t=oe(Y4t,[["render",d6t],["__scopeId","data-v-9b93497d"]]);const kt=s=>(Ge("data-v-09dd2fae"),s=s(),Ke(),s),u6t={class:"input-group mb-2"},m6t={class:"form-floating"},h6t=kt(()=>t("label",{for:"floatingInput"},"Критерии поиска",-1)),p6t=kt(()=>t("button",{class:"btn btn-outline-secondary text-primary",type:"submit",id:"button-addon2"}," Найти ",-1)),_6t={class:"form-floating my-2"},f6t=ze('<option value="title" data-v-09dd2fae>По названию</option><option value="is_active" data-v-09dd2fae>Активные</option><option value="product_count" data-v-09dd2fae>По числу товаров</option><option value="updated_at" data-v-09dd2fae>По дате добавления</option><option value="updated_at" data-v-09dd2fae>По дате договора</option>',5),b6t=[f6t],g6t=kt(()=>t("label",{for:"floatingSelect"},"Сортировать заказы по",-1)),y6t={key:0},v6t=kt(()=>t("i",{class:"fa-solid fa-caret-up"},null,-1)),$6t=kt(()=>t("i",{class:"fa-solid fa-caret-down"},null,-1)),k6t={class:"row row-cols-1 mb-5"},w6t={class:"card-body"},F6t={class:"card-title fw-bold"},C6t={class:"card-text"},P6t=kt(()=>t("strong",null,"Число товаров: ",-1)),S6t=kt(()=>t("br",null,null,-1)),x6t=kt(()=>t("strong",null,"Договор работает до: ",-1)),j6t=kt(()=>t("br",null,null,-1)),O6t=kt(()=>t("strong",null,"Статус: ",-1)),T6t={class:"card-footer d-flex justify-content-between align-items-center"},U6t={class:"btn-group"},I6t=["onClick"],V6t=kt(()=>t("i",{class:"fa-solid fa-pen-to-square"},null,-1)),M6t=[V6t],A6t=["onClick"],E6t=kt(()=>t("i",{class:"fa-solid fa-store"},null,-1)),D6t=[E6t],z6t={class:"form-switch form-check"},B6t=["id","onUpdate:modelValue"],L6t=["for"],R6t=["onClick"],N6t=kt(()=>t("i",{class:"fa-solid fa-trash"},null,-1)),q6t=[N6t],W6t={class:"modal fade",id:"config-partner-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Y6t={class:"modal-dialog modal-fullscreen"},H6t={class:"modal-content"},Q6t=kt(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Настройка партнера"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),G6t={class:"modal-body"},K6t={class:"modal fade",id:"products-partner-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},J6t={class:"modal-dialog modal-fullscreen"},X6t={class:"modal-content"},Z6t=kt(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Настройка товаров"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),ext={class:"modal-body"},txt={class:"modal fade",id:"remove-partner-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},sxt={class:"modal-dialog modal-dialog-centered"},oxt={class:"modal-content"},ixt=kt(()=>t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Удаление партнера"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),nxt={class:"modal-body"},lxt={class:"mb-2"},axt={class:"fw-bold text-primary"},rxt={class:"w-100 d-flex justify-content-center"},dxt=kt(()=>t("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary",type:"button"},"Нет, отменить ",-1)),cxt={data(){return{sort:{param:"id",direction:"desc"},loading:!1,selected:null,search:null,config_modal:null,remove_modal:null,partners:[],partners_paginate_object:null}},computed:{...G(["getPartners","getPartnersPaginateObject"]),filteredPartners(){return this.search?(this.partners||[]).filter(s=>{const e=s.title.toLowerCase().includes((this.search||"").toLowerCase()),o=this.sort.param?s.status===this.sort.param:!0;return e&&o}):this.partners||[]}},mounted(){this.config_modal=new bootstrap.Modal(document.getElementById("config-partner-modal")),this.remove_modal=new bootstrap.Modal(document.getElementById("remove-partner-modal")),this.products_modal=new bootstrap.Modal(document.getElementById("products-partner-modal")),this.loadPartners()},methods:{changeDirection(s){this.sort.direction=s,this.loadPartners(0)},nextPartners(s){this.loadPartners(s)},selectPartnerForProductObserve(s){this.selected=null,this.$nextTick(()=>{this.selected=s,this.products_modal.show()})},selectPartnerForRemove(s){this.selected=null,this.$nextTick(()=>{this.selected=s,this.remove_modal.show()})},selectPartner(s){this.selected=null,this.$nextTick(()=>{this.selected=s,this.config_modal.show()})},loadPartners(s=0){this.loading=!0,this.$store.dispatch("loadPartners",{dataObject:{...this.search?{search:this.search}:{},...this.sort.param?{order_by:this.sort.param}:{},direction:this.sort.direction||"asc"},page:s}).then(e=>{this.partners=(this.getPartners||[]).map(o=>({...o,products:Array.isArray(o.products)?o.products:[],contract_expiration:o.contract_expiration||"-"})),this.partners_paginate_object=this.getPartnersPaginateObject||null,this.loading=!1}).catch(e=>{this.loading=!1,console.error("LOAD PARTNERS ERROR:",e)})},removePartner(){if(!this.selected)return;let s=this.partners.findIndex(e=>e.id===this.selected.id);s!==-1&&(this.partners[s].before_deleted=!0),this.$store.dispatch("removePartner",{partnerId:this.selected.id}).then(e=>{this.$notify({title:"Управление партнерами",text:"Партнер успешно удален!",type:"success"}),this.remove_modal.hide(),this.loadPartners()}).catch(()=>{this.$notify({title:"Управление партнерами",text:"Ошибка удаления партнера!",type:"error"}),this.remove_modal.hide()})},applyFilters(){this.loadPartners()}}},uxt=Object.assign(cxt,{__name:"PartnerList",setup(s){return(e,o)=>(l(),a(v,null,[t("form",{onSubmit:o[3]||(o[3]=W((...n)=>e.applyFilters&&e.applyFilters(...n),["prevent"])),class:"mt-2 mb-2"},[t("div",u6t,[t("div",m6t,[f(t("input",{type:"text",class:"form-control",placeholder:"Поиск партнера","aria-label":"Поиск партнера","onUpdate:modelValue":o[0]||(o[0]=n=>e.search=n),"aria-describedby":"button-addon2"},null,512),[[k,e.search]]),h6t]),p6t]),t("div",_6t,[f(t("select",{onChange:o[1]||(o[1]=(...n)=>e.applyFilters&&e.applyFilters(...n)),"onUpdate:modelValue":o[2]||(o[2]=n=>e.sort.param=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},b6t,544),[[Ve,e.sort.param]]),g6t])],32),e.sort.param!=null?(l(),a("p",y6t,[_("Направление сортировки: "),e.sort.direction==="asc"?(l(),a("span",{key:0,class:"fw-bold",onClick:o[4]||(o[4]=n=>e.changeDirection("desc"))},[_("по возрастанию "),v6t])):u("",!0),e.sort.direction==="desc"?(l(),a("span",{key:1,class:"fw-bold",onClick:o[5]||(o[5]=n=>e.changeDirection("asc"))},[_("по убыванию "),$6t])):u("",!0)])):u("",!0),!e.loading&&(e.partners||[]).length>0?(l(),a(v,{key:1},[t("div",k6t,[(l(!0),a(v,null,O(e.partners,(n,i)=>{var r;return l(),a("div",{class:"col",key:n.id},[t("div",{class:C(["card mb-2",{"border-danger":n.before_deleted}])},[t("div",w6t,[t("h5",F6t,p(n.title),1),t("p",C6t,[P6t,_(" "+p(((r=n.products)==null?void 0:r.length)||0),1),S6t,x6t,_(" "+p(n.contract_expiration||"-"),1),j6t,O6t,t("span",{class:C({"text-success":n.is_active,"text-danger":!n.is_active})},p(n.is_active?"Активен":"Не активен"),3)])]),t("div",T6t,[t("div",U6t,[t("button",{type:"button",onClick:d=>e.selectPartner(n),class:"btn btn-primary"},M6t,8,I6t),t("button",{type:"button",onClick:d=>e.selectPartnerForProductObserve(n),class:"btn btn-primary"},D6t,8,A6t)]),t("div",z6t,[f(t("input",{type:"checkbox",class:"form-check-input",id:"is_active-partner-"+n.id,"onUpdate:modelValue":d=>n.is_active=d},null,8,B6t),[[z,n.is_active]]),t("label",{class:"form-check-label",for:"is_active-partner-"+n.id},p(n.is_active?"Активен":"Не активен"),9,L6t)]),t("button",{type:"button",onClick:d=>e.selectPartnerForRemove(n),class:"btn btn-danger"},q6t,8,R6t)])],2)])}),128))]),e.partners_paginate_object?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextPartners,pagination:e.partners_paginate_object},null,8,["onPagination_page","pagination"])):u("",!0)],64)):u("",!0),t("div",W6t,[t("div",Y6t,[t("div",H6t,[Q6t,t("div",G6t,[e.selected?(l(),M(W4t,{key:0,"initial-data":e.selected},null,8,["initial-data"])):u("",!0)])])])]),t("div",K6t,[t("div",J6t,[t("div",X6t,[Z6t,t("div",ext,[e.selected?(l(),M(c6t,{key:0,partner:e.selected},null,8,["partner"])):u("",!0)])])])]),t("div",txt,[t("div",sxt,[t("div",oxt,[ixt,t("div",nxt,[e.selected?(l(),a(v,{key:0},[t("p",lxt,[_("Вы точно хотите удалить "),t("strong",axt,p(e.selected.title||"этого партнера"),1),_("?")]),t("div",rxt,[t("button",{onClick:o[6]||(o[6]=(...n)=>e.removePartner&&e.removePartner(...n)),style:{"margin-right":"10px"},class:"btn btn-danger",type:"button"},"Да, удалить "),dxt])],64)):u("",!0)])])])])],64))}}),mxt=oe(uxt,[["__scopeId","data-v-09dd2fae"]]);const hxt={props:["modelValue"],data(){return{file:null,preview:null,form:{title:"",description:"",image:"",config:{excludes:[],bg_color:"transparent"}}}},computed:{bot(){return window.currentBot||null}},mounted(){var s,e;(s=this.bot.settings)!=null&&s.partners&&(this.form={...(e=this.bot.settings)==null?void 0:e.partners})},methods:{addContract(){this.form.legal_info.contracts.value.push({id:Date.now(),partner_id:1})},addContact(){this.form.legal_info.contacts.value.push({id:Date.now(),partner_id:1})},addDocument(){this.form.legal_info.documents.value.push({id:Date.now(),contract_id:10})},onFileChange(s){const e=s.target.files[0];this.file=e,e&&(this.preview=URL.createObjectURL(e)),this.$emit("select",e)},handleSubmit(){let s=new FormData;Object.keys(this.form).forEach(e=>{const o=this.form[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.file&&s.append("file",this.file),this.$store.dispatch("updateSelfPartner",{form:s}).then(e=>{this.$notify({title:"Отлично!",text:"Параметры успешно сохранены",type:"success"}),this.$emit("success")}).catch(e=>{this.$notify({title:"Упс!",text:"Ошибка сохранения параметров",type:"error"})})}}},ln=s=>(Ge("data-v-d0dd1e30"),s=s(),Ke(),s),pxt={class:"mb-2 form-floating"},_xt=ln(()=>t("label",{for:"title"},"Заголовок",-1)),fxt={class:"mb-2 form-floating"},bxt=ln(()=>t("label",{for:"description"},"Описание",-1)),gxt={class:"form-floating mb-2 file-floating"},yxt=ln(()=>t("label",{for:"imageInput"},"Загрузить изображение",-1)),vxt={key:0,class:"mb-2"},$xt={class:"card"},kxt={class:"card-body"},wxt=["src"],Fxt={key:1,class:"mb-2"},Cxt={class:"card"},Pxt={class:"card-body"},Sxt={class:"img-fluid rounded border img-preview"},xxt=ln(()=>t("button",{type:"submit",class:"btn btn-primary w-100 p-3"},"Отправить",-1));function jxt(s,e,o,n,i,r){const d=ie("lazy");return l(),a("form",{onSubmit:e[3]||(e[3]=W((...c)=>r.handleSubmit&&r.handleSubmit(...c),["prevent"]))},[t("div",pxt,[f(t("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[0]||(e[0]=c=>i.form.title=c),placeholder:"Введите заголовок"},null,512),[[k,i.form.title]]),_xt]),t("div",fxt,[f(t("textarea",{class:"form-control",id:"description",style:{"min-height":"200px"},"onUpdate:modelValue":e[1]||(e[1]=c=>i.form.description=c),placeholder:"Введите описание"},null,512),[[k,i.form.description]]),bxt]),t("div",gxt,[t("input",{type:"file",class:"form-control",id:"imageInput",accept:"image/*",onChange:e[2]||(e[2]=(...c)=>r.onFileChange&&r.onFileChange(...c))},null,32),yxt]),i.preview?(l(),a("div",vxt,[t("div",$xt,[t("div",kxt,[t("img",{src:i.preview,class:"img-fluid rounded border img-preview"},null,8,wxt)])])])):u("",!0),i.form.image?(l(),a("div",Fxt,[t("div",Cxt,[t("div",Pxt,[f(t("img",Sxt,null,512),[[d,"/images-by-bot-id/"+r.bot.id+"/"+i.form.image]])])])])):u("",!0),xxt],32)}const Oxt=oe(hxt,[["render",jxt],["__scopeId","data-v-d0dd1e30"]]),Txt={class:"container py-3"},Uxt={class:"row"},Ixt={class:"col-12"},Vxt={class:"form-check form-switch mb-2"},Mxt={class:"form-check-label",for:"partners-is_active"},Axt={class:"form-check form-switch mb-2"},Ext={class:"form-check-label",for:"partners-display_self"},Dxt={class:"col-12"},zxt={class:"col-12"},Bxt={class:"nav nav-tabs justify-content-center catalog-tabs"},Lxt={class:"nav-item"},Rxt={class:"nav-item"},Nxt={key:0,class:"col-12"},qxt={class:"modal fade",id:"self-config-partner-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Wxt={class:"modal-dialog modal-fullscreen"},Yxt={class:"modal-content"},Hxt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Настройка партнера"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Qxt={class:"modal-body"},Gxt={data(){return{config_modal:null,loading:!1,tab:0,form:{is_active:!1,display_self:!1}}},computed:{...G(["getSelf"]),currentBot(){return window.currentBot},tg(){return window.Telegram.WebApp}},mounted(){var s,e,o,n,i,r;this.config_modal=new bootstrap.Modal(document.getElementById("self-config-partner-modal")),this.form.is_active=((o=(e=(s=this.currentBot)==null?void 0:s.settings)==null?void 0:e.partners)==null?void 0:o.is_active)??!1,this.form.display_self=((r=(i=(n=this.currentBot)==null?void 0:n.settings)==null?void 0:i.partners)==null?void 0:r.display_self)??!1},methods:{callbackAddPartner(){this.loading=!0,this.$nextTick(()=>{this.loading=!1})},openSelfConfigModal(){this.config_modal.show()},closeSelfConfigModal(){this.config_modal.hide()},updatePartnersSettings(){this.$store.dispatch("updatePartnersSettings",this.form).then(s=>{}).catch(()=>{})},loadPartners(){this.$store.dispatch("loadPartners",{}).then(s=>{}).catch(()=>{})}}},pc=Object.assign(Gxt,{__name:"Partners",setup(s){return(e,o)=>(l(),a(v,null,[t("div",Txt,[t("div",Uxt,[t("div",Ixt,[t("div",Vxt,[f(t("input",{class:"form-check-input",type:"checkbox",onChange:o[0]||(o[0]=(...n)=>e.updatePartnersSettings&&e.updatePartnersSettings(...n)),"onUpdate:modelValue":o[1]||(o[1]=n=>e.form.is_active=n),role:"switch",id:"partners-is_active"},null,544),[[z,e.form.is_active]]),t("label",Mxt,[_("Режим работы с партнерами "),t("span",{class:C({"text-primary fw-bold":e.form.is_active})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.is_active})},"выкл",2)])]),t("div",Axt,[f(t("input",{class:"form-check-input",type:"checkbox",onChange:o[2]||(o[2]=(...n)=>e.updatePartnersSettings&&e.updatePartnersSettings(...n)),"onUpdate:modelValue":o[3]||(o[3]=n=>e.form.display_self=n),role:"switch",id:"partners-display_self"},null,544),[[z,e.form.display_self]]),t("label",Ext,[_("Отображать себя в списке "),t("span",{class:C({"text-primary fw-bold":e.form.display_self})},"вкл",2),_(" \\ "),t("span",{class:C({"text-primary fw-bold":!e.form.display_self})},"выкл",2)])])]),t("div",Dxt,[e.form.display_self?(l(),a("button",{key:0,onClick:o[4]||(o[4]=(...n)=>e.openSelfConfigModal&&e.openSelfConfigModal(...n)),type:"button",class:"btn btn-outline-primary p-3 w-100 mb-2"},"Свои параметры отображения ")):u("",!0)]),t("div",zxt,[t("ul",Bxt,[t("li",Lxt,[t("button",{type:"button",class:C(["nav-link",{active:e.tab===0}]),onClick:o[5]||(o[5]=n=>e.tab=0),style:{"font-weight":"bold"},"aria-current":"page"},"Партнеры ",2)]),t("li",Rxt,[t("button",{type:"button",disabled:!0,class:C(["nav-link",{active:e.tab===1}]),style:{"font-weight":"bold"}},"Статистика продаж ",2)])])]),e.loading?u("",!0):(l(),a("div",Nxt,[T(mxt),T(KSt,{onCallback:e.callbackAddPartner},null,8,["onCallback"])]))])]),t("div",qxt,[t("div",Wxt,[t("div",Yxt,[Hxt,t("div",Qxt,[T(Oxt,{onSuccess:e.closeSelfConfigModal},null,8,["onSuccess"])])])])])],64))}}),Kxt=Object.freeze(Object.defineProperty({__proto__:null,default:pc},Symbol.toStringTag,{value:"Module"})),Jxt={props:["data","bot"],components:{Vue3JsonEditor:qs},data(){return{load:!1,custom_fields:null,fields:[{title:"Телефонный номер",field:"phone"},{title:"Ф.И.О.",field:"fio_from_telegram"},{title:"Почта",field:"email"},{title:"Дата рождения",field:"birthday"},{title:"Возраст",field:"age"},{title:"Страна",field:"country"},{title:"Адрес",field:"address"},{title:"Пол",field:"sex"},{title:"Идентификатор чата",field:"fio_from_telegram"}],hasConnect:!1,amoForm:{client_id:null,client_secret:null,auth_code:null,redirect_uri:null,subdomain:null,bot_id:null,fields:null}}},mounted(){this.data&&this.$nextTick(()=>{this.amoForm.client_id=this.data.client_id||null,this.amoForm.client_secret=this.data.client_secret||null,this.amoForm.auth_code=this.data.auth_code||null,this.amoForm.redirect_uri=this.data.redirect_uri||null,this.amoForm.subdomain=this.data.subdomain||null,this.amoForm.bot_id=this.data.bot_id||this.bot.id||null,this.amoForm.fields=this.data.fields||null})},methods:{loadAmoFields(){this.load=!0,this.custom_fields=null,this.$store.dispatch("loadAmoFields").then(s=>{this.custom_fields=s._embedded.custom_fields.contacts||null,this.$nextTick(()=>{this.load=!1}),this.$notify({title:"Работа с AMO",text:"Справочная информация успешно загружена",type:"success"})}).catch(s=>{this.$notify({title:"Работа с AMO",text:"Ошибка работы со справочной информацией",type:"error"})})},removeField(s){this.amoForm.fields&&this.amoForm.fields.splice(s,1)},addField(){this.amoForm.fields||(this.amoForm.fields=[]),this.amoForm.fields.push({key:null,field:null,enum:null})},syncAmo(){this.$store.dispatch("syncAmo").then(s=>{this.$notify({title:"Работа с AMO",text:"Данные CRM успешно сохранены",type:"success"})}).catch(s=>{this.$notify({title:"Работа с AMO",text:"Ошибка работы",type:"error"})})},submitAmo(){let s=new FormData;Object.keys(this.amoForm).forEach(e=>{const o=this.amoForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("saveAmoCRM",{amoForm:s}).then(e=>{this.$notify({title:"Работа с AMO",text:"Данные CRM успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с AMO",text:"Ошибка работы",type:"error"})})}}},Xxt=t("h3",null,"Настройка AMO",-1),Zxt=t("p",{class:"mb-2 alert alert-light"},[t("a",{target:"_blank",href:"https://www.amocrm.ru/developers/content/oauth/step-by-step"},"Документация для разработчика "),_(" по шагам")],-1),ejt={class:"form-floating mb-2"},tjt=t("label",{id:"client_id"}," ID интеграции ",-1),sjt={class:"form-floating mb-2"},ojt=t("label",{id:"client_secret"}," Секретный ключ клиента ",-1),ijt={class:"form-floating mb-2"},njt=t("label",{id:"auth_code"}," Полученный код авторизации ",-1),ljt={class:"form-floating mb-2"},ajt=t("label",{id:"subdomain2"}," Ваш поддомен в системе AMO CRM ",-1),rjt=["disabled"],djt={class:"card mb-2"},cjt={class:"card-body"},ujt={class:"form-floating mb-2"},mjt=["onUpdate:modelValue"],hjt=["id"],pjt={class:"form-floating mb-2"},_jt=["onUpdate:modelValue"],fjt=["value"],bjt=["id"],gjt={class:"form-floating mb-2"},yjt=["onUpdate:modelValue"],vjt=["id"],$jt=["onClick"],kjt=t("i",{class:"fa-solid fa-trash-can mr-2"},null,-1),wjt=t("nav",{class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},[t("button",{type:"submit",class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center align-items-center"},[t("i",{class:"fa-solid fa-cloud-arrow-down mr-2"}),_(" Сохранить настройку AMO ")])],-1),Fjt=t("hr",{class:"my-3 p-0"},null,-1),Cjt=t("i",{class:"fa-solid fa-rotate mr-2"},null,-1);function Pjt(s,e,o,n,i,r){const d=Qe("Vue3JsonEditor");return l(),a(v,null,[Xxt,t("form",{onSubmit:e[7]||(e[7]=W((...c)=>r.submitAmo&&r.submitAmo(...c),["prevent"]))},[Zxt,t("div",ejt,[f(t("input",{type:"text",class:"form-control",placeholder:"client_id","aria-label":"client_id","onUpdate:modelValue":e[0]||(e[0]=c=>i.amoForm.client_id=c),"aria-describedby":"client_id",required:""},null,512),[[k,i.amoForm.client_id]]),tjt]),t("div",sjt,[f(t("input",{type:"text",class:"form-control",placeholder:"client_secret","aria-label":"client_secret","onUpdate:modelValue":e[1]||(e[1]=c=>i.amoForm.client_secret=c),"aria-describedby":"client_secret",required:""},null,512),[[k,i.amoForm.client_secret]]),ojt]),t("div",ijt,[f(t("textarea",{class:"form-control font-12",style:{"min-height":"250px"},placeholder:"auth_code","aria-label":"auth_code","onUpdate:modelValue":e[2]||(e[2]=c=>i.amoForm.auth_code=c),"aria-describedby":"auth_code",required:""},`
                                    `,512),[[k,i.amoForm.auth_code]]),njt]),t("div",ljt,[f(t("input",{type:"text",class:"form-control",placeholder:"subdomain","aria-label":"subdomain","onUpdate:modelValue":e[3]||(e[3]=c=>i.amoForm.subdomain=c),"aria-describedby":"subdomain",required:""},null,512),[[k,i.amoForm.subdomain]]),ajt]),t("button",{type:"button",disabled:!i.amoForm.client_id||!i.amoForm.auth_code||!i.amoForm.client_secret||!i.amoForm.subdomain,onClick:e[4]||(e[4]=(...c)=>r.loadAmoFields&&r.loadAmoFields(...c)),class:"btn w-100 btn-outline-light text-primary p-3 mb-2"}," Загрузить справочную информацию ",8,rjt),!i.load&&i.custom_fields?(l(),M(d,{key:0,mode:"tree",modelValue:i.custom_fields,"onUpdate:modelValue":e[5]||(e[5]=c=>i.custom_fields=c),"show-btns":!1,expandedOnStart:!1},null,8,["modelValue"])):u("",!0),i.amoForm.fields?(l(!0),a(v,{key:1},O(i.amoForm.fields,(c,h)=>(l(),a("div",djt,[t("div",cjt,[t("div",ujt,[f(t("input",{type:"number",class:"form-control",placeholder:"Ключ","aria-label":"Ключ","onUpdate:modelValue":g=>i.amoForm.fields[h].key=g,"aria-describedby":"Ключ",required:""},null,8,mjt),[[k,i.amoForm.fields[h].key]]),t("label",{id:"field-key-"+h}," Ключевое значение из справочника ",8,hjt)]),t("div",pjt,[f(t("select",{class:"form-control font-12","onUpdate:modelValue":g=>i.amoForm.fields[h].field=g},[(l(!0),a(v,null,O(i.fields,g=>(l(),a("option",{value:g.field},p(g.title||"Ошибка"),9,fjt))),256))],8,_jt),[[Ve,i.amoForm.fields[h].field]]),t("label",{id:"field-field-"+h}," Поле из списка для связи ",8,bjt)]),t("div",gjt,[f(t("input",{type:"text",class:"form-control",placeholder:"Перечисление","aria-label":"Перечисление","onUpdate:modelValue":g=>i.amoForm.fields[h].enum=g,"aria-describedby":"Перечисление"},null,8,yjt),[[k,i.amoForm.fields[h].enum]]),t("label",{class:"form-label d-flex justify-content-between mt-0 mb-0",id:"field-enum-"+h}," Перечисление (enum) из справочника ",8,vjt)]),t("button",{type:"button",onClick:g=>r.removeField(h),class:"btn btn-link p-3 w-100"},[kjt,_(" Удалить связь полей (#"+p(h+1)+") ",1)],8,$jt)])]))),256)):u("",!0),t("button",{type:"button",onClick:e[6]||(e[6]=(...c)=>r.addField&&r.addField(...c)),class:"btn w-100 btn-outline-info p-3"}," Добавить связь полей "),wjt],32),Fjt,t("a",{href:"javascript:void(0)",onClick:e[8]||(e[8]=(...c)=>r.syncAmo&&r.syncAmo(...c)),class:"btn btn-outline-primary w-100 p-3"},[Cjt,_(" Синхронизировать ")])],64)}const Sjt=oe(Jxt,[["render",Pjt]]),xjt={class:"container my-3"},jjt={class:"row"},Ojt={class:"col-12"},Tjt={key:1,class:"alert alert-light"},Ujt=t("p",{class:"text-center"},"Загружаем данные...",-1),Ijt=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),Vjt=[Ujt,Ijt],Mjt={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.amo=this.bot.amo||null})}}},_c=Object.assign(Mjt,{__name:"Amo",setup(s){return(e,o)=>(l(),a("div",xjt,[t("div",jjt,[t("div",Ojt,[!e.load&&e.bot?(l(),M(Sjt,{key:0,bot:e.bot,data:e.bot.amo},null,8,["bot","data"])):(l(),a("div",Tjt,Vjt))])])]))}}),Ajt=Object.freeze(Object.defineProperty({__proto__:null,default:_c},Symbol.toStringTag,{value:"Module"})),Ejt=t("h3",null,"Настройка CDEK",-1),Djt={class:"col-md-6 col-12 mb-2"},zjt={class:"form-floating"},Bjt=t("label",{class:"form-label",id:"phone"}," Номер телефона отправителя ",-1),Ljt={class:"col-md-6 col-12 mb-2"},Rjt={class:"form-floating"},Njt=t("label",{class:"form-label",id:"account"}," Аккаунт ",-1),qjt={class:"col-md-6 col-12 mb-2"},Wjt={class:"form-floating"},Yjt=t("label",{class:"form-label",id:"secure_password"}," Пароль приложения ",-1),Hjt={class:"col-md-6 mb-2"},Qjt={class:"form-floating"},Gjt=["value"],Kjt=t("label",{for:"floatingSelect"},"Тариф перевозки товаров по умолчанию",-1),Jjt={class:"col-md-6 mb-2"},Xjt={class:"dropdown"},Zjt={class:"btn btn-outline-light text-primary dropdown-toggle w-100 p-3",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},eOt={key:0,class:"badge bg-primary"},tOt={class:"dropdown-menu w-100"},sOt=["onClick"],oOt={class:"col-md-6 mb-2"},iOt={class:"form-check form-switch"},nOt={class:"form-check-label",for:"is_active"},lOt={key:0,class:"fw-bold text-primary"},aOt={key:1,class:"fw-bold text-primary"},rOt={key:0,class:"col-md-12"},dOt=t("h6",null,"Настройка офиса отправления",-1),cOt={class:"col-md-12"},uOt=t("p",{class:"my-2"},"Размер посылки по умолчанию",-1),mOt={key:0},hOt=t("i",{class:"fa-solid fa-dolly text-primary"},null,-1),pOt={key:1},_Ot=t("nav",{class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},[t("button",{type:"submit",class:"btn btn-primary p-3 w-100"},[t("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),_(" Сохранить настройку ")])],-1),fOt={class:"modal fade",id:"dimension-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},bOt={class:"modal-dialog modal-fullscreen"},gOt={class:"modal-content"},yOt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Расчёт размеров"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vOt={class:"modal-body"},$Ot=t("div",{class:"divider my-3"},"Габариты",-1),kOt={class:"form-floating mb-3"},wOt=t("label",{for:"floatingInput"},"Ширина, см",-1),FOt={class:"form-floating mb-3"},COt=t("label",{for:"floatingInput"},"Высота, см",-1),POt={class:"form-floating mb-3"},SOt=t("label",{for:"floatingInput"},"Длина, см",-1),xOt={class:"form-floating mb-3"},jOt=t("label",{for:"floatingInput"},"Вес, кг",-1),OOt={class:"modal-footer"},TOt={"data-bs-dismiss":"modal",type:"button",class:"btn btn-primary w-100"},UOt={key:0},IOt=t("i",{class:"fa-solid fa-dolly"},null,-1),VOt={key:1},MOt={props:["bot"],data(){return{load:!1,dimensionModal:null,tariffs:[{code:136,title:"Посылка склад-склад (до 50 кг)"},{code:234,title:"Экономичная посылка склад-склад (до 50 кг)"},{code:368,title:"Посылка склад-постамат (до 30 кг)"},{code:378,title:"Экономичная посылка склад-постамат (до 50 кг)"},{code:2536,title:"Один офис (ИМ, до 30 кг)"}],services:[{code:"INSURANCE",title:"Страхование"},{code:"PART_DELIV",title:"Частичная доставка"},{code:"DANGER_CARGO",title:"Опасный груз"},{code:"SMS",title:"СМС-уведомление(+10р)"},{code:"ADULT_GOODS",title:"Товары 18+"}],cdekForm:{account:null,secure_password:null,is_active:!0,bot_id:null,phone:null,config:{tariff_code:null,region:null,city:null,office:null,services:[],base_dimensions:{length:0,width:0,height:0,weight:0}}}}},computed:{emptyDimensions(){return this.cdekForm.config.base_dimensions.width==0&&this.cdekForm.config.base_dimensions.height==0&&this.cdekForm.config.base_dimensions.length==0&&this.cdekForm.config.base_dimensions.weight==0}},mounted(){this.dimensionModal=new bootstrap.Modal(document.getElementById("dimension-modal"),{}),this.bot.cdek&&this.$nextTick(()=>{var s,e;this.load=!1,this.cdekForm.account=this.bot.cdek.account||null,this.cdekForm.secure_password=this.bot.cdek.secure_password||null,this.cdekForm.is_active=this.bot.cdek.is_active||!0,this.cdekForm.bot_id=this.bot.cdek.bot_id||this.bot.id||null,this.cdekForm.phone=((s=this.bot.company)==null?void 0:s.phones[0])||null,(e=this.bot.cdek)!=null&&e.config&&(this.cdekForm.config.tariff_code=this.bot.cdek.config.tariff_code||null,this.cdekForm.config.region=this.bot.cdek.config.region||null,this.cdekForm.config.city=this.bot.cdek.config.city||null,this.cdekForm.config.office=this.bot.cdek.config.office||null,this.bot.cdek.config.base_dimensions&&(this.cdekForm.config.base_dimensions.length=this.bot.cdek.config.base_dimensions.length||0,this.cdekForm.config.base_dimensions.width=this.bot.cdek.config.base_dimensions.width||0,this.cdekForm.config.base_dimensions.height=this.bot.cdek.config.base_dimensions.height||0,this.cdekForm.config.base_dimensions.weight=this.bot.cdek.config.base_dimensions.weight||0)),this.load=!0})},methods:{openDimensionModal(){this.dimensionModal.show()},selectOffice(s){this.cdekForm.config.region=s.region,this.cdekForm.config.city=s.city,this.cdekForm.config.office=s.office},toggleService(s){let e=this.services[s],o=this.cdekForm.config.services.findIndex(n=>n===e.code);o===-1?this.cdekForm.config.services.push(e.code):this.cdekForm.config.services.splice(o,1)},submitCdek(){let s=new FormData;Object.keys(this.cdekForm).forEach(e=>{const o=this.cdekForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("storeCdek",{cdekForm:s}).then(e=>{this.$notify({title:"Работа с CDEK",text:"Данные успешно сохранены",type:"success"}),window.location.reload()}).catch(e=>{this.$notify({title:"Работа с CDEK",text:"Ошибка работы",type:"error"})})}}},AOt=Object.assign(MOt,{__name:"CdekForm",setup(s){return(e,o)=>(l(),a(v,null,[Ejt,t("form",{onSubmit:o[6]||(o[6]=W((...n)=>e.submitCdek&&e.submitCdek(...n),["prevent"])),class:"row py-3"},[t("div",Djt,[t("div",zjt,[f(t("input",{type:"text",class:"form-control",placeholder:"phone","aria-label":"phone","onUpdate:modelValue":o[0]||(o[0]=n=>e.cdekForm.phone=n),required:"","aria-describedby":"phone"},null,512),[[k,e.cdekForm.phone]]),Bjt])]),t("div",Ljt,[t("div",Rjt,[f(t("input",{type:"text",class:"form-control",placeholder:"account","aria-label":"account","onUpdate:modelValue":o[1]||(o[1]=n=>e.cdekForm.account=n),required:"","aria-describedby":"account"},null,512),[[k,e.cdekForm.account]]),Njt])]),t("div",qjt,[t("div",Wjt,[f(t("input",{type:"text",class:"form-control",placeholder:"secure_password","aria-label":"secure_password","onUpdate:modelValue":o[2]||(o[2]=n=>e.cdekForm.secure_password=n),required:"","aria-describedby":"secure_password"},null,512),[[k,e.cdekForm.secure_password]]),Yjt])]),t("div",Hjt,[t("div",Qjt,[f(t("select",{"onUpdate:modelValue":o[3]||(o[3]=n=>e.cdekForm.config.tariff_code=n),class:"form-select",id:"floatingSelect","aria-label":"Floating label select example"},[(l(!0),a(v,null,O(e.tariffs,n=>(l(),a("option",{value:n.code},p(n.title||"-"),9,Gjt))),256))],512),[[Ve,e.cdekForm.config.tariff_code]]),Kjt])]),t("div",Jjt,[t("div",Xjt,[t("button",Zjt,[_(" Выбрать доп. сервисы "),e.cdekForm.config.services.length>0?(l(),a("span",eOt,p(e.cdekForm.config.services.length),1)):u("",!0)]),t("ul",tOt,[(l(!0),a(v,null,O(e.services,(n,i)=>(l(),a("li",null,[t("a",{onClick:r=>e.toggleService(i),class:C([{"bg-primary":e.cdekForm.config.services.indexOf(n.code)!==-1},"dropdown-item"]),href:"javascript:void(0)"},p(n.title||"-"),11,sOt)]))),256))])])]),t("div",oOt,[t("div",iOt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[4]||(o[4]=n=>e.cdekForm.is_active=n),type:"checkbox",role:"switch",id:"is_active"},null,512),[[z,e.cdekForm.is_active]]),t("label",nOt,[_("Статус "),e.cdekForm.is_active?(l(),a("span",lOt,"вкл")):(l(),a("span",aOt,"выкл"))])])]),e.load?(l(),a("div",rOt,[dOt,T(Vi,{config:e.cdekForm.config,onCallback:e.selectOffice},null,8,["config","onCallback"])])):u("",!0),t("div",cOt,[uOt,t("button",{type:"button",onClick:o[5]||(o[5]=(...n)=>e.openDimensionModal&&e.openDimensionModal(...n)),class:"btn btn-light w-100 p-3"},[e.emptyDimensions?(l(),a("span",mOt,[hOt,_(" Укажите размер")])):(l(),a("span",pOt,p(e.cdekForm.config.base_dimensions.width||0)+"x"+p(e.cdekForm.config.base_dimensions.height||0)+"x"+p(e.cdekForm.config.base_dimensions.length||0)+" см, до "+p(e.cdekForm.config.base_dimensions.weight||0)+"кг ",1))])]),_Ot],32),t("div",fOt,[t("div",bOt,[t("form",gOt,[yOt,t("div",vOt,[$Ot,t("div",kOt,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[7]||(o[7]=n=>e.cdekForm.config.base_dimensions.width=n),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.cdekForm.config.base_dimensions.width]]),wOt]),t("div",FOt,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[8]||(o[8]=n=>e.cdekForm.config.base_dimensions.height=n),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.cdekForm.config.base_dimensions.height]]),COt]),t("div",POt,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":o[9]||(o[9]=n=>e.cdekForm.config.base_dimensions.length=n),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.cdekForm.config.base_dimensions.length]]),SOt]),t("div",xOt,[f(t("input",{type:"number",min:"0",step:"0.1","onUpdate:modelValue":o[10]||(o[10]=n=>e.cdekForm.config.base_dimensions.weight=n),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.cdekForm.config.base_dimensions.weight]]),jOt])]),t("div",OOt,[t("button",TOt,[e.emptyDimensions?(l(),a("span",UOt,[IOt,_(" Добавить")])):(l(),a("span",VOt,p(e.cdekForm.config.base_dimensions.width||0)+"x"+p(e.cdekForm.config.base_dimensions.height||0)+"x"+p(e.cdekForm.config.base_dimensions.length||0)+" см, до "+p(e.cdekForm.config.base_dimensions.weight||0)+"кг ",1))])])])])])],64))}}),EOt=t("h3",null,"Расчёт цены CDEK",-1),DOt=t("h6",null,"Офис отправления",-1),zOt=t("h6",null,"Офис получения",-1),BOt={class:"form-check form-switch mt-3 mb-2"},LOt=t("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Режим интернет-магазина",-1),ROt=t("h6",{class:"my-2"},"Ваши посылки",-1),NOt={class:"list-group my-2"},qOt={class:"list-group-item d-flex justify-content-between"},WOt=["onClick"],YOt=t("i",{class:"fa-regular fa-trash-can"},null,-1),HOt=[YOt],QOt={key:1,class:"alert alert-light"},GOt={key:2,class:"alert alert-light"},KOt={class:"d-flex justify-content-between"},JOt={class:"fw-bold"},XOt={class:"badge bg-primary"},ZOt=t("i",{class:"fa-regular fa-trash-can"},null,-1),e8t=[ZOt],t8t={class:"mb-0"},s8t={class:"fw-bold text-primary"},o8t={class:"fw-bold text-primary"},i8t={class:"mb-0"},n8t={class:"fw-bold text-primary"},l8t={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},a8t=["disabled"],r8t=["disabled"],d8t={class:"modal fade",id:"choose-tariff-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},c8t={class:"modal-dialog modal-fullscreen"},u8t={class:"modal-content"},m8t=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор тарифа"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),h8t={key:0,class:"modal-body"},p8t={class:"list-group list-group-numbered"},_8t={class:"list-group-item d-flex justify-content-between align-items-start"},f8t={class:"ms-2 me-auto"},b8t={class:"fw-bold"},g8t={class:"mb-0"},y8t={class:"fw-bold text-primary"},v8t={class:"fw-bold text-primary"},$8t={class:"mb-0"},k8t={class:"fw-bold text-primary"},w8t=["onClick"],F8t={class:"badge text-bg-primary rounded-pill"},C8t={key:1,class:"modal-body"},P8t={class:"modal fade",id:"make-order-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},S8t={class:"modal-dialog modal-fullscreen"},x8t=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Оформление заказа"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j8t={class:"modal-body"},O8t=t("div",{class:"divider my-3"},"Данные отправителя",-1),T8t={class:"form-floating mb-2"},U8t=t("label",{for:"floatingInput"},"Ф.И.О. отправителя",-1),I8t={class:"input-group mb-2"},V8t={class:"form-floating"},M8t=["onUpdate:modelValue"],A8t=t("label",{for:"floatingInput"},"+7(000)000-00-00",-1),E8t=["onClick"],D8t=t("i",{class:"fas fa-trash"},null,-1),z8t=[D8t],B8t=t("div",{class:"divider my-3"},"Данные получателя",-1),L8t={class:"form-floating mb-2"},R8t=t("label",{for:"floatingInput"},"Ф.И.О. получателя",-1),N8t={class:"input-group mb-2"},q8t={class:"form-floating"},W8t=["onUpdate:modelValue"],Y8t=t("label",{for:"floatingInput"},"+7(000)000-00-00",-1),H8t=["onClick"],Q8t=t("i",{class:"fas fa-trash"},null,-1),G8t=[Q8t],K8t={class:"form-floating my-2"},J8t=t("label",{for:"floatingInput"},"Адрес получателя",-1),X8t=t("div",{class:"divider my-3"},"Комментарий к заказу",-1),Z8t={class:"form-floating"},eTt=t("label",{for:"floatingTextarea2"},"Комментарий к заказу",-1),tTt=t("div",{class:"modal-footer"},[t("button",{class:"btn btn-primary w-100 p-3"},"Зарегистрировать заказ")],-1),sTt={data(){return{tariffs:[],chooseTariffModal:null,makeOrderModal:null,calcTariffForm:{is_shop_mode:!0,comment:null,tariff:null,from:{region:null,city:null,office:null,address:null},to:{region:null,city:null,office:null,address:null},packages:[],sender_name:null,sender_phones:[],recipient_name:null,recipient_phones:[""]}}},watch:{"calcTariffForm.packages":{handler:function(s){this.calcTariffForm.tariff=null},deep:!0}},computed:{canCalcTariff(){return this.calcTariffForm.packages.length>0&&this.calcTariffForm.from.region!=null&&this.calcTariffForm.from.city!=null&&this.calcTariffForm.to.region!=null&&this.calcTariffForm.to.city!=null}},mounted(){if(this.chooseTariffModal=new bootstrap.Modal(document.getElementById("choose-tariff-modal"),{}),this.makeOrderModal=new bootstrap.Modal(document.getElementById("make-order-modal"),{}),localStorage.getItem("cashman_calc-tariff-form-from")!=null){let s=JSON.parse(localStorage.getItem("cashman_calc-tariff-form-from"));this.calcTariffForm.to.region=(s==null?void 0:s.region)||null,this.calcTariffForm.to.city=(s==null?void 0:s.city)||null,this.calcTariffForm.to.office=(s==null?void 0:s.office)||null}if(localStorage.getItem("cashman_calc-tariff-form-to")!=null){let s=JSON.parse(localStorage.getItem("cashman_calc-tariff-form-to"));this.calcTariffForm.to.region=(s==null?void 0:s.region)||null,this.calcTariffForm.to.city=(s==null?void 0:s.city)||null,this.calcTariffForm.to.office=(s==null?void 0:s.office)||null}},methods:{addSenderPhone(){this.calcTariffForm.sender_phones.push("")},addRecipientPhone(){this.calcTariffForm.recipient_phones.push("")},removeRecipientPhone(s){this.calcTariffForm.recipient_phones.splice(s,1)},removeSenderPhone(s){this.calcTariffForm.sender_phones.splice(s,1)},openOrderModal(){this.makeOrderModal.toggle()},selectTariff(s){this.calcTariffForm.tariff=s,this.chooseTariffModal.hide()},selectOffice(s,e){let o=e===0?"from":"to";this.calcTariffForm[o].region=s.region,this.calcTariffForm[o].city=s.city,this.calcTariffForm[o].office=s.office,this.calcTariffForm.tariff=null},selectSize(s){this.calcTariffForm.packages.push({width:s.width||0,height:s.height||0,length:s.length||0,weight:s.weight||0,items:s.items||[]})},removeItem(s){this.calcTariffForm.packages.splice(s,1)},submitCdek(){let s=new FormData;Object.keys(this.calcTariffForm).forEach(e=>{const o=this.calcTariffForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("storeCdekOrder",{cdekForm:s}).then(e=>{localStorage.setItem("cashman_calc-tariff-form-tariff",JSON.stringify(this.calcTariffForm.tariff)),localStorage.setItem("cashman_calc-tariff-form-from",JSON.stringify(this.calcTariffForm.from)),localStorage.setItem("cashman_calc-tariff-form-to",JSON.stringify(this.calcTariffForm.to)),this.$notify({title:"Работа с CDEK",text:"Данные успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с CDEK",text:"Ошибка работы",type:"error"})})},submitTariffCalcCdek(){this.chooseTariffModal.show(),this.tariffs=[];let s=new FormData;Object.keys(this.calcTariffForm).forEach(e=>{const o=this.calcTariffForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("calcCdekTariff",{cdekForm:s}).then(e=>{this.tariffs=e,this.$notify({title:"Работа с CDEK",text:"Данные успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с CDEK",text:"Ошибка работы",type:"error"})})}}},oTt=Object.assign(sTt,{__name:"CdekAdminCalcForm",setup(s){return(e,o)=>{const n=ie("mask");return l(),a(v,null,[EOt,DOt,T(Vi,{onCallback:o[0]||(o[0]=i=>e.selectOffice(i,0))}),zOt,T(Vi,{onCallback:o[1]||(o[1]=i=>e.selectOffice(i,1))}),t("div",BOt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=i=>e.calcTariffForm.is_shop_mode=i),type:"checkbox",role:"switch",id:"flexSwitchCheckDefault"},null,512),[[z,e.calcTariffForm.is_shop_mode]]),LOt]),T(ixe,{"shop-mode":e.calcTariffForm.is_shop_mode,onCallback:e.selectSize},null,8,["shop-mode","onCallback"]),e.calcTariffForm.packages.length>0?(l(),a(v,{key:0},[ROt,t("ul",NOt,[(l(!0),a(v,null,O(e.calcTariffForm.packages,(i,r)=>(l(),a("li",qOt,[t("span",null,p(i.width||0)+"x"+p(i.height||0)+"x"+p(i.length||0)+" см, до "+p(i.weight||0)+"кг ",1),t("span",{onClick:d=>e.removeItem(r),class:"text-danger"},HOt,8,WOt)]))),256))])],64)):u("",!0),e.calcTariffForm.tariff?(l(),a("div",GOt,[t("div",KOt,[t("p",JOt,[_(p(e.calcTariffForm.tariff.tariff_name)+" ",1),t("span",XOt,"#"+p(e.calcTariffForm.tariff.tariff_code),1)]),t("span",{onClick:o[3]||(o[3]=i=>e.calcTariffForm.tariff=null),class:"text-danger"},e8t)]),t("p",t8t,[_("Доставка от "),t("span",s8t,p(e.calcTariffForm.tariff.period_min),1),_(" до "),t("span",o8t,p(e.calcTariffForm.tariff.period_max),1),_(" рабочих дней")]),t("p",i8t,[_("Стоимость доставки "),t("span",n8t,p(e.calcTariffForm.tariff.delivery_sum),1),_(" руб.")])])):(l(),a("div",QOt," Тариф еще не выбран! ")),t("nav",l8t,[e.calcTariffForm.tariff==null?(l(),a("button",{key:0,disabled:!e.canCalcTariff,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:o[4]||(o[4]=(...i)=>e.submitTariffCalcCdek&&e.submitTariffCalcCdek(...i)),class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center"}," Рассчитать тариф ",8,a8t)):u("",!0),e.calcTariffForm.tariff!=null?(l(),a("button",{key:1,disabled:!e.canCalcTariff,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},onClick:o[5]||(o[5]=(...i)=>e.openOrderModal&&e.openOrderModal(...i)),class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-center"}," Оформить заказ ",8,r8t)):u("",!0)]),t("div",d8t,[t("div",c8t,[t("div",u8t,[m8t,e.tariffs.length>0?(l(),a("div",h8t,[t("ol",p8t,[(l(!0),a(v,null,O(e.tariffs,i=>(l(),a("li",_8t,[t("div",f8t,[t("div",b8t,p(i.tariff_name),1),t("p",g8t,[_("Доставка от "),t("span",y8t,p(i.period_min),1),_(" до "),t("span",v8t,p(i.period_max),1),_(" рабочих дней")]),t("p",$8t,[_("Стоимость доставки "),t("span",k8t,p(i.delivery_sum),1),_(" руб.")]),t("button",{type:"button",class:"btn btn-primary w-100 mt-3",onClick:r=>e.selectTariff(i)},"Выбрать тариф ",8,w8t)]),t("span",F8t,"#"+p(i.tariff_code),1)]))),256))])])):(l(),a("div",C8t,[T(Ns)]))])])]),t("div",P8t,[t("div",S8t,[t("form",{class:"modal-content",onSubmit:o[12]||(o[12]=W((...i)=>e.submitCdek&&e.submitCdek(...i),["prevent"]))},[x8t,t("div",j8t,[O8t,t("div",T8t,[f(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=i=>e.calcTariffForm.sender_name=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.calcTariffForm.sender_name]]),U8t]),(l(!0),a(v,null,O(e.calcTariffForm.sender_phones,(i,r)=>(l(),a("div",I8t,[t("div",V8t,[f(t("input",{type:"text","onUpdate:modelValue":d=>e.calcTariffForm.sender_phones[r]=d,class:"form-control",id:"floatingInput",required:"",placeholder:"name@example.com"},null,8,M8t),[[n,"+7(###)###-##-##"],[k,e.calcTariffForm.sender_phones[r]]]),A8t]),t("span",{onClick:d=>e.removeSenderPhone(r),class:"input-group-text",id:"basic-addon1"},z8t,8,E8t)]))),256)),t("a",{onClick:o[7]||(o[7]=(...i)=>e.addSenderPhone&&e.addSenderPhone(...i)),href:"javascript:void(0)"},"+ Ещё номер телефона"),B8t,t("div",L8t,[f(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=i=>e.calcTariffForm.recipient_name=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.calcTariffForm.recipient_name]]),R8t]),(l(!0),a(v,null,O(e.calcTariffForm.recipient_phones,(i,r)=>(l(),a("div",N8t,[t("div",q8t,[f(t("input",{type:"text","onUpdate:modelValue":d=>e.calcTariffForm.recipient_phones[r]=d,class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,8,W8t),[[n,"+7(###)###-##-##"],[k,e.calcTariffForm.recipient_phones[r]]]),Y8t]),e.calcTariffForm.recipient_phones.length>1?(l(),a("span",{key:0,onClick:d=>e.removeRecipientPhone(r),class:"input-group-text",id:"basic-addon1"},G8t,8,H8t)):u("",!0)]))),256)),t("a",{onClick:o[9]||(o[9]=(...i)=>e.addRecipientPhone&&e.addRecipientPhone(...i)),href:"javascript:void(0)"},"+ Ещё номер телефона"),t("div",K8t,[f(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=i=>e.calcTariffForm.to.address=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,e.calcTariffForm.to.address]]),J8t]),X8t,t("div",Z8t,[f(t("textarea",{"onUpdate:modelValue":o[11]||(o[11]=i=>e.calcTariffForm.comment=i),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"}},null,512),[[k,e.calcTariffForm.comment]]),eTt])]),tTt],32)])])],64)}}}),iTt={class:"container my-3"},nTt={class:"row"},lTt={class:"col-12"},aTt={class:"nav justify-content-center nav-tabs my-2"},rTt={class:"nav-item"},dTt={class:"nav-item"},cTt={key:0,class:"col-12"},uTt={key:1,class:"alert alert-light"},mTt=t("p",{class:"text-center"},"Загружаем данные...",-1),hTt=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),pTt=[mTt,hTt],_Tt={key:1,class:"col-12"},fTt={data(){return{tab:0,load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.cdek=this.bot.cdek||null})}}},fc=Object.assign(fTt,{__name:"Cdek",setup(s){return(e,o)=>(l(),a("div",iTt,[t("div",nTt,[t("div",lTt,[t("ul",aTt,[t("li",rTt,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[0]||(o[0]=n=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Настройка",2)]),t("li",dTt,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[1]||(o[1]=n=>e.tab=1),href:"javascript:void(0)"},"Калькулятор",2)])])]),e.tab===0?(l(),a("div",cTt,[!e.load&&e.bot?(l(),M(AOt,{key:0,bot:e.bot},null,8,["bot"])):(l(),a("div",uTt,pTt))])):u("",!0),e.tab===1?(l(),a("div",_Tt,[T(oTt)])):u("",!0)])]))}}),bTt=Object.freeze(Object.defineProperty({__proto__:null,default:fc},Symbol.toStringTag,{value:"Module"})),gTt={key:0,class:"mb-2"},yTt={class:"badge bg-success text-white"},vTt=t("span",{class:"ml-1 mr-1"},[t("i",{class:"fa-solid fa-arrow-right"})],-1),$Tt={key:0,class:"badge bg-primary text-white"},kTt={key:1},wTt={class:"form-floating mb-2"},FTt=["id"],CTt=["for"],PTt={class:"mb-2"},STt={class:"form-check"},xTt=t("label",{class:"form-check-label font-12",for:"need-empty-dialog"}," Диалог без ожидания ответа ",-1),jTt={key:1,class:"form-floating mb-2"},OTt=["id"],TTt=["for"],UTt={key:2,class:"form-floating mb-2"},ITt=["id"],VTt=["for"],MTt={key:3,class:"mb-2"},ATt={class:"form-floating mb-2"},ETt=["value"],DTt=["for"],zTt={class:"form-floating"},BTt=["id"],LTt=["for"],RTt={key:4,class:"form-floating mb-2"},NTt=["id"],qTt=t("option",{value:null,selected:""},"Не указан",-1),WTt=["value"],YTt=["for"],HTt={class:"mb-2"},QTt={class:"d-flex justify-content-between"},GTt=["for"],KTt=t("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),JTt=[KTt],XTt=["id"],ZTt={class:"mb-2"},eUt={class:"form-check"},tUt=t("label",{class:"form-check-label font-12",for:"need-dialog-image"}," В диалоге нужно изображение ",-1),sUt={class:"form-check"},oUt=t("label",{class:"form-check-label font-12",for:"need-dialog-menu-inline"}," В диалоге нужно меню к тексту ",-1),iUt={class:"form-check"},nUt=t("label",{class:"form-check-label font-12",for:"need-dialog-menu-reply"}," В диалоге нужно нижнее меню ",-1),lUt={key:5,class:"mb-2"},aUt=t("h6",null,"Фотографии к диалогу",-1),rUt={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},dUt={for:"location-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},cUt=t("span",null,"+",-1),uUt={class:"mb-2 img-preview",style:{"margin-right":"10px"}},mUt={class:"remove"},hUt=["onClick"],pUt={class:"mb-2 img-preview",style:{"margin-right":"10px"}},_Ut={class:"remove"},fUt=["onClick"],bUt={key:6,class:"mb-2"},gUt=t("h6",null,"Кнопки к вопросу",-1),yUt={key:7,class:"mb-2"},vUt=t("h6",null,"Кнопки нижнего меню к вопросу",-1),$Ut={class:"mb-2"},kUt=t("label",{class:"form-check-label font-12",for:"need-empty-dialog"}," Сохранить в переменную ",-1),wUt=t("option",{selected:""},"Не выбрано",-1),FUt=["value"],CUt={class:"form-check mb-2"},PUt=t("label",{class:"form-check-label font-12",for:"need-set-flags"}," Установить флаги в соответствующее значение ",-1),SUt={key:8,class:"mb-2"},xUt=t("h6",{class:"my-3"},"Выберите необходимые флаги",-1),jUt=["onClick"],OUt={style:{"z-index":"100",bottom:"10px"},type:"submit",class:"btn btn-primary w-100 p-3 my-3 position-sticky"},TUt={key:0},UUt={key:1},IUt={key:9,class:"divider divider-small my-3 bg-highlight"},VUt=t("i",{class:"fa-solid fa-trash-can mr-1"},null,-1),MUt={props:["item","bot"],data(){return{need_images:!1,need_inline_keyboard:!1,need_reply_keyboard:!1,need_set_flags:!1,commands:[],flags_variants:[{title:"Является VIP",key:"is_vip",value:null},{title:"Является Админом",key:"is_admin",value:null},{title:"За работой",key:"is_work",value:null},{title:"Является менеджером",key:"is_manager",value:null}],store_variants:[{title:"Имя",key:"name"},{title:"Почта",key:"email"},{title:"Возраст",key:"age"},{title:"Город",key:"city"},{title:"Страна",key:"country"},{title:"Адрес",key:"address"},{title:"Телефон",key:"phone"},{title:"День рождение",key:"birthday"}],expressions:[{expression:null,description:"Нет проверки"},{expression:"/([a-z0-9]+)/i",description:"Проверка набора из латинских букв и цифр"},{expression:"/([а-яё0-9]+)/iu",description:"Проверка на кириллицу и цифры"},{expression:"/(?P<digit>\\d+)/",description:"Проверка на число"},{expression:"/^([a-z0-9_-]+.)*[a-z0-9_-]+@[a-z0-9_-]+(.[a-z0-9_-]+)*.[a-z]{2,6}$/",description:"Проверка Email"},{expression:"/^((8|+7)[- ]?)?((?d{3})?[- ]?)?[d- ]{7,10}$/",description:"Проверка номера телефона"},{expression:"/^(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.](19|20)dd$/",description:"Проверка даты по формату"},{expression:"/^[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/",description:"Проверка даты по формату YYYY-MM-DD"},{expression:"/^(https?://)?([da-z.-]+).([a-z.]{2,6})([/w .-]*)*/?$/",description:"Проверка доменного имени"}],commandForm:{id:null,slug:null,pre_text:null,post_text:null,error_text:null,bot_id:null,input_pattern:null,inline_keyboard_id:null,reply_keyboard_id:null,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,reply_keyboard:null,is_empty:!1,result_flags:[],store_to:null},photos:[]}},computed:{...G(["getDialogs"])},mounted(){window.addEventListener("select-telegram-channel-id",s=>{this.commandForm[s.detail.param]=s.detail.channel}),this.item&&this.$nextTick(()=>{this.commandForm={id:this.item.id||null,slug:this.item.slug||null,pre_text:this.item.pre_text||null,post_text:this.item.post_text||null,error_text:this.item.error_text||null,is_empty:this.item.is_empty||!1,input_pattern:this.item.input_pattern||null,inline_keyboard_id:this.item.inline_keyboard_id||null,reply_keyboard_id:this.item.reply_keyboard_id||null,images:this.item.images||[],next_bot_dialog_command_id:this.item.next_bot_dialog_command_id||null,bot_dialog_group_id:this.item.bot_dialog_group_id||null,result_channel:this.item.result_channel||null,inline_keyboard:this.item.inline_keyboard||null,reply_keyboard:this.item.reply_keyboard||null,result_flags:this.item.result_flags||[],store_to:this.item.store_to||null},this.bot&&(this.commandForm.bot_id=this.bot.id||null),this.commandForm.inline_keyboard_id!=null&&(this.need_inline_keyboard=!0),this.commandForm.reply_keyboard_id!=null&&(this.need_reply_keyboard=!0),this.commandForm.images.length>0&&(this.need_images=!0),this.commandForm.result_flags.length>0&&(this.need_set_flags=!0)}),this.bot&&this.$nextTick(()=>{this.commandForm.bot_id=this.bot.id}),this.loadGroups()},methods:{unlinkCommand(){this.loading=!0,this.$store.dispatch("unlinkDialogCommand",{dataObject:{dialogCommandId:this.item.id}}).then(s=>{this.loading=!1,this.$notify({title:"Команды",text:"Диалоговая команда успешно продублирована!",type:"success"}),this.$emit("callback")}).catch(s=>{this.loading=!1})},removeCommand(){this.loading=!0,this.$store.dispatch("removeDialogCommand",{dataObject:{dialogCommandId:this.item.id}}).then(s=>{this.loading=!1,this.$notify({title:"Команды",text:"Диалоговая команда успешно удалена!",type:"success"}),this.$emit("callback")}).catch(s=>{this.loading=!1})},loadGroups(s=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{simple:!0},page:s,size:100}).then(e=>{this.loading=!1,this.commands=this.getDialogs}).catch(()=>{this.loading=!1})},requestChannelId(s){this.$botPages.telegramChannelHelper(s)},submit(){this.loading=!0;let s=new FormData;if(Object.keys(this.commandForm).forEach(e=>{const o=this.commandForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.photos){for(let e=0;e<this.photos.length;e++)s.append("files[]",this.photos[e]);s.delete("photos")}this.$store.dispatch(this.commandForm.id?"updateDialogCommand":"createDialogCommand",{dialogCommandForm:s}).then(e=>{this.loading=!1,this.$notify({title:"Команды",text:"Успешная обработка диалоговой команды!",type:"success"}),this.commandForm.id==null&&(this.commandForm={id:null,slug:null,pre_text:null,post_text:null,error_text:null,input_pattern:null,inline_keyboard_id:null,is_empty:!1,images:null,next_bot_dialog_command_id:null,bot_dialog_group_id:null,result_channel:null,inline_keyboard:null,result_flags:[],store_to:null},this.photos=[]),this.$emit("callback")}).catch(e=>{this.loading=!1})},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s,e){this[s].splice(e,1)},onChangePhotos(s){const e=s.target.files;for(let o=0;o<e.length;o++)this.photos.push(e[o])},saveInlineKeyboard(s){this.commandForm.inline_keyboard=s},saveReplyKeyboard(s){this.commandForm.reply_keyboard=s},addTextTo(s={param:null,text:null}){this.commandForm[s.param]=s.text},selectFlag(s){this.commandForm.result_flags||(this.commandForm.result_flags=[]);let e=this.commandForm.result_flags.indexOf(s.key);e===-1?this.commandForm.result_flags.push(s.key):this.commandForm.result_flags.splice(e,1)}}},bc=Object.assign(MUt,{__name:"BotDialogCommandForm",setup(s){return(e,o)=>{const n=ie("lazy");return l(),a("form",{onSubmit:o[18]||(o[18]=W((...i)=>e.submit&&e.submit(...i),["prevent"]))},[e.commandForm.id?(l(),a("p",gTt,[t("span",yTt,"#"+p(e.commandForm.id),1),vTt,e.commandForm.next_bot_dialog_command_id?(l(),a("span",$Tt,[_("#"+p(e.commandForm.next_bot_dialog_command_id||"-")+" ",1),t("i",{class:"ml-2 fa-solid fa-link-slash",onClick:o[0]||(o[0]=(...i)=>e.unlinkCommand&&e.unlinkCommand(...i))})])):(l(),a("span",kTt,"не связан"))])):u("",!0),t("div",wTt,[f(t("textarea",{style:{"min-height":"200px"},class:"form-control font-12",id:"commandForm-pre-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[1]||(o[1]=i=>e.commandForm.pre_text=i),required:""},`

            `,8,FTt),[[k,e.commandForm.pre_text]]),t("label",{for:"commandForm-pre-text-"+e.commandForm.id,class:"font-12"},"Текст диалога",8,CTt)]),t("div",PTt,[t("div",STt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=i=>e.commandForm.is_empty=i),id:"need-empty-dialog",checked:""},null,512),[[z,e.commandForm.is_empty]]),xTt])]),e.commandForm.is_empty?u("",!0):(l(),a("div",jTt,[f(t("textarea",{style:{"min-height":"200px"},class:"form-control font-12",id:"commandForm-post-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[3]||(o[3]=i=>e.commandForm.post_text=i),required:""},`
            `,8,OTt),[[k,e.commandForm.post_text]]),t("label",{for:"commandForm-post-text-"+e.commandForm.id,class:"font-12"},"Текст после успешного завершения диалога",8,TTt)])),e.commandForm.is_empty?u("",!0):(l(),a("div",UTt,[f(t("textarea",{style:{"min-height":"200px"},class:"form-control font-12",id:"commandForm-error-text-"+e.commandForm.id,placeholder:"Начни с малого...","onUpdate:modelValue":o[4]||(o[4]=i=>e.commandForm.error_text=i),required:""},`
            `,8,ITt),[[k,e.commandForm.error_text]]),t("label",{for:"commandForm-error-text-"+e.commandForm.id,class:"font-12"},"Текст на случай ошибки корректности данных",8,VTt)])),e.commandForm.is_empty?u("",!0):(l(),a("div",MTt,[t("div",ATt,[f(t("select",{id:"next-dialog-select",class:"form-select form-control font-12","onUpdate:modelValue":o[5]||(o[5]=i=>e.commandForm.input_pattern=i)},[(l(!0),a(v,null,O(e.expressions,i=>(l(),a("option",{value:i.expression},p(i.description||"-"),9,ETt))),256))],512),[[Ve,e.commandForm.input_pattern]]),t("label",{class:"form-label font-12",for:"commandForm-result-channel-"+e.commandForm.id},"Регулярное выражение для автоматической проверки данных ",8,DTt)]),t("div",zTt,[f(t("input",{id:"custom-regular-expression"+e.commandForm.id,type:"text",class:"form-control",placeholder:"Регулярное выражение","aria-label":"Регулярное выражение","onUpdate:modelValue":o[6]||(o[6]=i=>e.commandForm.input_pattern=i),maxlength:"255","aria-describedby":"commandForm-input-pattern"},null,8,BTt),[[k,e.commandForm.input_pattern]]),t("label",{for:"custom-regular-expression"+e.commandForm.id,class:"font-12"},"или впишите своё",8,LTt)])])),e.commandForm.is_empty?u("",!0):(l(),a("div",RTt,[t("select",{id:"next-dialog-select"+e.commandForm.id,class:"form-select form-control font-12","aria-label":"Default select example"},[qTt,(l(!0),a(v,null,O(e.commands,(i,r)=>(l(),a("option",{value:i.id},"#"+p(i.id)+" "+p(i.pre_text||"Без текста"),9,WTt))),256))],8,NTt),t("label",{for:"next-dialog-select"+e.commandForm.id,class:"font-12"},"Следующий диалог",8,YTt)])),t("div",HTt,[t("div",QTt,[t("label",{class:"form-label",for:"commandForm-result-channel-"+e.commandForm.id},"Канал для отправки данных ",8,GTt),t("span",{onClick:o[7]||(o[7]=i=>e.requestChannelId("result_channel"))},JTt)]),f(t("input",{type:"number",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[8]||(o[8]=i=>e.commandForm.result_channel=i),id:"commandForm-result-channel-"+e.commandForm.id,"aria-describedby":"bot-order-channel"},null,8,XTt),[[k,e.commandForm.result_channel]])]),t("div",ZTt,[t("div",eUt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[9]||(o[9]=i=>e.need_images=i),id:"need-dialog-image",checked:""},null,512),[[z,e.need_images]]),tUt]),t("div",sUt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[10]||(o[10]=i=>e.need_inline_keyboard=i),id:"need-dialog-menu-inline",checked:""},null,512),[[z,e.need_inline_keyboard]]),oUt]),t("div",iUt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[11]||(o[11]=i=>e.need_reply_keyboard=i),id:"need-dialog-menu-reply",checked:""},null,512),[[z,e.need_reply_keyboard]]),nUt])]),e.need_images?(l(),a("div",lUt,[aUt,t("div",rUt,[t("label",dUt,[cUt,t("input",{type:"file",id:"location-photos",multiple:"",accept:"image/*",onChange:o[12]||(o[12]=(...i)=>e.onChangePhotos&&e.onChangePhotos(...i)),style:{display:"none"}},null,32)]),e.photos.length>0?(l(!0),a(v,{key:0},O(e.photos,(i,r)=>(l(),a("div",uUt,[f(t("img",null,null,512),[[n,e.getPhoto(i).imageUrl]]),t("div",mUt,[t("a",{onClick:d=>e.removePhoto("photos",r)},"Удалить",8,hUt)])]))),256)):u("",!0),e.commandForm.images&&s.bot?(l(!0),a(v,{key:1},O(e.commandForm.images,(i,r)=>(l(),a("div",pUt,[f(t("img",null,null,512),[[n,"/images-by-bot-id/"+s.bot.id+"/"+i]]),t("div",_Ut,[t("a",{onClick:d=>e.removePhoto("images",r)},"Удалить",8,fUt)])]))),256)):u("",!0)])])):u("",!0),e.need_inline_keyboard?(l(),a("div",bUt,[gUt,T(si,{onSave:e.saveInlineKeyboard,modelValue:e.commandForm.inline_keyboard,"onUpdate:modelValue":o[13]||(o[13]=i=>e.commandForm.inline_keyboard=i)},null,8,["onSave","modelValue"])])):u("",!0),e.need_reply_keyboard?(l(),a("div",yUt,[vUt,T(si,{onSave:e.saveReplyKeyboard,modelValue:e.commandForm.reply_keyboard,"onUpdate:modelValue":o[14]||(o[14]=i=>e.commandForm.reply_keyboard=i)},null,8,["onSave","modelValue"])])):u("",!0),t("div",$Ut,[kUt,f(t("select",{class:"form-control font-12","onUpdate:modelValue":o[15]||(o[15]=i=>e.commandForm.store_to=i)},[wUt,(l(!0),a(v,null,O(e.store_variants,i=>(l(),a("option",{value:i.key},p(i.title||"Не указано"),9,FUt))),256))],512),[[Ve,e.commandForm.store_to]])]),t("div",CUt,[f(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=i=>e.need_set_flags=i),id:"need-set-flags",checked:""},null,512),[[z,e.need_set_flags]]),PUt]),e.need_set_flags?(l(),a("div",SUt,[xUt,(l(!0),a(v,null,O(e.flags_variants,i=>(l(),a("span",{class:C(["badge mr-2",{"bg-info text-white":e.commandForm.result_flags.indexOf(i.key)!=-1}]),onClick:r=>e.selectFlag(i)},p(i.title),11,jUt))),256))])):u("",!0),t("button",OUt,[e.commandForm.id?(l(),a("span",TUt,"Обновить диалог")):(l(),a("span",UUt,"Добавить диалог"))]),e.commandForm.id?(l(),a("div",IUt)):u("",!0),e.commandForm.id?(l(),a("a",{key:10,onClick:o[17]||(o[17]=(...i)=>e.removeCommand&&e.removeCommand(...i)),title:"Удаление команды",class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-red2-dark"},[VUt,_(" Удалить диалог ")])):u("",!0)],32)}}});const AUt=["data-bs-target"],EUt={class:"badge bg-primary mr-2"},DUt={class:"mb-0",style:{"line-height":"100%","font-size":"10px","text-align":"left"}},zUt=["id"],BUt={class:"modal-dialog modal-fullscreen"},LUt={class:"modal-content"},RUt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),NUt={class:"modal-body"},qUt={props:["item","bot"],data(){return{showMenu:!1}},methods:{selectDialog(){this.$emit("select",this.item)}}},WUt=Object.assign(qUt,{__name:"DialogCommandCard",setup(s){return(e,o)=>(l(),a(v,null,[t("div",{"data-bs-toggle":"modal","data-bs-target":"#open-dialog-editor-"+s.item.id,class:"btn d-flex justify-content-start align-items-start",type:"button"},[t("span",EUt,"#"+p(s.item.id),1),t("p",DUt,p(s.item.pre_text||"Нет команды"),1)],8,AUt),t("div",{class:"modal fade",id:"open-dialog-editor-"+s.item.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",BUt,[t("div",LUt,[RUt,t("div",NUt,[T(bc,{bot:s.bot,item:s.item},null,8,["bot","item"])])])])],8,zUt)],64))}}),YUt={key:0,class:"list-group"},HUt={class:"list-group-item p-2"},QUt={key:1},GUt={key:1,class:"row"},KUt=t("div",{class:"col-12"},[t("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет созданных диалоговых групп ")],-1),JUt=[KUt],XUt={class:"modal fade",id:"create-bot-dialog",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ZUt={class:"modal-dialog modal-fullscreen"},e7t={class:"modal-content"},t7t=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),s7t={class:"modal-body"},o7t=t("button",{style:{"z-index":"100",bottom:"10px"},type:"button","data-bs-toggle":"modal","data-bs-target":"#create-bot-dialog",class:"btn btn-primary p-3 w-100 my-2 position-sticky"},[t("i",{class:"fa-regular fa-comment-dots mr-2"}),_("Создать новый диалог ")],-1),i7t={props:["bot"],data(){return{needCreate:!1,loading:!0,dialog_groups:[],search:null,link:null,group:null}},computed:{...G(["getDialogs","getDialogsPaginateObject"]),filteredCommands(){return this.link?this.dialog_groups.find(e=>e.id===this.link.group_id).bot_dialog_commands.filter(e=>e.id!=this.link.id):[]}},mounted(){this.loadGroups()},methods:{loadGroups(s=0){this.loading=!0,this.$store.dispatch("loadDialogs",{dataObject:{search:this.search},page:s}).then(e=>{this.loading=!1,this.dialog_groups=this.getDialogs,this.dialog_groups_paginate_object=this.getDialogsPaginateObject}).catch(()=>{this.loading=!1})}}},n7t=Object.assign(i7t,{__name:"BotDialogGroupList",setup(s){return(e,o)=>(l(),a(v,null,[e.dialog_groups.length>0?(l(!0),a(v,{key:0},O(e.dialog_groups,(n,i)=>(l(),a("div",null,[n.bot_dialog_commands.length>0?(l(),a("ul",YUt,[(l(!0),a(v,null,O(n.bot_dialog_commands,(r,d)=>(l(),a("li",HUt,[s.bot?(l(),M(WUt,{key:0,bot:s.bot,onCallback:e.loadGroups,item:r},null,8,["bot","onCallback","item"])):u("",!0)]))),256))])):(l(),a("p",QUt,"Диалоговых скриптов не найдено"))]))),256)):(l(),a("div",GUt,JUt)),t("div",XUt,[t("div",ZUt,[t("div",e7t,[t7t,t("div",s7t,[s.bot?(l(),M(bc,{key:0,onCallback:e.loadGroups,bot:s.bot},null,8,["onCallback","bot"])):u("",!0)])])])]),o7t],64))}}),l7t={class:"container py-3"},a7t={class:"row"},r7t={class:"col-12"},d7t={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})}}},gc=Object.assign(d7t,{__name:"Dialogs",setup(s){return(e,o)=>(l(),a("div",l7t,[t("div",a7t,[t("div",r7t,[e.load?u("",!0):(l(),M(n7t,{key:0,bot:e.bot},null,8,["bot"]))])])]))}}),c7t=Object.freeze(Object.defineProperty({__proto__:null,default:gc},Symbol.toStringTag,{value:"Module"})),u7t={key:0,class:"list-group"},m7t={class:"w-100 list-group-item"},h7t=["onClick"],p7t=t("i",{class:"fa-solid fa-scroll text-primary"},null,-1),_7t={class:"mb-2"},f7t=t("div",{class:"alert alert-light mb-2"}," Вы можете добавить данный скрипт изменив сразу название команды на нужное непосредственно ВАМ! Меняется только название. ",-1),b7t={class:"form-floating"},g7t=t("label",{for:""},"Команда",-1),y7t=["disabled"],v7t={key:2,class:"mb-2"},$7t=t("div",{class:"alert alert-warning",role:"alert"}," К сожалению еще нет глобальных скриптов ",-1),k7t=[$7t],w7t={props:["canAdd","bot"],data(){return{search:null,slugs:[],slugs_paginate_object:null,slugForm:{command:null,comment:null,slug:null,config:[],is_global:!0,bot_id:null}}},computed:{...G(["getGlobalSlugs","getGlobalSlugsPaginateObject"]),filteredAllSlugs(){return this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",n=s.comment||"";return o.toLowerCase().indexOf(this.search.toLowerCase())!==-1||n.toLowerCase().indexOf(this.search.toLowerCase())!==-1||e.toLowerCase().indexOf(this.search.toLowerCase())!==-1})}},mounted(){this.loadAllSlugs()},methods:{loadAllSlugs(s=0){this.$store.dispatch("loadGlobalSlugs",{dataObject:{search:this.search||null,needGlobal:!0},page:s}).then(e=>{this.slugs=this.getGlobalSlugs,this.slugs_paginate_object=this.getGlobalSlugsPaginateObject})},removeSlug(s){this.$store.dispatch("removeSlug",{dataObject:{slugId:s.id}}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена!",type:"success"}),this.loadAllSlugs()}).catch(e=>{this.loadAllSlugs()})},nextSlugs(s){this.loadAllSlugs(s)},selectSlug(s){if(this.slugForm.id===s.id){this.slugForm.id=null,this.slugForm.slug=null,this.slugForm.comment=null,this.slugForm.command=null,this.slugForm.config=[],this.slugForm.is_global=!1;return}this.slugForm.id=s.id||null,this.slugForm.slug=s.slug,this.slugForm.comment=s.comment,this.slugForm.command=this.command||s.command,this.slugForm.config=s.config||[],this.slugForm.is_global=s.is_global||!1,this.$emit("select",s)},addSlug(){let s=new FormData;Object.keys(this.slugForm).forEach(e=>{const o=this.slugForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.bot&&s.append("bot_id",this.bot.id),this.$store.dispatch("createSlug",{slugForm:s}).then(e=>{this.$notify({title:"Конструктор команд",text:"Команда успешно обновлена!",type:"success"}),this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0,this.$emit("callback")}).catch(e=>{})}}},F7t=Object.assign(w7t,{__name:"GlobalSlugList",setup(s){return(e,o)=>(l(),a(v,null,[e.filteredAllSlugs.length>0?(l(),a("ul",u7t,[(l(!0),a(v,null,O(e.filteredAllSlugs,(n,i)=>(l(),a("li",m7t,[n?(l(),a("p",{key:0,onClick:r=>e.selectSlug(n),class:"mb-2"},[p7t,t("span",null,p(n.command||"Не указана"),1)],8,h7t)):u("",!0),e.slugForm.id==n.id&&e.filteredAllSlugs.length>0?(l(),a("form",{key:1,onSubmit:o[1]||(o[1]=W((...r)=>e.addSlug&&e.addSlug(...r),["prevent"])),class:"mb-0 d-flex flex-wrap"},[t("div",_7t,[f7t,t("div",b7t,[f(t("input",{type:"text",class:"form-control",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":o[0]||(o[0]=r=>e.slugForm.command=r),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[k,e.slugForm.command]]),g7t])]),t("button",{disabled:e.slugForm.slug==null,class:"btn btn-primary w-100 p-3"},"Добавить скрипт в бота ",8,y7t)],32)):u("",!0)]))),256))])):u("",!0),e.slugs_paginate_object?(l(),M(Ce,{key:1,onPagination_page:e.nextSlugs,pagination:e.slugs_paginate_object},null,8,["onPagination_page","pagination"])):(l(),a("div",v7t,k7t))],64))}});const C7t={class:"alert alert-light w-100 mb-1",type:"button"},P7t={key:0,class:"fa-solid fa-chevron-up"},S7t={key:1,class:"fa-solid fa-chevron-down"},x7t=["data-bs-target"],j7t={key:0,class:"fa-regular fa-pen-to-square"},O7t={key:1,class:"fa-solid fa-xmark"},T7t={key:0,class:"fa-solid fa-arrow-up-short-wide"},U7t={key:1,class:"fa-solid fa-arrow-down-short-wide"},I7t=t("i",{class:"fa-solid fa-clone"},null,-1),V7t=[I7t],M7t=t("i",{class:"fa-regular fa-trash-can color-white"},null,-1),A7t=[M7t],E7t={key:1,class:"list-group my-2 p-0"},D7t={class:"list-group-item d-flex justify-content-between align-items-start"},z7t={class:"ms-2 me-auto"},B7t=t("div",{class:"fw-bold"},"Идентификатор",-1),L7t={class:"list-group-item d-flex justify-content-between align-items-start"},R7t={class:"ms-2 me-auto"},N7t=t("div",{class:"fw-bold"},"Команда",-1),q7t={class:"list-group-item d-flex justify-content-between align-items-start"},W7t={class:"ms-2 me-auto"},Y7t=t("div",{class:"fw-bold"},"Мнемоническое имя",-1),H7t={class:"list-group-item d-flex justify-content-between align-items-start"},Q7t={class:"ms-2 me-auto"},G7t=t("div",{class:"fw-bold"},"Пояснение",-1),K7t={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},J7t={class:"ms-2 me-auto"},X7t=t("div",{class:"fw-bold"},"Набор параметров скрипта",-1),Z7t={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},e9t=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Привязана страница")],-1),t9t=[e9t],s9t={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},o9t=t("div",{class:"ms-2 me-auto"},[t("div",{class:"fw-bold"},"Глобальный скрипт")],-1),i9t=[o9t],n9t=["id"],l9t={class:"modal-dialog modal-fullscreen"},a9t={class:"modal-content"},r9t=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),d9t={class:"modal-body py-3"},c9t={props:["item","bot","selectMode"],data(){return{showMenu:!1,edit:!1,load:!1,simple:!0}},mounted(){},methods:{toggleMenu(){this.showMenu=!this.showMenu,this.simple=!0,this.edit=!1},switchEditor(){this.simple=!0,this.edit=!this.edit},switchSimple(){this.simple=!this.simple,this.edit=!1},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$notify({title:"Конструктор команд",text:"Команда успешно продублирована!",type:"success"}),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$notify({title:"Конструктор команд",text:"Команда успешно удалена!",type:"success"}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},u9t=Object.assign(c9t,{__name:"Slug",setup(s){return(e,o)=>(l(),a(v,null,[t("div",C7t,[t("p",{onClick:o[0]||(o[0]=(...n)=>e.toggleMenu&&e.toggleMenu(...n)),class:"w-100 mb-0"},[e.showMenu?(l(),a("i",P7t)):(l(),a("i",S7t)),_(" "+p(s.item.command||"Нет команды"),1)]),e.showMenu?(l(),a(v,{key:0},[t("a",{"data-bs-toggle":"modal","data-bs-target":"#slug-modal-editor-"+s.item.id,href:"javascript:void(0)",title:"Редактировать команду",style:{width:"auto"},class:"btn btn-outline-light text-primary mr-2"},[e.edit?(l(),a("i",O7t)):(l(),a("i",j7t))],8,x7t),t("a",{href:"javascript:void(0)",onClick:o[1]||(o[1]=(...n)=>e.switchSimple&&e.switchSimple(...n)),class:"btn btn-outline-light text-primary mr-2"},[e.simple?(l(),a("i",T7t)):(l(),a("i",U7t))]),t("a",{href:"javascript:void(0)",title:"Дублировать команду",class:"btn btn-outline-light text-primary mr-2",onClick:o[2]||(o[2]=(...n)=>e.duplicateSlug&&e.duplicateSlug(...n))},V7t),t("a",{href:"javascript:void(0)",title:"Дублировать команду",class:"btn btn-outline-light text-primary mr-2",onClick:o[3]||(o[3]=(...n)=>e.removeSlug&&e.removeSlug(...n))},A7t)],64)):u("",!0),e.simple?u("",!0):(l(),a("ol",E7t,[t("li",D7t,[t("div",z7t,[B7t,_(" №"+p(s.item.id||"Нет идентификатора"),1)])]),t("li",L7t,[t("div",R7t,[N7t,_(" "+p(s.item.command||"Нет команды"),1)])]),t("li",q7t,[t("div",W7t,[Y7t,_(" "+p(s.item.slug||"Slug"),1)])]),t("li",H7t,[t("div",Q7t,[G7t,_(" "+p(s.item.comment||"Пояснение не указано"),1)])]),s.item.config?(l(),a("li",K7t,[t("div",J7t,[X7t,s.item.config?(l(!0),a(v,{key:0},O(s.item.config,n=>(l(),a("p",null,[t("strong",null,p(n.key||"Ключ не найден")+":",1),_(p(n.value||"Не указано"),1)]))),256)):u("",!0)])])):u("",!0),s.item.page?(l(),a("li",Z7t,t9t)):u("",!0),s.item.is_global?(l(),a("li",s9t,i9t)):u("",!0)]))]),t("div",{class:"modal fade",id:"slug-modal-editor-"+s.item.id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[t("div",l9t,[t("div",a9t,[r9t,t("div",d9t,[e.load?u("",!0):(l(),M(Fp,{key:0,item:s.item,onCallback:e.slugFormCallback},null,8,["item","onCallback"]))])])])],8,n9t)],64))}}),m9t={key:0},h9t=t("i",{class:"fa-solid fa-scroll"},null,-1),p9t={key:1},_9t=t("i",{class:"fa-regular fa-square-minus"},null,-1),f9t={key:0,class:"mb-2"},b9t={class:"form-floating mb-2"},g9t=t("label",{for:"floatingInput"},"Быстрый поиск команды",-1),y9t={class:"form-check"},v9t={class:"form-check-label",for:"need_global"},$9t={key:0},k9t={key:1},w9t={class:"mb-0"},F9t={class:"mb-3"},C9t={key:2,class:"mb-3"},P9t=t("div",{class:"alert alert-light",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),S9t=[P9t],x9t={props:["command","bot"],data(){return{need_global:!0,show:!1,slugs:[],paginate:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{need_global:function(s,e){this.loadSlugs()}},computed:{...G(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs.length===0?[]:this.ownSearch==null?this.slugs:this.slugs.filter(s=>{let e=s.slug||"",o=s.command||"",n=s.comment||"";return o.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1||n.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1||e.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1})}},mounted(){this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})},methods:{nextSlugs(s){this.loadSlugs(s)},loadSlugs(s){this.$store.dispatch("loadSlugs",{dataObject:{needGlobal:this.need_global},page:s}).then(e=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){this.loadSlugs()},selectSlug(s){this.$emit("select",s)},loadAllSlugs(){this.$store.dispatch("loadAllSlugs").then(s=>{this.allSlugs=s.data})},addSlug(s){}}},j9t=Object.assign(x9t,{__name:"BotSlugList",setup(s){return(e,o)=>(l(),a(v,null,[t("button",{type:"button",onClick:o[0]||(o[0]=n=>e.show=!e.show),class:"btn btn-outline-light text-primary mb-2 w-100"},[e.show?(l(),a("span",p9t,[_9t,_(" Свернуть форму добавления")])):(l(),a("span",m9t,[h9t,_(" Добавить глобальный скрипт")]))]),e.show?(l(),a("div",f9t,[s.bot?(l(),M(F7t,{key:0,"can-add":!0,bot:s.bot,onCallback:e.loadSlugs},null,8,["bot","onCallback"])):u("",!0)])):u("",!0),t("div",b9t,[g9t,f(t("input",{type:"search","onUpdate:modelValue":o[1]||(o[1]=n=>e.ownSearch=n),class:"form-control",id:"floatingInput",placeholder:"Название команды"},null,512),[[k,e.ownSearch]])]),t("div",y9t,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=n=>e.need_global=n),type:"checkbox",id:"need_global"},null,512),[[z,e.need_global]]),t("label",v9t,[e.need_global?(l(),a("span",$9t,"Глобальные")):(l(),a("span",k9t,"Локальные"))])]),e.slugs&&s.bot?(l(!0),a(v,{key:1},O(e.filteredSlugs,(n,i)=>(l(),a("div",w9t,[T(u9t,{item:n,bot:s.bot,onCallback:e.callbackSlugs,onSelect:e.selectSlug},null,8,["item","bot","onCallback","onSelect"])]))),256)):u("",!0),t("div",F9t,[e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextSlugs,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)]),e.filteredSlugs.length===0?(l(),a("div",C9t,S9t)):u("",!0)],64))}}),O9t={class:"container py-3"},T9t={class:"row"},U9t={class:"col-12"},I9t={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})}}},yc=Object.assign(I9t,{__name:"Slugs",setup(s){return(e,o)=>(l(),a("div",O9t,[t("div",T9t,[t("div",U9t,[e.load?u("",!0):(l(),M(j9t,{key:0,bot:e.bot},null,8,["bot"]))])])]))}}),V9t=Object.freeze(Object.defineProperty({__proto__:null,default:yc},Symbol.toStringTag,{value:"Module"})),M9t={class:"container my-3"},A9t={class:"row"},E9t={class:"col-12"},D9t={key:1,class:"alert alert-light"},z9t=t("p",{class:"text-center"},"Загружаем данные...",-1),B9t=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),L9t=[z9t,B9t],R9t={data(){return{load:!1,bot:null,y_clients:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data,this.y_clients=this.bot.y_clients,this.$notify({title:"Работа с YClients",text:"Данные успешно обновлены",type:"success"})})}}},vc=Object.assign(R9t,{__name:"YClients",setup(s){return(e,o)=>(l(),a("div",M9t,[t("div",A9t,[t("div",E9t,[!e.load&&e.bot?(l(),M(Cr,{key:0,bot:e.bot,data:e.bot.y_clients},null,8,["bot","data"])):(l(),a("div",D9t,L9t))])])]))}}),N9t=Object.freeze(Object.defineProperty({__proto__:null,default:vc},Symbol.toStringTag,{value:"Module"})),q9t={props:["modelValue"],computed:{isComplete(){return this.iikoForm.api_login&&this.iikoForm.organization_id&&this.iikoForm.terminal_group_id},preparedTerminals(){let s=[];return this.terminals.forEach(e=>{e.items.forEach(o=>{s.push(o)})}),s}},data(){return{load:!1,token:null,selected_organization:null,selected_terminal:null,organizations:[],terminals:[],iikoForm:{id:null,bot_id:null,api_login:null,organization_id:null,terminal_group_id:null}}},watch:{iikoForm:{handler:function(s){this.$emit("update:modelValue",this.iikoForm)},deep:!0}},mounted(){this.modelValue&&this.$nextTick(()=>{this.iikoForm.id=this.modelValue.id||null,this.iikoForm.bot_id=this.modelValue.bot_id||null,this.iikoForm.api_login=this.modelValue.api_login||null,this.iikoForm.organization_id=this.modelValue.organization_id||null,this.iikoForm.terminal_group_id=this.modelValue.terminal_group_id||null,this.selected_terminal={name:this.iikoForm.terminal_group_id},this.selected_organization={name:this.iikoForm.organization_id},this.iikoForm.api_login&&this.getToken()})},methods:{selectOrganization(s){if(!s){this.selected_organization=null,this.iikoForm.organization_id=null,this.selected_terminal=null,this.iikoForm.terminal_group_id=null;return}this.selected_organization=s,this.iikoForm.organization_id=s.id,this.getTerminals()},selectTerminal(s){if(!s){this.selected_terminal=null,this.iikoForm.terminal_group_id=null;return}this.selected_terminal=s,this.iikoForm.terminal_group_id=s.id},changeApiLogin(){this.token=null,this.selectOrganization(null),this.selectTerminal(null),this.getToken()},getToken(){this.$store.dispatch("getIikoToken",{api_login:this.iikoForm.api_login}).then(s=>{this.token=s.token||null,this.getOrganizations()}).catch(s=>{this.$notify({title:"Упс!",text:"Ошибка получения токена",type:"error"})})},getOrganizations(){this.token&&this.$store.dispatch("getIikoOrganizations",{token:this.token}).then(s=>{this.organizations=s.organizations||[]}).catch(s=>{this.$notify({title:"Упс!",text:"Ошибка получения списка организаций",type:"error"})})},getTerminals(){!this.token||!this.iikoForm.organization_id||this.$store.dispatch("getIikoTerminals",{token:this.token,organization_id:this.iikoForm.organization_id}).then(s=>{this.terminals=s.terminals||[]}).catch(s=>{this.$notify({title:"Упс!",text:"Ошибка получения списка терминалов",type:"error"})})},submit(){let s=new FormData;Object.keys(this.iikoForm).forEach(e=>{const o=this.iikoForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("storeIiko",{iikoForm:s}).then(e=>{this.$notify({title:"Отлично!",text:"Параметры успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Упс!",text:"Ошибка сохранения параметров",type:"error"})})}}},W9t={class:"form-floating mb-2"},Y9t=t("label",{for:"iiko-form-api_login"},"API логин",-1),H9t=t("div",{class:"alert alert-light mb-2"}," Выберите организацию, которую хотите подключить ",-1),Q9t={class:"dropdown mb-2"},G9t=["disabled"],K9t={key:0},J9t={key:1},X9t={class:"dropdown-menu w-100"},Z9t=t("li",null,[t("hr",{class:"dropdown-divider p-0 m-0"})],-1),eIt=["onClick"],tIt={class:"text-wrap m-0"},sIt=t("div",{class:"alert alert-light mb-2"}," Выберите терминал в организации, через который будут проходить операции ",-1),oIt={class:"dropdown mb-2"},iIt=["disabled"],nIt={key:0},lIt={key:1},aIt={class:"dropdown-menu w-100"},rIt=t("li",null,[t("hr",{class:"dropdown-divider p-0 m-0"})],-1),dIt=["onClick"],cIt=["disabled"];function uIt(s,e,o,n,i,r){return l(),a("form",{onSubmit:e[4]||(e[4]=W((...d)=>r.submit&&r.submit(...d),["prevent"]))},[t("div",W9t,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>i.iikoForm.api_login=d),onChange:e[1]||(e[1]=(...d)=>r.changeApiLogin&&r.changeApiLogin(...d)),class:"form-control",id:"iiko-form-api_login",placeholder:"name@example.com"},null,544),[[k,i.iikoForm.api_login]]),Y9t]),H9t,t("div",Q9t,[t("button",{type:"button",disabled:!i.token,class:"btn btn-outline-primary dropdown-toggle w-100 p-3",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[i.selected_organization?(l(),a("span",K9t,p(i.selected_organization.name||"не указан"),1)):(l(),a("span",J9t,"Не выбрано организации"))],8,G9t),t("ul",X9t,[t("li",null,[t("a",{class:"dropdown-item",onClick:e[2]||(e[2]=d=>r.selectOrganization(null)),href:"javascript:void(0)"},"Не выбрано")]),Z9t,(l(!0),a(v,null,O(i.organizations,d=>(l(),a("li",null,[t("a",{class:C([{"bg-primary text-white":d.id==this.iikoForm.organization_id},"dropdown-item"]),onClick:c=>r.selectOrganization(d),href:"javascript:void(0)"},[t("p",tIt,p(d.name||"-")+" ("+p(d.restaurantAddress||"-")+")",1)],10,eIt)]))),256))])]),sIt,t("div",oIt,[t("button",{type:"button",disabled:!i.iikoForm.organization_id,class:"btn btn-outline-primary dropdown-toggle w-100 p-3",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[i.selected_terminal?(l(),a("span",nIt,p(i.selected_terminal.name||"не указан"),1)):(l(),a("span",lIt,"Не выбрано терминал"))],8,iIt),t("ul",aIt,[t("li",null,[t("a",{class:"dropdown-item",onClick:e[3]||(e[3]=d=>r.selectTerminal(null)),href:"javascript:void(0)"},"Не выбрано")]),rIt,(l(!0),a(v,null,O(r.preparedTerminals,d=>(l(),a("li",null,[t("a",{onClick:c=>r.selectTerminal(d),class:C([{"bg-primary text-white":d.id==this.iikoForm.terminal_group_id},"dropdown-item"]),href:"javascript:void(0)"},p(d.name||"-"),11,dIt)]))),256))])]),t("button",{class:"btn btn-primary p-3 w-100",disabled:!r.isComplete}," Сохранить настройки ",8,cIt)],32)}const mIt=oe(q9t,[["render",uIt]]),hIt={data(){return{need_load_products:!1,selected_menu:null,selected_product:null,menus:[],categories:[],products:[]}},mounted(){this.getMenus()},methods:{selectProduct(s){this.selected_product=s,new bootstrap.Modal("#product-modal",{}).show()},selectMenu(s){this.selected_menu=s,this.getProducts()},getMenus(){this.$store.dispatch("getIikoMenu").then(s=>{this.menus=s.menus||[]}).catch(s=>{this.$notify({title:"Упс!",text:"Ошибка получения токена",type:"error"})})},getProducts(){this.need_load_products=!0,this.$store.dispatch("getIikoProducts",{menu_id:(this.selected_menu||{id:null}).id}).then(s=>{this.products=s.products.itemCategories||[],this.categories=s.products.productCategories||[],this.products.forEach(e=>{e.items.forEach(o=>{o.need_add=!0})}),this.need_load_products=!1}).catch(s=>{this.need_load_products=!1,this.$notify({title:"Упс!",text:"Ошибка получения токена",type:"error"})})},submit(){let s=[];this.products.forEach(e=>{e.items.forEach(o=>{s.push({id:o.itemId||null,sku:o.sku||null,name:o.name||null,description:o.description||null,category:e.name,in_stop:!o.need_add,price:o.itemSizes[0].prices[0].price||0,image:o.itemSizes[0].buttonImageUrl||null})})}),this.$store.dispatch("storeIikoProducts",{products:s}).then(e=>{this.$notify({title:"Отлично!",text:"Товары и категории успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Упс!",text:"Ошибка сохранения параметров",type:"error"})})}}},pIt={key:0,class:"list-group"},_It=["onClick"],fIt={class:"badge bg-primary mr-2"},bIt={key:1,class:"alert alert-light my-2 d-flex justify-content-center align-items-center",role:"alert"},gIt=t("div",{class:"d-flex justify-content-center align-items-center flex-column"},[t("div",{class:"spinner-grow text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Загружаем....")]),t("p",null,"Загружаем список меню...")],-1),yIt=[gIt],vIt={key:2,class:"mt-3 mb-0 p-0"},$It={class:"my-2"},kIt={class:"list-group"},wIt={class:"list-group-item d-flex justify-content-between align-items-center"},FIt={class:"form-check"},CIt=["onUpdate:modelValue","id"],PIt=["for"],SIt=["onClick"],xIt={key:4,class:"alert alert-light my-2 d-flex justify-content-center align-items-center",role:"alert"},jIt=t("div",{class:"d-flex justify-content-center align-items-center flex-column"},[t("div",{class:"spinner-grow text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Загружаем....")]),t("p",null,"Загружаем список товаров из меню...")],-1),OIt=[jIt],TIt={class:"modal fade",id:"product-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},UIt={class:"modal-dialog modal-fullscreen"},IIt={class:"modal-content"},VIt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),MIt={key:0,class:"modal-body"},AIt={class:"img-fluid",alt:""},EIt={class:"my-2"},DIt={class:"fw-bold"};function zIt(s,e,o,n,i,r){const d=ie("lazy");return l(),a(v,null,[i.menus.length>0?(l(),a("ul",pIt,[(l(!0),a(v,null,O(i.menus,c=>(l(),a("li",{onClick:h=>r.selectMenu(c),class:C([{active:(this.selected_menu||{id:null}).id==c.id},"list-group-item"])},[t("span",fIt,"#"+p(c.id),1),_(p(c.name),1)],10,_It))),256))])):(l(),a("div",bIt,yIt)),i.products.length>0?(l(),a("hr",vIt)):u("",!0),i.products.length>0?(l(!0),a(v,{key:3},O(i.products,(c,h)=>(l(),a(v,null,[t("h6",$It,p(c.name),1),t("ul",kIt,[(l(!0),a(v,null,O(c.items,(g,w)=>(l(),a("li",wIt,[t("div",FIt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":x=>i.products[h].items[w].need_add=x,type:"checkbox",value:"",id:"product-"+g.id},null,8,CIt),[[z,i.products[h].items[w].need_add]]),t("label",{class:"form-check-label",for:"product-"+g.id},p(g.name||"-"),9,PIt)]),t("i",{onClick:x=>r.selectProduct(g),class:"fa-solid fa-arrow-up-right-from-square"},null,8,SIt)]))),256))])],64))),256)):u("",!0),i.need_load_products?(l(),a("div",xIt,OIt)):u("",!0),i.products.length>0?(l(),a("button",{key:5,onClick:e[0]||(e[0]=(...c)=>r.submit&&r.submit(...c)),style:{"z-index":"100",bottom:"10px"},type:"button",class:"btn btn-primary w-100 p-3 my-3 position-sticky"},"Сохранить товары ")):u("",!0),t("div",TIt,[t("div",UIt,[t("div",IIt,[VIt,i.selected_product?(l(),a("div",MIt,[t("h6",null,p(i.selected_product.name||"Нет имени"),1),t("p",null,p(i.selected_product.description||"Нет описания"),1),(l(!0),a(v,null,O(i.selected_product.itemSizes,c=>(l(),a(v,null,[f(t("img",AIt,null,512),[[d,c.buttonImageUrl]]),t("p",EIt,[_(" Цена "),(l(!0),a(v,null,O(c.prices,h=>(l(),a("span",DIt,p(h.price||0)+" ₽",1))),256))])],64))),256))])):u("",!0)])])])],64)}const BIt=oe(hIt,[["render",zIt]]),LIt={class:"container py-3"},RIt={class:"row"},NIt={class:"col-12"},qIt={class:"nav nav-tabs d-flex justify-content-center mb-2"},WIt={class:"nav-item"},YIt=t("i",{class:"fa-solid fa-gears"},null,-1),HIt={class:"nav-item"},QIt=t("i",{class:"fa-brands fa-shopify"},null,-1),GIt={key:0,class:"col-12"},KIt={key:1,class:"col-12"},JIt={data(){return{tab:0,load:!1}},computed:{currentBot(){return window.currentBot||null}},mounted(){},methods:{}},$c=Object.assign(JIt,{__name:"Iiko",setup(s){return(e,o)=>(l(),a("div",LIt,[t("div",RIt,[t("div",NIt,[t("ul",qIt,[t("li",WIt,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[0]||(o[0]=n=>e.tab=0),"aria-current":"page",href:"javascript:void(0)"},[YIt,_(" Настройка")],2)]),t("li",HIt,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[1]||(o[1]=n=>e.tab=1),href:"javascript:void(0)"},[QIt,_(" Продукты")],2)])])]),e.tab===0?(l(),a("div",GIt,[!e.load&&e.currentBot?(l(),M(mIt,{key:0,modelValue:e.currentBot.iiko,"onUpdate:modelValue":o[2]||(o[2]=n=>e.currentBot.iiko=n)},null,8,["modelValue"])):u("",!0)])):u("",!0),e.tab===1?(l(),a("div",KIt,[T(BIt)])):u("",!0)])]))}}),XIt=Object.freeze(Object.defineProperty({__proto__:null,default:$c},Symbol.toStringTag,{value:"Module"})),ZIt={props:["data","bot"],components:{Vue3JsonEditor:qs},data(){return{load:!1,bitrixForm:{id:null,url:null,is_active:!1,bot_id:null,config:[]}}},mounted(){this.data&&this.$nextTick(()=>{this.bitrixForm.id=this.data.id||null,this.bitrixForm.url=this.data.url||null,this.bitrixForm.is_active=this.data.is_active||!1,this.bitrixForm.config=this.data.config||[],this.bitrixForm.bot_id=this.data.bot_id||this.bot.id||null})},methods:{checkConnection(){this.$notify({title:"Работа с Bitrix",text:"Отправили на этот url тестовый запрос!"});let s=new FormData;Object.keys(this.bitrixForm).forEach(e=>{const o=this.bitrixForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("checkBitrixURL",{bitrixForm:s}).then(e=>{this.$notify({title:"Работа с Bitrix",text:"Данные CRM успешно сохранены",type:"success"})}).catch(e=>{this.$notify({title:"Работа с Bitrix",text:"Ошибка отправки",type:"error"})})},submit(){let s=new FormData;Object.keys(this.bitrixForm).forEach(e=>{const o=this.bitrixForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("storeBitrix",{bitrixForm:s}).then(e=>{this.$notify({title:"Работа с Bitrix",text:"Данные CRM успешно сохранены",type:"success"}),this.$emit("callback")}).catch(e=>{})}}},eVt={class:"input-group mb-2"},tVt={class:"form-floating"},sVt=t("label",{for:"bitrixForm-url"},"URL для сбора данных",-1),oVt={class:"input-group-text",id:"basic-addon1"},iVt=["disabled"],nVt=t("i",{class:"fa-solid fa-link"},null,-1),lVt=[nVt],aVt={class:"form-check form-switch"},rVt={class:"form-check-label",for:"bitrixForm-is_active"},dVt=["disabled"];function cVt(s,e,o,n,i,r){return l(),a("form",{onSubmit:e[3]||(e[3]=W((...d)=>r.submit&&r.submit(...d),["prevent"]))},[t("div",eVt,[t("div",tVt,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=d=>i.bitrixForm.url=d),class:"form-control",id:"bitrixForm-url",placeholder:"name@example.com"},null,512),[[k,i.bitrixForm.url]]),sVt]),t("span",oVt,[t("button",{type:"button",disabled:(i.bitrixForm.url||"").length===0,onClick:e[1]||(e[1]=(...d)=>r.checkConnection&&r.checkConnection(...d)),class:"btn text-primary p-1"},lVt,8,iVt)])]),t("div",aVt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[2]||(e[2]=d=>i.bitrixForm.is_active=d),type:"checkbox",role:"switch",id:"bitrixForm-is_active"},null,512),[[z,i.bitrixForm.is_active]]),t("label",rVt,[_(" Сбор данных: "),t("span",{class:C({"fw-bold text-primary":i.bitrixForm.is_active})},"вкл",2),_(" / "),t("span",{class:C({"fw-bold text-primary":!i.bitrixForm.is_active})},"выкл",2)])]),t("button",{disabled:!i.bitrixForm.url,class:"w-100 btn btn-primary p-3 my-3"},"Сохранить ",8,dVt)],32)}const uVt=oe(ZIt,[["render",cVt]]),mVt={class:"container my-3"},hVt={class:"row"},pVt={class:"col-12"},_Vt={class:"fw-bold d-flex justify-content-between align-items-center pb-2"},fVt=t("i",{class:"fa-solid fa-plus"},null,-1),bVt=[fVt],gVt={key:0,class:"list-group mb-2"},yVt=["onClick"],vVt=["onClick"],$Vt={key:1,class:"alert alert-light"},kVt=t("strong",{class:"fw-bold text-primary"},"Внимание!",-1),wVt={key:1,class:"alert-light alert"},FVt=t("p",null,"Загружаем данные...",-1),CVt=t("div",{class:"d-flex justify-content-center w-100"},[t("div",{class:"spinner-border color-orange-dark",role:"status"},[t("span",{class:"sr-only"},"Загрузка...")])],-1),PVt=[FVt,CVt],SVt={class:"col-12"},xVt=t("h6",{class:"fw-bold d-flex justify-content-between align-items-center pb-2"},"Данные подключения",-1),jVt={data(){return{bitrix:[],selected:null,load:!1}},computed:{currentBot(){return window.currentBot||null}},mounted(){this.loadBitrix()},methods:{loadBitrix(){this.load=!0,this.$store.dispatch("loadBitrix").then(s=>{this.bitrix=s.data||[],this.load=!1}).catch(()=>{this.load=!1})},removeItem(s){this.$store.dispatch("removeBitrixItem",{id:s.id}).then(e=>{this.loadBitrix(),this.$notify({title:"Битрикс24",text:"Подключение успешно удалено",type:"success"})}).catch(()=>{this.loadBitrix(),this.$notify({title:"Битрикс24",text:"Ошибка удаления подключения",type:"error"})})},selectItem(s){this.selected=s,this.load=!0,this.$nextTick(()=>{this.load=!1})}}},kc=Object.assign(jVt,{__name:"Bitrix",setup(s){return(e,o)=>(l(),a("div",mVt,[t("div",hVt,[t("div",pVt,[t("h6",_Vt,[_("Доступные подключения "),e.selected!=null?(l(),a("a",{key:0,href:"javascript:void(0)",class:"text-decoration-none text-primary px-1",onClick:o[0]||(o[0]=n=>e.selectItem(null))},bVt)):u("",!0)]),e.load?(l(),a("div",wVt,PVt)):(l(),a(v,{key:0},[(e.bitrix||[]).length>0?(l(),a("ul",gVt,[(l(!0),a(v,null,O(e.bitrix,n=>(l(),a("li",{class:C(["list-group-item",{"border-success":n.is_active,"border-error":!n.is_active,"bg-success text-white":(e.selected||{id:null}).id===n.id}]),style:{"word-wrap":"break-word"}},[t("p",{onClick:i=>e.selectItem(n)},p(n.url||"не указан"),9,yVt),t("a",{onClick:i=>e.removeItem(n),href:"javascript:void(0)"},"Удалить",8,vVt)],2))),256))])):(l(),a("div",$Vt,[kVt,_(" Еще нет добавленных данных по CRM ")]))],64))]),t("div",SVt,[xVt,!e.load&&e.currentBot?(l(),M(uVt,{key:0,bot:e.currentBot,data:e.selected,onCallback:e.loadBitrix},null,8,["bot","data","onCallback"])):u("",!0)])])]))}}),OVt=Object.freeze(Object.defineProperty({__proto__:null,default:kc},Symbol.toStringTag,{value:"Module"})),TVt={data(){return{hasConnect:!1,frontPadForm:{hook_url:null,channel:null,affiliate:1,point:1,token:null,statuses:[{value:1,key:"new",title:"Новый"}],bot_id:null,pays:[{value:1,key:"cash",title:"Наличные"},{value:2,key:"card",title:"Перевод на карту"}]}}},computed:{bot(){return window.currentBot}},mounted(){this.$nextTick(()=>{var s,e;(s=this.bot)!=null&&s.frontPad&&(this.frontPadForm.hook_url=this.bot.frontPad.hook_url||null,this.frontPadForm.channel=this.bot.frontPad.channel||null,this.frontPadForm.affiliate=this.bot.frontPad.affiliate||null,this.frontPadForm.point=this.bot.frontPad.point||null,this.frontPadForm.token=this.bot.frontPad.token||null,this.frontPadForm.bot_id=this.bot.frontPad.bot_id||this.bot.id||null,this.bot.frontPad.pays!=null&&(this.frontPadForm.pays=this.bot.frontPad.pays),this.bot.statuses!=null&&(this.frontPadForm.statuses=this.bot.frontPad.statuses)),this.frontPadForm.bot_id=((e=this.bot.frontPad)==null?void 0:e.bot_id)||this.bot.id||null})},methods:{submit(){let s=new FormData;Object.keys(this.frontPadForm).forEach(e=>{const o=this.frontPadForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("saveFrontPad",{frontPadForm:s}).then(e=>{this.$notify("Данные CRM успешно сохранены"),window.location.reload()}).catch(e=>{})}}},UVt=t("h3",null,"Настройка FrontPad",-1),IVt={class:"form-floating mb-2"},VVt=t("label",{id:"token"}," Токен интеграции ",-1),MVt=t("div",{class:"alert alert-light"},' Данные брать из справочника FrontPad "Каналы продаж". Создать канал. Telegram. Указать значение для API ',-1),AVt={class:"form-floating mb-2"},EVt=t("label",{class:"form-label",id:"channel"}," Канал продаж ",-1),DVt={class:"form-floating mb-2"},zVt=t("label",{id:"affiliate"}," Филиал ",-1),BVt={class:"form-floating mb-2"},LVt=t("label",{class:"form-label",id:"point"}," Точка продаж ",-1),RVt=t("div",{class:"alert alert-light",role:"alert"},' Данные брать из справочника FrontPad "Статусы". Указать значение для API ',-1),NVt={key:0,class:"card mb-2 p-0"},qVt=t("div",{class:"card-header"},[t("h6",{class:"fw-bold mb-0"},"Статусы")],-1),WVt={class:"card-body"},YVt={class:"table"},HVt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Название"),t("th",{scope:"col"},"Ключ"),t("th",{scope:"col"},"Значение")])],-1),QVt=["onUpdate:modelValue"],GVt=t("div",{class:"alert alert-light",role:"alert"},' Данные брать из справочника FrontPad "Варианты оплат". Указать значение для API ',-1),KVt={key:1,class:"card mb-2 p-0"},JVt=t("div",{class:"card-header"},[t("h6",{class:"fw-bold mb-0"},"Типы оплаты")],-1),XVt={class:"card-body"},ZVt={class:"table"},eMt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Название"),t("th",{scope:"col"},"Ключ"),t("th",{scope:"col"},"Значение")])],-1),tMt=["onUpdate:modelValue"],sMt=t("button",{type:"submit",class:"btn btn-primary p-3 w-100"},[t("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),_(" Сохранить настройку ")],-1);function oMt(s,e,o,n,i,r){return l(),a(v,null,[UVt,t("form",{onSubmit:e[4]||(e[4]=W((...d)=>r.submit&&r.submit(...d),["prevent"]))},[t("div",IVt,[f(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":e[0]||(e[0]=d=>i.frontPadForm.token=d),"aria-describedby":"token"},null,512),[[k,i.frontPadForm.token]]),VVt]),MVt,t("div",AVt,[f(t("input",{type:"text",class:"form-control",placeholder:"channel","aria-label":"channel","onUpdate:modelValue":e[1]||(e[1]=d=>i.frontPadForm.channel=d),"aria-describedby":"channel"},null,512),[[k,i.frontPadForm.channel]]),EVt]),t("div",DVt,[f(t("input",{type:"text",class:"form-control",placeholder:"Филиал","aria-label":"Филиал","onUpdate:modelValue":e[2]||(e[2]=d=>i.frontPadForm.affiliate=d),"aria-describedby":"Филиал"},null,512),[[k,i.frontPadForm.affiliate]]),zVt]),t("div",BVt,[f(t("input",{type:"text",class:"form-control",placeholder:"Точка продаж","aria-label":"Точка продаж","onUpdate:modelValue":e[3]||(e[3]=d=>i.frontPadForm.point=d),"aria-describedby":"Точка продаж"},null,512),[[k,i.frontPadForm.point]]),LVt]),RVt,i.frontPadForm.statuses?(l(),a("div",NVt,[qVt,t("div",WVt,[t("table",YVt,[HVt,t("tbody",null,[(l(!0),a(v,null,O(i.frontPadForm.statuses,(d,c)=>(l(),a("tr",null,[t("td",null,p(d.title||"-"),1),t("td",null,p(d.key||"-"),1),t("td",null,[f(t("input",{type:"text",class:"form-control",placeholder:"Статус","aria-label":"Статус","onUpdate:modelValue":h=>i.frontPadForm.statuses[c].value=h,"aria-describedby":"Статус"},null,8,QVt),[[k,i.frontPadForm.statuses[c].value]])])]))),256))])])])])):u("",!0),GVt,i.frontPadForm.pays?(l(),a("div",KVt,[JVt,t("div",XVt,[t("table",ZVt,[eMt,t("tbody",null,[(l(!0),a(v,null,O(i.frontPadForm.pays,(d,c)=>(l(),a("tr",null,[t("td",null,p(d.title||"-"),1),t("td",null,p(d.key||"-"),1),t("td",null,[f(t("input",{type:"text",class:"form-control",placeholder:"Статус","aria-label":"Статус","onUpdate:modelValue":h=>i.frontPadForm.pays[c].value=h,"aria-describedby":"Статус"},null,8,tMt),[[k,i.frontPadForm.pays[c].value]])])]))),256))])])])])):u("",!0),sMt],32)],64)}const iMt=oe(TVt,[["render",oMt]]),nMt={class:"container my-3"},lMt={class:"row"},aMt={class:"col-12"},rMt={data(){return{}},mounted(){},methods:{}},wc=Object.assign(rMt,{__name:"FrontPad",setup(s){return(e,o)=>(l(),a("div",nMt,[t("div",lMt,[t("div",aMt,[T(iMt)])])]))}}),dMt=Object.freeze(Object.defineProperty({__proto__:null,default:wc},Symbol.toStringTag,{value:"Module"})),cMt={data(){return{file:null,sending:!1,need_video:!1,need_document:!1,callbackForm:{message:null,images:[],videos:[],documents:[]}}},watch:{need_video:{handler:function(s){this.need_video||(this.callbackForm.videos=[])},deep:!0},need_document:{handler:function(s){this.need_video||(this.callbackForm.documents=[])},deep:!0}},computed:{...G(["getSelf"]),self(){return this.getSelf},canSend(){return!this.sending&&((this.callbackForm.images||[]).length>0||(this.callbackForm.videos||[]).length>0||(this.callbackForm.documents||[]).length>0)},tg(){return window.Telegram.WebApp}},mounted(){},methods:{onChangePhotos(s){const e=s.target.files||[];for(let o=0;o<e.length;o++)this.callbackForm.images.push(e[o])},onChangeVideos(s){const e=s.target.files||[];for(let o=0;o<e.length;o++)this.callbackForm.videos.push(e[o])},onChangeDocuments(s){const e=s.target.files||[];for(let o=0;o<e.length;o++)this.callbackForm.documents.push(e[o])},getPhoto(s){return{imageUrl:URL.createObjectURL(s)}},removePhoto(s){this.callbackForm.images.splice(s,1)},removeVideo(s){this.callbackForm.videos.splice(s,1)},removeDocument(s){this.callbackForm.documents.splice(s,1)},onAdvancedUpload(s){},submitCallback(){let s=new FormData;this.sending=!0,Object.keys(this.callbackForm).forEach(e=>{const o=this.callbackForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.callbackForm.images.length>0&&(this.callbackForm.images.forEach(e=>{s.append("photos[]",e)}),s.delete("images")),this.callbackForm.documents.length>0&&(this.callbackForm.documents.forEach(e=>{s.append("documents[]",e)}),s.delete("documents")),this.callbackForm.videos.length>0&&(this.callbackForm.videos.forEach(e=>{s.append("videos[]",e)}),s.delete("videos")),this.$store.dispatch("uploadFileForm",{callbackForm:s}).then(e=>{this.callbackForm={message:null,videos:[],documents:[],images:[]},this.$notify({title:"Загрузка файлов",text:"Спасибо, файлы загружены"}),this.sending=!1,this.tg.close()}).catch(e=>{this.sending=!1})}}},uMt={key:0,class:"container py-3"},mMt=t("h3",null,"Загрузка файлов",-1),hMt=t("p",{class:"alert alert-light"},[_(" Внимание! Вы можете загрузить до "),t("strong",{class:"fw-bold text-primary"},"10"),_(" фотографий, "),t("strong",{class:"fw-bold text-primary"},"1"),_(" видео-ролик и "),t("strong",{class:"fw-bold text-primary"},"1"),_(" документ. ")],-1),pMt=t("h6",{class:"my-2 text-center fw-bold"},"Прикрепить фотографию ",-1),_Mt={class:"form-floating mb-2"},fMt=["disabled"],bMt=t("label",{for:"menu-photos-upload"},"Фотографии",-1),gMt={class:"list-group list-group-numbered mb-2"},yMt={class:"list-group-item d-flex justify-content-between align-items-start"},vMt={class:"ms-2 me-auto",style:{"word-break":"break-all"}},$Mt=["onClick"],kMt={class:"form-check mb-2"},wMt=t("label",{class:"form-check-label",for:"need_attach_video"}," Нужно прикрепить видео ",-1),FMt=t("h6",{class:"mb-2 text-center fw-bold"},"Прикрепить видео",-1),CMt={class:"form-floating mb-2"},PMt=["disabled"],SMt=t("label",{for:"menu-video"},"Видео",-1),xMt={class:"list-group list-group-numbered mb-2"},jMt={class:"list-group-item d-flex justify-content-between align-items-start"},OMt={class:"ms-2 me-auto",style:{"word-break":"break-all"}},TMt=["onClick"],UMt={class:"form-check mb-2"},IMt=t("label",{class:"form-check-label",for:"need_attach_file"}," Нужно прикрепить файл ",-1),VMt=t("h6",{class:"mb-2 text-center fw-bold"},"Прикрепить файл",-1),MMt={class:"form-floating mb-2"},AMt=["disabled"],EMt=t("label",{for:"menu-document"},"Документ",-1),DMt={class:"list-group list-group-numbered mb-2"},zMt={class:"list-group-item d-flex justify-content-between align-items-start"},BMt={class:"ms-2 me-auto",style:{"word-break":"break-all"}},LMt=["onClick"],RMt={class:"form-floating"},NMt=t("label",{for:"callbackForm-message"},"Пояснение",-1),qMt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},WMt=["disabled"];function YMt(s,e,o,n,i,r){return r.self?(l(),a("div",uMt,[mMt,hMt,t("form",{onSubmit:e[6]||(e[6]=W((...d)=>r.submitCallback&&r.submitCallback(...d),["prevent"]))},[pMt,t("div",_Mt,[t("input",{type:"file",id:"menu-photos-upload",accept:"image/*",onChange:e[0]||(e[0]=(...d)=>r.onChangePhotos&&r.onChangePhotos(...d)),class:"form-control",disabled:(i.callbackForm.images||[]).length===10,placeholder:"name@example.com",multiple:!0},null,40,fMt),bMt]),t("ol",gMt,[(l(!0),a(v,null,O(i.callbackForm.images,(d,c)=>(l(),a("li",yMt,[t("div",vMt,p(d.name||"не указан"),1),t("span",{onClick:h=>r.removePhoto(c),class:"badge text-bg-primary rounded-pill cursor-pointer"}," удалить ",8,$Mt)]))),256))]),t("div",kMt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[1]||(e[1]=d=>i.need_video=d),type:"checkbox",value:"",id:"need_attach_video"},null,512),[[z,i.need_video]]),wMt]),i.need_video?(l(),a(v,{key:0},[FMt,t("div",CMt,[t("input",{type:"file",id:"menu-video",accept:"video/*",disabled:(i.callbackForm.videos||[]).length===1,onChange:e[2]||(e[2]=(...d)=>r.onChangeVideos&&r.onChangeVideos(...d)),class:"form-control",placeholder:"name@example.com"},null,40,PMt),SMt]),t("ol",xMt,[(l(!0),a(v,null,O(i.callbackForm.videos,(d,c)=>(l(),a("li",jMt,[t("div",OMt,p(d.name||"не указан"),1),t("span",{onClick:h=>r.removeVideo(c),class:"badge text-bg-primary rounded-pill cursor-pointer"}," удалить ",8,TMt)]))),256))])],64)):u("",!0),t("div",UMt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[3]||(e[3]=d=>i.need_document=d),type:"checkbox",value:"",id:"need_attach_file"},null,512),[[z,i.need_document]]),IMt]),i.need_document?(l(),a(v,{key:1},[VMt,t("div",MMt,[t("input",{type:"file",id:"menu-document",accept:"application/pdf",disabled:(i.callbackForm.documents||[]).length===1,onChange:e[4]||(e[4]=(...d)=>r.onChangeDocuments&&r.onChangeDocuments(...d)),class:"form-control",placeholder:"name@example.com"},null,40,AMt),EMt]),t("ol",DMt,[(l(!0),a(v,null,O(i.callbackForm.documents,(d,c)=>(l(),a("li",zMt,[t("div",BMt,p(d.name||"не указан"),1),t("span",{onClick:h=>r.removeDocument(c),class:"badge text-bg-primary rounded-pill cursor-pointer"}," удалить ",8,LMt)]))),256))])],64)):u("",!0),t("div",RMt,[f(t("textarea",{class:"form-control",style:{height:"200px","line-height":"150%"},"onUpdate:modelValue":e[5]||(e[5]=d=>i.callbackForm.message=d),placeholder:"Leave a comment here",id:"callbackForm-message"},null,512),[[k,i.callbackForm.message]]),NMt]),t("nav",qMt,[t("button",{type:"submit",disabled:!r.canSend,class:"btn btn-primary mt-2 p-3 w-100"}," Отправить сообщение ",8,WMt)])],32)])):u("",!0)}const Fc=oe(cMt,[["render",YMt]]),HMt=Object.freeze(Object.defineProperty({__proto__:null,default:Fc},Symbol.toStringTag,{value:"Module"})),QMt={key:0,class:"container py-3"},GMt={class:"d-flex justify-content-center align-items-center",style:{"min-height":"350px"}},KMt={key:0,style:{width:"200px",height:"200px","border-radius":"50%",overflow:"hidden"}},JMt={class:"w-100 object-fit-cover"},XMt={key:1,style:{width:"200px",height:"200px"}},ZMt={class:"w-100 object-fit-cover"},eAt=t("h6",{class:"opacity-75 mb-3"},"Информация о профиле друга",-1),tAt={class:"list-group"},sAt={class:"list-group-item d-flex justify-content-between","aria-current":"true"},oAt=t("span",null,"Имя",-1),iAt={style:{"font-size":"12px"},class:"text-primary fw-bold"},nAt={class:"list-group-item d-flex justify-content-between","aria-current":"true"},lAt=t("span",null,"ID",-1),aAt={class:"text-primary fw-bold"},rAt={class:"list-group-item d-flex justify-content-between","aria-current":"true"},dAt=t("span",null,"Телефон",-1),cAt={class:"text-primary fw-bold cursor-pointer"},uAt={class:"list-group-item d-flex justify-content-between","aria-current":"true"},mAt=t("span",null,"Город",-1),hAt={class:"text-primary fw-bold"},pAt={class:"list-group-item d-flex justify-content-between","aria-current":"true"},_At=t("span",null,"День рождения",-1),fAt={class:"text-primary fw-bold"},bAt={class:"list-group-item d-flex justify-content-between cursor-pointer","aria-current":"true"},gAt=t("span",null,"Приглашено друзей",-1),yAt={class:"text-primary fw-bold"},vAt={class:"list-group-item d-flex justify-content-between cursor-pointer","aria-current":"true"},$At=t("span",null,"Количество заказов",-1),kAt={class:"text-primary fw-bold"},wAt={class:"list-group-item d-flex justify-content-between cursor-pointer","aria-current":"true"},FAt=t("span",null,"Получено баллов",-1),CAt={class:"text-primary fw-bold"},PAt={data(){return{photos:null,profile:null,friend_id:null}},computed:{tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},mounted(){const s=new URLSearchParams(window.location.search);this.friend_id=JSON.parse(s.get("friend"))||null,this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(e=>e.click()),this.$router.back()}),this.$nextTick(()=>{this.friend_id&&this.loadUserPhotos()})},methods:{loadUserPhotos(){this.$store.dispatch("getUserProfilePhotos",{bot_user_id:this.friend_id}).then(s=>{console.log(s),this.photos=s.photos.result.photos||null,this.profile=s.profile}).catch(()=>{this.$notify({title:"Ошибочка",text:"Пользователь не найден!",type:"error"})})}}},Cc=Object.assign(PAt,{__name:"Referral",setup(s){return(e,o)=>{const n=ie("lazy");return e.profile?(l(),a("div",QMt,[t("div",GMt,[(e.photos||[]).length>0?(l(),a("div",KMt,[f(t("img",JMt,null,512),[[n,"/file-by-file-id-and-bot-domain/"+e.photos[0][0].file_id+"/"+e.currentBot.bot_domain]])])):(l(),a("div",XMt,[f(t("img",ZMt,null,512),[[n,"/images/shop-v2/profile.png"]])]))]),eAt,t("ul",tAt,[t("li",sAt,[oAt,t("span",iAt,p(e.profile.fio_from_telegram||"не указано"),1)]),t("li",nAt,[lAt,t("span",aAt,p(e.profile.telegram_chat_id||"-"),1)]),t("li",rAt,[dAt,t("span",cAt,p(e.profile.phone||"номер не указан"),1)]),t("li",uAt,[mAt,t("span",hAt,p(e.profile.city||"не указан"),1)]),t("li",pAt,[_At,t("span",fAt,p(e.profile.birthday||"-"),1)]),t("li",bAt,[gAt,t("span",yAt,p(e.profile.friends_count||0),1)]),t("li",vAt,[$At,t("span",kAt,p(e.profile.order_count||0),1)]),t("li",wAt,[FAt,t("span",CAt,p(e.profile.cashBack.amount||0)+" ₽",1)])])])):(l(),M(Ns,{key:1}))}}}),SAt=Object.freeze(Object.defineProperty({__proto__:null,default:Cc},Symbol.toStringTag,{value:"Module"})),xAt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},jAt={key:0,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-2 px-3 rounded-3 shadow-lg d-flex justify-content-between align-items-center"},OAt={class:"btn-group dropup"},TAt=t("button",{class:"btn btn-dark dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[t("i",{class:"fa-solid fa-cart-shopping mr-2"})],-1),UAt={class:"dropdown-menu"},IAt={class:"d-block",style:{position:"relative"}},VAt={key:0,class:"bg-white text-primary sup-badge"},MAt=t("sup",{class:"font-10 opacity-50"},".00",-1),AAt={key:1,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-secondary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-between"},EAt={data(){return{settings:null}},computed:{...G(["inCart","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},canBy(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work||(this.settings?this.settings.can_buy_after_closing:!0):!0}},mounted(){var s;(s=this.bot.settings)!=null&&s.self_updated?this.settings=this.bot.settings:this.loadShopModuleData(),this.loadBasketData()},methods:{clearCart(){this.$store.dispatch("clearCart").then(()=>{this.$notify({title:"Корзина",text:"Корзина успешно очищена!",type:"success"})})},goToCart(){this.$router.push({name:"TableCartV2"})},loadBasketData(){return this.$store.dispatch("loadProductsInBasket")},loadShopModuleData(){return this.$store.dispatch("loadShopModuleData").then(s=>{this.$nextTick(()=>{this.settings||(this.settings={}),s&&Object.keys(s).forEach(e=>{e&&(this.settings[e]=s[e])}),this.settings_loaded=!0})})}}},Pc=Object.assign(EAt,{__name:"TableMenu",setup(s){return(e,o)=>(l(),a(v,null,[T(Zn,{settings:e.settings},null,8,["settings"]),t("nav",xAt,[e.canBy?(l(),a("button",jAt,[t("div",OAt,[TAt,t("ul",UAt,[t("li",null,[t("a",{class:"dropdown-item",onClick:o[0]||(o[0]=(...n)=>e.clearCart&&e.clearCart(...n)),href:"javascript:void(0)"},"Очистить корзину")])])]),t("div",{class:"d-flex justify-content-between align-items-center w-100 px-2",onClick:o[1]||(o[1]=(...n)=>e.goToCart&&e.goToCart(...n))},[t("span",IAt,[e.cartTotalCount>0?(l(),a("sup",VAt,p(e.cartTotalCount),1)):u("",!0),_("Ваш заказ ")]),t("strong",null,[_(p(e.cartTotalPrice||0),1),MAt,_("₽")])])])):(l(),a("p",AAt," В данный момент покупки недоступны "))])],64))}}),DAt=Object.freeze(Object.defineProperty({__proto__:null,default:Pc},Symbol.toStringTag,{value:"Module"})),zAt={class:"container py-3"},BAt={class:"row"},LAt={class:"col-12"},RAt={class:"col-12 justify-content-center d-flex"},NAt={class:"nav nav-tabs"},qAt={class:"nav-item"},WAt={key:0,class:"nav-item"},YAt={key:1,class:"nav-item"},HAt={key:0,class:"card my-3"},QAt={class:"card-header bg-primary text-white"},GAt={class:"card-body"},KAt={class:"card-title"},JAt={class:"card-text"},XAt=t("strong",null,"Имя:",-1),ZAt=t("br",null,null,-1),eEt=t("strong",null,"Телефон:",-1),tEt=t("br",null,null,-1),sEt=t("strong",null,"Количество персон:",-1),oEt=t("br",null,null,-1),iEt=t("strong",null,"Описание:",-1),nEt={key:0,class:"alert alert-danger my-2 text-black"},lEt=t("strong",{class:"fw-bold text-primary"},"закрыт",-1),aEt=t("h6",{class:"divider my-3"},"Информация",-1),rEt={class:"list-group list-group-flush"},dEt={class:"list-group-item"},cEt={class:"d-flex justify-content-between mb-0"},uEt={class:"fw-bold text-primary"},mEt={class:"list-group-item"},hEt={class:"d-flex justify-content-between mb-0"},pEt={key:0,href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#creator-profile-modal",class:"fw-bold text-primary",style:{"text-align":"right"}},_Et=t("i",{class:"fa-solid fa-arrow-up-right-from-square"},null,-1),fEt={key:1},bEt={class:"list-group-item"},gEt={class:"d-flex justify-content-between mb-0"},yEt={key:0,href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#waiter-profile-modal",style:{"text-align":"right"},class:"fw-bold text-primary"},vEt=t("i",{class:"fa-solid fa-arrow-up-right-from-square"},null,-1),$Et={key:1},kEt={class:"list-group-item"},wEt={class:"d-flex justify-content-between mb-0"},FEt={class:"fw-bold text-primary"},CEt={class:"list-group-item"},PEt={class:"d-flex justify-content-between mb-0"},SEt={class:"fw-bold text-primary"},xEt={class:"list-group-item"},jEt={class:"d-flex justify-content-between mb-0"},OEt={class:"fw-bold text-primary"},TEt={class:"list-group-item"},UEt={class:"d-flex justify-content-between mb-0 fw-bold"},IEt={class:"fw-bold text-primary"},VEt={class:"list-group-item"},MEt={class:"d-flex justify-content-between mb-0"},AEt={class:"fw-bold text-primary"},EEt={class:"list-group-item"},DEt={class:"d-flex justify-content-between mb-0 fw-bold"},zEt={class:"fw-bold text-primary"},BEt=t("i",{class:"fa-regular fa-bell"},null,-1),LEt={key:0,class:"color-primary"},REt={key:1,class:"color-primary"},NEt=t("p",{class:"divider mb-3"},[t("span",{class:"d-flex flex-column align-items-center"},[_(" Бонусы "),t("small",{style:{"font-size":"10px"}},"(нажми для использования)")])],-1),qEt={class:"card-body"},WEt={class:"d-flex justify-content-between mb-0"},YEt=t("span",null," Списать баллы",-1),HEt=t("p",{class:"divider mb-3"},"Оплата заказа",-1),QEt={class:"form-floating mb-2"},GEt=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-signature"}),_(" Ф.И.О.")],-1),KEt={class:"form-floating mb-2"},JEt=t("label",{for:"floatingInput"},[t("i",{class:"fa-solid fa-mobile-screen-button"}),_(" Номер телефона")],-1),XEt={class:"form-check form-switch"},ZEt=t("label",{class:"form-check-label",for:"client-have-birthday"},"У меня День рождения!",-1),eDt={key:0,class:"alert alert-light mb-2"},tDt=t("strong",{class:"fw-bold text-primary"},"паспорта",-1),sDt={class:"btn-group-vertical w-100"},oDt=["disabled"],iDt={key:0,class:"color-primary"},nDt=t("i",{class:"fa-solid fa-person-circle-check"},null,-1),lDt={class:"fw-bold small"},aDt={key:1,class:"color-primary"},rDt=["disabled"],dDt={key:0,class:"color-primary"},cDt=t("i",{class:"fa-solid fa-people-line"},null,-1),uDt={class:"fw-bold small"},mDt={key:1,class:"color-primary"},hDt={class:"alert alert-light my-2",style:{"text-align":"left"}},pDt={key:2,class:"alert alert-warning my-3"},_Dt={key:0,class:"alert alert-danger my-2 text-black"},fDt=t("strong",{class:"fw-bold text-primary"},"закрыт",-1),bDt=t("h4",null,"Ваш текущий заказ",-1),gDt={key:0},yDt={key:1},vDt={key:2},$Dt=t("p",{class:"alert alert-warning"}," Внимание! Оформленный заказ необходимо сразу оплатить! ",-1),kDt=["disabled"],wDt=t("i",{class:"fa-solid fa-clock-rotate-left"},null,-1),FDt={key:0,class:"color-white"},CDt={key:1,class:"color-white"},PDt={key:0,class:"alert alert-light"},SDt=["disabled"],xDt=t("i",{class:"fa-solid fa-clock-rotate-left"},null,-1),jDt={key:0,class:"color-white"},ODt={key:1,class:"color-white"},TDt={key:0,class:"alert alert-danger my-2 text-black"},UDt=t("strong",{class:"fw-bold text-primary"},"закрыт",-1),IDt=t("p",{class:"divider my-3"},"Заказы клиентов",-1),VDt={class:"my-3"},MDt={class:"fw-bold"},ADt={key:0},EDt=t("i",{class:"fa-solid fa-star text-primary"},null,-1),DDt=[EDt],zDt={class:"list-group"},BDt={class:"list-group-item d-flex justify-content-between align-items-center"},LDt={class:"fw-bold",style:{"font-size":"10px"}},RDt={class:"alert alert-light d-flex justify-content-between my-2"},NDt={class:"fw-bold"},qDt=["disabled"],WDt=t("i",{class:"fa-solid fa-file-arrow-down"},null,-1),YDt={key:0,class:"color-primary"},HDt={key:1,class:"color-primary"},QDt={class:"modal fade",id:"creator-profile-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},GDt={class:"modal-dialog modal-fullscreen"},KDt={class:"modal-content"},JDt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Ваш профиль"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),XDt={class:"modal-body"},ZDt={class:"modal fade",id:"waiter-profile-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ezt={class:"modal-dialog modal-fullscreen"},tzt={class:"modal-content"},szt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Профиль официанта"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ozt={class:"modal-body"},izt={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},nzt=t("i",{class:"fa-solid fa-cart-shopping"},null,-1),lzt={data(){return{selectedTable:null,tab:0,spent_time_counter:0,loaded_settings:!0,sent_to_waiter:!1,settings:{},orderForm:{is_self:!1,action_prize:null,use_cashback:!1,client:{name:null,phone:null,have_birthday:!1},promo:{discount_in_percent:!1,discount:0,activate_price:0,code:null}},table:{id:null,bot_id:null,number:null,creator:null,creator_id:null,officiant:null,officiant_id:null,closed_at:null,additional_services:null,config:null,clients:[]},clients:[],basket:[],self_summary_price:0,self_summary_count:0,summary_price:0,summary_count:0}},computed:{...G(["getSelf","cartProducts","cartTotalCount","cartTotalPrice"]),self(){return window.self},bot(){return window.currentBot},servicePrice(){var e;let s=0;return(e=this.table.additional_services)==null||e.forEach(o=>{s+=o.price||0}),s},fullTablePrice(){return this.summary_price+this.servicePrice},cashbackLimit(){let s=this.getSelf.cashBack?this.getSelf.cashBack.amount:0,e=this.cartTotalPrice||0,o=this.bot.max_cashback_use_percent||0,n=e*(o/100);return Math.min(n,s)}},mounted(){let s=localStorage.getItem("cashman_current_active_table")||null;s&&(this.selectedTable=JSON.parse(s)),this.loadCurrentTableData(),this.loadBasketData(),this.loadShopModuleData(),localStorage.getItem("cashman_self_table_counter")!=null&&this.startTimer(localStorage.getItem("cashman_self_table_counter"))},methods:{changeOrderStatus(){let s=localStorage.getItem("cashman_current_active_table")||null;s&&(s=JSON.parse(s)),this.$store.dispatch("acceptTableOder",{dataObject:{table_id:s==null?void 0:s.id,type:0}}).then(e=>{this.$notify({title:"Заказ",text:"Статус заказа успешно изменен",type:"success"}),this.tab=2,this.loadBasketData(),this.startTablePay()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка изменения статуса заказа",type:"error"})})},selectATable(s){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=s,localStorage.setItem("cashman_current_active_table",JSON.stringify(s)),this.loadCurrentTableData(),this.loadBasketData()})},startTablePay(){this.startTimer(10),this.$notify({title:"Корзина",text:"Формируем платежную ссылку!"});let s=new FormData;Object.keys(this.orderForm).forEach(e=>{const o=this.orderForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),s.append("table_id",this.table.id),this.$store.dispatch("startTablePay",s).then(e=>{window.open(e.url,"_blank"),this.$notify({title:"Корзина",text:"Заказ успешно отправлен к вам чат!",type:"success"})}).catch(()=>{this.$notify({title:"Корзина",text:"Ошибка отправки сообщения!",type:"error"})})},fillForm(){this.orderForm.client.name=this.getSelf.name||this.getSelf.fio_from_telegram||null,this.orderForm.client.phone=this.getSelf.phone||null},sendOrderToMyChat(){this.startTimer(10),this.$store.dispatch("sendOrderToMyChat",{dataObject:{table_id:this.table.id}}).then(s=>{this.$notify({title:"Корзина",text:"Заказ успешно отправлен к вам чат!",type:"success"})}).catch(()=>{this.$notify({title:"Корзина",text:"Ошибка отправки сообщения!",type:"error"})})},callWaiter(s=!1){this.startTimer(10),this.$notify({title:"Корзина",text:"Отправляем запрос к официанту!"}),this.$store.dispatch("requestWaiterComing",{dataObject:{table_id:this.table.id,need_payment:s||!1}}).then(e=>{this.$notify({title:"Корзина",text:"Официанта оповещен и сейчас подойдет к вам!",type:"success"})}).catch(()=>{this.$notify({title:"Корзина",text:"Ошибка отправки оповещения официанту!",type:"error"})})},makeOrder(){this.sent_to_waiter=!0,this.startTimer(10),this.$store.dispatch("requestApproveTable",{dataObject:{table_id:this.table.id}}).then(s=>{this.$notify({title:"Корзина",text:"Ваш заказ передан официанту!",type:"success"})}).catch(()=>{this.sent_to_waiter=!1,this.$notify({title:"Корзина",text:"Ошибка отправки заказа официанту!",type:"error"})})},selectPrize(s){this.orderForm.action_prize=s},loadApprovedSelfTableBasket(){this.$store.dispatch("loadApprovedSelfTableBasket").then(s=>{console.log(s)})},loadShopModuleData(){return this.loaded_settings=!1,this.$store.dispatch("loadShopModuleData").then(s=>{this.$nextTick(()=>{s&&Object.keys(s).forEach(e=>{this.settings[e]=s[e]}),this.fillForm(),this.loaded_settings=!0})})},loadBasketData(){return this.$store.dispatch("loadProductsInBasket")},changeTab(s){this.tab=s,(this.tab===1||this.tab===2)&&this.loadCurrentTableData()},goToCatalog(){this.$router.push({name:"TableMenuV2"})},startTimer(s){this.spent_time_counter=parseInt(s)!=null?Math.min(parseInt(s),10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.spent_time_counter=null),localStorage.setItem("cashman_self_table_counter",this.spent_time_counter)},1e3)},loadCurrentTableData(){this.$store.dispatch("loadCurrentTableData").then(s=>{var o,n;let e=s.table;this.table.id=e.id||null,this.table.bot_id=e.bot_id||null,this.table.number=e.number||null,this.table.creator=e.creator||null,this.table.creator_id=e.creator_id||null,this.table.officiant=e.officiant||null,this.table.officiant_id=e.officiant_id||null,this.table.closed_at=e.closed_at||null,this.table.additional_services=e.additional_services||null,this.table.config=e.config||null,this.table.clients=e.clients||[],this.summary_price=s.summary_price||0,this.summary_count=s.summary_count||0,this.clients=s.clients||[],this.basket=s.basket||[],this.self_summary_price=((o=this.basket.find(i=>i.id===this.self.id))==null?void 0:o.summary_price)||0,this.self_summary_count=((n=this.basket.find(i=>i.id===this.self.id))==null?void 0:n.summary_count)||0})}}},Sc=Object.assign(lzt,{__name:"TableCart",setup(s){return(e,o)=>{var i,r,d,c;const n=ie("mask");return l(),a(v,null,[t("div",zAt,[t("div",BAt,[t("div",LAt,[T(Rr,{onSelect:e.selectATable},null,8,["onSelect"])]),t("div",RAt,[t("ul",NAt,[t("li",qAt,[t("a",{class:C(["nav-link",{active:e.tab===0}]),onClick:o[0]||(o[0]=h=>e.changeTab(0)),"aria-current":"page",href:"javascript:void(0)"},"Столик",2)]),e.cartTotalCount>0?(l(),a("li",WAt,[t("a",{class:C(["nav-link",{active:e.tab===1}]),onClick:o[1]||(o[1]=h=>e.changeTab(1)),"aria-current":"page",href:"javascript:void(0)"},"Корзина",2)])):u("",!0),e.table.id?(l(),a("li",YAt,[t("a",{class:C(["nav-link",{active:e.tab===2}]),onClick:o[2]||(o[2]=h=>e.changeTab(2)),href:"javascript:void(0)"},"Заказы столика",2)])):u("",!0)])])]),e.tab===0?(l(),a(v,{key:0},[e.selectedTable?(l(),a("div",HAt,[t("div",QAt," Бронь столика №"+p(e.selectedTable.number),1),t("div",GAt,[t("h5",KAt," Дата: "+p(e.selectedTable.booked_date_at)+" в "+p(e.selectedTable.booked_time_at),1),t("p",JAt,[XAt,_(" "+p((i=e.selectedTable.booked_info)==null?void 0:i.name)+" ",1),ZAt,eEt,_(" "+p((r=e.selectedTable.booked_info)==null?void 0:r.phone)+" ",1),tEt,sEt,_(" "+p((d=e.selectedTable.booked_info)==null?void 0:d.persons)+" ",1),oEt,iEt,_(" "+p(((c=e.selectedTable.booked_info)==null?void 0:c.description)||"-"),1)])])])):u("",!0),e.table.id?(l(),a(v,{key:1},[e.table.closed_at!=null?(l(),a("div",nEt,[_(" Внимание! Данный столик уже "),lEt,_("! Операции со столиком недоступны! ")])):u("",!0),aEt,t("ul",rEt,[t("li",dEt,[t("p",cEt,[_("Номер столика "),t("span",uEt,"#"+p(e.table.number||"1"),1)])]),t("li",mEt,[t("p",hEt,[_("Столик оформлен на "),e.table.creator?(l(),a("a",pEt,[_Et,_(" "+p(e.table.creator.fio_from_telegram||"-"),1)])):(l(),a("span",fEt," не указано "))])]),t("li",bEt,[t("p",gEt,[_("Вас обслуживает "),e.table.officiant?(l(),a("a",yEt,[vEt,_(" "+p(e.table.officiant.name||e.table.officiant.fio_from_telegram||"-"),1)])):(l(),a("span",$Et," не указано "))])]),t("li",kEt,[t("p",wEt,[_("Кол-во гостей "),t("span",FEt,p(e.table.clients.length)+" чел.",1)])]),t("li",CEt,[t("p",PEt,[_("Заказано позиция Вами "),t("span",SEt,p(e.self_summary_count)+" ед.",1)])]),t("li",xEt,[t("p",jEt,[_("Заказано позиция Всего "),t("span",OEt,p(e.summary_count)+" ед.",1)])]),t("li",TEt,[t("p",UEt,[_("Итого по Вам "),t("span",IEt,p(e.self_summary_price)+" ₽ ("+p(e.self_summary_count)+" ед.)",1)])]),t("li",VEt,[t("p",MEt,[_("Дополнительные услуги "),t("span",AEt,p((e.table.additional_services||[]).length)+" ед. на "+p(e.servicePrice)+" ₽",1)])]),t("li",EEt,[t("p",DEt,[_("Итого по столику "),t("span",zEt,p(e.fullTablePrice)+" ₽ ("+p(e.summary_count)+" ед.)",1)])])]),t("button",{type:"button",onClick:o[3]||(o[3]=h=>e.callWaiter(!1)),class:"btn btn-outline-primary p-3 w-100 my-3"},[BEt,e.spent_time_counter<=0?(l(),a("span",LEt,"Позвать официанта")):(l(),a("span",REt,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))]),e.settings.need_bonuses_section?(l(),a(v,{key:1},[NEt,t("div",{class:C(["card my-3",{"text-bg-primary":e.orderForm.use_cashback}]),onClick:o[4]||(o[4]=h=>e.orderForm.use_cashback=!e.orderForm.use_cashback)},[t("div",qEt,[t("p",WEt,[YEt,t("strong",null,p(e.cashbackLimit)+"₽",1)])])],2)],64)):u("",!0),t("form",{onSubmit:o[11]||(o[11]=W((...h)=>e.startTablePay&&e.startTablePay(...h),["prevent"]))},[HEt,t("div",QEt,[f(t("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=h=>e.orderForm.client.name=h),id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.orderForm.client.name]]),GEt]),t("div",KEt,[f(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=h=>e.orderForm.client.phone=h),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[n,["+7(###)###-##-##"]],[k,e.orderForm.client.phone]]),JEt]),t("div",XEt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[7]||(o[7]=h=>e.orderForm.client.have_birthday=h),type:"checkbox",role:"switch",id:"client-have-birthday"},null,512),[[z,e.orderForm.client.have_birthday]]),ZEt]),e.orderForm.client.have_birthday?(l(),a("div",eDt,[_(" Если у вас День рождения, то при предъявлении "),tDt,_(" вы сможете получить подарок от заведения:) ")])):u("",!0),t("div",sDt,[t("button",{disabled:e.spent_time_counter>0,type:"submit",onClick:o[8]||(o[8]=h=>e.orderForm.is_self=!0),class:"btn btn-outline-primary p-3"},[e.spent_time_counter<=0?(l(),a("span",iDt,[nDt,_(" Оплатить за себя "),t("span",lDt,"("+p(e.self_summary_price)+"₽)",1)])):(l(),a("span",aDt,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,oDt),t("button",{disabled:e.spent_time_counter>0,type:"submit",onClick:o[9]||(o[9]=h=>e.orderForm.is_self=!1),class:"btn btn-outline-primary p-3"},[e.spent_time_counter<=0?(l(),a("span",dDt,[cDt,_(" Оплатить за столик "),t("span",uDt,"("+p(e.summary_price)+"₽)",1)])):(l(),a("span",mDt,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,rDt)]),t("div",hDt,[_(" Для оплаты наличным расчетом "),t("span",{onClick:o[10]||(o[10]=h=>e.callWaiter(!0)),class:"fw-bold text-primary"},"пригласите официанта"),_(" (нажав сюда). ")])],32)],64)):(l(),a("p",pDt," Данный столик не обслуживается! "))],64)):u("",!0),e.tab===1?(l(),a(v,{key:1},[e.table.closed_at!=null?(l(),a("div",_Dt,[_(" Внимание! Данный столик уже "),fDt,_("! Операции со столиком недоступны! ")])):u("",!0),e.loaded_settings?(l(),M(Kr,{key:1,onSelectPrize:e.selectPrize,onChangeTab:e.changeTab,"simple-mode":!0,"form-data":e.orderForm,settings:e.settings},{"upper-text":A(()=>[bDt,e.cartTotalCount>0?(l(),a("p",gDt," Данный заказ еще не передан в работу. Вам необходимо подтвердить его. Подтвержденный заказ нельзя отменить. ")):(l(),a("p",yDt," В корзине ничего нет:) "))]),_:1},8,["onSelectPrize","onChangeTab","form-data","settings"])):(l(),a("p",vDt," Вы еще ничего не выбрали из меню ")),e.selectedTable?(l(),a(v,{key:3},[$Dt,t("button",{onClick:o[12]||(o[12]=(...h)=>e.changeOrderStatus&&e.changeOrderStatus(...h)),disabled:e.cartTotalCount==0||e.spent_time_counter>0,class:"btn btn-primary w-100 p-3 mb-2"},[wDt,e.spent_time_counter<=0?(l(),a("span",FDt,"Подтвердить заказ")):(l(),a("span",CDt,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,kDt)],64)):(l(),a(v,{key:4},[e.sent_to_waiter?(l(),a("p",PDt," Ваш заказ передан официанту! Как только он подтвердит заказ страница обновится и ваш заказ будет отображаться в общем списке заказов столика! ")):u("",!0),t("button",{onClick:o[13]||(o[13]=(...h)=>e.makeOrder&&e.makeOrder(...h)),disabled:e.cartTotalCount==0||e.spent_time_counter>0,class:"btn btn-primary w-100 p-3 mb-2"},[xDt,e.spent_time_counter<=0?(l(),a("span",jDt,"Оформить заказ")):(l(),a("span",ODt,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,SDt)],64))],64)):u("",!0),e.tab===2?(l(),a(v,{key:2},[e.table.closed_at!=null?(l(),a("div",TDt,[_(" Внимание! Данный столик уже "),UDt,_("! Операции со столиком недоступны! ")])):u("",!0),IDt,e.basket.length>0?(l(!0),a(v,{key:1},O(e.basket,h=>(l(),a(v,null,[t("p",VDt,[_("Клиент "),t("span",MDt,p(h.name||"-"),1),e.self.id===h.id?(l(),a("span",ADt,DDt)):u("",!0)]),t("ul",zDt,[(l(!0),a(v,null,O(h.basket,g=>(l(),a("li",BDt,[t("span",null,[t("i",{class:C([{"text-secondary":g.table_approved_at==null,"text-success":g.table_approved_at!=null},"fa-solid fa-check-double"])},null,2),_(" "+p(g.product.title),1)]),t("span",LDt,p(g.count)+"ед. x "+p(g.product.current_price)+"₽ = "+p(g.count*g.product.current_price)+"₽",1)]))),256))]),t("p",RDt,[_("Итого по клиенту "),t("span",NDt,p(h.summary_price||0)+"₽",1)])],64))),256)):u("",!0),t("button",{type:"button",disabled:e.spent_time_counter>0,onClick:o[14]||(o[14]=(...h)=>e.sendOrderToMyChat&&e.sendOrderToMyChat(...h)),class:"btn btn-outline-primary p-3 w-100"},[WDt,e.spent_time_counter<=0?(l(),a("span",YDt," Сохранить заказ в чат ")):(l(),a("span",HDt,"Осталось ждать "+p(e.spent_time_counter)+" сек.",1))],8,qDt)],64)):u("",!0)]),t("div",QDt,[t("div",GDt,[t("div",KDt,[JDt,t("div",XDt,[e.table.creator?(l(),M(Jo,{key:0,"can-edit":!1,data:e.table.creator},null,8,["data"])):u("",!0)])])])]),t("div",ZDt,[t("div",ezt,[t("div",tzt,[szt,t("div",ozt,[e.table.officiant?(l(),M(Jo,{key:0,"can-edit":!1,data:e.table.officiant},null,8,["data"])):u("",!0)])])])]),t("nav",izt,[t("button",{type:"button",onClick:o[15]||(o[15]=(...h)=>e.goToCatalog&&e.goToCatalog(...h)),style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-3 rounded-3 shadow-lg text-center"},[nzt,_(" Вернуться к меню ")])])],64)}}}),azt=Object.freeze(Object.defineProperty({__proto__:null,default:Sc},Symbol.toStringTag,{value:"Module"}));function xc(s){throw new Error('Could not dynamically require "'+s+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qi={},rzt={get exports(){return qi},set exports(s){qi=s}},fa;function dzt(){return fa||(fa=1,function(s,e){(function(o,n){s.exports=n()})(Ca,function(){var o;function n(){return o.apply(null,arguments)}function i(m){o=m}function r(m){return m instanceof Array||Object.prototype.toString.call(m)==="[object Array]"}function d(m){return m!=null&&Object.prototype.toString.call(m)==="[object Object]"}function c(m,b){return Object.prototype.hasOwnProperty.call(m,b)}function h(m){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(m).length===0;var b;for(b in m)if(c(m,b))return!1;return!0}function g(m){return m===void 0}function w(m){return typeof m=="number"||Object.prototype.toString.call(m)==="[object Number]"}function x(m){return m instanceof Date||Object.prototype.toString.call(m)==="[object Date]"}function P(m,b){var y=[],F,S=m.length;for(F=0;F<S;++F)y.push(b(m[F],F));return y}function I(m,b){for(var y in b)c(b,y)&&(m[y]=b[y]);return c(b,"toString")&&(m.toString=b.toString),c(b,"valueOf")&&(m.valueOf=b.valueOf),m}function V(m,b,y,F){return Cl(m,b,y,F,!0).utc()}function B(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function L(m){return m._pf==null&&(m._pf=B()),m._pf}var ee;Array.prototype.some?ee=Array.prototype.some:ee=function(m){var b=Object(this),y=b.length>>>0,F;for(F=0;F<y;F++)if(F in b&&m.call(this,b[F],F,b))return!0;return!1};function J(m){if(m._isValid==null){var b=L(m),y=ee.call(b.parsedDateParts,function(S){return S!=null}),F=!isNaN(m._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidEra&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&y);if(m._strict&&(F=F&&b.charsLeftOver===0&&b.unusedTokens.length===0&&b.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(m))m._isValid=F;else return F}return m._isValid}function re(m){var b=V(NaN);return m!=null?I(L(b),m):L(b).userInvalidated=!0,b}var se=n.momentProperties=[],de=!1;function K(m,b){var y,F,S,D=se.length;if(g(b._isAMomentObject)||(m._isAMomentObject=b._isAMomentObject),g(b._i)||(m._i=b._i),g(b._f)||(m._f=b._f),g(b._l)||(m._l=b._l),g(b._strict)||(m._strict=b._strict),g(b._tzm)||(m._tzm=b._tzm),g(b._isUTC)||(m._isUTC=b._isUTC),g(b._offset)||(m._offset=b._offset),g(b._pf)||(m._pf=L(b)),g(b._locale)||(m._locale=b._locale),D>0)for(y=0;y<D;y++)F=se[y],S=b[F],g(S)||(m[F]=S);return m}function ne(m){K(this,m),this._d=new Date(m._d!=null?m._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),de===!1&&(de=!0,n.updateOffset(this),de=!1)}function te(m){return m instanceof ne||m!=null&&m._isAMomentObject!=null}function E(m){n.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+m)}function R(m,b){var y=!0;return I(function(){if(n.deprecationHandler!=null&&n.deprecationHandler(null,m),y){var F=[],S,D,H,ye=arguments.length;for(D=0;D<ye;D++){if(S="",typeof arguments[D]=="object"){S+=`
[`+D+"] ";for(H in arguments[0])c(arguments[0],H)&&(S+=H+": "+arguments[0][H]+", ");S=S.slice(0,-2)}else S=arguments[D];F.push(S)}E(m+`
Arguments: `+Array.prototype.slice.call(F).join("")+`
`+new Error().stack),y=!1}return b.apply(this,arguments)},b)}var N={};function q(m,b){n.deprecationHandler!=null&&n.deprecationHandler(m,b),N[m]||(E(b),N[m]=!0)}n.suppressDeprecationWarnings=!1,n.deprecationHandler=null;function Q(m){return typeof Function<"u"&&m instanceof Function||Object.prototype.toString.call(m)==="[object Function]"}function le(m){var b,y;for(y in m)c(m,y)&&(b=m[y],Q(b)?this[y]=b:this["_"+y]=b);this._config=m,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function pe(m,b){var y=I({},m),F;for(F in b)c(b,F)&&(d(m[F])&&d(b[F])?(y[F]={},I(y[F],m[F]),I(y[F],b[F])):b[F]!=null?y[F]=b[F]:delete y[F]);for(F in m)c(m,F)&&!c(b,F)&&d(m[F])&&(y[F]=I({},y[F]));return y}function ge(m){m!=null&&this.set(m)}var he;Object.keys?he=Object.keys:he=function(m){var b,y=[];for(b in m)c(m,b)&&y.push(b);return y};var _e={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Pe(m,b,y){var F=this._calendar[m]||this._calendar.sameElse;return Q(F)?F.call(b,y):F}function Oe(m,b,y){var F=""+Math.abs(m),S=b-F.length,D=m>=0;return(D?y?"+":"":"-")+Math.pow(10,Math.max(0,S)).toString().substr(1)+F}var Se=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Be=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Re={},Me={};function ce(m,b,y,F){var S=F;typeof F=="string"&&(S=function(){return this[F]()}),m&&(Me[m]=S),b&&(Me[b[0]]=function(){return Oe(S.apply(this,arguments),b[1],b[2])}),y&&(Me[y]=function(){return this.localeData().ordinal(S.apply(this,arguments),m)})}function pt(m){return m.match(/\[[\s\S]/)?m.replace(/^\[|\]$/g,""):m.replace(/\\/g,"")}function _t(m){var b=m.match(Se),y,F;for(y=0,F=b.length;y<F;y++)Me[b[y]]?b[y]=Me[b[y]]:b[y]=pt(b[y]);return function(S){var D="",H;for(H=0;H<F;H++)D+=Q(b[H])?b[H].call(S,m):b[H];return D}}function ot(m,b){return m.isValid()?(b=Ct(b,m.localeData()),Re[b]=Re[b]||_t(b),Re[b](m)):m.localeData().invalidDate()}function Ct(m,b){var y=5;function F(S){return b.longDateFormat(S)||S}for(Be.lastIndex=0;y>=0&&Be.test(m);)m=m.replace(Be,F),Be.lastIndex=0,y-=1;return m}var nt={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Ss(m){var b=this._longDateFormat[m],y=this._longDateFormat[m.toUpperCase()];return b||!y?b:(this._longDateFormat[m]=y.match(Se).map(function(F){return F==="MMMM"||F==="MM"||F==="DD"||F==="dddd"?F.slice(1):F}).join(""),this._longDateFormat[m])}var cs="Invalid date";function Lt(){return this._invalidDate}var Ht="%d",po=/\d{1,2}/;function vt(m){return this._ordinal.replace("%d",m)}var Ot={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Rt(m,b,y,F){var S=this._relativeTime[y];return Q(S)?S(m,b,y,F):S.replace(/%d/i,m)}function _o(m,b){var y=this._relativeTime[m>0?"future":"past"];return Q(y)?y(b):y.replace(/%s/i,b)}var Qt={};function Xe(m,b){var y=m.toLowerCase();Qt[y]=Qt[y+"s"]=Qt[b]=m}function $t(m){return typeof m=="string"?Qt[m]||Qt[m.toLowerCase()]:void 0}function Tt(m){var b={},y,F;for(F in m)c(m,F)&&(y=$t(F),y&&(b[y]=m[F]));return b}var xs={};function ut(m,b){xs[m]=b}function js(m){var b=[],y;for(y in m)c(m,y)&&b.push({unit:y,priority:xs[y]});return b.sort(function(F,S){return F.priority-S.priority}),b}function ft(m){return m%4===0&&m%100!==0||m%400===0}function mt(m){return m<0?Math.ceil(m)||0:Math.floor(m)}function xe(m){var b=+m,y=0;return b!==0&&isFinite(b)&&(y=mt(b)),y}function Nt(m,b){return function(y){return y!=null?(Os(this,m,y),n.updateOffset(this,b),this):us(this,m)}}function us(m,b){return m.isValid()?m._d["get"+(m._isUTC?"UTC":"")+b]():NaN}function Os(m,b,y){m.isValid()&&!isNaN(y)&&(b==="FullYear"&&ft(m.year())&&m.month()===1&&m.date()===29?(y=xe(y),m._d["set"+(m._isUTC?"UTC":"")+b](y,m.month(),ri(y,m.month()))):m._d["set"+(m._isUTC?"UTC":"")+b](y))}function Ts(m){return m=$t(m),Q(this[m])?this[m]():this}function Ws(m,b){if(typeof m=="object"){m=Tt(m);var y=js(m),F,S=y.length;for(F=0;F<S;F++)this[y[F].unit](m[y[F].unit])}else if(m=$t(m),Q(this[m]))return this[m](b);return this}var ms=/\d/,bt=/\d\d/,Ys=/\d{3}/,hs=/\d{4}/,ps=/[+-]?\d{6}/,Ne=/\d\d?/,At=/\d\d\d\d?/,Hs=/\d\d\d\d\d\d?/,_s=/\d{1,3}/,Ue=/\d{1,4}/,fe=/[+-]?\d{1,6}/,ve=/\d+/,ke=/[+-]?\d+/,Le=/Z|[+-]\d\d:?\d\d/gi,it=/Z|[+-]\d\d(?::?\d\d)?/gi,Ao=/[+-]?\d+(\.\d{1,3})?/,U=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,X;X={};function Y(m,b,y){X[m]=Q(b)?b:function(F,S){return F&&y?y:b}}function ue(m,b){return c(X,m)?X[m](b._strict,b._locale):new RegExp(me(m))}function me(m){return we(m.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(b,y,F,S,D){return y||F||S||D}))}function we(m){return m.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var Ae={};function be(m,b){var y,F=b,S;for(typeof m=="string"&&(m=[m]),w(b)&&(F=function(D,H){H[b]=xe(D)}),S=m.length,y=0;y<S;y++)Ae[m[y]]=F}function We(m,b){be(m,function(y,F,S,D){S._w=S._w||{},b(y,S._w,S,D)})}function Us(m,b,y){b!=null&&c(Ae,m)&&Ae[m](b,y._a,y,m)}var gt=0,Gt=1,qt=2,lt=3,Kt=4,fs=5,Qs=6,Vc=7,Mc=8;function Ac(m,b){return(m%b+b)%b}var at;Array.prototype.indexOf?at=Array.prototype.indexOf:at=function(m){var b;for(b=0;b<this.length;++b)if(this[b]===m)return b;return-1};function ri(m,b){if(isNaN(m)||isNaN(b))return NaN;var y=Ac(b,12);return m+=(b-y)/12,y===1?ft(m)?29:28:31-y%7%2}ce("M",["MM",2],"Mo",function(){return this.month()+1}),ce("MMM",0,0,function(m){return this.localeData().monthsShort(this,m)}),ce("MMMM",0,0,function(m){return this.localeData().months(this,m)}),Xe("month","M"),ut("month",8),Y("M",Ne),Y("MM",Ne,bt),Y("MMM",function(m,b){return b.monthsShortRegex(m)}),Y("MMMM",function(m,b){return b.monthsRegex(m)}),be(["M","MM"],function(m,b){b[Gt]=xe(m)-1}),be(["MMM","MMMM"],function(m,b,y,F){var S=y._locale.monthsParse(m,F,y._strict);S!=null?b[Gt]=S:L(y).invalidMonth=m});var Ec="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),cl="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ul=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Dc=U,zc=U;function Bc(m,b){return m?r(this._months)?this._months[m.month()]:this._months[(this._months.isFormat||ul).test(b)?"format":"standalone"][m.month()]:r(this._months)?this._months:this._months.standalone}function Lc(m,b){return m?r(this._monthsShort)?this._monthsShort[m.month()]:this._monthsShort[ul.test(b)?"format":"standalone"][m.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function Rc(m,b,y){var F,S,D,H=m.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],F=0;F<12;++F)D=V([2e3,F]),this._shortMonthsParse[F]=this.monthsShort(D,"").toLocaleLowerCase(),this._longMonthsParse[F]=this.months(D,"").toLocaleLowerCase();return y?b==="MMM"?(S=at.call(this._shortMonthsParse,H),S!==-1?S:null):(S=at.call(this._longMonthsParse,H),S!==-1?S:null):b==="MMM"?(S=at.call(this._shortMonthsParse,H),S!==-1?S:(S=at.call(this._longMonthsParse,H),S!==-1?S:null)):(S=at.call(this._longMonthsParse,H),S!==-1?S:(S=at.call(this._shortMonthsParse,H),S!==-1?S:null))}function Nc(m,b,y){var F,S,D;if(this._monthsParseExact)return Rc.call(this,m,b,y);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),F=0;F<12;F++){if(S=V([2e3,F]),y&&!this._longMonthsParse[F]&&(this._longMonthsParse[F]=new RegExp("^"+this.months(S,"").replace(".","")+"$","i"),this._shortMonthsParse[F]=new RegExp("^"+this.monthsShort(S,"").replace(".","")+"$","i")),!y&&!this._monthsParse[F]&&(D="^"+this.months(S,"")+"|^"+this.monthsShort(S,""),this._monthsParse[F]=new RegExp(D.replace(".",""),"i")),y&&b==="MMMM"&&this._longMonthsParse[F].test(m))return F;if(y&&b==="MMM"&&this._shortMonthsParse[F].test(m))return F;if(!y&&this._monthsParse[F].test(m))return F}}function ml(m,b){var y;if(!m.isValid())return m;if(typeof b=="string"){if(/^\d+$/.test(b))b=xe(b);else if(b=m.localeData().monthsParse(b),!w(b))return m}return y=Math.min(m.date(),ri(m.year(),b)),m._d["set"+(m._isUTC?"UTC":"")+"Month"](b,y),m}function hl(m){return m!=null?(ml(this,m),n.updateOffset(this,!0),this):us(this,"Month")}function qc(){return ri(this.year(),this.month())}function Wc(m){return this._monthsParseExact?(c(this,"_monthsRegex")||pl.call(this),m?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Dc),this._monthsShortStrictRegex&&m?this._monthsShortStrictRegex:this._monthsShortRegex)}function Yc(m){return this._monthsParseExact?(c(this,"_monthsRegex")||pl.call(this),m?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=zc),this._monthsStrictRegex&&m?this._monthsStrictRegex:this._monthsRegex)}function pl(){function m(H,ye){return ye.length-H.length}var b=[],y=[],F=[],S,D;for(S=0;S<12;S++)D=V([2e3,S]),b.push(this.monthsShort(D,"")),y.push(this.months(D,"")),F.push(this.months(D,"")),F.push(this.monthsShort(D,""));for(b.sort(m),y.sort(m),F.sort(m),S=0;S<12;S++)b[S]=we(b[S]),y[S]=we(y[S]);for(S=0;S<24;S++)F[S]=we(F[S]);this._monthsRegex=new RegExp("^("+F.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}ce("Y",0,0,function(){var m=this.year();return m<=9999?Oe(m,4):"+"+m}),ce(0,["YY",2],0,function(){return this.year()%100}),ce(0,["YYYY",4],0,"year"),ce(0,["YYYYY",5],0,"year"),ce(0,["YYYYYY",6,!0],0,"year"),Xe("year","y"),ut("year",1),Y("Y",ke),Y("YY",Ne,bt),Y("YYYY",Ue,hs),Y("YYYYY",fe,ps),Y("YYYYYY",fe,ps),be(["YYYYY","YYYYYY"],gt),be("YYYY",function(m,b){b[gt]=m.length===2?n.parseTwoDigitYear(m):xe(m)}),be("YY",function(m,b){b[gt]=n.parseTwoDigitYear(m)}),be("Y",function(m,b){b[gt]=parseInt(m,10)});function Eo(m){return ft(m)?366:365}n.parseTwoDigitYear=function(m){return xe(m)+(xe(m)>68?1900:2e3)};var _l=Nt("FullYear",!0);function Hc(){return ft(this.year())}function Qc(m,b,y,F,S,D,H){var ye;return m<100&&m>=0?(ye=new Date(m+400,b,y,F,S,D,H),isFinite(ye.getFullYear())&&ye.setFullYear(m)):ye=new Date(m,b,y,F,S,D,H),ye}function Do(m){var b,y;return m<100&&m>=0?(y=Array.prototype.slice.call(arguments),y[0]=m+400,b=new Date(Date.UTC.apply(null,y)),isFinite(b.getUTCFullYear())&&b.setUTCFullYear(m)):b=new Date(Date.UTC.apply(null,arguments)),b}function di(m,b,y){var F=7+b-y,S=(7+Do(m,0,F).getUTCDay()-b)%7;return-S+F-1}function fl(m,b,y,F,S){var D=(7+y-F)%7,H=di(m,F,S),ye=1+7*(b-1)+D+H,Te,He;return ye<=0?(Te=m-1,He=Eo(Te)+ye):ye>Eo(m)?(Te=m+1,He=ye-Eo(m)):(Te=m,He=ye),{year:Te,dayOfYear:He}}function zo(m,b,y){var F=di(m.year(),b,y),S=Math.floor((m.dayOfYear()-F-1)/7)+1,D,H;return S<1?(H=m.year()-1,D=S+bs(H,b,y)):S>bs(m.year(),b,y)?(D=S-bs(m.year(),b,y),H=m.year()+1):(H=m.year(),D=S),{week:D,year:H}}function bs(m,b,y){var F=di(m,b,y),S=di(m+1,b,y);return(Eo(m)-F+S)/7}ce("w",["ww",2],"wo","week"),ce("W",["WW",2],"Wo","isoWeek"),Xe("week","w"),Xe("isoWeek","W"),ut("week",5),ut("isoWeek",5),Y("w",Ne),Y("ww",Ne,bt),Y("W",Ne),Y("WW",Ne,bt),We(["w","ww","W","WW"],function(m,b,y,F){b[F.substr(0,1)]=xe(m)});function Gc(m){return zo(m,this._week.dow,this._week.doy).week}var Kc={dow:0,doy:6};function Jc(){return this._week.dow}function Xc(){return this._week.doy}function Zc(m){var b=this.localeData().week(this);return m==null?b:this.add((m-b)*7,"d")}function eu(m){var b=zo(this,1,4).week;return m==null?b:this.add((m-b)*7,"d")}ce("d",0,"do","day"),ce("dd",0,0,function(m){return this.localeData().weekdaysMin(this,m)}),ce("ddd",0,0,function(m){return this.localeData().weekdaysShort(this,m)}),ce("dddd",0,0,function(m){return this.localeData().weekdays(this,m)}),ce("e",0,0,"weekday"),ce("E",0,0,"isoWeekday"),Xe("day","d"),Xe("weekday","e"),Xe("isoWeekday","E"),ut("day",11),ut("weekday",11),ut("isoWeekday",11),Y("d",Ne),Y("e",Ne),Y("E",Ne),Y("dd",function(m,b){return b.weekdaysMinRegex(m)}),Y("ddd",function(m,b){return b.weekdaysShortRegex(m)}),Y("dddd",function(m,b){return b.weekdaysRegex(m)}),We(["dd","ddd","dddd"],function(m,b,y,F){var S=y._locale.weekdaysParse(m,F,y._strict);S!=null?b.d=S:L(y).invalidWeekday=m}),We(["d","e","E"],function(m,b,y,F){b[F]=xe(m)});function tu(m,b){return typeof m!="string"?m:isNaN(m)?(m=b.weekdaysParse(m),typeof m=="number"?m:null):parseInt(m,10)}function su(m,b){return typeof m=="string"?b.weekdaysParse(m)%7||7:isNaN(m)?null:m}function cn(m,b){return m.slice(b,7).concat(m.slice(0,b))}var ou="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),bl="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),iu="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),nu=U,lu=U,au=U;function ru(m,b){var y=r(this._weekdays)?this._weekdays:this._weekdays[m&&m!==!0&&this._weekdays.isFormat.test(b)?"format":"standalone"];return m===!0?cn(y,this._week.dow):m?y[m.day()]:y}function du(m){return m===!0?cn(this._weekdaysShort,this._week.dow):m?this._weekdaysShort[m.day()]:this._weekdaysShort}function cu(m){return m===!0?cn(this._weekdaysMin,this._week.dow):m?this._weekdaysMin[m.day()]:this._weekdaysMin}function uu(m,b,y){var F,S,D,H=m.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],F=0;F<7;++F)D=V([2e3,1]).day(F),this._minWeekdaysParse[F]=this.weekdaysMin(D,"").toLocaleLowerCase(),this._shortWeekdaysParse[F]=this.weekdaysShort(D,"").toLocaleLowerCase(),this._weekdaysParse[F]=this.weekdays(D,"").toLocaleLowerCase();return y?b==="dddd"?(S=at.call(this._weekdaysParse,H),S!==-1?S:null):b==="ddd"?(S=at.call(this._shortWeekdaysParse,H),S!==-1?S:null):(S=at.call(this._minWeekdaysParse,H),S!==-1?S:null):b==="dddd"?(S=at.call(this._weekdaysParse,H),S!==-1||(S=at.call(this._shortWeekdaysParse,H),S!==-1)?S:(S=at.call(this._minWeekdaysParse,H),S!==-1?S:null)):b==="ddd"?(S=at.call(this._shortWeekdaysParse,H),S!==-1||(S=at.call(this._weekdaysParse,H),S!==-1)?S:(S=at.call(this._minWeekdaysParse,H),S!==-1?S:null)):(S=at.call(this._minWeekdaysParse,H),S!==-1||(S=at.call(this._weekdaysParse,H),S!==-1)?S:(S=at.call(this._shortWeekdaysParse,H),S!==-1?S:null))}function mu(m,b,y){var F,S,D;if(this._weekdaysParseExact)return uu.call(this,m,b,y);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),F=0;F<7;F++){if(S=V([2e3,1]).day(F),y&&!this._fullWeekdaysParse[F]&&(this._fullWeekdaysParse[F]=new RegExp("^"+this.weekdays(S,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[F]=new RegExp("^"+this.weekdaysShort(S,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[F]=new RegExp("^"+this.weekdaysMin(S,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[F]||(D="^"+this.weekdays(S,"")+"|^"+this.weekdaysShort(S,"")+"|^"+this.weekdaysMin(S,""),this._weekdaysParse[F]=new RegExp(D.replace(".",""),"i")),y&&b==="dddd"&&this._fullWeekdaysParse[F].test(m))return F;if(y&&b==="ddd"&&this._shortWeekdaysParse[F].test(m))return F;if(y&&b==="dd"&&this._minWeekdaysParse[F].test(m))return F;if(!y&&this._weekdaysParse[F].test(m))return F}}function hu(m){if(!this.isValid())return m!=null?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return m!=null?(m=tu(m,this.localeData()),this.add(m-b,"d")):b}function pu(m){if(!this.isValid())return m!=null?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return m==null?b:this.add(m-b,"d")}function _u(m){if(!this.isValid())return m!=null?this:NaN;if(m!=null){var b=su(m,this.localeData());return this.day(this.day()%7?b:b-7)}else return this.day()||7}function fu(m){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||un.call(this),m?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=nu),this._weekdaysStrictRegex&&m?this._weekdaysStrictRegex:this._weekdaysRegex)}function bu(m){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||un.call(this),m?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=lu),this._weekdaysShortStrictRegex&&m?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function gu(m){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||un.call(this),m?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=au),this._weekdaysMinStrictRegex&&m?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function un(){function m(Pt,ks){return ks.length-Pt.length}var b=[],y=[],F=[],S=[],D,H,ye,Te,He;for(D=0;D<7;D++)H=V([2e3,1]).day(D),ye=we(this.weekdaysMin(H,"")),Te=we(this.weekdaysShort(H,"")),He=we(this.weekdays(H,"")),b.push(ye),y.push(Te),F.push(He),S.push(ye),S.push(Te),S.push(He);b.sort(m),y.sort(m),F.sort(m),S.sort(m),this._weekdaysRegex=new RegExp("^("+S.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+F.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+y.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function mn(){return this.hours()%12||12}function yu(){return this.hours()||24}ce("H",["HH",2],0,"hour"),ce("h",["hh",2],0,mn),ce("k",["kk",2],0,yu),ce("hmm",0,0,function(){return""+mn.apply(this)+Oe(this.minutes(),2)}),ce("hmmss",0,0,function(){return""+mn.apply(this)+Oe(this.minutes(),2)+Oe(this.seconds(),2)}),ce("Hmm",0,0,function(){return""+this.hours()+Oe(this.minutes(),2)}),ce("Hmmss",0,0,function(){return""+this.hours()+Oe(this.minutes(),2)+Oe(this.seconds(),2)});function gl(m,b){ce(m,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}gl("a",!0),gl("A",!1),Xe("hour","h"),ut("hour",13);function yl(m,b){return b._meridiemParse}Y("a",yl),Y("A",yl),Y("H",Ne),Y("h",Ne),Y("k",Ne),Y("HH",Ne,bt),Y("hh",Ne,bt),Y("kk",Ne,bt),Y("hmm",At),Y("hmmss",Hs),Y("Hmm",At),Y("Hmmss",Hs),be(["H","HH"],lt),be(["k","kk"],function(m,b,y){var F=xe(m);b[lt]=F===24?0:F}),be(["a","A"],function(m,b,y){y._isPm=y._locale.isPM(m),y._meridiem=m}),be(["h","hh"],function(m,b,y){b[lt]=xe(m),L(y).bigHour=!0}),be("hmm",function(m,b,y){var F=m.length-2;b[lt]=xe(m.substr(0,F)),b[Kt]=xe(m.substr(F)),L(y).bigHour=!0}),be("hmmss",function(m,b,y){var F=m.length-4,S=m.length-2;b[lt]=xe(m.substr(0,F)),b[Kt]=xe(m.substr(F,2)),b[fs]=xe(m.substr(S)),L(y).bigHour=!0}),be("Hmm",function(m,b,y){var F=m.length-2;b[lt]=xe(m.substr(0,F)),b[Kt]=xe(m.substr(F))}),be("Hmmss",function(m,b,y){var F=m.length-4,S=m.length-2;b[lt]=xe(m.substr(0,F)),b[Kt]=xe(m.substr(F,2)),b[fs]=xe(m.substr(S))});function vu(m){return(m+"").toLowerCase().charAt(0)==="p"}var $u=/[ap]\.?m?\.?/i,ku=Nt("Hours",!0);function wu(m,b,y){return m>11?y?"pm":"PM":y?"am":"AM"}var vl={calendar:_e,longDateFormat:nt,invalidDate:cs,ordinal:Ht,dayOfMonthOrdinalParse:po,relativeTime:Ot,months:Ec,monthsShort:cl,week:Kc,weekdays:ou,weekdaysMin:iu,weekdaysShort:bl,meridiemParse:$u},Ze={},Bo={},Lo;function Fu(m,b){var y,F=Math.min(m.length,b.length);for(y=0;y<F;y+=1)if(m[y]!==b[y])return y;return F}function $l(m){return m&&m.toLowerCase().replace("_","-")}function Cu(m){for(var b=0,y,F,S,D;b<m.length;){for(D=$l(m[b]).split("-"),y=D.length,F=$l(m[b+1]),F=F?F.split("-"):null;y>0;){if(S=ci(D.slice(0,y).join("-")),S)return S;if(F&&F.length>=y&&Fu(D,F)>=y-1)break;y--}b++}return Lo}function Pu(m){return m.match("^[^/\\\\]*$")!=null}function ci(m){var b=null,y;if(Ze[m]===void 0&&s&&s.exports&&Pu(m))try{b=Lo._abbr,y=xc,y("./locale/"+m),Is(b)}catch{Ze[m]=null}return Ze[m]}function Is(m,b){var y;return m&&(g(b)?y=gs(m):y=hn(m,b),y?Lo=y:typeof console<"u"&&console.warn&&console.warn("Locale "+m+" not found. Did you forget to load it?")),Lo._abbr}function hn(m,b){if(b!==null){var y,F=vl;if(b.abbr=m,Ze[m]!=null)q("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),F=Ze[m]._config;else if(b.parentLocale!=null)if(Ze[b.parentLocale]!=null)F=Ze[b.parentLocale]._config;else if(y=ci(b.parentLocale),y!=null)F=y._config;else return Bo[b.parentLocale]||(Bo[b.parentLocale]=[]),Bo[b.parentLocale].push({name:m,config:b}),null;return Ze[m]=new ge(pe(F,b)),Bo[m]&&Bo[m].forEach(function(S){hn(S.name,S.config)}),Is(m),Ze[m]}else return delete Ze[m],null}function Su(m,b){if(b!=null){var y,F,S=vl;Ze[m]!=null&&Ze[m].parentLocale!=null?Ze[m].set(pe(Ze[m]._config,b)):(F=ci(m),F!=null&&(S=F._config),b=pe(S,b),F==null&&(b.abbr=m),y=new ge(b),y.parentLocale=Ze[m],Ze[m]=y),Is(m)}else Ze[m]!=null&&(Ze[m].parentLocale!=null?(Ze[m]=Ze[m].parentLocale,m===Is()&&Is(m)):Ze[m]!=null&&delete Ze[m]);return Ze[m]}function gs(m){var b;if(m&&m._locale&&m._locale._abbr&&(m=m._locale._abbr),!m)return Lo;if(!r(m)){if(b=ci(m),b)return b;m=[m]}return Cu(m)}function xu(){return he(Ze)}function pn(m){var b,y=m._a;return y&&L(m).overflow===-2&&(b=y[Gt]<0||y[Gt]>11?Gt:y[qt]<1||y[qt]>ri(y[gt],y[Gt])?qt:y[lt]<0||y[lt]>24||y[lt]===24&&(y[Kt]!==0||y[fs]!==0||y[Qs]!==0)?lt:y[Kt]<0||y[Kt]>59?Kt:y[fs]<0||y[fs]>59?fs:y[Qs]<0||y[Qs]>999?Qs:-1,L(m)._overflowDayOfYear&&(b<gt||b>qt)&&(b=qt),L(m)._overflowWeeks&&b===-1&&(b=Vc),L(m)._overflowWeekday&&b===-1&&(b=Mc),L(m).overflow=b),m}var ju=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ou=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Tu=/Z|[+-]\d\d(?::?\d\d)?/,ui=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],_n=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Uu=/^\/?Date\((-?\d+)/i,Iu=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Vu={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function kl(m){var b,y,F=m._i,S=ju.exec(F)||Ou.exec(F),D,H,ye,Te,He=ui.length,Pt=_n.length;if(S){for(L(m).iso=!0,b=0,y=He;b<y;b++)if(ui[b][1].exec(S[1])){H=ui[b][0],D=ui[b][2]!==!1;break}if(H==null){m._isValid=!1;return}if(S[3]){for(b=0,y=Pt;b<y;b++)if(_n[b][1].exec(S[3])){ye=(S[2]||" ")+_n[b][0];break}if(ye==null){m._isValid=!1;return}}if(!D&&ye!=null){m._isValid=!1;return}if(S[4])if(Tu.exec(S[4]))Te="Z";else{m._isValid=!1;return}m._f=H+(ye||"")+(Te||""),bn(m)}else m._isValid=!1}function Mu(m,b,y,F,S,D){var H=[Au(m),cl.indexOf(b),parseInt(y,10),parseInt(F,10),parseInt(S,10)];return D&&H.push(parseInt(D,10)),H}function Au(m){var b=parseInt(m,10);return b<=49?2e3+b:b<=999?1900+b:b}function Eu(m){return m.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Du(m,b,y){if(m){var F=bl.indexOf(m),S=new Date(b[0],b[1],b[2]).getDay();if(F!==S)return L(y).weekdayMismatch=!0,y._isValid=!1,!1}return!0}function zu(m,b,y){if(m)return Vu[m];if(b)return 0;var F=parseInt(y,10),S=F%100,D=(F-S)/100;return D*60+S}function wl(m){var b=Iu.exec(Eu(m._i)),y;if(b){if(y=Mu(b[4],b[3],b[2],b[5],b[6],b[7]),!Du(b[1],y,m))return;m._a=y,m._tzm=zu(b[8],b[9],b[10]),m._d=Do.apply(null,m._a),m._d.setUTCMinutes(m._d.getUTCMinutes()-m._tzm),L(m).rfc2822=!0}else m._isValid=!1}function Bu(m){var b=Uu.exec(m._i);if(b!==null){m._d=new Date(+b[1]);return}if(kl(m),m._isValid===!1)delete m._isValid;else return;if(wl(m),m._isValid===!1)delete m._isValid;else return;m._strict?m._isValid=!1:n.createFromInputFallback(m)}n.createFromInputFallback=R("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(m){m._d=new Date(m._i+(m._useUTC?" UTC":""))});function fo(m,b,y){return m??b??y}function Lu(m){var b=new Date(n.now());return m._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function fn(m){var b,y,F=[],S,D,H;if(!m._d){for(S=Lu(m),m._w&&m._a[qt]==null&&m._a[Gt]==null&&Ru(m),m._dayOfYear!=null&&(H=fo(m._a[gt],S[gt]),(m._dayOfYear>Eo(H)||m._dayOfYear===0)&&(L(m)._overflowDayOfYear=!0),y=Do(H,0,m._dayOfYear),m._a[Gt]=y.getUTCMonth(),m._a[qt]=y.getUTCDate()),b=0;b<3&&m._a[b]==null;++b)m._a[b]=F[b]=S[b];for(;b<7;b++)m._a[b]=F[b]=m._a[b]==null?b===2?1:0:m._a[b];m._a[lt]===24&&m._a[Kt]===0&&m._a[fs]===0&&m._a[Qs]===0&&(m._nextDay=!0,m._a[lt]=0),m._d=(m._useUTC?Do:Qc).apply(null,F),D=m._useUTC?m._d.getUTCDay():m._d.getDay(),m._tzm!=null&&m._d.setUTCMinutes(m._d.getUTCMinutes()-m._tzm),m._nextDay&&(m._a[lt]=24),m._w&&typeof m._w.d<"u"&&m._w.d!==D&&(L(m).weekdayMismatch=!0)}}function Ru(m){var b,y,F,S,D,H,ye,Te,He;b=m._w,b.GG!=null||b.W!=null||b.E!=null?(D=1,H=4,y=fo(b.GG,m._a[gt],zo(Je(),1,4).year),F=fo(b.W,1),S=fo(b.E,1),(S<1||S>7)&&(Te=!0)):(D=m._locale._week.dow,H=m._locale._week.doy,He=zo(Je(),D,H),y=fo(b.gg,m._a[gt],He.year),F=fo(b.w,He.week),b.d!=null?(S=b.d,(S<0||S>6)&&(Te=!0)):b.e!=null?(S=b.e+D,(b.e<0||b.e>6)&&(Te=!0)):S=D),F<1||F>bs(y,D,H)?L(m)._overflowWeeks=!0:Te!=null?L(m)._overflowWeekday=!0:(ye=fl(y,F,S,D,H),m._a[gt]=ye.year,m._dayOfYear=ye.dayOfYear)}n.ISO_8601=function(){},n.RFC_2822=function(){};function bn(m){if(m._f===n.ISO_8601){kl(m);return}if(m._f===n.RFC_2822){wl(m);return}m._a=[],L(m).empty=!0;var b=""+m._i,y,F,S,D,H,ye=b.length,Te=0,He,Pt;for(S=Ct(m._f,m._locale).match(Se)||[],Pt=S.length,y=0;y<Pt;y++)D=S[y],F=(b.match(ue(D,m))||[])[0],F&&(H=b.substr(0,b.indexOf(F)),H.length>0&&L(m).unusedInput.push(H),b=b.slice(b.indexOf(F)+F.length),Te+=F.length),Me[D]?(F?L(m).empty=!1:L(m).unusedTokens.push(D),Us(D,F,m)):m._strict&&!F&&L(m).unusedTokens.push(D);L(m).charsLeftOver=ye-Te,b.length>0&&L(m).unusedInput.push(b),m._a[lt]<=12&&L(m).bigHour===!0&&m._a[lt]>0&&(L(m).bigHour=void 0),L(m).parsedDateParts=m._a.slice(0),L(m).meridiem=m._meridiem,m._a[lt]=Nu(m._locale,m._a[lt],m._meridiem),He=L(m).era,He!==null&&(m._a[gt]=m._locale.erasConvertYear(He,m._a[gt])),fn(m),pn(m)}function Nu(m,b,y){var F;return y==null?b:m.meridiemHour!=null?m.meridiemHour(b,y):(m.isPM!=null&&(F=m.isPM(y),F&&b<12&&(b+=12),!F&&b===12&&(b=0)),b)}function qu(m){var b,y,F,S,D,H,ye=!1,Te=m._f.length;if(Te===0){L(m).invalidFormat=!0,m._d=new Date(NaN);return}for(S=0;S<Te;S++)D=0,H=!1,b=K({},m),m._useUTC!=null&&(b._useUTC=m._useUTC),b._f=m._f[S],bn(b),J(b)&&(H=!0),D+=L(b).charsLeftOver,D+=L(b).unusedTokens.length*10,L(b).score=D,ye?D<F&&(F=D,y=b):(F==null||D<F||H)&&(F=D,y=b,H&&(ye=!0));I(m,y||b)}function Wu(m){if(!m._d){var b=Tt(m._i),y=b.day===void 0?b.date:b.day;m._a=P([b.year,b.month,y,b.hour,b.minute,b.second,b.millisecond],function(F){return F&&parseInt(F,10)}),fn(m)}}function Yu(m){var b=new ne(pn(Fl(m)));return b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b}function Fl(m){var b=m._i,y=m._f;return m._locale=m._locale||gs(m._l),b===null||y===void 0&&b===""?re({nullInput:!0}):(typeof b=="string"&&(m._i=b=m._locale.preparse(b)),te(b)?new ne(pn(b)):(x(b)?m._d=b:r(y)?qu(m):y?bn(m):Hu(m),J(m)||(m._d=null),m))}function Hu(m){var b=m._i;g(b)?m._d=new Date(n.now()):x(b)?m._d=new Date(b.valueOf()):typeof b=="string"?Bu(m):r(b)?(m._a=P(b.slice(0),function(y){return parseInt(y,10)}),fn(m)):d(b)?Wu(m):w(b)?m._d=new Date(b):n.createFromInputFallback(m)}function Cl(m,b,y,F,S){var D={};return(b===!0||b===!1)&&(F=b,b=void 0),(y===!0||y===!1)&&(F=y,y=void 0),(d(m)&&h(m)||r(m)&&m.length===0)&&(m=void 0),D._isAMomentObject=!0,D._useUTC=D._isUTC=S,D._l=y,D._i=m,D._f=b,D._strict=F,Yu(D)}function Je(m,b,y,F){return Cl(m,b,y,F,!1)}var Qu=R("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var m=Je.apply(null,arguments);return this.isValid()&&m.isValid()?m<this?this:m:re()}),Gu=R("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var m=Je.apply(null,arguments);return this.isValid()&&m.isValid()?m>this?this:m:re()});function Pl(m,b){var y,F;if(b.length===1&&r(b[0])&&(b=b[0]),!b.length)return Je();for(y=b[0],F=1;F<b.length;++F)(!b[F].isValid()||b[F][m](y))&&(y=b[F]);return y}function Ku(){var m=[].slice.call(arguments,0);return Pl("isBefore",m)}function Ju(){var m=[].slice.call(arguments,0);return Pl("isAfter",m)}var Xu=function(){return Date.now?Date.now():+new Date},Ro=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Zu(m){var b,y=!1,F,S=Ro.length;for(b in m)if(c(m,b)&&!(at.call(Ro,b)!==-1&&(m[b]==null||!isNaN(m[b]))))return!1;for(F=0;F<S;++F)if(m[Ro[F]]){if(y)return!1;parseFloat(m[Ro[F]])!==xe(m[Ro[F]])&&(y=!0)}return!0}function em(){return this._isValid}function tm(){return Jt(NaN)}function mi(m){var b=Tt(m),y=b.year||0,F=b.quarter||0,S=b.month||0,D=b.week||b.isoWeek||0,H=b.day||0,ye=b.hour||0,Te=b.minute||0,He=b.second||0,Pt=b.millisecond||0;this._isValid=Zu(b),this._milliseconds=+Pt+He*1e3+Te*6e4+ye*1e3*60*60,this._days=+H+D*7,this._months=+S+F*3+y*12,this._data={},this._locale=gs(),this._bubble()}function hi(m){return m instanceof mi}function gn(m){return m<0?Math.round(-1*m)*-1:Math.round(m)}function sm(m,b,y){var F=Math.min(m.length,b.length),S=Math.abs(m.length-b.length),D=0,H;for(H=0;H<F;H++)(y&&m[H]!==b[H]||!y&&xe(m[H])!==xe(b[H]))&&D++;return D+S}function Sl(m,b){ce(m,0,0,function(){var y=this.utcOffset(),F="+";return y<0&&(y=-y,F="-"),F+Oe(~~(y/60),2)+b+Oe(~~y%60,2)})}Sl("Z",":"),Sl("ZZ",""),Y("Z",it),Y("ZZ",it),be(["Z","ZZ"],function(m,b,y){y._useUTC=!0,y._tzm=yn(it,m)});var om=/([\+\-]|\d\d)/gi;function yn(m,b){var y=(b||"").match(m),F,S,D;return y===null?null:(F=y[y.length-1]||[],S=(F+"").match(om)||["-",0,0],D=+(S[1]*60)+xe(S[2]),D===0?0:S[0]==="+"?D:-D)}function vn(m,b){var y,F;return b._isUTC?(y=b.clone(),F=(te(m)||x(m)?m.valueOf():Je(m).valueOf())-y.valueOf(),y._d.setTime(y._d.valueOf()+F),n.updateOffset(y,!1),y):Je(m).local()}function $n(m){return-Math.round(m._d.getTimezoneOffset())}n.updateOffset=function(){};function im(m,b,y){var F=this._offset||0,S;if(!this.isValid())return m!=null?this:NaN;if(m!=null){if(typeof m=="string"){if(m=yn(it,m),m===null)return this}else Math.abs(m)<16&&!y&&(m=m*60);return!this._isUTC&&b&&(S=$n(this)),this._offset=m,this._isUTC=!0,S!=null&&this.add(S,"m"),F!==m&&(!b||this._changeInProgress?Tl(this,Jt(m-F,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,n.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?F:$n(this)}function nm(m,b){return m!=null?(typeof m!="string"&&(m=-m),this.utcOffset(m,b),this):-this.utcOffset()}function lm(m){return this.utcOffset(0,m)}function am(m){return this._isUTC&&(this.utcOffset(0,m),this._isUTC=!1,m&&this.subtract($n(this),"m")),this}function rm(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var m=yn(Le,this._i);m!=null?this.utcOffset(m):this.utcOffset(0,!0)}return this}function dm(m){return this.isValid()?(m=m?Je(m).utcOffset():0,(this.utcOffset()-m)%60===0):!1}function cm(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function um(){if(!g(this._isDSTShifted))return this._isDSTShifted;var m={},b;return K(m,this),m=Fl(m),m._a?(b=m._isUTC?V(m._a):Je(m._a),this._isDSTShifted=this.isValid()&&sm(m._a,b.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function mm(){return this.isValid()?!this._isUTC:!1}function hm(){return this.isValid()?this._isUTC:!1}function xl(){return this.isValid()?this._isUTC&&this._offset===0:!1}var pm=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,_m=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Jt(m,b){var y=m,F=null,S,D,H;return hi(m)?y={ms:m._milliseconds,d:m._days,M:m._months}:w(m)||!isNaN(+m)?(y={},b?y[b]=+m:y.milliseconds=+m):(F=pm.exec(m))?(S=F[1]==="-"?-1:1,y={y:0,d:xe(F[qt])*S,h:xe(F[lt])*S,m:xe(F[Kt])*S,s:xe(F[fs])*S,ms:xe(gn(F[Qs]*1e3))*S}):(F=_m.exec(m))?(S=F[1]==="-"?-1:1,y={y:Gs(F[2],S),M:Gs(F[3],S),w:Gs(F[4],S),d:Gs(F[5],S),h:Gs(F[6],S),m:Gs(F[7],S),s:Gs(F[8],S)}):y==null?y={}:typeof y=="object"&&("from"in y||"to"in y)&&(H=fm(Je(y.from),Je(y.to)),y={},y.ms=H.milliseconds,y.M=H.months),D=new mi(y),hi(m)&&c(m,"_locale")&&(D._locale=m._locale),hi(m)&&c(m,"_isValid")&&(D._isValid=m._isValid),D}Jt.fn=mi.prototype,Jt.invalid=tm;function Gs(m,b){var y=m&&parseFloat(m.replace(",","."));return(isNaN(y)?0:y)*b}function jl(m,b){var y={};return y.months=b.month()-m.month()+(b.year()-m.year())*12,m.clone().add(y.months,"M").isAfter(b)&&--y.months,y.milliseconds=+b-+m.clone().add(y.months,"M"),y}function fm(m,b){var y;return m.isValid()&&b.isValid()?(b=vn(b,m),m.isBefore(b)?y=jl(m,b):(y=jl(b,m),y.milliseconds=-y.milliseconds,y.months=-y.months),y):{milliseconds:0,months:0}}function Ol(m,b){return function(y,F){var S,D;return F!==null&&!isNaN(+F)&&(q(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),D=y,y=F,F=D),S=Jt(y,F),Tl(this,S,m),this}}function Tl(m,b,y,F){var S=b._milliseconds,D=gn(b._days),H=gn(b._months);m.isValid()&&(F=F??!0,H&&ml(m,us(m,"Month")+H*y),D&&Os(m,"Date",us(m,"Date")+D*y),S&&m._d.setTime(m._d.valueOf()+S*y),F&&n.updateOffset(m,D||H))}var bm=Ol(1,"add"),gm=Ol(-1,"subtract");function Ul(m){return typeof m=="string"||m instanceof String}function ym(m){return te(m)||x(m)||Ul(m)||w(m)||$m(m)||vm(m)||m===null||m===void 0}function vm(m){var b=d(m)&&!h(m),y=!1,F=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],S,D,H=F.length;for(S=0;S<H;S+=1)D=F[S],y=y||c(m,D);return b&&y}function $m(m){var b=r(m),y=!1;return b&&(y=m.filter(function(F){return!w(F)&&Ul(m)}).length===0),b&&y}function km(m){var b=d(m)&&!h(m),y=!1,F=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],S,D;for(S=0;S<F.length;S+=1)D=F[S],y=y||c(m,D);return b&&y}function wm(m,b){var y=m.diff(b,"days",!0);return y<-6?"sameElse":y<-1?"lastWeek":y<0?"lastDay":y<1?"sameDay":y<2?"nextDay":y<7?"nextWeek":"sameElse"}function Fm(m,b){arguments.length===1&&(arguments[0]?ym(arguments[0])?(m=arguments[0],b=void 0):km(arguments[0])&&(b=arguments[0],m=void 0):(m=void 0,b=void 0));var y=m||Je(),F=vn(y,this).startOf("day"),S=n.calendarFormat(this,F)||"sameElse",D=b&&(Q(b[S])?b[S].call(this,y):b[S]);return this.format(D||this.localeData().calendar(S,this,Je(y)))}function Cm(){return new ne(this)}function Pm(m,b){var y=te(m)?m:Je(m);return this.isValid()&&y.isValid()?(b=$t(b)||"millisecond",b==="millisecond"?this.valueOf()>y.valueOf():y.valueOf()<this.clone().startOf(b).valueOf()):!1}function Sm(m,b){var y=te(m)?m:Je(m);return this.isValid()&&y.isValid()?(b=$t(b)||"millisecond",b==="millisecond"?this.valueOf()<y.valueOf():this.clone().endOf(b).valueOf()<y.valueOf()):!1}function xm(m,b,y,F){var S=te(m)?m:Je(m),D=te(b)?b:Je(b);return this.isValid()&&S.isValid()&&D.isValid()?(F=F||"()",(F[0]==="("?this.isAfter(S,y):!this.isBefore(S,y))&&(F[1]===")"?this.isBefore(D,y):!this.isAfter(D,y))):!1}function jm(m,b){var y=te(m)?m:Je(m),F;return this.isValid()&&y.isValid()?(b=$t(b)||"millisecond",b==="millisecond"?this.valueOf()===y.valueOf():(F=y.valueOf(),this.clone().startOf(b).valueOf()<=F&&F<=this.clone().endOf(b).valueOf())):!1}function Om(m,b){return this.isSame(m,b)||this.isAfter(m,b)}function Tm(m,b){return this.isSame(m,b)||this.isBefore(m,b)}function Um(m,b,y){var F,S,D;if(!this.isValid())return NaN;if(F=vn(m,this),!F.isValid())return NaN;switch(S=(F.utcOffset()-this.utcOffset())*6e4,b=$t(b),b){case"year":D=pi(this,F)/12;break;case"month":D=pi(this,F);break;case"quarter":D=pi(this,F)/3;break;case"second":D=(this-F)/1e3;break;case"minute":D=(this-F)/6e4;break;case"hour":D=(this-F)/36e5;break;case"day":D=(this-F-S)/864e5;break;case"week":D=(this-F-S)/6048e5;break;default:D=this-F}return y?D:mt(D)}function pi(m,b){if(m.date()<b.date())return-pi(b,m);var y=(b.year()-m.year())*12+(b.month()-m.month()),F=m.clone().add(y,"months"),S,D;return b-F<0?(S=m.clone().add(y-1,"months"),D=(b-F)/(F-S)):(S=m.clone().add(y+1,"months"),D=(b-F)/(S-F)),-(y+D)||0}n.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",n.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function Im(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Vm(m){if(!this.isValid())return null;var b=m!==!0,y=b?this.clone().utc():this;return y.year()<0||y.year()>9999?ot(y,b?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Q(Date.prototype.toISOString)?b?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",ot(y,"Z")):ot(y,b?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Mm(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var m="moment",b="",y,F,S,D;return this.isLocal()||(m=this.utcOffset()===0?"moment.utc":"moment.parseZone",b="Z"),y="["+m+'("]',F=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",S="-MM-DD[T]HH:mm:ss.SSS",D=b+'[")]',this.format(y+F+S+D)}function Am(m){m||(m=this.isUtc()?n.defaultFormatUtc:n.defaultFormat);var b=ot(this,m);return this.localeData().postformat(b)}function Em(m,b){return this.isValid()&&(te(m)&&m.isValid()||Je(m).isValid())?Jt({to:this,from:m}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function Dm(m){return this.from(Je(),m)}function zm(m,b){return this.isValid()&&(te(m)&&m.isValid()||Je(m).isValid())?Jt({from:this,to:m}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function Bm(m){return this.to(Je(),m)}function Il(m){var b;return m===void 0?this._locale._abbr:(b=gs(m),b!=null&&(this._locale=b),this)}var Vl=R("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(m){return m===void 0?this.localeData():this.locale(m)});function Ml(){return this._locale}var _i=1e3,bo=60*_i,fi=60*bo,Al=(365*400+97)*24*fi;function go(m,b){return(m%b+b)%b}function El(m,b,y){return m<100&&m>=0?new Date(m+400,b,y)-Al:new Date(m,b,y).valueOf()}function Dl(m,b,y){return m<100&&m>=0?Date.UTC(m+400,b,y)-Al:Date.UTC(m,b,y)}function Lm(m){var b,y;if(m=$t(m),m===void 0||m==="millisecond"||!this.isValid())return this;switch(y=this._isUTC?Dl:El,m){case"year":b=y(this.year(),0,1);break;case"quarter":b=y(this.year(),this.month()-this.month()%3,1);break;case"month":b=y(this.year(),this.month(),1);break;case"week":b=y(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":b=y(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":b=y(this.year(),this.month(),this.date());break;case"hour":b=this._d.valueOf(),b-=go(b+(this._isUTC?0:this.utcOffset()*bo),fi);break;case"minute":b=this._d.valueOf(),b-=go(b,bo);break;case"second":b=this._d.valueOf(),b-=go(b,_i);break}return this._d.setTime(b),n.updateOffset(this,!0),this}function Rm(m){var b,y;if(m=$t(m),m===void 0||m==="millisecond"||!this.isValid())return this;switch(y=this._isUTC?Dl:El,m){case"year":b=y(this.year()+1,0,1)-1;break;case"quarter":b=y(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":b=y(this.year(),this.month()+1,1)-1;break;case"week":b=y(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":b=y(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":b=y(this.year(),this.month(),this.date()+1)-1;break;case"hour":b=this._d.valueOf(),b+=fi-go(b+(this._isUTC?0:this.utcOffset()*bo),fi)-1;break;case"minute":b=this._d.valueOf(),b+=bo-go(b,bo)-1;break;case"second":b=this._d.valueOf(),b+=_i-go(b,_i)-1;break}return this._d.setTime(b),n.updateOffset(this,!0),this}function Nm(){return this._d.valueOf()-(this._offset||0)*6e4}function qm(){return Math.floor(this.valueOf()/1e3)}function Wm(){return new Date(this.valueOf())}function Ym(){var m=this;return[m.year(),m.month(),m.date(),m.hour(),m.minute(),m.second(),m.millisecond()]}function Hm(){var m=this;return{years:m.year(),months:m.month(),date:m.date(),hours:m.hours(),minutes:m.minutes(),seconds:m.seconds(),milliseconds:m.milliseconds()}}function Qm(){return this.isValid()?this.toISOString():null}function Gm(){return J(this)}function Km(){return I({},L(this))}function Jm(){return L(this).overflow}function Xm(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ce("N",0,0,"eraAbbr"),ce("NN",0,0,"eraAbbr"),ce("NNN",0,0,"eraAbbr"),ce("NNNN",0,0,"eraName"),ce("NNNNN",0,0,"eraNarrow"),ce("y",["y",1],"yo","eraYear"),ce("y",["yy",2],0,"eraYear"),ce("y",["yyy",3],0,"eraYear"),ce("y",["yyyy",4],0,"eraYear"),Y("N",kn),Y("NN",kn),Y("NNN",kn),Y("NNNN",dh),Y("NNNNN",ch),be(["N","NN","NNN","NNNN","NNNNN"],function(m,b,y,F){var S=y._locale.erasParse(m,F,y._strict);S?L(y).era=S:L(y).invalidEra=m}),Y("y",ve),Y("yy",ve),Y("yyy",ve),Y("yyyy",ve),Y("yo",uh),be(["y","yy","yyy","yyyy"],gt),be(["yo"],function(m,b,y,F){var S;y._locale._eraYearOrdinalRegex&&(S=m.match(y._locale._eraYearOrdinalRegex)),y._locale.eraYearOrdinalParse?b[gt]=y._locale.eraYearOrdinalParse(m,S):b[gt]=parseInt(m,10)});function Zm(m,b){var y,F,S,D=this._eras||gs("en")._eras;for(y=0,F=D.length;y<F;++y){switch(typeof D[y].since){case"string":S=n(D[y].since).startOf("day"),D[y].since=S.valueOf();break}switch(typeof D[y].until){case"undefined":D[y].until=1/0;break;case"string":S=n(D[y].until).startOf("day").valueOf(),D[y].until=S.valueOf();break}}return D}function eh(m,b,y){var F,S,D=this.eras(),H,ye,Te;for(m=m.toUpperCase(),F=0,S=D.length;F<S;++F)if(H=D[F].name.toUpperCase(),ye=D[F].abbr.toUpperCase(),Te=D[F].narrow.toUpperCase(),y)switch(b){case"N":case"NN":case"NNN":if(ye===m)return D[F];break;case"NNNN":if(H===m)return D[F];break;case"NNNNN":if(Te===m)return D[F];break}else if([H,ye,Te].indexOf(m)>=0)return D[F]}function th(m,b){var y=m.since<=m.until?1:-1;return b===void 0?n(m.since).year():n(m.since).year()+(b-m.offset)*y}function sh(){var m,b,y,F=this.localeData().eras();for(m=0,b=F.length;m<b;++m)if(y=this.clone().startOf("day").valueOf(),F[m].since<=y&&y<=F[m].until||F[m].until<=y&&y<=F[m].since)return F[m].name;return""}function oh(){var m,b,y,F=this.localeData().eras();for(m=0,b=F.length;m<b;++m)if(y=this.clone().startOf("day").valueOf(),F[m].since<=y&&y<=F[m].until||F[m].until<=y&&y<=F[m].since)return F[m].narrow;return""}function ih(){var m,b,y,F=this.localeData().eras();for(m=0,b=F.length;m<b;++m)if(y=this.clone().startOf("day").valueOf(),F[m].since<=y&&y<=F[m].until||F[m].until<=y&&y<=F[m].since)return F[m].abbr;return""}function nh(){var m,b,y,F,S=this.localeData().eras();for(m=0,b=S.length;m<b;++m)if(y=S[m].since<=S[m].until?1:-1,F=this.clone().startOf("day").valueOf(),S[m].since<=F&&F<=S[m].until||S[m].until<=F&&F<=S[m].since)return(this.year()-n(S[m].since).year())*y+S[m].offset;return this.year()}function lh(m){return c(this,"_erasNameRegex")||wn.call(this),m?this._erasNameRegex:this._erasRegex}function ah(m){return c(this,"_erasAbbrRegex")||wn.call(this),m?this._erasAbbrRegex:this._erasRegex}function rh(m){return c(this,"_erasNarrowRegex")||wn.call(this),m?this._erasNarrowRegex:this._erasRegex}function kn(m,b){return b.erasAbbrRegex(m)}function dh(m,b){return b.erasNameRegex(m)}function ch(m,b){return b.erasNarrowRegex(m)}function uh(m,b){return b._eraYearOrdinalRegex||ve}function wn(){var m=[],b=[],y=[],F=[],S,D,H=this.eras();for(S=0,D=H.length;S<D;++S)b.push(we(H[S].name)),m.push(we(H[S].abbr)),y.push(we(H[S].narrow)),F.push(we(H[S].name)),F.push(we(H[S].abbr)),F.push(we(H[S].narrow));this._erasRegex=new RegExp("^("+F.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+b.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+m.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+y.join("|")+")","i")}ce(0,["gg",2],0,function(){return this.weekYear()%100}),ce(0,["GG",2],0,function(){return this.isoWeekYear()%100});function bi(m,b){ce(0,[m,m.length],0,b)}bi("gggg","weekYear"),bi("ggggg","weekYear"),bi("GGGG","isoWeekYear"),bi("GGGGG","isoWeekYear"),Xe("weekYear","gg"),Xe("isoWeekYear","GG"),ut("weekYear",1),ut("isoWeekYear",1),Y("G",ke),Y("g",ke),Y("GG",Ne,bt),Y("gg",Ne,bt),Y("GGGG",Ue,hs),Y("gggg",Ue,hs),Y("GGGGG",fe,ps),Y("ggggg",fe,ps),We(["gggg","ggggg","GGGG","GGGGG"],function(m,b,y,F){b[F.substr(0,2)]=xe(m)}),We(["gg","GG"],function(m,b,y,F){b[F]=n.parseTwoDigitYear(m)});function mh(m){return zl.call(this,m,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function hh(m){return zl.call(this,m,this.isoWeek(),this.isoWeekday(),1,4)}function ph(){return bs(this.year(),1,4)}function _h(){return bs(this.isoWeekYear(),1,4)}function fh(){var m=this.localeData()._week;return bs(this.year(),m.dow,m.doy)}function bh(){var m=this.localeData()._week;return bs(this.weekYear(),m.dow,m.doy)}function zl(m,b,y,F,S){var D;return m==null?zo(this,F,S).year:(D=bs(m,F,S),b>D&&(b=D),gh.call(this,m,b,y,F,S))}function gh(m,b,y,F,S){var D=fl(m,b,y,F,S),H=Do(D.year,0,D.dayOfYear);return this.year(H.getUTCFullYear()),this.month(H.getUTCMonth()),this.date(H.getUTCDate()),this}ce("Q",0,"Qo","quarter"),Xe("quarter","Q"),ut("quarter",7),Y("Q",ms),be("Q",function(m,b){b[Gt]=(xe(m)-1)*3});function yh(m){return m==null?Math.ceil((this.month()+1)/3):this.month((m-1)*3+this.month()%3)}ce("D",["DD",2],"Do","date"),Xe("date","D"),ut("date",9),Y("D",Ne),Y("DD",Ne,bt),Y("Do",function(m,b){return m?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient}),be(["D","DD"],qt),be("Do",function(m,b){b[qt]=xe(m.match(Ne)[0])});var Bl=Nt("Date",!0);ce("DDD",["DDDD",3],"DDDo","dayOfYear"),Xe("dayOfYear","DDD"),ut("dayOfYear",4),Y("DDD",_s),Y("DDDD",Ys),be(["DDD","DDDD"],function(m,b,y){y._dayOfYear=xe(m)});function vh(m){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return m==null?b:this.add(m-b,"d")}ce("m",["mm",2],0,"minute"),Xe("minute","m"),ut("minute",14),Y("m",Ne),Y("mm",Ne,bt),be(["m","mm"],Kt);var $h=Nt("Minutes",!1);ce("s",["ss",2],0,"second"),Xe("second","s"),ut("second",15),Y("s",Ne),Y("ss",Ne,bt),be(["s","ss"],fs);var kh=Nt("Seconds",!1);ce("S",0,0,function(){return~~(this.millisecond()/100)}),ce(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),ce(0,["SSS",3],0,"millisecond"),ce(0,["SSSS",4],0,function(){return this.millisecond()*10}),ce(0,["SSSSS",5],0,function(){return this.millisecond()*100}),ce(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),ce(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),ce(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),ce(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Xe("millisecond","ms"),ut("millisecond",16),Y("S",_s,ms),Y("SS",_s,bt),Y("SSS",_s,Ys);var Vs,Ll;for(Vs="SSSS";Vs.length<=9;Vs+="S")Y(Vs,ve);function wh(m,b){b[Qs]=xe(("0."+m)*1e3)}for(Vs="S";Vs.length<=9;Vs+="S")be(Vs,wh);Ll=Nt("Milliseconds",!1),ce("z",0,0,"zoneAbbr"),ce("zz",0,0,"zoneName");function Fh(){return this._isUTC?"UTC":""}function Ch(){return this._isUTC?"Coordinated Universal Time":""}var ae=ne.prototype;ae.add=bm,ae.calendar=Fm,ae.clone=Cm,ae.diff=Um,ae.endOf=Rm,ae.format=Am,ae.from=Em,ae.fromNow=Dm,ae.to=zm,ae.toNow=Bm,ae.get=Ts,ae.invalidAt=Jm,ae.isAfter=Pm,ae.isBefore=Sm,ae.isBetween=xm,ae.isSame=jm,ae.isSameOrAfter=Om,ae.isSameOrBefore=Tm,ae.isValid=Gm,ae.lang=Vl,ae.locale=Il,ae.localeData=Ml,ae.max=Gu,ae.min=Qu,ae.parsingFlags=Km,ae.set=Ws,ae.startOf=Lm,ae.subtract=gm,ae.toArray=Ym,ae.toObject=Hm,ae.toDate=Wm,ae.toISOString=Vm,ae.inspect=Mm,typeof Symbol<"u"&&Symbol.for!=null&&(ae[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),ae.toJSON=Qm,ae.toString=Im,ae.unix=qm,ae.valueOf=Nm,ae.creationData=Xm,ae.eraName=sh,ae.eraNarrow=oh,ae.eraAbbr=ih,ae.eraYear=nh,ae.year=_l,ae.isLeapYear=Hc,ae.weekYear=mh,ae.isoWeekYear=hh,ae.quarter=ae.quarters=yh,ae.month=hl,ae.daysInMonth=qc,ae.week=ae.weeks=Zc,ae.isoWeek=ae.isoWeeks=eu,ae.weeksInYear=fh,ae.weeksInWeekYear=bh,ae.isoWeeksInYear=ph,ae.isoWeeksInISOWeekYear=_h,ae.date=Bl,ae.day=ae.days=hu,ae.weekday=pu,ae.isoWeekday=_u,ae.dayOfYear=vh,ae.hour=ae.hours=ku,ae.minute=ae.minutes=$h,ae.second=ae.seconds=kh,ae.millisecond=ae.milliseconds=Ll,ae.utcOffset=im,ae.utc=lm,ae.local=am,ae.parseZone=rm,ae.hasAlignedHourOffset=dm,ae.isDST=cm,ae.isLocal=mm,ae.isUtcOffset=hm,ae.isUtc=xl,ae.isUTC=xl,ae.zoneAbbr=Fh,ae.zoneName=Ch,ae.dates=R("dates accessor is deprecated. Use date instead.",Bl),ae.months=R("months accessor is deprecated. Use month instead",hl),ae.years=R("years accessor is deprecated. Use year instead",_l),ae.zone=R("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",nm),ae.isDSTShifted=R("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",um);function Ph(m){return Je(m*1e3)}function Sh(){return Je.apply(null,arguments).parseZone()}function Rl(m){return m}var De=ge.prototype;De.calendar=Pe,De.longDateFormat=Ss,De.invalidDate=Lt,De.ordinal=vt,De.preparse=Rl,De.postformat=Rl,De.relativeTime=Rt,De.pastFuture=_o,De.set=le,De.eras=Zm,De.erasParse=eh,De.erasConvertYear=th,De.erasAbbrRegex=ah,De.erasNameRegex=lh,De.erasNarrowRegex=rh,De.months=Bc,De.monthsShort=Lc,De.monthsParse=Nc,De.monthsRegex=Yc,De.monthsShortRegex=Wc,De.week=Gc,De.firstDayOfYear=Xc,De.firstDayOfWeek=Jc,De.weekdays=ru,De.weekdaysMin=cu,De.weekdaysShort=du,De.weekdaysParse=mu,De.weekdaysRegex=fu,De.weekdaysShortRegex=bu,De.weekdaysMinRegex=gu,De.isPM=vu,De.meridiem=wu;function gi(m,b,y,F){var S=gs(),D=V().set(F,b);return S[y](D,m)}function Nl(m,b,y){if(w(m)&&(b=m,m=void 0),m=m||"",b!=null)return gi(m,b,y,"month");var F,S=[];for(F=0;F<12;F++)S[F]=gi(m,F,y,"month");return S}function Fn(m,b,y,F){typeof m=="boolean"?(w(b)&&(y=b,b=void 0),b=b||""):(b=m,y=b,m=!1,w(b)&&(y=b,b=void 0),b=b||"");var S=gs(),D=m?S._week.dow:0,H,ye=[];if(y!=null)return gi(b,(y+D)%7,F,"day");for(H=0;H<7;H++)ye[H]=gi(b,(H+D)%7,F,"day");return ye}function xh(m,b){return Nl(m,b,"months")}function jh(m,b){return Nl(m,b,"monthsShort")}function Oh(m,b,y){return Fn(m,b,y,"weekdays")}function Th(m,b,y){return Fn(m,b,y,"weekdaysShort")}function Uh(m,b,y){return Fn(m,b,y,"weekdaysMin")}Is("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(m){var b=m%10,y=xe(m%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return m+y}}),n.lang=R("moment.lang is deprecated. Use moment.locale instead.",Is),n.langData=R("moment.langData is deprecated. Use moment.localeData instead.",gs);var ys=Math.abs;function Ih(){var m=this._data;return this._milliseconds=ys(this._milliseconds),this._days=ys(this._days),this._months=ys(this._months),m.milliseconds=ys(m.milliseconds),m.seconds=ys(m.seconds),m.minutes=ys(m.minutes),m.hours=ys(m.hours),m.months=ys(m.months),m.years=ys(m.years),this}function ql(m,b,y,F){var S=Jt(b,y);return m._milliseconds+=F*S._milliseconds,m._days+=F*S._days,m._months+=F*S._months,m._bubble()}function Vh(m,b){return ql(this,m,b,1)}function Mh(m,b){return ql(this,m,b,-1)}function Wl(m){return m<0?Math.floor(m):Math.ceil(m)}function Ah(){var m=this._milliseconds,b=this._days,y=this._months,F=this._data,S,D,H,ye,Te;return m>=0&&b>=0&&y>=0||m<=0&&b<=0&&y<=0||(m+=Wl(Cn(y)+b)*864e5,b=0,y=0),F.milliseconds=m%1e3,S=mt(m/1e3),F.seconds=S%60,D=mt(S/60),F.minutes=D%60,H=mt(D/60),F.hours=H%24,b+=mt(H/24),Te=mt(Yl(b)),y+=Te,b-=Wl(Cn(Te)),ye=mt(y/12),y%=12,F.days=b,F.months=y,F.years=ye,this}function Yl(m){return m*4800/146097}function Cn(m){return m*146097/4800}function Eh(m){if(!this.isValid())return NaN;var b,y,F=this._milliseconds;if(m=$t(m),m==="month"||m==="quarter"||m==="year")switch(b=this._days+F/864e5,y=this._months+Yl(b),m){case"month":return y;case"quarter":return y/3;case"year":return y/12}else switch(b=this._days+Math.round(Cn(this._months)),m){case"week":return b/7+F/6048e5;case"day":return b+F/864e5;case"hour":return b*24+F/36e5;case"minute":return b*1440+F/6e4;case"second":return b*86400+F/1e3;case"millisecond":return Math.floor(b*864e5)+F;default:throw new Error("Unknown unit "+m)}}function Dh(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+xe(this._months/12)*31536e6:NaN}function vs(m){return function(){return this.as(m)}}var zh=vs("ms"),Bh=vs("s"),Lh=vs("m"),Rh=vs("h"),Nh=vs("d"),qh=vs("w"),Wh=vs("M"),Yh=vs("Q"),Hh=vs("y");function Qh(){return Jt(this)}function Gh(m){return m=$t(m),this.isValid()?this[m+"s"]():NaN}function Ks(m){return function(){return this.isValid()?this._data[m]:NaN}}var Kh=Ks("milliseconds"),Jh=Ks("seconds"),Xh=Ks("minutes"),Zh=Ks("hours"),ep=Ks("days"),tp=Ks("months"),sp=Ks("years");function op(){return mt(this.days()/7)}var $s=Math.round,yo={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ip(m,b,y,F,S){return S.relativeTime(b||1,!!y,m,F)}function np(m,b,y,F){var S=Jt(m).abs(),D=$s(S.as("s")),H=$s(S.as("m")),ye=$s(S.as("h")),Te=$s(S.as("d")),He=$s(S.as("M")),Pt=$s(S.as("w")),ks=$s(S.as("y")),Ms=D<=y.ss&&["s",D]||D<y.s&&["ss",D]||H<=1&&["m"]||H<y.m&&["mm",H]||ye<=1&&["h"]||ye<y.h&&["hh",ye]||Te<=1&&["d"]||Te<y.d&&["dd",Te];return y.w!=null&&(Ms=Ms||Pt<=1&&["w"]||Pt<y.w&&["ww",Pt]),Ms=Ms||He<=1&&["M"]||He<y.M&&["MM",He]||ks<=1&&["y"]||["yy",ks],Ms[2]=b,Ms[3]=+m>0,Ms[4]=F,ip.apply(null,Ms)}function lp(m){return m===void 0?$s:typeof m=="function"?($s=m,!0):!1}function ap(m,b){return yo[m]===void 0?!1:b===void 0?yo[m]:(yo[m]=b,m==="s"&&(yo.ss=b-1),!0)}function rp(m,b){if(!this.isValid())return this.localeData().invalidDate();var y=!1,F=yo,S,D;return typeof m=="object"&&(b=m,m=!1),typeof m=="boolean"&&(y=m),typeof b=="object"&&(F=Object.assign({},yo,b),b.s!=null&&b.ss==null&&(F.ss=b.s-1)),S=this.localeData(),D=np(this,!y,F,S),y&&(D=S.pastFuture(+this,D)),S.postformat(D)}var Pn=Math.abs;function vo(m){return(m>0)-(m<0)||+m}function yi(){if(!this.isValid())return this.localeData().invalidDate();var m=Pn(this._milliseconds)/1e3,b=Pn(this._days),y=Pn(this._months),F,S,D,H,ye=this.asSeconds(),Te,He,Pt,ks;return ye?(F=mt(m/60),S=mt(F/60),m%=60,F%=60,D=mt(y/12),y%=12,H=m?m.toFixed(3).replace(/\.?0+$/,""):"",Te=ye<0?"-":"",He=vo(this._months)!==vo(ye)?"-":"",Pt=vo(this._days)!==vo(ye)?"-":"",ks=vo(this._milliseconds)!==vo(ye)?"-":"",Te+"P"+(D?He+D+"Y":"")+(y?He+y+"M":"")+(b?Pt+b+"D":"")+(S||F||m?"T":"")+(S?ks+S+"H":"")+(F?ks+F+"M":"")+(m?ks+H+"S":"")):"P0D"}var Ee=mi.prototype;Ee.isValid=em,Ee.abs=Ih,Ee.add=Vh,Ee.subtract=Mh,Ee.as=Eh,Ee.asMilliseconds=zh,Ee.asSeconds=Bh,Ee.asMinutes=Lh,Ee.asHours=Rh,Ee.asDays=Nh,Ee.asWeeks=qh,Ee.asMonths=Wh,Ee.asQuarters=Yh,Ee.asYears=Hh,Ee.valueOf=Dh,Ee._bubble=Ah,Ee.clone=Qh,Ee.get=Gh,Ee.milliseconds=Kh,Ee.seconds=Jh,Ee.minutes=Xh,Ee.hours=Zh,Ee.days=ep,Ee.weeks=op,Ee.months=tp,Ee.years=sp,Ee.humanize=rp,Ee.toISOString=yi,Ee.toString=yi,Ee.toJSON=yi,Ee.locale=Il,Ee.localeData=Ml,Ee.toIsoString=R("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",yi),Ee.lang=Vl,ce("X",0,0,"unix"),ce("x",0,0,"valueOf"),Y("x",ke),Y("X",Ao),be("X",function(m,b,y){y._d=new Date(parseFloat(m)*1e3)}),be("x",function(m,b,y){y._d=new Date(xe(m))});//! moment.js
return n.version="2.29.4",i(Je),n.fn=ae,n.min=Ku,n.max=Ju,n.now=Xu,n.utc=V,n.unix=Ph,n.months=xh,n.isDate=x,n.locale=Is,n.invalid=re,n.duration=Jt,n.isMoment=te,n.weekdays=Oh,n.parseZone=Sh,n.localeData=gs,n.isDuration=hi,n.monthsShort=jh,n.weekdaysMin=Uh,n.defineLocale=hn,n.updateLocale=Su,n.locales=xu,n.weekdaysShort=Th,n.normalizeUnits=$t,n.relativeTimeRounding=lp,n.relativeTimeThreshold=ap,n.calendarFormat=wm,n.prototype=ae,n.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},n})}(rzt)),qi}(function(s,e){(function(o,n){n(typeof xc=="function"?dzt():o.moment)})(Ca,function(o){//! moment.js locale configuration
function n(c,h){var g=c.split("_");return h%10===1&&h%100!==11?g[0]:h%10>=2&&h%10<=4&&(h%100<10||h%100>=20)?g[1]:g[2]}function i(c,h,g){var w={ss:h?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:h?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",ww:"неделя_недели_недель",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return g==="m"?h?"минута":"минуту":c+" "+n(w[g],+c)}var r=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],d=o.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(c){if(c.week()!==this.week())switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}else return this.day()===2?"[Во] dddd, [в] LT":"[В] dddd, [в] LT"},lastWeek:function(c){if(c.week()!==this.week())switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}else return this.day()===2?"[Во] dddd, [в] LT":"[В] dddd, [в] LT"},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:i,m:i,mm:i,h:"час",hh:i,d:"день",dd:i,w:"неделя",ww:i,M:"месяц",MM:i,y:"год",yy:i},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(c){return/^(дня|вечера)$/.test(c)},meridiem:function(c,h,g){return c<4?"ночи":c<12?"утра":c<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(c,h){switch(h){case"M":case"d":case"DDD":return c+"-й";case"D":return c+"-го";case"w":case"W":return c+"-я";default:return c}},week:{dow:1,doy:4}});return d})})();const czt=ze('<button type="button" class="btn btn-primary p-3 w-100 mb-2" data-bs-toggle="modal" data-bs-target="#statistic-modal"><i class="fa-solid fa-chart-pie"></i> Статистика </button><div class="modal fade" id="statistic-modal" tabindex="-1" aria-labelledby="fullscreenModalLabel" aria-hidden="true"><div class="modal-dialog modal-fullscreen"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="fullscreenModalLabel">Статистика по столикам</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button></div><div class="modal-body"><div class="alert alert-danger"> Статистика в данный момент находится на стадии разработки! Параметры и значения не соответствуют реальным </div><table class="table table-bordered mb-2"><thead class="table-light"><tr><th>Параметр</th><th>Значение</th></tr></thead><tbody><tr><td>Среднее время ожидания заказа</td><td>12 минут</td></tr><tr><td>Количество обслуженных столиков за день</td><td>45</td></tr><tr><td>Средний чек</td><td>1 250 ₽</td></tr><tr><td>Уровень удовлетворенности клиентов</td><td>92%</td></tr><tr><td>Среднее время на обслуживание одного столика</td><td>35 минут</td></tr><tr><td>Процент повторных заказов</td><td>28%</td></tr><tr><td>Количество официантов в смену</td><td>6</td></tr><tr><td>Процент просроченных заказов</td><td>3%</td></tr></tbody></table><button type="button" class="btn btn-primary w-100 p-3">Скачать файл статистики</button></div><div class="modal-footer"><button type="button" class="btn btn-secondary w-100 p-3" data-bs-dismiss="modal">Закрыть</button></div></div></div></div>',2),uzt={class:"row row-cols-1"},mzt={class:"col mb-2"},hzt={class:"card-body"},pzt={class:"row"},_zt={class:"col-4"},fzt={class:"mb-2",style:{"font-size":"12px"}},bzt={key:0,class:"col-8"},gzt={class:"mb-2",style:{"font-size":"12px"}},yzt=t("i",{class:"fa-solid fa-bell-concierge"},null,-1),vzt={class:"col-12"},$zt={class:"mb-2",style:{"font-size":"12px"}},kzt=t("i",{class:"fa-solid fa-people-group"},null,-1),wzt={class:"fw-bold"},Fzt={class:"col-12"},Czt={class:"mb-2",style:{"font-size":"12px"}},Pzt={key:1,class:"col-12"},Szt=t("p",{class:"mb-2 bg-danger text-white fw-bold"},"Данный столик забронирован",-1),xzt={class:"mb-2",style:{"font-size":"12px"}},jzt={class:"mb-2",style:{"font-size":"12px"}},Ozt={class:"mb-2",style:{"font-size":"12px"}},Tzt={class:"mb-0",style:{"font-size":"12px"}},Uzt={class:"btn-group w-100 mb-0"},Izt=["onClick"],Vzt=t("i",{class:"fa-solid fa-arrow-right-to-bracket"},null,-1),Mzt=["onClick"],Azt=t("i",{class:"fa-solid fa-arrow-right-to-bracket"},null,-1),Ezt=["onClick"],Dzt=t("i",{class:"fa-solid fa-eye"},null,-1),zzt=["onClick"],Bzt=t("i",{class:"fa-solid fa-xmark"},null,-1),Lzt={key:1,class:"alert alert-light"},Rzt={props:["selected"],data(){return{search:null,tables:[],paginate:null,sort:{param:null,direction:"asc"}}},computed:{...G(["getTables","getTablesPaginateObject"]),self(){return window.self||null},tg(){return window.Telegram.WebApp}},mounted(){this.loadTables(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.push({name:"MenuV2"})})},methods:{timeAgo(s){return ko.locale("ru"),ko(s).format("D-MM-YYYY [в] HH:mm")},closeTable(s){this.$store.dispatch("closeTableOrder",{dataObject:{table_id:s}}).then(e=>{this.$notify({title:"Заказ",text:"Столик успешно закрыт",type:"success"}),this.loadTable()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка завершения работы столика",type:"error"})})},takeATable(s){this.changeTableWaiter(s)},changeTableWaiter(s){return this.$store.dispatch("changeTableWaiter",{dataObject:{table_id:s}}).then(e=>{this.$notify({title:"Смена официанта",text:"Официант успешно изменен",type:"success"}),this.loadTables()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка смены официанта",type:"error"})})},goToTable(s){this.$router.push({name:"TableV2",params:{tableId:s}})},nextTables(s){this.loadTables(s)},loadTables(s=0){return this.$store.dispatch("loadTables",{dataObject:{},page:s,size:100}).then(e=>{this.tables=this.getTables,this.paginate=this.getTablesPaginateObject}).catch(()=>{})}}},Nzt=Object.assign(Rzt,{__name:"TablesList",setup(s){return(e,o)=>(l(),a(v,null,[czt,e.tables.length>0?(l(),a(v,{key:0},[t("div",uzt,[(l(!0),a(v,null,O(e.tables,(n,i)=>{var r,d,c,h,g,w;return l(),a("div",mzt,[t("div",{class:C([{"border-primary":n.officiant_id!=null&&n.officiant_id===e.self.id},"card"])},[t("div",hzt,[t("div",pzt,[t("div",_zt,[t("p",fzt,"Столик #"+p(parseInt(n.number||"0")+1),1)]),n.officiant?(l(),a("div",bzt,[t("p",gzt,[yzt,_(" "+p(((r=n.officiant)==null?void 0:r.name)||((d=n.officiant)==null?void 0:d.fio_from_telegram)||"Официант"),1)])])):u("",!0),t("div",vzt,[t("p",$zt,[kzt,_(" Клиентов за столиком "),t("strong",wzt,p(((c=n.clients)==null?void 0:c.length)||0),1)])]),t("div",Fzt,[t("p",Czt,"Начало обслуживания "+p(e.timeAgo(n.start_at)),1)]),n.booked_info?(l(),a("div",Pzt,[Szt,t("p",xzt,p(n.booked_date_at)+" в "+p(n.booked_time_at),1),t("p",jzt,"На имя: "+p((h=n.booked_info)==null?void 0:h.name),1),t("p",Ozt,"Контакт для связи: "+p((g=n.booked_info)==null?void 0:g.phone),1),t("p",Tzt,"Доп инфо: "+p((w=n.booked_info)==null?void 0:w.description),1)])):u("",!0)]),t("div",Uzt,[n.officiant_id==null?(l(),a("button",{key:0,type:"button",onClick:x=>e.takeATable(n.id),class:"btn btn-outline-primary",style:{"font-size":"12px"}},[Vzt,_(" В работу ")],8,Izt)):u("",!0),e.self.id===n.officiant_id?(l(),a("button",{key:1,type:"button",onClick:x=>e.changeTableWaiter(n.id),class:"btn btn-outline-primary",style:{"font-size":"12px"}},[Azt,_(" Выйти ")],8,Mzt)):u("",!0),t("button",{type:"button",onClick:x=>e.goToTable(n.id),class:"btn btn-outline-primary",style:{"font-size":"12px"}},[Dzt,_(" Просмотр ")],8,Ezt),e.self.id===n.officiant_id?(l(),a("button",{key:2,type:"button",onClick:x=>e.closeTable(n.id),class:"btn btn-outline-primary",style:{"font-size":"12px"}},[Bzt,_(" Закрыть ")],8,zzt)):u("",!0)])])],2)])}),256))]),e.paginate?(l(),M(Ce,{key:0,simple:!0,onPagination_page:e.nextTables,pagination:e.paginate},null,8,["onPagination_page","pagination"])):u("",!0)],64)):(l(),a("p",Lzt," В данный момент нет ваших столиков в обслуживании и клиентов без официанта. "))],64))}}),qzt={class:"container py-2"},Wzt=t("h6",null,"Управление столиками",-1),Yzt={},jc=Object.assign(Yzt,{__name:"TablesManager",setup(s){return(e,o)=>(l(),a("div",qzt,[Wzt,T(Nzt)]))}}),Hzt=Object.freeze(Object.defineProperty({__proto__:null,default:jc},Symbol.toStringTag,{value:"Module"})),Qzt={class:"container"},Gzt={key:0,class:"alert alert-danger my-2"},Kzt=t("strong",{class:"fw-bold text-primary"},"закрыт",-1),Jzt={class:"list-group list-group-flush"},Xzt={class:"list-group-item"},Zzt={class:"d-flex justify-content-between mb-0"},eBt={class:"fw-bold text-primary"},tBt={class:"list-group-item"},sBt={class:"d-flex justify-content-between mb-0"},oBt={key:0,href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#creator-profile-modal",class:"fw-bold text-primary",style:{"text-align":"right"}},iBt=t("i",{class:"fa-solid fa-arrow-up-right-from-square"},null,-1),nBt={key:1},lBt={class:"list-group-item"},aBt={class:"d-flex justify-content-between mb-0"},rBt={key:0,"data-bs-toggle":"modal","data-bs-target":"#officiant-profile-modal",href:"javascript:void(0)",style:{"text-align":"right"},class:"fw-bold text-primary"},dBt=t("i",{class:"fa-solid fa-arrow-up-right-from-square"},null,-1),cBt={key:1},uBt={class:"list-group-item"},mBt={"data-bs-toggle":"modal","data-bs-target":"#clients-list-modal",class:"d-flex justify-content-between mb-0"},hBt={class:"fw-bold text-primary"},pBt={class:"list-group-item"},_Bt={class:"d-flex justify-content-between mb-0"},fBt={class:"fw-bold text-primary"},bBt={class:"list-group-item"},gBt={"data-bs-toggle":"modal","data-bs-target":"#add-additional-modal",class:"d-flex justify-content-between mb-0"},yBt={class:"fw-bold text-primary"},vBt=t("i",{class:"fa-solid fa-plus"},null,-1),$Bt={class:"list-group-item"},kBt={class:"d-flex justify-content-between mb-0 fw-bold"},wBt={class:"fw-bold text-primary"},FBt=t("div",{class:"divider my-3"},"Действия",-1),CBt=["disabled"],PBt={key:0},SBt={key:1},xBt={class:"alert alert-light mb-2"},jBt=t("p",{class:"mb-2"},"Внимание! Закрывая столик вы подтверждаете что клиент уже завершает посещение заведения и оплатил заказ!",-1),OBt={class:"form-check form-switch"},TBt=t("label",{class:"form-check-label",for:"need-automatic-cashback"},"Начислить автоматически баллы после закрытия!",-1),UBt={class:"form-check form-switch"},IBt=t("label",{class:"form-check-label",for:"can-close-table"},"Всё проверено, точно можно закрыть!",-1),VBt=["disabled"],MBt=t("i",{class:"fa-solid fa-lock"},null,-1),ABt=t("p",{class:"divider my-3"},"Заказы клиентов",-1),EBt={class:"my-3"},DBt={class:"fw-bold"},zBt={class:"list-group"},BBt=["onClick"],LBt={class:"fw-bold",style:{"font-size":"10px"}},RBt={key:1},NBt={class:"alert alert-light d-flex justify-content-between my-2"},qBt={class:"fw-bold"},WBt=t("div",{class:"divider my-3"},"Действия",-1),YBt={class:"btn-group-vertical w-100 mb-3"},HBt=["disabled"],QBt=t("i",{class:"fa-solid fa-xmark"},null,-1),GBt=["disabled"],KBt=t("i",{class:"fa-solid fa-plus"},null,-1),JBt=["disabled"],XBt=t("i",{class:"fa-solid fa-hand"},null,-1),ZBt={class:"btn-group-vertical w-100"},eLt=["disabled"],tLt=t("i",{class:"fa-solid fa-check"},null,-1),sLt=["disabled"],oLt=t("i",{class:"fa-solid fa-ban"},null,-1),iLt=["disabled"],nLt=t("i",{class:"fa-solid fa-download"},null,-1),lLt={class:"modal fade",id:"creator-profile-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},aLt={class:"modal-dialog modal-fullscreen"},rLt={class:"modal-content"},dLt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Профиль клиента"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),cLt={class:"modal-body"},uLt={class:"modal fade",id:"officiant-profile-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},mLt={class:"modal-dialog modal-fullscreen"},hLt={class:"modal-content"},pLt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Профиль официанта"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),_Lt={class:"modal-body"},fLt={class:"modal fade",id:"clients-list-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},bLt={class:"modal-dialog modal-fullscreen"},gLt={class:"modal-content"},yLt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Посетители за столиком"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),vLt={class:"modal-body"},$Lt={key:0,class:"list-group list-group-numbered"},kLt={class:"list-group-item d-flex justify-content-between align-items-start"},wLt={class:"ms-2 me-auto"},FLt={class:"fw-bold"},CLt={class:"mb-0"},PLt={class:"fw-bold"},SLt={class:"mb-0"},xLt={class:"fw-bold"},jLt={class:"badge text-bg-primary rounded-pill"},OLt={class:"modal fade",id:"add-additional-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},TLt={class:"modal-dialog modal-fullscreen"},ULt={class:"modal-content"},ILt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Дополнительные услуги"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),VLt={class:"modal-body"},MLt={class:"form-floating mb-3"},ALt=t("label",{for:"floatingInput"},"Описание",-1),ELt={class:"form-floating mb-3"},DLt=t("label",{for:"floatingInput"},"Цена, руб",-1),zLt=t("button",{class:"btn btn-primary w-100 p-3"}," Создать сервис ",-1),BLt=t("h6",{class:"divider my-3"},"Добавленные сервисы",-1),LLt={class:"list-group"},RLt={class:"list-group-item d-flex justify-content-between"},NLt={class:"fw-bold"},qLt=["onClick"],WLt=t("i",{class:"fa-solid fa-xmark"},null,-1),YLt=[WLt],HLt={class:"modal-footer"},QLt=["disabled"],GLt={data(){return{can_close_table:!1,need_automatic_cashback:!0,serviceForm:{title:null,price:0},services:[],summary_price:0,summary_count:0,selected:[],table:null,clients:[],basket:[]}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp}},mounted(){this.loadTable(),this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{closeTable(){let s=this.$route.params.tableId;this.$store.dispatch("closeTableOrder",{dataObject:{table_id:s}}).then(e=>{this.$notify({title:"Заказ",text:"Столик успешно закрыт",type:"success"}),this.loadTable()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка завершения работы столика",type:"error"})})},downloadTableData(){},acceptTableOrder(){this.changeOrderStatus(0)},declineTableOrder(){this.changeOrderStatus(1)},changeOrderStatus(s){let e=this.$route.params.tableId;this.$store.dispatch("acceptTableOder",{dataObject:{table_id:e,type:s}}).then(o=>{this.$notify({title:"Заказ",text:"Статус заказа успешно изменен",type:"success"}),this.loadTable()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка изменения статуса заказа",type:"error"})})},storeServices(){let s=this.$route.params.tableId;this.$store.dispatch("storeTableAdditionalServices",{dataObject:{table_id:s,services:this.services}}).then(e=>{this.$notify({title:"Заказ",text:"Заказ успешно передан на кухню",type:"success"}),this.services=[],this.loadTable()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка передачи заказа",type:"error"})})},deselect(){this.selected=[]},removeService(s){this.services.splice(s,1)},pushService(){const s=JSON.parse(JSON.stringify(this.serviceForm));this.services.push(s),this.serviceForm.price=0,this.serviceForm.title=null},selectBasketItem(s){let e=this.selected.findIndex(o=>s.id===o);e!==-1?this.selected.splice(e,1):this.selected.push(s.id)},changeTableWaiter(){let s=this.$route.params.tableId;this.$store.dispatch("changeTableWaiter",{dataObject:{table_id:s}}).then(e=>{this.$notify({title:"Смена официанта",text:"Официант успешно изменен",type:"success"}),this.table=e.data}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка смены официанта",type:"error"})})},loadTable(){let s=this.$route.params.tableId;this.$store.dispatch("loadTableData",{dataObject:{table_id:s}}).then(e=>{this.summary_price=e.summary_price||0,this.summary_count=e.summary_count||0,this.table=e.table||null,this.services=[...this.services,...this.table.additional_services||[]],this.clients=e.clients||[],this.basket=e.basket||[]})}}},Oc=Object.assign(GLt,{__name:"Table",setup(s){return(e,o)=>(l(),a("div",Qzt,[e.table?(l(),a(v,{key:0},[e.table.closed_at!=null?(l(),a("div",Gzt,[_(" Внимание! Данный столик уже "),Kzt,_("! Операции со столиком недоступны! ")])):u("",!0),t("ul",Jzt,[t("li",Xzt,[t("p",Zzt,[_("Номер столика "),t("span",eBt,"#"+p(e.table.number||"1"),1)])]),t("li",tBt,[t("p",sBt,[_("Столик оформлен на "),e.table.creator?(l(),a("a",oBt,[iBt,_(" "+p(e.table.creator.fio_from_telegram||"-"),1)])):(l(),a("span",nBt," не указано "))])]),t("li",lBt,[t("p",aBt,[_("Столик обслуживает "),e.table.officiant?(l(),a("a",rBt,[dBt,_(" "+p(e.table.officiant.name||e.table.officiant.fio_from_telegram||"-"),1)])):(l(),a("span",cBt," не указано "))])]),t("li",uBt,[t("p",mBt,[_("Кол-во гостей "),t("span",hBt,p(e.clients.length)+" чел.",1)])]),t("li",pBt,[t("p",_Bt,[_("Заказано позиций "),t("span",fBt,p(e.summary_count)+" ед.",1)])]),t("li",bBt,[t("p",gBt,[_("Дополнительные услуги "),t("span",yBt,[vBt,_(" "+p((e.table.additional_services||[]).length)+" ед.",1)])])]),t("li",$Bt,[t("p",kBt,[_("Итого "),t("span",wBt,p(e.summary_price)+" ₽",1)])])]),FBt,t("button",{type:"button",disabled:e.table.closed_at!=null,onClick:o[0]||(o[0]=(...n)=>e.changeTableWaiter&&e.changeTableWaiter(...n)),class:"btn btn-primary w-100 p-3 mb-2"},[e.table.officiant_id==null?(l(),a("span",PBt,"Взять столик в работу")):(l(),a("span",SBt,"Перестать обслуживать столик"))],8,CBt),t("div",xBt,[jBt,t("div",OBt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[1]||(o[1]=n=>e.need_automatic_cashback=n),type:"checkbox",role:"switch",id:"need-automatic-cashback"},null,512),[[z,e.need_automatic_cashback]]),TBt]),t("div",UBt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":o[2]||(o[2]=n=>e.can_close_table=n),type:"checkbox",role:"switch",id:"can-close-table"},null,512),[[z,e.can_close_table]]),IBt])]),t("button",{type:"button",disabled:!e.can_close_table||e.table.closed_at!=null,onClick:o[3]||(o[3]=(...n)=>e.closeTable&&e.closeTable(...n)),class:"btn btn-primary w-100 p-3"},[MBt,_(" Закрыть столик ")],8,VBt),ABt,e.basket.length>0?(l(!0),a(v,{key:1},O(e.basket,n=>(l(),a(v,null,[t("p",EBt,[_("Клиент "),t("span",DBt,p(n.name||"-"),1)]),t("ul",zBt,[(l(!0),a(v,null,O(n.basket,i=>{var r;return l(),a("li",{class:C(["list-group-item d-flex justify-content-between align-items-center",{"bg-warning text-white fw-bold":(e.selected||[]).indexOf(i.id)!=-1}]),onClick:d=>e.selectBasketItem(i)},[i.product?(l(),a(v,{key:0},[t("span",null,[t("i",{class:C([{"text-secondary":i.table_approved_at==null,"text-success":i.table_approved_at!=null},"fa-solid fa-check-double"])},null,2),_(" "+p(((r=i.product)==null?void 0:r.title)||"-"),1)]),t("span",LBt,p(i.count)+"ед. x "+p(i.product.current_price)+"₽ = "+p(i.count*i.product.current_price)+"₽",1)],64)):(l(),a("span",RBt,"товар не найден"))],10,BBt)}),256))]),t("p",NBt,[_("Итого по клиенту "),t("span",qBt,p(n.summary_price||0)+"₽",1)])],64))),256)):u("",!0),WBt,e.selected.length>0?(l(),a(v,{key:2},[t("p",null,[_("Вы выбрали "+p(e.selected.length||0)+" позиций ",1),t("span",{onClick:o[4]||(o[4]=(...n)=>e.deselect&&e.deselect(...n)),class:"text-primary"},"(отменить выделение)")]),t("div",YBt,[t("button",{type:"button",disabled:e.table.officiant_id==null||e.table.closed_at!=null,class:"btn btn-outline-primary p-3"},[QBt,_(" Убрать выбранные из заказ ")],8,HBt),t("button",{type:"button",disabled:e.table.officiant_id==null||e.table.closed_at!=null,class:"btn btn-outline-primary p-3"},[KBt,_(" Увеличить кол-во в заказе ")],8,GBt),t("button",{type:"button",disabled:e.table.officiant_id==null||e.table.closed_at!=null,class:"btn btn-outline-primary p-3"},[XBt,_(" Добавить выбранное в стоп-лист ")],8,JBt)])],64)):u("",!0),t("div",ZBt,[t("button",{type:"button",onClick:o[5]||(o[5]=(...n)=>e.acceptTableOrder&&e.acceptTableOrder(...n)),disabled:e.table.officiant_id==null||e.table.closed_at!=null,class:"btn btn-success p-3"},[tLt,_(" Подтвердить заказ ")],8,eLt),t("button",{onClick:o[6]||(o[6]=(...n)=>e.declineTableOrder&&e.declineTableOrder(...n)),disabled:e.table.officiant_id==null||e.table.closed_at!=null,type:"button",class:"btn btn-danger p-3"},[oLt,_(" Отклонить заказ ")],8,sLt),t("button",{onClick:o[7]||(o[7]=(...n)=>e.downloadTableData&&e.downloadTableData(...n)),disabled:e.table.officiant_id==null,type:"button",class:"btn btn-info p-3"},[nLt,_(" Скачать данные файлом ")],8,iLt)]),t("div",lLt,[t("div",aLt,[t("div",rLt,[dLt,t("div",cLt,[e.table.creator?(l(),M(Jo,{key:0,"can-edit":!1,data:e.table.creator},null,8,["data"])):u("",!0)])])])]),t("div",uLt,[t("div",mLt,[t("div",hLt,[pLt,t("div",_Lt,[e.table.officiant?(l(),M(Jo,{key:0,"can-edit":!1,data:e.table.officiant},null,8,["data"])):u("",!0)])])])]),t("div",fLt,[t("div",bLt,[t("div",gLt,[yLt,t("div",vLt,[e.clients.length>0?(l(),a("ol",$Lt,[(l(!0),a(v,null,O(e.clients,n=>(l(),a("li",kLt,[t("div",wLt,[t("div",FLt,p(n.name||n.fio_from_telegram||n.telegram_chat_id||"-"),1),t("p",CLt,[_("Номер телефона "),t("span",PLt,p(n.phone||"не указан"),1)]),t("p",SLt,[_("День рождения "),t("span",xLt,p(n.birthday||"не указано"),1)])]),t("span",jLt,"#"+p(n.id),1)]))),256))])):u("",!0)])])])]),t("div",OLt,[t("div",TLt,[t("div",ULt,[ILt,t("div",VLt,[t("form",{onSubmit:o[10]||(o[10]=W((...n)=>e.pushService&&e.pushService(...n),["prevent"]))},[t("div",MLt,[f(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=n=>e.serviceForm.title=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.serviceForm.title]]),ALt]),t("div",ELt,[f(t("input",{type:"number","onUpdate:modelValue":o[9]||(o[9]=n=>e.serviceForm.price=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[k,e.serviceForm.price]]),DLt]),zLt],32),e.services.length>0?(l(),a(v,{key:0},[BLt,t("ul",LLt,[(l(!0),a(v,null,O(e.services,(n,i)=>(l(),a("li",RLt,[t("span",null,[_(p((n==null?void 0:n.title)||"-")+" ",1),t("strong",NLt,p(n.price)+" ₽",1)]),t("a",{onClick:r=>e.removeService(i),href:"javascript:void(0)"},YLt,8,qLt)]))),256))])],64)):u("",!0)]),t("div",HLt,[t("button",{type:"button",onClick:o[11]||(o[11]=(...n)=>e.storeServices&&e.storeServices(...n)),disabled:e.services.length===0,class:"btn btn-primary w-100 p-3"},"Перенести сервисы в чек ",8,QLt)])])])])],64)):(l(),M(Ns,{key:1}))]))}}),KLt=Object.freeze(Object.defineProperty({__proto__:null,default:Oc},Symbol.toStringTag,{value:"Module"})),JLt={data(){return{tab:0,sending:!1,linkForm:{phone:null,name:null,email:null,amount:0,is_recurrent:!1,description:"Оплата заказа"}}},computed:{...G(["getSelf"]),tg(){return window.Telegram.WebApp}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(s=>s.click()),this.$router.back()})},methods:{submit(){this.sending=!0,this.$store.dispatch("sendSBPInvoice",{dataObject:this.linkForm}).then(s=>{this.sending=!1,this.linkForm.name=null,this.linkForm.phone=null,this.linkForm.email=null,this.linkForm.recurrent=!1,this.linkForm.description="Оплата заказа",this.linkForm.amount=0,this.$notify({title:"Оплата",text:"Вы успешно отправили ссылку на оплату",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Упс...",text:"Что-то пошло не так...",type:"error"})})}}},XLt={class:"container py-3"},ZLt=t("h6",null,[t("i",{class:"fa-solid fa-money-bill-transfer"}),_(" Генерация ссылок на оплату")],-1),eRt={class:"form-check form-switch"},tRt=t("label",{class:"form-check-label",for:"is-recurent-payment"},"Является рекурентным",-1),sRt={class:"form-floating mb-2"},oRt=t("label",{for:"floatingInput"},[_("Сумма, руб "),t("span",{class:"fw-bold text-danger"},"*")],-1),iRt={class:"form-floating mb-2"},nRt={for:"floatingTextarea"},lRt={key:0,style:{"font-size":"12px"}},aRt=t("span",{class:"fw-bold text-danger"},"*",-1),rRt=t("div",{class:"divider my-3"},"Данные о клиенте",-1),dRt={class:"form-floating mb-2"},cRt=t("label",{for:"floatingInput"},"Имя клиента",-1),uRt={class:"form-floating mb-2"},mRt=t("label",{for:"floatingInput"},[_("Телефон клиента "),t("span",{class:"fw-bold text-danger"},"*")],-1),hRt={class:"form-floating mb-2"},pRt=t("label",{for:"floatingInput"},"Почта клиента",-1),_Rt=["disabled"],fRt=t("i",{class:"fa-solid fa-paper-plane"},null,-1);function bRt(s,e,o,n,i,r){const d=ie("mask");return l(),a("div",XLt,[ZLt,t("form",{onSubmit:e[6]||(e[6]=W((...c)=>r.submit&&r.submit(...c),["prevent"]))},[t("div",eRt,[f(t("input",{class:"form-check-input","onUpdate:modelValue":e[0]||(e[0]=c=>i.linkForm.is_recurrent=c),type:"checkbox",role:"switch",id:"is-recurent-payment"},null,512),[[z,i.linkForm.is_recurrent]]),tRt]),t("div",sRt,[f(t("input",{type:"number",min:"0","onUpdate:modelValue":e[1]||(e[1]=c=>i.linkForm.amount=c),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.linkForm.amount]]),oRt]),t("div",iRt,[f(t("textarea",{class:"form-control",style:{"min-height":"200px"},maxlength:"255",required:"","onUpdate:modelValue":e[2]||(e[2]=c=>i.linkForm.description=c),placeholder:"Leave a comment here",id:"floatingTextarea"},null,512),[[k,i.linkForm.description]]),t("label",nRt,[_("Описание услуги "),(i.linkForm.description||"").length>0?(l(),a("span",lRt,"("+p(i.linkForm.description.length)+"/255)",1)):u("",!0),aRt])]),rRt,t("div",dRt,[f(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=c=>i.linkForm.name=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.linkForm.name]]),cRt]),t("div",uRt,[f(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=c=>i.linkForm.phone=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[d,"+7(###) ###-##-##"],[k,i.linkForm.phone]]),mRt]),t("div",hRt,[f(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=c=>i.linkForm.email=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[k,i.linkForm.email]]),pRt]),t("button",{disabled:i.sending,class:"btn btn-primary mb-2 w-100 p-3"},[fRt,_(" Отправить ссылку на оплату в чат ")],8,_Rt)],32)])}const Tc=oe(JLt,[["render",bRt]]),gRt=Object.freeze(Object.defineProperty({__proto__:null,default:Tc},Symbol.toStringTag,{value:"Module"})),yRt={class:"container"},vRt={class:"row"},$Rt={class:"col-12"},kRt={key:1,class:"alert alert-light d-flex flex-column align-items-center justify-content-center"},wRt=t("div",{class:"spinner-border text-primary my-3",role:"status"},[t("span",{class:"visually-hidden"},"Loading...")],-1),FRt={data(){return{page:null,bot:null}},mounted(){this.loadBotAdminConfig(),this.loadPageById()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})},loadPageById(){let s=this.$route.params.pageId;this.$store.dispatch("loadPageById",{dataObject:{page_id:s}}).then(e=>{this.page=e.data})}}},Uc=Object.assign(FRt,{__name:"PageEditor",setup(s){return(e,o)=>(l(),a("div",yRt,[t("div",vRt,[t("div",$Rt,[e.page?(l(),M(dc,{key:0,"only-edit":!0,page:e.page},null,8,["page"])):(l(),a("div",kRt,[_(" Подготавливаем данные... "),wRt]))])])]))}}),CRt=Object.freeze(Object.defineProperty({__proto__:null,default:Uc},Symbol.toStringTag,{value:"Module"})),PRt={class:"container py-3"},SRt={class:"row"},xRt={class:"col-12"},jRt={data(){}},Ic=Object.assign(jRt,{__name:"Bookings",setup(s){return(e,o)=>(l(),a("div",PRt,[t("div",SRt,[t("div",xRt,[T(Nr)])])]))}}),ORt=Object.freeze(Object.defineProperty({__proto__:null,default:Ic},Symbol.toStringTag,{value:"Module"})),TRt=[{path:"/",redirect:"/empty"},{name:"empty",path:"/empty",component:tr,meta:{title:"Ничего не найдено",hide_menu:!0}},{name:"vip",path:"/vip",component:ir,meta:{title:"VIP-анкета",hide_menu:!0}},{name:"FriendsGame",path:"/friends-game",component:Qa,meta:{title:"Приведи друзей",hide_menu:!0}},{name:"ClientPromocode",path:"/promocode-main",component:Ha,meta:{title:"Ввод промокода",hide_menu:!0}},{name:"appointments",path:"/appointment-events",component:qa,meta:{title:"Запись",hide_menu:!0}},{name:"profileForm",path:"/profile-form",component:nr,meta:{title:"Анкета",hide_menu:!0}},{name:"quizzes",path:"/quizzes",component:Ra,meta:{title:"Квиз",hide_menu:!0}},{name:"quiz",path:"/quiz/:quizId",component:Na,meta:{title:"Квиз",hide_menu:!0}},{name:"schedule",path:"/schedule-main",component:Da,meta:{title:"График работы",hide_menu:!0}},{name:"cashOut",path:"/cash-out",component:Xa,meta:{title:"Вывод средств",hide_menu:!0}},{name:"admin",path:"/admins",component:or,meta:{title:"Активные администраторы",hide_menu:!0}},{name:"home",path:"/home",component:Oa,meta:{title:"Главная страница"}},{name:"booking",path:"/book-a-table",component:sr,meta:{title:"Бронирование столика",hide_menu:!0}},{name:"products",path:"/products",component:Ta,meta:{title:"Продукты"}},{name:"productsInCategory",path:"/products-in-category/:categoryId",component:Ua,meta:{title:"Продукты в категории"}},{name:"categories",path:"/categories",component:lr,meta:{title:"Категории товаров"}},{name:"OneArmedBanditPage",path:"/one-armed-bandit",component:Wa,meta:{title:"Однорукий бандит",hide_menu:!0}},{name:"wheel",path:"/wheel-of-fortune",component:Ka,meta:{title:"Колесо фортуны",hide_menu:!0}},{name:"wheelCustom",path:"/wheel-of-fortune-custom",component:Ja,meta:{title:"Колесо фортуны 2",hide_menu:!0}},{name:"saveup",path:"/save-up",component:Za,meta:{title:"Накопительная карта",hide_menu:!0}},{name:"instagram",path:"/instagram-quest",component:er,meta:{title:"Инста-квест",hide_menu:!0}},{name:"product",path:"/products/:productId",component:Ia,meta:{title:"Продукт"}},{name:"basket",path:"/basket",component:Aa,meta:{title:"Корзина"}},{name:"favorites",path:"/favorites",component:Ma,meta:{title:"Избранное"}}],URt=[{name:"AdminMain",path:"/admin-main",component:ar,meta:{title:"Админ панель: Главная",hide_menu:!0,need_admin_menu:!0}},{name:"AdminChatLog",path:"/admin-chat-history/:botUserId",component:rr,meta:{title:"История чата",hide_menu:!0,need_admin_menu:!0}},{name:"AdminPromotion",path:"/admin-promotion",component:cr,meta:{title:"Админ панель: Реклама",hide_menu:!0,need_admin_menu:!0}},{name:"AdminMessageToUser",path:"/admin-callback",component:xr,meta:{title:"Админ панель: Сообщение к пользователю",hide_menu:!0,need_admin_menu:!0}},{name:"AdminShopManager",path:"/admin-shop-manager",component:fr,meta:{title:"Админ панель: Магазин",hide_menu:!0,need_admin_menu:!0}},{name:"AdminCompanyManager",path:"/admin-company-manager",component:br,meta:{title:"Профиль компании",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotManager",path:"/admin-bot-manager",component:gr,meta:{title:"Настройки бота",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotAmo",path:"/admin-bot-amo",component:Fr,meta:{title:"AMO CRM",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotYClients",path:"/admin-bot-y-clients",component:Pr,meta:{title:"YClients",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotPage",path:"/admin-bot-page",component:yr,meta:{title:"Страницы бота",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotSlug",path:"/admin-bot-slug",component:vr,meta:{title:"Скрипты бота",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotDialog",path:"/admin-bot-dialog",component:kr,meta:{title:"Диалоги бота",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBotKeyboard",path:"/admin-bot-keyboard",component:wr,meta:{title:"Клавитуары бота",hide_menu:!0,need_admin_menu:!0}},{name:"AdminStatistic",path:"/admin-statistic",component:ur,meta:{title:"Админ панель: Статистика",hide_menu:!0,need_admin_menu:!0}},{name:"AdminWorkStatus",path:"/admin-work-status",component:mr,meta:{title:"Админ панель: Работа",hide_menu:!0,need_admin_menu:!0}},{name:"AdminUsers",path:"/admin-users",component:pr,meta:{title:"Админ панель: Пользователи",hide_menu:!0,need_admin_menu:!0}},{name:"AdminActions",path:"/admin-actions",component:_r,meta:{title:"Админ панель: События",hide_menu:!0,need_admin_menu:!0}},{name:"AdminOrders",path:"/admin-orders",component:hr,meta:{title:"Админ панель: Заказы",hide_menu:!0,need_admin_menu:!0}},{name:"AdminBonusProduct",path:"/admin-bonus-product",component:Sr,meta:{title:"Админ панель: Бонусы",hide_menu:!0,need_admin_menu:!0}}],IRt=[{name:"ManagerMain",path:"/manager-main",component:Or,meta:{title:"Менеджер: Главная",hide_menu:!0}},{name:"ManagerForm",path:"/manager-form",component:Tr,meta:{title:"Менеджер: Регистрация",hide_menu:!0}},{name:"ManagerClients",path:"/manager-clients",component:Ir,meta:{title:"Менеджер: Клиенты",hide_menu:!0}},{name:"ManagerProfile",path:"/manager-profile",component:Mr,meta:{title:"Менеджер: Профиль",hide_menu:!0}},{name:"ManagerPartners",path:"/manager-partners",component:Ar,meta:{title:"Менеджер: Партнеры",hide_menu:!0}}],VRt=[{name:"DeliveryMain",path:"/delivery-main",component:Ya,meta:{title:"Доставка: Главная",hide_menu:!0,show_cart:!0}},{name:"DeliverymanForm",path:"/deliveryman-form",component:Er,meta:{title:"Регистрация доставщика",hide_menu:!0}},{name:"FoodConstructors",path:"/food-constructor-main",component:Ga,meta:{title:"Конструктор еды: Главная",hide_menu:!0}}],$e="/s",MRt=[{name:"UploadV2",path:$e+"/upload",component:Fc,meta:{title:"Загрузка файлов"}},{name:"SendInvoiceV2",path:$e+"/send-invoice",component:Tc,meta:{title:"СБП"}},{name:"ReferralV2",path:$e+"/referral",component:Cc,meta:{title:"Информация о друге"}},{name:"CatalogV2",path:$e+"/menu",component:qr,meta:{title:"Меню магазина"}},{name:"TableBookingV2",path:$e+"/booking",component:Ic,meta:{title:"Бронирование столиков"}},{name:"WaiterCatalogV2",path:$e+"/waiter",component:Wr,meta:{title:"Каталог"}},{name:"ContactsV2",path:$e+"/contacts",component:Yr,meta:{title:"Контакты"}},{name:"ProductV2",path:$e+"/product/:productId",component:Gr,meta:{title:"Товар"}},{name:"OrdersV2",path:$e+"/orders",component:Hr,meta:{title:"Заказы"}},{name:"ShopCartV2",path:$e+"/cart",component:td,meta:{title:"Корзина"}},{name:"ProfileV2",path:$e+"/profile",component:Qr,meta:{title:"Профиль"}},{name:"FeedBackV2",path:$e+"/feedback",component:sd,meta:{title:"Обратная связь",hide_menu:!0}},{name:"MenuV2",path:$e+"/catalog",component:Md,meta:{title:"Каталог сервисов"}},{name:"TableMenuV2",path:$e+"/table-menu",component:Pc,meta:{title:"Столик"}},{name:"TableCartV2",path:$e+"/table-cart",component:Sc,meta:{title:"Корзина"}},{name:"OneArmedBanditV2",path:$e+"/bandit",component:Cze,meta:{title:"Однорукий бандит"}},{name:"CashBackV2",path:$e+"/cashback",component:Ed,meta:{title:"История бонусов"}},{name:"FriendsV2",path:$e+"/friends",component:Dd,meta:{title:"Друзья"}},{name:"WheelOfFortuneV2",path:$e+"/wheel",component:zd,meta:{title:"Колесо фортуны"}},{name:"StoryManagerV2",path:$e+"/stories",component:Bd,meta:{title:"Истории"}},{name:"MailingV2",path:$e+"/admin/mailing",component:Ld,meta:{title:"Рассылка"}},{name:"TablesManagerV2",path:$e+"/admin/tables-manager",component:jc,meta:{title:"Управление столиками"}},{name:"TableV2",path:$e+"/admin/tables-manager/:tableId",component:Oc,meta:{title:"Столик"}},{name:"PageEditorV2",path:$e+"/admin/page-editor/:pageId",component:Uc,meta:{title:"Реактор страницы"}},{name:"ClientsV2",path:$e+"/admin/clients",component:qd,meta:{title:"Клиенты"}},{name:"ShopV2",path:$e+"/admin/shop",component:Yd,meta:{title:"Магазин"}},{name:"AdminOrdersV2",path:$e+"/admin/orders",component:Hd,meta:{title:"Заказы"}},{name:"LinkManagerV2",path:$e+"/admin/links",component:uc,meta:{title:"UTM-метки"}},{name:"StatisticV2",path:$e+"/admin/statistic",component:Gd,meta:{title:"Статистика"}},{name:"AdminMenuV2",path:$e+"/admin/menu",component:ac,meta:{title:"Меню"}},{name:"PromoCodesV2",path:$e+"/admin/promocodes",component:Kd,meta:{title:"Промокоды"}},{name:"PagePasswordV2",path:$e+"/enter-page-password",component:Jd,meta:{title:"Ввод ключа"}},{name:"InstaQuestV2",path:$e+"/new-insta-quest",component:Xd,meta:{title:"Квест",hide_menu:!0}},{name:"RequestPhotoV2",path:$e+"/request-photo",component:ec,meta:{title:"Запрос фото",hide_menu:!0}},{name:"FriendsGameV2",path:$e+"/new-friends-game",component:tc,meta:{title:"Квест",hide_menu:!0}},{name:"PromoCodeFormV2",path:$e+"/new-promo-code",component:sc,meta:{title:"Промокоды",hide_menu:!0}},{name:"VipProfileV2_1",path:$e+"/new-vip",component:oc,meta:{title:"Анкета пользователя",hide_menu:!0}},{name:"VipProfileV2_2",path:$e+"/new-profile-form",component:nc,meta:{title:"Анкета пользователя",hide_menu:!0}},{name:"SimpleProfileV2_1",path:$e+"/simple-profile-form",component:ic,meta:{title:"Анкета пользователя",hide_menu:!0}},{name:"WheelCustomV2",path:$e+"/wheel-of-fortune-custom",component:lc,meta:{title:"Колесо фортуны",hide_menu:!0}},{name:"BotManagerV2",path:$e+"/admin/bot",component:rc,meta:{title:"Бот"}},{name:"PageManagerV2",path:$e+"/admin/pages",component:cc,meta:{title:"Страницы"}},{name:"PartnersV2",path:$e+"/admin/partners",component:pc,meta:{title:"Партнеры"}},{name:"IntegrationsV2",path:$e+"/admin/integrations",component:mc,meta:{title:"Интеграции"}},{name:"AmoV2",path:$e+"/admin/amo",component:_c,meta:{title:"AMO"}},{name:"CdekV2",path:$e+"/admin/cdek",component:fc,meta:{title:"CDEK"}},{name:"BitrixV2",path:$e+"/admin/bitrix",component:kc,meta:{title:"Bitrix24"}},{name:"IikoV2",path:$e+"/admin/iiko",component:$c,meta:{title:"IIKO"}},{name:"FrontPadV2",path:$e+"/admin/frontpad",component:wc,meta:{title:"FrontPad"}},{name:"DialogsV2",path:$e+"/admin/dialogs",component:gc,meta:{title:"Диалоги"}},{name:"SlugsV2",path:$e+"/admin/scripts",component:yc,meta:{title:"Скрипты"}},{name:"YClientsV2",path:$e+"/admin/y-clients",component:vc,meta:{title:"YClients"}}],ARt=Cp({history:Pp(),routes:[...TRt,...URt,...IRt,...VRt,...MRt]}),j={async makeAxiosFactory(s,e="GET",o=null,n=null){if(!navigator.onLine)return Promise.reject("Вы не в сети!");let i,r=window.Telegram&&window.Telegram.WebApp.initData||null,d=window.currentBot.bot_domain||null,c=window.currentScript||null;switch(Rs.defaults.headers.common["X-CASHMAN-SLUG-ID"]=c?btoa(c):null,Rs.defaults.headers.common["X-CASHMAN-BOT-DOMAIN"]=d?btoa(d):null,Rs.defaults.headers.common["X-CASHMAN-TG-DATA"]=r?btoa(r):null,e.toUpperCase()){default:case"GET":i=await Rs.get(s);break;case"POST":i=await Rs.post(s,o,n);break;case"PUT":i=await Rs.put(s,o);break;case"DELETE":i=await Rs.delete(s);break}return i},async loadActualProducts(s=[]){let e=window.Telegram.WebApp.initData||null,o=window.currentBot.bot_domain||null,n=window.currentScript||null,i={tgData:e,slug_id:n,botDomain:o,ids:s},r="/bot-client/shop/products/by-ids",d="POST";return this.makeAxiosFactory(r,d,i).then(h=>{const g=h.data.data;return Promise.resolve(g)}).catch(h=>Promise.reject(h))}},Xt="/bot-client/cashback";let ERt={cashback:[],cashback_paginate_object:null};const DRt={getCashBack:s=>s.cashback||[],getCashBackPaginateObject:s=>s.cashback_paginate_object||null},zRt={async loadCashBackModuleData(s){let e=`${Xt}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadReceiverUserData(s,e={dataObject:{user_telegram_chat_id:null}}){let o=`${Xt}/receiver`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>{let r=i.data;return Promise.resolve(r)}).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadCashBack(s,e={dataObject:{user_telegram_chat_id:null},page:0,size:12}){let o=e.page||0,i=`${Xt}/history?page=${o}&size=12`;return j.makeAxiosFactory(i,"POST",{...e.dataObject}).then(d=>{let c=d.data;return s.commit("setCashBack",c.data),delete c.data,s.commit("setCashBackPaginateObject",c),Promise.resolve()}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async removeCashBack(s,e={dataObject:null}){let o=`${Xt}/remove`,n=window.Telegram.WebApp.initData,i=window.currentBot.bot_domain||null;return j.makeAxiosFactory(o,"POST",{tgData:n,botDomain:i,...e.dataObject}).then(d=>Promise.resolve(d.data)).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async addCashBack(s,e={dataObject:null}){let o=`${Xt}/add`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async requestUserData(s,e){let o=`${Xt}/request-user-data`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async requestRefreshMenu(s,e){let o=`${Xt}/request-refresh-menu`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async userMessage(s,e){let o=`${Xt}/user-message`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async saveDeliveryman(s,e){let o=`${Xt}/deliveryman`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async saveSimpleProfileFormData(s,e={dataObject:null}){let o={...e},n=`${Xt}/profile-form-data`;return j.makeAxiosFactory(n,"POST",o.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async saveVip(s,e){let o={...e},n=`${Xt}/vip`;return j.makeAxiosFactory(n,"POST",o).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))}},BRt={setCashBack(s,e){s.cashback=e||[],localStorage.setItem("cashman_cashback",JSON.stringify(e))},setCashBackPaginateObject(s,e){s.cashback_paginate_object=e||[],localStorage.setItem("cashman_cashback_paginate_object",JSON.stringify(e))}},LRt={state:ERt,mutations:BRt,actions:zRt,getters:DRt},St="/bot-client/admins";let RRt={admins:[],admins_paginate_object:null};const NRt={getAdmins:s=>s.admins||[],getAdminsPaginateObject:s=>s.admins_paginate_object||null},qRt={async loadAdmins(s,e={dataObject:null,page:0,size:12}){let o=e.page||0,i=`${St}?page=${o}&size=12`,r="POST";return j.makeAxiosFactory(i,r,e.dataObject).then(c=>{let h=c.data;return s.commit("setAdmins",h.data),delete h.data,s.commit("setAdminsPaginateObject",h),Promise.resolve()}).catch(c=>(s.commit("setErrors",c.response.data.errors||[]),Promise.reject(c)))},async requestAdmin(s,e={dataObject:null}){let o=`${St}/request`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve()).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async sendApproveToUser(s,e){let o=`${St}/send-approve`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async userReviewRequest(s,e){let o=`${St}/request-review`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async sendPageToUser(s,e){let o=`${St}/send-page-to-user`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async sendInvoice(s,e){let o=`${St}/send-invoice`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async addAdmin(s,e){let o=`${St}/add`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAdmin(s,e){let o=`${St}/remove`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async selfRemove(s,e){let o=`${St}/self-remove`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async workStateChange(s,e={dataObject:null}){let o=`${St}/work-status`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async trafficLoad(s,e={bot_id:null}){let o=`${St}/load-traffic-statistic`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async statisticLoad(s,e){let o=`${St}/load-statistic`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async downloadBotStatistic(s){return j.makeAxiosFactory(`${St}/download-bot-statistic`,"POST",null,{responseType:"blob"}).then(o=>o).catch(o=>(s.commit("setErrors",o.response.data.errors||[]),Promise.reject(o)))},async downloadBotUsers(s){return j.makeAxiosFactory(`${St}/download-bot-users`,"POST",null,{responseType:"blob"}).then(o=>o).catch(o=>(s.commit("setErrors",o.response.data.errors||[]),Promise.reject(o)))},async downloadCashBackHistory(s,e={orderBy:null,direction:null}){return j.makeAxiosFactory(`${St}/download-cashback-history`,"POST",e,{responseType:"blob"}).then(n=>n).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))}},WRt={setAdmins(s,e){s.admins=e||[],localStorage.setItem("cashman_admins",JSON.stringify(e))},setAdminsPaginateObject(s,e){s.admins_paginate_object=e||[],localStorage.setItem("cashman_admins_paginate_object",JSON.stringify(e))}},YRt={state:RRt,mutations:WRt,actions:qRt,getters:NRt},et="/bot-client/shop/products";let HRt={products:[],categories:[],products_paginate_object:null,categories_paginate_object:null};const QRt={getProducts:s=>s.products||[],getCategories:s=>s.categories||[],getProductById:s=>e=>s.products.find(o=>o.id===e),getProductsPaginateObject:s=>s.products_paginate_object||null,getCategoriesPaginateObject:s=>s.categories_paginate_object||null},GRt={async loadRecommendedProducts(s){let e=`${et}/load-recommended-products`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadShopModuleData(s){let e=`${et}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async exportAllProducts(s){let e=`${et}/export-all-products`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async removeProductCategory(s,e={category_id:null}){let o=`${et}/remove-category/${e.category_id}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async changeProductCategoryStatus(s,e){let o=`${et}/categories/status/${e}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async changeCategoryRecommendationStatus(s,e={category_id:null,status:0}){let o=`${et}/categories/recommendation-status`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async getFavList(s){let e=`${et}/fav-list`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async toggleProductInFavorites(s,e={form:null}){let o=`${et}/toggle-favorite`;return j.makeAxiosFactory(o,"POST",e.form).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeProductCategory(s,e={category:null}){let o=`${et}/store-category`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async addProductCategory(s,e={category:null}){let o=`${et}/add-category`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async saveProduct(s,e={productForm:null}){let o=`${et}/add-product`;return j.makeAxiosFactory(o,"POST",e.productForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async changeProductRecommendationStatus(s,e={product_id:null,status:0}){let o=`${et}/change-recommendation-status`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve()).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAllProducts(s){let e=`${et}/remove-all-products`,o="POST";return j.makeAxiosFactory(e,o).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeShopProduct(s,e){let o=`${et}/${e}`,n="DELETE";return j.makeAxiosFactory(o,n).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadMoreProductsByCategory(s,e){let o=`${et}-more-by-category`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadProductsByCategory(s,e){let o=`${et}-by-category`,n="POST";return j.makeAxiosFactory(o,n,{partner_id:e.partner_id}).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadProduct(s,e={dataObject:{productId:null}}){let o=`${et}/${e.dataObject.productId}`,n="POST";return j.makeAxiosFactory(o,n).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async addToStopListProduct(s,e){let o=`${et}/stop-list-product/${e}`,n="POST";return j.makeAxiosFactory(o,n).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async restoreProduct(s,e){let o=`${et}/restore-product/${e}`,n="POST";return j.makeAxiosFactory(o,n).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadCategory(s,e={dataObject:{categoryId:null}}){let o=`${et}/category/${e.dataObject.categoryId}`,n="POST";return j.makeAxiosFactory(o,n).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadProducts(s,e={dataObject:{search:null,categories:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,r=`${et}?page=${n}&size=20`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setProducts",g.data),delete g.data,s.commit("setProductsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadProductsInCategory(s,e={dataObject:{search:null,category_id:null},page:0,size:12}){let o=window.Telegram.WebApp.initData||null,n=window.currentBot.bot_domain||null,i=window.currentScript||null,r={tgData:o,slug_id:i,botDomain:n,...e.dataObject},d=e.page||0,h=`${et}/in-category?page=${d}&size=12`,g="POST";return j.makeAxiosFactory(h,g,r).then(x=>{let P=x.data;return s.commit("setProducts",P.data),delete P.data,s.commit("setProductsPaginateObject",P),Promise.resolve()}).catch(x=>(s.commit("setErrors",x.response.data.errors||[]),Promise.reject(x)))},async loadCategories(s,e={page:0,size:100,dataObject:null}){let o=e.page||0,n=e.size||5,i=`${et}/categories?page=${o}&size=${n}`,r="POST";return j.makeAxiosFactory(i,r,e.dataObject).then(c=>{const h=c.data;return s.commit("setCategories",h.data),delete h.data,s.commit("setCategoriesPaginateObject",h),Promise.resolve()}).catch(c=>(s.commit("setErrors",c.response.data.errors||[]),Promise.reject(c)))},async loadRandomProducts(s){let e=window.Telegram.WebApp.initData||null,o=window.currentBot.bot_domain||null,n=window.currentScript||null,i={tgData:e,slug_id:n,botDomain:o},r=`${et}/random`,d="POST";return j.makeAxiosFactory(r,d,i).then(h=>{let g=h.data;return s.commit("setProducts",g.data),delete g.data,s.commit("setProductsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))}},KRt={setProducts(s,e){s.products=e||[],localStorage.setItem("cashman_products",JSON.stringify(e))},setCategories(s,e){s.categories=e||[],localStorage.setItem("cashman_categories",JSON.stringify(e))},setCategoriesPaginateObject(s,e){s.categories_paginate_object=e||[],localStorage.setItem("cashman_categories_paginate_object",JSON.stringify(e))},setProductsPaginateObject(s,e){s.products_paginate_object=e||[],localStorage.setItem("cashman_products_paginate_object",JSON.stringify(e))}},JRt={state:HRt,mutations:KRt,actions:GRt,getters:QRt},ba="/bot-client/friends-script";let XRt={};const ZRt={},eNt={async friendsLoadScriptVariants(s){let e=`${ba}/load-script-variants`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async friendsStoreConfig(s,e){let o=`${ba}/store`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},tNt={},sNt={state:XRt,mutations:tNt,actions:eNt,getters:ZRt},oNt={filling_categories:[{id:1,title:"Овощные начинки"},{id:2,title:"Мясные начинки"},{id:3,title:"Морские начинки"},{id:4,title:"Сырные начинки"},{id:5,title:"Блинчики сладкие"},{id:6,title:"Сладкие добавки"},{id:7,title:"Блинчики соленые"},{id:8,title:"Основа пиццы"},{id:9,title:"Верхнее покрытие ролла"},{id:10,title:"Начинка ролла"},{id:11,title:"Основа ролла"},{id:12,title:"Хот-дог"},{id:13,title:"Добавки к хот-догу"},{id:14,title:"Вместе с хот-догом"},{id:15,title:"Основа гонконгских вафель"},{id:16,title:"Начинка гонконгских вафель"},{id:17,title:"Фруктовые добавки для гонконгских вафель"},{id:18,title:"Добавки топпинга или соуса для гонконгских вафель"},{id:19,title:"Ланч салат"},{id:20,title:"Ланч первые блюда"},{id:21,title:"Ланч гарнир"},{id:22,title:"Ланч напиток"},{id:23,title:"Бизнес-ланч"}],filling:[{id:1,title:"Грибы жаренные",weight:50,price:45,category:1,checked:!1,disabled:!1},{id:2,title:"Грибы стерилизованные",weight:40,price:45,category:1,checked:!1,disabled:!1},{id:3,title:"Грибы свежие",weight:40,price:45,category:1,checked:!1,disabled:!1},{id:4,title:"Ананасы",weight:40,price:35,category:1,checked:!1,disabled:!1},{id:5,title:"Помидоры свежие",weight:50,price:30,category:1,checked:!1,disabled:!1},{id:6,title:"Перец болгарский",weight:40,price:30,category:1,checked:!1,disabled:!1},{id:7,title:"Кукуруза",weight:40,price:30,category:1,checked:!1,disabled:!1},{id:8,title:"Маслины",weight:30,price:55,category:1,checked:!1,disabled:!1},{id:9,title:"Фасоль спаржевая",weight:50,price:30,category:1,checked:!1,disabled:!1},{id:10,title:"Пепперони",weight:30,price:26,category:1,checked:!1,disabled:!1},{id:11,title:"Маринованный лук",weight:50,price:12,category:1,checked:!1,disabled:!1},{id:12,title:"Огурец маринованный",weight:50,price:30,category:1,checked:!1,disabled:!1},{id:13,title:"Зелень петрушки к пицце",weight:3,price:12,category:1,checked:!1,disabled:!1},{id:14,title:"Зелень укропа к пицце",weight:3,price:12,category:1,checked:!1,disabled:!1},{id:15,title:"Балык мясной",weight:40,price:50,category:2,checked:!1,disabled:!1},{id:16,title:"Курица",weight:50,price:55,category:2,checked:!1,disabled:!1},{id:17,title:"Охотничьи колбаски",weight:50,price:55,category:2,checked:!1,disabled:!1},{id:18,title:"Салями",weight:40,price:50,category:2,checked:!1,disabled:!1},{id:19,title:"Бекон",weight:40,price:50,category:2,checked:!1,disabled:!1},{id:20,title:"Салями острая пепперони",weight:25,price:55,category:2,checked:!1,disabled:!1},{id:21,title:"Кальмары",weight:50,price:85,category:3,checked:!1,disabled:!1},{id:22,title:"Крабовые палочки",weight:50,price:40,category:3,checked:!1,disabled:!1},{id:23,title:"Семга",weight:40,price:135,category:3,checked:!1,disabled:!1},{id:24,title:"Ди Маре",weight:150,price:135,category:3,checked:!1,disabled:!1},{id:25,title:"Твердый сыр",weight:70,price:55,category:4,checked:!1,disabled:!1},{id:26,title:"Фета",weight:50,price:60,category:4,checked:!1,disabled:!1},{id:27,title:"Пармезан",weight:15,price:40,category:4,checked:!1,disabled:!1},{id:28,title:"Моцарелла",weight:60,price:60,category:4,checked:!1,disabled:!1},{id:29,title:"Блинчик соленый",weight:90,price:45,category:7,checked:!0,disabled:!0},{id:30,title:"Семга, тар-тар",weight:150,price:45,category:7,checked:!1,disabled:!1},{id:31,title:"Икра красная",weight:20,price:130,category:7,checked:!1,disabled:!1},{id:32,title:"Грибы(20г), сыр(20г)",weight:40,price:50,category:7,checked:!1,disabled:!1},{id:33,title:"Курица(30г), сыр(20г)",weight:50,price:55,category:7,checked:!1,disabled:!1},{id:34,title:"Сыр",weight:20,price:25,category:7,checked:!1,disabled:!1},{id:35,title:"Сыр(20г), грибы(20г), балык(20г)",weight:60,price:55,category:7,checked:!1,disabled:!1},{id:36,title:"Салями, помидор, сыр",weight:160,price:85,category:7,checked:!1,disabled:!1},{id:37,title:"Курица, грибы, сметана",weight:70,price:85,category:7,checked:!1,disabled:!1},{id:38,title:"С балыком 'Три желания'",weight:205,price:120,category:7,checked:!1,disabled:!1},{id:39,title:"С семгой 'Три желания'",weight:225,price:195,category:7,checked:!1,disabled:!1},{id:40,title:"Помидор(17г), сыр(30г), майонез(10г), зелень(3г)",weight:60,price:50,category:7,checked:!1,disabled:!1},{id:41,title:"Блинчик сладкий",weight:90,price:45,category:5,checked:!0,disabled:!0},{id:42,title:"Апельсин конфи",weight:60,price:50,category:5,checked:!1,disabled:!1},{id:43,title:"Банан (50г), шоколад(15г)",weight:65,price:60,category:5,checked:!1,disabled:!1},{id:44,title:"Альфорно / Творожная начинка",weight:200,price:95,category:5,checked:!1,disabled:!1},{id:45,title:"Нутелла / Банан / Мороженное",weight:210,price:115,category:5,checked:!1,disabled:!1},{id:46,title:"Творожная начинка / Апельсин конфи",weight:200,price:95,category:5,checked:!1,disabled:!1},{id:47,title:"Смородина / Творожная начинка",weight:240,price:95,category:5,checked:!1,disabled:!1},{id:48,title:"Вишня конфи",weight:60,price:50,category:5,checked:!1,disabled:!1},{id:49,title:"Клубника конфи",weight:60,price:50,category:5,checked:!1,disabled:!1},{id:50,title:"Нутелла(30г), орехи(5г)",weight:35,price:60,category:5,checked:!1,disabled:!1},{id:52,title:"Мёд",weight:25,price:25,category:6,checked:!1,disabled:!1},{id:53,title:"Сгущенное молоко",weight:20,price:25,category:6,checked:!1,disabled:!1},{id:54,title:"Сметана",weight:20,price:20,category:6,checked:!1,disabled:!1},{id:55,title:"Соус ванильный",weight:30,price:15,category:6,checked:!1,disabled:!1},{id:56,title:"Черная смородина",weight:60,price:50,category:6,checked:!1,disabled:!1},{id:57,title:"Шоколад",weight:25,price:50,category:6,checked:!1,disabled:!1},{id:58,title:"Яблоки, корица",weight:80,price:40,category:6,checked:!1,disabled:!1},{id:59,title:"Пицца Челентано",weight:350,price:95,category:8,checked:!0,disabled:!1},{id:60,title:"Пицца Челентано с белым соусом",weight:95,price:45,category:8,checked:!1,disabled:!1},{id:61,title:"Основа ролла",weight:95,price:80,category:11,checked:!0,disabled:!0},{id:62,title:"Лосось",weight:30,price:100,category:9,checked:!1,disabled:!1},{id:63,title:"Тунец",weight:30,price:110,category:9,checked:!1,disabled:!1},{id:64,title:"Угорь",weight:30,price:130,category:9,checked:!1,disabled:!1},{id:65,title:"Креветка Тигровая",weight:30,price:140,category:9,checked:!1,disabled:!1},{id:66,title:"Окунь",weight:30,price:60,category:9,checked:!1,disabled:!1},{id:67,title:"Кунжут Белый",weight:30,price:20,category:9,checked:!1,disabled:!1},{id:68,title:"Кунжут Черный",weight:30,price:20,category:9,checked:!1,disabled:!1},{id:69,title:"Кунжут ч/б",weight:30,price:30,category:9,checked:!1,disabled:!1},{id:70,title:"Икра Тобико Красная",weight:30,price:50,category:9,checked:!1,disabled:!1},{id:71,title:"Икра Тобико Зелёная",weight:30,price:50,category:9,checked:!1,disabled:!1},{id:72,title:"Икра Тобико Черная",weight:30,price:50,category:9,checked:!1,disabled:!1},{id:73,title:"Струшка Тунца",weight:30,price:30,category:9,checked:!1,disabled:!1},{id:74,title:"Огурец",weight:30,price:20,category:9,checked:!1,disabled:!1},{id:75,title:"Авакадо",weight:30,price:100,category:9,checked:!1,disabled:!1},{id:76,title:"Укроп",weight:3,price:10,category:9,checked:!1,disabled:!1},{id:77,title:"Нори",weight:30,price:15,category:9,checked:!0,disabled:!1},{id:78,title:"Лосось",weight:30,price:50,category:10,checked:!1,disabled:!1},{id:79,title:"Тунец",weight:30,price:50,category:10,checked:!1,disabled:!1},{id:80,title:"Угорь",weight:30,price:65,category:10,checked:!1,disabled:!1},{id:81,title:"Креветка Тигровая",weight:30,price:70,category:10,checked:!1,disabled:!1},{id:82,title:"Окунь",weight:30,price:30,category:10,checked:!1,disabled:!1},{id:83,title:"Снежный Краб",weight:30,price:30,category:10,checked:!1,disabled:!1},{id:84,title:"Мидии",weight:30,price:30,category:10,checked:!1,disabled:!1},{id:85,title:"Кальмар",weight:30,price:30,category:10,checked:!1,disabled:!1},{id:86,title:"Курица Жареная",weight:30,price:30,category:10,checked:!1,disabled:!1},{id:87,title:"Лосось Жаренный",weight:30,price:55,category:10,checked:!1,disabled:!1},{id:88,title:"Окунь Жаренный",weight:30,price:35,category:10,checked:!1,disabled:!1},{id:89,title:"Сливочный Сыр",weight:30,price:30,category:10,checked:!1,disabled:!1},{id:90,title:"Плаванный сыр",weight:30,price:25,category:10,checked:!1,disabled:!1},{id:91,title:"Икра Тобико Красная",weight:30,price:50,category:10,checked:!1,disabled:!1},{id:92,title:"Икра Лосося",weight:30,price:100,category:10,checked:!1,disabled:!1},{id:93,title:"Огурец",weight:30,price:10,category:10,checked:!1,disabled:!1},{id:94,title:"Авакадо",weight:30,price:50,category:10,checked:!1,disabled:!1},{id:95,title:"Чука",weight:30,price:15,category:10,checked:!1,disabled:!1},{id:96,title:"Помидор",weight:30,price:15,category:10,checked:!1,disabled:!1},{id:97,title:"Сладкиц Перец",weight:30,price:15,category:10,checked:!1,disabled:!1},{id:98,title:"Айсберг",weight:30,price:15,category:10,checked:!1,disabled:!1},{id:99,title:"Лук зелёный",weight:30,price:10,category:10,checked:!1,disabled:!1},{id:100,title:"Соус спайси",weight:30,price:15,category:10,checked:!1,disabled:!1},{id:101,title:"Майонез",weight:30,price:10,category:10,checked:!1,disabled:!1},{id:102,title:"Классический",description:"пшеничная булочка, сосиска фирменная, огурец соленый, морковь по-корейски, кетчуп, майонез, горчица",weight:260,price:95,category:12,checked:!0,disabled:!1},{id:103,title:"Цезарь",description:'пшеничная булочка, сосиска куриная в беконе, томаты, сыр Пармезан, айсберг, соус "Цезарь", горчица',weight:280,price:279,category:12,checked:!1,disabled:!1},{id:104,title:"Black Angus",description:'пшенично-солодовая булочка, колбаски из говядины "Black Angus", томаты, лук-конфи, айсберг, соус "BBQ", горчица, кунжут',weight:280,price:219,category:12,checked:!1,disabled:!1},{id:105,title:"Blue shrimp with cheese",description:'пшенично-солодовая булочка, хвосты креветок фри, айсберг, сыр Дор блю, огурец свежий, соус "Цезарь", соус "Терияки", горчица, кунжут',weight:280,price:219,category:12,checked:!1,disabled:!1},{id:106,title:"Баварский",description:'пшеничная булочка, колбаски Баварские, огурец соленый, лук-фри, соус "BBQ", горчица',weight:280,price:199,category:12,checked:!1,disabled:!1},{id:107,title:"Чили",description:'пшеничная булочка, колбаски охотничьи, маринованый лук, огурец соленый, бекон, перец "Халапенью" , чили, соус "BBQ", горчица',weight:320,price:289,category:12,checked:!1,disabled:!1},{id:108,title:"Texas",description:'пшеничная булочка, сосиска фирменная в панировке, томаты, айсберг, морковь по-корейски, соус "BBQ", майонез, горчица',weight:280,price:169,category:12,checked:!1,disabled:!1},{id:109,title:"Roll dog",description:'лаваш, сосиски фирменные, томаты, маринованный лук, сыр Моцарелла, соус "BBQ", горчица',weight:320,price:219,category:12,checked:!1,disabled:!1},{id:110,title:"Бекон",weight:50,price:43,category:13,checked:!1,disabled:!1},{id:111,title:"Креветки фри",weight:50,price:220,category:13,checked:!1,disabled:!1},{id:112,title:"Сыр 'Дор блю'",weight:10,price:25,category:13,checked:!1,disabled:!1},{id:113,title:"Сыр 'Пармезан'",weight:10,price:20,category:13,checked:!1,disabled:!1},{id:114,title:"Сыр 'Моцарелла'",weight:10,price:15,category:13,checked:!1,disabled:!1},{id:115,title:"Колбаска 'Black angus'",weight:60,price:95,category:13,checked:!1,disabled:!1},{id:116,title:"Колбаска 'Баварская'",weight:40,price:75,category:13,checked:!1,disabled:!1},{id:117,title:"Колбаска куриная в беконе",weight:60,price:79,category:13,checked:!1,disabled:!1},{id:118,title:"Сосиска фирменная",weight:70,price:49,category:13,checked:!1,disabled:!1},{id:119,title:"Морковь по корейски",weight:10,price:10,category:13,checked:!1,disabled:!1},{id:120,title:"Перец чили",weight:10,price:10,category:13,checked:!1,disabled:!1},{id:121,title:"Томаты",weight:10,price:10,category:13,checked:!1,disabled:!1},{id:122,title:"Огурец соленый",weight:10,price:10,category:13,checked:!1,disabled:!1},{id:123,title:"Огурец свежий",weight:10,price:8,category:13,checked:!1,disabled:!1},{id:124,title:"Соус 'BBQ'",weight:20,price:15,category:13,checked:!1,disabled:!1},{id:125,title:"Соус 'Цезарь'",weight:20,price:15,category:13,checked:!1,disabled:!1},{id:126,title:"Горчица",weight:20,price:10,category:13,checked:!1,disabled:!1},{id:127,title:"Соус 'Французский'",weight:20,price:10,category:13,checked:!1,disabled:!1},{id:128,title:"Картофель фри",weight:100,price:80,category:14,checked:!1,disabled:!1},{id:129,title:"Лук фри",weight:100,price:95,category:14,checked:!1,disabled:!1},{id:130,title:"Ванильная",weight:100,price:50,category:15,checked:!0,disabled:!1},{id:131,title:"Шоколадная",weight:100,price:55,category:15,checked:!1,disabled:!1},{id:132,title:"Соленая",weight:100,price:50,category:15,checked:!1,disabled:!1},{id:133,title:"Взбитые сливки",weight:50,price:45,category:16,checked:!1,disabled:!1},{id:134,title:"Бельгийский шоколад",weight:30,price:29,category:16,checked:!1,disabled:!1},{id:135,title:"M&M's",weight:30,price:35,category:16,checked:!1,disabled:!1},{id:136,title:"Сыр",weight:50,price:48,category:16,checked:!1,disabled:!1},{id:137,title:"Ветчина",weight:50,price:52,category:16,checked:!1,disabled:!1},{id:138,title:"Бекон",weight:30,price:69,category:16,checked:!1,disabled:!1},{id:139,title:"Куриная грудка",weight:30,price:51,category:16,checked:!1,disabled:!1},{id:140,title:"Банан",weight:50,price:25,category:17,checked:!1,disabled:!1},{id:141,title:"Яблоко",weight:50,price:15,category:17,checked:!1,disabled:!1},{id:142,title:"Киви",weight:50,price:22,category:17,checked:!1,disabled:!1},{id:143,title:"Клубника",weight:50,price:55,category:17,checked:!1,disabled:!1},{id:144,title:"Карамель",weight:30,price:15,category:18,checked:!1,disabled:!1},{id:145,title:"Соленая карамель",weight:30,price:15,category:18,checked:!1,disabled:!1},{id:146,title:"Ягодный соус",weight:30,price:15,category:18,checked:!1,disabled:!1},{id:147,title:"Соус 'Цезарь'",weight:30,price:20,category:18,checked:!1,disabled:!1},{id:148,title:"Сырный соус",weight:30,price:30,category:18,checked:!1,disabled:!1},{id:149,title:"Остро-сладкий соус",weight:30,price:25,category:18,checked:!1,disabled:!1},{id:150,title:"Соус барбекю",weight:30,price:20,category:18,checked:!1,disabled:!1},{id:151,title:"Бизнес-ланч",weight:0,price:150,category:23,checked:!0,disabled:!0},{id:152,title:"Салат с крабовыми палочками",weight:150,price:0,category:19,checked:!1,disabled:!1},{id:153,title:"Салат из пекинской капусты",weight:150,price:0,category:19,checked:!1,disabled:!1},{id:154,title:"Салат с кукурузой и курицей",weight:150,price:0,category:19,checked:!1,disabled:!1},{id:155,title:"Борщ",weight:250,price:0,category:20,checked:!1,disabled:!1},{id:156,title:"Сырный суп с беконом",weight:250,price:0,category:20,checked:!1,disabled:!1},{id:157,title:"Бульон куриный с яйцом",weight:250,price:0,category:20,checked:!1,disabled:!1},{id:158,title:"Куриное филе в кляре с пюре",weight:220,price:0,category:21,checked:!1,disabled:!1},{id:159,title:"Рагу из овощей со свининой",weight:220,price:0,category:21,checked:!1,disabled:!1},{id:160,title:"Куриная печень в соусе с рисом карри",weight:200,price:0,category:21,checked:!1,disabled:!1},{id:161,title:"Каркаде",weight:250,price:0,category:22,checked:!1,disabled:!1},{id:162,title:"Компот",weight:250,price:0,category:22,checked:!1,disabled:!1},{id:163,title:"Пиво",weight:330,price:0,category:22,checked:!1,disabled:!1}]},iNt={getIngredientById:s=>e=>s.filling.find(o=>o.id===e),getAllFillings:s=>s.filling||[],getIngredientsCategory:s=>e=>s.filling_categories.filter(o=>o.id===e)[0],getIngredientsFilling:s=>e=>s.filling.filter(o=>o.category===e)},nNt={},lNt={},aNt={state:oNt,mutations:lNt,actions:nNt,getters:iNt},On="/bot-client/wheel-of-fortune";let rNt={};const dNt={},cNt={async wheelOfFortuneLoadData(s){let e=`${On}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async wheelOfFortunePrepare(s){let e=`${On}/prepare`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async wheelOfFortuneWin(s,e={winForm:null}){let o=`${On}/callback`;return j.makeAxiosFactory(o,"POST",e.winForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},uNt={},mNt={state:rNt,mutations:uNt,actions:cNt,getters:dNt},Fi="/bot-client/stories";let hNt={stories:[],stories_paginate_object:null};const pNt={getStories:s=>s.stories||[],getStoryById:s=>e=>s.stories.find(o=>o.id===e),getStoriesPaginateObject:s=>s.stories_paginate_object||null},_Nt={async loadStories(s,e={page:1,size:20}){let o=e.page||1,n=e.size||20,i=`${Fi}?page=${o}&size=${n}`;return j.makeAxiosFactory(i,"GET").then(d=>{let c=d.data;return s.commit("setStories",c.data),delete c.data,s.commit("setStoriesPaginateObject",c),Promise.resolve()}).catch(d=>{var c,h;return s.commit("setErrors",((h=(c=d.response)==null?void 0:c.data)==null?void 0:h.errors)||[]),Promise.reject(d)})},async fetchStory(s,e={id:null}){let o=`${Fi}/${e.id}`;return j.makeAxiosFactory(o,"GET").then(i=>Promise.resolve(i.data)).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},async saveStory(s,e={storyForm:{}}){return j.makeAxiosFactory(Fi,"POST",e.storyForm).then(n=>Promise.resolve(n.data)).catch(n=>{var i,r;return s.commit("setErrors",((r=(i=n.response)==null?void 0:i.data)==null?void 0:r.errors)||[]),Promise.reject(n)})},async deleteStory(s,e={id:null}){let o=`${Fi}/${e.id}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})}},fNt={setStories(s,e){s.stories=e||[],localStorage.setItem("cashman_stories",JSON.stringify(e))},setStoriesPaginateObject(s,e){s.stories_paginate_object=e||null,localStorage.setItem("cashman_stories_paginate_object",JSON.stringify(e))}},bNt={state:hNt,getters:pNt,actions:_Nt,mutations:fNt},ht="/bot-client/tables";let gNt={tables:[],tables_paginate_object:null};const yNt={getTables:s=>s.tables||[],getTablesPaginateObject:s=>s.tables_paginate_object||null},vNt={async loadApprovedSelfTableBasket(s){let e=`${ht}/approved-self-basket`,o="POST";return j.makeAxiosFactory(e,o).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async nearestBookingList(s,e={start_date:null,end_date:null}){let o=`${ht}/nearest-booking-list`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async myUpcomingBookings(s){let e=`${ht}/my-upcoming-bookings`,o="POST";return j.makeAxiosFactory(e,o).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async bookingList(s,e={date:null,number:null}){let o=`${ht}/booking-list`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async bookATable(s,e={dataObject:{name:null,phone:null,persons:1,description:null,table:null}}){let o=`${ht}/book-table`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async exportNearestBookings(s,e={start_date:null,end_date:null}){let o=`${ht}/export-nearest-bookings`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async cancelBookingTable(s,e={bookingId:null}){let o=`${ht}/cancel-booking/${e.bookingId}`,n="DELETE";return j.makeAxiosFactory(o,n).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async storeTableAdditionalServices(s,e={dataObject:null}){let o=`${ht}/store-additional-service`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async acceptTableOder(s,e={dataObject:{table_id:null,type:0}}){let o=`${ht}/accept-table-order`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async requestApproveTable(s,e={dataObject:{table_id:null}}){let o=`${ht}/request-approve-table`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async startTablePay(s,e){let o=`${ht}/table-pay`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async sendOrderToMyChat(s,e={dataObject:{table_id:null}}){let o=`${ht}/send-order-to-my-chat`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async requestWaiterComing(s,e={dataObject:{table_id:null}}){let o=`${ht}/call-waiter`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async changeTableWaiter(s,e={dataObject:{table_id:null}}){let o=`${ht}/change-table-waiter`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async closeTableOrder(s,e={dataObject:{table_id:null}}){let o=`${ht}/close-table`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadTableData(s,e={dataObject:{table_id:null}}){let o=`${ht}/table-data`,n="POST";return j.makeAxiosFactory(o,n,e.dataObject).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadCurrentTableData(s){let e=`${ht}/current`,o="POST",n=localStorage.getItem("cashman_current_active_table")||null;return n&&(n=JSON.parse(n)),j.makeAxiosFactory(e,o,{table_id:(n==null?void 0:n.id)||null}).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadTables(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${ht}/waiter-tables?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setTables",g.data),delete g.data,s.commit("setTablesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async storeTables(s,e={promoCodeForm:null}){let o=`${ht}/store`;return j.makeAxiosFactory(o,"POST",e.promoCodeForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeTables(s,e={promoCodeId:null}){let o=`${ht}/${e.promoCodeId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},$Nt={setTables(s,e){s.tables=e||[],localStorage.setItem("cashman_tables",JSON.stringify(e))},setTablesPaginateObject(s,e){s.tables_paginate_object=e||[],localStorage.setItem("cashman_tables_paginate_object",JSON.stringify(e))}},kNt={state:gNt,mutations:$Nt,actions:vNt,getters:yNt},wNt="/bot-client/chat-history";let FNt={chat_history:[],chat_history_paginate_object:null};const CNt={getChatHistory:s=>s.chat_history||[],getChatHistoryPaginateObject:s=>s.chat_history_paginate_object||null},PNt={async loadChatHistory(s,e={dataObject:{bot_user_id:null},page:0,size:12}){let o=e.page||0,i=`${wNt}?page=${o}&size=12`;return j.makeAxiosFactory(i,"POST",{...e.dataObject}).then(d=>{let c=d.data;return s.commit("setChatHistory",c.data),delete c.data,s.commit("setChatHistoryPaginateObject",c),Promise.resolve()}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))}},SNt={setChatHistory(s,e){s.chat_history=e||[],localStorage.setItem("cashman_chat_history",JSON.stringify(e))},setChatHistoryPaginateObject(s,e){s.chat_history_paginate_object=e||[],localStorage.setItem("cashman_chat_history_paginate_object",JSON.stringify(e))}},xNt={state:FNt,mutations:SNt,actions:PNt,getters:CNt},$o="/bot-client/wheel-of-fortune-custom";let jNt={};const ONt={},TNt={async getClientNotUsedPrizesFromWheelOfFortune(s,e){let o=`${$o}/load-prizes-variants`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async wheelOfFortuneLoadScriptVariants(s){let e=`${$o}/load-script-variants`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async updateWheelCustomScriptParams(s,e={slugForm:null}){let o=`${$o}/store-params`;return j.makeAxiosFactory(o,"POST",e.slugForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async wheelOfFortuneCustomLoadData(s){let e=`${$o}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async wheelOfFortuneCustomPrepare(s){let e=`${$o}/prepare`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async wheelOfFortuneCustomWin(s,e={winForm:null}){let o=`${$o}/callback`;return j.makeAxiosFactory(o,"POST",e.winForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},UNt={},INt={state:jNt,mutations:UNt,actions:TNt,getters:ONt},ga="/bot-client/shop/wheel-of-fortune-v3";let VNt={};const MNt={},ANt={async wheelOfFortuneV3Prepare(s){let e=`${ga}/prepare`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async wheelOfFortuneV3Win(s,e={winForm:null}){let o=`${ga}/callback`;return j.makeAxiosFactory(o,"POST",e.winForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},ENt={},DNt={state:VNt,mutations:ENt,actions:ANt,getters:MNt},Tn="/bot-client/friends-game";let zNt={};const BNt={},LNt={async friendsGamePrepare(s){let e=`${Tn}/prepare`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async friendsGameStart(s,e){let o=`${Tn}/start-game`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async friendsGameFinish(s,e){let o=`${Tn}/finish-game`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},RNt={},NNt={state:zNt,mutations:RNt,actions:LNt,getters:BNt},Ci="/bot-client/bonus-product";let qNt={};const WNt={},YNt={async bonusProductPrepare(s){let e=`${Ci}/prepare`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async bonusProductCheck(s,e={dataObject:null}){let o=`${Ci}/check`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async bonusProductExchange(s,e={dataObject:null}){let o=`${Ci}/exchange`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadActionData(s,e={dataObject:null}){let o=`${Ci}/load-action-data`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},HNt={},QNt={state:qNt,mutations:HNt,actions:YNt,getters:WNt},Un="/bot-client/instagram-quest";let GNt={};const KNt={},JNt={async instagramQuestLoadData(s){let e=`${Un}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async instagramQuestPrepare(s,e={prepareForm:null}){let o=`${Un}/prepare`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async instagramQuestResult(s,e={instaForm:null}){let o=`${Un}/callback`;return j.makeAxiosFactory(o,"POST",e.instaForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},XNt={},ZNt={state:GNt,mutations:XNt,actions:JNt,getters:KNt},ya="/bot-client/request-photo";let eqt={};const tqt={},sqt={async requestPhotoLoadData(s){let e=`${ya}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async requestPhotoResult(s,e={form:null}){let o=`${ya}/callback`;return j.makeAxiosFactory(o,"POST",e.form).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},oqt={},iqt={state:eqt,mutations:oqt,actions:sqt,getters:tqt},nqt="/bot-client/schedule";let lqt={};const aqt={},rqt={async scheduleLoadData(s){let e=`${nqt}/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))}},dqt={},cqt={state:lqt,mutations:dqt,actions:rqt,getters:aqt},uqt="/bot-client/cash-out";let mqt={};const hqt={},pqt={async withDrawMoney(s,e={withDrawMoneyForm:null}){let o=`${uqt}/withdraw-money`;return j.makeAxiosFactory(o,"POST",e.withDrawMoneyForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},_qt={},fqt={state:mqt,mutations:_qt,actions:pqt,getters:hqt};var va={},bqt={get exports(){return va},set exports(s){va=s}};(function(s){s.exports=function(e){var o={};function n(i){if(o[i])return o[i].exports;var r=o[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=o,n.d=function(i,r,d){n.o(i,r)||Object.defineProperty(i,r,{enumerable:!0,get:d})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,r){if(r&1&&(i=n(i)),r&8||r&4&&typeof i=="object"&&i&&i.__esModule)return i;var d=Object.create(null);if(n.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:i}),r&2&&typeof i!="string")for(var c in i)n.d(d,c,function(h){return i[h]}.bind(null,c));return d},n.n=function(i){var r=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(r,"a",r),r},n.o=function(i,r){return Object.prototype.hasOwnProperty.call(i,r)},n.p="",n(n.s="fb15")}({"00b4":function(e,o,n){n("ac1f");var i=n("23e7"),r=n("da84"),d=n("c65b"),c=n("e330"),h=n("1626"),g=n("861d"),w=function(){var I=!1,V=/[ac]/;return V.exec=function(){return I=!0,/./.exec.apply(this,arguments)},V.test("abc")===!0&&I}(),x=r.Error,P=c(/./.test);i({target:"RegExp",proto:!0,forced:!w},{test:function(I){var V=this.exec;if(!h(V))return P(this,I);var B=d(V,this,I);if(B!==null&&!g(B))throw new x("RegExp exec method returned something other than an Object or null");return!!B}})},"00ee":function(e,o,n){var i=n("b622"),r=i("toStringTag"),d={};d[r]="z",e.exports=String(d)==="[object z]"},"0366":function(e,o,n){var i=n("e330"),r=n("59ed"),d=i(i.bind);e.exports=function(c,h){return r(c),h===void 0?c:d?d(c,h):function(){return c.apply(h,arguments)}}},"057f":function(e,o,n){var i=n("c6b6"),r=n("fc6a"),d=n("241c").f,c=n("4dae"),h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],g=function(w){try{return d(w)}catch{return c(h)}};e.exports.f=function(x){return h&&i(x)=="Window"?g(x):d(r(x))}},"06cf":function(e,o,n){var i=n("83ab"),r=n("c65b"),d=n("d1e7"),c=n("5c6c"),h=n("fc6a"),g=n("a04b"),w=n("1a2d"),x=n("0cfb"),P=Object.getOwnPropertyDescriptor;o.f=i?P:function(V,B){if(V=h(V),B=g(B),x)try{return P(V,B)}catch{}if(w(V,B))return c(!r(d.f,V,B),V[B])}},"07fa":function(e,o,n){var i=n("50c4");e.exports=function(r){return i(r.length)}},"0b42":function(e,o,n){var i=n("da84"),r=n("e8b5"),d=n("68ee"),c=n("861d"),h=n("b622"),g=h("species"),w=i.Array;e.exports=function(x){var P;return r(x)&&(P=x.constructor,d(P)&&(P===w||r(P.prototype))?P=void 0:c(P)&&(P=P[g],P===null&&(P=void 0))),P===void 0?w:P}},"0cfb":function(e,o,n){var i=n("83ab"),r=n("d039"),d=n("cc12");e.exports=!i&&!r(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7})},"0d40":function(e,o,n){n("6321")},"0d51":function(e,o,n){var i=n("da84"),r=i.String;e.exports=function(d){try{return r(d)}catch{return"Object"}}},"107c":function(e,o,n){var i=n("d039"),r=n("da84"),d=r.RegExp;e.exports=i(function(){var c=d("(?<a>b)","g");return c.exec("b").groups.a!=="b"||"b".replace(c,"$<a>c")!=="bc"})},1626:function(e,o){e.exports=function(n){return typeof n=="function"}},"1a2d":function(e,o,n){var i=n("e330"),r=n("7b0b"),d=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(h,g){return d(r(h),g)}},"1be4":function(e,o,n){var i=n("d066");e.exports=i("document","documentElement")},"1c7e":function(e,o,n){var i=n("b622"),r=i("iterator"),d=!1;try{var c=0,h={next:function(){return{done:!!c++}},return:function(){d=!0}};h[r]=function(){return this},Array.from(h,function(){throw 2})}catch{}e.exports=function(g,w){if(!w&&!d)return!1;var x=!1;try{var P={};P[r]=function(){return{next:function(){return{done:x=!0}}}},g(P)}catch{}return x}},"1d80":function(e,o,n){var i=n("da84"),r=i.TypeError;e.exports=function(d){if(d==null)throw r("Can't call method on "+d);return d}},"1dde":function(e,o,n){var i=n("d039"),r=n("b622"),d=n("2d00"),c=r("species");e.exports=function(h){return d>=51||!i(function(){var g=[],w=g.constructor={};return w[c]=function(){return{foo:1}},g[h](Boolean).foo!==1})}},"23cb":function(e,o,n){var i=n("5926"),r=Math.max,d=Math.min;e.exports=function(c,h){var g=i(c);return g<0?r(g+h,0):d(g,h)}},"23e7":function(e,o,n){var i=n("da84"),r=n("06cf").f,d=n("9112"),c=n("6eeb"),h=n("ce4e"),g=n("e893"),w=n("94ca");e.exports=function(x,P){var I=x.target,V=x.global,B=x.stat,L,ee,J,re,se,de;if(V?ee=i:B?ee=i[I]||h(I,{}):ee=(i[I]||{}).prototype,ee)for(J in P){if(se=P[J],x.noTargetGet?(de=r(ee,J),re=de&&de.value):re=ee[J],L=w(V?J:I+(B?".":"#")+J,x.forced),!L&&re!==void 0){if(typeof se==typeof re)continue;g(se,re)}(x.sham||re&&re.sham)&&d(se,"sham",!0),c(ee,J,se,x)}}},"241c":function(e,o,n){var i=n("ca84"),r=n("7839"),d=r.concat("length","prototype");o.f=Object.getOwnPropertyNames||function(h){return i(h,d)}},"24fb":function(e,o,n){e.exports=function(d){var c=[];return c.toString=function(){return this.map(function(g){var w=i(g,d);return g[2]?"@media ".concat(g[2]," {").concat(w,"}"):w}).join("")},c.i=function(h,g,w){typeof h=="string"&&(h=[[null,h,""]]);var x={};if(w)for(var P=0;P<this.length;P++){var I=this[P][0];I!=null&&(x[I]=!0)}for(var V=0;V<h.length;V++){var B=[].concat(h[V]);w&&x[B[0]]||(g&&(B[2]?B[2]="".concat(g," and ").concat(B[2]):B[2]=g),c.push(B))}},c};function i(d,c){var h=d[1]||"",g=d[3];if(!g)return h;if(c&&typeof btoa=="function"){var w=r(g),x=g.sources.map(function(P){return"/*# sourceURL=".concat(g.sourceRoot||"").concat(P," */")});return[h].concat(x).concat([w]).join(`
`)}return[h].join(`
`)}function r(d){var c=btoa(unescape(encodeURIComponent(JSON.stringify(d)))),h="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c);return"/*# ".concat(h," */")}},"2a62":function(e,o,n){var i=n("c65b"),r=n("825a"),d=n("dc4a");e.exports=function(c,h,g){var w,x;r(c);try{if(w=d(c,"return"),!w){if(h==="throw")throw g;return g}w=i(w,c)}catch(P){x=!0,w=P}if(h==="throw")throw g;if(x)throw w;return r(w),g}},"2ba4":function(e,o){var n=Function.prototype,i=n.apply,r=n.bind,d=n.call;e.exports=typeof Reflect=="object"&&Reflect.apply||(r?d.bind(i):function(){return d.apply(i,arguments)})},"2d00":function(e,o,n){var i=n("da84"),r=n("342f"),d=i.process,c=i.Deno,h=d&&d.versions||c&&c.version,g=h&&h.v8,w,x;g&&(w=g.split("."),x=w[0]>0&&w[0]<4?1:+(w[0]+w[1])),!x&&r&&(w=r.match(/Edge\/(\d+)/),(!w||w[1]>=74)&&(w=r.match(/Chrome\/(\d+)/),w&&(x=+w[1]))),e.exports=x},"342f":function(e,o,n){var i=n("d066");e.exports=i("navigator","userAgent")||""},"35a1":function(e,o,n){var i=n("f5df"),r=n("dc4a"),d=n("3f8c"),c=n("b622"),h=c("iterator");e.exports=function(g){if(g!=null)return r(g,h)||r(g,"@@iterator")||d[i(g)]}},"37e8":function(e,o,n){var i=n("83ab"),r=n("9bf2"),d=n("825a"),c=n("fc6a"),h=n("df75");e.exports=i?Object.defineProperties:function(w,x){d(w);for(var P=c(x),I=h(x),V=I.length,B=0,L;V>B;)r.f(w,L=I[B++],P[L]);return w}},"3a9b":function(e,o,n){var i=n("e330");e.exports=i({}.isPrototypeOf)},"3bbe":function(e,o,n){var i=n("da84"),r=n("1626"),d=i.String,c=i.TypeError;e.exports=function(h){if(typeof h=="object"||r(h))return h;throw c("Can't set "+d(h)+" as a prototype")}},"3ca3":function(e,o,n){var i=n("6547").charAt,r=n("577e"),d=n("69f3"),c=n("7dd0"),h="String Iterator",g=d.set,w=d.getterFor(h);c(String,"String",function(x){g(this,{type:h,string:r(x),index:0})},function(){var P=w(this),I=P.string,V=P.index,B;return V>=I.length?{value:void 0,done:!0}:(B=i(I,V),P.index+=B.length,{value:B,done:!1})})},"3ee2":function(e,o,n){n("fba8")},"3f8c":function(e,o){e.exports={}},"408a":function(e,o,n){var i=n("e330");e.exports=i(1 .valueOf)},"428f":function(e,o,n){var i=n("da84");e.exports=i},"44ad":function(e,o,n){var i=n("da84"),r=n("e330"),d=n("d039"),c=n("c6b6"),h=i.Object,g=r("".split);e.exports=d(function(){return!h("z").propertyIsEnumerable(0)})?function(w){return c(w)=="String"?g(w,""):h(w)}:h},"44d2":function(e,o,n){var i=n("b622"),r=n("7c73"),d=n("9bf2"),c=i("unscopables"),h=Array.prototype;h[c]==null&&d.f(h,c,{configurable:!0,value:r(null)}),e.exports=function(g){h[c][g]=!0}},"485a":function(e,o,n){var i=n("da84"),r=n("c65b"),d=n("1626"),c=n("861d"),h=i.TypeError;e.exports=function(g,w){var x,P;if(w==="string"&&d(x=g.toString)&&!c(P=r(x,g))||d(x=g.valueOf)&&!c(P=r(x,g))||w!=="string"&&d(x=g.toString)&&!c(P=r(x,g)))return P;throw h("Can't convert object to primitive value")}},4930:function(e,o,n){var i=n("2d00"),r=n("d039");e.exports=!!Object.getOwnPropertySymbols&&!r(function(){var d=Symbol();return!String(d)||!(Object(d)instanceof Symbol)||!Symbol.sham&&i&&i<41})},"499e":function(e,o,n){n.r(o),n.d(o,"default",function(){return B});function i(K,ne){for(var te=[],E={},R=0;R<ne.length;R++){var N=ne[R],q=N[0],Q=N[1],le=N[2],pe=N[3],ge={id:K+":"+R,css:Q,media:le,sourceMap:pe};E[q]?E[q].parts.push(ge):te.push(E[q]={id:q,parts:[ge]})}return te}var r=typeof document<"u";if(typeof DEBUG<"u"&&DEBUG&&!r)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var d={},c=r&&(document.head||document.getElementsByTagName("head")[0]),h=null,g=0,w=!1,x=function(){},P=null,I="data-vue-ssr-id",V=typeof navigator<"u"&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function B(K,ne,te,E){w=te,P=E||{};var R=i(K,ne);return L(R),function(q){for(var Q=[],le=0;le<R.length;le++){var pe=R[le],ge=d[pe.id];ge.refs--,Q.push(ge)}q?(R=i(K,q),L(R)):R=[];for(var le=0;le<Q.length;le++){var ge=Q[le];if(ge.refs===0){for(var he=0;he<ge.parts.length;he++)ge.parts[he]();delete d[ge.id]}}}}function L(K){for(var ne=0;ne<K.length;ne++){var te=K[ne],E=d[te.id];if(E){E.refs++;for(var R=0;R<E.parts.length;R++)E.parts[R](te.parts[R]);for(;R<te.parts.length;R++)E.parts.push(J(te.parts[R]));E.parts.length>te.parts.length&&(E.parts.length=te.parts.length)}else{for(var N=[],R=0;R<te.parts.length;R++)N.push(J(te.parts[R]));d[te.id]={id:te.id,refs:1,parts:N}}}}function ee(){var K=document.createElement("style");return K.type="text/css",c.appendChild(K),K}function J(K){var ne,te,E=document.querySelector("style["+I+'~="'+K.id+'"]');if(E){if(w)return x;E.parentNode.removeChild(E)}if(V){var R=g++;E=h||(h=ee()),ne=se.bind(null,E,R,!1),te=se.bind(null,E,R,!0)}else E=ee(),ne=de.bind(null,E),te=function(){E.parentNode.removeChild(E)};return ne(K),function(q){if(q){if(q.css===K.css&&q.media===K.media&&q.sourceMap===K.sourceMap)return;ne(K=q)}else te()}}var re=function(){var K=[];return function(ne,te){return K[ne]=te,K.filter(Boolean).join(`
`)}}();function se(K,ne,te,E){var R=te?"":E.css;if(K.styleSheet)K.styleSheet.cssText=re(ne,R);else{var N=document.createTextNode(R),q=K.childNodes;q[ne]&&K.removeChild(q[ne]),q.length?K.insertBefore(N,q[ne]):K.appendChild(N)}}function de(K,ne){var te=ne.css,E=ne.media,R=ne.sourceMap;if(E&&K.setAttribute("media",E),P.ssrId&&K.setAttribute(I,ne.id),R&&(te+=`
/*# sourceURL=`+R.sources[0]+" */",te+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(R))))+" */"),K.styleSheet)K.styleSheet.cssText=te;else{for(;K.firstChild;)K.removeChild(K.firstChild);K.appendChild(document.createTextNode(te))}}},"4d64":function(e,o,n){var i=n("fc6a"),r=n("23cb"),d=n("07fa"),c=function(h){return function(g,w,x){var P=i(g),I=d(P),V=r(x,I),B;if(h&&w!=w){for(;I>V;)if(B=P[V++],B!=B)return!0}else for(;I>V;V++)if((h||V in P)&&P[V]===w)return h||V||0;return!h&&-1}};e.exports={includes:c(!0),indexOf:c(!1)}},"4dae":function(e,o,n){var i=n("da84"),r=n("23cb"),d=n("07fa"),c=n("8418"),h=i.Array,g=Math.max;e.exports=function(w,x,P){for(var I=d(w),V=r(x,I),B=r(P===void 0?I:P,I),L=h(g(B-V,0)),ee=0;V<B;V++,ee++)c(L,ee,w[V]);return L.length=ee,L}},"4df4":function(e,o,n){var i=n("da84"),r=n("0366"),d=n("c65b"),c=n("7b0b"),h=n("9bdd"),g=n("e95a"),w=n("68ee"),x=n("07fa"),P=n("8418"),I=n("9a1f"),V=n("35a1"),B=i.Array;e.exports=function(ee){var J=c(ee),re=w(this),se=arguments.length,de=se>1?arguments[1]:void 0,K=de!==void 0;K&&(de=r(de,se>2?arguments[2]:void 0));var ne=V(J),te=0,E,R,N,q,Q,le;if(ne&&!(this==B&&g(ne)))for(q=I(J,ne),Q=q.next,R=re?new this:[];!(N=d(Q,q)).done;te++)le=K?h(q,de,[N.value,te],!0):N.value,P(R,te,le);else for(E=x(J),R=re?new this(E):B(E);E>te;te++)le=K?de(J[te],te):J[te],P(R,te,le);return R.length=te,R}},"50c4":function(e,o,n){var i=n("5926"),r=Math.min;e.exports=function(d){return d>0?r(i(d),9007199254740991):0}},5692:function(e,o,n){var i=n("c430"),r=n("c6cd");(e.exports=function(d,c){return r[d]||(r[d]=c!==void 0?c:{})})("versions",[]).push({version:"3.19.3",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(e,o,n){var i=n("d066"),r=n("e330"),d=n("241c"),c=n("7418"),h=n("825a"),g=r([].concat);e.exports=i("Reflect","ownKeys")||function(x){var P=d.f(h(x)),I=c.f;return I?g(P,I(x)):P}},"577e":function(e,o,n){var i=n("da84"),r=n("f5df"),d=i.String;e.exports=function(c){if(r(c)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return d(c)}},5899:function(e,o){e.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"58a8":function(e,o,n){var i=n("e330"),r=n("1d80"),d=n("577e"),c=n("5899"),h=i("".replace),g="["+c+"]",w=RegExp("^"+g+g+"*"),x=RegExp(g+g+"*$"),P=function(I){return function(V){var B=d(r(V));return I&1&&(B=h(B,w,"")),I&2&&(B=h(B,x,"")),B}};e.exports={start:P(1),end:P(2),trim:P(3)}},5926:function(e,o){var n=Math.ceil,i=Math.floor;e.exports=function(r){var d=+r;return d!==d||d===0?0:(d>0?i:n)(d)}},"59ed":function(e,o,n){var i=n("da84"),r=n("1626"),d=n("0d51"),c=i.TypeError;e.exports=function(h){if(r(h))return h;throw c(d(h)+" is not a function")}},"5c6c":function(e,o){e.exports=function(n,i){return{enumerable:!(n&1),configurable:!(n&2),writable:!(n&4),value:i}}},"5e77":function(e,o,n){var i=n("83ab"),r=n("1a2d"),d=Function.prototype,c=i&&Object.getOwnPropertyDescriptor,h=r(d,"name"),g=h&&function(){}.name==="something",w=h&&(!i||i&&c(d,"name").configurable);e.exports={EXISTS:h,PROPER:g,CONFIGURABLE:w}},6321:function(e,o,n){var i=n("6ffc");i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("4c513a4d",i,!0,{sourceMap:!1,shadowMode:!1})},6547:function(e,o,n){var i=n("e330"),r=n("5926"),d=n("577e"),c=n("1d80"),h=i("".charAt),g=i("".charCodeAt),w=i("".slice),x=function(P){return function(I,V){var B=d(c(I)),L=r(V),ee=B.length,J,re;return L<0||L>=ee?P?"":void 0:(J=g(B,L),J<55296||J>56319||L+1===ee||(re=g(B,L+1))<56320||re>57343?P?h(B,L):J:P?w(B,L,L+2):(J-55296<<10)+(re-56320)+65536)}};e.exports={codeAt:x(!1),charAt:x(!0)}},"65f0":function(e,o,n){var i=n("0b42");e.exports=function(r,d){return new(i(r))(d===0?0:d)}},"68ee":function(e,o,n){var i=n("e330"),r=n("d039"),d=n("1626"),c=n("f5df"),h=n("d066"),g=n("8925"),w=function(){},x=[],P=h("Reflect","construct"),I=/^\s*(?:class|function)\b/,V=i(I.exec),B=!I.exec(w),L=function(J){if(!d(J))return!1;try{return P(w,x,J),!0}catch{return!1}},ee=function(J){if(!d(J))return!1;switch(c(J)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return B||!!V(I,g(J))};e.exports=!P||r(function(){var J;return L(L.call)||!L(Object)||!L(function(){J=!0})||J})?ee:L},"69f3":function(e,o,n){var i=n("7f9a"),r=n("da84"),d=n("e330"),c=n("861d"),h=n("9112"),g=n("1a2d"),w=n("c6cd"),x=n("f772"),P=n("d012"),I="Object already initialized",V=r.TypeError,B=r.WeakMap,L,ee,J,re=function(R){return J(R)?ee(R):L(R,{})},se=function(R){return function(N){var q;if(!c(N)||(q=ee(N)).type!==R)throw V("Incompatible receiver, "+R+" required");return q}};if(i||w.state){var de=w.state||(w.state=new B),K=d(de.get),ne=d(de.has),te=d(de.set);L=function(R,N){if(ne(de,R))throw new V(I);return N.facade=R,te(de,R,N),N},ee=function(R){return K(de,R)||{}},J=function(R){return ne(de,R)}}else{var E=x("state");P[E]=!0,L=function(R,N){if(g(R,E))throw new V(I);return N.facade=R,h(R,E,N),N},ee=function(R){return g(R,E)?R[E]:{}},J=function(R){return g(R,E)}}e.exports={set:L,get:ee,has:J,enforce:re,getterFor:se}},"6eeb":function(e,o,n){var i=n("da84"),r=n("1626"),d=n("1a2d"),c=n("9112"),h=n("ce4e"),g=n("8925"),w=n("69f3"),x=n("5e77").CONFIGURABLE,P=w.get,I=w.enforce,V=String(String).split("String");(e.exports=function(B,L,ee,J){var re=J?!!J.unsafe:!1,se=J?!!J.enumerable:!1,de=J?!!J.noTargetGet:!1,K=J&&J.name!==void 0?J.name:L,ne;if(r(ee)&&(String(K).slice(0,7)==="Symbol("&&(K="["+String(K).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!d(ee,"name")||x&&ee.name!==K)&&c(ee,"name",K),ne=I(ee),ne.source||(ne.source=V.join(typeof K=="string"?K:""))),B===i){se?B[L]=ee:h(L,ee);return}else re?!de&&B[L]&&(se=!0):delete B[L];se?B[L]=ee:c(B,L,ee)})(Function.prototype,"toString",function(){return r(this)&&P(this).source||g(this)})},"6ffc":function(e,o,n){var i=n("24fb");o=i(!1),o.push([e.i,".circles__container[data-v-2442d1f7]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}.circle__item[data-v-2442d1f7]{margin:5px;height:100%}",""]),e.exports=o},7156:function(e,o,n){var i=n("1626"),r=n("861d"),d=n("d2bb");e.exports=function(c,h,g){var w,x;return d&&i(w=h.constructor)&&w!==g&&r(x=w.prototype)&&x!==g.prototype&&d(c,x),c}},7418:function(e,o){o.f=Object.getOwnPropertySymbols},"746f":function(e,o,n){var i=n("428f"),r=n("1a2d"),d=n("e538"),c=n("9bf2").f;e.exports=function(h){var g=i.Symbol||(i.Symbol={});r(g,h)||c(g,h,{value:d.f(h)})}},7839:function(e,o){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(e,o,n){var i=n("cc12"),r=i("span").classList,d=r&&r.constructor&&r.constructor.prototype;e.exports=d===Object.prototype?void 0:d},"7b0b":function(e,o,n){var i=n("da84"),r=n("1d80"),d=i.Object;e.exports=function(c){return d(r(c))}},"7c73":function(e,o,n){var i=n("825a"),r=n("37e8"),d=n("7839"),c=n("d012"),h=n("1be4"),g=n("cc12"),w=n("f772"),x=">",P="<",I="prototype",V="script",B=w("IE_PROTO"),L=function(){},ee=function(K){return P+V+x+K+P+"/"+V+x},J=function(K){K.write(ee("")),K.close();var ne=K.parentWindow.Object;return K=null,ne},re=function(){var K=g("iframe"),ne="java"+V+":",te;return K.style.display="none",h.appendChild(K),K.src=String(ne),te=K.contentWindow.document,te.open(),te.write(ee("document.F=Object")),te.close(),te.F},se,de=function(){try{se=new ActiveXObject("htmlfile")}catch{}de=typeof document<"u"?document.domain&&se?J(se):re():J(se);for(var K=d.length;K--;)delete de[I][d[K]];return de()};c[B]=!0,e.exports=Object.create||function(ne,te){var E;return ne!==null?(L[I]=i(ne),E=new L,L[I]=null,E[B]=ne):E=de(),te===void 0?E:r(E,te)}},"7dd0":function(e,o,n){var i=n("23e7"),r=n("c65b"),d=n("c430"),c=n("5e77"),h=n("1626"),g=n("9ed3"),w=n("e163"),x=n("d2bb"),P=n("d44e"),I=n("9112"),V=n("6eeb"),B=n("b622"),L=n("3f8c"),ee=n("ae93"),J=c.PROPER,re=c.CONFIGURABLE,se=ee.IteratorPrototype,de=ee.BUGGY_SAFARI_ITERATORS,K=B("iterator"),ne="keys",te="values",E="entries",R=function(){return this};e.exports=function(N,q,Q,le,pe,ge,he){g(Q,q,le);var _e=function(ot){if(ot===pe&&Re)return Re;if(!de&&ot in Se)return Se[ot];switch(ot){case ne:return function(){return new Q(this,ot)};case te:return function(){return new Q(this,ot)};case E:return function(){return new Q(this,ot)}}return function(){return new Q(this)}},Pe=q+" Iterator",Oe=!1,Se=N.prototype,Be=Se[K]||Se["@@iterator"]||pe&&Se[pe],Re=!de&&Be||_e(pe),Me=q=="Array"&&Se.entries||Be,ce,pt,_t;if(Me&&(ce=w(Me.call(new N)),ce!==Object.prototype&&ce.next&&(!d&&w(ce)!==se&&(x?x(ce,se):h(ce[K])||V(ce,K,R)),P(ce,Pe,!0,!0),d&&(L[Pe]=R))),J&&pe==te&&Be&&Be.name!==te&&(!d&&re?I(Se,"name",te):(Oe=!0,Re=function(){return r(Be,this)})),pe)if(pt={values:_e(te),keys:ge?Re:_e(ne),entries:_e(E)},he)for(_t in pt)(de||Oe||!(_t in Se))&&V(Se,_t,pt[_t]);else i({target:q,proto:!0,forced:de||Oe},pt);return(!d||he)&&Se[K]!==Re&&V(Se,K,Re,{name:pe}),L[q]=Re,pt}},"7f9a":function(e,o,n){var i=n("da84"),r=n("1626"),d=n("8925"),c=i.WeakMap;e.exports=r(c)&&/native code/.test(d(c))},"825a":function(e,o,n){var i=n("da84"),r=n("861d"),d=i.String,c=i.TypeError;e.exports=function(h){if(r(h))return h;throw c(d(h)+" is not an object")}},"83ab":function(e,o,n){var i=n("d039");e.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(e,o,n){var i=n("a04b"),r=n("9bf2"),d=n("5c6c");e.exports=function(c,h,g){var w=i(h);w in c?r.f(c,w,d(0,g)):c[w]=g}},"861d":function(e,o,n){var i=n("1626");e.exports=function(r){return typeof r=="object"?r!==null:i(r)}},8875:function(e,o,n){var i,r,d;(function(c,h){r=[],i=h,d=typeof i=="function"?i.apply(o,r):i,d!==void 0&&(e.exports=d)})(typeof self<"u"?self:this,function(){function c(){var h=Object.getOwnPropertyDescriptor(document,"currentScript");if(!h&&"currentScript"in document&&document.currentScript||h&&h.get!==c&&document.currentScript)return document.currentScript;try{throw new Error}catch(se){var g=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,w=/@([^@]*):(\d+):(\d+)\s*$/ig,x=g.exec(se.stack)||w.exec(se.stack),P=x&&x[1]||!1,I=x&&x[2]||!1,V=document.location.href.replace(document.location.hash,""),B,L,ee,J=document.getElementsByTagName("script");P===V&&(B=document.documentElement.outerHTML,L=new RegExp("(?:[^\\n]+?\\n){0,"+(I-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),ee=B.replace(L,"$1").trim());for(var re=0;re<J.length;re++)if(J[re].readyState==="interactive"||J[re].src===P||P===V&&J[re].innerHTML&&J[re].innerHTML.trim()===ee)return J[re];return null}}return c})},8925:function(e,o,n){var i=n("e330"),r=n("1626"),d=n("c6cd"),c=i(Function.toString);r(d.inspectSource)||(d.inspectSource=function(h){return c(h)}),e.exports=d.inspectSource},"90e3":function(e,o,n){var i=n("e330"),r=0,d=Math.random(),c=i(1 .toString);e.exports=function(h){return"Symbol("+(h===void 0?"":h)+")_"+c(++r+d,36)}},9112:function(e,o,n){var i=n("83ab"),r=n("9bf2"),d=n("5c6c");e.exports=i?function(c,h,g){return r.f(c,h,d(1,g))}:function(c,h,g){return c[h]=g,c}},9263:function(e,o,n){var i=n("c65b"),r=n("e330"),d=n("577e"),c=n("ad6d"),h=n("9f7f"),g=n("5692"),w=n("7c73"),x=n("69f3").get,P=n("fce3"),I=n("107c"),V=g("native-string-replace",String.prototype.replace),B=RegExp.prototype.exec,L=B,ee=r("".charAt),J=r("".indexOf),re=r("".replace),se=r("".slice),de=function(){var E=/a/,R=/b*/g;return i(B,E,"a"),i(B,R,"a"),E.lastIndex!==0||R.lastIndex!==0}(),K=h.BROKEN_CARET,ne=/()??/.exec("")[1]!==void 0,te=de||ne||K||P||I;te&&(L=function(R){var N=this,q=x(N),Q=d(R),le=q.raw,pe,ge,he,_e,Pe,Oe,Se;if(le)return le.lastIndex=N.lastIndex,pe=i(L,le,Q),N.lastIndex=le.lastIndex,pe;var Be=q.groups,Re=K&&N.sticky,Me=i(c,N),ce=N.source,pt=0,_t=Q;if(Re&&(Me=re(Me,"y",""),J(Me,"g")===-1&&(Me+="g"),_t=se(Q,N.lastIndex),N.lastIndex>0&&(!N.multiline||N.multiline&&ee(Q,N.lastIndex-1)!==`
`)&&(ce="(?: "+ce+")",_t=" "+_t,pt++),ge=new RegExp("^(?:"+ce+")",Me)),ne&&(ge=new RegExp("^"+ce+"$(?!\\s)",Me)),de&&(he=N.lastIndex),_e=i(B,Re?ge:N,_t),Re?_e?(_e.input=se(_e.input,pt),_e[0]=se(_e[0],pt),_e.index=N.lastIndex,N.lastIndex+=_e[0].length):N.lastIndex=0:de&&_e&&(N.lastIndex=N.global?_e.index+_e[0].length:he),ne&&_e&&_e.length>1&&i(V,_e[0],ge,function(){for(Pe=1;Pe<arguments.length-2;Pe++)arguments[Pe]===void 0&&(_e[Pe]=void 0)}),_e&&Be)for(_e.groups=Oe=w(null),Pe=0;Pe<Be.length;Pe++)Se=Be[Pe],Oe[Se[0]]=_e[Se[1]];return _e}),e.exports=L},"94ca":function(e,o,n){var i=n("d039"),r=n("1626"),d=/#|\.prototype\./,c=function(P,I){var V=g[h(P)];return V==x?!0:V==w?!1:r(I)?i(I):!!I},h=c.normalize=function(P){return String(P).replace(d,".").toLowerCase()},g=c.data={},w=c.NATIVE="N",x=c.POLYFILL="P";e.exports=c},"9a1f":function(e,o,n){var i=n("da84"),r=n("c65b"),d=n("59ed"),c=n("825a"),h=n("0d51"),g=n("35a1"),w=i.TypeError;e.exports=function(x,P){var I=arguments.length<2?g(x):P;if(d(I))return c(r(I,x));throw w(h(x)+" is not iterable")}},"9bdd":function(e,o,n){var i=n("825a"),r=n("2a62");e.exports=function(d,c,h,g){try{return g?c(i(h)[0],h[1]):c(h)}catch(w){r(d,"throw",w)}}},"9bf2":function(e,o,n){var i=n("da84"),r=n("83ab"),d=n("0cfb"),c=n("825a"),h=n("a04b"),g=i.TypeError,w=Object.defineProperty;o.f=r?w:function(P,I,V){if(c(P),I=h(I),c(V),d)try{return w(P,I,V)}catch{}if("get"in V||"set"in V)throw g("Accessors not supported");return"value"in V&&(P[I]=V.value),P}},"9ed3":function(e,o,n){var i=n("ae93").IteratorPrototype,r=n("7c73"),d=n("5c6c"),c=n("d44e"),h=n("3f8c"),g=function(){return this};e.exports=function(w,x,P,I){var V=x+" Iterator";return w.prototype=r(i,{next:d(+!I,P)}),c(w,V,!1,!0),h[V]=g,w}},"9f7f":function(e,o,n){var i=n("d039"),r=n("da84"),d=r.RegExp,c=i(function(){var w=d("a","y");return w.lastIndex=2,w.exec("abcd")!=null}),h=c||i(function(){return!d("a","y").sticky}),g=c||i(function(){var w=d("^r","gy");return w.lastIndex=2,w.exec("str")!=null});e.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:c}},a04b:function(e,o,n){var i=n("c04e"),r=n("d9b5");e.exports=function(d){var c=i(d,"string");return r(c)?c:c+""}},a4d3:function(e,o,n){var i=n("23e7"),r=n("da84"),d=n("d066"),c=n("2ba4"),h=n("c65b"),g=n("e330"),w=n("c430"),x=n("83ab"),P=n("4930"),I=n("d039"),V=n("1a2d"),B=n("e8b5"),L=n("1626"),ee=n("861d"),J=n("3a9b"),re=n("d9b5"),se=n("825a"),de=n("7b0b"),K=n("fc6a"),ne=n("a04b"),te=n("577e"),E=n("5c6c"),R=n("7c73"),N=n("df75"),q=n("241c"),Q=n("057f"),le=n("7418"),pe=n("06cf"),ge=n("9bf2"),he=n("d1e7"),_e=n("f36a"),Pe=n("6eeb"),Oe=n("5692"),Se=n("f772"),Be=n("d012"),Re=n("90e3"),Me=n("b622"),ce=n("e538"),pt=n("746f"),_t=n("d44e"),ot=n("69f3"),Ct=n("b727").forEach,nt=Se("hidden"),Ss="Symbol",cs="prototype",Lt=Me("toPrimitive"),Ht=ot.set,po=ot.getterFor(Ss),vt=Object[cs],Ot=r.Symbol,Rt=Ot&&Ot[cs],_o=r.TypeError,Qt=r.QObject,Xe=d("JSON","stringify"),$t=pe.f,Tt=ge.f,xs=Q.f,ut=he.f,js=g([].push),ft=Oe("symbols"),mt=Oe("op-symbols"),xe=Oe("string-to-symbol-registry"),Nt=Oe("symbol-to-string-registry"),us=Oe("wks"),Os=!Qt||!Qt[cs]||!Qt[cs].findChild,Ts=x&&I(function(){return R(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a!=7})?function(Ue,fe,ve){var ke=$t(vt,fe);ke&&delete vt[fe],Tt(Ue,fe,ve),ke&&Ue!==vt&&Tt(vt,fe,ke)}:Tt,Ws=function(Ue,fe){var ve=ft[Ue]=R(Rt);return Ht(ve,{type:Ss,tag:Ue,description:fe}),x||(ve.description=fe),ve},ms=function(fe,ve,ke){fe===vt&&ms(mt,ve,ke),se(fe);var Le=ne(ve);return se(ke),V(ft,Le)?(ke.enumerable?(V(fe,nt)&&fe[nt][Le]&&(fe[nt][Le]=!1),ke=R(ke,{enumerable:E(0,!1)})):(V(fe,nt)||Tt(fe,nt,E(1,{})),fe[nt][Le]=!0),Ts(fe,Le,ke)):Tt(fe,Le,ke)},bt=function(fe,ve){se(fe);var ke=K(ve),Le=N(ke).concat(At(ke));return Ct(Le,function(it){(!x||h(hs,ke,it))&&ms(fe,it,ke[it])}),fe},Ys=function(fe,ve){return ve===void 0?R(fe):bt(R(fe),ve)},hs=function(fe){var ve=ne(fe),ke=h(ut,this,ve);return this===vt&&V(ft,ve)&&!V(mt,ve)?!1:ke||!V(this,ve)||!V(ft,ve)||V(this,nt)&&this[nt][ve]?ke:!0},ps=function(fe,ve){var ke=K(fe),Le=ne(ve);if(!(ke===vt&&V(ft,Le)&&!V(mt,Le))){var it=$t(ke,Le);return it&&V(ft,Le)&&!(V(ke,nt)&&ke[nt][Le])&&(it.enumerable=!0),it}},Ne=function(fe){var ve=xs(K(fe)),ke=[];return Ct(ve,function(Le){!V(ft,Le)&&!V(Be,Le)&&js(ke,Le)}),ke},At=function(fe){var ve=fe===vt,ke=xs(ve?mt:K(fe)),Le=[];return Ct(ke,function(it){V(ft,it)&&(!ve||V(vt,it))&&js(Le,ft[it])}),Le};if(P||(Ot=function(){if(J(Rt,this))throw _o("Symbol is not a constructor");var fe=!arguments.length||arguments[0]===void 0?void 0:te(arguments[0]),ve=Re(fe),ke=function(Le){this===vt&&h(ke,mt,Le),V(this,nt)&&V(this[nt],ve)&&(this[nt][ve]=!1),Ts(this,ve,E(1,Le))};return x&&Os&&Ts(vt,ve,{configurable:!0,set:ke}),Ws(ve,fe)},Rt=Ot[cs],Pe(Rt,"toString",function(){return po(this).tag}),Pe(Ot,"withoutSetter",function(Ue){return Ws(Re(Ue),Ue)}),he.f=hs,ge.f=ms,pe.f=ps,q.f=Q.f=Ne,le.f=At,ce.f=function(Ue){return Ws(Me(Ue),Ue)},x&&(Tt(Rt,"description",{configurable:!0,get:function(){return po(this).description}}),w||Pe(vt,"propertyIsEnumerable",hs,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!P,sham:!P},{Symbol:Ot}),Ct(N(us),function(Ue){pt(Ue)}),i({target:Ss,stat:!0,forced:!P},{for:function(Ue){var fe=te(Ue);if(V(xe,fe))return xe[fe];var ve=Ot(fe);return xe[fe]=ve,Nt[ve]=fe,ve},keyFor:function(fe){if(!re(fe))throw _o(fe+" is not a symbol");if(V(Nt,fe))return Nt[fe]},useSetter:function(){Os=!0},useSimple:function(){Os=!1}}),i({target:"Object",stat:!0,forced:!P,sham:!x},{create:Ys,defineProperty:ms,defineProperties:bt,getOwnPropertyDescriptor:ps}),i({target:"Object",stat:!0,forced:!P},{getOwnPropertyNames:Ne,getOwnPropertySymbols:At}),i({target:"Object",stat:!0,forced:I(function(){le.f(1)})},{getOwnPropertySymbols:function(fe){return le.f(de(fe))}}),Xe){var Hs=!P||I(function(){var Ue=Ot();return Xe([Ue])!="[null]"||Xe({a:Ue})!="{}"||Xe(Object(Ue))!="{}"});i({target:"JSON",stat:!0,forced:Hs},{stringify:function(fe,ve,ke){var Le=_e(arguments),it=ve;if(!(!ee(ve)&&fe===void 0||re(fe)))return B(ve)||(ve=function(Ao,U){if(L(it)&&(U=h(it,this,Ao,U)),!re(U))return U}),Le[1]=ve,c(Xe,null,Le)}})}if(!Rt[Lt]){var _s=Rt.valueOf;Pe(Rt,Lt,function(Ue){return h(_s,this)})}_t(Ot,Ss),Be[nt]=!0},a630:function(e,o,n){var i=n("23e7"),r=n("4df4"),d=n("1c7e"),c=!d(function(h){Array.from(h)});i({target:"Array",stat:!0,forced:c},{from:r})},a9e3:function(e,o,n){var i=n("83ab"),r=n("da84"),d=n("e330"),c=n("94ca"),h=n("6eeb"),g=n("1a2d"),w=n("7156"),x=n("3a9b"),P=n("d9b5"),I=n("c04e"),V=n("d039"),B=n("241c").f,L=n("06cf").f,ee=n("9bf2").f,J=n("408a"),re=n("58a8").trim,se="Number",de=r[se],K=de.prototype,ne=r.TypeError,te=d("".slice),E=d("".charCodeAt),R=function(ge){var he=I(ge,"number");return typeof he=="bigint"?he:N(he)},N=function(ge){var he=I(ge,"number"),_e,Pe,Oe,Se,Be,Re,Me,ce;if(P(he))throw ne("Cannot convert a Symbol value to a number");if(typeof he=="string"&&he.length>2){if(he=re(he),_e=E(he,0),_e===43||_e===45){if(Pe=E(he,2),Pe===88||Pe===120)return NaN}else if(_e===48){switch(E(he,1)){case 66:case 98:Oe=2,Se=49;break;case 79:case 111:Oe=8,Se=55;break;default:return+he}for(Be=te(he,2),Re=Be.length,Me=0;Me<Re;Me++)if(ce=E(Be,Me),ce<48||ce>Se)return NaN;return parseInt(Be,Oe)}}return+he};if(c(se,!de(" 0o1")||!de("0b1")||de("+0x1"))){for(var q=function(he){var _e=arguments.length<1?0:de(R(he)),Pe=this;return x(K,Pe)&&V(function(){J(Pe)})?w(Object(_e),Pe,q):_e},Q=i?B(de):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),le=0,pe;Q.length>le;le++)g(de,pe=Q[le])&&!g(q,pe)&&ee(q,pe,L(de,pe));q.prototype=K,K.constructor=q,h(r,se,q)}},ac1f:function(e,o,n){var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,o,n){var i=n("825a");e.exports=function(){var r=i(this),d="";return r.global&&(d+="g"),r.ignoreCase&&(d+="i"),r.multiline&&(d+="m"),r.dotAll&&(d+="s"),r.unicode&&(d+="u"),r.sticky&&(d+="y"),d}},ae93:function(e,o,n){var i=n("d039"),r=n("1626"),d=n("7c73"),c=n("e163"),h=n("6eeb"),g=n("b622"),w=n("c430"),x=g("iterator"),P=!1,I,V,B;[].keys&&(B=[].keys(),"next"in B?(V=c(c(B)),V!==Object.prototype&&(I=V)):P=!0);var L=I==null||i(function(){var ee={};return I[x].call(ee)!==ee});L?I={}:w&&(I=d(I)),r(I[x])||h(I,x,function(){return this}),e.exports={IteratorPrototype:I,BUGGY_SAFARI_ITERATORS:P}},b041:function(e,o,n){var i=n("00ee"),r=n("f5df");e.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(e,o,n){var i=n("83ab"),r=n("5e77").EXISTS,d=n("e330"),c=n("9bf2").f,h=Function.prototype,g=d(h.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,x=d(w.exec),P="name";i&&!r&&c(h,P,{configurable:!0,get:function(){try{return x(w,g(this))[1]}catch{return""}}})},b622:function(e,o,n){var i=n("da84"),r=n("5692"),d=n("1a2d"),c=n("90e3"),h=n("4930"),g=n("fdbf"),w=r("wks"),x=i.Symbol,P=x&&x.for,I=g?x:x&&x.withoutSetter||c;e.exports=function(V){if(!d(w,V)||!(h||typeof w[V]=="string")){var B="Symbol."+V;h&&d(x,V)?w[V]=x[V]:g&&P?w[V]=P(B):w[V]=I(B)}return w[V]}},b64b:function(e,o,n){var i=n("23e7"),r=n("7b0b"),d=n("df75"),c=n("d039"),h=c(function(){d(1)});i({target:"Object",stat:!0,forced:h},{keys:function(w){return d(r(w))}})},b727:function(e,o,n){var i=n("0366"),r=n("e330"),d=n("44ad"),c=n("7b0b"),h=n("07fa"),g=n("65f0"),w=r([].push),x=function(P){var I=P==1,V=P==2,B=P==3,L=P==4,ee=P==6,J=P==7,re=P==5||ee;return function(se,de,K,ne){for(var te=c(se),E=d(te),R=i(de,K),N=h(E),q=0,Q=ne||g,le=I?Q(se,N):V||J?Q(se,0):void 0,pe,ge;N>q;q++)if((re||q in E)&&(pe=E[q],ge=R(pe,q,te),P))if(I)le[q]=ge;else if(ge)switch(P){case 3:return!0;case 5:return pe;case 6:return q;case 2:w(le,pe)}else switch(P){case 4:return!1;case 7:w(le,pe)}return ee?-1:B||L?L:le}};e.exports={forEach:x(0),map:x(1),filter:x(2),some:x(3),every:x(4),find:x(5),findIndex:x(6),filterReject:x(7)}},c04e:function(e,o,n){var i=n("da84"),r=n("c65b"),d=n("861d"),c=n("d9b5"),h=n("dc4a"),g=n("485a"),w=n("b622"),x=i.TypeError,P=w("toPrimitive");e.exports=function(I,V){if(!d(I)||c(I))return I;var B=h(I,P),L;if(B){if(V===void 0&&(V="default"),L=r(B,I,V),!d(L)||c(L))return L;throw x("Can't convert object to primitive value")}return V===void 0&&(V="number"),g(I,V)}},c430:function(e,o){e.exports=!1},c65b:function(e,o){var n=Function.prototype.call;e.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},c6b6:function(e,o,n){var i=n("e330"),r=i({}.toString),d=i("".slice);e.exports=function(c){return d(r(c),8,-1)}},c6cd:function(e,o,n){var i=n("da84"),r=n("ce4e"),d="__core-js_shared__",c=i[d]||r(d,{});e.exports=c},c8ba:function(e,o){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}e.exports=n},ca84:function(e,o,n){var i=n("e330"),r=n("1a2d"),d=n("fc6a"),c=n("4d64").indexOf,h=n("d012"),g=i([].push);e.exports=function(w,x){var P=d(w),I=0,V=[],B;for(B in P)!r(h,B)&&r(P,B)&&g(V,B);for(;x.length>I;)r(P,B=x[I++])&&(~c(V,B)||g(V,B));return V}},cc12:function(e,o,n){var i=n("da84"),r=n("861d"),d=i.document,c=r(d)&&r(d.createElement);e.exports=function(h){return c?d.createElement(h):{}}},ce4e:function(e,o,n){var i=n("da84"),r=Object.defineProperty;e.exports=function(d,c){try{r(i,d,{value:c,configurable:!0,writable:!0})}catch{i[d]=c}return c}},cfeb:function(e,o,n){var i=n("24fb");o=i(!1),o.push([e.i,".circle__container[data-v-b2a3b458]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.circle__circle[data-v-b2a3b458],.circle__container[data-v-b2a3b458]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.circle__circle[data-v-b2a3b458]{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;position:relative}.circle__value[data-v-b2a3b458]{position:absolute}circle[data-v-b2a3b458]{-webkit-transition:all .5s ease;transition:all .5s ease}",""]),e.exports=o},d012:function(e,o){e.exports={}},d039:function(e,o){e.exports=function(n){try{return!!n()}catch{return!0}}},d066:function(e,o,n){var i=n("da84"),r=n("1626"),d=function(c){return r(c)?c:void 0};e.exports=function(c,h){return arguments.length<2?d(i[c]):i[c]&&i[c][h]}},d1e7:function(e,o,n){var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,d=r&&!i.call({1:2},1);o.f=d?function(h){var g=r(this,h);return!!g&&g.enumerable}:i},d28b:function(e,o,n){var i=n("746f");i("iterator")},d2bb:function(e,o,n){var i=n("e330"),r=n("825a"),d=n("3bbe");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,h={},g;try{g=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),g(h,[]),c=h instanceof Array}catch{}return function(x,P){return r(x),d(P),c?g(x,P):x.__proto__=P,x}}():void 0)},d3b7:function(e,o,n){var i=n("00ee"),r=n("6eeb"),d=n("b041");i||r(Object.prototype,"toString",d,{unsafe:!0})},d44e:function(e,o,n){var i=n("9bf2").f,r=n("1a2d"),d=n("b622"),c=d("toStringTag");e.exports=function(h,g,w){h&&!r(h=w?h:h.prototype,c)&&i(h,c,{configurable:!0,value:g})}},d9b5:function(e,o,n){var i=n("da84"),r=n("d066"),d=n("1626"),c=n("3a9b"),h=n("fdbf"),g=i.Object;e.exports=h?function(w){return typeof w=="symbol"}:function(w){var x=r("Symbol");return d(x)&&c(x.prototype,g(w))}},da84:function(e,o,n){(function(i){var r=function(d){return d&&d.Math==Math&&d};e.exports=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof i=="object"&&i)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc4a:function(e,o,n){var i=n("59ed");e.exports=function(r,d){var c=r[d];return c==null?void 0:i(c)}},ddb0:function(e,o,n){var i=n("da84"),r=n("fdbc"),d=n("785a"),c=n("e260"),h=n("9112"),g=n("b622"),w=g("iterator"),x=g("toStringTag"),P=c.values,I=function(B,L){if(B){if(B[w]!==P)try{h(B,w,P)}catch{B[w]=P}if(B[x]||h(B,x,L),r[L]){for(var ee in c)if(B[ee]!==c[ee])try{h(B,ee,c[ee])}catch{B[ee]=c[ee]}}}};for(var V in r)I(i[V]&&i[V].prototype,V);I(d,"DOMTokenList")},df75:function(e,o,n){var i=n("ca84"),r=n("7839");e.exports=Object.keys||function(c){return i(c,r)}},e01a:function(e,o,n){var i=n("23e7"),r=n("83ab"),d=n("da84"),c=n("e330"),h=n("1a2d"),g=n("1626"),w=n("3a9b"),x=n("577e"),P=n("9bf2").f,I=n("e893"),V=d.Symbol,B=V&&V.prototype;if(r&&g(V)&&(!("description"in B)||V().description!==void 0)){var L={},ee=function(){var E=arguments.length<1||arguments[0]===void 0?void 0:x(arguments[0]),R=w(B,this)?new V(E):E===void 0?V():V(E);return E===""&&(L[R]=!0),R};I(ee,V),ee.prototype=B,B.constructor=ee;var J=String(V("test"))=="Symbol(test)",re=c(B.toString),se=c(B.valueOf),de=/^Symbol\((.*)\)[^)]+$/,K=c("".replace),ne=c("".slice);P(B,"description",{configurable:!0,get:function(){var E=se(this),R=re(E);if(h(L,E))return"";var N=J?ne(R,7,-1):K(R,de,"$1");return N===""?void 0:N}}),i({global:!0,forced:!0},{Symbol:ee})}},e163:function(e,o,n){var i=n("da84"),r=n("1a2d"),d=n("1626"),c=n("7b0b"),h=n("f772"),g=n("e177"),w=h("IE_PROTO"),x=i.Object,P=x.prototype;e.exports=g?x.getPrototypeOf:function(I){var V=c(I);if(r(V,w))return V[w];var B=V.constructor;return d(B)&&V instanceof B?B.prototype:V instanceof x?P:null}},e177:function(e,o,n){var i=n("d039");e.exports=!i(function(){function r(){}return r.prototype.constructor=null,Object.getPrototypeOf(new r)!==r.prototype})},e260:function(e,o,n){var i=n("fc6a"),r=n("44d2"),d=n("3f8c"),c=n("69f3"),h=n("7dd0"),g="Array Iterator",w=c.set,x=c.getterFor(g);e.exports=h(Array,"Array",function(P,I){w(this,{type:g,target:i(P),index:0,kind:I})},function(){var P=x(this),I=P.target,V=P.kind,B=P.index++;return!I||B>=I.length?(P.target=void 0,{value:void 0,done:!0}):V=="keys"?{value:B,done:!1}:V=="values"?{value:I[B],done:!1}:{value:[B,I[B]],done:!1}},"values"),d.Arguments=d.Array,r("keys"),r("values"),r("entries")},e330:function(e,o){var n=Function.prototype,i=n.bind,r=n.call,d=i&&i.bind(r);e.exports=i?function(c){return c&&d(r,c)}:function(c){return c&&function(){return r.apply(c,arguments)}}},e538:function(e,o,n){var i=n("b622");o.f=i},e893:function(e,o,n){var i=n("1a2d"),r=n("56ef"),d=n("06cf"),c=n("9bf2");e.exports=function(h,g){for(var w=r(g),x=c.f,P=d.f,I=0;I<w.length;I++){var V=w[I];i(h,V)||x(h,V,P(g,V))}}},e8b5:function(e,o,n){var i=n("c6b6");e.exports=Array.isArray||function(d){return i(d)=="Array"}},e95a:function(e,o,n){var i=n("b622"),r=n("3f8c"),d=i("iterator"),c=Array.prototype;e.exports=function(h){return h!==void 0&&(r.Array===h||c[d]===h)}},f36a:function(e,o,n){var i=n("e330");e.exports=i([].slice)},f5df:function(e,o,n){var i=n("da84"),r=n("00ee"),d=n("1626"),c=n("c6b6"),h=n("b622"),g=h("toStringTag"),w=i.Object,x=c(function(){return arguments}())=="Arguments",P=function(I,V){try{return I[V]}catch{}};e.exports=r?c:function(I){var V,B,L;return I===void 0?"Undefined":I===null?"Null":typeof(B=P(V=w(I),g))=="string"?B:x?c(V):(L=c(V))=="Object"&&d(V.callee)?"Arguments":L}},f772:function(e,o,n){var i=n("5692"),r=n("90e3"),d=i("keys");e.exports=function(c){return d[c]||(d[c]=r(c))}},fb15:function(e,o,n){if(n.r(o),typeof window<"u"){var i=window.document.currentScript;{var r=n("8875");i=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r})}var d=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);d&&(n.p=d[1])}var c=function(){var E=this,R=E.$createElement,N=E._self._c||R;return N("div",{class:["circles__container"].concat(E.containerClasses)},E._l(E.circles,function(q,Q){return N("div",{key:Q,class:["circle__item"].concat(q.hasOwnProperty("classList")?q.classList:E.circleClasses)},[N("count-down-circle",E._b({},"count-down-circle",{value:E.values[q.id].value,size:"size"in q?q.size:E.size,strokeWidth:"strokeWidth"in q?q.strokeWidth:E.strokeWidth,strokeColor:"strokeColor"in q?q.strokeColor:E.strokeColor,underneathStrokeColor:"underneathStrokeColor"in q?q.underneathStrokeColor:E.underneathStrokeColor,fillColor:"fillColor"in q?q.fillColor:E.fillColor,valueFontSize:"valueFontSize"in q?q.valueFontSize:E.valueFontSize,labelFontSize:"labelFontSize"in q?q.labelFontSize:E.labelFontSize,labelPosition:"labelPosition"in q?q.labelPosition:E.labelPosition,showValue:"showValue"in q?q.showValue:E.showValue,steps:q.steps,label:q.label},!1))],1)}),0)},h=[];n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("e260"),n("3ca3"),n("ddb0"),n("fb6a"),n("b0c0"),n("a630"),n("ac1f"),n("00b4");function g(E,R){(R==null||R>E.length)&&(R=E.length);for(var N=0,q=new Array(R);N<R;N++)q[N]=E[N];return q}function w(E,R){if(E){if(typeof E=="string")return g(E,R);var N=Object.prototype.toString.call(E).slice(8,-1);if(N==="Object"&&E.constructor&&(N=E.constructor.name),N==="Map"||N==="Set")return Array.from(E);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return g(E,R)}}function x(E,R){var N=typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(!N){if(Array.isArray(E)||(N=w(E))||R&&E&&typeof E.length=="number"){N&&(E=N);var q=0,Q=function(){};return{s:Q,n:function(){return q>=E.length?{done:!0}:{done:!1,value:E[q++]}},e:function(_e){throw _e},f:Q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var le=!0,pe=!1,ge;return{s:function(){N=N.call(E)},n:function(){var _e=N.next();return le=_e.done,_e},e:function(_e){pe=!0,ge=_e},f:function(){try{!le&&N.return!=null&&N.return()}finally{if(pe)throw ge}}}}n("a9e3"),n("b64b");var P=function(){var E=this,R=E.$createElement,N=E._self._c||R;return N("div",{ref:"container",staticClass:"circle__container",style:{width:E.circleSize+"px",flexDirection:E.labelPosition==="bottom"?"column":"column-reverse"}},[N("div",{staticClass:"circle__circle",style:{width:E.circleSize+"px",height:E.circleSize+"px",fontSize:E.valueFontSize+"px"}},[E.showValue?N("div",{staticClass:"circle__value"},[E._v(" "+E._s(E.value)+" ")]):E._e(),N("svg",{attrs:{width:E.circleSize,height:E.circleSize,xmlns:"http://www.w3.org/2000/svg"}},[N("circle",{attrs:{r:E.r,cy:E.cx,cx:E.cy,"stroke-width":E.strokeWidth,stroke:E.underneathStrokeColor,fill:E.fillColor}}),N("circle",{staticClass:"circle_animation",style:{strokeDasharray:E.strokeDasharray,strokeDashoffset:E.strokeDashoffset},attrs:{transform:"rotate(-90, "+E.cx+", "+E.cy+")",r:E.r,cy:E.cx,cx:E.cy,"stroke-width":E.strokeWidth,stroke:E.strokeColor,fill:"transparent"}})])]),E.label?N("div",{ref:"label",staticClass:"circle__label",style:{fontSize:E.labelFontSize+"px"}},[E._v(" "+E._s(E.label)+" ")]):E._e()])},I=[],V={name:"CountDownCircle",props:{size:{type:Number,default:0},strokeWidth:{type:Number,default:10},strokeColor:{type:String,default:"#9d989b"},underneathStrokeColor:{type:String,default:"#eee"},fillColor:{type:String,default:"#ffffff"},valueFontSize:{type:Number,default:20},labelFontSize:{type:Number,default:15},steps:{type:Number,default:60},value:{type:Number,default:10},label:{type:String,default:""},labelPosition:{validator:function(R){return["top","bottom"].indexOf(R)!==-1},default:"bottom"},showValue:{type:Boolean,default:!0}},data:function(){return{isMounted:!1}},computed:{circleSize:function(){return this.size===0&&this.isMounted?this.label?this.$refs.container.parentElement.clientHeight-this.$refs.label.clientHeight:this.$refs.container.parentElement.clientHeight:this.size},cx:function(){return this.circleSize/2},cy:function(){return this.circleSize/2},r:function(){return(this.circleSize-this.strokeWidth)/2},circleLength:function(){return 2*Math.PI*this.r},stepLength:function(){return this.circleLength/this.steps},strokeDasharray:function(){return this.circleLength},strokeDashoffset:function(){return this.circleLength-this.value*this.stepLength}},mounted:function(){var R=this;this.$nextTick(function(){R.isMounted=!0})}},B=V;n("3ee2");function L(E,R,N,q,Q,le,pe,ge){var he=typeof E=="function"?E.options:E;R&&(he.render=R,he.staticRenderFns=N,he._compiled=!0),q&&(he.functional=!0),le&&(he._scopeId="data-v-"+le);var _e;if(pe?(_e=function(Se){Se=Se||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!Se&&typeof __VUE_SSR_CONTEXT__<"u"&&(Se=__VUE_SSR_CONTEXT__),Q&&Q.call(this,Se),Se&&Se._registeredComponents&&Se._registeredComponents.add(pe)},he._ssrRegister=_e):Q&&(_e=ge?function(){Q.call(this,(he.functional?this.parent:this).$root.$options.shadowRoot)}:Q),_e)if(he.functional){he._injectStyles=_e;var Pe=he.render;he.render=function(Be,Re){return _e.call(Re),Pe(Be,Re)}}else{var Oe=he.beforeCreate;he.beforeCreate=Oe?[].concat(Oe,_e):[_e]}return{exports:E,options:he}}var ee=L(B,P,I,!1,null,"b2a3b458",null),J=ee.exports,re={name:"CircularCountDownTimer",components:{CountDownCircle:J},props:{containerClasses:{type:Array,default:function(){return[]}},circleClasses:{type:Array,default:function(){return[]}},interval:{type:Number,default:1e3},mainCircleId:{type:[String,Number],required:!0},stopConditions:{type:Object,default:function(){return{}}},triggerUpdate:{type:Boolean,default:!0},showValue:{type:Boolean,default:!0},size:{type:Number,default:0},strokeWidth:{type:Number,default:10},strokeColor:{type:String,default:"#9d989b"},underneathStrokeColor:{type:String,default:"#eee"},fillColor:{type:String,default:"#ffffff"},valueFontSize:{type:Number,default:20},labelFontSize:{type:Number,default:15},labelPosition:{validator:function(R){return["top","bottom"].indexOf(R)!==-1},default:"bottom"},circles:{type:Array,default:function(){return[]}}},data:function(){return{values:se(this.circles),timeOutId:void 0,expected:void 0}},watch:{circles:function(){this.values=se(this.circles),this.startTimer()}},methods:{nextStep:function(){if(this.updateCircleValue(this.mainCircleId),this.notifyUpdateValues(),this.shouldStop())this.$emit("finished");else{var R=Date.now()-this.expected;this.expected+=this.interval,this.timeOutId=setTimeout(this.nextStep,Math.max(0,this.interval-R))}},updateCircleValue:function(R){var N=this.values[R];if(N.stepLength>0&&N.value+N.stepLength>=N.steps){N.value=(N.value+N.stepLength)%N.steps+N.startValue;var q=x(N.dependentCircles),Q;try{for(q.s();!(Q=q.n()).done;){var le=Q.value;this.updateCircleValue(le)}}catch(_e){q.e(_e)}finally{q.f()}}else if(N.stepLength<0&&N.value+N.stepLength<N.startValue){N.value=(N.value+N.stepLength)%N.steps+N.steps;var pe=x(N.dependentCircles),ge;try{for(pe.s();!(ge=pe.n()).done;){var he=ge.value;this.updateCircleValue(he)}}catch(_e){pe.e(_e)}finally{pe.f()}}else N.value+=N.stepLength},shouldStop:function(){if(Object.keys(this.stopConditions).length>0){var R=!0;for(var N in this.stopConditions)if(this.values[N].value!==this.stopConditions[N]){R=!1;break}return R}else return!1},notifyUpdateValues:function(){if(this.triggerUpdate){var R={};for(var N in this.values)R[N]=this.values[N].value;this.$emit("update",R)}},getCircleProps:function(R){return{value:R.value,size:R.size,strokeWidth:R.strokeWidth,strokeColor:R.strokeColor,underneathStrokeColor:R.underneathStrokeColor,fillColor:R.fillColor,valueFontSize:R.valueFontSize,labelFontSize:R.labelFontSize,steps:R.steps,label:R.label,labelPosition:R.labelPosition}},startTimer:function(){clearTimeout(this.timeOutId),this.expected=Date.now()+this.interval,this.timeOutId=setTimeout(this.nextStep,this.interval)}},mounted:function(){this.$nextTick(this.startTimer)}},se=function(R){var N={},q=x(R),Q;try{for(q.s();!(Q=q.n()).done;){var le=Q.value;N[le.id]={value:le.value||0,stepLength:le.stepLength||1,steps:le.steps,startValue:le.startValue||0,dependentCircles:le.dependentCircles||[]}}}catch(pe){q.e(pe)}finally{q.f()}return N},de=re;n("0d40");var K=L(de,c,h,!1,null,"2442d1f7",null),ne=K.exports,te={install:function(R){R.component("circular-count-down-timer",ne)}};o.default=te},fb6a:function(e,o,n){var i=n("23e7"),r=n("da84"),d=n("e8b5"),c=n("68ee"),h=n("861d"),g=n("23cb"),w=n("07fa"),x=n("fc6a"),P=n("8418"),I=n("b622"),V=n("1dde"),B=n("f36a"),L=V("slice"),ee=I("species"),J=r.Array,re=Math.max;i({target:"Array",proto:!0,forced:!L},{slice:function(de,K){var ne=x(this),te=w(ne),E=g(de,te),R=g(K===void 0?te:K,te),N,q,Q;if(d(ne)&&(N=ne.constructor,c(N)&&(N===J||d(N.prototype))?N=void 0:h(N)&&(N=N[ee],N===null&&(N=void 0)),N===J||N===void 0))return B(ne,E,R);for(q=new(N===void 0?J:N)(re(R-E,0)),Q=0;E<R;E++,Q++)E in ne&&P(q,Q,ne[E]);return q.length=Q,q}})},fba8:function(e,o,n){var i=n("cfeb");i.__esModule&&(i=i.default),typeof i=="string"&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("499e").default;r("40eeb3e0",i,!0,{sourceMap:!1,shadowMode:!1})},fc6a:function(e,o,n){var i=n("44ad"),r=n("1d80");e.exports=function(d){return i(r(d))}},fce3:function(e,o,n){var i=n("d039"),r=n("da84"),d=r.RegExp;e.exports=i(function(){var c=d(".","s");return!(c.dotAll&&c.exec(`
`)&&c.flags==="s")})},fdbc:function(e,o){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(e,o,n){var i=n("4930");e.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}})})(bqt);const Ut="/bot-client/basket";let gqt={basket_items:[],basket_items_paginate_object:null};const yqt={getProductsInBasket:s=>s.basket_items||[],getBasketPaginateObject:s=>s.basket_items_paginate_object||null,inCollectionCart:s=>(e,o)=>{var n;return((n=s.basket_items.find(i=>{var r,d;return((r=i.collection)==null?void 0:r.id)===e&&(((d=i.params)==null?void 0:d.variant_id)===o||o==null)}))==null?void 0:n.count)||0},inCart:s=>e=>{var o;return((o=s.basket_items.find(n=>n.product?n.product.id===e:!1))==null?void 0:o.count)||0},cartProducts:(s,e,o)=>s.basket_items||[],cartCollections:(s,e,o)=>(s.basket_items||[]).filter(n=>n.collection),cartTotalCount:(s,e)=>{if(s.basket_items==null||s.basket_items.length===0)return 0;let o=0;return s.basket_items.forEach(n=>{var i;o+=(i=n.product)!=null&&i.is_weight_product?1:n.count}),o},cartTotalPrice:(s,e)=>{if(s.basket_items==null||s.basket_items.length===0)return 0;let o=0;return s.basket_items.forEach(n=>{var i,r,d,c,h;if(n.product){let g=(i=n.params)!=null&&i.discount_price?((r=n.params)==null?void 0:r.discount_price)||0:n.product.current_price||0,w=(d=n.product)!=null&&d.is_weight_product?1:n.count,x=(c=n.product)!=null&&c.is_weight_product?g*n.count/(((h=n.product.weight_config)==null?void 0:h.step)||100):g;o+=x*w}if(n.collection){let g=0,w=n.params.ids||[];n.collection.products.forEach(x=>{g+=w.indexOf(x.id)!==-1?x.current_price:0}),o+=(g-g*(n.collection.discount/100))*n.count}}),o}},vqt={async useWheelOfFortunePrize(s,e={form:null}){let o=`${Ut}/use-wheel-of-fortune-prize`,n="POST";return j.makeAxiosFactory(o,n,e.form).then(r=>Promise.resolve(r.data)).catch(r=>{var d,c;return s.commit("setErrors",((c=(d=r.response)==null?void 0:d.data)==null?void 0:c.errors)||[]),Promise.reject(r)})},async createCheckoutLink(s,e={deliveryForm:null}){let o=`${Ut}/checkout-link`,n="POST";return j.makeAxiosFactory(o,n,e.deliveryForm).then(r=>Promise.resolve(r.data)).catch(r=>{var d,c;return s.commit("setErrors",((c=(d=r.response)==null?void 0:d.data)==null?void 0:c.errors)||[]),Promise.reject(r)})},async startCheckout(s,e={deliveryForm:null}){let o=`${Ut}/checkout`,n="POST";return j.makeAxiosFactory(o,n,e.deliveryForm).then(r=>(s.commit("setBasket",[]),s.commit("setBasketPaginateObject",null),Promise.resolve(r.data))).catch(r=>{var d,c;return s.commit("setErrors",((c=(d=r.response)==null?void 0:d.data)==null?void 0:c.errors)||[]),Promise.reject(r)})},async loadProductsInBasket(s,e={dataObject:{search:null,categories:null},page:0,size:12}){let o=e.page||0,i=`${Ut}?page=${o}&size=20`,r=localStorage.getItem("cashman_current_active_table")||null;return r&&(r=JSON.parse(r)),j.makeAxiosFactory(i,"POST",{table_id:(r==null?void 0:r.id)||null}).then(c=>{let h=c.data;return console.error(h),s.commit("setBasket",h.data),delete h.data,s.commit("setBasketPaginateObject",h),Promise.resolve()}).catch(c=>{var h,g,w,x;return console.error(((g=(h=c.response)==null?void 0:h.data)==null?void 0:g.errors)||[]),s.commit("setErrors",((x=(w=c.response)==null?void 0:w.data)==null?void 0:x.errors)||[]),Promise.reject(c)})},async addCommentToProduct(s,e){let o=`${Ut}/comment-product`;return j.makeAxiosFactory(o,"POST",{product_id:e.id,comment:e.comment||null}).then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},async addProductToCart(s,e){let o=`${Ut}/inc-product`,n=localStorage.getItem("cashman_current_active_table")||null;return n&&(n=JSON.parse(n)),j.makeAxiosFactory(o,"POST",{product_id:e.id,table_id:(n==null?void 0:n.id)||null}).then(r=>{let d=r.data;return s.commit("setBasket",d.data),delete d.data,s.commit("setBasketPaginateObject",d),Promise.resolve()}).catch(r=>{var d,c;return s.commit("setErrors",((c=(d=r.response)==null?void 0:d.data)==null?void 0:c.errors)||[]),Promise.reject(r)})},async incCollectionQuantity(s,e){let o=`${Ut}/inc-collection`;return j.makeAxiosFactory(o,"POST",e).then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},async decCollectionQuantity(s,e){let o=`${Ut}/dec-collection`;return j.makeAxiosFactory(o,"POST",e).then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},async incQuantity(s,e){let o=`${Ut}/increment/${e}`;return j.makeAxiosFactory(o,"POST").then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},async decQuantity(s,e){let o=`${Ut}/decrement/${e}`;return j.makeAxiosFactory(o,"POST").then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},removeProduct(s,e){let o=`${Ut}/remove/${e}`;return j.makeAxiosFactory(o,"DELETE").then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},removeCollectionFromCart(s,e){let o=`${Ut}/dec-collection`;return j.makeAxiosFactory(o,"POST",e).then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},addCollectionToCart(s,e){let o=`${Ut}/inc-collection`;return j.makeAxiosFactory(o,"POST",{product_collection:e}).then(i=>{let r=i.data;return s.commit("setBasket",r.data),delete r.data,s.commit("setBasketPaginateObject",r),Promise.resolve()}).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},clearCart(s){let e=`${Ut}/clear`;return s.commit("setBasket",[]),s.commit("setBasketPaginateObject",null),j.makeAxiosFactory(e,"DELETE").then(n=>Promise.resolve()).catch(n=>{var i,r;return s.commit("setErrors",((r=(i=n.response)==null?void 0:i.data)==null?void 0:r.errors)||[]),Promise.reject(n)})}},$qt={decrementItemQuantity(s,e){const o=s.basket_items.find(n=>{var i,r;return((i=n.product)==null?void 0:i.id)===e||((r=n.collection)==null?void 0:r.id)===e});o.count>1&&o.count--,localStorage.setItem("cashman_basket_items",JSON.stringify(s.basket_items))},incrementItemQuantity(s,e){const o=s.basket_items.find(n=>{var i,r;return((i=n.product)==null?void 0:i.id)===e||((r=n.collection)==null?void 0:r.id)===e});o.count++,localStorage.setItem("cashman_basket_items",JSON.stringify(s.basket_items))},setBasket(s,e){s.basket_items=e||[],localStorage.setItem("cashman_basket_items",JSON.stringify(e))},setBasketPaginateObject(s,e){s.basket_items_paginate_object=e||[],localStorage.setItem("cashman_basket_items_paginate_object",JSON.stringify(e))}},kqt={state:gqt,mutations:$qt,actions:vqt,getters:yqt},As="/bot-client";let wqt={self:null};const Fqt={getSelf:s=>s.self||null,getFavoriteProducts:s=>{var e,o;return((e=s.self)==null?void 0:e.config)==null?[]:((o=s.self.config)==null?void 0:o.favorites)||[]}},Cqt={async switchToPage(s,e={page:null}){let o=`${As}/switch-to-page`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async switchToMainMenu(s){let e=`${As}/switch-to-main-menu`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadSelf(s){let e=`${As}/self`,o="POST";return j.makeAxiosFactory(e,o).then(i=>{let r=i.data;return s.commit("setSelf",r.data),Promise.resolve(r)}).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadManagerData(s){let e=`${As}/manager/load-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadFriendsWeb(s){let e=`${As}/manager/friends-web`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async saveManager(s,e){let o=`${As}/manager/register`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadBotManagerConfig(s,e={botId:null}){let o=`${As}/manage-bot`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>{let d=r.data;return Promise.resolve(d)}).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadBotAdminConfig(s){let e=`${As}/bot`,o="POST";return j.makeAxiosFactory(e,o).then(i=>{let r=i.data;return Promise.resolve(r)}).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},Pqt={setSelf(s,e){s.self=e||[],localStorage.setItem("cashman_self",JSON.stringify(e))}},Sqt={state:wqt,mutations:Pqt,actions:Cqt,getters:Fqt},xqt={favorites:localStorage.getItem("cashman_favorites")==null?[]:JSON.parse(localStorage.getItem("cashman_favorites"))},jqt={inFav:s=>e=>s.favorites.find(n=>n.id===e)!=null,getFavorites:(s,e,o)=>s.favorites,favoritesCount:(s,e)=>s.favorites.length||0},Oqt={async loadActualPriceInFav({state:s,commit:e}){let o=[];return s.favorites.forEach(i=>{o.push(i.id)}),j.loadActualProducts(o).then(i=>{let r=i,d=[];s.favorites.forEach(h=>{d.push(r.find(g=>g.id===h.id))}),e("setFavoritesItems",d)}).catch(i=>(e("setErrors",i.response.data.errors||[]),Promise.reject(i)))},addToFavorites({state:s,commit:e},o){e("pushProductToFav",o)},removeFromFavorites({state:s,commit:e},o){e("removeProductFromFav",o)},clearFavorites({state:s,commit:e}){e("clearAllFavorites")}},Tqt={pushProductToFav(s,e){s.favorites.find(n=>n.id===e.id)||s.favorites.push(e),localStorage.setItem("cashman_favorites",JSON.stringify(s.favorites))},removeProductFromFav(s,e){let o=s.favorites.filter(n=>n.id!==e);s.favorites=o,localStorage.setItem("cashman_favorites",JSON.stringify(s.favorites))},clearAllFavorites(s){s.favorites=[],localStorage.setItem("cashman_favorites",JSON.stringify(s.favorites))},setFavoritesItems(s,e){s.favorites=e,localStorage.setItem("cashman_favorites",JSON.stringify(s.favorites))}},Uqt={state:xqt,mutations:Tqt,actions:Oqt,getters:jqt};let Iqt={};const Vqt={},Mqt={},Aqt={},an={state:Iqt,mutations:Aqt,actions:Mqt,getters:Vqt},In="/bot-client/users";let Eqt={users:[],users_paginate_object:null};const Dqt={getUsers:s=>s.users||[],getUsersPaginateObject:s=>s.users_paginate_object||null},zqt={async loadUsers(s,e={dataObject:{search:null},page:0,size:12}){let o=e.page||0,i=`${In}/search?page=${o}&size=12`;return j.makeAxiosFactory(i,"POST",{...e.dataObject}).then(d=>{let c=d.data;return s.commit("setUsers",c.data),delete c.data,s.commit("setUsersPaginateObject",c),Promise.resolve()}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async removeUsers(s,e={dataObject:null}){let o=`${In}/remove`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async addUsers(s,e={dataObject:null}){let o=`${In}/add`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},Bqt={setUsers(s,e){s.users=e||[],localStorage.setItem("cashman_users",JSON.stringify(e))},setUsersPaginateObject(s,e){s.users_paginate_object=e||[],localStorage.setItem("cashman_users_paginate_object",JSON.stringify(e))}},rn={state:Eqt,mutations:Bqt,actions:zqt,getters:Dqt},$a="/bot-client/actions";let Lqt={actions:[],actions_paginate_object:null};const Rqt={getActions:s=>s.actions||[],getActionsPaginateObject:s=>s.actions_paginate_object||null},Nqt={async loadActions(s,e={dataObject:{search:null},page:0,size:12}){let o=e.page||0,i=`${$a}/history?page=${o}&size=12`;return j.makeAxiosFactory(i,"POST",{...e.dataObject}).then(d=>{let c=d.data;return s.commit("setActions",c.data),delete c.data,s.commit("setActionsPaginateObject",c),Promise.resolve()}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async removeActions(s,e={dataObject:null}){let o=`${$a}/remove`;return j.makeAxiosFactory(o,"POST",{...e.dataObject}).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},qqt={setActions(s,e){s.actions=e||[],localStorage.setItem("cashman_actions",JSON.stringify(e))},setActionsPaginateObject(s,e){s.actions_paginate_object=e||[],localStorage.setItem("cashman_actions_paginate_object",JSON.stringify(e))}},dn={state:Lqt,mutations:qqt,actions:Nqt,getters:Rqt};let Wqt={...an.state,...rn.state,...dn.state};const Yqt={...an.getters,...rn.getters,...dn.getters},Hqt={...an.actions,...rn.actions,...dn.actions,async updateProductsFromVk(s){let e="/bot-client/vk-auth-link";return Up.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))}},Qqt={...an.mutations,...rn.mutations,...dn.mutations},Gqt={state:Wqt,mutations:Qqt,actions:Hqt,getters:Yqt},Es="/bot-client/companies";let Kqt={company:null,companies:[],locations:[],companies_paginate_object:null};const Jqt={getLocations:s=>s.locations||[],getCompany:s=>s.company||null,getCompanies:s=>s.companies||[],getCompanyById:s=>e=>s.companies.find(o=>o.id===e),getCompaniesPaginateObject:s=>s.companies_paginate_object||null},Xqt={async removeManagerCompany(s,e={companyId:null}){let o=`${Es}/${e.companyId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadManagersCompanies(s,e={page:0,size:50}){let o=e.page||0,n=e.size||50,i={...e},r=`${Es}/manager-companies-list?page=${o}&size=${n}`,d="POST";return j.makeAxiosFactory(r,d,i).then(h=>{let g=h.data;return s.commit("setCompanies",g.data),delete g.data,s.commit("setCompaniesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadCompanies(s,e={page:0,size:50}){let o=e.page||0,n=e.size||50,i={...e},r=`${Es}?page=${o}&size=${n}`,d="POST";return j.makeAxiosFactory(r,d,i).then(h=>{let g=h.data;return s.commit("setCompanies",g.data),delete g.data,s.commit("setCompaniesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async updateCompanyLawParams(s,e={companyForm:null}){let o=`${Es}/company-law-update`;return j.makeAxiosFactory(o,"POST",e.companyForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateCompany(s,e={companyForm:null}){let o=`${Es}/company-update`;return j.makeAxiosFactory(o,"POST",e.companyForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadCompany(s){let e=`${Es}/company`,o="POST";return j.makeAxiosFactory(e,o).then(i=>{let r=i.data;return s.commit("setCompany",r.data),Promise.resolve()}).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadLocationsByCompany(s){let e=`${Es}/location-list`;return j.makeAxiosFactory(e,"POST").then(n=>{let i=n.data;return s.commit("setLocations",i.data),delete i.data,Promise.resolve()}).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async createLocation(s,e={locationForm:null}){let o=`${Es}/location`;return j.makeAxiosFactory(o,"POST",e.locationForm).then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},Zqt={setCompany(s,e){s.company=e||[],localStorage.setItem("cashman_current_company",JSON.stringify(e))},setCompanies(s,e){s.companies=e||[],localStorage.setItem("cashman_companies",JSON.stringify(e))},setLocations(s,e){s.locations=e||[],localStorage.setItem("cashman_locations",JSON.stringify(e))},setCompaniesPaginateObject(s,e){s.companies_paginate_object=e||[],localStorage.setItem("cashman_companies_paginate_object",JSON.stringify(e))}},eWt={state:Kqt,mutations:Zqt,actions:Xqt,getters:Jqt},tWt={watches:localStorage.getItem("cashman_watches")==null?[]:JSON.parse(localStorage.getItem("cashman_watches"))},sWt={inWatch:s=>e=>s.watches.find(n=>n.id===e)!=null,getWatches:(s,e,o)=>s.watches,watchesCount:(s,e)=>s.watches.length||0},oWt={addToWatch({state:s,commit:e},o){e("pushProductToWatch",o)}},iWt={pushProductToWatch(s,e){s.watches.find(n=>n.id===e.id)||s.watches.push(e),localStorage.setItem("cashman_watches",JSON.stringify(s.watches))}},nWt={state:tWt,mutations:iWt,actions:oWt,getters:sWt},Ds="/bot-client/pages";let lWt={pages:[],page_folders:[],pages_paginate_object:null,page_folders_paginate_object:null};const aWt={getPages:s=>s.pages||[],getPageFolders:s=>s.page_folders||[],getPagesPaginateObject:s=>s.pages_paginate_object||null,getPageFoldersPaginateObject:s=>s.page_folders_paginate_object||null},rWt={async loadPageById(s,e={dataObject:{page_id:null}}){let o=`${Ds}/page-by-id/${e.dataObject.page_id}`,n="POST";return j.makeAxiosFactory(o,n).then(r=>{let d=r.data;return Promise.resolve(d)}).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadPages(s,e={dataObject:{search:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,i=e.size||12,r=`${Ds}?page=${n}&size=${i}`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setPages",g.data),delete g.data,s.commit("setPagesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadPageFolders(s,e={dataObject:{search:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,i=e.size||12,r=`${Ds}/folders?page=${n}&size=${i}`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setPageFolders",g.data),delete g.data,s.commit("setPageFoldersPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async activatePassword(s,e={passwordForm:null}){let o=`${Ds}/activate-page-password`;return j.makeAxiosFactory(o,"POST",e.passwordForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updatePage(s,e={pageForm:null}){let o=`${Ds}/page-update`;return j.makeAxiosFactory(o,"POST",e.pageForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async duplicatePage(s,e={dataObject:{pageId:null}}){let o=`${Ds}/duplicate/${e.dataObject.pageId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removePage(s,e={dataObject:{pageId:null}}){let o=`${Ds}/remove/${e.dataObject.pageId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async createPage(s,e={pageForm:null}){let o=`${Ds}/page`;return j.makeAxiosFactory(o,"POST",e.pageForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},dWt={setPages(s,e){s.pages=e||[],localStorage.setItem("cashman_pages",JSON.stringify(e))},setPagesPaginateObject(s,e){s.pages_paginate_object=e||[],localStorage.setItem("cashman_pages_paginate_object",JSON.stringify(e))},setPageFolders(s,e){s.pages=e||[],localStorage.setItem("cashman_page_folders",JSON.stringify(e))},setPageFoldersPaginateObject(s,e){s.pages_paginate_object=e||[],localStorage.setItem("cashman_page_folders_paginate_object",JSON.stringify(e))}},cWt={state:lWt,mutations:dWt,actions:rWt,getters:aWt},qe="/bot-client/bots";let uWt={bots:[],bots_paginate_object:null};const mWt={getBots:s=>s.bots||[],getBotsPaginateObject:s=>s.bots_paginate_object||null},hWt={async saveFrontPad(s,e={frontPadForm:null}){let o=`${qe}/save-frontpad`;return j.makeAxiosFactory(o,"POST",e.frontPadForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateProductsFromFrontPadExcel(s,e={form:{}}){let o=`${qe}/frontpad-excel-update`;return j.makeAxiosFactory(o,"POST",e.form).then(i=>Promise.resolve(i.data)).catch(i=>{var r,d;return s.commit("setErrors",((d=(r=i.response)==null?void 0:r.data)==null?void 0:d.errors)||[]),Promise.reject(i)})},async updateProductsFromFrontPad(s){let e=`${qe}/frontpad-update`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadCurrentBotFields(s){let e=`${qe}/load-fields`,o="GET";return j.makeAxiosFactory(e,o).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeMessageSettings(s,e={dataObject:null}){let o=`${qe}/store-message-settings`,n="POST",i=e.dataObject;return j.makeAxiosFactory(o,n,i).then(d=>Promise.resolve(d.data)).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async storeBotFields(s,e={dataObject:null}){let o=`${qe}/store-fields`,n="POST",i=e.dataObject;return j.makeAxiosFactory(o,n,i).then(d=>Promise.resolve(d.data)).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async createBotLazy(s,e={botForm:null}){let o=`${qe}/bot-lazy`;return j.makeAxiosFactory(o,"POST",e.botForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},updateShopLink(s,e={botForm:null}){let o=`${qe}/update-shop-link`;return j.makeAxiosFactory(o,"POST",e.botForm).then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async switchBotStatusManager(s,e={botId:null}){let o=`${qe}/manager-switch-status`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async switchBotStatus(s){let e=`${qe}/switch-status`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async removeKeyboardTemplate(s,e={templateId:null}){let o=`${qe}/remove-keyboard-template/${e.templateId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async createKeyboardTemplate(s,e={keyboardForm:null}){let o=`${qe}/keyboard-template`;return j.makeAxiosFactory(o,"POST",e.keyboardForm).then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async editKeyboardTemplate(s,e={keyboardForm:null}){let o=`${qe}/edit-keyboard-template`;return j.makeAxiosFactory(o,"POST",e.keyboardForm).then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadBotKeyboards(s){let e=`${qe}/keyboards`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadSimpleBots(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${qe}/simple-bot-list?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setBots",g.data),delete g.data,s.commit("setBotsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async updateBotByManager(s,e={botForm:null}){let o=`${qe}/manager-bot-update`;return j.makeAxiosFactory(o,"POST",e.botForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateBotTheme(s,e={theme:null}){let o=`${qe}/bot-theme`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateBotMenuItems(s,e={iconForm:null}){let o=`${qe}/bot-icons-update`;return j.makeAxiosFactory(o,"POST",e.iconForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateBotParams(s,e={botForm:null}){let o=`${qe}/bot-params-update`;return j.makeAxiosFactory(o,"POST",e.botForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateBot(s,e={botForm:null}){let o=`${qe}/bot-update`;return j.makeAxiosFactory(o,"POST",e.botForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async syncAmo(s,e={dataObject:null}){let o=`${qe}/sync-amo`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadAmoFields(s,e={dataObject:null}){let o=`${qe}/load-amo-fields`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async saveYClients(s,e={yClientsForm:null}){let o=`${qe}/save-y-clients`;return j.makeAxiosFactory(o,"POST",e.yClientsForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async saveAmoCRM(s,e={amoForm:null}){let o=`${qe}/save-amo`;return j.makeAxiosFactory(o,"POST",e.amoForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async duplicateBot(s,e={dataObject:{bot_id:null,company_id:null}}){let o=`${qe}/duplicate`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeBotByManager(s,e={botId:null}){let o=`${qe}/remove-my-manager/${e.botId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeBot(s,e={botId:null}){let o=`${qe}/${e.botId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async restoreBot(s,e={botId:null}){let o=`${qe}/restore/${e.botId}`;return j.makeAxiosFactory(o,"GET").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadImageMenus(s){let e=`${qe}/image-menu`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async loadBotSlugs(s,e={isGlobal:!1}){let o={is_global:e.isGlobal||!1},n=`${qe}/slugs`;return j.makeAxiosFactory(n,"POST",o).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))}},pWt={setBots(s,e){s.bots=e||[],localStorage.setItem("cashman_bots",JSON.stringify(e))},setBotsPaginateObject(s,e){s.bots_paginate_object=e||[],localStorage.setItem("cashman_bots_paginate_object",JSON.stringify(e))}},_Wt={state:uWt,mutations:pWt,actions:hWt,getters:mWt},fWt="/bot-client/dialogs";let bWt={dialogs:[],dialogs_paginate_object:null};const gWt={getDialogs:s=>s.dialogs||[],getDialogCommands:s=>s.dialogs||[],getDialogsPaginateObject:s=>s.dialogs_paginate_object||null},yWt={async loadDialogs(s,e={dataObject:{search:null,simple:!1},page:0,size:12}){let o={...e.dataObject},n=e.page||0,r=`${fWt}?page=${n}&size=12`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setDialogs",g.data),delete g.data,s.commit("setDialogsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async updateDialogGroup(s,e={dialogGroupForm:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/update-group`;return j.makeAxiosFactory(o,"POST",e.dialogGroupForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateDialogCommand(s,e={dialogCommandForm:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/update-dialog`;return j.makeAxiosFactory(o,"POST",e.dialogCommandForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeDialogGroup(s,e={dataObject:{dialogGroupId:null}}){let o=`${BASE_DIALOG_GROUPS_LINK}/remove-group/${e.dataObject.dialogGroupId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeDialogCommand(s,e={dataObject:{dialogCommandId:null}}){let o=`${BASE_DIALOG_GROUPS_LINK}/remove-dialog/${e.dataObject.dialogCommandId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async createDialogGroup(s,e={dialogGroupForm:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/add-group`;return j.makeAxiosFactory(o,"POST",e.dialogGroupForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async swapDialogCommand(s,e={swapForm:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/swap-dialog`;return j.makeAxiosFactory(o,"POST",e.swapForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async unlinkDialogCommand(s,e={dataObject:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/unlink-dialog`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async swapDialogGroup(s,e={swapForm:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/swap-group`;return j.makeAxiosFactory(o,"POST",e.swapForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async stopDialogs(s){let e=`${BASE_DIALOG_GROUPS_LINK}/stop-dialogs`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async createDialogCommand(s,e={dialogCommandForm:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/add-dialog`;return j.makeAxiosFactory(o,"POST",e.dialogCommandForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async duplicateDialogCommand(s,e={dataObject:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/duplicate-dialog`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async attachDialogCommandToSlug(s,e={dataObject:null}){let o=`${BASE_DIALOG_GROUPS_LINK}/attach-dialog-to-slug`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},vWt={setDialogs(s,e){s.dialogs=e||[],localStorage.setItem("cashman_dialogs",JSON.stringify(e))},setDialogsPaginateObject(s,e){s.dialogs_paginate_object=e||[],localStorage.setItem("cashman_dialogs_paginate_object",JSON.stringify(e))}},$Wt={state:bWt,mutations:vWt,actions:yWt,getters:gWt},zs="/bot-client/slugs";let kWt={slugs:[],global_slugs:[],slugs_paginate_object:null,global_slugs_paginate_object:null};const wWt={getSlugs:s=>s.slugs||[],getGlobalSlugs:s=>s.global_slugs||[],getSlugById:s=>e=>s.slugs.find(o=>o.id===e),getSlugsPaginateObject:s=>s.slugs_paginate_object||null,getGlobalSlugsPaginateObject:s=>s.global_slugs_paginate_object||null},FWt={async updateScriptParams(s,e={slugForm:null}){let o=`${zs}/slug-script-params`;return j.makeAxiosFactory(o,"POST",e.slugForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadGlobalSlugs(s,e={dataObject:{search:null,needGlobal:!0},page:0,size:12}){let o=e.page||0,i=`${zs}/global-list?page=${o}&size=12`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setGlobalSlugs",g.data),delete g.data,s.commit("setGlobalSlugsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadSlugs(s,e={dataObject:{botId:null,search:null,needGlobal:!1},page:0,size:12}){let o=e.page||0,n=e.size||12,i=`${zs}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setSlugs",g.data),delete g.data,s.commit("setSlugsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async updateSlug(s,e={slugForm:null}){let o=`${zs}/slug-update`;return j.makeAxiosFactory(o,"POST",e.slugForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async duplicateSlug(s,e={dataObject:{slugId:null}}){let o=`${zs}/duplicate/${e.dataObject.slugId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeSlug(s,e={dataObject:{slugId:null}}){let o=`${zs}/${e.dataObject.slugId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async refreshSlugParams(s,e={dataObject:{slugId:null}}){let o=`${zs}/reload-params/${e.dataObject.slugId}`;return j.makeAxiosFactory(o,"GET").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async createSlug(s,e={slugForm:null}){let o=`${zs}/slug`;return j.makeAxiosFactory(o,"POST",e.slugForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},CWt={setSlugs(s,e){s.slugs=e||[],localStorage.setItem("cashman_slugs",JSON.stringify(e))},setSlugsPaginateObject(s,e){s.slugs_paginate_object=e||[],localStorage.setItem("cashman_slugs_paginate_object",JSON.stringify(e))},setGlobalSlugs(s,e){s.global_slugs=e||[],localStorage.setItem("cashman_global_slugs",JSON.stringify(e))},setGlobalSlugsPaginateObject(s,e){s.global_slugs_paginate_object=e||[],localStorage.setItem("cashman_global_slugs_paginate_object",JSON.stringify(e))}},PWt={state:kWt,mutations:CWt,actions:FWt,getters:wWt},Zs="/bot-client/bot-users";let SWt={bot_users:[],bot_users_paginate_object:null};const xWt={getBotUsers:s=>s.bot_users||[],getBotUserById:s=>e=>s.bot_users.find(o=>o.id===e),getBotUsersPaginateObject:s=>s.bot_users_paginate_object||null},jWt={async getUserProfilePhotos(s,e=null){let o=`${Zs}/get-user-profile-photos`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadBotUsers(s,e={dataObject:{search:null},page:0,size:12}){let o=e.page||0,i=`${Zs}?page=${o}&size=12`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setBotUsers",g.data),delete g.data,s.commit("setBotUsersPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async updateProfile(s,e={botUserForm:null}){let o=`${Zs}/update-profile`;return j.makeAxiosFactory(o,"POST",e.botUserForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async initCoffee(s){let e=`${Zs}/init-coffee`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async updateBotUser(s,e={botUserForm:null}){let o=`${Zs}/update-bot-user`;return j.makeAxiosFactory(o,"POST",e.botUserForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeBotUser(s,e={dataObject:{dialogGroupId:null}}){let o=`${Zs}/remove-group/${e.dataObject.dialogGroupId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async createBotUser(s,e={dialogGroupForm:null}){let o=`${Zs}/add-group`;return j.makeAxiosFactory(o,"POST",e.dialogGroupForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},OWt={setBotUsers(s,e){s.bot_users=e||[],localStorage.setItem("cashman_bot_users",JSON.stringify(e))},setBotUsersPaginateObject(s,e){s.bot_users_paginate_object=e||[],localStorage.setItem("cashman_bot_users_paginate_object",JSON.stringify(e))}},TWt={state:SWt,mutations:OWt,actions:jWt,getters:xWt},Vn="/bot-client/media";let UWt={media:[],media_paginate_object:null};const IWt={getMedia:s=>s.media||[],getMediaPaginateObject:s=>s.media_paginate_object||null},VWt={async showMediaPreview(s,e={dataObject:{mediaId:null}}){let o=`${Vn}/preview/${e.dataObject.mediaId}`;return j.makeAxiosFactory(o,"GET").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadMedia(s,e={dataObject:{search:null,needPhoto:!1,needVideo:!1,needVideoNote:!1},page:0,size:12}){let o=e.page||0,n=e.size||12,i=`${Vn}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setMedia",g.data),delete g.data,s.commit("setMediaPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async removeMedia(s,e={dataObject:{mediaId:null}}){let o=`${Vn}/remove/${e.dataObject.mediaId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},MWt={setMedia(s,e){s.media=e||[],localStorage.setItem("cashman_media",JSON.stringify(e))},setMediaPaginateObject(s,e){s.media_paginate_object=e||[],localStorage.setItem("cashman_media_paginate_object",JSON.stringify(e))}},AWt={state:UWt,mutations:MWt,actions:VWt,getters:IWt},yt="/bot-client/quizzes";let EWt={quizzes:[],quiz_questions:[],quiz_commands:[],quiz_results:[],quizzes_paginate_object:null,quiz_questions_paginate_object:null,quiz_commands_paginate_object:null,quiz_results_paginate_object:null};const DWt={getQuizzes:s=>s.quizzes||[],getQuizResults:s=>s.quiz_results||[],getQuizQuestions:s=>s.quiz_questions||[],getQuizCommands:s=>s.quiz_commands||[],getQuizById:s=>e=>s.quizzes.find(o=>o.id===e),getQuizzesPaginateObject:s=>s.quizzes_paginate_object||null,getQuizResultsPaginateObject:s=>s.quiz_results_paginate_object||null,getQuizQuestionsPaginateObject:s=>s.quiz_questions_paginate_object||null,getQuizCommandsPaginateObject:s=>s.quiz_commands_paginate_object||null},zWt={async loadQuizCommands(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${yt}/list-of-quiz-commands/${e.dataObject.quiz_id}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setQuizCommands",g.data),delete g.data,s.commit("setQuizCommandsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async checkAndCompleteFullQuiz(s,e={quizQuestionId:null,answers:null}){let o=`${yt}/check-all-answers`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>{let d=r.data;return Promise.resolve(d)}).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async checkQuizQuestionAnswer(s,e={quizQuestionId:null,answers:null}){let o=`${yt}/check-answer`,n="POST";return j.makeAxiosFactory(o,n,e).then(r=>{let d=r.data;return Promise.resolve(d)}).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async loadQuizQuestions(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${yt}/list-of-quiz-questions/${e.dataObject.quiz_id}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setQuizQuestions",g.data),delete g.data,s.commit("setQuizQuestionsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadQuizzes(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${yt}/list-of-quiz?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setQuizzes",g.data),delete g.data,s.commit("setQuizzesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadQuizResults(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${yt}/list-of-results?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setQuizResults",g.data),delete g.data,s.commit("setQuizResultsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async storeQuizQuestion(s,e={quizQuestionForm:null}){let o=`${yt}/quiz-question-store`;return j.makeAxiosFactory(o,"POST",e.quizQuestionForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async completeQuiz(s,e={quiz_id:null}){let o=`${yt}/quiz-complete`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async startQuiz(s,e={quiz_id:null}){let o=`${yt}/start-quiz`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadSingleQuiz(s,e={quiz_id:null}){let o=`${yt}/load-single-quiz`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async checkQuizCommand(s,e={quiz_id:null}){let o=`${yt}/check-quiz-command`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeQuizCommand(s,e={quizCommandForm:null}){let o=`${yt}/quiz-command-store`;return j.makeAxiosFactory(o,"POST",e.quizCommandForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeQuiz(s,e={quizForm:null}){let o=`${yt}/quiz-store`;return j.makeAxiosFactory(o,"POST",e.quizForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeQuiz(s,e={quizId:null}){let o=`${yt}/remove-quiz/${e.quizId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeQuizCommand(s,e={quizCommandId:null}){let o=`${yt}/remove-quiz-command/${e.quizCommandId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeQuizAnswer(s,e={quizAnswerId:null}){let o=`${yt}/remove-quiz-answer/${e.quizAnswerId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeQuizQuestion(s,e={quizQuestionId:null}){let o=`${yt}/remove-quiz-question/${e.quizQuestionId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async restoreQuiz(s,e={quizId:null}){let o=`${yt}/restore-quiz/${e.quizId}`;return j.makeAxiosFactory(o,"GET").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},BWt={setQuizzes(s,e){s.quizzes=e||[],localStorage.setItem("cashman_quizzes",JSON.stringify(e))},setQuizQuestions(s,e){s.quiz_questions=e||[],localStorage.setItem("cashman_quiz_questions",JSON.stringify(e))},setQuizCommands(s,e){s.quiz_commands=e||[],localStorage.setItem("cashman_quiz_commands",JSON.stringify(e))},setQuizResults(s,e){s.quiz_results=e||[],localStorage.setItem("cashman_quiz_results",JSON.stringify(e))},setQuizResultsPaginateObject(s,e){s.quiz_results_paginate_object=e||[],localStorage.setItem("cashman_quiz_results_paginate_object",JSON.stringify(e))},setQuizzesPaginateObject(s,e){s.quizzes_paginate_object=e||[],localStorage.setItem("cashman_quizzes_paginate_object",JSON.stringify(e))},setQuizQuestionsPaginateObject(s,e){s.quiz_questions_paginate_object=e||[],localStorage.setItem("cashman_quiz_questions_paginate_object",JSON.stringify(e))},setQuizCommandsPaginateObject(s,e){s.quiz_commands_paginate_object=e||[],localStorage.setItem("cashman_quiz_commands_paginate_object",JSON.stringify(e))}},LWt={state:EWt,mutations:BWt,actions:zWt,getters:DWt},ka="/bot-client/profile-form";let RWt={};const NWt={},qWt={async loadProfileFormData(s){let e=`${ka}/load-profile-data`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async saveProfileFormData(s,e={dataObject:null}){let o=`${ka}/store-profile-data`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},WWt={},YWt={state:RWt,mutations:WWt,actions:qWt,getters:NWt},rt="/bot-client/appointments";let HWt={appointments:[],appointment_events:[],appointment_services:[],appointment_schedules:[],appointment_reviews:[],appointment_paginate_object:null,appointment_services_paginate_object:null,appointment_events_paginate_object:null,appointment_schedules_paginate_object:null,appointment_reviews_paginate_object:null};const QWt={getAppointments:s=>s.appointments||[],getAppointmentEvents:s=>s.appointment_events||[],getAppointmentServices:s=>s.appointment_services||[],getAppointmentSchedules:s=>s.appointment_schedules||[],getAppointmentReviews:s=>s.appointment_reviews||[],getAppointmentsPaginateObject:s=>s.appointment_paginate_object||null,getAppointmentEventsPaginateObject:s=>s.appointment_events_paginate_object||null,getAppointmentSchedulesPaginateObject:s=>s.appointment_schedules_paginate_object||null,getAppointmentServicesPaginateObject:s=>s.appointment_services_paginate_object||null,getAppointmentReviewsPaginateObject:s=>s.appointment_reviews_paginate_object||null},GWt={async loadAppointments(s,e={dataObject:{search:null},page:0,size:12}){let o=e.page||0,n=e.size||12,i=`${rt}/appointment-list/${e.dataObject.event_id}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setAppointments",g.data),delete g.data,s.commit("setAppointmentsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadAppointmentEvents(s,e={dataObject:{search:null},page:0,size:12}){let o=e.page||0,n=e.size||12,i=`${rt}/event-list?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setAppointmentEvents",g.data),delete g.data,s.commit("setAppointmentEventsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadAppointmentReviews(s,e={dataObject:{search:null},page:0,size:12}){let o=e.page||0,n=e.size||12,i=`${rt}/review-list/${e.dataObject.event_id}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setAppointmentReviews",g.data),delete g.data,s.commit("setAppointmentReviewsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadAppointmentSchedules(s,e={dataObject:{event_id:null},page:0,size:10}){let o=`${rt}/schedule-list/${e.dataObject.event_id}?page=${e.page||0}&size=${e.size||10}`,n="POST",i=e.dataObject;return j.makeAxiosFactory(o,n,i).then(d=>{let c=d.data;return s.commit("setAppointmentSchedules",c.data),delete c.data,s.commit("setAppointmentSchedulesPaginateObject",c),Promise.resolve()}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async loadAppointmentServices(s,e={dataObject:{event_id:null,search:null},page:0,size:12}){let o=e.page||0,n=e.size||12,i=`${rt}/service-list/${e.dataObject.event_id}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setAppointmentServices",g.data),delete g.data,s.commit("setAppointmentServicesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadAppointmentServiceCategories(s,e={dataObject:{event_id:null}}){let o=`${rt}/service-category-list/${e.dataObject.event_id}`,n="POST",i=e.dataObject;return j.makeAxiosFactory(o,n,i).then(d=>{let c=d.data;return Promise.resolve(c)}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))},async addAppointmentEvent(s,e={appointmentEventForm:null}){let o=`${rt}/add-event`;return j.makeAxiosFactory(o,"POST",e.appointmentEventForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async addAppointmentService(s,e={appointmentServiceForm:null}){let o=`${rt}/add-service`;return j.makeAxiosFactory(o,"POST",e.appointmentServiceForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeAppointment(s,e={dataObject:{appointmentForm:null}}){let o=`${rt}/store-appointment`;return j.makeAxiosFactory(o,"POST",e.dataObject.appointmentForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeAppointmentSchedule(s,e={dataObject:{schedule:null,bot_id:null,appointment_event_id:null}}){let o=`${rt}/store-schedule`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeAppointmentReview(s,e={dataObject:{appointmentReviewForm:null}}){let o=`${rt}/store-review`;return j.makeAxiosFactory(o,"POST",e.dataObject.appointmentReviewForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateAppointmentService(s,e={appointmentServiceForm:null}){let o=`${rt}/update-service`;return j.makeAxiosFactory(o,"POST",e.appointmentServiceForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateAppointmentEvent(s,e={appointmentEventForm:null}){let o=`${rt}/update-event`;return j.makeAxiosFactory(o,"post",e.appointmentEventForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async duplicateAppointmentEvent(s,e={dataObject:{appointmentEventId:null}}){let o=`${rt}/duplicate-event/${e.dataObject.appointmentEventId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAppointment(s,e={dataObject:{appointmentId:null}}){let o=`${rt}/remove-appointment/${e.dataObject.appointmentId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAppointmentReview(s,e={dataObject:{appointmentReviewId:null}}){let o=`${rt}/remove-review/${e.dataObject.appointmentReviewId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAppointmentSchedule(s,e={dataObject:{appointmentScheduleId:null}}){let o=`${rt}/remove-schedule/${e.dataObject.appointmentScheduleId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAppointmentEvent(s,e={dataObject:{appointmentEventId:null}}){let o=`${rt}/remove-event/${e.dataObject.appointmentEventId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeAppointmentService(s,e={dataObject:{appointmentServiceId:null}}){let o=`${rt}/remove-service/${e.dataObject.appointmentServiceId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async forceRemoveAppointment(s,e={dataObject:{appointmentEventId:null}}){let o=`${rt}/force-remove-event/${e.dataObject.appointmentEventId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async restoreAppointmentEvent(s,e={dataObject:{appointmentEventId:null}}){let o=`${rt}/restore-event/${e.dataObject.appointmentEventId}`;return j.makeAxiosFactory(o,"GET").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},KWt={setAppointments(s,e){s.appointments=e||[],localStorage.setItem("cashman_appointments",JSON.stringify(e))},setAppointmentEvents(s,e){s.appointment_events=e||[],localStorage.setItem("cashman_appointment_events",JSON.stringify(e))},setAppointmentServices(s,e){s.appointment_services=e||[],localStorage.setItem("cashman_appointment_services",JSON.stringify(e))},setAppointmentReviews(s,e){s.appointment_reviews=e||[],localStorage.setItem("cashman_appointment_reviews",JSON.stringify(e))},setAppointmentSchedules(s,e){s.appointment_schedules=e||[],localStorage.setItem("cashman_appointment_schedules",JSON.stringify(e))},setAppointmentsPaginateObject(s,e){s.appointments_paginate_object=e||[],localStorage.setItem("cashman_appointments_paginate_object",JSON.stringify(e))},setAppointmentReviewsPaginateObject(s,e){s.appointment_reviews_paginate_object=e||[],localStorage.setItem("cashman_appointment_reviews_paginate_object",JSON.stringify(e))},setAppointmentEventsPaginateObject(s,e){s.appointment_events_paginate_object=e||[],localStorage.setItem("cashman_appointment_events_paginate_object",JSON.stringify(e))},setAppointmentServicesPaginateObject(s,e){s.appointment_services_paginate_object=e||[],localStorage.setItem("cashman_appointment_services_paginate_object",JSON.stringify(e))},setAppointmentSchedulesPaginateObject(s,e){s.appointment_schedules_paginate_object=e||[],localStorage.setItem("cashman_appointment_schedules_paginate_object",JSON.stringify(e))}},JWt={state:HWt,mutations:KWt,actions:GWt,getters:QWt},XWt="/bot-client/payments";let ZWt={providers:[]};const eYt={getProviders:s=>s.providers||[]},tYt={async loadProviders(s){let e=`${XWt}/providers`,o="GET";return j.makeAxiosFactory(e,o).then(i=>{let r=i.data;return s.commit("setProviders",r),Promise.resolve()}).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},sYt={setProviders(s,e){s.providers=e||[],localStorage.setItem("cashman_providers",JSON.stringify(e))}},oYt={state:ZWt,mutations:sYt,actions:tYt,getters:eYt},qo="/bot-client/promocodes";let iYt={promo_codes:[],promo_codes_paginate_object:null};const nYt={getPromoCodes:s=>s.promo_codes||[],getPromoCodesPaginateObject:s=>s.promo_codes_paginate_object||null},lYt={async activatePromocode(s,e={promocodeForm:null}){let o=`${qo}/activate`;return j.makeAxiosFactory(o,"POST",e.promocodeForm).then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async activateShopDiscountPromocode(s,e={promocodeForm:null}){let o=`${qo}/activate-shop-discount`;return j.makeAxiosFactory(o,"POST",e.promocodeForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadPromoCodes(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${qo}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setPromoCodes",g.data),delete g.data,s.commit("setPromoCodesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async storePromoCodes(s,e={promoCodeForm:null}){let o=`${qo}/store`;return j.makeAxiosFactory(o,"POST",e.promoCodeForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removePromoCodes(s,e={promoCodeId:null}){let o=`${qo}/${e.promoCodeId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},aYt={setPromoCodes(s,e){s.promo_codes=e||[],localStorage.setItem("cashman_promo_codes",JSON.stringify(e))},setPromoCodesPaginateObject(s,e){s.promo_codes_paginate_object=e||[],localStorage.setItem("cashman_promo_codes_paginate_object",JSON.stringify(e))}},rYt={state:iYt,mutations:aYt,actions:lYt,getters:nYt},os="/bot-client/shop/orders";let dYt={orders:[],orders_paginate_object:null};const cYt={getOrders:s=>s.orders||[],getOrderById:s=>e=>s.orders.find(o=>o.id===e),getOrdersPaginateObject:s=>s.orders_paginate_object||null},uYt={async exportAllOrders(s){let e=`${os}/export-all-orders`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async sendSBPInvoice(s,e={dataObject:null}){let o=`${os}/send-sbp-invoice`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async declineOrder(s,e={dataObject:{order_id:null}}){let o=`${os}/decline-order`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async addCashBackToOrder(s,e={order_id:null}){let o=`${os}/add-cashback-to-order`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async requestDeliveryPrice(s,e){let o=`${os}/get-delivery-price`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadAllOrders(s,e={dataObject:{search:null,categories:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,r=`${os}/all?page=${n}&size=20`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setOrders",g.data),delete g.data,s.commit("setOrdersPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadOrders(s,e={dataObject:{search:null,categories:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,r=`${os}?page=${n}&size=20`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setOrders",g.data),delete g.data,s.commit("setOrdersPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async repeatOrder(s,e){let o=`${os}/repeat-order`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadOrderById(s,e={dataObject:{order_id:null}}){let o=`${os}/get-order-by-id`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async changeOrderStatus(s,e={dataObject:{status:null}}){let o=`${os}/change-order-status`;return j.makeAxiosFactory(o,"POST",e.dataObject).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},mYt={setOrders(s,e){s.orders=e||[],localStorage.setItem("cashman_orders",JSON.stringify(e))},setOrdersPaginateObject(s,e){s.orders_paginate_object=e||[],localStorage.setItem("cashman_orders_paginate_object",JSON.stringify(e))}},hYt={state:dYt,mutations:mYt,actions:uYt,getters:cYt},Pi="/bot-client/shop/reviews";let pYt={reviews:[],reviews_paginate_object:null};const _Yt={getReviews:s=>s.reviews||[],getReviewById:s=>e=>s.reviews.find(o=>o.id===e),getReviewsPaginateObject:s=>s.reviews_paginate_object||null},fYt={async notifyUserForReview(s,e={reviewForm:null}){let o=`${Pi}/notify-user`;return j.makeAxiosFactory(o,"POST",e.reviewForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeReview(s,e={reviewForm:null}){let o=`${Pi}/store-review`;return j.makeAxiosFactory(o,"POST",e.reviewForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadReviews(s,e={dataObject:null,page:0,size:12}){let o=e.page||0,n=e.size||20,i=`${Pi}?page=${o}&size=${n}`,r="POST";return j.makeAxiosFactory(i,r,e.dataObject).then(c=>{let h=c.data;return s.commit("setReviews",h.data),delete h.data,s.commit("setReviewsPaginateObject",h),Promise.resolve()}).catch(c=>(s.commit("setErrors",c.response.data.errors||[]),Promise.reject(c)))},async loadReviewsByProductId(s,e={dataObject:{product_id:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,i=e.size||20,r=`${Pi}/by-product-id?page=${n}&size=${i}`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setReviews",g.data),delete g.data,s.commit("setReviewsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))}},bYt={setReviews(s,e){s.reviews=e||[],localStorage.setItem("cashman_reviews",JSON.stringify(e))},setReviewsPaginateObject(s,e){s.reviews_paginate_object=e||[],localStorage.setItem("cashman_reviews_paginate_object",JSON.stringify(e))}},gYt={state:pYt,mutations:bYt,actions:fYt,getters:_Yt},Mn="/bot-client/mailing";let yYt={queues:[],queues_paginate_object:null};const vYt={getQueues:s=>s.queues||[],getQueuesPaginateObject:s=>s.queues_paginate_object||null},$Yt={async loadQueues(s,e={dataObject:null,page:0,size:50}){let o=e.page||0,n=e.size||50,i=`${Mn}?page=${o}&size=${n}`,r="POST",d=e.dataObject;return j.makeAxiosFactory(i,r,d).then(h=>{let g=h.data;return s.commit("setQueues",g.data),delete g.data,s.commit("setQueuesPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async storeQueue(s,e={queueForm:null}){let o=`${Mn}/send-to-queue`;return j.makeAxiosFactory(o,"POST",e.queueForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeQueue(s,e={queueId:null}){let o=`${Mn}/remove/${e.queueId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},kYt={setQueues(s,e){s.queues=e||[],localStorage.setItem("cashman_queues",JSON.stringify(e))},setQueuesPaginateObject(s,e){s.queues_paginate_object=e||[],localStorage.setItem("cashman_queues_paginate_object",JSON.stringify(e))}},wYt={state:yYt,mutations:kYt,actions:$Yt,getters:vYt},eo="/bot-client/iiko";let FYt={};const CYt={},PYt={async getIikoToken(s,e){let o=`${eo}/token`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async getIikoMenu(s){let e=`${eo}/menu`;return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async getIikoProducts(s,e){let o=`${eo}/products`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async getIikoOrganizations(s,e){let o=`${eo}/organizations`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async getIikoTerminals(s,e){let o=`${eo}/terminals`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeIikoProducts(s,e){let o=`${eo}/store-products`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeIiko(s,e){let o=`${eo}/store`;return j.makeAxiosFactory(o,"POST",e.iikoForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},SYt={},xYt={state:FYt,mutations:SYt,actions:PYt,getters:CYt},Si="/bot-client/bitrix";let jYt={};const OYt={},TYt={async loadBitrix(s,e){let o=`${Si}/load-connections`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async checkBitrixURL(s,e){let o=`${Si}/check`;return j.makeAxiosFactory(o,"POST",e.bitrixForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeBitrixItem(s,e={id:null}){let o=`${Si}/remove/${e.id}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeBitrix(s,e){let o=`${Si}/store`;return j.makeAxiosFactory(o,"POST",e.bitrixForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},UYt={},IYt={state:jYt,mutations:UYt,actions:TYt,getters:OYt},Bs="/bot-client/cdek";let VYt={};const MYt={},AYt={async calcCdekTariffFromCart(s,e){let o=`${Bs}/calc-basket-tariff`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadCdekOffices(s,e){let o=`${Bs}/get-offices`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadCdekCities(s,e){let o=`${Bs}/get-cities`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadCdekRegions(s,e){let o=`${Bs}/get-regions`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeCdekOrder(s,e){let o=`${Bs}/make-order`;return j.makeAxiosFactory(o,"POST",e.cdekForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async calcCdekTariff(s,e){let o=`${Bs}/calc-tariff`;return j.makeAxiosFactory(o,"POST",e.cdekForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async checkCdekURL(s,e){let o=`${Bs}/check`;return j.makeAxiosFactory(o,"POST",e.cdekForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storeCdek(s,e){let o=`${Bs}/store`;return j.makeAxiosFactory(o,"POST",e.cdekForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},EYt={},DYt={state:VYt,mutations:EYt,actions:AYt,getters:MYt},Wo="/bot-client/product-collections";let zYt={collections:[],collections_paginate_object:null};const BYt={getCollections:s=>s.collections||[],getCollectionsPaginateObject:s=>s.collections_paginate_object||null},LYt={async loadGlobalCollections(s,e={dataObject:{search:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,i=e.size||12,r=`${Wo}/global?page=${n}&size=${i}`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setCollections",g.data),delete g.data,s.commit("setCollectionsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async loadCollections(s,e={dataObject:{search:null},page:0,size:12}){let o={...e.dataObject},n=e.page||0,i=e.size||12,r=`${Wo}?page=${n}&size=${i}`,d="POST";return j.makeAxiosFactory(r,d,o).then(h=>{let g=h.data;return s.commit("setCollections",g.data),delete g.data,s.commit("setCollectionsPaginateObject",g),Promise.resolve()}).catch(h=>(s.commit("setErrors",h.response.data.errors||[]),Promise.reject(h)))},async storeCollection(s,e={collectionForm:null}){let o=`${Wo}/store`;return j.makeAxiosFactory(o,"POST",e.collectionForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async duplicateCollection(s,e={collectionId:null}){let o=`${Wo}/duplicate/${e.dataObject.collectionId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removeProductCollection(s,e={collectionId:null}){let o=`${Wo}/remove/${e.collectionId}`;return j.makeAxiosFactory(o,"POST").then(i=>Promise.resolve(i)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},RYt={setCollections(s,e){s.collections=e||[],localStorage.setItem("cashman_collections",JSON.stringify(e))},setCollectionsPaginateObject(s,e){s.collections_paginate_object=e||[],localStorage.setItem("cashman_collections_paginate_object",JSON.stringify(e))}},NYt={state:zYt,mutations:RYt,actions:LYt,getters:BYt},qYt="/bot-client/friends";let WYt={friends:[],friends_paginate_object:null};const YYt={getFriends:s=>s.friends||[],getFriendsPaginateObject:s=>s.friends_paginate_object||null},HYt={async loadFriends(s,e={page:0,size:12}){let o=e.page||0,i=`${qYt}?page=${o}&size=12`;return j.makeAxiosFactory(i,"POST").then(d=>{let c=d.data;return s.commit("setFriends",c.data),delete c.data,s.commit("setFriendsPaginateObject",c),Promise.resolve()}).catch(d=>(s.commit("setErrors",d.response.data.errors||[]),Promise.reject(d)))}},QYt={setFriends(s,e){s.friends=e||[],localStorage.setItem("cashman_friends",JSON.stringify(e))},setFriendsPaginateObject(s,e){s.friends_paginate_object=e||[],localStorage.setItem("cashman_friends_paginate_object",JSON.stringify(e))}},GYt={state:WYt,mutations:QYt,actions:HYt,getters:YYt},Ls="/bot-client/partners";let KYt={partners:[],partners_paginate_object:null};const JYt={getPartners:s=>s.partners||[],getPartnersPaginateObject:s=>s.partners_paginate_object||null},XYt={async loadPartners(s,e){let o=`${Ls}`;return j.makeAxiosFactory(o,"POST",e).then(i=>{let r=i.data;return s.commit("setPartners",r.data),delete r.data,s.commit("setPartnersPaginateObject",r),Promise.resolve()}).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updatePartnersSettings(s,e){let o=`${Ls}/update-settings`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updateSelfPartner(s,e){let o=`${Ls}/update-self`;return j.makeAxiosFactory(o,"POST",e.form).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async updatePartner(s,e){let o=`${Ls}/update`;return j.makeAxiosFactory(o,"POST",e.form).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async listOfPartnersCategories(s,e){let o=`${Ls}/partners-categories`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async changePartnerProductStatus(s,e){let o=`${Ls}/change-status`;return j.makeAxiosFactory(o,"POST",e).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async storePartner(s,e){let o=`${Ls}/store`;return j.makeAxiosFactory(o,"POST",e.form).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async removePartner(s,e={partnerId:null}){let o=`${Ls}/${e.partnerId}`;return j.makeAxiosFactory(o,"DELETE").then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))}},ZYt={setPartners(s,e){s.partners=e||[],localStorage.setItem("cashman_partners",JSON.stringify(e))},setPartnersPaginateObject(s,e){s.partners_paginate_object=e||[],localStorage.setItem("cashman_partners_paginate_object",JSON.stringify(e))}},eHt={state:KYt,mutations:ZYt,actions:XYt,getters:JYt},tHt=pp({state:{errors:[]},getters:{getErrors:s=>s.errors||[]},actions:{async sendToChannel(s,e={mailForm:null}){let o="/bot-client/send-to-channel";return j.makeAxiosFactory(o,"POST",e.mailForm).then(i=>Promise.resolve(i.data)).catch(i=>(s.commit("setErrors",i.response.data.errors||[]),Promise.reject(i)))},async loadNotes(s){let e="/bot-client/manager-notes";return j.makeAxiosFactory(e,"POST").then(n=>Promise.resolve(n.data)).catch(n=>(s.commit("setErrors",n.response.data.errors||[]),Promise.reject(n)))},async requestTelegramChannelId(s,e={dataObject:null}){let o={...e.dataObject},n="/bot-client/telegram-channel-id";return j.makeAxiosFactory(n,"POST",o).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async uploadFileForm(s,e={callbackForm:null}){let o=e.callbackForm,n="/bot-client/upload-file";return j.makeAxiosFactory(n,"POST",o).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async feedBackForm(s,e={callbackForm:null}){let o=e.callbackForm,n="/bot-client/feedback";return j.makeAxiosFactory(n,"POST",o).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))},async callbackForm(s,e={callbackForm:null}){let o=e.callbackForm,n="/bot-client/callback";return j.makeAxiosFactory(n,"POST",o).then(r=>Promise.resolve(r.data)).catch(r=>(s.commit("setErrors",r.response.data.errors||[]),Promise.reject(r)))}},mutations:{setErrors(s,e){s.errors=e||[]}},modules:{cashBack:LRt,admins:YRt,products:JRt,wheelOfFortune:mNt,wheelOfFortuneCustom:INt,wheelOfFortuneV3:DNt,instagramQuest:ZNt,requestPhoto:iqt,schedule:cqt,cashOut:fqt,cart:kqt,self:Sqt,favorites:Uqt,shopAdmin:Gqt,bonusProduct:QNt,watches:nWt,company:eWt,pages:cWt,bots:_Wt,dialogs:$Wt,slugs:PWt,botUsers:TWt,media:AWt,ingredients:aNt,quiz:LWt,chatHistory:xNt,profileForm:YWt,appointments:JWt,collections:NYt,payments:oYt,promocodes:rYt,orders:hYt,friendsGame:NNt,mailing:wYt,iiko:xYt,friends:sNt,myFriends:GYt,reviews:gYt,bitrix:IYt,cdek:DYt,stories:bNt,tables:kNt,partners:eHt}}),sHt=fp();window.eventBus=sHt;var wa;const oHt=((wa=window.document.getElementsByTagName("title")[0])==null?void 0:wa.innerText)||"Laravel";_p({title:s=>`${s} - ${oHt}`,resolve:s=>bp(`./Pages/${s}.vue`,Object.assign({"./Pages/MainV1.vue":()=>Z(()=>import("./MainV1-ae6f1179.js"),["assets/MainV1-ae6f1179.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index.es-7fe923e3.js","assets/V1Layout-343323d3.js","assets/MobileForPage-5ac8cdc0.css","assets/vue3-simple-typeahead-af322e2b.js","assets/vue3-json-editor.esm.prod-2ea2d4db.js","assets/vue3-simple-typeahead-408b5272.css","assets/TelegramChannelHelper-510d1a84.js","assets/TelegramChannelHelper.vue_vue_type_style_index_0_lang-3e1392ba.js","assets/TelegramChannelHelper-8363056c.css","assets/TelegramChannelHelper-ee5a9069.css","assets/base64-de67e476.js","assets/main-f4ba7aa5.js","assets/main-8c777a3a.css","assets/base64-5ad24a6a.css","assets/v4-4a60fe23.js","assets/carousel.es-cb3e1d04.js","assets/carousel-fdd153ee.css","assets/GlobalSlugList-dfed2e14.js","assets/vue3-perfect-scrollbar-8aa20407.js","assets/vue3-perfect-scrollbar-21f67833.css","assets/index-7fa68054.js","assets/MainV1-57dd244b.css"]),"./Pages/MainV2.vue":()=>Z(()=>import("./MainV2-358632b9.js"),["assets/MainV2-358632b9.js","assets/index.es-7fe923e3.js","assets/vue3-simple-typeahead-af322e2b.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/vue3-json-editor.esm.prod-2ea2d4db.js","assets/vue3-simple-typeahead-408b5272.css","assets/TelegramChannelHelper-510d1a84.js","assets/TelegramChannelHelper.vue_vue_type_style_index_0_lang-3e1392ba.js","assets/TelegramChannelHelper-8363056c.css","assets/TelegramChannelHelper-ee5a9069.css","assets/base64-de67e476.js","assets/main-f4ba7aa5.js","assets/main-8c777a3a.css","assets/base64-5ad24a6a.css","assets/v4-4a60fe23.js","assets/carousel.es-cb3e1d04.js","assets/carousel-fdd153ee.css","assets/GlobalSlugList-dfed2e14.js","assets/vue3-perfect-scrollbar-8aa20407.js","assets/vue3-perfect-scrollbar-21f67833.css","assets/index-7fa68054.js","assets/MainV2-ac87afce.css"]),"./Pages/V1/Admin/Actions.vue":()=>Z(()=>Promise.resolve().then(()=>vE),void 0),"./Pages/V1/Admin/BonusProduct.vue":()=>Z(()=>Promise.resolve().then(()=>wse),void 0),"./Pages/V1/Admin/BotManager.vue":()=>Z(()=>Promise.resolve().then(()=>kY),void 0),"./Pages/V1/Admin/BotManager/Amo.vue":()=>Z(()=>Promise.resolve().then(()=>Ate),void 0),"./Pages/V1/Admin/BotManager/Dialogs.vue":()=>Z(()=>Promise.resolve().then(()=>Oee),void 0),"./Pages/V1/Admin/BotManager/Keyboards.vue":()=>Z(()=>Promise.resolve().then(()=>Vee),void 0),"./Pages/V1/Admin/BotManager/Pages.vue":()=>Z(()=>Promise.resolve().then(()=>CK),void 0),"./Pages/V1/Admin/BotManager/Slugs.vue":()=>Z(()=>Promise.resolve().then(()=>RX),void 0),"./Pages/V1/Admin/BotManager/YClients.vue":()=>Z(()=>Promise.resolve().then(()=>Kte),void 0),"./Pages/V1/Admin/ChatHistory.vue":()=>Z(()=>Promise.resolve().then(()=>d9),void 0),"./Pages/V1/Admin/CompanyManager.vue":()=>Z(()=>Promise.resolve().then(()=>pR),void 0),"./Pages/V1/Admin/Main.vue":()=>Z(()=>Promise.resolve().then(()=>J7),void 0),"./Pages/V1/Admin/MessageToUser.vue":()=>Z(()=>Promise.resolve().then(()=>Kse),void 0),"./Pages/V1/Admin/Orders.vue":()=>Z(()=>Promise.resolve().then(()=>IA),void 0),"./Pages/V1/Admin/Promotion.vue":()=>Z(()=>Promise.resolve().then(()=>yM),void 0),"./Pages/V1/Admin/ShopManager.vue":()=>Z(()=>Promise.resolve().then(()=>Lz),void 0),"./Pages/V1/Admin/Statistic.vue":()=>Z(()=>Promise.resolve().then(()=>_A),void 0),"./Pages/V1/Admin/Users.vue":()=>Z(()=>Promise.resolve().then(()=>AA),void 0),"./Pages/V1/Admin/WorkStatus.vue":()=>Z(()=>Promise.resolve().then(()=>OA),void 0),"./Pages/V1/Appointment/Appointments.vue":()=>Z(()=>Promise.resolve().then(()=>ck),void 0),"./Pages/V1/Delivery/DeliveryManForm.vue":()=>Z(()=>Promise.resolve().then(()=>bpe),void 0),"./Pages/V1/Delivery/Main.vue":()=>Z(()=>Promise.resolve().then(()=>AF),void 0),"./Pages/V1/Error.vue":()=>Z(()=>import("./Error-d8d2ee25.js"),["assets/Error-d8d2ee25.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/index.es-7fe923e3.js"]),"./Pages/V1/FoodConstructors.vue":()=>Z(()=>Promise.resolve().then(()=>mC),void 0),"./Pages/V1/Manager/Clients.vue":()=>Z(()=>Promise.resolve().then(()=>zue),void 0),"./Pages/V1/Manager/Main.vue":()=>Z(()=>Promise.resolve().then(()=>Yle),void 0),"./Pages/V1/Manager/Manager.vue":()=>Z(()=>Promise.resolve().then(()=>fre),void 0),"./Pages/V1/Manager/Partners.vue":()=>Z(()=>Promise.resolve().then(()=>rhe),void 0),"./Pages/V1/Manager/Profile.vue":()=>Z(()=>Promise.resolve().then(()=>nhe),void 0),"./Pages/V1/OneArmedBanditPage.vue":()=>Z(()=>Promise.resolve().then(()=>vk),void 0),"./Pages/V1/Quiz/Quizzes.vue":()=>Z(()=>Promise.resolve().then(()=>e0),void 0),"./Pages/V1/Quiz/SingleQuiz.vue":()=>Z(()=>Promise.resolve().then(()=>q0),void 0),"./Pages/V1/Result.vue":()=>Z(()=>import("./Result-9bb0e2db.js"),["assets/Result-9bb0e2db.js","assets/V1Layout-343323d3.js","assets/index.es-7fe923e3.js","assets/MobileForPage-5ac8cdc0.css","assets/vue3-simple-typeahead-af322e2b.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/vue3-json-editor.esm.prod-2ea2d4db.js","assets/vue3-simple-typeahead-408b5272.css","assets/TelegramChannelHelper-510d1a84.js","assets/TelegramChannelHelper.vue_vue_type_style_index_0_lang-3e1392ba.js","assets/TelegramChannelHelper-8363056c.css","assets/TelegramChannelHelper-ee5a9069.css","assets/base64-de67e476.js","assets/main-f4ba7aa5.js","assets/main-8c777a3a.css","assets/base64-5ad24a6a.css","assets/v4-4a60fe23.js","assets/carousel.es-cb3e1d04.js","assets/carousel-fdd153ee.css","assets/GlobalSlugList-dfed2e14.js","assets/vue3-perfect-scrollbar-8aa20407.js","assets/vue3-perfect-scrollbar-21f67833.css","assets/index-7fa68054.js"]),"./Pages/V1/Shop/Admins.vue":()=>Z(()=>Promise.resolve().then(()=>m4),void 0),"./Pages/V1/Shop/Basket.vue":()=>Z(()=>Promise.resolve().then(()=>u1),void 0),"./Pages/V1/Shop/Booking.vue":()=>Z(()=>Promise.resolve().then(()=>QS),void 0),"./Pages/V1/Shop/CashOut.vue":()=>Z(()=>Promise.resolve().then(()=>RP),void 0),"./Pages/V1/Shop/CashReceipt.vue":()=>Z(()=>import("./CashReceipt-b31ab22d.js"),["assets/CashReceipt-b31ab22d.js","assets/index.es-7fe923e3.js","assets/CashReceipt-55274ec9.css"]),"./Pages/V1/Shop/Categories.vue":()=>Z(()=>Promise.resolve().then(()=>dO),void 0),"./Pages/V1/Shop/Empty.vue":()=>Z(()=>Promise.resolve().then(()=>$S),void 0),"./Pages/V1/Shop/Favorites.vue":()=>Z(()=>Promise.resolve().then(()=>zg),void 0),"./Pages/V1/Shop/FriendsGame.vue":()=>Z(()=>Promise.resolve().then(()=>d5),void 0),"./Pages/V1/Shop/Home.vue":()=>Z(()=>Promise.resolve().then(()=>af),void 0),"./Pages/V1/Shop/Product.vue":()=>Z(()=>Promise.resolve().then(()=>yg),void 0),"./Pages/V1/Shop/Products.vue":()=>Z(()=>Promise.resolve().then(()=>Gf),void 0),"./Pages/V1/Shop/ProductsInCategory.vue":()=>Z(()=>Promise.resolve().then(()=>fb),void 0),"./Pages/V1/Shop/ProfileForm.vue":()=>Z(()=>Promise.resolve().then(()=>lO),void 0),"./Pages/V1/Shop/Promocode.vue":()=>Z(()=>Promise.resolve().then(()=>HF),void 0),"./Pages/V1/Shop/Quest.vue":()=>Z(()=>Promise.resolve().then(()=>vS),void 0),"./Pages/V1/Shop/SaveUp.vue":()=>Z(()=>Promise.resolve().then(()=>sS),void 0),"./Pages/V1/Shop/Schedule.vue":()=>Z(()=>Promise.resolve().then(()=>Z1),void 0),"./Pages/V1/Shop/Vip.vue":()=>Z(()=>Promise.resolve().then(()=>zx),void 0),"./Pages/V1/Shop/Wheel.vue":()=>Z(()=>Promise.resolve().then(()=>VC),void 0),"./Pages/V1/Shop/WheelCustom.vue":()=>Z(()=>Promise.resolve().then(()=>eP),void 0),"./Pages/V2/Admin/AdminMenu.vue":()=>Z(()=>Promise.resolve().then(()=>B0t),void 0),"./Pages/V2/Admin/BotManager.vue":()=>Z(()=>Promise.resolve().then(()=>Swt),void 0),"./Pages/V2/Admin/CashBack.vue":()=>Z(()=>import("./CashBack-0ba68522.js"),["assets/CashBack-0ba68522.js","assets/index.es-7fe923e3.js","assets/vue3-simple-typeahead-af322e2b.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/vue3-json-editor.esm.prod-2ea2d4db.js","assets/vue3-simple-typeahead-408b5272.css","assets/TelegramChannelHelper-510d1a84.js","assets/TelegramChannelHelper.vue_vue_type_style_index_0_lang-3e1392ba.js","assets/TelegramChannelHelper-8363056c.css","assets/TelegramChannelHelper-ee5a9069.css","assets/base64-de67e476.js","assets/main-f4ba7aa5.js","assets/main-8c777a3a.css","assets/base64-5ad24a6a.css","assets/v4-4a60fe23.js","assets/carousel.es-cb3e1d04.js","assets/carousel-fdd153ee.css","assets/GlobalSlugList-dfed2e14.js","assets/vue3-perfect-scrollbar-8aa20407.js","assets/vue3-perfect-scrollbar-21f67833.css","assets/index-7fa68054.js"]),"./Pages/V2/Admin/Clients.vue":()=>Z(()=>Promise.resolve().then(()=>RZe),void 0),"./Pages/V2/Admin/Dialogs.vue":()=>Z(()=>Promise.resolve().then(()=>c7t),void 0),"./Pages/V2/Admin/IntegrationMenu.vue":()=>Z(()=>Promise.resolve().then(()=>ASt),void 0),"./Pages/V2/Admin/Integrations/Amo.vue":()=>Z(()=>Promise.resolve().then(()=>Ajt),void 0),"./Pages/V2/Admin/Integrations/Bitrix.vue":()=>Z(()=>Promise.resolve().then(()=>OVt),void 0),"./Pages/V2/Admin/Integrations/Cdek.vue":()=>Z(()=>Promise.resolve().then(()=>bTt),void 0),"./Pages/V2/Admin/Integrations/FrontPad.vue":()=>Z(()=>Promise.resolve().then(()=>dMt),void 0),"./Pages/V2/Admin/Integrations/Iiko.vue":()=>Z(()=>Promise.resolve().then(()=>XIt),void 0),"./Pages/V2/Admin/Integrations/YClients.vue":()=>Z(()=>Promise.resolve().then(()=>N9t),void 0),"./Pages/V2/Admin/Invoice.vue":()=>Z(()=>Promise.resolve().then(()=>gRt),void 0),"./Pages/V2/Admin/Links.vue":()=>Z(()=>Promise.resolve().then(()=>aSt),void 0),"./Pages/V2/Admin/Mailing.vue":()=>Z(()=>Promise.resolve().then(()=>nYe),void 0),"./Pages/V2/Admin/Orders.vue":()=>Z(()=>Promise.resolve().then(()=>brt),void 0),"./Pages/V2/Admin/PageEditor.vue":()=>Z(()=>Promise.resolve().then(()=>CRt),void 0),"./Pages/V2/Admin/Pages.vue":()=>Z(()=>Promise.resolve().then(()=>MPt),void 0),"./Pages/V2/Admin/Partners.vue":()=>Z(()=>Promise.resolve().then(()=>Kxt),void 0),"./Pages/V2/Admin/Promocodes.vue":()=>Z(()=>Promise.resolve().then(()=>Zut),void 0),"./Pages/V2/Admin/Shop.vue":()=>Z(()=>Promise.resolve().then(()=>prt),void 0),"./Pages/V2/Admin/Slugs.vue":()=>Z(()=>Promise.resolve().then(()=>V9t),void 0),"./Pages/V2/Admin/Statistic.vue":()=>Z(()=>Promise.resolve().then(()=>Cct),void 0),"./Pages/V2/Admin/StoryManager.vue":()=>Z(()=>Promise.resolve().then(()=>mRe),void 0),"./Pages/V2/Admin/Tables/Table.vue":()=>Z(()=>Promise.resolve().then(()=>KLt),void 0),"./Pages/V2/Admin/Tables/TablesManager.vue":()=>Z(()=>Promise.resolve().then(()=>Hzt),void 0),"./Pages/V2/Fastoran/Main.vue":()=>Z(()=>import("./Main-fcd5f8d9.js"),["assets/Main-fcd5f8d9.js","assets/index.es-7fe923e3.js","assets/_plugin-vue_export-helper-c27b6911.js"]),"./Pages/V2/Games/WheelCustom.vue":()=>Z(()=>Promise.resolve().then(()=>Evt),void 0),"./Pages/V2/Other/FeedBack.vue":()=>Z(()=>Promise.resolve().then(()=>SOe),void 0),"./Pages/V2/Other/FileUpload.vue":()=>Z(()=>Promise.resolve().then(()=>HMt),void 0),"./Pages/V2/Result.vue":()=>Z(()=>import("./Result-ed2d5a4b.js"),["assets/Result-ed2d5a4b.js","assets/V1Layout-343323d3.js","assets/index.es-7fe923e3.js","assets/MobileForPage-5ac8cdc0.css","assets/vue3-simple-typeahead-af322e2b.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/vue3-json-editor.esm.prod-2ea2d4db.js","assets/vue3-simple-typeahead-408b5272.css","assets/TelegramChannelHelper-510d1a84.js","assets/TelegramChannelHelper.vue_vue_type_style_index_0_lang-3e1392ba.js","assets/TelegramChannelHelper-8363056c.css","assets/TelegramChannelHelper-ee5a9069.css","assets/base64-de67e476.js","assets/main-f4ba7aa5.js","assets/main-8c777a3a.css","assets/base64-5ad24a6a.css","assets/v4-4a60fe23.js","assets/carousel.es-cb3e1d04.js","assets/carousel-fdd153ee.css","assets/GlobalSlugList-dfed2e14.js","assets/vue3-perfect-scrollbar-8aa20407.js","assets/vue3-perfect-scrollbar-21f67833.css","assets/index-7fa68054.js"]),"./Pages/V2/Shop/Bookings.vue":()=>Z(()=>Promise.resolve().then(()=>ORt),void 0),"./Pages/V2/Shop/Catalog.vue":()=>Z(()=>Promise.resolve().then(()=>f$e),void 0),"./Pages/V2/Shop/Contacts.vue":()=>Z(()=>Promise.resolve().then(()=>Tke),void 0),"./Pages/V2/Shop/FriendsGame.vue":()=>Z(()=>Promise.resolve().then(()=>jht),void 0),"./Pages/V2/Shop/InstaQuest.vue":()=>Z(()=>Promise.resolve().then(()=>Mmt),void 0),"./Pages/V2/Shop/Menu.vue":()=>Z(()=>Promise.resolve().then(()=>hze),void 0),"./Pages/V2/Shop/MyCashBack.vue":()=>Z(()=>Promise.resolve().then(()=>PBe),void 0),"./Pages/V2/Shop/MyFriends.vue":()=>Z(()=>Promise.resolve().then(()=>QBe),void 0),"./Pages/V2/Shop/MyOrders.vue":()=>Z(()=>Promise.resolve().then(()=>twe),void 0),"./Pages/V2/Shop/PagePassword.vue":()=>Z(()=>Promise.resolve().then(()=>pmt),void 0),"./Pages/V2/Shop/Product.vue":()=>Z(()=>Promise.resolve().then(()=>yFe),void 0),"./Pages/V2/Shop/Profile.vue":()=>Z(()=>Promise.resolve().then(()=>f3e),void 0),"./Pages/V2/Shop/PromoCode.vue":()=>Z(()=>Promise.resolve().then(()=>qht),void 0),"./Pages/V2/Shop/Referral.vue":()=>Z(()=>Promise.resolve().then(()=>SAt),void 0),"./Pages/V2/Shop/RequestPhoto.vue":()=>Z(()=>Promise.resolve().then(()=>Zmt),void 0),"./Pages/V2/Shop/ShopCart.vue":()=>Z(()=>Promise.resolve().then(()=>lOe),void 0),"./Pages/V2/Shop/SimpleProfileV1.vue":()=>Z(()=>Promise.resolve().then(()=>Mft),void 0),"./Pages/V2/Shop/Tables/TableCart.vue":()=>Z(()=>Promise.resolve().then(()=>azt),void 0),"./Pages/V2/Shop/Tables/TableMenu.vue":()=>Z(()=>Promise.resolve().then(()=>DAt),void 0),"./Pages/V2/Shop/VipProfileV1.vue":()=>Z(()=>Promise.resolve().then(()=>fft),void 0),"./Pages/V2/Shop/VipProfileV2.vue":()=>Z(()=>Promise.resolve().then(()=>hgt),void 0),"./Pages/V2/Shop/WheelOfFortune.vue":()=>Z(()=>Promise.resolve().then(()=>mLe),void 0),"./Pages/V2/Waiter/Catalog.vue":()=>Z(()=>Promise.resolve().then(()=>D$e),void 0)})),setup({el:s,App:e,props:o,plugin:n}){const i=gp({render:()=>Fa(e,o)});return i.config.globalProperties.$filters={local(r){return ko(r).format("YYYY-MM-DDThh:mm")},timeAgo(r){return ko(r).fromNow()},current(r){return ko(r).format("YYYY-MM-DD")},currentFull(r){return ko(r).format("YYYY-MM-DD HH:mm:ss")}},i.config.globalProperties.$botNotification=Ip,i.config.globalProperties.$cart=Mp,i.config.globalProperties.$cashback=Ap,i.config.globalProperties.$botPages=Vp,i.config.globalProperties.$productInfo=Ep,i.config.globalProperties.$preloader=Dp,i.use(n).use(tHt).use(yp).use(vp).use($p).use(ARt).use(Sp).use(Tp).use(xp).use(jp).use(kp,Ziggy).use(wp,{loading:"/cashman-lazy.jpg",error:"/cashman-lazy.jpg"}).mount(s),i},progress:{color:"#4B5563"}});export{st as R,q$e as S,Ad as _,es as b};
