import"./ProductCardSimple-2492c86f.js";import{j as h,O as u,o,k as c,n as t,N as m,p as n,L as a,M as d}from"./index.es-c4852431.js";const p={class:"card product-card"},y={class:"rounded-3"},_={class:"controls"},P={class:"top d-flex justify-content-between w-100 align-items-center"},f={class:"rating w-100 p-2"},g={class:"text-white fw-bold"},v=t("i",{class:"fa-regular fa-star text-primary mr-1"},null,-1),w={key:0,class:"badge bg-primary mr-2 fw-bold"},C={class:"text-center mb-2",style:{"font-size":"12px"}},b={key:0},k={class:"text-center mb-2"},$={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},x={key:0,class:"card-footer"},D={props:["item","displayType"],data(){return{showCart:!1}},computed:{...h(["inCart","getReviews","getReviewsPaginateObject"]),currentPrice(){return this.item.current_price/100},oldPrice(){return this.item.old_price/100},checkInCart(){return this.inCart(this.item.id)}},methods:{showProductDetails(){this.$emit("select",this.item)},goToProduct(){this.$router.push({name:"ProductV2",params:{productId:this.item.id}})},repairProduct(){this.$store.dispatch("restoreProduct",this.item.id).then(()=>{this.$notify({title:"Восстановление товара",text:"Товар успешно восстановлен",type:"success"}),this.item.deleted_at=null}).catch(()=>{this.$notify({title:"Восстановление товара",text:"Товар не удалось восстановить",type:"error"})})},incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.item):this.$store.dispatch("incQuantity",this.item.id),this.$notify({title:"Добавление товара",text:"Товар успешно добавлен",type:"success"})},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.item.id):this.$store.dispatch("decQuantity",this.item.id),this.$notify({title:"Добавление товара",text:"Товар успешно удален",type:"success"})}}},I=Object.assign(D,{__name:"AdminProductCard",setup(e){return(i,s)=>{const l=u("lazy");return o(),c("div",p,[t("div",{onClick:s[0]||(s[0]=(...r)=>i.showProductDetails&&i.showProductDetails(...r)),class:"img-container"},[m(t("img",y,null,512),[[l,e.item.images[0]]]),t("div",_,[t("div",P,[t("div",f,[t("span",g,[v,n(" "+a(e.item.rating||0),1)])]),e.item.old_price>0?(o(),c("span",w,"%")):d("",!0)])])]),t("div",{class:"card-body",onClick:s[1]||(s[1]=(...r)=>i.showProductDetails&&i.showProductDetails(...r))},[t("p",C,[n(a(e.item.title.slice(0,50))+" ",1),e.item.title.length>50?(o(),c("span",b,"...")):d("",!0)]),t("p",k,[n(a(e.item.current_price||0)+"₽ ",1),e.item.old_price>0?(o(),c("span",$,a(e.item.old_price||0)+"₽",1)):d("",!0)])]),e.item.deleted_at?(o(),c("div",x,[t("button",{onClick:s[2]||(s[2]=(...r)=>i.repairProduct&&i.repairProduct(...r)),class:"btn btn-primary w-100",type:"button"},"Восстановить")])):d("",!0)])}}});export{I as _};
