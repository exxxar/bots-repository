import{_ as u}from"./_plugin-vue_export-helper-c27b6911.js";import{o as a,j as n,l as s,K as p,n as d,L as c,M as _,N as f,T as y,U as g}from"./index.es-db843bab.js";const x={name:"App",data(){return{rules:null,sending:!1,action:null,photo:null,hasProfileData:!1,instaForm:{comment:null,name:null,phone:null}}},computed:{canPlay(){return this.action?this.action.current_attempts<this.action.max_attempts:!1}},mounted(){this.loadServiceData().then(()=>{this.prepareUserData()})},methods:{lose(){this.$notify({title:"Упс!",text:"Вы израсходовали все попытки!",type:"error"})},prepareUserData(){return this.$store.dispatch("instagramQuestPrepare").then(t=>{this.action=t.action,this.canPlay||this.$notify({title:"Упс!",text:"Вы израсходовали все попытки!",type:"error"})})},loadServiceData(){return this.$store.dispatch("instagramQuestLoadData").then(t=>{this.rules=t.rules})},removePhoto(){this.photo=null},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(t){const e=t.target.files;this.photo=e[0]},callbackPlayerForm(t){this.instaForm={...this.instaForm,...t},this.hasProfileData=!0},submit(){let t=new FormData;Object.keys(this.instaForm).forEach(e=>{const l=this.instaForm[e]||"";typeof l=="object"?t.append(e,JSON.stringify(l)):t.append(e,l)}),t.append("photo",this.photo),this.$store.dispatch("instagramQuestResult",{instaForm:t}).then(e=>{this.sending=!1,this.instaForm={comment:null,name:null,phone:null},this.photo=null,this.hasProfileData=!1,this.$notify({title:"Вы выиграли!",text:"Наш менеджер свяжется с вами для дальнейших инструкций.",type:"success"}),setTimeout(()=>{this.prepareUserData()},5e3)}).catch(e=>{})}}},h=t=>(y("data-v-5f02037e"),t=t(),g(),t),v={class:"container py-3"},b={class:"row"},P={class:"col-12"},w=h(()=>s("h4",null,"Правила данного задания",-1)),k={key:0,class:"alert-light alert"},D={key:1,class:"alert-light alert"},F={key:2,class:"text-center"},C={class:"fw-bold text-primary"},U={class:"fw-bold text-primary"},S={key:4,class:"card"},j={class:"card-body"},I={key:0,for:"photos",style:{"font-size":"14px","min-height":"300px"},class:"photo-loader my-2 d-flex justify-content-center align-items-center flex-column text-center w-100"},N=h(()=>s("i",{class:"fa-brands fa-instagram text-primary"},null,-1)),Q=h(()=>s("p",{class:"mt-3 font-16 text-primary"}," Нажмите для выбора фотографии",-1)),z={key:1,style:{"font-size":"14px","min-height":"300px"},class:"img-preview w-100 overflow-hidden my-2"},L={class:"w-100 object-fit-cover"},B={class:"remove"},O=h(()=>s("i",{class:"fa-regular fa-trash-can mr-2 text-primary"},null,-1));function R(t,e,l,T,i,o){const m=f("lazy");return a(),n("div",v,[s("div",b,[s("div",P,[w,i.rules?(a(),n("p",k,p(i.rules),1)):(a(),n("p",D," Вам необходима загрузить скриншот из социальной сети, на котором видно что вы поделились нашим рекламным банером и он находился у вас на странице какое-то время. ")),o.canPlay?(a(),n("p",F,[d("Ваши попытки: "),s("strong",C,p(i.action.current_attempts||0),1),d(" из "),s("strong",U,p(i.action.max_attempts||1),1)])):(a(),n("p",{key:3,onClick:e[0]||(e[0]=(...r)=>o.lose&&o.lose(...r)),class:"alert alert-light text-center fw-bold text-danger"},"Вы израсходовали все ваши попытки")),o.canPlay?(a(),n("div",S,[s("div",j,[i.photo?c("",!0):(a(),n("label",I,[N,s("input",{type:"file",id:"photos",accept:"image/*",onChange:e[1]||(e[1]=(...r)=>o.onChangePhotos&&o.onChangePhotos(...r)),style:{display:"none"}},null,32),Q])),i.photo?(a(),n("div",z,[_(s("img",L,null,512),[[m,o.getPhoto().imageUrl]]),s("div",B,[s("a",{onClick:e[2]||(e[2]=(...r)=>o.removePhoto&&o.removePhoto(...r)),class:"btn btn-outline-light rounded-5 p-3 shadow-s"},[O,d(" Удалить фото")])])])):c("",!0),i.photo?(a(),n("button",{key:2,onClick:e[3]||(e[3]=(...r)=>o.submit&&o.submit(...r)),type:"button",class:"btn btn-primary p-3 w-100"}," Получить приз ")):c("",!0)])])):c("",!0)])])])}const A=u(x,[["render",R],["__scopeId","data-v-5f02037e"]]);export{A as default};
