import{g as p,o as i,j as o,l as t,M as _,W as u,L as d,F as r,J as f,$ as b,K as l,n as h,G as g}from"./index.es-db843bab.js";import{P as m}from"./Pagination-ccc8cfc8.js";const y={class:"mb-2"},v={class:"form-floating"},k=t("label",{for:"floatingInput"},"Поиск файла",-1),M={key:0,class:"mb-2"},j=["onClick"],w={class:"card-body p-2"},P={class:"d-flex"},$={key:0,class:"fa-solid p-2 fa-video"},V={key:1,class:"fa-solid p-2 fa-camera r"},C={key:2,class:"fa-solid p-2 fa-circle-play"},N={key:3,class:"fa-solid p-2 fa-microphone-lines"},O={key:4,class:"fa-solid p-2 fa-file-word"},x={key:5,class:"fa-solid p-2 fa-note-sticky"},B={class:"d-flex justify-content-between p-1 w-100 mb-0"},D={class:"mb-1"},I={class:"d-flex justify-content-between"},S=["onClick"],A=t("i",{class:"fa-solid fa-eye"},null,-1),L=["onClick"],F=t("i",{class:"fa-solid fa-trash"},null,-1),G=[F],T={key:1,class:"mb-2"},z=t("div",{class:"alert alert-warning",role:"alert"}," У выбранного бота нет медиа-файлов ",-1),E=[z],J={props:["selected","needVideo","needVideoNote","needPhoto","needDocument","needAudio","needSticker"],data(){return{bot:null,loading:!0,media:[],search:null,media_paginate_object:null}},computed:{...p(["getMedia","getMediaPaginateObject"])},mounted(){this.loadMedia()},methods:{selectMedia(a){this.$emit("select",a)},nextMedia(a){this.loadMedia(a)},remove(a){this.$store.dispatch("removeMedia",{dataObject:{mediaId:a}}).then(s=>{this.loadMedia(),this.$botNotification.notification("Удаление медиа-контента","Медиа контент удален")}).catch(()=>{})},showPreview(a){this.$store.dispatch("showMediaPreview",{dataObject:{mediaId:a}}).then(s=>{this.$botNotification.notification("Превью медиа-контента","Отправлено в бота")}).catch(()=>{})},loadMedia(a=0){this.loading=!0,this.$store.dispatch("loadMedia",{dataObject:{search:this.search,needVideo:this.needVideo||!1,needVideoNote:this.needVideoNote||!1,needPhoto:this.needPhoto||!1,needAudio:this.needAudio||!1,needDocument:this.needDocument||!1,needSticker:this.needSticker||!1},page:a}).then(s=>{this.loading=!1,this.media=this.getMedia,this.media_paginate_object=this.getMediaPaginateObject}).catch(()=>{this.loading=!1})}}},q=Object.assign(J,{__name:"BotMediaList",setup(a){return(s,n)=>(i(),o(r,null,[t("div",y,[t("div",v,[_(t("input",{type:"search","onUpdate:modelValue":n[0]||(n[0]=e=>s.search=e),class:"form-control",id:"floatingInput",placeholder:"Поиск файла"},null,512),[[u,s.search]]),k]),s.search?(i(),o("button",{key:0,class:"btn btn-outline-secondary w-100",onClick:n[1]||(n[1]=e=>s.loadMedia(0)),type:"button",id:"button-addon2"},"Найти ")):d("",!0)]),s.media.length>0?(i(),o("div",M,[(i(!0),o(r,null,f(s.media,(e,K)=>(i(),o("div",{class:b(["card border rounded-2 p-0 mb-2",{"border-success":(a.selected||[]).indexOf(e.file_id)!=-1,"border-light":(a.selected||[]).indexOf(e.file_id)==-1}]),onClick:c=>s.selectMedia(e)},[t("div",w,[t("div",P,[e.type==="video"||e.type==="video_note"?(i(),o("i",$)):d("",!0),e.type==="photo"?(i(),o("i",V)):d("",!0),e.type==="audio"?(i(),o("i",C)):d("",!0),e.type==="voice"?(i(),o("i",N)):d("",!0),e.type==="document"?(i(),o("i",O)):d("",!0),e.type==="sticker"?(i(),o("i",x)):d("",!0),t("p",B,[t("strong",null,"#"+l(e.id),1),h(),t("small",null,"тип: "+l(e.type??"Без подписи"),1)])]),t("p",D,l(e.caption??"Без подписи"),1),t("div",I,[t("a",{href:"javascript:void(0)",class:"btn btn-outline-primary px-2",style:{"min-width":"40px"},onClick:c=>s.showPreview(e.id)},[A,h(" посмотреть")],8,S),t("a",{href:"javascript:void(0)",style:{"min-width":"40px"},class:"btn btn-outline-danger px-2 text-danger",onClick:c=>s.remove(e.id)},G,8,L)])])],10,j))),256)),s.media_paginate_object?(i(),g(m,{key:0,onPagination_page:s.nextMedia,pagination:s.media_paginate_object},null,8,["onPagination_page","pagination"])):d("",!0)])):(i(),o("div",T,E))],64))}});export{q as _};
