import{o as i,k as a,n as e,N as r,L as p,p as d,a3 as y,l as h,w as s,Y as m,M as g,F as v,K as k,a9 as x,a1 as C,t as V,O as U}from"./index.es-c4852431.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";const B={data(){return{selected_warning:null,load:!1,need_payments:!1,need_shop:!1,bot:null,need_threads:!1,need_cashback_config:!1,cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],botForm:{title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,description:null,info_link:null,commands:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,cashback_fire_percent:0,cashback_fire_period:0,photos:[],selected_bot_template_id:null,pages:[],warnings:[],amo:null,is_active:!1}}},computed:{filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(n=>!(this.botForm.warnings.findIndex(o=>o.rule_key===n.key)>=0))}},watch:{need_threads:function(n,o){let f=[{title:"Отзывы",key:"reviews",value:null},{title:"Операции с cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=f),this.need_threads&&this.botForm.message_threads&&f.forEach(F=>{this.botForm.message_threads.findIndex(_=>_.key===F.key)===-1&&this.botForm.message_threads.push(F)})},need_payments:function(n,o){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},mounted(){this.loadBotAdminConfig(),window.addEventListener("select-telegram-channel-id",n=>{this.botForm[n.detail.param]=n.detail.channel})},methods:{removeCommands(n){this.botForm.commands.splice(n,1)},addCommands(){this.botForm.commands==null&&(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(n=>{this.bot=n.data,this.botForm={id:this.bot.id||null,title:this.bot.title||null,short_description:this.bot.short_description||null,long_description:this.bot.long_description||null,is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,commands:this.bot.commands||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,image:this.bot.image||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1||10,level_2:this.bot.level_2||0,level_3:this.bot.level_3||0,warnings:this.bot.warnings||[],photos:this.bot.photos||[],amo:this.bot.amo||null,is_active:this.bot.is_active||!1},this.botForm.commands==null&&(this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.vk_shop_link&&(this.need_shop=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0)})},getPhoto(n){return{imageUrl:URL.createObjectURL(n)}},onChangePhotos(n){const o=n.target.files;this.botForm.image=null;for(let f=0;f<o.length;f++)this.botForm.photos.push(o[f])},addItem(n){this.botForm[n].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(n,o){this.botForm[n].splice(o,1)},removePhoto(n){n?this.botForm.photos.splice(n,1):this.botForm.image=null},switchStatus(){this.$store.dispatch("switchBotStatus").then(()=>{this.$botNotification.success("Конструктор ботов","Статус бота успешно изменен!")})},addBot(){let n=new FormData;Object.keys(this.botForm).forEach(o=>{const f=this.botForm[o]||"";typeof f=="object"?n.append(o,JSON.stringify(f)):n.append(o,f)}),this.company&&n.append("company_id",this.company.id);for(let o=0;o<this.botForm.photos.length;o++)n.append("images[]",this.botForm.photos[o]);n.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:n}).then(o=>{this.$emit("callback",o.data),this.$botNotification.success("Конструктор ботов",this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!"),this.bot==null&&(this.botForm={title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,balance:null,tax_per_day:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],warnings:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[],is_active:!1})}).catch(o=>{})},getWarning(n){let o=this.warnings.find(f=>f.key===n);return o||{title:"Не найдено"}},removeWarning(n){this.botForm.warnings.splice(n,1)},removeCashBackConfig(n){this.botForm.cashback_config.splice(n,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},addWarning(){const n=this.selected_warning;this.botForm.warnings.push({rule_key:n.key,rule_value:0,is_active:!0}),this.selected_warning=null},requestChannelId(n){this.$botPages.telegramChannelHelper(n)},openUrl(n){this.tg.openLink(n)}}},q={class:"card card-style bg-1",style:{height:"330px"}},P={key:0,class:"card-center"},S={class:"w-100 d-flex justify-content-center p-3"},W={class:"object-cover",style:{width:"100px","border-radius":"50%"},alt:""},I={class:"color-white font-700 text-center mb-2"},L={class:"color-white text-center opacity-60 mt-n1 my-1"},M={href:"#",class:"color-white"},N=e("i",{class:"fa-solid fa-sack-dollar"},null,-1),z={class:"color-white text-center opacity-60 mt-n1 my-1"},D=e("i",{class:"fa-solid fa-hand-holding-dollar"},null,-1),E={class:"color-white text-center opacity-60 mt-n1 my-1"},O=e("i",{class:"fa-regular fa-calendar-days"},null,-1),A={class:"w-100 d-flex justify-content-center py-4"},R={class:"custom-control ios-switch"},T=e("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1),H={key:0,class:"ml-5 text-white"},J={key:1,class:"ml-5 text-white"},K={key:1,class:"card-center"},Y=e("p",null,"Загружаем данные бота",-1),G=e("div",{class:"d-flex justify-content-center w-100"},[e("div",{class:"spinner-border color-orange-dark",role:"status"},[e("span",{class:"sr-only"},"Загрузка...")])],-1),Q=[Y,G],X=e("div",{class:"card-overlay bg-black opacity-70"},null,-1),Z={key:0,class:"content"},$={class:"mb-0"},ee={class:"mb-2"},te={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-domain"},oe=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),le=e("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),se=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),ne=e("div",null,"Нужно ",-1),ie={key:0},ae={class:"mb-2"},re={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center flex-wrap",id:"bot-token"},ce=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),de=e("div",null,"Взять из BotFater при создании бота! Длинная нечитаемая подсвеченная строка! ",-1),_e=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),me=e("div",null,"Нужно ",-1),be={class:"mb-2"},he=e("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-token-dev"},"Токен бота (для тестирования)",-1),ue={class:"mb-2"},pe={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-title"},fe=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ge=e("div",null,"Имя бота, которая отображается у всех пользователей в боте",-1),ve={class:"mb-2"},ke={class:"d-flex justify-content-between flex-wrap"},ye={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-short-description"},Fe=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),we=e("div",null,"Описание бота, которое отобразится при переходе в бота по ссылке",-1),xe={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Ce={class:"mb-2"},Ve={class:"d-flex justify-content-between flex-wrap"},Ue={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-short-description"},je=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Be=e("div",null,"Данное описание отобразится при первом переходе в бота или после очистки бота пользователем ",-1),qe={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Pe=e("div",{class:"divider divider-large my-4"},null,-1),Se=e("h6",null,"Команды в боте",-1),We={key:0},Ie=e("em",null,"К сожалению, вы еще не добавили ни 1й команды в меню бота",-1),Le=[Ie],Me=e("p",{class:"mb-2"},[e("em",null,[d("Например, команда "),e("b",null,"/start"),d(", а описание к ней: "),e("b",null,"начало работы с системой")])],-1),Ne={class:"mb-2"},ze=["onUpdate:modelValue","aria-describedby"],De={class:"mb-2"},Ee=["onUpdate:modelValue","aria-describedby"],Oe=["onClick"],Ae=e("i",{class:"fa-regular fa-trash-can"},null,-1),Re=e("div",{class:"divider divider-small my-4 bg-highlight"},null,-1),Te={class:"mb-2"},He=e("p",{class:"mb-2"},[e("em",null,[d("Данные команды отображаются в кнопке "),e("b",null,"Меню"),d(" слева от поля ввода в боте")])],-1),Je=e("div",{class:"divider divider-large my-4"},null,-1),Ke={class:"mb-2"},Ye={class:"d-flex justify-content-between align-items-center flex-wrap"},Ge={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center w-100",id:"bot-order-channel"},Qe=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Xe=e("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),Ze=e("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),$e=[Ze],et=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),tt=e("div",null,"Нужно ",-1),ot={class:"mb-2"},lt={class:"d-flex justify-content-between"},st={class:"form-label d-flex justify-content-between mt-2",id:"bot-main-channel"},nt=e("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),it=[nt],at={class:"mb-2"},rt={class:"form-check"},ct=e("label",{class:"form-check-label",for:"need-payments"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),dt={key:1,class:"mb-2"},_t=e("p",{class:"mb-2 font-italic"},[d("Для того, чтоб узнать идентификатор топика в группе впишите в чат "),e("strong",null,'"Мой id"')],-1),mt={class:"list-group"},bt={class:"list-group-item"},ht={class:"mb-0"},ut=["onUpdate:modelValue"],pt={key:0,class:"mb-0"},ft={class:"mb-2"},gt={class:"d-flex justify-content-between flex-wrap"},vt={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-description"},kt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),yt=e("div",null,"Отобразится пользователю при первом запуске",-1),Ft=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),wt=e("div",null,"Нужно ",-1),xt={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Ct={class:"mb-2"},Vt={class:"d-flex justify-content-between flex-wrap"},Ut={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-description"},jt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Bt=e("div",null,'Для меню "О Боте"',-1),qt=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Pt=e("div",null,"Нужно ",-1),St={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Wt={class:"mb-2"},It={class:"d-flex justify-content-between flex-wrap"},Lt={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-maintenance-message"},Mt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Nt=e("div",null,'Для меню "О Боте"',-1),zt=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Dt=e("div",null,"Нужно ",-1),Et={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Ot={class:"mb-2"},At={class:"form-label d-flex justify-content-between align-items-center mt-2",id:"bot-level-1"},Rt=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Tt=e("div",null,"Нужно ",-1),Ht={class:"mb-2"},Jt=e("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),Kt={class:"mb-2"},Yt=e("label",{class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),Gt={class:"mb-2"},Qt=e("label",{class:"form-label",id:"cashback-fired-period"},"Период сгорания CashBack",-1),Xt=["value"],Zt={key:0,class:"mb-3"},$t=e("label",{class:"form-label",id:"cashback-fired-level"},"Уровень сгорания CashBack, %",-1),eo={class:"mb-2"},to={class:"form-check"},oo=e("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),lo={key:1,class:"mb-2"},so=e("h6",null,"Настройка категорий CashBack-а",-1),no={class:"d-flex justify-content-between align-items-center w-100"},io=e("small",null,"Название категории",-1),ao=["onClick"],ro=e("i",{class:"fa-regular fa-trash-can"},null,-1),co=[ro],_o=["onUpdate:modelValue","aria-describedby"],mo=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),bo={class:"mb-2"},ho={class:"form-group"},uo=e("label",{class:"form-check-label",for:"warning-rules"},[e("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),d(" Правила критических оповещений ")],-1),po=e("option",{value:null},"Не выбрано",-1),fo=["value"],go={class:"card"},vo={class:"m-0"},ko={class:"form-check"},yo=["onUpdate:modelValue","id"],Fo=["for"],wo={key:0},xo={key:1},Co=["onUpdate:modelValue"],Vo=["onClick"],Uo=e("i",{class:"fa-solid fa-trash-can"},null,-1),jo=[Uo],Bo=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),qo={class:"mb-2"},Po={class:"form-check"},So=e("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),Wo={key:2,class:"mb-2"},Io={class:"form-check"},Lo=["value"],Mo=e("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),No={class:"mb-2"},zo={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},Do=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Eo=e("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),Oo=e("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить",-1),Ao={class:"mb-2"},Ro={class:"form-check"},To=e("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),Ho={key:3,class:"mb-2"},Jo={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},Ko=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Yo=e("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Go=e("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать",-1),Qo={class:"mb-2"},Xo={class:"form-label d-flex justify-content-between mt-2",id:"bot-callback-url"},Zo=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),$o=e("div",null,"Ссылка на внешний сервис для обратной связи ",-1),el=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),tl={class:"mb-2"},ol={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},ll=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),sl=e("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),nl=e("a",{target:"_blank",href:"https://telegra.ph"},"Создать",-1),il=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),al=e("h6",null,"Ссылки на соц. сети",-1),rl={class:"d-flex justify-content-between align-items-center w-100"},cl=e("small",null,"Ссылка",-1),dl=["onClick"],_l=e("i",{class:"fa-regular fa-trash-can"},null,-1),ml=[_l],bl=["onUpdate:modelValue","aria-describedby"],hl=["onUpdate:modelValue"],ul=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),pl={class:"d-flex justify-content-between align-items-center"},fl=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),gl=e("div",null,"Нужно ",-1),vl={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},kl={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},yl=e("span",null,"+",-1),Fl={class:"mb-2 img-preview",style:{"margin-right":"10px"}},wl={class:"remove"},xl=["onClick"],Cl=e("i",{class:"fa-regular fa-trash-can"},null,-1),Vl=[Cl],Ul={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},jl={class:"remove"},Bl=e("i",{class:"fa-regular fa-trash-can"},null,-1),ql=[Bl],Pl=["disabled"],Sl={key:1,class:"content"},Wl=e("p",null,"Загружаем данные бота",-1),Il=e("div",{class:"d-flex justify-content-center w-100"},[e("div",{class:"spinner-border color-orange-dark",role:"status"},[e("span",{class:"sr-only"},"Загрузка...")])],-1),Ll=[Wl,Il];function Ml(n,o,f,F,t,_){const b=V("Popper"),w=U("lazy");return i(),a(v,null,[e("div",q,[t.bot?(i(),a("div",P,[e("div",S,[r(e("img",W,null,512),[[w,"/images-by-company-id/"+t.bot.company_id+"/"+t.bot.image]])]),e("h2",I,p(t.bot.bot_domain||"Нет домена"),1),e("p",L,[e("a",M,[N,d(" Баланс "+p(t.bot.balance||"0")+" ₽",1)])]),e("p",z,[D,d(" Тариф "+p(t.bot.tax_per_day||"0")+" ₽/день ",1)]),e("p",E,[O,d(" Дней "+p(t.bot.balance/t.bot.tax_per_day)+" осталось ",1)]),e("div",A,[e("div",R,[r(e("input",{type:"checkbox",onChange:o[0]||(o[0]=(...l)=>_.switchStatus&&_.switchStatus(...l)),"onUpdate:modelValue":o[1]||(o[1]=l=>t.botForm.is_active=l),class:"ios-input",id:"toggle-id-1"},null,544),[[y,t.botForm.is_active]]),T]),t.botForm.is_active?(i(),a("span",H,"Вкл")):(i(),a("span",J,"Выкл"))])])):(i(),a("div",K,Q)),X]),e("form",{onSubmit:o[38]||(o[38]=C((...l)=>_.addBot&&_.addBot(...l),["prevent"])),class:"card card-style"},[t.bot?(i(),a("div",Z,[e("div",$,[e("div",ee,[e("label",te,[e("div",null,[h(b,null,{content:s(()=>[le]),default:s(()=>[oe]),_:1}),d(" Доменное имя бота из BotFather ")]),h(b,null,{content:s(()=>[ne]),default:s(()=>[se]),_:1})]),r(e("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота","onUpdate:modelValue":o[2]||(o[2]=l=>t.botForm.bot_domain=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[m,t.botForm.bot_domain]]),t.botForm.bot_domain?(i(),a("p",ie,[d("Проверить работу бота "),e("a",{href:"javascript:void(0)",onClick:o[3]||(o[3]=l=>_.openUrl("https://t.me/"+t.botForm.bot_domain))},"@"+p(t.botForm.bot_domain),1)])):g("",!0)]),e("div",ae,[e("label",re,[e("div",null,[h(b,null,{content:s(()=>[de]),default:s(()=>[ce]),_:1}),d(" Токен бота ")]),h(b,null,{content:s(()=>[me]),default:s(()=>[_e]),_:1}),e("a",{href:"javascript:void(0)",onClick:o[4]||(o[4]=l=>_.openUrl("https://t.me/botfather")),class:"w-100",target:"_blank"},"Создать нового бота в ТГ")]),r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[5]||(o[5]=l=>t.botForm.bot_token=l),maxlength:"255","aria-describedby":"bot-token",required:""},null,512),[[m,t.botForm.bot_token]])]),e("div",be,[he,r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[6]||(o[6]=l=>t.botForm.bot_token_dev=l),maxlength:"255","aria-describedby":"bot-token-dev"},null,512),[[m,t.botForm.bot_token_dev]])]),e("div",ue,[e("label",pe,[e("div",null,[h(b,null,{content:s(()=>[ge]),default:s(()=>[fe]),_:1}),d(" Отображаемое имя бота ")])]),r(e("input",{type:"text",class:"form-control",placeholder:"Отображаемое имя бота","aria-label":"Отображаемое имя бота","onUpdate:modelValue":o[7]||(o[7]=l=>t.botForm.title=l),maxlength:"64","aria-describedby":"bot-title"},null,512),[[m,t.botForm.title]])]),e("div",ve,[e("div",ke,[e("label",ye,[e("div",null,[h(b,null,{content:s(()=>[we]),default:s(()=>[Fe]),_:1}),d(" Короткое описание бота ")])]),t.botForm.short_description?(i(),a("small",xe," Длина текста "+p(t.botForm.short_description.length)+" / 120",1)):g("",!0)]),r(e("textarea",{class:"form-control font-12",placeholder:"Короткое описание бота","aria-label":"Короткое описание бота","onUpdate:modelValue":o[8]||(o[8]=l=>t.botForm.short_description=l),maxlength:"120",style:{"min-height":"200px"},"aria-describedby":"short-description"},`
                    `,512),[[m,t.botForm.short_description]])]),e("div",Ce,[e("div",Ve,[e("label",Ue,[e("div",null,[h(b,null,{content:s(()=>[Be]),default:s(()=>[je]),_:1}),d(" Длинное описание бота ")])]),t.botForm.long_description?(i(),a("small",qe," Длина текста "+p(t.botForm.long_description.length)+" / 512",1)):g("",!0)]),r(e("textarea",{class:"form-control font-12",placeholder:"Длинное описание бота","aria-label":"Длинное описание бота","onUpdate:modelValue":o[9]||(o[9]=l=>t.botForm.long_description=l),maxlength:"512",style:{"min-height":"200px"},"aria-describedby":"short-description"},`
                    `,512),[[m,t.botForm.long_description]])]),Pe,Se,t.botForm.commands?g("",!0):(i(),a("p",We,Le)),Me,(i(!0),a(v,null,k(t.botForm.commands,(l,c)=>(i(),a("div",{class:"mb-2",key:"commands-"+c},[e("div",Ne,[r(e("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":u=>t.botForm.commands[c].command=u,"aria-describedby":"bot-command-"+c,required:""},null,8,ze),[[m,t.botForm.commands[c].command]])]),e("div",De,[r(e("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255","onUpdate:modelValue":u=>t.botForm.commands[c].description=u,"aria-describedby":"bot-command-description-"+c,required:""},null,8,Ee),[[m,t.botForm.commands[c].description]])]),e("button",{type:"button",onClick:u=>_.removeCommands(c),class:"btn btn-outline-danger w-100"},[Ae,d(" Удалить команду ")],8,Oe),Re]))),128)),e("div",Te,[He,e("button",{type:"button",onClick:o[10]||(o[10]=l=>_.addCommands()),class:"btn btn-success w-100"},"Добавить еще команду ")]),Je,e("div",Ke,[e("div",Ye,[e("label",Ge,[e("div",null,[h(b,null,{content:s(()=>[Xe]),default:s(()=>[Qe]),_:1}),d(" Канал для заказов (id) "),e("span",{onClick:o[11]||(o[11]=l=>_.requestChannelId("order_channel"))},$e)]),h(b,null,{content:s(()=>[tt]),default:s(()=>[et]),_:1})])]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[12]||(o[12]=l=>t.botForm.order_channel=l),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[m,t.botForm.order_channel]])]),e("div",ot,[e("div",lt,[e("label",st,[d("Канал для постов (id,рекламный) "),e("span",{onClick:o[13]||(o[13]=l=>_.requestChannelId("main_channel"))},it)])]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[14]||(o[14]=l=>t.botForm.main_channel=l),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[m,t.botForm.main_channel]])]),e("div",at,[e("div",rt,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[15]||(o[15]=l=>t.need_threads=l),type:"checkbox",id:"need-payments"},null,512),[[y,t.need_threads]]),ct])]),t.need_threads?(i(),a("div",dt,[_t,e("ul",mt,[(i(!0),a(v,null,k(t.botForm.message_threads,(l,c)=>(i(),a("li",bt,[e("p",ht,p(l.title)+" ("+p(l.key)+")",1),r(e("input",{type:"text",class:"form-control",placeholder:"Идентификатор топика","onUpdate:modelValue":u=>t.botForm.message_threads[c].value=u},null,8,ut),[[m,t.botForm.message_threads[c].value]])]))),256))])])):g("",!0)]),t.botForm.bot_token?(i(),a("div",pt,[e("div",ft,[e("div",gt,[e("label",vt,[e("div",null,[h(b,null,{content:s(()=>[yt]),default:s(()=>[kt]),_:1}),d(" Приветственное сообщение ")]),h(b,null,{content:s(()=>[wt]),default:s(()=>[Ft]),_:1})]),t.botForm.welcome_message?(i(),a("small",xt," Длина текста "+p(t.botForm.welcome_message.length),1)):g("",!0)]),r(e("textarea",{class:"form-control font-12",placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":o[16]||(o[16]=l=>t.botForm.welcome_message=l),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[m,t.botForm.welcome_message]])]),e("div",Ct,[e("div",Vt,[e("label",Ut,[e("div",null,[h(b,null,{content:s(()=>[Bt]),default:s(()=>[jt]),_:1}),d(" Описание бота ")]),h(b,null,{content:s(()=>[Pt]),default:s(()=>[qt]),_:1})]),t.botForm.description?(i(),a("small",St," Длина текста "+p(t.botForm.description.length)+" / 255",1)):g("",!0)]),r(e("textarea",{class:"form-control font-12",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":o[17]||(o[17]=l=>t.botForm.description=l),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[m,t.botForm.description]])]),e("div",Wt,[e("div",It,[e("label",Lt,[e("div",null,[h(b,null,{content:s(()=>[Nt]),default:s(()=>[Mt]),_:1}),d(" Режим тех. работ ")]),h(b,null,{content:s(()=>[Dt]),default:s(()=>[zt]),_:1})]),t.botForm.maintenance_message?(i(),a("small",Et," Длина текста "+p(t.botForm.maintenance_message.length)+" / 255 ",1)):g("",!0)]),r(e("textarea",{class:"form-control font-12",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":o[18]||(o[18]=l=>t.botForm.maintenance_message=l),maxlength:"255",style:{"min-height":"200px"},"aria-describedby":"bot-maintenance-message",required:""},`
                    `,512),[[m,t.botForm.maintenance_message]])]),e("div",Ot,[e("label",At,[d(" Уровень 1 CashBack, % "),h(b,null,{content:s(()=>[Tt]),default:s(()=>[Rt]),_:1})]),r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[19]||(o[19]=l=>t.botForm.level_1=l),min:"0","aria-describedby":"bot-level-1",required:""},null,512),[[m,t.botForm.level_1]])]),e("div",Ht,[Jt,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[20]||(o[20]=l=>t.botForm.level_2=l),min:"0","aria-describedby":"bot-level-2"},null,512),[[m,t.botForm.level_2]])]),e("div",Kt,[Yt,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[21]||(o[21]=l=>t.botForm.level_3=l),min:"0","aria-describedby":"bot-level-3"},null,512),[[m,t.botForm.level_3]])]),e("div",Gt,[Qt,r(e("select",{class:"form-control","onUpdate:modelValue":o[22]||(o[22]=l=>t.botForm.cashback_fire_period=l),id:"cashback-fired-period"},[(i(!0),a(v,null,k(t.cashback_fire_periods,l=>(i(),a("option",{value:l.value},p(l.title||"Не указано"),9,Xt))),256))],512),[[x,t.botForm.cashback_fire_period]])]),t.botForm.cashback_fire_period>0?(i(),a("div",Zt,[$t,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания CashBack","onUpdate:modelValue":o[23]||(o[23]=l=>t.botForm.cashback_fire_percent=l),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[m,t.botForm.cashback_fire_percent]])])):g("",!0),e("div",eo,[e("div",to,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[24]||(o[24]=l=>t.need_cashback_config=l),type:"checkbox",id:"need-cashback-config"},null,512),[[y,t.need_cashback_config]]),oo])]),t.need_cashback_config?(i(),a("div",lo,[so,(i(!0),a(v,null,k(t.botForm.cashback_config,(l,c)=>(i(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+c},[e("div",no,[io,e("button",{type:"button",onClick:u=>_.removeCashBackConfig(c),class:"btn btn-link text-danger"},co,8,ao)]),r(e("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":u=>t.botForm.cashback_config[c].title=u,"aria-describedby":"bot-cashback-config-"+c,required:""},null,8,_o),[[m,t.botForm.cashback_config[c].title]])]))),128)),e("button",{type:"button",onClick:o[25]||(o[25]=l=>_.addCashBackConfig()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще категорию "),mo])):g("",!0),e("div",bo,[e("div",ho,[uo,r(e("select",{class:"form-control","onUpdate:modelValue":o[26]||(o[26]=l=>t.selected_warning=l),onChange:o[27]||(o[27]=(...l)=>_.addWarning&&_.addWarning(...l)),id:"warning-rules"},[po,(i(!0),a(v,null,k(_.filteredWarnings,l=>(i(),a("option",{value:l},p(l.title),9,fo))),256))],544),[[x,t.selected_warning]])]),(i(!0),a(v,null,k(t.botForm.warnings,(l,c)=>(i(),a("div",go,[e("p",vo,p(_.getWarning(l.rule_key).title||"Не найдено"),1),e("div",ko,[r(e("input",{class:"form-check-input","onUpdate:modelValue":u=>t.botForm.warnings[c].is_active=u,type:"checkbox",id:"warning-is-active-"+c},null,8,yo),[[y,t.botForm.warnings[c].is_active]]),e("label",{class:"form-check-label",for:"warning-is-active-"+c},[t.botForm.warnings[c].is_active?(i(),a("span",wo,"Вкл")):(i(),a("span",xo,"Выкл"))],8,Fo)]),r(e("input",{type:"number",class:"form-control mb-2",placeholder:"Значение","onUpdate:modelValue":u=>t.botForm.warnings[c].rule_value=u,min:"0","aria-describedby":"bot-level-3"},null,8,Co),[[m,t.botForm.warnings[c].rule_value]]),e("button",{onClick:u=>_.removeWarning(c),type:"button",class:"btn btn-outline-danger"},jo,8,Vo),Bo]))),256))]),e("div",qo,[e("div",Po,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[28]||(o[28]=l=>t.need_payments=l),type:"checkbox",id:"need-payments"},null,512),[[y,t.need_payments]]),So])]),t.need_payments?(i(),a("div",Wo,[e("div",Io,[r(e("input",{class:"form-check-input",type:"checkbox",value:t.botForm.auto_cashback_on_payments,"onUpdate:modelValue":o[29]||(o[29]=l=>t.botForm.auto_cashback_on_payments=l),id:"bot-auto-cashback-on-payments"},null,8,Lo),[[y,t.botForm.auto_cashback_on_payments]]),Mo]),e("div",No,[e("label",zo,[e("div",null,[h(b,null,{content:s(()=>[Eo]),default:s(()=>[Do]),_:1}),d(" Токен платежной системы ")]),Oo]),r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"уровень CashBack","onUpdate:modelValue":o[30]||(o[30]=l=>t.botForm.payment_provider_token=l),"aria-describedby":"bot-level-3"},null,512),[[m,t.botForm.payment_provider_token]])])])):g("",!0),e("div",Ao,[e("div",Ro,[r(e("input",{class:"form-check-input","onUpdate:modelValue":o[31]||(o[31]=l=>t.need_shop=l),type:"checkbox",id:"need-shop"},null,512),[[y,t.need_shop]]),To])]),t.need_shop?(i(),a("div",Ho,[e("label",Jo,[e("div",null,[h(b,null,{content:s(()=>[Yo]),default:s(()=>[Ko]),_:1}),d(" ВК-группа ")]),Go]),r(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[32]||(o[32]=l=>t.botForm.vk_shop_link=l),"aria-describedby":"vk_shop_link"},null,512),[[m,t.botForm.vk_shop_link]])])):g("",!0),e("div",Qo,[e("label",Xo,[e("div",null,[h(b,null,{content:s(()=>[$o]),default:s(()=>[Zo]),_:1}),d(" ВК-группа ")])]),r(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"Ссылка на внешний сервис","onUpdate:modelValue":o[33]||(o[33]=l=>t.botForm.callback_link=l),"aria-describedby":"callback_link"},null,512),[[m,t.botForm.callback_link]])]),el,e("div",tl,[e("label",ol,[e("div",null,[h(b,null,{content:s(()=>[sl]),default:s(()=>[ll]),_:1}),d(" Информационная ссылка ")]),nl]),r(e("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":o[34]||(o[34]=l=>t.botForm.info_link=l),"aria-describedby":"bot-info-link"},null,512),[[m,t.botForm.info_link]])]),il,al,(i(!0),a(v,null,k(t.botForm.social_links,(l,c)=>(i(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+c},[e("div",rl,[cl,e("button",{type:"button",onClick:u=>_.removeItem("social_links",c),class:"btn btn-link text-danger"},ml,8,dl)]),r(e("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255","onUpdate:modelValue":u=>t.botForm.social_links[c].title=u,"aria-describedby":"bot-social-link-"+c,required:""},null,8,bl),[[m,t.botForm.social_links[c].title]]),r(e("input",{type:"text",class:"form-control mb-2",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":u=>t.botForm.social_links[c].url=u},null,8,hl),[[m,t.botForm.social_links[c].url]])]))),128)),e("button",{type:"button",onClick:o[35]||(o[35]=l=>_.addSocialLinks()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще ссылку "),ul,e("h6",pl,[d("Аватар для бота "),h(b,null,{content:s(()=>[gl]),default:s(()=>[fl]),_:1})]),e("div",vl,[e("label",kl,[yl,e("input",{type:"file",id:"bot-photos",multiple:"",accept:"image/*",onChange:o[36]||(o[36]=(...l)=>_.onChangePhotos&&_.onChangePhotos(...l)),style:{display:"none"}},null,32)]),t.botForm.photos?(i(!0),a(v,{key:0},k(t.botForm.photos,(l,c)=>(i(),a("div",Fl,[r(e("img",null,null,512),[[w,_.getPhoto(l).imageUrl]]),e("div",wl,[e("a",{onClick:u=>_.removePhoto(c)},Vl,8,xl)])]))),256)):(i(),a("div",Ul,[r(e("img",null,null,512),[[w,"/images-by-bot-id/"+t.bot.id+"/"+t.botForm.image]]),e("div",jl,[e("a",{onClick:o[37]||(o[37]=l=>_.removePhoto())},ql)])]))]),e("button",{disabled:!t.botForm.bot_token,type:"submit",class:"btn btn-m btn-full mb-0 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Сохранить настройки ",8,Pl)])):g("",!0)])):(i(),a("div",Sl,Ll))],32)],64)}const Dl=j(B,[["render",Ml]]);export{Dl as default};
