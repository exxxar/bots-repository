import{o as r,j as c,l as t,a0 as a,M as l,W as _,K as m,n as d}from"./index.es-db843bab.js";import{_ as p}from"./_plugin-vue_export-helper-c27b6911.js";const u={name:"App",data(){return{spent_time_counter:0,is_requested:!1,promocodeForm:{code:null}}},mounted(){localStorage.getItem("cashman_promocode_activate_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_promocode_activate_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_promocode_activate_counter",this.spent_time_counter)},1e3)},submit(){this.startTimer(),this.$store.dispatch("activatePromocode",{promocodeForm:this.promocodeForm}).then(s=>{this.$notify({title:"Промокод",text:"Промокод успешно активирован!",type:"success"}),this.promocodeForm.code=null}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка активации промокода!",type:"error"})})}}},h={class:"container py-3"},f={class:"row"},v={class:"col-12"},b={class:"card"},y={class:"card-body"},x=t("h5",{class:"text-center fw-bold my-3"},"Приветствуем!",-1),g=t("p",{class:"text-center fst-italic"}," У вас есть промокод? Отлично! Активируйте его прямо сейчас и наслаждайтесь эксклюзивными преимуществами! ",-1),I={class:"form-floating mb-3"},w=t("label",{for:"floatingInput"},[t("i",{class:"input-icon fa-solid fa-terminal"}),d(" Ваш промокод")],-1),F=["disabled"],S={key:0,class:"color-white"},T={key:1,class:"color-white"};function k(s,e,q,M,o,n){return r(),c("div",h,[t("div",f,[t("div",v,[t("div",b,[t("div",y,[x,g,t("form",{onSubmit:e[1]||(e[1]=a((...i)=>n.submit&&n.submit(...i),["prevent"]))},[t("div",I,[l(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>o.promocodeForm.code=i),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[_,o.promocodeForm.code]]),w]),t("button",{type:"submit",disabled:o.spent_time_counter>0,class:"btn w-100 btn-primary mb-2 p-3"},[o.spent_time_counter<=0?(r(),c("span",S,"Активировать промокод")):(r(),c("span",T,"Осталось ждать "+m(o.spent_time_counter)+" сек.",1))],8,F)],32)])])])])])}const V=p(u,[["render",k]]);export{V as default};
