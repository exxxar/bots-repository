import{o as i,k as a,n as e,N as s,L as h,p as c,a3 as y,a1 as B,F as f,a0 as F,a7 as w,Y as _,M as p,K as k,l as g,w as m,a9 as V,H as q,t as U,O as P}from"./index.es-c4852431.js";import{_ as S}from"./_plugin-vue_export-helper-c27b6911.js";const W={data(){return{tab:0,selected_warning:null,load:!1,need_payments:!1,need_shop:!1,bot:null,need_threads:!1,need_cashback_config:!1,cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],botForm:{title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,vk_shop_link:null,callback_link:null,balance:null,tax_per_day:null,welcome_message:null,image:null,description:null,info_link:null,commands:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,cashback_fire_percent:0,cashback_fire_period:0,photos:[],selected_bot_template_id:null,pages:[],warnings:[],amo:null,is_active:!1}}},computed:{filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(n=>!(this.botForm.warnings.findIndex(o=>o.rule_key===n.key)>=0))}},watch:{need_threads:function(n,o){let u=[{title:"Отзывы",key:"reviews",value:null},{title:"Операции с cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=u),this.need_threads&&this.botForm.message_threads&&u.forEach(x=>{this.botForm.message_threads.findIndex(d=>d.key===x.key)===-1&&this.botForm.message_threads.push(x)})},need_payments:function(n,o){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},mounted(){this.loadBotAdminConfig(),window.addEventListener("select-telegram-channel-id",n=>{this.botForm[n.detail.param]=n.detail.channel})},methods:{removeCommands(n){this.botForm.commands.splice(n,1)},addCommands(){this.botForm.commands==null&&(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null})},loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(n=>{this.bot=n.data,this.botForm={id:this.bot.id||null,title:this.bot.title||null,short_description:this.bot.short_description||null,long_description:this.bot.long_description||null,is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,commands:this.bot.commands||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,image:this.bot.image||null,description:this.bot.description||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1||10,level_2:this.bot.level_2||0,level_3:this.bot.level_3||0,warnings:this.bot.warnings||[],photos:this.bot.photos||[],amo:this.bot.amo||null,is_active:this.bot.is_active||!1},this.botForm.commands==null&&(this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]),this.botForm.payment_provider_token&&(this.need_payments=!0),this.botForm.vk_shop_link&&(this.need_shop=!0),this.botForm.cashback_config&&(this.need_cashback_config=!0)})},getPhoto(n){return{imageUrl:URL.createObjectURL(n)}},onChangePhotos(n){const o=n.target.files;this.botForm.image=null;for(let u=0;u<o.length;u++)this.botForm.photos.push(o[u])},addItem(n){this.botForm[n].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(n,o){this.botForm[n].splice(o,1)},removePhoto(n){n?this.botForm.photos.splice(n,1):this.botForm.image=null},switchStatus(){this.$store.dispatch("switchBotStatus").then(()=>{this.$notify({title:"Конструктор ботов",text:"Статус бота успешно изменен!",type:"success"})})},addBot(){let n=new FormData;Object.keys(this.botForm).forEach(o=>{const u=this.botForm[o]||"";typeof u=="object"?n.append(o,JSON.stringify(u)):n.append(o,u)}),this.company&&n.append("company_id",this.company.id);for(let o=0;o<this.botForm.photos.length;o++)n.append("images[]",this.botForm.photos[o]);n.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:n}).then(o=>{this.$emit("callback",o.data),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.bot==null&&(this.botForm={title:null,short_description:null,long_description:null,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,main_channel:null,balance:null,tax_per_day:null,cashback_fire_percent:0,cashback_fire_period:0,image:null,description:null,info_link:null,social_links:[],warnings:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],selected_bot_template_id:null,pages:[],is_active:!1})}).catch(o=>{})},getWarning(n){let o=this.warnings.find(u=>u.key===n);return o||{title:"Не найдено"}},removeWarning(n){this.botForm.warnings.splice(n,1)},removeCashBackConfig(n){this.botForm.cashback_config.splice(n,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},addWarning(){const n=this.selected_warning;this.botForm.warnings.push({rule_key:n.key,rule_value:0,is_active:!0}),this.selected_warning=null},requestChannelId(n){this.$botPages.telegramChannelHelper(n)},openUrl(n){this.tg.openLink(n)}}},z={class:"container py-3"},I={class:"row"},L={class:"col-12"},M={class:"card",style:{height:"330px"}},N={key:0,class:"card-body"},D={class:"w-100 d-flex justify-content-center p-3"},E={class:"object-cover",style:{width:"100px","border-radius":"50%"},alt:""},O={class:"color-white font-700 text-center mb-2"},A={class:"color-white text-center opacity-60 mt-n1 my-1"},H=e("i",{class:"fa-solid fa-sack-dollar"},null,-1),R={class:"color-white text-center opacity-60 mt-n1 my-1"},T=e("i",{class:"fa-solid fa-hand-holding-dollar"},null,-1),J={class:"color-white text-center opacity-60 mt-n1 my-1"},K=e("i",{class:"fa-regular fa-calendar-days"},null,-1),Y={class:"w-100 d-flex justify-content-center py-4"},G={class:"form-check form-switch"},Q={class:"form-check-label",for:"toggle-id-1"},X={key:0,class:"ml-5"},Z={key:1,class:"ml-5"},$={key:1,class:"card-body"},ee=e("p",null,"Загружаем данные бота",-1),te=e("div",{class:"d-flex justify-content-center w-100"},[e("div",{class:"spinner-border color-orange-dark",role:"status"},[e("span",{class:"sr-only"},"Загрузка...")])],-1),oe=[ee,te],le=e("div",{class:"card-overlay bg-black opacity-70"},null,-1),se={class:"nav nav-tabs justify-content-center my-2"},ne={class:"nav-item"},ie={class:"nav-item"},ae={class:"nav-item"},re={class:"nav-item"},ce=e("div",{class:"alert alert-light my-2"},' Строго взять из BotFather! ТО что при создании с окончанием на "bot" ',-1),de={class:"form-floating mb-2"},_e=e("label",{id:"bot-domain"}," Доменное имя бота из BotFather ",-1),me={key:0},be={class:"alert alert-light"},he={class:"form-floating mb-2"},ue=e("label",{id:"bot-token"}," Токен бота ",-1),pe={class:"form-floating mb-2"},fe=e("label",{id:"bot-token-dev"},"Токен бота (для тестирования)",-1),ve=e("div",{class:"alert alert-light"}," Имя бота, которая отображается у всех пользователей в боте ",-1),ge={class:"form-floating mb-2"},ke=e("label",{id:"bot-title"}," Отображаемое имя бота ",-1),ye=e("div",{class:"alert alert-info"}," Описание бота, которое отобразится при переходе в бота по ссылке ",-1),Fe={class:"form-floating mb-2"},we={id:"bot-short-description"},xe={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Ce={class:"form-floating mb-2"},Ve={id:"bot-short-description"},Ue={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},je=e("h6",null,"Команды в боте",-1),Be={key:0},qe=e("em",null,"К сожалению, вы еще не добавили ни 1й команды в меню бота",-1),Pe=[qe],Se=e("p",{class:"mb-2"},[e("em",null,[c("Например, команда "),e("b",null,"/start"),c(", а описание к ней: "),e("b",null,"начало работы с системой")])],-1),We={class:"mb-2"},ze=["onUpdate:modelValue","aria-describedby"],Ie={class:"mb-2"},Le=["onUpdate:modelValue","aria-describedby"],Me=["onClick"],Ne=e("i",{class:"fa-regular fa-trash-can"},null,-1),De=e("div",{class:"divider divider-small my-4 bg-highlight"},null,-1),Ee={class:"mb-2"},Oe=e("p",{class:"mb-2"},[e("em",null,[c("Данные команды отображаются в кнопке "),e("b",null,"Меню"),c(" слева от поля ввода в боте")])],-1),Ae={class:"mb-2"},He={class:"d-flex justify-content-between align-items-center flex-wrap"},Re={class:"form-label d-flex justify-content-between mt-2 d-flex align-items-center w-100",id:"bot-order-channel"},Te=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Je=e("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),Ke=e("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),Ye=[Ke],Ge=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Qe=e("div",null,"Нужно ",-1),Xe={class:"mb-2"},Ze={class:"d-flex justify-content-between"},$e={class:"form-label d-flex justify-content-between mt-2",id:"bot-main-channel"},et=e("i",{class:"fa-brands fa-telegram ml-2 color-blue2-dark"},null,-1),tt=[et],ot={class:"mb-2"},lt={class:"form-check"},st=e("label",{class:"form-check-label",for:"need-payments"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),nt={key:0,class:"mb-2"},it=e("p",{class:"mb-2 font-italic"},[c("Для того, чтоб узнать идентификатор топика в группе впишите в чат "),e("strong",null,'"Мой id"')],-1),at={class:"list-group"},rt={class:"list-group-item"},ct={class:"mb-0"},dt=["onUpdate:modelValue"],_t={key:1,class:"mb-0"},mt={class:"mb-2"},bt={class:"d-flex justify-content-between flex-wrap"},ht={class:"form-label d-flex justify-content-between align-items-center mb-0 flex-wrap w-100",id:"bot-description"},ut=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),pt=e("div",null,"Отобразится пользователю при первом запуске",-1),ft=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),vt=e("div",null,"Нужно ",-1),gt={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},kt={class:"mb-2"},yt={class:"d-flex justify-content-between flex-wrap"},Ft={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-description"},wt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),xt=e("div",null,'Для меню "О Боте"',-1),Ct=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),Vt=e("div",null,"Нужно ",-1),Ut={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},jt={class:"mb-2"},Bt={class:"d-flex justify-content-between flex-wrap"},qt={class:"form-label d-flex justify-content-between align-items-center w-100 mb-0",id:"bot-maintenance-message"},Pt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),St=e("div",null,'Для меню "О Боте"',-1),Wt=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),zt=e("div",null,"Нужно ",-1),It={key:0,class:"text-gray-400 w-100",style:{"font-size":"10px"}},Lt={class:"mb-2"},Mt={class:"form-label d-flex justify-content-between mt-2",id:"bot-callback-url"},Nt=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Dt=e("div",null,"Ссылка на внешний сервис для обратной связи ",-1),Et=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Ot={class:"mb-2"},At={class:"form-label d-flex justify-content-between mt-2",id:"bot-level-3"},Ht=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Rt=e("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),Tt=e("a",{target:"_blank",href:"https://telegra.ph"},"Создать",-1),Jt=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Kt=e("h6",null,"Ссылки на соц. сети",-1),Yt={class:"d-flex justify-content-between align-items-center w-100"},Gt=e("small",null,"Ссылка",-1),Qt=["onClick"],Xt=e("i",{class:"fa-regular fa-trash-can"},null,-1),Zt=[Xt],$t=["onUpdate:modelValue","aria-describedby"],eo=["onUpdate:modelValue"],to=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),oo={class:"d-flex justify-content-between align-items-center"},lo=e("i",{class:"fa-solid font-10 fa-star color-red2-dark"},null,-1),so=e("div",null,"Нужно ",-1),no={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},io={for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},ao=e("span",null,"+",-1),ro={class:"mb-2 img-preview",style:{"margin-right":"10px"}},co={class:"remove"},_o=["onClick"],mo=e("i",{class:"fa-regular fa-trash-can"},null,-1),bo=[mo],ho={key:1,class:"mb-2 img-preview",style:{"margin-right":"10px"}},uo={class:"remove"},po=e("i",{class:"fa-regular fa-trash-can"},null,-1),fo=[po],vo={class:"form-floating mb-2"},go=e("label",{id:"bot-level-1"}," Уровень баллов #1 , % ",-1),ko={class:"form-floating mb-2"},yo=e("label",{id:"bot-level-2"},"Уровень баллов #2, %",-1),Fo={class:"form-floating mb-2"},wo=e("label",{id:"bot-level-3"},"Уровень баллов #3, %",-1),xo={class:"form-floating mb-2"},Co=["value"],Vo=e("label",{id:"cashback-fired-period"},"Период сгорания баллов",-1),Uo={key:0,class:"form-floating mb-2"},jo=e("label",{id:"cashback-fired-level"},"Уровень сгорания баллов, %",-1),Bo={class:"form-check mb-2"},qo=e("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить баллы по категориям ",-1),Po={key:1,class:"mb-2"},So=e("h6",null,"Настройка категорий баллов",-1),Wo={class:"form-floating"},zo=["onUpdate:modelValue","aria-describedby"],Io=e("label",{for:""},"Название категории",-1),Lo={class:"input-group-text",id:"basic-addon1"},Mo=["onClick"],No=e("i",{class:"fa-regular fa-trash-can"},null,-1),Do=[No],Eo={class:"form-floating mb-2"},Oo=e("option",{value:null},"Не выбрано",-1),Ao=["value"],Ho=e("label",{class:"form-check-label",for:"warning-rules"},[e("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),c(" Правила критических оповещений ")],-1),Ro={class:"form-check form-switch"},To=["onUpdate:modelValue","id"],Jo=["for"],Ko={key:0,class:"fw-bold small text-primary"},Yo={key:1,class:"fw-bold small text-primary"},Go={class:"input-group mb-2"},Qo={class:"form-floating"},Xo=["onUpdate:modelValue"],Zo={class:"input-group-text",id:"basic-addon1"},$o=["onClick"],el=e("i",{class:"fa-solid fa-trash-can"},null,-1),tl=[el],ol={class:"form-check form-switch mb-2"},ll=e("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему",-1),sl={class:"form-check form-switch"},nl=["value"],il=e("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),al=e("div",{class:"alert alert-light mb-2"},[c(" Если в боте планируется оплата, то необходимо через BotFather "),e("a",{href:"https://t.me/botfather",target:"_blank"},"привязать нужную"),c(" платежную систему и указать в данном поле полученный токен ")],-1),rl={class:"form-floating mb-2"},cl=e("label",{for:""},"Токен платежной системы",-1),dl={class:"form-check form-switch"},_l=e("label",{class:"form-check-label",for:"need-shop"},"Необходимо интегрировать магазин в бота",-1),ml=e("div",{class:"alert alert-light mb-2"},[c(" Ссылка на страницу ВК с товарами для вашего магазина в боте. "),e("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),bl={class:"form-floating mb-2"},hl=e("label",{for:"vk_shop_link"}," ВК-группа ",-1),ul=e("p",null,"Загружаем данные бота",-1),pl=e("div",{class:"d-flex justify-content-center w-100"},[e("div",{class:"spinner-border color-orange-dark",role:"status"},[e("span",{class:"sr-only"},"Загрузка...")])],-1),fl={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},vl=["disabled"];function gl(n,o,u,x,t,d){const v=U("Popper"),j=U("tempalte"),C=P("lazy");return i(),a("div",z,[e("div",I,[e("div",L,[e("div",M,[t.bot?(i(),a("div",N,[e("div",D,[s(e("img",E,null,512),[[C,"/images-by-company-id/"+t.bot.company_id+"/"+t.bot.image]])]),e("h2",O,h(t.bot.bot_domain||"Нет домена"),1),e("p",A,[H,c(" Баланс "+h(t.bot.balance||"0")+" ₽ ",1)]),e("p",R,[T,c(" Тариф "+h(t.bot.tax_per_day||"0")+" ₽/день ",1)]),e("p",J,[K,c(" Дней "+h(t.bot.balance/t.bot.tax_per_day)+" осталось ",1)]),e("div",Y,[e("div",G,[s(e("input",{class:"form-check-input",onChange:o[0]||(o[0]=(...l)=>d.switchStatus&&d.switchStatus(...l)),"onUpdate:modelValue":o[1]||(o[1]=l=>t.botForm.is_active=l),type:"checkbox",role:"switch",id:"toggle-id-1"},null,544),[[y,t.botForm.is_active]]),e("label",Q,[t.botForm.is_active?(i(),a("span",X,"Вкл")):(i(),a("span",Z,"Выкл"))])])])])):(i(),a("div",$,oe)),le]),e("form",{onSubmit:o[42]||(o[42]=B((...l)=>d.addBot&&d.addBot(...l),["prevent"]))},[t.bot?(i(),a(f,{key:0},[e("ul",se,[e("li",ne,[e("a",{onClick:o[2]||(o[2]=l=>t.tab=0),class:F([{active:t.tab===0},"nav-link"]),href:"javascript:void(0)","aria-current":"page"},"Основное",2)]),e("li",ie,[e("a",{class:F(["nav-link",{active:t.tab===1}]),onClick:o[3]||(o[3]=l=>t.tab=1),href:"javascript:void(0)"},"Команды",2)]),e("li",ae,[e("a",{class:F(["nav-link",{active:t.tab===2}]),onClick:o[4]||(o[4]=l=>t.tab=2),href:"javascript:void(0)"},"Каналы",2)]),e("li",re,[e("a",{class:F(["nav-link",{active:t.tab===3}]),onClick:o[5]||(o[5]=l=>t.tab=3),href:"javascript:void(0)"},"CashBack и платежные системы",2)])]),s(e("div",null,[ce,e("div",de,[s(e("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота","onUpdate:modelValue":o[6]||(o[6]=l=>t.botForm.bot_domain=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[_,t.botForm.bot_domain]]),_e]),t.botForm.bot_domain?(i(),a("p",me,[c("Проверить работу бота "),e("a",{href:"javascript:void(0)",onClick:o[7]||(o[7]=l=>d.openUrl("https://t.me/"+t.botForm.bot_domain))},"@"+h(t.botForm.bot_domain),1)])):p("",!0),e("div",be,[c(" Взять из BotFater при создании бота! Длинная нечитаемая подсвеченная строка! "),e("a",{href:"javascript:void(0)",onClick:o[8]||(o[8]=l=>d.openUrl("https://t.me/botfather")),class:"w-100",target:"_blank"},"Создать нового бота в ТГ"),c(" или получить тоукен существюущего можно по ссылке. ")]),e("div",he,[s(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[9]||(o[9]=l=>t.botForm.bot_token=l),maxlength:"255","aria-describedby":"bot-token",required:""},null,512),[[_,t.botForm.bot_token]]),ue]),e("div",pe,[s(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[10]||(o[10]=l=>t.botForm.bot_token_dev=l),maxlength:"255","aria-describedby":"bot-token-dev"},null,512),[[_,t.botForm.bot_token_dev]]),fe]),ve,e("div",ge,[s(e("input",{type:"text",class:"form-control",placeholder:"Отображаемое имя бота","aria-label":"Отображаемое имя бота","onUpdate:modelValue":o[11]||(o[11]=l=>t.botForm.title=l),maxlength:"64","aria-describedby":"bot-title"},null,512),[[_,t.botForm.title]]),ke]),ye,e("div",Fe,[s(e("textarea",{class:"form-control font-12",placeholder:"Короткое описание бота","aria-label":"Короткое описание бота","onUpdate:modelValue":o[12]||(o[12]=l=>t.botForm.short_description=l),maxlength:"120",style:{"min-height":"200px"},"aria-describedby":"short-description"},null,512),[[_,t.botForm.short_description]]),e("label",we,[c(" Короткое описание бота "),t.botForm.short_description?(i(),a("small",xe,h(t.botForm.short_description.length)+" / 120",1)):p("",!0)])]),e("div",Ce,[s(e("textarea",{class:"form-control font-12",placeholder:"Длинное описание бота","aria-label":"Длинное описание бота","onUpdate:modelValue":o[13]||(o[13]=l=>t.botForm.long_description=l),maxlength:"512",style:{"min-height":"200px"},"aria-describedby":"short-description"},null,512),[[_,t.botForm.long_description]]),e("label",Ve,[c(" Длинное описание бота "),t.botForm.long_description?(i(),a("small",Ue,h(t.botForm.long_description.length)+" / 512",1)):p("",!0)])])],512),[[w,t.tab===0]]),s(e("div",null,[je,t.botForm.commands?p("",!0):(i(),a("p",Be,Pe)),Se,(i(!0),a(f,null,k(t.botForm.commands,(l,r)=>(i(),a("div",{class:"mb-2",key:"commands-"+r},[e("div",We,[s(e("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255","onUpdate:modelValue":b=>t.botForm.commands[r].command=b,"aria-describedby":"bot-command-"+r,required:""},null,8,ze),[[_,t.botForm.commands[r].command]])]),e("div",Ie,[s(e("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255","onUpdate:modelValue":b=>t.botForm.commands[r].description=b,"aria-describedby":"bot-command-description-"+r,required:""},null,8,Le),[[_,t.botForm.commands[r].description]])]),e("button",{type:"button",onClick:b=>d.removeCommands(r),class:"btn btn-outline-danger w-100"},[Ne,c(" Удалить команду ")],8,Me),De]))),128)),e("div",Ee,[Oe,e("button",{type:"button",onClick:o[14]||(o[14]=l=>d.addCommands()),class:"btn btn-success w-100"},"Добавить еще команду ")])],512),[[w,t.tab===1]]),s(e("div",null,[e("div",Ae,[e("div",He,[e("label",Re,[e("div",null,[g(v,null,{content:m(()=>[Je]),default:m(()=>[Te]),_:1}),c(" Канал для заказов (id) "),e("span",{onClick:o[15]||(o[15]=l=>d.requestChannelId("order_channel"))},Ye)]),g(v,null,{content:m(()=>[Qe]),default:m(()=>[Ge]),_:1})])]),s(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[16]||(o[16]=l=>t.botForm.order_channel=l),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[_,t.botForm.order_channel]])]),e("div",Xe,[e("div",Ze,[e("label",$e,[c("Канал для постов (id,рекламный) "),e("span",{onClick:o[17]||(o[17]=l=>d.requestChannelId("main_channel"))},tt)])]),s(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":o[18]||(o[18]=l=>t.botForm.main_channel=l),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[_,t.botForm.main_channel]])]),e("div",ot,[e("div",lt,[s(e("input",{class:"form-check-input","onUpdate:modelValue":o[19]||(o[19]=l=>t.need_threads=l),type:"checkbox",id:"need-payments"},null,512),[[y,t.need_threads]]),st])]),t.need_threads?(i(),a("div",nt,[it,e("ul",at,[(i(!0),a(f,null,k(t.botForm.message_threads,(l,r)=>(i(),a("li",rt,[e("p",ct,h(l.title)+" ("+h(l.key)+")",1),s(e("input",{type:"text",class:"form-control",placeholder:"Идентификатор топика","onUpdate:modelValue":b=>t.botForm.message_threads[r].value=b},null,8,dt),[[_,t.botForm.message_threads[r].value]])]))),256))])])):p("",!0),t.botForm.bot_token?(i(),a("div",_t,[e("div",mt,[e("div",bt,[e("label",ht,[e("div",null,[g(v,null,{content:m(()=>[pt]),default:m(()=>[ut]),_:1}),c(" Приветственное сообщение ")]),g(v,null,{content:m(()=>[vt]),default:m(()=>[ft]),_:1})]),t.botForm.welcome_message?(i(),a("small",gt," Длина текста "+h(t.botForm.welcome_message.length),1)):p("",!0)]),s(e("textarea",{class:"form-control font-12",placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":o[20]||(o[20]=l=>t.botForm.welcome_message=l),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[_,t.botForm.welcome_message]])]),e("div",kt,[e("div",yt,[e("label",Ft,[e("div",null,[g(v,null,{content:m(()=>[xt]),default:m(()=>[wt]),_:1}),c(" Описание бота ")]),g(v,null,{content:m(()=>[Vt]),default:m(()=>[Ct]),_:1})]),t.botForm.description?(i(),a("small",Ut," Длина текста "+h(t.botForm.description.length)+" / 255",1)):p("",!0)]),s(e("textarea",{class:"form-control font-12",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":o[21]||(o[21]=l=>t.botForm.description=l),style:{"min-height":"200px"},"aria-describedby":"bot-description",required:""},`
                    `,512),[[_,t.botForm.description]])]),e("div",jt,[e("div",Bt,[e("label",qt,[e("div",null,[g(v,null,{content:m(()=>[St]),default:m(()=>[Pt]),_:1}),c(" Режим тех. работ ")]),g(v,null,{content:m(()=>[zt]),default:m(()=>[Wt]),_:1})]),t.botForm.maintenance_message?(i(),a("small",It," Длина текста "+h(t.botForm.maintenance_message.length)+" / 255 ",1)):p("",!0)]),s(e("textarea",{class:"form-control font-12",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":o[22]||(o[22]=l=>t.botForm.maintenance_message=l),maxlength:"255",style:{"min-height":"200px"},"aria-describedby":"bot-maintenance-message",required:""},`
                    `,512),[[_,t.botForm.maintenance_message]])]),e("div",Lt,[e("label",Mt,[e("div",null,[g(v,null,{content:m(()=>[Dt]),default:m(()=>[Nt]),_:1}),c(" ВК-группа ")])]),s(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"Ссылка на внешний сервис","onUpdate:modelValue":o[23]||(o[23]=l=>t.botForm.callback_link=l),"aria-describedby":"callback_link"},null,512),[[_,t.botForm.callback_link]])]),Et,e("div",Ot,[e("label",At,[e("div",null,[g(v,null,{content:m(()=>[Rt]),default:m(()=>[Ht]),_:1}),c(" Информационная ссылка ")]),Tt]),s(e("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":o[24]||(o[24]=l=>t.botForm.info_link=l),"aria-describedby":"bot-info-link"},null,512),[[_,t.botForm.info_link]])]),Jt,Kt,(i(!0),a(f,null,k(t.botForm.social_links,(l,r)=>(i(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+r},[e("div",Yt,[Gt,e("button",{type:"button",onClick:b=>d.removeItem("social_links",r),class:"btn btn-link text-danger"},Zt,8,Qt)]),s(e("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255","onUpdate:modelValue":b=>t.botForm.social_links[r].title=b,"aria-describedby":"bot-social-link-"+r,required:""},null,8,$t),[[_,t.botForm.social_links[r].title]]),s(e("input",{type:"text",class:"form-control mb-2",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255","onUpdate:modelValue":b=>t.botForm.social_links[r].url=b},null,8,eo),[[_,t.botForm.social_links[r].url]])]))),128)),e("button",{type:"button",onClick:o[25]||(o[25]=l=>d.addSocialLinks()),class:"btn btn-border btn-m btn-full mb-2 rounded-sm text-uppercase font-900 border-green1-dark color-green1-dark bg-theme w-100"}," Добавить еще ссылку "),to,e("h6",oo,[c("Аватар для бота "),g(v,null,{content:m(()=>[so]),default:m(()=>[lo]),_:1})]),e("div",no,[e("label",io,[ao,e("input",{type:"file",id:"bot-photos",multiple:"",accept:"image/*",onChange:o[26]||(o[26]=(...l)=>d.onChangePhotos&&d.onChangePhotos(...l)),style:{display:"none"}},null,32)]),t.botForm.photos?(i(!0),a(f,{key:0},k(t.botForm.photos,(l,r)=>(i(),a("div",ro,[s(e("img",null,null,512),[[C,d.getPhoto(l).imageUrl]]),e("div",co,[e("a",{onClick:b=>d.removePhoto(r)},bo,8,_o)])]))),256)):(i(),a("div",ho,[s(e("img",null,null,512),[[C,"/images-by-bot-id/"+t.bot.id+"/"+t.botForm.image]]),e("div",uo,[e("a",{onClick:o[27]||(o[27]=l=>d.removePhoto())},fo)])]))])])):p("",!0)],512),[[w,t.tab===2]]),s(e("div",null,[e("div",vo,[s(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень баллов","onUpdate:modelValue":o[28]||(o[28]=l=>t.botForm.level_1=l),min:"0","aria-describedby":"bot-level-1",required:""},null,512),[[_,t.botForm.level_1]]),go]),e("div",ko,[s(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень баллов","onUpdate:modelValue":o[29]||(o[29]=l=>t.botForm.level_2=l),min:"0","aria-describedby":"bot-level-2"},null,512),[[_,t.botForm.level_2]]),yo]),e("div",Fo,[s(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":o[30]||(o[30]=l=>t.botForm.level_3=l),min:"0","aria-describedby":"bot-level-3"},null,512),[[_,t.botForm.level_3]]),wo]),e("div",xo,[s(e("select",{class:"form-control","onUpdate:modelValue":o[31]||(o[31]=l=>t.botForm.cashback_fire_period=l),id:"cashback-fired-period"},[(i(!0),a(f,null,k(t.cashback_fire_periods,l=>(i(),a("option",{value:l.value},h(l.title||"Не указано"),9,Co))),256))],512),[[V,t.botForm.cashback_fire_period]]),Vo]),t.botForm.cashback_fire_period>0?(i(),a("div",Uo,[s(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания баллов","onUpdate:modelValue":o[32]||(o[32]=l=>t.botForm.cashback_fire_percent=l),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[_,t.botForm.cashback_fire_percent]]),jo])):p("",!0),e("div",Bo,[s(e("input",{class:"form-check-input","onUpdate:modelValue":o[33]||(o[33]=l=>t.need_cashback_config=l),type:"checkbox",id:"need-cashback-config"},null,512),[[y,t.need_cashback_config]]),qo]),t.need_cashback_config?(i(),a("div",Po,[So,(i(!0),a(f,null,k(t.botForm.cashback_config,(l,r)=>(i(),a("div",{key:"social-link"+r,class:"input-group mb-2"},[e("div",Wo,[s(e("input",{type:"text",class:"form-control w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":b=>t.botForm.cashback_config[r].title=b,"aria-describedby":"bot-cashback-config-"+r,required:""},null,8,zo),[[_,t.botForm.cashback_config[r].title]]),Io]),e("span",Lo,[e("button",{type:"button",onClick:b=>d.removeCashBackConfig(r),class:"btn text-danger p-1"},Do,8,Mo)])]))),128)),e("button",{type:"button",onClick:o[34]||(o[34]=l=>d.addCashBackConfig()),class:"btn btn-outline-primary p-3 w-100"}," Добавить еще категорию ")])):p("",!0),e("div",Eo,[s(e("select",{class:"form-control","onUpdate:modelValue":o[35]||(o[35]=l=>t.selected_warning=l),onChange:o[36]||(o[36]=(...l)=>d.addWarning&&d.addWarning(...l)),id:"warning-rules"},[Oo,(i(!0),a(f,null,k(d.filteredWarnings,l=>(i(),a("option",{value:l},h(l.title),9,Ao))),256))],544),[[V,t.selected_warning]]),Ho]),(i(!0),a(f,null,k(t.botForm.warnings,(l,r)=>(i(),a(f,null,[e("div",Ro,[s(e("input",{class:"form-check-input","onUpdate:modelValue":b=>t.botForm.warnings[r].is_active=b,type:"checkbox",role:"switch",id:"warning-is-active-"+r},null,8,To),[[y,t.botForm.warnings[r].is_active]]),e("label",{class:"form-check-label",for:"warning-is-active-"+r},[c(h(d.getWarning(l.rule_key).title||"Не найдено")+" ",1),t.botForm.warnings[r].is_active?(i(),a("span",Ko,"(Вкл)")):(i(),a("span",Yo,"(Выкл)"))],8,Jo)]),e("div",Go,[e("div",Qo,[s(e("input",{type:"number",class:"form-control",placeholder:"Значение","onUpdate:modelValue":b=>t.botForm.warnings[r].rule_value=b,min:"0","aria-describedby":"bot-level-3"},null,8,Xo),[[_,t.botForm.warnings[r].rule_value]])]),e("div",Zo,[e("button",{onClick:b=>d.removeWarning(r),type:"button",class:"btn p-1"},tl,8,$o)])])],64))),256)),e("div",ol,[s(e("input",{class:"form-check-input","onUpdate:modelValue":o[37]||(o[37]=l=>t.need_payments=l),type:"checkbox",role:"switch",id:"need-payments"},null,512),[[y,t.need_payments]]),ll]),t.need_payments?(i(),a(f,{key:2},[e("div",sl,[s(e("input",{class:"form-check-input",value:t.botForm.auto_cashback_on_payments,"onUpdate:modelValue":o[38]||(o[38]=l=>t.botForm.auto_cashback_on_payments=l),type:"checkbox",role:"switch",id:"bot-auto-cashback-on-payments"},null,8,nl),[[y,t.botForm.auto_cashback_on_payments]]),il]),al,e("div",rl,[s(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"уровень CashBack","onUpdate:modelValue":o[39]||(o[39]=l=>t.botForm.payment_provider_token=l),"aria-describedby":"bot-level-3"},null,512),[[_,t.botForm.payment_provider_token]]),cl])],64)):p("",!0),e("div",dl,[s(e("input",{class:"form-check-input","onUpdate:modelValue":o[40]||(o[40]=l=>t.need_shop=l),type:"checkbox",role:"switch",id:"need-shop"},null,512),[[y,t.need_shop]]),_l]),t.need_shop?(i(),a(f,{key:3},[ml,e("div",bl,[s(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":o[41]||(o[41]=l=>t.botForm.vk_shop_link=l),id:"vk_shop_link","aria-describedby":"vk_shop_link"},null,512),[[_,t.botForm.vk_shop_link]]),hl])],64)):p("",!0)],512),[[w,t.tab===3]])],64)):(i(),q(j,{key:1},{default:m(()=>[ul,pl]),_:1})),e("nav",fl,[e("button",{disabled:!t.botForm.bot_token,type:"submit",class:"btn btn-primary p-3 w-100"}," Сохранить настройки ",8,vl)])],32)])])])}const Fl=S(W,[["render",gl]]);export{Fl as default};
