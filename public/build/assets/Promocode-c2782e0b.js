import{o as n,j as r,l as e,a0 as a,M as c,W as l,K as d}from"./index.es-db843bab.js";const m={class:"card card-style"},_={class:"content"},u=e("p",{class:"text-center font-weight-bold mb-0"},"Приветствуем!",-1),p=e("p",{class:"text-center font-italic"}," У вас есть промокод? Отлично! Активируйте его прямо сейчас и наслаждайтесь эксклюзивными преимуществами! ",-1),h={class:"input-style input-style-2 has-icon"},f=e("i",{class:"input-icon fa-solid fa-terminal"},null,-1),b=["disabled"],v={key:0,class:"color-white"},y={key:1,class:"color-white"},g={name:"App",data(){return{spent_time_counter:0,is_requested:!1,promocodeForm:{code:null}}},mounted(){localStorage.getItem("cashman_promocode_activate_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_promocode_activate_counter")))},methods:{startTimer(o){this.spent_time_counter=o!=null?Math.min(o,10):10;let t=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(t),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_promocode_activate_counter",this.spent_time_counter)},1e3)},submit(){this.startTimer(),this.$store.dispatch("activatePromocode",{promocodeForm:this.promocodeForm}).then(o=>{this.$notify({title:"Промокод",text:"Промокод успешно активирован!",type:"success"}),this.promocodeForm.code=null}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка активации промокода!",type:"error"})})}}},F=Object.assign(g,{setup(o){return(t,s)=>(n(),r("div",m,[e("div",_,[u,p,e("form",{onSubmit:s[1]||(s[1]=a((...i)=>t.submit&&t.submit(...i),["prevent"]))},[e("div",h,[f,c(e("input",{class:"form-control",type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>t.promocodeForm.code=i),placeholder:"Ваш промокод",required:""},null,512),[[l,t.promocodeForm.code]])]),e("button",{type:"submit",disabled:t.spent_time_counter>0,class:"btn btn-full btn-sm rounded-l bg-highlight font-800 text-uppercase w-100 mb-2"},[t.spent_time_counter<=0?(n(),r("span",v,"Активировать промокод")):(n(),r("span",y,"Осталось ждать "+d(t.spent_time_counter)+" сек.",1))],8,b)],32)])]))}});export{F as default};
