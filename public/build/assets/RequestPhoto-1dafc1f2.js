import{o as i,k as r,n as e,L as u,p as _,F as f,K as g,M as h,N as c,Y as v,U as y,W as b,O as x}from"./index.es-c4852431.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const k={name:"App",data(){return{rules:null,sending:!1,photos:[],form:{comment:null,name:null,phone:null}}},computed:{},mounted(){this.loadServiceData()},methods:{loadServiceData(){return this.$store.dispatch("requestPhotoLoadData").then(o=>{this.rules=o.rules})},removePhoto(){this.photo=null},getPhoto(){return{imageUrl:URL.createObjectURL(this.photo)}},onChangePhotos(o){const t=o.target.files;for(let s=0;s<t.length;s++)this.photos.push(t[s])},submit(){let o=new FormData;if(Object.keys(this.form).forEach(t=>{const s=this.form[t]||"";typeof s=="object"?o.append(t,JSON.stringify(s)):o.append(t,s)}),this.photos.length>0)for(let t=0;t<this.photos.length;t++)o.append("photos[]",this.photos[t]);this.$store.dispatch("requestPhotoResult",{form:o}).then(t=>{this.sending=!1,this.form={comment:null,name:null,phone:null},this.photos=[],this.$notify({title:"Отлично!",text:"Наш менеджер свяжется с вами для дальнейших инструкций.",type:"success"})}).catch(t=>{})}}},p=o=>(y("data-v-a474ca72"),o=o(),b(),o),C={class:"container py-3"},w={class:"row"},D={class:"col-12"},S=p(()=>e("h4",null,"Правила",-1)),U={key:0,class:"alert-light alert"},j={key:1,class:"alert-light alert"},L={class:"card"},N={class:"card-body"},R={class:"d-flex flex-wrap justify-content-center"},q={for:"photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},I={class:"mb-2 mr-2 img-preview"},O={class:"remove"},T=["onClick"],V={class:"form-floating mb-2"},B=p(()=>e("label",{for:"floatingTextarea"},"Ваше сообщение",-1));function F(o,t,s,z,l,a){const d=x("lazy");return i(),r("div",C,[e("div",w,[e("div",D,[S,l.rules?(i(),r("p",U,u(l.rules),1)):(i(),r("p",j," Вам необходима загрузить скриншот и добавить к нему комментарий ")),e("div",L,[e("div",N,[e("div",R,[e("label",q,[_(" + "),e("input",{type:"file",id:"photos",multiple:"",accept:"image/*",onChange:t[0]||(t[0]=(...n)=>a.onChangePhotos&&a.onChangePhotos(...n)),style:{display:"none"}},null,32)]),l.photos.length>0?(i(!0),r(f,{key:0},g(l.photos,(n,m)=>(i(),r("div",I,[c(e("img",null,null,512),[[d,a.getPhoto(n).imageUrl]]),e("div",O,[e("a",{href:"javascript:void(0)",onClick:E=>a.removePhoto(m)},"Удалить",8,T)])]))),256)):h("",!0)]),e("div",V,[c(e("textarea",{class:"form-control","onUpdate:modelValue":t[1]||(t[1]=n=>l.form.comment=n),placeholder:"Введите текст",id:"floatingTextarea",style:{height:"150px"}},null,512),[[v,l.form.comment]]),B]),l.photos.length>0?(i(),r("button",{key:0,onClick:t[2]||(t[2]=(...n)=>a.submit&&a.submit(...n)),type:"button",class:"btn btn-primary p-3 w-100"}," Отправить ")):h("",!0)])])])])])}const J=P(k,[["render",F],["__scopeId","data-v-a474ca72"]]);export{J as default};
