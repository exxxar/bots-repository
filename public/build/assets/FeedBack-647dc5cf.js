import{j as u,o as i,k as c,n as e,N as m,Y as h,F as k,K as _,M as d,a1 as F,p as r,O as p}from"./index.es-c4852431.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";const y={data(){return{sending:!1,callbackForm:{name:null,phone:null,message:null,images:[]}}},watch:{getSelf:{handler:function(l){this.callbackForm.name=this.self.fio_from_telegram||this.self.name,this.callbackForm.phone=this.self.phone||null},deep:!0}},computed:{...u(["getSelf"]),self(){return this.getSelf}},mounted(){this.self&&(this.callbackForm.name=this.self.fio_from_telegram||this.self.name,this.callbackForm.phone=this.self.phone||null)},methods:{onChangePhotos(l){const t=l.target.files;for(let o=0;o<t.length;o++)t[o].size<=10485760&&this.callbackForm.images.push(t[o])},getPhoto(l){return{imageUrl:URL.createObjectURL(l)}},removePhoto(l){this.callbackForm.images.splice(l,1)},submitCallback(){let l=new FormData;this.sending=!0,Object.keys(this.callbackForm).forEach(t=>{const o=this.callbackForm[t]||"";typeof o=="object"?l.append(t,JSON.stringify(o)):l.append(t,o)}),this.callbackForm.images.length>0&&(this.callbackForm.images.forEach(t=>{l.append("photos[]",t)}),l.delete("images")),this.$store.dispatch("feedBackForm",{callbackForm:l}).then(t=>{this.callbackForm={message:null,name:null,phone:null,images:[]},this.$notify({title:"Обратная связь",text:"Спасибо за сообщение"}),this.sending=!1}).catch(t=>{this.sending=!1})}}},v={key:0,class:"container py-3"},w=e("h3",null,"Обратная связь",-1),C=e("p",{class:"alert alert-light"},[r(" Уважаемый клиент, ваш отзыв будет опубликован в нашем канале "),e("strong",{class:"fw-bold text-primary"},"анонимно"),r(", ваши данные увидит только администрация проекта, заранее благодарим за обратную связь! ")],-1),P={class:"form-floating mb-2"},U=e("label",{for:"callbackForm-name"},[r("Ваше имя "),e("span",{class:"text-danger"},"*")],-1),V={class:"form-floating mb-2"},j=e("label",{for:"callbackForm-phone"},[r("Номер телефона "),e("span",{class:"text-danger"},"*")],-1),B={class:"form-floating"},N=e("label",{for:"callbackForm-message",required:""},[r("Текст сообщения "),e("span",{class:"text-danger"},"*")],-1),S=e("h6",{class:"my-3 text-center fw-bold"},[r("Прикрепить фотографию (до 10МБ) "),e("span",{class:"text-danger"},"*")],-1),q={class:"photo-preview d-flex justify-content-center flex-wrap w-100 my-3"},L={for:"menu-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2"},O=e("span",{class:"text-primary fw-bold"},"+",-1),z={class:"mb-2 img-preview",style:{"margin-right":"10px"}},D={class:"remove"},E=["onClick"],M={key:0,class:"alert alert-light mb-2"},R=["disabled"];function T(l,t,o,G,s,n){const f=p("mask"),g=p("lazy");return n.self?(i(),c("div",v,[w,C,e("form",{onSubmit:t[4]||(t[4]=F((...a)=>n.submitCallback&&n.submitCallback(...a),["prevent"]))},[e("div",P,[m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>s.callbackForm.name=a),class:"form-control",id:"callbackForm-name",placeholder:"name@example.com",required:""},null,512),[[h,s.callbackForm.name]]),U]),e("div",V,[m(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=a=>s.callbackForm.phone=a),class:"form-control",id:"callbackForm-phone",placeholder:"name@example.com",required:""},null,512),[[f,"+7(###)###-##-##"],[h,s.callbackForm.phone]]),j]),e("div",B,[m(e("textarea",{class:"form-control",style:{height:"200px","line-height":"150%"},"onUpdate:modelValue":t[2]||(t[2]=a=>s.callbackForm.message=a),placeholder:"Leave a comment here",id:"callbackForm-message"},null,512),[[h,s.callbackForm.message]]),N]),S,e("div",q,[e("label",L,[O,e("input",{type:"file",id:"menu-photos",accept:"image/*",required:"",onChange:t[3]||(t[3]=(...a)=>n.onChangePhotos&&n.onChangePhotos(...a)),style:{display:"none"}},null,32)]),(s.callbackForm.images||[]).length>0?(i(!0),c(k,{key:0},_(s.callbackForm.images,(a,b)=>(i(),c("div",z,[m(e("img",null,null,512),[[g,n.getPhoto(a).imageUrl]]),e("div",D,[e("a",{onClick:J=>n.removePhoto(b)},"Удалить",8,E)])]))),256)):d("",!0)]),s.callbackForm.image?d("",!0):(i(),c("p",M," Вам необходимо прикрепить изображение перед отправкой! ")),e("button",{type:"submit",disabled:s.sending&&(s.callbackForm.images||[]).length===0,class:"btn btn-primary mt-2 p-3 w-100"}," Отправить сообщение ",8,R)],32)])):d("",!0)}const A=x(y,[["render",T]]);export{A as default};
