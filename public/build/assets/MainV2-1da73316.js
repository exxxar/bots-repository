import{y as S,o as i,g as l,j as t,n as b,s as c,C as B,w as m,v as f,t as d,l as a,F as _,q as v,N as w,R as L,x as C,u as M,p as F,B as U,K as z,Y as q,A as O,L as T}from"./index.es-800d80e2.js";import{a as E}from"./vue3-simple-typeahead-28cb397a.js";import{S as W}from"./app-f15c35ff.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./vue3-json-editor.esm.prod-c06c32c7.js";import"./TelegramChannelHelper-5e7b2f6c.js";import"./TelegramChannelHelper.vue_vue_type_style_index_0_lang-43a0cbfe.js";import"./base64-eecd59f1.js";import"./main-70bbffa1.js";import"./v4-4a60fe23.js";import"./carousel.es-2930499a.js";import"./GlobalSlugList-bdba5fe0.js";import"./vue3-perfect-scrollbar-0ff93477.js";import"./index-55688c75.js";const H={class:"row",style:{position:"sticky",top:"0px","z-index":"1000"}},D={class:"col-12"},P={class:"btn-group w-100 px-3 py-2",style:{"overflow-x":"auto"}},N=t("i",{class:"fa-solid fa-scroll mr-2"},null,-1),R=t("i",{class:"fa-solid fa-coins mr-2"},null,-1),A=t("i",{class:"fa-solid fa-users mr-2"},null,-1),J=t("i",{class:"fa-solid fa-icons mr-2"},null,-1),Y=t("i",{class:"fa-solid fa-arrow-up-right-from-square mr-2"},null,-1),G=t("i",{class:"fa-solid fa-arrow-up-right-from-square mr-2"},null,-1),K={class:"form-floating mb-2"},X={for:"floatingInput"},Q={key:0,class:"ml-1",style:{"font-size":"10px"}},Z={class:"form-floating"},x={for:"floatingTextarea2"},ee={key:0,class:"ml-1",style:{"font-size":"10px"}},te=t("h6",{class:"opacity-75 my-2"},"Контактная информация",-1),oe={class:"form-floating mb-2"},se=t("label",{for:"floatingInput"},"Телефон",-1),ne={class:"form-floating mb-2"},ie=t("label",{for:"floatingInput"},"Инста",-1),le={class:"form-floating mb-2"},ae=t("label",{for:"floatingInput"},"Вконтакте",-1),re={class:"form-floating mb-2"},de=t("label",{for:"floatingInput"},"Почта",-1),ce={class:"form-floating mb-2"},me=t("label",{for:"floatingInput"},"Сайт",-1),pe=t("h6",{class:"opacity-75 my-2"},"Расположение заведения",-1),ue={class:"form-floating mb-2"},he={for:"floatingInput"},fe={key:0,class:"ml-1",style:{"font-size":"10px"}},be={class:"form-floating mb-2"},_e=t("label",{for:"floatingInput"},"Виджет с Яндекс.Картой",-1),ge=t("h6",{class:"opacity-75 my-3"},"График работы",-1),ye=t("div",{class:"alert alert-light p-2",style:{"font-size":"12px"},role:"alert"},[c(" Укажите график работы вашего заведения. Если в какой-то день ваше заведение "),t("span",{class:"fw-bold"},"закрыто"),c(" - поставьте галочку сбоку от времени и укажите причину. ")],-1),ke={class:"mb-0",style:{"font-size":"12px"}},ve={class:"input-group mb-2"},we={class:"input-group-text"},$e=["onUpdate:modelValue"],Fe={key:0,class:"form-floating"},Ce=["onUpdate:modelValue"],Ve=t("label",{for:"floatingInput"},"Начало",-1),Ie={key:1,class:"form-floating"},Se=["onUpdate:modelValue"],Be=t("label",{for:"floatingInput"},"Окончание",-1),Te={key:2,class:"form-floating"},Me=["onUpdate:modelValue"],Ue=t("label",{for:"floatingInput"},"Причина закрытия",-1),je=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),Le=t("div",{class:"alert alert-light mb-2"}," Максимальное значение баллов, которое пользователь может списать во время покупки в магазине, в % от цены заказа. ",-1),ze={class:"form-floating mb-2"},qe=t("label",{for:"floatingInput"},"CashBack",-1),Oe=t("div",{class:"alert alert-light mb-2"}," Уровни автоматического начисления баллов по реферальной программе, в %. ",-1),Ee={class:"form-floating mb-2"},We=t("label",{for:"floatingInput"},"Уровень 1, %",-1),He={class:"form-floating mb-2"},De=t("label",{for:"floatingInput"},"Уровень 2, %",-1),Pe={class:"form-floating mb-2"},Ne=t("label",{for:"floatingInput"},"Уровень 3, %",-1),Re={class:"mb-2"},Ae={class:"form-check"},Je=t("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить баллы по категориям ",-1),Ye={key:0,class:"mb-2"},Ge=t("h6",{class:"opacity-75 my-2"},"Настройка категорий баллов",-1),Ke=t("div",{class:"alert alert-light",role:"alert"}," Категории баллов - это возможность разделить накопления и траты баллов пользователями бота на указанные цели, например, кофейня может создать категории: на кофе, на десерты - и начислять баллы за купленный кофе отдельно от баллов за купленный десерт ",-1),Xe={class:"input-group mb-2"},Qe={class:"form-floating"},Ze=["onUpdate:modelValue"],xe=t("label",{for:"floatingInput"},"Название категории",-1),et=["onClick"],tt=t("i",{class:"fa-regular fa-trash-can"},null,-1),ot=[tt],st={class:"mb-2"},nt={class:"form-check"},it=t("label",{class:"form-check-label",for:"need-cashback-rules"}," Необходимо настроить оповещения под CashBack ",-1),lt={key:1,class:"col-md-12 col-12 mb-2"},at={class:"form-floating mb-2"},rt=t("option",{value:null},"Не выбрано",-1),dt=["value"],ct=t("label",{for:"floatingSelect"},[t("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),c(" Правила критических оповещений ")],-1),mt={class:"m-0 fst-italic"},pt={class:"input-group mb-2"},ut={class:"input-group-text"},ht={class:"form-check d-flex justify-content-center align-items-center"},ft=["onUpdate:modelValue","id"],bt={class:"form-floating"},_t=["onUpdate:modelValue"],gt=t("label",{for:"floatingInput"},"Значение",-1),yt=["onClick"],kt=t("i",{class:"fa-regular fa-trash-can"},null,-1),vt=[kt],wt=t("button",{style:{"z-index":"100"},type:"submit",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ",-1),$t=t("h6",{class:"fw-bold"},"Варианты скрипта",-1),Ft={key:0,class:"list-group mb-2"},Ct=["onClick"],Vt={class:"fw-bold"},It=t("h6",{class:"fw-bold"},"Редактор",-1),St=t("div",{class:"divider w-100 my-3"},"Пункты меню",-1),Bt={class:"row row-cols-1"},Tt={class:"col mb-2"},Mt=["onClick"],Ut=t("div",{class:"divider w-100 my-3"},"Редактор",-1),jt={class:"form-check form-switch"},Lt={class:"form-check-label",for:"iconForm-is_visible"},zt={class:"form-floating mb-2"},qt=t("label",{for:"floatingInput"},"Название меню",-1),Ot={key:0},Et={class:"img-thumbnail w-100",alt:"..."},Wt={key:1},Ht={class:"img-thumbnail w-100"},Dt={key:2,class:"mb-0 w-100 text-center bg-success text-white rounded-2 my-2 p-3"},Pt=["innerHTML"],Nt={class:"form-floating my-2"},Rt=["id"],At=t("label",{for:"floatingInput"},"Изображение",-1),Jt={data(){return{selected_menu_item_index:0,scripts:[],photos_for_upload:[],selected_script:null,load_script:!0,tab:0,need_cashback_config:!1,need_cashback_rules:!1,need_cashback_fired:!1,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],selected_warning:null,botForm:{warnings:[],payment_provider_token:null,auto_cashback_on_payments:!1,level_1:0,level_2:0,level_3:0,max_cashback_use_percent:0,cashback_config:[]},iconConfig:{maxWidth:500,maxHeight:500,maxSizeMB:2,errorMessage:""},iconForm:{items:[]},companyForm:{id:null,title:null,description:null,address:null,phones:[],links:{vk:null,inst:null,map_link:null,site:null},email:null,schedule:[{day:"Понедельник",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Вторник",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Среда",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Четверг",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Пятница",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Суббота",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"},{day:"Воскресенье",start_at:"08:00",end_at:"20:00",closed:!1,closed_comment:"Выходной"}]}}},computed:{currentBot(){return window.currentBot},filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(n=>!(this.botForm.warnings.findIndex(e=>e.rule_key===n.key)>=0))}},watch:{tab(n,e){this.tab===2&&this.loadFriendsScriptVariants()},selected_menu_item_index:{handler:function(n){this.iconConfig.errorMessage=""},deep:!0},iconForm:{handler:function(n){this.iconConfig.errorMessage=""},deep:!0}},mounted(){this.currentBot.settings&&(this.currentBot.settings.icons||null)!=null&&(this.iconForm.items=this.currentBot.settings.icons);const n=this.currentBot.company;this.companyForm.id=n.id||null,this.companyForm.title=n.title||null,this.companyForm.description=n.description||null,this.companyForm.email=n.email||null,this.companyForm.address=n.address||null,this.companyForm.phones=n.phones||["+7"],this.botForm.payment_provider_token=this.currentBot.payment_provider_token||null,this.botForm.auto_cashback_on_payments=this.currentBot.auto_cashback_on_payments||!1,this.botForm.max_cashback_use_percent=this.currentBot.max_cashback_use_percent||0,this.botForm.level_1=this.currentBot.level_1||0,this.botForm.level_2=this.currentBot.level_2||0,this.botForm.level_3=this.currentBot.level_3||0,this.botForm.cashback_config=this.currentBot.cashback_config||[],this.botForm.warnings=this.currentBot.warnings||[];let e=p=>{if(!p)return!1;let h=["inst","vk","map_link","site"],s=!1,r=0;return Object.keys(p).forEach(u=>{h.indexOf(u)!==-1&&(s=!0,r++)}),s&&r===h.length};this.companyForm.links=e(n.links)?n.links:{vk:null,inst:null,map_link:null,site:null};let o=p=>{if((p||[]).length<7)return!1;let h=!0;return p.forEach(s=>{h=h&&typeof s=="object"}),h};this.companyForm.schedule=o(n.schedule)?n.schedule:this.companyForm.schedule},methods:{goToEditor(){this.$router.push({name:"MenuV2"}),setTimeout(()=>{const n=document.querySelector(".modal.show");if(n){const o=bootstrap.Modal.getInstance(n);o&&o.hide()}new bootstrap.Modal("#script-setting-editor",{}).show()},300)},goToIntegrations(){this.$preloader.show(),this.$router.push({name:"IntegrationsV2"})},getPhoto(n){return{imageUrl:URL.createObjectURL(n)}},selectMenuItem(n){this.selected_menu_item_index=n},onChangePhotos(n,e){const o=n.target.files[0];if(!o)return;if(o.size/(1024*1024)>this.iconConfig.maxSizeMB){this.iconConfig.errorMessage=`Файл слишком большой. Максимальный размер: ${this.iconConfig.maxSizeMB}MB`;return}const h=new Image;h.src=URL.createObjectURL(o),h.onload=()=>{if(h.width>this.iconConfig.maxWidth||h.height>this.iconConfig.maxHeight)this.iconConfig.errorMessage=`Изображение слишком большое. Макс: ${this.iconConfig.maxWidth}x${this.iconConfig.maxHeight}px`;else{this.iconConfig.errorMessage="";const s=this.iconForm.items[e].slug;this.photos_for_upload[s]=o}}},storeMenu(){let n=new FormData;Object.keys(this.iconForm).forEach(e=>{const o=this.iconForm[e]||"";typeof o=="object"?n.append(e,JSON.stringify(o)):n.append(e,o)}),Object.keys(this.photos_for_upload).forEach(e=>{n.append(e+"[]",this.photos_for_upload[e])}),this.$store.dispatch("updateBotMenuItems",{iconForm:n}).then(e=>{this.$notify({title:"Иконки",text:"Иконки меню успешно обновлены!",type:"success"}),this.$emit("callback",e.data)}).catch(e=>{this.$notify({title:"Иконки",text:"Ошибка обновления информации",type:"error"})})},submitBotForm(){let n=new FormData;Object.keys(this.botForm).forEach(e=>{const o=this.botForm[e]||"";typeof o=="object"?n.append(e,JSON.stringify(o)):n.append(e,o)}),this.$store.dispatch("updateBotParams",{botForm:n}).then(e=>{this.$notify({title:"Информация о боте",text:"Информация о боте успешно обновлена!",type:"success"}),this.$emit("callback",e.data),window.location.reload()}).catch(e=>{this.$notify({title:"Информация о боте",text:"Ошибка обновления информации о боте",type:"error"})})},callbackScriptChange(){this.loadFriendsScriptVariants()},loadFriendsScriptVariants(){this.selected_script=null,this.load_script=!1,this.$store.dispatch("friendsLoadScriptVariants").then(n=>{this.load_script=!0,this.scripts=n||[],this.scripts.length>0&&this.selectScript(this.scripts[0])}).catch(n=>{this.load_script=!0})},selectScript(n){this.selected_script=null,this.load_script=!1,this.$nextTick(()=>{this.selected_script=n,this.load_script=!0})},submitCompanyForm(){let n=new FormData;Object.keys(this.companyForm).forEach(e=>{const o=this.companyForm[e]||"";typeof o=="object"?n.append(e,JSON.stringify(o)):n.append(e,o)}),this.$store.dispatch("updateCompany",{companyForm:n}).then(e=>{this.$notify({title:"Информация о компании",text:"Информация о компании успешно обновлена!",type:"success"}),this.$emit("callback",e.data),window.location.reload()}).catch(e=>{this.$notify({title:"Информация о компании",text:"Ошибка обновления информации о компании",type:"error"})})},addWarning(){const n=this.selected_warning;this.botForm.warnings.push({rule_key:n.key,rule_value:0,is_active:!0}),this.selected_warning=null},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(n){let e=this.warnings.find(o=>o.key===n);return e||{title:"Не найдено"}},removeWarning(n){this.botForm.warnings.splice(n,1)},removeCashBackConfig(n){this.botForm.cashback_config.splice(n,1)}}},Yt=Object.assign(Jt,{__name:"CompanyInfo",setup(n){return(e,o)=>{const p=S("mask"),h=S("lazy");return i(),l(_,null,[t("div",H,[t("div",D,[t("div",P,[t("button",{type:"button",class:b(["btn-info btn p-3",{active:e.tab===0}]),onClick:o[0]||(o[0]=s=>e.tab=0),style:{"white-space":"nowrap","line-height":"100%"},"aria-current":"page"},[N,c("Основное ")],2),t("button",{type:"button",class:b(["btn-info btn p-3",{active:e.tab===1}]),onClick:o[1]||(o[1]=s=>e.tab=1),style:{"white-space":"nowrap","line-height":"100%"},"aria-current":"page"},[R,c("Баллы ")],2),t("button",{type:"button",class:b(["btn-info btn p-3",{active:e.tab===2}]),onClick:o[2]||(o[2]=s=>e.tab=2),style:{"white-space":"nowrap","line-height":"100%"},"aria-current":"page"},[A,c("Друзья ")],2),t("button",{type:"button",class:b(["btn-info btn p-3",{active:e.tab===3}]),onClick:o[3]||(o[3]=s=>e.tab=3),style:{"white-space":"nowrap","line-height":"100%"},"aria-current":"page"},[J,c("Иконки ")],2),t("button",{type:"button",onClick:o[4]||(o[4]=(...s)=>e.goToEditor&&e.goToEditor(...s)),style:{"white-space":"nowrap","line-height":"100%"},class:"btn-primary btn p-3"},[Y,c(" Настройки магазина")]),t("button",{type:"button","data-bs-dismiss":"modal",style:{"white-space":"nowrap","line-height":"100%"},onClick:o[5]||(o[5]=(...s)=>e.goToIntegrations&&e.goToIntegrations(...s)),class:"btn-primary btn p-3"},[G,c(" Интеграции")])])])]),e.tab===0?(i(),l("form",{key:0,onSubmit:o[15]||(o[15]=B((...s)=>e.submitCompanyForm&&e.submitCompanyForm(...s),["prevent"]))},[t("div",K,[m(t("input",{type:"text","onUpdate:modelValue":o[6]||(o[6]=s=>e.companyForm.title=s),maxlength:"255",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[f,e.companyForm.title]]),t("label",X,[c("Название "),(e.companyForm.title||"").length>0?(i(),l("span",Q,"("+d(e.companyForm.title.length)+"/255)",1)):a("",!0)])]),t("div",Z,[m(t("textarea",{"onUpdate:modelValue":o[7]||(o[7]=s=>e.companyForm.description=s),maxlength:"512",required:"",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"200px"}},null,512),[[f,e.companyForm.description]]),t("label",x,[c("Описание "),(e.companyForm.description||"").length>0?(i(),l("span",ee,"("+d(e.companyForm.description.length)+"/512)",1)):a("",!0)])]),te,t("div",oe,[m(t("input",{type:"text","onUpdate:modelValue":o[8]||(o[8]=s=>e.companyForm.phones[0]=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[p,["+7(###)###-##-##"]],[f,e.companyForm.phones[0]]]),se]),t("div",ne,[m(t("input",{type:"text","onUpdate:modelValue":o[9]||(o[9]=s=>e.companyForm.links.inst=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[f,e.companyForm.links.inst]]),ie]),t("div",le,[m(t("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=s=>e.companyForm.links.vk=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[f,e.companyForm.links.vk]]),ae]),t("div",re,[m(t("input",{type:"email","onUpdate:modelValue":o[11]||(o[11]=s=>e.companyForm.email=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[f,e.companyForm.email]]),de]),t("div",ce,[m(t("input",{type:"url","onUpdate:modelValue":o[12]||(o[12]=s=>e.companyForm.links.site=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[f,e.companyForm.links.site]]),me]),pe,t("div",ue,[m(t("input",{type:"text","onUpdate:modelValue":o[13]||(o[13]=s=>e.companyForm.address=s),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[f,e.companyForm.address]]),t("label",he,[c("Адрес расположения "),(e.companyForm.address||"").length>0?(i(),l("span",fe,"("+d(e.companyForm.address.length)+"/255)",1)):a("",!0)])]),t("div",be,[m(t("textarea",{"onUpdate:modelValue":o[14]||(o[14]=s=>e.companyForm.links.map_link=s),class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"200px"}},null,512),[[f,e.companyForm.links.map_link]]),_e]),ge,ye,(i(!0),l(_,null,v(e.companyForm.schedule,(s,r)=>(i(),l(_,null,[t("p",ke,d(e.companyForm.schedule[r].day),1),t("div",ve,[t("div",we,[m(t("input",{class:"form-check-input mt-0","onUpdate:modelValue":u=>e.companyForm.schedule[r].closed=u,type:"checkbox",value:"","aria-label":"Checkbox for following text input"},null,8,$e),[[w,e.companyForm.schedule[r].closed]])]),e.companyForm.schedule[r].closed?a("",!0):(i(),l("div",Fe,[m(t("input",{type:"time","onUpdate:modelValue":u=>e.companyForm.schedule[r].start_at=u,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,Ce),[[f,e.companyForm.schedule[r].start_at]]),Ve])),e.companyForm.schedule[r].closed?a("",!0):(i(),l("div",Ie,[m(t("input",{type:"time","onUpdate:modelValue":u=>e.companyForm.schedule[r].end_at=u,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,Se),[[f,e.companyForm.schedule[r].end_at]]),Be])),e.companyForm.schedule[r].closed?(i(),l("div",Te,[m(t("input",{type:"text","onUpdate:modelValue":u=>e.companyForm.schedule[r].closed_comment=u,class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,8,Me),[[f,e.companyForm.schedule[r].closed_comment]]),Ue])):a("",!0)])],64))),256)),je],32)):a("",!0),e.tab===1?(i(),l("form",{key:1,onSubmit:o[25]||(o[25]=B((...s)=>e.submitBotForm&&e.submitBotForm(...s),["prevent"]))},[Le,t("div",ze,[m(t("input",{type:"number","onUpdate:modelValue":o[16]||(o[16]=s=>e.botForm.max_cashback_use_percent=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[f,e.botForm.max_cashback_use_percent]]),qe]),Oe,t("div",Ee,[m(t("input",{type:"number","onUpdate:modelValue":o[17]||(o[17]=s=>e.botForm.level_1=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[f,e.botForm.level_1]]),We]),t("div",He,[m(t("input",{type:"number","onUpdate:modelValue":o[18]||(o[18]=s=>e.botForm.level_2=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[f,e.botForm.level_2]]),De]),t("div",Pe,[m(t("input",{type:"number","onUpdate:modelValue":o[19]||(o[19]=s=>e.botForm.level_3=s),min:"0",max:"100",class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[f,e.botForm.level_3]]),Ne]),t("div",Re,[t("div",Ae,[m(t("input",{class:"form-check-input","onUpdate:modelValue":o[20]||(o[20]=s=>e.need_cashback_config=s),type:"checkbox",id:"need-cashback-config"},null,512),[[w,e.need_cashback_config]]),Je])]),e.need_cashback_config?(i(),l("div",Ye,[Ge,Ke,(i(!0),l(_,null,v(e.botForm.cashback_config,(s,r)=>(i(),l("div",{class:"d-flex justify-content-between flex-wrap",key:"social-link"+r},[t("div",Xe,[t("div",Qe,[m(t("input",{type:"text",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255","onUpdate:modelValue":u=>e.botForm.cashback_config[r].title=u,class:"form-control",id:"floatingInput"},null,8,Ze),[[f,e.botForm.cashback_config[r].title]]),xe]),t("button",{type:"button",onClick:u=>e.removeCashBackConfig(r),class:"btn btn-outline-light text-danger"},ot,8,et)])]))),128)),t("button",{type:"button",onClick:o[21]||(o[21]=s=>e.addCashBackConfig()),class:"btn mb-2 rounded-sm btn-outline-primary p-3 w-100"}," Добавить категорию ")])):a("",!0),t("div",st,[t("div",nt,[m(t("input",{class:"form-check-input","onUpdate:modelValue":o[22]||(o[22]=s=>e.need_cashback_rules=s),type:"checkbox",id:"need-cashback-rules"},null,512),[[w,e.need_cashback_rules]]),it])]),e.need_cashback_rules?(i(),l("div",lt,[t("div",at,[m(t("select",{class:"form-select","onUpdate:modelValue":o[23]||(o[23]=s=>e.selected_warning=s),onChange:o[24]||(o[24]=(...s)=>e.addWarning&&e.addWarning(...s)),id:"floatingSelect","aria-label":"Floating label select example"},[rt,(i(!0),l(_,null,v(e.filteredWarnings,s=>(i(),l("option",{value:s},d(s.title),9,dt))),256))],544),[[L,e.selected_warning]]),ct]),(i(!0),l(_,null,v(e.botForm.warnings,(s,r)=>(i(),l(_,null,[t("p",mt,d(e.getWarning(s.rule_key).title||"Не найдено"),1),t("div",pt,[t("div",ut,[t("div",ht,[m(t("input",{class:"form-check-input","onUpdate:modelValue":u=>e.botForm.warnings[r].is_active=u,type:"checkbox",id:"warning-is-active-"+r},null,8,ft),[[w,e.botForm.warnings[r].is_active]])])]),t("div",bt,[m(t("input",{type:"number",placeholder:"Значение","aria-label":"Значение","onUpdate:modelValue":u=>e.botForm.warnings[r].rule_value=u,min:"0",class:"form-control",id:"floatingInput"},null,8,_t),[[f,e.botForm.warnings[r].rule_value]]),gt]),t("button",{type:"button",onClick:u=>e.removeWarning(r),class:"btn btn-outline-light text-danger"},vt,8,yt)])],64))),256))])):a("",!0),wt],32)):a("",!0),e.tab===2?(i(),l(_,{key:2},[$t,(e.scripts||[]).length>0?(i(),l("ul",Ft,[(i(!0),l(_,null,v(e.scripts,s=>(i(),l("li",{onClick:r=>e.selectScript(s),class:b([{"bg-primary text-white":(e.selected_script||{id:null}).id===s.id},"list-group-item d-flex justify-content-between"])},[c(d(s.command||"-")+" ",1),t("small",Vt,"#"+d(s.id),1)],10,Ct))),256))])):a("",!0),It,e.load_script?(i(),C(E,{key:1,item:e.selected_script,onCallback:e.callbackScriptChange},null,8,["item","onCallback"])):a("",!0)],64)):a("",!0),e.tab===3?(i(),l(_,{key:3},[St,t("div",Bt,[(i(!0),l(_,null,v(e.iconForm.items.length,(s,r)=>(i(),l("div",Tt,[t("button",{type:"button",class:b([{"btn-primary text-white":r===e.selected_menu_item_index,"btn-outline-primary":r!==e.selected_menu_item_index},"mb-0 btn w-100"]),onClick:u=>e.selectMenuItem(r)},d(e.iconForm.items[r].title),11,Mt)]))),256))]),Ut,t("div",jt,[m(t("input",{class:"form-check-input","onUpdate:modelValue":o[26]||(o[26]=s=>e.iconForm.items[e.selected_menu_item_index].is_visible=s),type:"checkbox",role:"switch",id:"iconForm-is_visible"},null,512),[[w,e.iconForm.items[e.selected_menu_item_index].is_visible]]),t("label",Lt,[c(" Виден пользователям: "),t("span",{class:b({"fw-bold text-primary":e.iconForm.items[e.selected_menu_item_index].is_visible})},"виден",2),c(" / "),t("span",{class:b({"fw-bold text-primary":!e.iconForm.items[e.selected_menu_item_index].is_visible})},"не виден",2)])]),t("div",zt,[m(t("input",{type:"text","onUpdate:modelValue":o[27]||(o[27]=s=>e.iconForm.items[e.selected_menu_item_index].title=s),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[f,e.iconForm.items[e.selected_menu_item_index].title]]),qt]),e.iconForm.items[e.selected_menu_item_index].has_icon?(i(),l(_,{key:0},[e.iconForm.items[e.selected_menu_item_index].image_url&&!e.photos_for_upload[e.iconForm.items[e.selected_menu_item_index].slug]?(i(),l("div",Ot,[m(t("img",Et,null,512),[[h,"/images/shop-v2-2/"+e.iconForm.items[e.selected_menu_item_index].image_url]])])):(i(),l("div",Wt,[m(t("img",Ht,null,512),[[h,e.getPhoto(e.photos_for_upload[e.iconForm.items[e.selected_menu_item_index].slug]).imageUrl]])])),e.photos_for_upload[e.iconForm.items[e.selected_menu_item_index].slug]?(i(),l("p",Dt,[c("Фото добавлено в очередь, "),t("a",{class:"text-white",onClick:o[28]||(o[28]=s=>delete e.photos_for_upload[e.iconForm.items[e.selected_menu_item_index].slug]),href:"javascript:void(0)"},"отменить?")])):a("",!0),e.iconConfig.errorMessage?(i(),l("div",{key:3,class:"alert alert-danger my-2",innerHTML:e.iconConfig.errorMessage},null,8,Pt)):a("",!0),t("div",Nt,[t("input",{type:"file",id:"menu-photos-"+e.selected_menu_item_index,accept:"image/*",required:"",class:"form-control",onChange:o[29]||(o[29]=s=>e.onChangePhotos(s,e.selected_menu_item_index))},null,40,Rt),At])],64)):a("",!0),t("button",{onClick:o[30]||(o[30]=(...s)=>e.storeMenu&&e.storeMenu(...s)),style:{"z-index":"100"},type:"button",class:"btn btn-primary w-100 p-3 mb-3 position-sticky bottom-0"},"Сохранить изменения ")],64)):a("",!0)],64)}}}),Gt=t("title",null,"CashMan - система твоего бизнеса внутри",-1),Kt=t("meta",{name:"description",content:"CashMan - система твоего бизнеса внутри"},null,-1),Xt={key:0,"data-bs-theme":"dark"},Qt={class:"navbar shadow shadow-sm"},Zt={class:"container flex-row-reverse p-2"},xt=t("i",{class:"fa-solid fa-ruble-sign"},null,-1),eo={"data-bs-toggle":"modal","data-bs-target":"#bot-info-modal",class:"text-primary fw-bold cursor-pointer"},to=t("button",{class:"btn btn-link rounded-0 border-0 p-1",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#sidebar-menu","aria-controls":"sidebar-menu"},[t("span",{class:"navbar-toggler-icon"})],-1),oo={class:"text-body-secondary",style:{padding:"0px 0px 90px 0px"}},so={class:"container d-flex justify-content-center flex-column align-items-center"},no={class:"text-center mb-3"},io=["innerHTML"],lo=t("br",null,null,-1),ao={key:0,"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2",style:{"font-size":"12px"}},ro=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),co={key:1,class:"mb-3 text-center"},mo=t("i",{class:"fa-solid fa-map-location-dot mr-2"},null,-1),po={class:"mb-0"},uo={class:"d-flex justify-content-center my-3"},ho=t("i",{class:"fa-solid fa-arrow-up mr-2"},null,-1),fo={class:"offcanvas offcanvas-start custom-offcanvas",style:{width:"70%","border-radius":"0px 10px 10px 0px"},tabindex:"-1",id:"sidebar-menu","aria-labelledby":"offcanvasExampleLabel"},bo={class:"offcanvas-header"},_o={class:"offcanvas-title",id:"offcanvasExampleLabel"},go=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),yo={class:"offcanvas-body"},ko={class:"list-unstyled"},vo={class:"p-1"},wo={class:"p-1"},$o={class:"p-1"},Fo={class:"p-1"},Co={key:0,class:"fw-bold"},Vo={class:"p-1"},Io={class:"p-1"},So={class:"p-1"},Bo=t("div",{class:"border-top my-3"},null,-1),To={key:0,class:"p-2"},Mo={class:"list-unstyled"},Uo={key:0},jo=t("p",{class:"mb-0"},"Телефон",-1),Lo=[jo],zo={key:1,class:"mb-2"},qo=["href"],Oo={key:2},Eo=t("p",{class:"mb-0"},"Ссылки",-1),Wo=[Eo],Ho={key:3},Do=["href"],Po=t("i",{class:"fa-brands fa-instagram mr-1"},null,-1),No={key:4},Ro=["href"],Ao=t("i",{class:"fa-brands fa-vk mr-1"},null,-1),Jo={key:5},Yo=t("p",{class:"mb-0"},"Почта",-1),Go=[Yo],Ko=["href"],Xo={key:6},Qo=t("p",{class:"mb-0"},"Сайт",-1),Zo=[Qo],xo=["href"],es=t("li",null,[t("p",{class:"mt-3 mb-0"},"Связаться с сотрудником")],-1),ts={style:{position:"sticky",bottom:"0px"}},os=["href"],ss={key:1,class:"dropdown"},ns=t("button",{class:"btn btn-light w-100 dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," Тема оформления ",-1),is={key:0,class:"dropdown-menu w-100 bg-light"},ls=["onClick"],as={class:"modal fade",id:"bot-info-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},rs={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},ds={class:"modal-content"},cs={class:"modal-body",style:{"max-height":"400px"}},ms={key:0,class:"mb-0 fw-bold d-flex flex-column align-items-center",style:{"font-size":"12px"}},ps={key:0,class:"text-primary"},us=t("i",{class:"fa-solid fa-location-dot mr-1"},null,-1),hs={key:1,class:"text-primary"},fs={key:2,class:"small d-flex justify-content-end"},bs={href:"javascript:void(0)",class:"text-secondary fw-bold"},_s={key:1,class:"mb-0 text-primary",style:{"font-size":"12px"}},gs={key:2,class:"my-3 alert alert-primary",role:"alert"},ys=t("span",{class:"text-primary fw-bold"},"не работаем",-1),ks=t("span",{"data-bs-toggle":"modal","data-bs-target":"#schedule-list-display",class:"text-primary fw-bold text-decoration-underline cursor-pointer"},"графиком работы",-1),vs={class:"text-center mb-3"},ws=["innerHTML"],$s=t("br",null,null,-1),Fs={key:0,"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2 my-3",style:{"font-size":"12px"}},Cs=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),Vs={class:"modal fade",id:"schedule-list-display",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Is={class:"modal-dialog modal-dialog-centered"},Ss={class:"modal-content"},Bs=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"График работы"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ts={class:"modal-body"},Ms={key:1,class:"my-2 d-flex justify-content-center"},Us=t("a",{"data-bs-toggle":"modal","data-bs-target":"#edit-shop-footer-description-modal",href:"javascript:void(0)",class:"text-primary ml-2",style:{"font-size":"12px"}},[t("i",{class:"fa-solid fa-pen-to-square"}),c(" редактировать")],-1),js=[Us],Ls={class:"modal fade",id:"edit-shop-footer-description-modal",tabindex:"-1","aria-labelledby":"edit-shop-footer-description","aria-hidden":"true"},zs={class:"modal-dialog modal-fullscreen"},qs={class:"modal-content"},Os=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Редактор"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Es={class:"modal-body"},Ws={data(){return{loaded_cashback:!1,cashback:0,install_modal:null,currentTheme:"",themes:[]}},watch:{$route(n){let e=localStorage.getItem("cashman_global_client_theme")||null;e&&this.$nextTick(()=>{this.currentTheme=e}),this.$preloader.show()}},computed:{...M(["getSelf","cartTotalCount"]),tg(){return window.Telegram.WebApp},bot(){return window.currentBot},self(){return window.self||null},isWork(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work:!0},preparedMenuItem(){if(!this.bot.settings)return[];let n=this.bot.settings.icons||[],e=[];return n.forEach(o=>{e[o.slug]=o}),e},needHideMenu(){return new URLSearchParams(window.location.search).has("hide_menu")||this.$route.meta.hide_menu},links(){return{inst:(this.bot.company.links||{inst:null}).inst||null,vk:(this.bot.company.links||{vk:null}).vk||null,map_link:(this.bot.company.links||{map_link:null}).map_link||null,site:(this.bot.company.links||{site:null}).site||null}}},mounted(){var e,o;if(this.loaded_cashback=!1,this.$store.dispatch("loadSelf").then(()=>{var p;window.self=this.getSelf,this.cashback=((p=this.getSelf.cashBack)==null?void 0:p.amount)||0,this.loaded_cashback=!0}),(e=this.bot.settings)!=null&&e.themes&&(this.themes=((o=this.bot.settings)==null?void 0:o.themes)||[]),console.log("theme",window.theme),window.theme){let p=document.querySelector("#theme");p.href=window.theme,localStorage.setItem("cashman_global_client_theme_"+(this.bot.bot_domain||"any_bot"),p.href)}let n=localStorage.getItem("cashman_global_client_theme_"+(this.bot.bot_domain||"any_bot"))||null;n&&this.$nextTick(()=>{this.currentTheme=n}),this.changeTheme(this.tg.colorScheme),this.tg.expand(),this.tg.BackButton.hide()},methods:{switchTheme(n){let e=document.querySelector("#theme");e.href=this.themes[n].href,localStorage.setItem("cashman_global_client_theme_"+(this.bot.bot_domain||"any_bot"),e.href),this.$nextTick(()=>{this.currentTheme=e.href}),this.$store.dispatch("updateBotTheme",{theme:e.href}).then(()=>{this.$notify({title:"Изменение темы",text:"Тема успешно обновлена",type:"success"})}).catch(()=>{this.$notify({title:"Изменение темы",text:"Ошибка изменения темы",type:"error"})})},goTo(n){this.$router.push({name:n})},changeTheme(n){document.querySelectorAll("[data-bs-theme]").forEach(o=>{o.setAttribute("data-bs-theme",n)})},scrollTop(){window.scrollTo(0,80)},openLink(n){this.tg.openLink(n,{try_instant_view:!0})},closeShop(){this.tg.close()}}},Hs=Object.assign(Ws,{__name:"V2Layout",setup(n){return(e,o)=>{var p,h,s,r,u,y,$,k,V,I;return i(),l(_,null,[F(z(q),null,{default:U(()=>[Gt,Kt]),_:1}),e.needHideMenu?a("",!0):(i(),l("header",Xt,[t("div",Qt,[t("div",Zt,[e.loaded_cashback?(i(),l("a",{key:0,onClick:o[0]||(o[0]=g=>e.goTo("ProfileV2")),class:"badge bg-primary btn",href:"javascript:void(0)"},[c(d(e.cashback||0)+" ",1),xt])):a("",!0),t("span",eo,d(e.bot.title||"Магазин"),1),to])])])),O(e.$slots,"default"),t("footer",oo,[t("div",so,[e.$route.name!="FeedBackV2"?(i(),l("button",{key:0,onClick:o[1]||(o[1]=g=>e.goTo("FeedBackV2")),class:"btn btn-link mb-2 w-100 p-3 text-primary"},"Обратная связь ")):a("",!0),t("p",no,[t("span",{innerHTML:e.bot.company.description},null,8,io),lo,(e.getSelf||{is_admin:!1}).is_admin?(i(),l("a",ao,[ro,c(" редактировать")])):a("",!0)]),e.bot.company.address?(i(),l("p",co,[mo,c(d(e.bot.company.address),1)])):a("",!0),t("p",po,d(e.bot.company.title)+"©"+d(new Date().getFullYear()),1),t("p",uo,[t("a",{href:"javascript:void(0)",onClick:o[2]||(o[2]=(...g)=>e.scrollTop&&e.scrollTop(...g))},[ho,c("Вернуться наверх")])])])]),t("div",fo,[t("div",bo,[t("h6",_o,d(e.bot.title||"Магазин"),1),go]),t("div",yo,[t("ul",ko,[t("li",vo,[t("a",{class:b([{"fw-bold":e.$route.name==="MenuV2"},"text-decoration-none fw-normal"]),onClick:o[3]||(o[3]=g=>e.goTo("MenuV2")),href:"javascript:void(0)"}," Главное меню",2)]),t("li",wo,[t("a",{class:b([{"fw-bold":e.$route.name==="ProfileV2"},"text-decoration-none fw-normal"]),onClick:o[4]||(o[4]=g=>e.goTo("ProfileV2")),href:"javascript:void(0)"},d(((p=e.preparedMenuItem.profile)==null?void 0:p.title)||"Профиль"),3)]),t("li",$o,[t("a",{class:b([{"fw-bold":e.$route.name==="CatalogV2"},"text-decoration-none fw-normal"]),onClick:o[5]||(o[5]=g=>e.goTo("CatalogV2")),href:"javascript:void(0)"},d(((h=e.preparedMenuItem.shop)==null?void 0:h.title)||"Магазин"),3)]),t("li",Fo,[t("a",{class:b([{"fw-bold":e.$route.name==="ShopCartV2"},"text-decoration-none fw-normal"]),onClick:o[6]||(o[6]=g=>e.goTo("ShopCartV2")),href:"javascript:void(0)"},[c(d(((s=e.preparedMenuItem.basket)==null?void 0:s.title)||"Корзина")+" ",1),e.cartTotalCount>0?(i(),l("span",Co,"("+d(e.cartTotalCount)+")",1)):a("",!0)],2)]),t("li",Vo,[t("a",{class:b([{"fw-bold":e.$route.name==="OrdersV2"},"text-decoration-none fw-normal"]),onClick:o[7]||(o[7]=g=>e.goTo("OrdersV2")),href:"javascript:void(0)"},d(((r=e.preparedMenuItem.history)==null?void 0:r.title)||"История заказов"),3)]),t("li",Io,[t("a",{class:b([{"fw-bold":e.$route.name==="CashBackV2"},"text-decoration-none fw-normal"]),onClick:o[8]||(o[8]=g=>e.goTo("CashBackV2")),href:"javascript:void(0)"}," CashBack",2)]),t("li",So,[t("a",{class:b([{"fw-bold":e.$route.name==="FeedBackV2"},"text-decoration-none fw-normal"]),onClick:o[9]||(o[9]=g=>e.goTo("FeedBackV2")),href:"javascript:void(0)"}," Оставить отзыв",2)])]),Bo,e.bot.company?(i(),l("div",To,[t("ul",Mo,[(e.bot.company.phones||[]).length>0?(i(),l("li",Uo,Lo)):a("",!0),(e.bot.company.phones||[]).length>0?(i(),l("li",zo,[t("a",{target:"_blank",href:"tel:"+e.bot.company.phones[0],class:"text-decoration-none fw-bold"},d(e.bot.company.phones[0]||"-"),9,qo)])):a("",!0),e.links.inst||e.links.vk?(i(),l("li",Oo,Wo)):a("",!0),e.links.inst?(i(),l("li",Ho,[t("a",{target:"_blank",href:"http://instagram.com/"+e.links.inst,style:{"font-size":"12px"},class:"text-primary"},[Po,c(" "+d(e.links.inst||"ссылка"),1)],8,Do)])):a("",!0),e.links.vk?(i(),l("li",No,[t("a",{target:"_blank",href:"https://vk.com/"+e.links.vk,style:{"font-size":"12px"},class:"text-primary"},[Ao,c(" "+d(e.links.vk||"ссылка"),1)],8,Ro)])):a("",!0),e.bot.company.email?(i(),l("li",Jo,Go)):a("",!0),t("li",null,[e.bot.company.email?(i(),l("a",{key:0,href:"mailto:"+e.bot.company.email,target:"_blank",class:"text-decoration-none fw-bold"},d(e.bot.company.email),9,Ko)):a("",!0)]),e.links.site?(i(),l("li",Xo,Zo)):a("",!0),t("li",null,[e.links.site?(i(),l("a",{key:0,href:e.links.site,target:"_blank",class:"text-decoration-none fw-bold"},d(e.links.site),9,xo)):a("",!0)]),(y=(u=e.bot.settings)==null?void 0:u.manager)!=null&&y.link?(i(),l(_,{key:7},[es,t("li",ts,[t("a",{href:(k=($=e.bot.settings)==null?void 0:$.manager)==null?void 0:k.link,target:"_blank",class:"btn btn-primary p-3 w-100"},d(((I=(V=e.bot.settings)==null?void 0:V.manager)==null?void 0:I.title)||"Написать"),9,os)])],64)):a("",!0)])])):a("",!0),(e.getSelf||{is_admin:!1}).is_admin?(i(),l("div",ss,[ns,e.themes.length>0?(i(),l("ul",is,[(i(!0),l(_,null,v(e.themes,(g,j)=>(i(),l("li",null,[t("button",{type:"button",onClick:Ps=>e.switchTheme(j),class:b([{active:e.currentTheme.indexOf(g.href)!=-1},"list-group-item list-group-item-action p-2 w-100 text-primary"]),"aria-current":"true"},d(g.title||"-"),11,ls)]))),256))])):a("",!0)])):a("",!0)])]),t("div",as,[t("div",rs,[t("div",ds,[t("div",cs,[e.bot.company?(i(),l("p",ms,[e.bot.company.address?(i(),l("span",ps,[us,c(" "+d(e.bot.company.address),1)])):(i(),l("span",hs,d(e.bot.title||"Магазин"),1)),(e.bot.company.phones||[]).length>0?(i(),l("span",fs,[t("a",bs,d(e.bot.company.phones[0]),1)])):a("",!0)])):(i(),l("p",_s,d(e.bot.title||"Бот"),1)),e.isWork?a("",!0):(i(),l("div",gs,[c(" В данный момент мы "),ys,c(". Вы можете ознакомиться с нашим "),ks,c(". ")])),t("p",vs,[t("span",{innerHTML:e.bot.company.description},null,8,ws),$s,(e.getSelf||{is_admin:!1}).is_admin?(i(),l("a",Fs,[Cs,c(" Редактировать")])):a("",!0)])])])])]),t("div",Vs,[t("div",Is,[t("div",Ss,[Bs,t("div",Ts,[e.bot?(i(),C(W,{key:0,schedule:e.bot.company.schedule},null,8,["schedule"])):a("",!0),(e.getSelf||{is_admin:!1}).is_admin?(i(),l("p",Ms,js)):a("",!0)])])])]),t("div",Ls,[t("div",zs,[t("div",qs,[Os,t("div",Es,[F(Yt)])])])])],64)}}}),Ds={computed:{...M(["getSelf"]),logo(){return`/images-by-bot-id/${this.currentBot.id}/${this.currentBot.image}`},self(){return window.self||null},tg(){return window.Telegram.WebApp},tgUser(){const n=new URLSearchParams(this.tg.initData);return JSON.parse(n.get("user"))},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.link},link(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001"+this.self.telegram_chat_id)}},created(){window.currentBot=this.bot.data,window.theme=this.theme;const n=window.currentBot.company.schedule||[];if(window.isCorrectSchedule=e=>{if((e||[]).length<7)return!1;let o=!0;return e.forEach(p=>{o=o&&typeof p=="object"}),o},window.isCorrectSchedule(n)&&((!n||(n||[]).length===0)&&(window.currentBot.company.is_work=!0),n&&(n||[]).length>0)){const e=new Date().getUTCDay(),o=new Date().getHours(),p=new Date().getMinutes();let h=n[e].start_at||"08:00",s=parseInt(h.split(":")[0]),r=parseInt(h.split(":")[1]),u=n[e].end_at||"20:00",y=parseInt(u.split(":")[0]),$=parseInt(u.split(":")[1]),k=!1;s===o&&(k=p>=r),y===o&&(k=p<$),o>s&&o<y&&s<=y&&(k=!0),(o>s||o<=y)&&s>=y&&(k=!0),window.currentBot.company.is_work=!n[e].closed&&k}window.currentScript=this.slug_id||null,this.$notify({title:"Главная",text:"Успешно!",type:"success"})},methods:{open(n){this.tg.openLink(n)}}},sn=Object.assign(Ds,{__name:"MainV2",props:{bot:{type:Object},theme:{type:String},slug_id:{type:String}},setup(n){return(e,o)=>{const p=T("notifications"),h=T("router-view");return i(),C(Hs,null,{default:U(()=>[F(p,{position:"top right",ignoreDuplicates:"true",max:"3",width:"100%",speed:"10"}),F(h,{bot:n.bot},null,8,["bot"])]),_:1})}}});export{sn as default};
