import{o as a,k as n,n as t,N as r,Y as d,F as h,K as _,L as u,M as b,a1 as p,p as P,l as F}from"./index.es-c4852431.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";const v={data(){return{hasConnect:!1,frontPadForm:{hook_url:null,channel:null,affiliate:1,point:1,token:null,statuses:[{value:1,key:"new",title:"Новый"}],bot_id:null,pays:[{value:1,key:"cash",title:"Наличные"},{value:2,key:"card",title:"Перевод на карту"}]}}},computed:{bot(){return window.currentBot}},mounted(){this.$nextTick(()=>{var l,o;(l=this.bot)!=null&&l.frontPad&&(this.frontPadForm.hook_url=this.bot.frontPad.hook_url||null,this.frontPadForm.channel=this.bot.frontPad.channel||null,this.frontPadForm.affiliate=this.bot.frontPad.affiliate||null,this.frontPadForm.point=this.bot.frontPad.point||null,this.frontPadForm.token=this.bot.frontPad.token||null,this.frontPadForm.bot_id=this.bot.frontPad.bot_id||this.bot.id||null,this.bot.frontPad.pays!=null&&(this.frontPadForm.pays=this.bot.frontPad.pays),this.bot.statuses!=null&&(this.frontPadForm.statuses=this.bot.frontPad.statuses)),this.frontPadForm.bot_id=((o=this.bot.frontPad)==null?void 0:o.bot_id)||this.bot.id||null})},methods:{submit(){let l=new FormData;Object.keys(this.frontPadForm).forEach(o=>{const i=this.frontPadForm[o]||"";typeof i=="object"?l.append(o,JSON.stringify(i)):l.append(o,i)}),this.$store.dispatch("saveFrontPad",{frontPadForm:l}).then(o=>{this.$notify("Данные CRM успешно сохранены"),window.location.reload()}).catch(o=>{})}}},k=t("h3",null,"Настройка FrontPad",-1),w={class:"form-floating mb-2"},g=t("label",{id:"token"}," Токен интеграции ",-1),V=t("div",{class:"alert alert-light"},' Данные брать из справочника FrontPad "Каналы продаж". Создать канал. Telegram. Указать значение для API ',-1),x={class:"form-floating mb-2"},U=t("label",{class:"form-label",id:"channel"}," Канал продаж ",-1),N={class:"form-floating mb-2"},B=t("label",{id:"affiliate"}," Филиал ",-1),M={class:"form-floating mb-2"},T=t("label",{class:"form-label",id:"point"}," Точка продаж ",-1),j=t("div",{class:"alert alert-light",role:"alert"},' Данные брать из справочника FrontPad "Статусы". Указать значение для API ',-1),A={key:0,class:"card mb-2 p-0"},C=t("div",{class:"card-header"},[t("h6",{class:"fw-bold mb-0"},"Статусы")],-1),D={class:"card-body"},I={class:"table"},O=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Название"),t("th",{scope:"col"},"Ключ"),t("th",{scope:"col"},"Значение")])],-1),S=["onUpdate:modelValue"],E=t("div",{class:"alert alert-light",role:"alert"},' Данные брать из справочника FrontPad "Варианты оплат". Указать значение для API ',-1),L={key:1,class:"card mb-2 p-0"},J=t("div",{class:"card-header"},[t("h6",{class:"fw-bold mb-0"},"Типы оплаты")],-1),K={class:"card-body"},R={class:"table"},Y=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Название"),t("th",{scope:"col"},"Ключ"),t("th",{scope:"col"},"Значение")])],-1),q=["onUpdate:modelValue"],z=t("button",{type:"submit",class:"btn btn-primary p-3 w-100"},[t("i",{class:"fa-solid fa-cloud-arrow-down mr-1"}),P(" Сохранить настройку ")],-1);function G(l,o,i,$,e,m){return a(),n(h,null,[k,t("form",{onSubmit:o[4]||(o[4]=p((...s)=>m.submit&&m.submit(...s),["prevent"]))},[t("div",w,[r(t("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":o[0]||(o[0]=s=>e.frontPadForm.token=s),"aria-describedby":"token"},null,512),[[d,e.frontPadForm.token]]),g]),V,t("div",x,[r(t("input",{type:"text",class:"form-control",placeholder:"channel","aria-label":"channel","onUpdate:modelValue":o[1]||(o[1]=s=>e.frontPadForm.channel=s),"aria-describedby":"channel"},null,512),[[d,e.frontPadForm.channel]]),U]),t("div",N,[r(t("input",{type:"text",class:"form-control",placeholder:"Филиал","aria-label":"Филиал","onUpdate:modelValue":o[2]||(o[2]=s=>e.frontPadForm.affiliate=s),"aria-describedby":"Филиал"},null,512),[[d,e.frontPadForm.affiliate]]),B]),t("div",M,[r(t("input",{type:"text",class:"form-control",placeholder:"Точка продаж","aria-label":"Точка продаж","onUpdate:modelValue":o[3]||(o[3]=s=>e.frontPadForm.point=s),"aria-describedby":"Точка продаж"},null,512),[[d,e.frontPadForm.point]]),T]),j,e.frontPadForm.statuses?(a(),n("div",A,[C,t("div",D,[t("table",I,[O,t("tbody",null,[(a(!0),n(h,null,_(e.frontPadForm.statuses,(s,c)=>(a(),n("tr",null,[t("td",null,u(s.title||"-"),1),t("td",null,u(s.key||"-"),1),t("td",null,[r(t("input",{type:"text",class:"form-control",placeholder:"Статус","aria-label":"Статус","onUpdate:modelValue":f=>e.frontPadForm.statuses[c].value=f,"aria-describedby":"Статус"},null,8,S),[[d,e.frontPadForm.statuses[c].value]])])]))),256))])])])])):b("",!0),E,e.frontPadForm.pays?(a(),n("div",L,[J,t("div",K,[t("table",R,[Y,t("tbody",null,[(a(!0),n(h,null,_(e.frontPadForm.pays,(s,c)=>(a(),n("tr",null,[t("td",null,u(s.title||"-"),1),t("td",null,u(s.key||"-"),1),t("td",null,[r(t("input",{type:"text",class:"form-control",placeholder:"Статус","aria-label":"Статус","onUpdate:modelValue":f=>e.frontPadForm.pays[c].value=f,"aria-describedby":"Статус"},null,8,q),[[d,e.frontPadForm.pays[c].value]])])]))),256))])])])])):b("",!0),z],32)],64)}const H=y(v,[["render",G]]),Q={class:"container my-3"},W={class:"row"},X={class:"col-12"},Z={data(){return{}},mounted(){},methods:{}},et=Object.assign(Z,{__name:"FrontPad",setup(l){return(o,i)=>(a(),n("div",Q,[t("div",W,[t("div",X,[F(H)])])]))}});export{et as default};
