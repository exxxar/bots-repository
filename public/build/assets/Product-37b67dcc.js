import{R as k}from"./Rating-9f9eedad.js";import{_ as P}from"./ReviewCard-a85301e6.js";import{P as C}from"./PreloaderV1-97f38083.js";import{g as j,M as p,o as s,j as i,l as e,K as d,n as c,L as o,F as g,J as y,k as _,$ as l,G as b,s as $,N as v}from"./index.es-db843bab.js";import{v as R}from"./v4-4a60fe23.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ProductCardSimple-a61f6e6c.js";/* empty css                                                    */const B={key:0,class:"container py-3"},L={class:"card border-0"},I={style:{"min-height":"350px","object-fit":"cover"},class:"card-img",alt:"..."},V={class:"card-img-overlay d-flex flex-column justify-content-between p-0"},S={class:"shadow-bg",style:{"min-height":"70px"}},T={class:"text-left text-white",style:{"font-weight":"700","line-height":"100%"}},A={class:"d-flex justify-content-between align-products-center"},z={class:"text-left mb-0 text-white"},M={class:"text-primary fw-bold"},N={key:0,class:"badge bg-primary fw-bold"},O={key:0,class:"row g-2 row-cols-5"},q={class:"col"},D=["onClick"],E=e("i",{class:"fa-solid fa-link"},null,-1),F={class:"p-2"},G=e("p",{class:"mb-0"},"Рейтинг товара",-1),H={class:"d-flex justify-content-between mb-3"},Q={key:1,class:"p-2 alert alert-warning"},U=e("p",{class:"mb-0 fw-bold"},"Особенности доставки",-1),J={key:0,class:"d-flex justify-content-between mb-3"},K={key:1,class:"mb-0"},W={key:2,class:"p-2"},X=e("p",{class:"mb-0"},"Параметры товара",-1),Y={class:"table"},Z=e("thead",null,[e("th",null,"Параметр"),e("th",null,"Значение")],-1),x={key:0},tt=e("td",null,"Ширина",-1),et={key:1},st=e("td",null,"Высота",-1),it={key:2},ot=e("td",null,"Длина",-1),nt={key:3},rt=e("td",null,"Вес",-1),dt={class:"nav nav-tabs justify-content-center"},at={class:"nav-item"},lt={class:"nav-item"},ct={key:3},ut=["innerHTML"],pt={key:1,class:"text-justify py-2 fst-italic"},ht={key:4},mt={key:0},gt={class:"list-group w-100 py-2 rounded-0"},yt={class:"list-group-item"},_t={key:1,class:"alert alert-light my-2 d-flex justify-content-center align-items-center",role:"alert"},bt=e("div",{class:"d-flex justify-content-center align-items-center flex-column"},[e("div",{class:"spinner-grow text-primary my-3",role:"status"},[e("span",{class:"visually-hidden"},"Загружаем....")]),e("p",null,"Загружаем отзывы...")],-1),vt=[bt],wt={key:2,class:"alert alert-light my-2",role:"alert"},ft={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},kt={key:0,class:"d-flex justify-content-between align-items-center w-100 p-0"},Pt=["disabled"],Ct={key:0,class:"text-decoration-line-through",style:{"font-size":"10px"}},jt={key:1,class:"btn-group w-100"},$t=["disabled"],Rt=["disabled"],Bt={key:1,class:"p-3 border-secondary border rounded-2 w-100 text-secondary fw-bold text-center"},Lt={data(){return{product:null,tab:0,selected_image:null,loading_reviews:!1,reviews:[],paginate:null,sending:!1,is_online:!0}},computed:{...j(["inCart","cartTotalCount","getReviews","getReviewsPaginateObject"]),currentPrice(){return this.product.current_price/100},oldPrice(){return this.product.old_price/100},checkInCart(){return this.inCart(this.product.id)},discount(){return this.oldPrice>0?Math.round(this.currentPrice/this.oldPrice*100):0},uuid(){return R()},canProductAction(){return this.is_online&&!this.sending},currentScriptId(){return window.currentScript},currentBot(){return window.currentBot},qr(){return"https://api.qrserver.com/v1/create-qr-code/?size=450x450&qzone=2&data="+this.productLink},productLink(){return"https://t.me/"+this.currentBot.bot_domain+"?start="+btoa("001slug"+this.currentScriptId+"product"+this.item.id)}},mounted(){this.loadProduct()},methods:{nextReviews(a){this.loadReviews(a)},loadReviews(a=0){return this.tab=1,this.loading_reviews=!0,this.$store.dispatch("loadReviewsByProductId",{dataObject:{product_id:this.product.id},page:a,size:30}).then(t=>{this.reviews=this.getReviews,this.paginate=this.getReviewsPaginateObject,this.loading_reviews=!1}).catch(()=>{this.loading_reviews=!1})},copyToClipBoard(){const a=this.productLink;navigator.clipboard.writeText(a).then(()=>{this.$notify({title:"Копирование",text:"Ссылка скопирована в буфер"})}).catch(t=>{this.$notify({title:"Копирование",text:"Ошибка копирования",type:"error"})})},incProductCart(){this.checkInCart===0?this.$store.dispatch("addProductToCart",this.product):this.$store.dispatch("incQuantity",this.product.id),this.$notify({title:"Добавление товара",text:"Успешно добавлено в корзину!"})},decProductCart(){this.checkInCart<=1?this.$store.dispatch("removeProduct",this.product.id):this.$store.dispatch("decQuantity",this.product.id),this.$notify({title:"Добавление товара",text:"Товар удален!"})},loadProduct(){let a=this.$route.params.productId;this.$store.dispatch("loadProduct",{dataObject:{productId:a}}).then(t=>{this.product=t.data,this.selected_image=(this.product.images||[]).length>0?this.product.images[0]:null,window.addEventListener("online",()=>{this.is_online=!0}),window.addEventListener("offline",()=>{this.is_online=!1})})},doSwipeLeft(){this.$router.push({name:"CatalogV2"})},doSwipeRight(){this.$router.push({name:"ShopCartV2"})}}},Ot=Object.assign(Lt,{__name:"Product",setup(a){return(t,r)=>{const w=$("Pagination"),h=v("lazy"),m=v("touch");return t.product?p((s(),i("div",B,[e("div",L,[p(e("img",I,null,512),[[h,t.selected_image]]),e("div",V,[e("div",S,[e("h6",T,d(t.product.title||"Не указан"),1),e("div",A,[e("p",z,[c("Цена "),e("strong",M,d(t.product.current_price||0)+"₽",1)]),t.discount>0?(s(),i("span",N,"-"+d(t.discount||0)+"%",1)):o("",!0)])])])]),(t.product.images||[]).length>1?(s(),i("div",O,[(s(!0),i(g,null,y(t.product.images,n=>(s(),i("div",q,[p(e("img",{style:{"min-height":"60px","object-fit":"contain"},onClick:u=>t.selected_image=n,class:l([{"border border-primary":t.selected_image===n},"img-thumbnail my-2"]),alt:"..."},null,10,D),[[h,n]])]))),256))])):o("",!0),e("a",{href:"javascript:void(0)",onClick:r[0]||(r[0]=(...n)=>t.copyToClipBoard&&t.copyToClipBoard(...n)),class:"d-block w-100 text-center py-3"},[E,c(" Скопировать ссылку на товар")]),e("div",F,[G,e("h6",H,[_(k,{rating:t.product.rating},null,8,["rating"]),c(" "+d(Math.round(t.product.rating))+" из 5 ",1)])]),t.product.delivery_terms?(s(),i("div",Q,[U,t.product.delivery_terms?(s(),i("h6",J,d(t.product.delivery_terms),1)):(s(),i("p",K,"Дополнительных условий доставки нет"))])):o("",!0),t.product.dimension?(s(),i("div",W,[X,e("table",Y,[Z,e("tbody",null,[t.product.dimension.width>0?(s(),i("tr",x,[tt,e("td",null,d(t.product.dimension.width||0)+" см",1)])):o("",!0),t.product.dimension.height>0?(s(),i("tr",et,[st,e("td",null,d(t.product.dimension.height||0)+" см",1)])):o("",!0),t.product.dimension.length>0?(s(),i("tr",it,[ot,e("td",null,d(t.product.dimension.length||0)+" см",1)])):o("",!0),t.product.dimension.weight>0?(s(),i("tr",nt,[rt,e("td",null,d(t.product.dimension.weight||0)+" кг",1)])):o("",!0)])])])):o("",!0),e("ul",dt,[e("li",at,[e("a",{class:l(["nav-link",{active:t.tab===0}]),onClick:r[1]||(r[1]=n=>t.tab=0),"aria-current":"page",href:"javascript:void(0)"},"Описание",2)]),e("li",lt,[e("a",{class:l(["nav-link",{active:t.tab===1}]),onClick:r[2]||(r[2]=n=>t.loadReviews(0)),href:"javascript:void(0)"},"Отзывы",2)])]),t.tab===0?(s(),i("div",ct,[t.product.description?(s(),i("p",{key:0,innerHTML:t.product.description,class:"text-justify py-2 fst-italic"},null,8,ut)):(s(),i("p",pt,"Нет описания"))])):o("",!0),t.tab===1?(s(),i("div",ht,[t.reviews.length>0?(s(),i("div",mt,[e("ul",gt,[(s(!0),i(g,null,y(t.reviews,(n,u)=>(s(),i("li",yt,[_(P,{"need-product":!1,modelValue:t.reviews[u],"onUpdate:modelValue":f=>t.reviews[u]=f},null,8,["modelValue","onUpdate:modelValue"])]))),256))]),t.paginate?(s(),b(w,{key:0,simple:!0,onPagination_page:t.nextReviews,pagination:t.paginate},null,8,["onPagination_page","pagination"])):o("",!0)])):o("",!0),t.reviews.length===0&&t.loading_reviews?(s(),i("div",_t,vt)):o("",!0),t.reviews.length===0&&!t.loading_reviews?(s(),i("div",wt," У данного товара еще нет отзывов! Для того чтобы оставить отзыв Вам необходимо заказать данный товар, после чего у вас появится возможность написать ваше впечатление от него;) ")):o("",!0)])):o("",!0),e("nav",ft,[t.product.in_stop_list_at?(s(),i("p",Bt,"Товар недоступен для заказа")):(s(),i("div",kt,[t.inCart(t.product.id)===0?(s(),i("button",{key:0,type:"button",class:l([{"btn-secondary":!t.canProductAction},"btn btn-md btn-primary w-100 rounded-3 p-2"]),disabled:t.product.in_stop_list_at!=null||!t.canProductAction,onClick:r[3]||(r[3]=(...n)=>t.incProductCart&&t.incProductCart(...n))},[c(d(t.product.current_price||0)+"₽ ",1),t.product.old_price>0?(s(),i("span",Ct,d(t.product.old_price||0)+"₽",1)):o("",!0)],10,Pt)):o("",!0),t.inCart(t.product.id)>0?(s(),i("div",jt,[e("button",{type:"button",class:l([{"btn-secondary":!t.canProductAction},"btn btn-md btn-primary p-2"]),disabled:t.product.in_stop_list_at!=null||!t.canProductAction,onClick:r[4]||(r[4]=(...n)=>t.decProductCart&&t.decProductCart(...n))},"- ",10,$t),e("button",{type:"button",class:l([{"btn-secondary":!t.canProductAction},"btn btn-md btn-primary"])},d(t.checkInCart),3),e("button",{type:"button",class:l([{"btn-secondary":!t.canProductAction},"btn btn-md btn-primary p-2"]),disabled:t.product.in_stop_list_at!=null||!t.canProductAction,onClick:r[5]||(r[5]=(...n)=>t.incProductCart&&t.incProductCart(...n))},"+ ",10,Rt)])):o("",!0)]))])])),[[m,t.doSwipeLeft,"swipe",{left:!0}],[m,t.doSwipeRight,"swipe",{right:!0}]]):(s(),b(C,{key:1}))}}});export{Ot as default};
