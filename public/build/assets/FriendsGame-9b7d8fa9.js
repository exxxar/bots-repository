import{_ as f}from"./_plugin-vue_export-helper-c27b6911.js";import{o as n,j as o,l as t,M as h,n as s,K as a,L as d,a7 as p,N as u}from"./index.es-db843bab.js";const y={name:"App",data(){return{action:null,settings:{image:null,rules:null},friendsForm:{friends_invite:0,current_friends:0,needed_friends:0,friends_on_start:0,start_at:null,complete_at:null}}},computed:{currentBot(){return window.currentBot},progress(){let i=this.friendsForm.needed_friends||0,l=this.friendsForm.current_friends||0,c=this.friendsForm.friends_on_start||0;return(l-c)/(i-c)*100}},mounted(){this.prepareUserData()},methods:{start(){this.$store.dispatch("friendsGameStart").then(i=>{this.prepareUserData(),this.$notify({title:"Отлично!",text:"гра началась! Поехали приглашать друзей!",type:"success"})}).catch(()=>{this.$notify({title:"Упс!",text:"Игра почему-то не началась...",type:"error"})})},complete(){this.$store.dispatch("friendsGameFinish").then(i=>{this.prepareUserData(),this.$notify({title:"Отлично!",text:"гра началась! Спасибо за участие в задании, скоро вы получите свои бонусы!",type:"success"})}).catch(()=>{this.$notify({title:"Упс!",text:"Мы не можем закончить это задание....",type:"error"})})},lose(){this.$notify({title:"Упс!",text:"Вы израсходовали все попытки!",type:"error"})},prepareUserData(){return this.$store.dispatch("friendsGamePrepare").then(i=>{this.action=i.action,this.settings.rules=i.rules||null,this.settings.image=i.image||null,this.action.data&&(this.friendsForm.current_friends=this.action.data.current_friends||0,this.friendsForm.needed_friends=this.action.data.needed_friends||0,this.friendsForm.friends_invite=this.action.data.friends_invite||0,this.friendsForm.friends_on_start=this.action.data.friends_on_start||0,this.friendsForm.start_at=this.action.data.start_at||null,this.friendsForm.complete_at=this.action.data.complete_at||null)})}}},g={class:"container py-2"},b={class:"row"},F={class:"col-12"},v={class:"d-flex justify-content-center"},x={class:"img-avatar"},w={class:"alert-light alert"},k=["innerHTML"],B={class:"col-12"},D={key:0,class:"card"},G={class:"card-body"},N={class:"text-center mb-2"},U={class:"fw-bold text-primary"},z={class:"fw-bold text-primary"},C={class:"text-center mb-2"},L={class:"fw-bold text-primary"},M={class:"mb-2 text-center"},S={class:"fw-bold text-primary"},T={class:"progress w-100",style:{height:"40px","border-radius":"25px"},role:"progressbar","aria-label":"Basic example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},V=t("p",{class:"my-2"},[s("Когда полоска вашего прогресса достигнет "),t("strong",{class:"fw-bold text-primary"},"100%"),s(" вы сможете получить свои бонусы!")],-1),j={key:1},H={key:2,class:"card mt-3"},A={class:"card-body"},E={key:0,class:"mt-2 mb-0"},K={class:"fw-bold text-primary"},P={key:1,class:"mt-2 mb-2"},q={class:"fw-bold text-primary"},I=["disabled"];function J(i,l,c,O,e,r){const m=u("lazy");return n(),o("div",g,[t("div",b,[t("div",F,[t("div",v,[t("div",x,[h(t("img",null,null,512),[[m,"/images-by-bot-id/"+r.currentBot.id+"/"+r.currentBot.image]])])]),t("p",w,[s(" Перед началом квеста нажмите кнопку «Начать». Затем перейдите в главное меню Бота и нажмите кнопку «Пригласить Друзей/Подруг». Там вы найдете свою реферальную ссылку, которую легко можно отправить тем, кого хотели бы пригласить в наш Бот. Для выполнения квеста нужно пригласить "),t("strong",null,a((e.friendsForm.needed_friends||0)-(e.friendsForm.friends_on_start||0)),1),s(" друзей/подруг , которые активируют нашего бота по вашей реферальной ссылке. ")]),e.settings.rules?(n(),o("p",{key:0,class:"alert-light alert",innerHTML:e.settings.rules},null,8,k)):d("",!0)]),t("div",B,[e.friendsForm.start_at!=null?(n(),o("div",D,[t("div",G,[t("p",N,[s("У вас сейчас "),t("strong",U,a(e.friendsForm.friends_invite||0),1),s(" / "),t("strong",z,a((e.friendsForm.needed_friends||0)-(e.friendsForm.friends_on_start||0)),1),s(" друзей")]),t("p",C,[s("По заданию приглашено "),t("strong",L,a(e.friendsForm.friends_invite||0),1),s(" друзей")]),t("p",M,[s("Текущий прогресс "),t("strong",S,a(r.progress)+"%",1)]),t("div",T,[t("div",{class:"progress-bar bg-success progress-bar-striped",style:p({width:r.progress+"%"})},a(r.progress.toFixed(2))+"% ",5)]),V])])):d("",!0),e.friendsForm.start_at==null?(n(),o("div",j,[e.friendsForm.complete_at==null&&e.friendsForm.start_at==null?(n(),o("button",{key:0,type:"button",class:"btn w-100 btn-success p-3",onClick:l[0]||(l[0]=(..._)=>r.start&&r.start(..._))},"Приступить к заданию")):d("",!0)])):(n(),o("div",H,[t("div",A,[e.friendsForm.start_at!=null?(n(),o("p",E,[s("Задание начато "),t("strong",K,a(e.friendsForm.start_at),1)])):d("",!0),e.friendsForm.complete_at!=null?(n(),o("p",P,[s("Задание завершено "),t("strong",q,a(e.friendsForm.complete_at),1)])):d("",!0),t("button",{type:"button",onClick:l[1]||(l[1]=(..._)=>r.complete&&r.complete(..._)),disabled:r.progress<100||e.friendsForm.complete_at!=null||e.friendsForm.start_at==null,class:"btn btn-primary p-3 w-100"},"Получить награды",8,I)])]))])])])}const W=f(y,[["render",J]]);export{W as default};
