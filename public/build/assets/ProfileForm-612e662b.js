import{j as k,o as s,k as o,n as t,N as p,M as l,Y as h,a0 as _,F as y,K as v,a3 as U,a1 as w,L as d,l as g,O as F,bA as M,p as f,U as T,W as L}from"./index.es-c4852431.js";import{R as H}from"./ReturnToBot-97343ef5.js";import{_ as V}from"./ProjectInfoCard-0440104d.js";import{_ as C}from"./_plugin-vue_export-helper-c27b6911.js";const a=r=>(T("data-v-ecffb0b9"),r=r(),L(),r),B={key:0},q={key:0,class:"card card-style p-3"},j={key:0,class:"col-12 d-flex justify-content-center mb-3"},$={class:"img-avatar"},D={key:0,class:"img-avatar"},S={key:1},x={class:"col-12"},P=["innerHTML"],N={class:"input-style input-style-2"},E={key:1,class:"col-12"},I=["innerHTML"],O={class:"input-style input-style-2"},z={key:2,class:"col-12"},A=["innerHTML"],R={class:"input-style input-style-2"},W={key:3,class:"col-12"},G=["innerHTML"],K={class:"row mb-0"},Y={class:"col-6 p-3"},J=a(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),Q=a(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),X=[J,Q],Z={class:"col-6 p-3"},ee=a(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),te=a(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),se=[ee,te],oe={key:4,class:"col-12"},ie=["innerHTML"],ne={class:"input-style input-style-2"},le={key:5,class:"col-12"},re=["innerHTML"],ae={class:"input-style input-style-2"},de={class:"col-12"},pe={key:0},ue={class:"text-center"},ce={key:0,class:"input-style input-style-2"},he=["type","onUpdate:modelValue","placeholder","pattern","required"],me={key:1,class:"row mb-0"},_e={class:"col-6 p-3"},be=["onClick"],ye=a(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),fe=a(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),ve=[ye,fe],ge={class:"col-6 p-3"},Fe=["onClick"],ke=a(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),Ue=a(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),we=[ke,Ue],Me={class:"col-12"},Te=a(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),Le=a(()=>t("p",null,[f("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),f(".")],-1)),He={class:"d-flex mb-3"},Ve={class:"pt-1"},Ce={"data-activate":"toggle-id-1",class:"font-500 font-13"},Be={key:0},qe={key:1},je={class:"ml-auto mr-4 pr-2"},$e={class:"custom-control ios-switch"},De=a(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),Se=["disabled"],xe={key:1,class:"card card-style p-3"},Pe=["innerHTML"],Ne=a(()=>t("h6",null,"Ваши данные:",-1)),Ee={class:"mb-0"},Ie={key:0,class:"mb-0"},Oe={key:1,class:"mb-0"},ze={key:2,class:"mb-0"},Ae={key:3,class:"mb-0"},Re={key:4,class:"mb-0"},We={class:"mb-0"},Ge={key:0},Ke={key:1},Ye={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0,need_phone:!0,need_email:!0,need_profile_form_image:!0,form_image:null,pre_birthday_text:null,pre_email_text:null,pre_age_text:null,pre_city_text:null,pre_sex_text:null,pre_name_text:null,pre_phone_text:null,text_after_submit:null},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.loadProfileFormData()},computed:{...k(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(r){const e={value:null};return this.botUser.fields&&this.botUser.fields.find(n=>n.bot_custom_field_setting_id===r)||e},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(r=>{(r.data||[]).forEach(n=>{if(n.is_active){let c=this.getUserFieldValue(n.id),m=c.value,i=c.config;this.vipForm.fields.push({id:n.id,title:n.label,description:n.description,key:n.key,value:n.type===2?m==="1":m,type:n.type,pattern:n.pattern,required:n.required,config:i})}})})},loadProfileFormData(){this.loading=!0,this.$store.dispatch("loadProfileFormData").then(r=>{this.loading=!1,this.$nextTick(()=>{Object.keys(r).forEach(e=>{this.settings[e]=r[e]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveProfileFormData",{dataObject:this.vipForm}).then(r=>{this.loading=!1,this.tg.close()}).catch(()=>{this.loading=!1})}}},Je=Object.assign(Ye,{__name:"ProfileForm",setup(r){return(e,n)=>{const c=F("lazy"),m=F("mask");return s(),o(y,null,[e.botUser?(s(),o("div",B,[e.botUser.is_vip?l("",!0):(s(),o("div",q,[t("form",{onSubmit:n[8]||(n[8]=w((...i)=>e.submit&&e.submit(...i),["prevent"])),class:"row mb-0"},[e.settings.need_profile_form_image?(s(),o("div",j,[t("div",$,[e.settings.form_image?p((s(),o("img",D,null,512)),[[c,e.settings.form_image]]):p((s(),o("img",S,null,512)),[[c,"/images-by-bot-id/"+e.currentBot.id+"/"+e.currentBot.image]])])])):l("",!0),t("div",x,[e.settings.pre_name_text?(s(),o("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_name_text},null,8,P)):l("",!0),t("div",N,[p(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":n[0]||(n[0]=i=>e.vipForm.name=i),"aria-describedby":"vipForm-name",required:""},null,512),[[h,e.vipForm.name]])])]),e.settings.need_phone?(s(),o("div",E,[e.settings.pre_phone_text?(s(),o("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_phone_text},null,8,I)):l("",!0),t("div",O,[p(t("input",{type:"text",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":n[1]||(n[1]=i=>e.vipForm.phone=i),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[m,["+7(###)###-##-##"]],[h,e.vipForm.phone]])])])):l("",!0),e.settings.need_email?(s(),o("div",z,[e.settings.pre_email_text?(s(),o("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_email_text},null,8,A)):l("",!0),t("div",R,[p(t("input",{type:"email",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":n[2]||(n[2]=i=>e.vipForm.email=i),placeholder:"example@test.com","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[h,e.vipForm.email]])])])):l("",!0),e.settings.need_sex?(s(),o("div",W,[e.settings.pre_sex_text?(s(),o("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_sex_text},null,8,G)):l("",!0),t("div",K,[t("div",Y,[t("div",{class:_([{"bg-highlight":e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:n[3]||(n[3]=i=>e.vipForm.sex=!0)},X,2)]),t("div",Z,[t("div",{class:_([{"bg-highlight ":!e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:n[4]||(n[4]=i=>e.vipForm.sex=!1)},se,2)])])])):l("",!0),e.settings.need_birthday?(s(),o("div",oe,[e.settings.pre_birthday_text?(s(),o("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_birthday_text},null,8,ie)):l("",!0),t("div",ne,[p(t("input",{type:"date",class:"form-control text-center font-14 p-3 rounded-s border-theme","onUpdate:modelValue":n[5]||(n[5]=i=>e.vipForm.birthday=i),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[h,e.vipForm.birthday]])])])):l("",!0),e.settings.need_city?(s(),o("div",le,[e.settings.pre_city_text?(s(),o("h6",{key:0,class:"mb-3 text-center",innerHTML:e.settings.pre_city_text},null,8,re)):l("",!0),t("div",ae,[p(t("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=i=>e.vipForm.city=i),class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:"Ваш город","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[h,e.vipForm.city]])])])):l("",!0),(s(!0),o(y,null,v(e.vipForm.fields,(i,u)=>(s(),o("div",de,[e.settings[i.key]?(s(),o("div",pe,[t("h6",ue,d(i.description),1),i.type===0||i.type===1?(s(),o("div",ce,[p(t("input",{type:i.type===1?"number":"text","onUpdate:modelValue":b=>e.vipForm.fields[u].value=b,class:"form-control text-center font-14 p-3 rounded-s border-theme",placeholder:i.title,pattern:e.vipForm.fields[u].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:e.vipForm.fields[u].requried},null,8,he),[[M,e.vipForm.fields[u].value]])])):l("",!0),i.type===2?(s(),o("div",me,[t("div",_e,[t("div",{class:_([{"bg-highlight":e.vipForm.fields[u].value},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:b=>e.vipForm.fields[u].value=!0},ve,10,be)]),t("div",ge,[t("div",{class:_([{"bg-highlight ":!e.vipForm.fields[u].value},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:b=>e.vipForm.fields[u].value=!1},we,10,Fe)])])):l("",!0)])):l("",!0)]))),256)),t("div",Me,[Te,Le,t("div",He,[t("div",Ve,[t("h5",Ce,[e.vipForm.sex?l("",!0):(s(),o("span",Be,"С правилами ознакомилась")),e.vipForm.sex?(s(),o("span",qe,"С правилами ознакомлен")):l("",!0)])]),t("div",je,[t("div",$e,[p(t("input",{"onUpdate:modelValue":n[7]||(n[7]=i=>e.confirm=i),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[U,e.confirm]]),De])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-m btn-full mb-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"}," Отправить анкету ",8,Se)])],32)])),e.botUser.is_vip?(s(),o("div",xe,[t("p",{innerHTML:e.settings.text_after_submit},null,8,Pe),Ne,t("p",Ee,"Имя: "+d(e.botUser.name||"Не указано"),1),e.settings.need_phone?(s(),o("p",Ie,"Телефон: "+d(e.botUser.phone||"Не указано"),1)):l("",!0),e.settings.need_email?(s(),o("p",Oe,"Email: "+d(e.botUser.email||"Не указано"),1)):l("",!0),e.settings.need_city?(s(),o("p",ze,"Город: "+d(e.botUser.city||"Не указано"),1)):l("",!0),e.settings.need_birthday?(s(),o("p",Ae,"Дата рождения: "+d(e.botUser.birthday||"Не указано"),1)):l("",!0),e.settings.need_sex?(s(),o("p",Re,"Пол: "+d(e.botUser.sex?"Мужской":"Женский"),1)):l("",!0),(s(!0),o(y,null,v(e.vipForm.fields,i=>(s(),o("p",We,[f(d(i.title)+": ",1),i.config.type===2?(s(),o("span",Ge,d(i.value===!1?"Нет":"Да"),1)):l("",!0),i.config.type===0||i.config.type===1?(s(),o("span",Ke,d(i.value),1)):l("",!0)]))),256)),g(H,{class:"mb-2"})])):l("",!0)])):l("",!0),g(V)],64)}}}),tt=C(Je,[["__scopeId","data-v-ecffb0b9"]]);export{tt as default};
