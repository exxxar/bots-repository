import{j as p,o as a,k as l,n as e,a1 as u,N as i,Y as _,a3 as d,L as r,F as b,K as m,H as f,M as h,p as c,l as v}from"./index.es-c4852431.js";import{P as g}from"./Pagination-b758f7ed.js";import{R as k}from"./ReturnToBot-97343ef5.js";const y={class:"card card-style bg-theme pb-0"},w={class:"content"},U=e("p",{class:"mb-0"},"Введите номер телефона (или фрагмент) пользователя или его Ф.И.О.",-1),x={class:"search-box bg-theme rounded-s shadow-xl bottom-0"},B=e("i",{class:"fa fa-search"},null,-1),j={class:"d-flex w-100",style:{height:"70px","overflow-x":"scroll","min-width":"100%"}},$={class:"scroll d-flex",style:{"min-width":"1000px"}},C={class:"fac fac-checkbox py-2 my-2"},N=e("span",null,null,-1),V=e("label",{for:"need-admins-checkbox"},"Только администраторы",-1),P={class:"fac fac-checkbox py-2 my-2"},H=e("span",null,null,-1),M=e("label",{for:"need-with-phone-checkbox"},"Только с телефоном",-1),O={class:"fac fac-checkbox py-2 my-2"},F=e("span",null,null,-1),S=e("label",{for:"need-deliveryman"},"Только доставщики",-1),T={class:"fac fac-checkbox py-2 my-2"},D=e("span",null,null,-1),L=e("label",{for:"need-without-phone-checkbox"},"Только без телефоном",-1),R={class:"fac fac-checkbox py-2 my-2"},E=e("span",null,null,-1),G=e("label",{for:"need-vip-checkbox"},"Только вип",-1),K={class:"fac fac-checkbox py-2 my-2"},Y=e("span",null,null,-1),q=e("label",{for:"need-not-vip-checkbox"},"Только не вип",-1),z=e("button",{type:"submit",class:"btn btn-m btn-full my-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"},[e("i",{class:"fa-solid fa-magnifying-glass mr-1"}),c("Искать ")],-1),A={key:0,class:"card card-style mx-0 mt-3 pt-2 pb-0 mb-2"},I={class:"w-100 text-center p-2 mb-0"},J={class:"list-group list-custom-large"},Q=["onClick"],W={key:0,class:"fa-solid fa-a color-red2-dark"},X={key:1,class:"fa-solid fa-u color-green2-dark"},Z=e("i",{class:"fa fa-angle-right mr-2"},null,-1),ee=e("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),se=e("i",{class:"fa-regular fa-file-excel mr-2"},null,-1),te={data(){return{loading:!0,users:null,search:null,need_admins:!1,need_vip:!1,need_not_vip:!1,need_with_phone:!1,need_without_phone:!1,need_deliveryman:!1,users_paginate_object:null}},computed:{...p(["getUsers","getUsersPaginateObject"])},mounted(){this.loadUsers(0)},methods:{downloadBotUsers(){this.$botNotification.notification("Внимание!","Начался формироваться документ статистики!"),this.$store.dispatch("downloadBotUsers").then(n=>{this.$botNotification.success("Отлично!","Документ успешно сформирован")}).catch(()=>{this.$botNotification.warning("Упс...","Что-то пошло не так...")})},downloadCashBackHistory(){this.$botNotification.notification("Внимание!","Начался формироваться документ статистики!"),this.$store.dispatch("downloadCashBackHistory").then(n=>{this.$botNotification.success("Отлично!","Документ успешно сформирован")}).catch(()=>{this.$botNotification.warning("Упс...","Что-то пошло не так...")})},nextUsers(n){this.loadUsers(n)},selectUser(n){this.$emit("select",n)},loadUsers(n=0){this.loading=!0,this.$store.dispatch("loadUsers",{dataObject:{search:this.search,need_admins:this.need_admins,need_vip:this.need_vip,need_not_vip:this.need_not_vip,need_deliveryman:this.need_deliveryman,need_with_phone:this.need_with_phone,need_without_phone:this.need_without_phone},page:n}).then(s=>{this.loading=!1,this.users=this.getUsers,this.users_paginate_object=this.getUsersPaginateObject}).catch(()=>{this.loading=!1})}}},de=Object.assign(te,{__name:"UserSearchForm",setup(n){return(s,o)=>(a(),l("div",y,[e("div",w,[U,e("form",{onSubmit:o[7]||(o[7]=u(t=>s.loadUsers(0),["prevent"]))},[e("div",x,[B,i(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=t=>s.search=t),class:"border-0",placeholder:"Кого ищем?"},null,512),[[_,s.search]])]),e("div",j,[e("div",$,[e("div",C,[N,i(e("input",{id:"need-admins-checkbox","onUpdate:modelValue":o[1]||(o[1]=t=>s.need_admins=t),value:"false",type:"checkbox"},null,512),[[d,s.need_admins]]),V]),e("div",P,[H,i(e("input",{id:"need-with-phone-checkbox","onUpdate:modelValue":o[2]||(o[2]=t=>s.need_with_phone=t),value:"false",type:"checkbox"},null,512),[[d,s.need_with_phone]]),M]),e("div",O,[F,i(e("input",{id:"need-deliveryman","onUpdate:modelValue":o[3]||(o[3]=t=>s.need_deliveryman=t),value:"false",type:"checkbox"},null,512),[[d,s.need_deliveryman]]),S]),e("div",T,[D,i(e("input",{id:"need-without-phone-checkbox","onUpdate:modelValue":o[4]||(o[4]=t=>s.need_without_phone=t),value:"false",type:"checkbox"},null,512),[[d,s.need_without_phone]]),L]),e("div",R,[E,i(e("input",{id:"need-vip-checkbox","onUpdate:modelValue":o[5]||(o[5]=t=>s.need_vip=t),value:"false",type:"checkbox"},null,512),[[d,s.need_vip]]),G]),e("div",K,[Y,i(e("input",{id:"need-not-vip-checkbox","onUpdate:modelValue":o[6]||(o[6]=t=>s.need_not_vip=t),value:"false",type:"checkbox"},null,512),[[d,s.need_not_vip]]),q])])]),z],32),s.users?(a(),l("div",A,[e("small",I,"Найдено "+r(s.users_paginate_object.meta.total),1),e("div",J,[(a(!0),l(b,null,m(s.users,(t,oe)=>(a(),l("a",{href:"javascript:void(0)",onClick:ne=>s.selectUser(t)},[t.is_admin?(a(),l("i",W)):(a(),l("i",X)),e("span",null,r(t.name||t.fio_from_telegram||"Не указано"),1),e("strong",null,r(t.phone||"Телефон не указан"),1),Z],8,Q))),256))]),s.users_paginate_object?(a(),f(g,{key:0,simple:!0,class:"mt-4",onPagination_page:s.nextUsers,pagination:s.users_paginate_object},null,8,["onPagination_page","pagination"])):h("",!0)])):h("",!0),e("a",{href:"javascript:void(0)",onClick:o[8]||(o[8]=(...t)=>s.downloadBotUsers&&s.downloadBotUsers(...t)),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-blue1-dark color-blue1-dark bg-theme"},[ee,c(" Скачать список пользователей ")]),e("a",{href:"javascript:void(0)",onClick:o[9]||(o[9]=(...t)=>s.downloadCashBackHistory&&s.downloadCashBackHistory(...t)),class:"btn btn-border btn-m btn-full mb-3 rounded-sm text-uppercase font-900 border-blue1-dark color-blue1-dark bg-theme"},[se,c(" Скачать историю CashBack ")]),v(k,{class:"mt-3"})])]))}});export{de as _};
