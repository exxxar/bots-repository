import{V as R}from"./vue3-json-editor.esm.prod-a2876a2f.js";import{t as _,o as i,k as d,l as x,w as f,n as e,M as c,N as p,a3 as g,F as k,K as v,Y as V,H as N,p as u}from"./index.es-c4852431.js";/* empty css                                                            */import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";import{v as J}from"./v4-4a60fe23.js";const K={props:["editedKeyboard","type"],components:{Vue3JsonEditor:R},computed:{uuid(){return J()}},watch:{keyboard:{handler:function(s){this.save()},deep:!0}},data(){return{showCode:!1,showAssign:!1,selectedRow:null,load:!1,rowCount:1,keyboard:[],select:{row:0,col:0,type:this.type||"reply"}}},mounted(){this.editedKeyboard&&this.$nextTick(()=>{this.keyboard=this.editedKeyboard.menu})},methods:{moveCol(s,t=0){s!==this.select.row&&(this.select.row=s,this.select.col=0,this.select.text=this.keyboard[this.select.row][this.select.col].text);let a=this.select.row,r=this.select.col,l=this.keyboard[a].length,o=t===0?r-1>=0?r-1:l-1:r<l-1?r+1:0,m=this.keyboard[a][r];this.keyboard[a][r]=this.keyboard[a][o],this.keyboard[a][o]=m,this.select.row=a,this.select.col=o,this.select.text=this.keyboard[a][o].text},moveRow(s=0){if(this.selectedRow==null)return;let t=this.keyboard.length,a=s===0?this.selectedRow-1>=0?this.selectedRow-1:t-1:this.selectedRow<t-1?this.selectedRow+1:0,r=this.keyboard[this.selectedRow];this.keyboard[this.selectedRow]=this.keyboard[a],this.keyboard[a]=r,this.selectedRow=a},openKeyboardEditorMenu(s,t){this.$botPages.keyboard({row:s,col:t,type:this.type},this.keyboard)},save(){this.$emit("save",this.keyboard)},onJsonChange(s){this.keyboard=s,this.save()},removeColFromRow(s){this.keyboard[s].length>1?this.keyboard[s].splice(this.keyboard[s].length-1,1):this.keyboard.splice(s,1),this.keyboard.length===0&&(this.selectedRow=null),this.save()},addRowAbove(){this.addRow(!0)},addRowBelow(){this.addRow(!1)},addRow(s=!1){if(this.selectedRow==null)this.keyboard?this.keyboard.push([{text:"No Text"}]):this.keyboard=[[{text:"No Text"}]],this.selectedRow=null;else{let t=s?this.selectedRow:this.selectedRow+1;this.keyboard.splice(t,0,[{text:"No Text"}])}this.save()},addColToRow(s){this.keyboard[s].push({text:"No Text"}),this.save()},selectIndex(s,t){this.selectedRow=s,this.select.row=s,this.select.col=t,this.select.text=this.keyboard[s][t].text,this.load=!0,this.$nextTick(()=>{this.load=!1})},removeCol(s,t){this.keyboard[s].length>1?this.keyboard[s].splice(t,1):this.keyboard.splice(1,1),this.save()}}},B=e("p",{class:"mb-2"},[e("i",{class:"fa-regular fa-circle-question mr-1"}),u("Инструкция")],-1),E=e("div",{class:"text-left w-100"},[e("p",{class:"mb-0 text-white"},[e("i",{class:"fa-solid fa-arrow-down"}),u(" - добавление в нижнюю часть новой строки (кнопки)")]),e("p",{class:"mb-0 text-white"},[e("i",{class:"fa-solid fa-arrow-turn-up"}),u(" - добавление строки над выбранной строкой")]),e("p",{class:"mb-0 text-white"},[e("i",{class:"fa-solid fa-arrow-turn-down"}),u(" - добавление строки под выбранной строкой")]),e("p",{class:"mb-0 text-white"},[e("i",{class:"fa-solid fa-plus"}),u(" - добавление кнопки на строку")]),e("p",{class:"mb-0 text-white"},[e("i",{class:"fa-solid fa-minus"}),u(" - удаление крайней левой кнопки из строки либо самой строки")]),e("p",{class:"mb-0 text-white"},[e("i",{class:"fa-solid fa-xmark"}),u(" - отмена выделения")])],-1),M={class:"mb-2 d-flex justify-content-between align-items-center"},A=e("i",{class:"fa-solid fa-arrow-down"},null,-1),F=[A],U=e("i",{class:"fa-solid fa-arrow-turn-up"},null,-1),j=[U],P=e("i",{class:"fa-solid fa-arrow-turn-down"},null,-1),O=[P],S=e("i",{class:"fa-solid fa-arrows-up-to-line"},null,-1),q=[S],D=e("i",{class:"fa-solid fa-arrows-down-to-line"},null,-1),H=[D],L=e("i",{class:"fa-solid fa-xmark"},null,-1),Y=[L],z={class:"form-check"},G=["id"],Q=["for"],W={key:0,class:"text-danger font-weight-bold p-0 m-0"},X={key:1,style:{"overflow-x":"scroll",padding:"5px 20px"},class:"mb-3"},Z={style:{"min-width":"1000px",width:"100%"}},I={class:"row mb-0"},$={class:"col-2 d-flex justify-content-around p-2"},ee=["onClick"],te=e("i",{class:"fa-solid fa-plus"},null,-1),se=[te],oe=["onClick"],le=e("i",{class:"fa-solid fa-minus"},null,-1),ie=[le],ne=["onClick"],de=e("i",{class:"fa-solid fa-caret-left"},null,-1),ae=[de],ce=["onClick"],re=e("i",{class:"fa-solid fa-caret-right"},null,-1),he=[re],ue={class:"col-10 d-flex justify-content-center p-1"},be={class:"btn-group dropdown-center w-100 m-1"},we=["onClick","onUpdate:modelValue"],me=["onClick"],ye=e("i",{class:"fa-solid fa-bars"},null,-1),ke=[ye],_e={key:0,class:"mb-0"},fe=e("label",{class:"form-label",id:"bot-domain"},"JSON-код клавиатуры",-1);function pe(s,t,a,r,l,o){const m=_("Popper"),C=_("Vue3JsonEditor");return i(),d(k,null,[x(m,null,{content:f(()=>[E]),default:f(()=>[B]),_:1}),e("div",M,[e("div",null,[l.selectedRow==null?(i(),d("button",{key:0,title:"добавление в нижнюю часть новой строки (кнопки)",type:"button",class:"btn btn-primary mb-2",onClick:t[0]||(t[0]=(...n)=>o.addRow&&o.addRow(...n))},F)):c("",!0),l.selectedRow!=null?(i(),d("button",{key:1,type:"button",title:"добавление строки над выбранной строкой",class:"btn btn-primary mb-2",onClick:t[1]||(t[1]=(...n)=>o.addRowAbove&&o.addRowAbove(...n))},j)):c("",!0),l.selectedRow!=null?(i(),d("button",{key:2,type:"button",title:"добавление строки под выбранной строкой",class:"btn btn-primary mb-2 ml-2",onClick:t[2]||(t[2]=(...n)=>o.addRowBelow&&o.addRowBelow(...n))},O)):c("",!0),l.selectedRow!=null?(i(),d("button",{key:3,type:"button",class:"btn btn-primary mb-2 ml-2",onClick:t[3]||(t[3]=n=>o.moveRow(0))},q)):c("",!0),l.selectedRow!=null?(i(),d("button",{key:4,type:"button",class:"btn btn-primary mb-2 ml-2",onClick:t[4]||(t[4]=n=>o.moveRow(1))},H)):c("",!0),l.selectedRow!=null?(i(),d("button",{key:5,type:"button",class:"btn btn-outline-danger mb-2 ml-2",onClick:t[5]||(t[5]=n=>l.selectedRow=null)},Y)):c("",!0)]),e("div",z,[p(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=n=>l.showCode=n),id:"showCode"+o.uuid},null,8,G),[[g,l.showCode]]),e("label",{class:"form-check-label",for:"showCode"+o.uuid}," Отобразить код ",8,Q)])]),l.keyboard.length===0?(i(),d("p",W,"Элементы клавиатуры еще не добавлены")):c("",!0),l.keyboard.length>0?(i(),d("div",X,[e("div",Z,[(i(!0),d(k,null,v(l.keyboard,(n,h)=>(i(),d("div",I,[e("div",$,[e("button",{type:"button",title:"добавление кнопки на строку",class:"btn btn-link w-100",onClick:b=>o.addColToRow(h)},se,8,ee),e("button",{type:"button",title:"удаление крайней левой кнопки из строки либо самой строки",class:"btn btn-link w-100",onClick:b=>o.removeColFromRow(h)},ie,8,oe),e("button",{type:"button",class:"btn btn-link w-100",onClick:b=>o.moveCol(h,0)},ae,8,ne),e("button",{type:"button",class:"btn btn-link w-100",onClick:b=>o.moveCol(h,1)},he,8,ce)]),e("div",ue,[(i(!0),d(k,null,v(n,(b,w)=>(i(),d("div",be,[p(e("input",{type:"text",onClick:y=>o.selectIndex(h,w),class:"btn btn-outline-primary w-100","onUpdate:modelValue":y=>l.keyboard[h][w].text=y},null,8,we),[[V,l.keyboard[h][w].text]]),e("button",{type:"button",onClick:y=>o.openKeyboardEditorMenu(h,w),class:"btn btn-outline-primary","aria-expanded":"false","data-bs-reference":"parent"},ke,8,me)]))),256))])]))),256)),l.showCode?(i(),d("div",_e,[fe,l.load?c("",!0):(i(),N(C,{key:0,mode:"code",modelValue:l.keyboard,"onUpdate:modelValue":t[7]||(t[7]=n=>l.keyboard=n),"show-btns":!1,expandedOnStart:!0,onJsonChange:o.onJsonChange},null,8,["modelValue","onJsonChange"]))])):c("",!0)])])):c("",!0)],64)}const Ve=T(K,[["render",pe]]);export{Ve as K};
