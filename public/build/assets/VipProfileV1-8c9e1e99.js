import{g as B,o as n,j as r,l as t,a0 as v,M as d,W as h,n as a,K as _,L as c,$ as y,F,J as k,a2 as U,N as w,bA as S,T as V,U as C}from"./index.es-db843bab.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";const q={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.$nextTick(()=>{this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0}}),this.loadCashBackModuleData()},computed:{...B(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(u){const i={value:null};return this.botUser.fields&&this.botUser.fields.find(m=>m.bot_custom_field_setting_id===u)||i},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(u=>{(u.data||[]).forEach(m=>{if(m.is_active){let f=this.getUserFieldValue(m.id),e=f.value,l=f.config;this.vipForm.fields.push({id:m.id,title:m.label,description:m.description,key:m.key,value:m.type===2?e==="1":e,type:m.type,pattern:m.pattern,required:m.required,config:l})}})})},nextStep(){this.step++},loadCashBackModuleData(){this.loading=!0,this.$store.dispatch("loadCashBackModuleData").then(u=>{this.loading=!1,this.$nextTick(()=>{Object.keys(u).forEach(i=>{this.settings[i]=u[i]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveVip",{...this.vipForm}).then(u=>{this.loading=!1,this.$notify({title:"Отлично!",text:"Вы успешно заполнили форму и стали наши VIP-пользователем!",type:"success"}),this.tg.close()}).catch(()=>{this.loading=!1,this.$notify({title:"Упс!",text:"Ошибка заполнения формы!",type:"error"})})}}},o=u=>(V("data-v-233896c2"),u=u(),C(),u),M={key:0,class:"container py-3"},D={class:"row"},I={key:0,class:"col-12"},T={class:"col-12 d-flex justify-content-center mb-3"},P={class:"img-avatar"},N={class:"col-12"},z=o(()=>t("p",{class:"mb-3"},[t("em",null,[a("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),a(" Я хочу поздравить Вас и дать возможность получать неограниченные преимущества нашего сервиса! Для начала нам нужно с Вами познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1)),E=o(()=>t("h6",{class:"text-center my-3"},"Как мне к Вам обращаться?",-1)),A={class:"form-floating"},L=o(()=>t("label",{for:"vipForm-name"},"Ф.И.О.",-1)),W={class:"col-12"},G={key:0,class:"mb-3"},J=o(()=>t("h6",{class:"text-center my-3"},"Введите свой номер телефона",-1)),K={class:"form-floating"},O=o(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),H={key:0,class:"col-12"},Q=o(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),R=o(()=>t("h6",{class:"text-center my-3"},"Вы мужчина или женщина?",-1)),X={class:"row mb-2"},Y={class:"col-6"},Z=o(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),$=o(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),tt=[Z,$],et={class:"col-6"},st=o(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),ot=o(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),it=[st,ot],lt={key:1,class:"col-12"},nt=o(()=>t("p",{class:"mb-3"},[t("em",null,"Для того, чтобы я мог поздравлять Вас с днем рождения и сделать Вам приятно, мне нужно знать, когда он у Вас")],-1)),rt=o(()=>t("h6",{class:"text-center my-3"},"Введите свой день рождения",-1)),ct={class:"form-floating"},dt=o(()=>t("label",{for:"vipForm-phone"},"Дата рождения",-1)),at={key:2,class:"col-12"},mt=o(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания.")],-1)),ut=o(()=>t("h6",{class:"text-center my-3"},"Какой у Вас город?",-1)),_t={class:"form-floating"},pt=o(()=>t("label",{for:"vipForm-city"},"Город проживания",-1)),ht={class:"col-12"},bt={key:0},vt={class:"text-center my-3"},yt={key:0,class:"form-floating"},ft=["type","onUpdate:modelValue","placeholder","pattern","required"],gt=["for"],xt={key:1,class:"row mb-2"},Ft={class:"col-6"},kt=["onClick"],Ut=o(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),wt=o(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),Bt=[Ut,wt],St={class:"col-6"},Vt=["onClick"],Ct=o(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),jt=o(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),qt=[Ct,jt],Mt={class:"col-12"},Dt=o(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),It=o(()=>t("p",null,[a("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"https://telegra.ph/Politika-konfidencialnosti-12-29-5",target:"_blank"},"политикой конфиденциальности"),a(".")],-1)),Tt={class:"d-flex mb-3"},Pt={class:"form-check form-switch"},Nt={class:"form-check-label",for:"toggle-id-1"},zt={key:0},Et={key:1},At=["disabled"],Lt={key:1,class:"col-12"},Wt={class:"col-12 d-flex justify-content-center mb-3"},Gt={class:"img-avatar"},Jt={class:"col-12"},Kt=o(()=>t("p",{class:"mb-3"},[t("em",null,[a("Приветствую Вас, "),t("strong",null,"Дорогой друг!"),a(" Я хочу поздравить Вас и дать возможность получать неограниченные преимушества нашего сервиса! Для начала нам нужно с Вами познакомиться - это поможет сделать использование сервиса более комфортным и взаимовыгодным!")])],-1)),Ot=o(()=>t("h6",{class:"text-center my-3"},"Как мне к Вам обращаться?",-1)),Ht={class:"form-floating"},Qt=o(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),Rt={class:"col-12 d-flex justify-content-center mb-3"},Xt={class:"img-avatar"},Yt={class:"col-12"},Zt={class:"mb-3"},$t=o(()=>t("h6",{class:"text-center my-3"},"Введите свой номер телефона",-1)),te={class:"form-floating"},ee=o(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),se=o(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),oe={class:"col-12 d-flex justify-content-center mb-3"},ie={class:"img-avatar"},le={class:"col-12"},ne=o(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог обращаться к Вам правильно, скажи мне, какого Вы пола?")],-1)),re=o(()=>t("h6",{class:"text-center my-3"},"Ты мужчина или женщина?",-1)),ce={class:"row mb-2"},de={class:"col-6"},ae=o(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),me=o(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),ue=[ae,me],_e={class:"col-6"},pe=o(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),he=o(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),be=[pe,he],ve=o(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),ye={class:"col-12 d-flex justify-content-center mb-3"},fe={class:"img-avatar"},ge={class:"col-12"},xe=o(()=>t("p",{class:"mb-3"},[t("em",null,"Чтобы я мог показывать Вам информацию, актуальную для Вашего города, мне нужно знать город Вашего проживания.")],-1)),Fe=o(()=>t("h6",{class:"text-center my-3"},"Какой у Вас город?",-1)),ke={class:"form-floating"},Ue=o(()=>t("label",{for:"vipForm-city"},"Город проживания",-1)),we=o(()=>t("button",{class:"btn btn-outline-primary p-3 w-100"}," Следующий шаг ",-1)),Be={class:"col-12 d-flex justify-content-center mb-3"},Se={class:"img-avatar"},Ve={class:"col-12"},Ce=o(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем продолжить, пожалуйста, прочитайте мои условия использования и дайте свое согласие на их принятие.")],-1)),je=o(()=>t("h6",{class:"text-center my-3"},"Последний шаг",-1)),qe=o(()=>t("p",null,[a("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"#"},"политикой конфиденциальности"),a(".")],-1)),Me={class:"d-flex mb-3"},De={class:"pt-1"},Ie={"data-activate":"toggle-id-1",class:"font-500 font-13"},Te={key:0},Pe={key:1},Ne={class:"ml-auto mr-4 pr-2"},ze={class:"custom-control ios-switch"},Ee=o(()=>t("label",{class:"custom-control-label",for:"toggle-id-1"},null,-1)),Ae=["disabled"],Le={key:2,class:"col-12"},We={class:"card"},Ge={class:"card-body"},Je=o(()=>t("li",null,"Накопление баллов за покупки",-1)),Ke=o(()=>t("li",null,"Оплата товаров через баллы",-1)),Oe=o(()=>t("li",null,"Реферальная программа",-1)),He=o(()=>t("h6",null,"Ваши данные:",-1)),Qe={class:"mb-0"},Re={class:"mb-0"},Xe={class:"mb-0"},Ye={class:"mb-0"},Ze={class:"mb-0"},$e={key:0},ts={key:1};function es(u,i,m,f,e,l){const b=w("lazy"),x=w("mask");return e.botUser?(n(),r("div",M,[t("div",D,[!e.botUser.is_vip&&e.settings.display_type==0?(n(),r("div",I,[t("form",{onSubmit:i[7]||(i[7]=v((...s)=>l.submit&&l.submit(...s),["prevent"])),class:"row mb-2"},[t("div",T,[t("div",P,[d(t("img",null,null,512),[[b,"/images-by-bot-id/"+l.currentBot.id+"/"+l.currentBot.image]])])]),t("div",N,[z,E,t("div",A,[d(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":i[0]||(i[0]=s=>e.vipForm.name=s),"aria-describedby":"vipForm-name",required:""},null,512),[[h,e.vipForm.name]]),L])]),t("div",W,[e.vipForm.name?(n(),r("p",G,[t("em",null,[a("- Отлично, "),t("strong",null,_(e.vipForm.name),1),a("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])])):c("",!0),J,t("div",K,[d(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":i[1]||(i[1]=s=>e.vipForm.phone=s),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[x,"+7(###)###-##-##"],[h,e.vipForm.phone]]),O])]),e.settings.need_sex?(n(),r("div",H,[Q,R,t("div",X,[t("div",Y,[t("div",{class:y([{"bg-primary text-white":e.vipForm.sex},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:i[2]||(i[2]=s=>e.vipForm.sex=!0)},tt,2)]),t("div",et,[t("div",{class:y([{"bg-primary text-white":!e.vipForm.sex},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:i[3]||(i[3]=s=>e.vipForm.sex=!1)},it,2)])])])):c("",!0),e.settings.need_birthday?(n(),r("div",lt,[nt,rt,t("div",ct,[d(t("input",{type:"date",class:"form-control text-center","onUpdate:modelValue":i[4]||(i[4]=s=>e.vipForm.birthday=s),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[h,e.vipForm.birthday]]),dt])])):c("",!0),e.settings.need_city?(n(),r("div",at,[mt,ut,t("div",_t,[d(t("input",{type:"text","onUpdate:modelValue":i[5]||(i[5]=s=>e.vipForm.city=s),class:"form-control text-center",placeholder:"Краснодар","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[h,e.vipForm.city]]),pt])])):c("",!0),(n(!0),r(F,null,k(e.vipForm.fields,(s,p)=>(n(),r("div",ht,[e.settings[s.key]?(n(),r("div",bt,[t("h6",vt,_(s.description),1),s.type===0||s.type===1?(n(),r("div",yt,[d(t("input",{type:s.type===1?"number":"text","onUpdate:modelValue":g=>e.vipForm.fields[p].value=g,class:"form-control text-center",placeholder:s.title,pattern:e.vipForm.fields[p].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:e.vipForm.fields[p].required||!1},null,8,ft),[[S,e.vipForm.fields[p].value]]),t("label",{for:"vipForm-field"+p},_(s.title),9,gt)])):c("",!0),s.type===2?(n(),r("div",xt,[t("div",Ft,[t("div",{class:y([{"bg-primary":e.vipForm.fields[p].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:g=>e.vipForm.fields[p].value=!0},Bt,10,kt)]),t("div",St,[t("div",{class:y([{"bg-primary":!e.vipForm.fields[p].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:g=>e.vipForm.fields[p].value=!1},qt,10,Vt)])])):c("",!0)])):c("",!0)]))),256)),t("div",Mt,[Dt,It,t("div",Tt,[t("div",Pt,[d(t("input",{class:"form-check-input","onUpdate:modelValue":i[6]||(i[6]=s=>e.confirm=s),type:"checkbox",role:"switch",id:"toggle-id-1"},null,512),[[U,e.confirm]]),t("label",Nt,[e.vipForm.sex?c("",!0):(n(),r("span",zt,"С правилами ознакомилась")),e.vipForm.sex?(n(),r("span",Et,"С правилами ознакомлен")):c("",!0)])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-primary p-3 w-100"}," Отправить анкету ",8,At)])],32)])):c("",!0),!e.botUser.is_vip&&e.settings.display_type==1?(n(),r("div",Lt,[e.step===0?(n(),r("form",{key:0,onSubmit:i[9]||(i[9]=v((...s)=>l.nextStep&&l.nextStep(...s),["prevent"])),class:"row mb-2"},[t("div",Wt,[t("div",Gt,[d(t("img",null,null,512),[[b,"/images-by-bot-id/"+l.currentBot.id+"/"+l.currentBot.image]])])]),t("div",Jt,[Kt,Ot,t("div",Ht,[d(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":i[8]||(i[8]=s=>e.vipForm.name=s),"aria-describedby":"vipForm-name",required:""},null,512),[[h,e.vipForm.name]])]),Qt])],32)):c("",!0),e.step===1?(n(),r("form",{key:1,onSubmit:i[11]||(i[11]=v((...s)=>l.nextStep&&l.nextStep(...s),["prevent"])),class:"row mb-2"},[t("div",Rt,[t("div",Xt,[d(t("img",null,null,512),[[b,"/images-by-bot-id/"+l.currentBot.id+"/"+l.currentBot.image]])])]),t("div",Yt,[t("p",Zt,[t("em",null,[a("- Отлично, "),t("strong",null,_(e.vipForm.name),1),a("! А теперь, чтобы Вы могли пользоваться всеми моими функциями, мне нужен Ваш номер телефона. Можете ввести его?")])]),$t,t("div",te,[d(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":i[10]||(i[10]=s=>e.vipForm.phone=s),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[x,"+7(###)###-##-##"],[h,e.vipForm.phone]]),ee]),se])],32)):c("",!0),e.step===2?(n(),r("form",{key:2,onSubmit:i[14]||(i[14]=v((...s)=>l.nextStep&&l.nextStep(...s),["prevent"])),class:"row mb-2"},[t("div",oe,[t("div",ie,[d(t("img",null,null,512),[[b,"/images-by-bot-id/"+l.currentBot.id+"/"+l.currentBot.image]])])]),t("div",le,[ne,re,t("div",ce,[t("div",de,[t("div",{class:y([{"bg-highlight":e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:i[12]||(i[12]=s=>e.vipForm.sex=!0)},ue,2)]),t("div",_e,[t("div",{class:y([{"bg-highlight ":!e.vipForm.sex},"btn btn-border btn-m btn-full border-highlight rounded-s shadow-s w-100 p-3 d-flex justify-content-between flex-column align-items-center"]),onClick:i[13]||(i[13]=s=>e.vipForm.sex=!1)},be,2)])]),ve])],32)):c("",!0),e.step===3?(n(),r("form",{key:3,onSubmit:i[16]||(i[16]=v((...s)=>l.nextStep&&l.nextStep(...s),["prevent"])),class:"row mb-2"},[t("div",ye,[t("div",fe,[d(t("img",null,null,512),[[b,"/images-by-bot-id/"+l.currentBot.id+"/"+l.currentBot.image]])])]),t("div",ge,[xe,Fe,t("div",ke,[d(t("input",{type:"text","onUpdate:modelValue":i[15]||(i[15]=s=>e.vipForm.city=s),class:"form-control text-center",placeholder:"Краснодар",id:"vipForm-city","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[h,e.vipForm.city]]),Ue]),we])],32)):c("",!0),e.step===4?(n(),r("form",{key:4,onSubmit:i[19]||(i[19]=v((...s)=>l.submit&&l.submit(...s),["prevent"])),class:"row mb-2"},[t("div",Be,[t("div",Se,[d(t("img",null,null,512),[[b,"/images-by-bot-id/"+l.currentBot.id+"/"+l.currentBot.image]])])]),t("div",Ve,[Ce,je,qe,t("div",Me,[t("div",De,[t("h5",Ie,[e.vipForm.sex?c("",!0):(n(),r("span",Te,"С правилами озакномилась")),e.vipForm.sex?(n(),r("span",Pe,"С правилами ознакомлен")):c("",!0)])]),t("div",Ne,[t("div",ze,[d(t("input",{"onUpdate:modelValue":i[17]||(i[17]=s=>e.confirm=s),type:"checkbox",class:"ios-input",id:"toggle-id-1"},null,512),[[U,e.confirm]]),Ee])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-outline-primary p-3 w-100"}," Отправить анкету ",8,Ae),t("button",{type:"button",onClick:i[18]||(i[18]=s=>e.step=0),class:"btn btn-outline-primary p-3 w-100 mb-2"}," Исправить ошибки ")])],32)):c("",!0)])):c("",!0),e.botUser.is_vip?(n(),r("div",Le,[t("div",We,[t("div",Ge,[a(" Поздравляем! Вы являетесь нашим VIP-пользователем! Вам доступны следующие возможности: "),t("ul",null,[Je,Ke,Oe,t("li",null,[He,t("p",Qe,"Имя: "+_(e.botUser.name||"Не указано"),1),t("p",Re,"Телефон: "+_(e.botUser.phone||"Не указано"),1),t("p",Xe,"Город: "+_(e.botUser.city||"Не указано"),1),t("p",Ye,"Пол: "+_(e.botUser.sex?"Мужской":"Женский"),1),(n(!0),r(F,null,k(e.vipForm.fields,s=>(n(),r("p",Ze,[a(_(s.title)+": ",1),s.config.type===2?(n(),r("span",$e,_(s.value===!1?"Нет":"Да"),1)):c("",!0),s.config.type===0||s.config.type===1?(n(),r("span",ts,_(s.value),1)):c("",!0)]))),256))])])])])])):c("",!0)])])):c("",!0)}const is=j(q,[["render",es],["__scopeId","data-v-233896c2"]]);export{is as default};
