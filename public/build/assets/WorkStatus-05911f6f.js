import{U as l}from"./UserInfo-27054add.js";import{R as h}from"./ReturnToBot-97343ef5.js";import{j as c,o as s,k as o,n as e,l as d,M as r}from"./index.es-c4852431.js";import"./_plugin-vue_export-helper-c27b6911.js";const b={key:0},u={key:0,class:"card card-style"},f={class:"content mb-2"},g=e("h3",null,"Информация о пользователе",-1),m=e("p",null," Ваша персональная информация ",-1),p=e("div",{class:"divider-icon divider-margins bg-blue2-dark my-4"},[e("i",{class:"fa font-17 color-blue2-dark fa-cog bg-white"})],-1),_=["disabled"],k={key:0},U={key:1},w=["disabled"],v={key:1,class:"card card-style bg-red2-dark"},S=e("div",{class:"content"},[e("h4",{class:"color-white"},"Внимание!"),e("p",{class:"color-white"}," Данная страница доступа только администраторам заведения! ")],-1),y=[S],R={data(){return{botUser:null,loading:!1}},computed:{...c(["getSelf"]),tg(){return window.Telegram.WebApp}},watch:{getSelf:function(){this.botUser=this.getSelf}},mounted(){this.getSelf&&(this.botUser=this.getSelf)},methods:{loadSelf(){this.$store.dispatch("loadSelf")},loadReceiverUserData(){this.loading=!0,this.$store.dispatch("loadReceiverUserData",{dataObject:{user_telegram_chat_id:this.botUser.telegram_chat_id}}).then(a=>{this.botUser=a.data,this.loading=!1}).catch(()=>{this.loading=!1})},selfRemove(){this.loading=!0,this.$store.dispatch("selfRemove").then(a=>{this.loading=!1,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы больше не являетесь администратором"),setTimeout(()=>{this.tg.close()},1e3)}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})},workStateChange(){this.loading=!0,this.$store.dispatch("workStateChange").then(a=>{this.loading=!1,this.loadReceiverUserData(),this.$botNotification.success("Отлично!","Вы успешно изменили свой рабочий статус")}).catch(()=>{this.loading=!1,this.$botNotification.warning("Упс!","Что-то пошло не так")})}}},D=Object.assign(R,{__name:"WorkStatus",setup(a){return(t,i)=>t.botUser?(s(),o("div",b,[t.botUser.is_admin?(s(),o("div",u,[e("div",f,[g,m,d(l,{onUpdate:t.loadSelf,"bot-user":t.botUser},null,8,["onUpdate","bot-user"]),d(h),p,e("button",{type:"button",disabled:t.loading,onClick:i[0]||(i[0]=(...n)=>t.workStateChange&&t.workStateChange(...n)),class:"btn btn-m btn-full mb-1 rounded-s text-uppercase font-900 shadow-s bg-green2-light w-100"},[t.botUser.is_work?(s(),o("span",k,"Завершить рабочую смену")):r("",!0),t.botUser.is_work?r("",!0):(s(),o("span",U,"Начать рабочую смены"))],8,_),e("button",{type:"button",disabled:t.loading||!t.botUser.is_admin,onClick:i[1]||(i[1]=(...n)=>t.selfRemove&&t.selfRemove(...n)),class:"btn btn-m btn-full mb-1 rounded-s text-uppercase font-900 shadow-s bg-red1-light w-100"}," Разжаловать себя из администраторов ",8,w)])])):(s(),o("div",v,y))])):r("",!0)}});export{D as default};
