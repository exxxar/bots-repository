import{j as g,o as r,k as o,n as t,a1 as k,N as f,Y as _,p as u,L as l,M as b,a0 as p,F as i,K as c,H as m,l as v}from"./index.es-c4852431.js";import{P as y}from"./Pagination-b758f7ed.js";import{R as w}from"./ReturnToBot-97343ef5.js";/* empty css                                                   */import"./_plugin-vue_export-helper-c27b6911.js";const A={class:"card card-style bg-theme pb-0"},j={class:"content"},$=t("p",{class:"mb-0"},"Введите информацию о событии или о пользователе",-1),C={class:"search-box bg-theme rounded-s shadow-xl bottom-0"},N=t("i",{class:"fa fa-search"},null,-1),P=["placeholder"],B={class:"mt-2 mb-0"},F={key:0,style:{color:"red"}},V={class:"row mt-2 mb-2"},x={class:"col-4"},D=t("i",{class:"fa-solid fa-users"},null,-1),O=[D],M={class:"col-4"},T=t("i",{class:"fa-solid fa-bolt"},null,-1),L=[T],R={class:"col-4"},S=t("i",{class:"fa-solid fa-phone"},null,-1),z=[S],E=t("button",{type:"submit",class:"btn btn-m btn-full my-2 rounded-s text-uppercase font-900 shadow-s bg-highlight w-100"},[t("i",{class:"fa-solid fa-magnifying-glass mr-1"}),u("Искать ")],-1),G={key:0,class:"mx-0 mt-3 px-2"},H={class:"w-100 text-center p-2 mb-0"},I={class:"w-100",style:{"overflow-y":"scroll"}},K={class:"table text-center rounded-sm"},U=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Ф.И.О."),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Телефон"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Название события"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"№ попытки"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Номер приза"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Подверждено"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Дата розыгрыша"),t("th",{scope:"col",class:"bg-highlight border-dark1-dark color-white"},"Действие")])],-1),Y=["onClick"],q={style:{"min-width":"200px"},class:"border-dark1-dark text-left"},J={style:{"min-width":"200px"},class:"border-dark1-dark"},Q={style:{"min-width":"200px"},class:"border-dark1-dark"},W={class:"border-dark1-dark"},X={class:"border-dark1-dark"},Z={style:{"min-width":"200px"},class:"border-dark1-dark"},tt={key:0,class:"fa-regular fa-circle-check color-green2-light"},et={key:1,class:"fa-regular fa-circle-xmark color-red2-light"},st={class:"border-dark1-dark"},rt={class:"border-dark1-dark"},ot={key:1},at={data(){return{loading:!0,actions:[],search:null,filter:null,paginate_object:null}},computed:{...g(["getActions","getActionsPaginateObject"]),preparedFilterName(){return this.filter?[{slug:"users",text:"Ф.И.О. пользователя"},{slug:"event",text:"по типу события"},{slug:"phone",text:"по номеру телефона"}].find(e=>e.slug===this.filter).text:null}},mounted(){this.loadActions(0)},methods:{nextActions(n){this.loadActions(n)},openActionDetails(n){this.$cashback.eventInfo(n)},loadActions(n=0){this.loading=!0,this.$store.dispatch("loadActions",{dataObject:{search:this.search,filter:this.filter},page:n}).then(e=>{this.loading=!1,this.actions=this.getActions,this.paginate_object=this.getActionsPaginateObject}).catch(()=>{this.loading=!1})}}},pt=Object.assign(at,{__name:"Actions",setup(n){return(e,a)=>(r(),o("div",A,[t("div",j,[$,t("form",{onSubmit:a[5]||(a[5]=k(s=>e.loadActions(0),["prevent"]))},[t("div",C,[N,f(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>e.search=s),class:"border-0",placeholder:e.preparedFilterName||"Поиск по событию"},null,8,P),[[_,e.search]])]),t("p",B,[u("Фильтры: "),e.filter?(r(),o("span",F,[u(l(e.preparedFilterName)+" ",1),t("i",{onClick:a[1]||(a[1]=s=>e.filter=null),class:"ml-2 fa-solid fa-xmark"})])):b("",!0)]),t("div",V,[t("div",x,[t("a",{href:"javascript:void(0)",onClick:a[2]||(a[2]=s=>e.filter="users"),class:p([{"border-red2-dark color-red2-dark":e.filter==="users","border-gray2-dark color-gray2-dark":e.filter!=="users"},"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 bg-theme"])},O,2)]),t("div",M,[t("a",{href:"javascript:void(0)",onClick:a[3]||(a[3]=s=>e.filter="event"),class:p([{"border-red2-dark color-red2-dark":e.filter==="event","border-gray2-dark color-gray2-dark":e.filter!=="event"},"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 border-red2-dark color-red2-dark bg-theme"])},L,2)]),t("div",R,[t("a",{href:"javascript:void(0)",onClick:a[4]||(a[4]=s=>e.filter="phone"),class:p([{"border-red2-dark color-red2-dark":e.filter==="phone","border-gray2-dark color-gray2-dark":e.filter!=="phone"},"btn btn-border btn-m btn-full rounded-s text-uppercase font-900 border-red2-dark color-red2-dark bg-theme"])},z,2)])]),E],32),e.actions.length>0?(r(),o("div",G,[t("small",H,"Найдено "+l(e.paginate_object.meta.total)+" записей",1),t("div",I,[t("table",K,[U,t("tbody",null,[(r(!0),o(i,null,c(e.actions,(s,lt)=>(r(),o("tr",{class:"bg-theme",onClick:d=>e.openActionDetails(s)},[t("td",q,[(r(!0),o(i,null,c(s.data,(d,h)=>(r(),o("span",null,l(d.name),1))),256))]),t("td",J,[(r(!0),o(i,null,c(s.data,(d,h)=>(r(),o("span",null,l(d.phone),1))),256))]),t("td",Q,l(s.slug.command)+" (#"+l(s.slug.id)+") ",1),t("td",W,l(s.current_attempts),1),t("td",X,[(r(!0),o(i,null,c(s.data,(d,h)=>(r(),o("span",null,l(d.win),1))),256))]),t("td",Z,[(r(!0),o(i,null,c(s.data,(d,h)=>(r(),o("span",null,[d.answered_at?(r(),o("i",tt)):(r(),o("i",et))]))),256))]),t("td",st,l(e.$filters.current(s.completed_at)),1),t("td",rt,l(e.$filters.current(s.completed_at)),1)],8,Y))),256))])])]),e.paginate_object?(r(),m(y,{key:0,class:"mt-4",simple:!0,onPagination_page:e.nextActions,pagination:e.paginate_object},null,8,["onPagination_page","pagination"])):b("",!0),v(w)])):(r(),o("p",ot,"К сожалению никаких подходящих событий не найдено"))])]))}});export{pt as default};
