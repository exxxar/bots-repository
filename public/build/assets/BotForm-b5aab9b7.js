import{q as n,t as a,v as e,D as c,y as m,z as S,F as f,G as V,C as g,x as _,A as d,H as r,J as b,a4 as U,K as F,L as T,B as k,R as O,Y as C,S as w,T as $,O as v,u as q,P as M,M as P}from"./index.es-560b785d.js";import{a as L}from"./CompanyList-97b5025e.js";import{V as I,T as j}from"./TelegramChannelHelper-1ea6ef5a.js";import{P as B}from"./Pagination-87b6f08b.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";const z={props:["botsCount"],computed:{profile(){return window.profile||null},maxSlotsCount(){var l,t;return((t=(l=this.profile)==null?void 0:l.manager)==null?void 0:t.max_bot_slot_count)||0},slotsPercent(){return this.botsCount/this.maxSlotsCount*100}}},E={class:"progress",role:"progressbar","aria-label":"Success striped example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},R=e("a",{href:"#"},"Пополнить слоты",-1);function W(l,t,s,i,y,p){return n(),a(f,null,[e("h6",null,[c("Ваши доступные слоты "),e("p",null,[c("Число слотов "),e("strong",null,m(s.botsCount+p.maxSlotsCount),1),c(". Отображается ботов "),e("strong",null,m(s.botsCount),1),c(" шт. под вашим управлением")])]),e("div",E,[e("div",{class:"progress-bar progress-bar-striped bg-success",style:S({width:p.slotsPercent+"%"})},null,4)]),R],64)}const D=A(z,[["render",W]]),J={key:0},N={key:0,class:"row"},H={class:"col-md-12"},K=e("h4",null,"Боты в работе",-1),G={class:"mb-0"},Y={class:"table mb-5"},Z=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"#"),e("th",{scope:"col"},"Домен"),e("th",{scope:"col"},"Название"),e("th",{scope:"col"},"Шаблон"),e("th",{scope:"col"},"Дата изменения"),e("th",{scope:"col"},"Действие")])],-1),Q={scope:"row"},X=["onClick"],x=["onClick"],ee={key:0,class:"badge bg-primary"},te={key:1},se={class:"d-flex"},oe=["onClick"],le=e("i",{class:"fa-regular fa-star"},null,-1),ne=[le],ae=["onClick"],ie=e("i",{class:"fa-solid fa-chevron-down"},null,-1),de=[ie],re=["onClick"],ce=e("i",{class:"fa-solid fa-chevron-up"},null,-1),he=[ce],me=e("hr",null,null,-1),ue={class:"row"},be={class:"col-md-12 d-flex flex-column"},_e={class:"d-flex"},pe={class:"dropdown mr-2"},fe=e("button",{class:"btn btn-outline-primary dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false"}," Фильтры ",-1),ve={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton1"},ge=["onClick"],ye={class:"input-group mb-3"},ke={key:0,class:"mt-2"},$e={class:"badge bg-primary mr-1"},Fe=["onClick"],we=e("i",{class:"fa-solid fa-xmark"},null,-1),Ce=[we],Be={key:1,class:"row"},Ve={class:"col-12"},je=e("h4",null,"Все боты",-1),Ue={class:"mb-0"},Te={class:"mb-0"},Ie={key:2,class:"row"},Se={class:"col-12 mb-3"},Oe={key:0,class:"col-12 mb-3"},qe={class:"table"},Me=e("th",{scope:"col"},"Действие",-1),Pe={scope:"row"},Le=["onClick"],Ae=["onClick"],ze={key:0,class:"badge bg-primary"},Ee={key:1},Re={class:"d-flex"},We=["onClick"],De=e("i",{class:"fa-regular fa-star"},null,-1),Je=[De],Ne=["onClick"],He=e("i",{class:"fa-regular fa-copy"},null,-1),Ke=[He],Ge=["onClick"],Ye=e("i",{class:"fa-solid fa-boxes-packing"},null,-1),Ze=[Ye],Qe=["onClick"],Xe=e("i",{class:"fa-solid fa-box-open"},null,-1),xe=[Xe],et=["onClick"],tt=e("i",{class:"fa-solid fa-trash-can text-white"},null,-1),st=[tt],ot={class:"col-lg-4 col-12 mb-3"},lt={class:"card-body"},nt=["onClick"],at={key:0,class:"badge bg-info"},it={class:"card-footer d-flex"},dt=["onClick"],rt=e("i",{class:"fa-regular fa-star"},null,-1),ct=[rt],ht=["onClick"],mt=e("i",{class:"fa-regular fa-copy"},null,-1),ut=[mt],bt=["onClick"],_t=e("i",{class:"fa-solid fa-boxes-packing"},null,-1),pt=[_t],ft=["onClick"],vt=e("i",{class:"fa-solid fa-box-open"},null,-1),gt=[vt],yt=["onClick"],kt=e("i",{class:"fa-solid fa-trash-can text-white"},null,-1),$t=[kt],Ft={class:"col-12"},wt={key:3,class:"row"},Ct=e("div",{class:"col-12"},[e("div",{class:"alert alert-warning",role:"alert"}," У выбранной компании нет созданных ботов! ")],-1),Bt=[Ct],Vt={props:["companyId","editor"],data(){return{displayType:1,direction:"desc",order:"updated_at",filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],show:!0,loading:!0,bots:[],favorites:[],search:null,bots_paginate_object:null}},watch:{displayType:function(l,t){localStorage.setItem("cashman_set_botlist_display_type",this.displayType)},selectedFilters:{handler:function(l){this.loadBots()},deep:!0}},computed:{...V(["getBots","getBotsPaginateObject","getCurrentCompany","getBotFavorites","inBotFav"]),filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(t=>(t.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let l=[];return this.selectedFilters.forEach(t=>{switch(t.slug){case"active":this.bots.filter(s=>s.deleted_at==null).forEach(s=>{l.push(s)});break;case"archive":this.bots.filter(s=>s.deleted_at!=null).forEach(s=>{l.push(s)});break}}),this.search==null?l:l.filter(t=>(t.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.selectFilter("active"),this.displayType=parseInt(localStorage.getItem("cashman_set_botlist_display_type")||0)},methods:{hasRole(l){return window.hasRole(l)||!1},loadBotsByIds(){if(this.getBotFavorites.length==0){this.favorites=[];return}this.loading=!0,this.$store.dispatch("loadBotsByIds",{ids:this.getBotFavorites}).then(l=>{this.loading=!1,this.favorites=l}).catch(()=>{this.loading=!1})},prepareFavorites(){this.$store.dispatch("loadBotFavs").then(l=>{this.loadBotsByIds()})},moveOrderFavBot(l,t){this.$store.dispatch("swapBotInFav",{id:l,direction:t}).then(s=>{this.loadBotsByIds()})},addToFavorite(l){if(this.inBotFav(l)){this.$store.dispatch("removeFromBotFavorites",l).then(t=>{this.$notify("Указанный бот успешно удален из избранного"),this.loadBotsByIds()});return}this.$store.dispatch("addBotToFavorites",l).then(t=>{this.$notify("Указанный бот успешно добавлен в избранное"),this.loadBotsByIds()})},duplicate(l){if(!this.getCurrentCompany){this.$notify("У Вас не выбран клиент!");return}this.$store.dispatch("duplicateBot",{dataObject:{bot_id:l,company_id:this.getCurrentCompany.id}}).then(t=>{let s=this.bots_paginate_object.meta.current_page||0;this.loadBots(s),this.$notify("Указанный бот успешно продублирован")})},addToArchive(l){this.$store.dispatch("removeBot",{botId:l}).then(t=>{let s=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(s),this.$notify("Указанный бот успешно перемещен в архив")})},forceDelete(l){this.$store.dispatch("forceDeleteBot",{botId:l}).then(t=>{let s=this.bots_paginate_object.meta.current_page||0;this.$store.dispatch("resetCurrentBot"),this.loadBots(s),this.$notify("Указанный бот успешно перемещен из архива")})},extractFromArchive(l){this.$store.dispatch("restoreBot",{botId:l}).then(t=>{let s=this.bots_paginate_object.meta.current_page||0;this.loadBots(s),this.$notify("Указанный бот успешно перемещен из архива")})},selectFilter(l){let t=this.filters.find(s=>s.slug===l);t&&this.selectedFilters.filter(s=>s.slug===l).length===0&&this.selectedFilters.push(t)},removeSelectedFilter(l){let t=this.selectedFilters.findIndex(s=>s.slug===l);this.selectedFilters.splice(t,1)},selectBot(l){this.$emit("callback",l),this.show=!1,this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(l){this.loadBots(l)},loadAndOrder(l){this.order=l,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(l=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search,order:this.order,direction:this.direction,filters:this.selectedFilters.map(t=>t.slug)},page:l,size:20}).then(t=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject,this.prepareFavorites()}).catch(()=>{this.loading=!1})}}},jt=Object.assign(Vt,{__name:"BotList",setup(l){return(t,s)=>t.show?(n(),a("div",J,[t.favorites.length>0?(n(),a("div",N,[e("div",H,[K,e("p",G,"Количество ботов в работе "+m(t.favorites.length||0),1),e("table",Y,[Z,e("tbody",null,[(n(!0),a(f,null,g(t.favorites,(i,y)=>(n(),a("tr",{class:_({"border-info":i.deleted_at==null,"border-danger":i.deleted_at!=null})},[e("th",Q,m(i.id),1),e("td",{onClick:p=>t.selectBot(i)},[e("i",{class:_([{"text-danger":i.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),c(" "+m(i.bot_domain||"Не указано"),1)],8,X),e("td",{onClick:p=>t.selectBot(i)},m(i.title||"Не указано"),9,x),e("td",null,[i.is_template?(n(),a("span",ee,m(i.template_description||"Не указано"),1)):(n(),a("span",te,"Не является шаблоном"))]),e("td",null,m(t.$filters.current(i.updated_at)),1),e("td",null,[e("div",se,[e("button",{class:_(["btn btn-outline-danger mr-2",{"btn-danger text-white":t.inBotFav(i.id)}]),type:"button",onClick:p=>t.addToFavorite(i.id),title:"Добавить в избранное"},ne,10,oe),t.favorites.length>1?(n(),a("button",{key:0,class:"btn btn-outline-primary mr-2",type:"button",onClick:p=>t.moveOrderFavBot(i.id,1),title:"Переместить вниз"},de,8,ae)):d("",!0),t.favorites.length>1?(n(),a("button",{key:1,class:"btn btn-outline-primary mr-2",type:"button",onClick:p=>t.moveOrderFavBot(i.id,0),title:"Переместить вверх"},he,8,re)):d("",!0)])])],2))),256))])]),me])])):d("",!0),e("div",ue,[e("div",be,[e("div",_e,[e("div",pe,[fe,e("ul",ve,[(n(!0),a(f,null,g(t.filters,i=>(n(),a("li",null,[e("a",{class:"dropdown-item",onClick:y=>t.selectFilter(i.slug),href:"#filter"},[e("i",{class:_([i.icon,"mr-2"])},null,2),c(" "+m(i.name||"Не указано"),1)],8,ge)]))),256))])]),e("div",ye,[r(e("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":s[0]||(s[0]=i=>t.search=i),onKeydown:s[1]||(s[1]=U((...i)=>t.loadBots&&t.loadBots(...i),["enter"])),"aria-describedby":"button-addon2"},null,544),[[b,t.search]]),e("button",{class:"btn btn-outline-secondary",onClick:s[2]||(s[2]=(...i)=>t.loadBots&&t.loadBots(...i)),type:"button",id:"button-addon2"},"Найти ")])]),t.selectedFilters.length>0?(n(),a("p",ke,[(n(!0),a(f,null,g(t.selectedFilters,i=>(n(),a("span",$e,[c(m(i.name||"не указан")+" ",1),e("a",{onClick:y=>t.removeSelectedFilter(i.slug),class:"ml-1 text-white",href:"#filter"},Ce,8,Fe)]))),256))])):d("",!0)])]),t.bots_paginate_object?(n(),a("div",Be,[e("div",Ve,[je,e("p",Ue,"Количество найденных ботов "+m(t.bots_paginate_object.meta.total||0),1),e("p",Te,"Количество результатов на странице "+m(t.bots.length||0),1),e("p",null,[c(" Тип отображения списка: "),e("span",{onClick:s[3]||(s[3]=i=>t.displayType=0),class:_([{"bg-primary":t.displayType===0,"bg-secondary":t.displayType!==0},"badge cursor-pointer mr-2"])},"Карточки",2),e("span",{class:_([{"bg-primary":t.displayType===1,"bg-secondary":t.displayType!==1},"badge cursor-pointer mr-2"]),onClick:s[4]||(s[4]=i=>t.displayType=1)},"Таблица",2)])])])):d("",!0),t.bots.length>0?(n(),a("div",Ie,[e("div",Se,[l.editor?d("",!0):(n(),a("button",{key:0,type:"button",class:"btn btn-outline-info",onClick:s[5]||(s[5]=i=>t.selectBot(null))},"Создать нового бота "))]),t.displayType===1?(n(),a("div",Oe,[e("table",qe,[e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"cursor-pointer",onClick:s[6]||(s[6]=i=>t.loadAndOrder("id"))},"#"),e("th",{scope:"col",class:"cursor-pointer",onClick:s[7]||(s[7]=i=>t.loadAndOrder("bot_domain"))},"Домен"),e("th",{scope:"col",class:"cursor-pointer",onClick:s[8]||(s[8]=i=>t.loadAndOrder("title"))},"Название"),e("th",{scope:"col",class:"cursor-pointer",onClick:s[9]||(s[9]=i=>t.loadAndOrder("template_description"))},"Шаблон"),e("th",{scope:"col",class:"cursor-pointer",onClick:s[10]||(s[10]=i=>t.loadAndOrder("updated_at"))},"Дата изменения"),Me])]),e("tbody",null,[(n(!0),a(f,null,g(t.bots,(i,y)=>(n(),a("tr",{class:_({"border-info":i.deleted_at==null,"border-danger":i.deleted_at!=null})},[e("th",Pe,m(i.id),1),e("td",{onClick:p=>t.selectBot(i)},[e("i",{class:_([{"text-danger":i.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),c(" "+m(i.bot_domain||"Не указано"),1)],8,Le),e("td",{onClick:p=>t.selectBot(i)},m(i.title||"Не указано"),9,Ae),e("td",null,[i.is_template?(n(),a("span",ze,m(i.template_description||"Не указано"),1)):(n(),a("span",Ee,"Не является шаблоном"))]),e("td",null,m(t.$filters.current(i.updated_at)),1),e("td",null,[e("div",Re,[e("button",{class:_(["btn btn-outline-danger mr-2",{"btn-danger text-white":t.inBotFav(i.id)}]),type:"button",onClick:p=>t.addToFavorite(i.id),title:"Добавить в избранное"},Je,10,We),e("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:p=>t.duplicate(i.id),title:"Дублировать"},Ke,8,Ne),i.deleted_at==null&&t.hasRole("admin")?(n(),a("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:p=>t.addToArchive(i.id),title:"В архив"},Ze,8,Ge)):d("",!0),i.deleted_at!=null&&t.hasRole("admin")?(n(),a("button",{key:1,class:"btn btn-outline-info mr-2",onClick:p=>t.extractFromArchive(i.id),title:"Из архива"},xe,8,Qe)):d("",!0),i.deleted_at!=null&&t.hasRole("admin")?(n(),a("button",{key:2,class:"btn btn-danger mr-2",onClick:p=>t.forceDelete(i.id),title:"Удалить на совсем"},st,8,et)):d("",!0)])])],2))),256))])])])):d("",!0),t.displayType===0?(n(!0),a(f,{key:1},g(t.bots,(i,y)=>(n(),a("div",ot,[e("div",{class:_(["card w-100",{"border-info":i.deleted_at==null,"border-secondary":i.deleted_at!=null}])},[e("div",lt,[e("p",{class:"d-flex justify-content-between",onClick:p=>t.selectBot(i),style:{"word-wrap":"break-word"}},[e("span",null,[e("i",{class:_([{"text-danger":i.deleted_at!=null},"fa-solid fa-robot mr-2"])},null,2),c(" "+m(i.bot_domain||"Не указано"),1)]),i.is_template?(n(),a("span",at,m(i.template_description||"Шаблон без названия"),1)):d("",!0)],8,nt)]),e("div",it,[e("button",{class:_(["btn btn-outline-danger mr-2",{"btn-danger text-white":t.inBotFav(i.id)}]),type:"button",onClick:p=>t.addToFavorite(i.id),title:"Добавить в избранное"},ct,10,dt),e("button",{class:"btn btn-outline-info mr-2",type:"button",onClick:p=>t.duplicate(i.id),title:"Дублировать"},ut,8,ht),i.deleted_at==null&&t.hasRole("admin")?(n(),a("button",{key:0,class:"btn btn-outline-info",type:"button",onClick:p=>t.addToArchive(i.id),title:"В архив"},pt,8,bt)):d("",!0),i.deleted_at!=null&&t.hasRole("admin")?(n(),a("button",{key:1,class:"btn btn-outline-info mr-2",onClick:p=>t.extractFromArchive(i.id),title:"Из архива"},gt,8,ft)):d("",!0),i.deleted_at!=null&&t.hasRole("admin")?(n(),a("button",{key:2,class:"btn btn-danger mr-2",onClick:p=>t.forceDelete(i.id),title:"Удалить на совсем"},$t,8,yt)):d("",!0)])],2)]))),256)):d("",!0),e("div",Ft,[t.bots_paginate_object?(n(),F(B,{key:0,onPagination_page:t.nextBots,pagination:t.bots_paginate_object},null,8,["onPagination_page","pagination"])):d("",!0)])])):(n(),a("div",wt,Bt))])):d("",!0)}}),Ut={class:"dropdown"},Tt={class:"dropdown-menu"},It=e("i",{class:"fa-regular fa-hand-pointer mr-2"},null,-1),St=["href"],Ot=e("i",{class:"fa-solid fa-arrow-right-to-bracket mr-2"},null,-1),qt=e("i",{class:"fa-solid fa-power-off mr-2"},null,-1),Mt=["id"],Pt={class:"modal-dialog modal-xl"},Lt={class:"modal-content"},At=e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"Поиск ваших ботов"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),zt={class:"modal-body"},Et={key:0,class:"nav nav-tabs"},Rt={class:"nav-item"},Wt={class:"nav-item"},Dt={key:1,class:"px-2 py-3"},Jt={class:"container"},Nt={class:"row d-flex justify-content-center"},Ht={class:"col-md-6 col-12"},Kt={class:"input-group mb-3"},Gt={class:"w-100 d-flex justify-content-center flex-wrap"},Yt=e("p",{class:"mb-0 text-primary font-bold"},[e("small",null,"Тип сортировки")],-1),Zt={class:"list-group d-flex flex-row w-100 justify-content-center"},Qt={key:0},Xt=e("i",{class:"fa-solid fa-caret-down"},null,-1),xt=[Xt],es={key:1},ts=e("i",{class:"fa-solid fa-caret-up"},null,-1),ss=[ts],os={key:0},ls=e("i",{class:"fa-solid fa-caret-down"},null,-1),ns=[ls],as={key:1},is=e("i",{class:"fa-solid fa-caret-up"},null,-1),ds=[is],rs={key:0},cs=e("i",{class:"fa-solid fa-caret-down"},null,-1),hs=[cs],ms={key:1},us=e("i",{class:"fa-solid fa-caret-up"},null,-1),bs=[us],_s={key:0},ps=e("i",{class:"fa-solid fa-caret-down"},null,-1),fs=[ps],vs={key:1},gs=e("i",{class:"fa-solid fa-caret-up"},null,-1),ys=[gs],ks={key:1,class:"row my-2"},$s={class:"col-12"},Fs={key:0,class:"container pb-5"},ws={key:0,href:"/bot-page"},Cs={class:"row row-cols-1 row-cols-lg-4 row-cols-md-1 g-4"},Bs={class:"col"},Vs={class:"card h-100"},js={class:"card-img-top w-100 object-fit-cover",style:{"max-height":"150px"}},Us={class:"card-body"},Ts={class:"card-title text-center"},Is={class:"card-title text-center",style:{"font-size":"14px"}},Ss={class:"card-text text-center mb-2"},Os={class:"card-text text-center mb-2"},qs={class:"text-center mb-2"},Ms=["onClick"],Ps={class:"row my-5"},Ls={class:"col-12"},As={key:1,class:"container"},zs=e("div",{class:"alert alert-info",role:"alert"},[e("p",null,"У вас еще нет созданных ботов, попробуйте с чего-то простого;)")],-1),Es={class:"d-flex justify-content-center"},Rs={key:2,class:"px-2 py-3"},Ws={props:["customClass","bot","id"],data(){return{search_modal_tab:0,direction:"desc",order:"updated_at",searchModal:null,filters:[{name:"Активные",icon:"fa-brands fa-telegram",slug:"active"},{name:"Архивные",icon:"fa-solid fa-box-archive",slug:"archive"}],selectedFilters:[],loading:!0,bots:[],search:null,bots_paginate_object:null}},watch:{},computed:{...V(["getBots","getBotsPaginateObject","getCurrentCompany","getCurrentBot"]),profile(){return window.profile||null},filteredBots(){if(!this.bots)return[];if(this.selectedFilters.length===0&&this.search==null)return this.bots;if(this.selectedFilters.length===0&&this.search!=null)return this.bots.filter(t=>(t.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1);let l=[];return this.selectedFilters.forEach(t=>{switch(t.slug){case"active":this.bots.filter(s=>s.deleted_at==null).forEach(s=>{l.push(s)});break;case"archive":this.bots.filter(s=>s.deleted_at!=null).forEach(s=>{l.push(s)});break}}),this.search==null?l:l.filter(t=>(t.bot_domain||"").trim().toLowerCase().indexOf(this.search.trim().toLowerCase())!==-1)}},mounted(){this.searchModal=new bootstrap.Modal(document.getElementById("bot-search-modal-"+(this.id||"local")),{backdrop:!1}),this.selectFilter("active")},methods:{gotoBot(l){this.selectBot(l)},openModal(){this.loadBots(),this.searchModal.show()},resetBot(){window.dispatchEvent(new CustomEvent("reset-current_bot-from-navbar-event")),this.$store.dispatch("resetCurrentBot").then(()=>{})},hasRole(l){return window.hasRole(l)||!1},loadBotsByIds(){this.loading=!0,this.$store.dispatch("loadBotsByIds",{ids:[]}).then(l=>{this.loading=!1}).catch(()=>{this.loading=!1})},selectFilter(l){let t=this.filters.find(s=>s.slug===l);t&&this.selectedFilters.filter(s=>s.slug===l).length===0&&this.selectedFilters.push(t)},removeSelectedFilter(l){let t=this.selectedFilters.findIndex(s=>s.slug===l);this.selectedFilters.splice(t,1)},selectBot(l){this.searchModal.hide(),this.$store.dispatch("updateCurrentBot",{bot:l}).then(()=>{}),this.$emit("select-bot",l),this.$notify("Вы выбрали бота из списка! Все остальные действия будут производится для этого бота.")},nextBots(l){this.loadBots(l)},loadAndOrder(l){this.order=l,this.direction=this.direction==="desc"?"asc":"desc",this.loadBots(0)},loadBots(l=0){this.loading=!0,this.$store.dispatch("loadBots",{dataObject:{companyId:this.companyId||null,search:this.search,order:this.order,direction:this.direction,filters:this.selectedFilters.map(t=>t.slug)},page:l,size:20}).then(t=>{this.loading=!1,this.bots=this.getBots,this.bots_paginate_object=this.getBotsPaginateObject}).catch(()=>{this.loading=!1})}}},Ds=Object.assign(Ws,{__name:"BotSearchModal",setup(l){return(t,s)=>{var y,p,o,u;const i=T("lazy");return n(),a(f,null,[e("div",Ut,[e("button",{class:_(l.customClass),type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[l.bot?(n(),a(f,{key:1},[c(m(l.bot.bot_domain||"Без имени"),1)],64)):(n(),a(f,{key:0},[c(" Бот не выбран ")],64))],2),e("ul",Tt,[e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[0]||(s[0]=(...h)=>t.openModal&&t.openModal(...h))},[It,c(" Выбрать бота")])]),l.bot?(n(),a(f,{key:0},[e("li",null,[e("a",{href:"https://t.me/"+(l.bot.bot_domain||"botfather"),class:"dropdown-item",target:"_blank"},[Ot,c(" Перейти в бот")],8,St)]),e("li",null,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:s[1]||(s[1]=(...h)=>t.resetBot&&t.resetBot(...h))},[qt,c(" Завершить работу с ботом")])])],64)):d("",!0)])]),e("div",{class:"modal fade",id:"bot-search-modal-"+(l.id||"local"),tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",Pt,[e("div",Lt,[At,e("div",zt,[(y=t.profile)!=null&&y.is_admin?(n(),a("ul",Et,[e("li",Rt,[e("a",{onClick:s[2]||(s[2]=h=>t.search_modal_tab=0),class:_([{active:t.search_modal_tab===0},"nav-link"]),"aria-current":"page",href:"javascript:void(0)"},"Базовый поиск",2)]),e("li",Wt,[e("a",{onClick:s[3]||(s[3]=h=>t.search_modal_tab=1),class:_([{active:t.search_modal_tab===1},"nav-link"]),href:"javascript:void(0)"},"Административный поиск",2)])])):d("",!0),t.search_modal_tab===0?(n(),a("div",Dt,[e("div",Jt,[t.bots.length>0?(n(),F(D,{key:0,"bots-count":((o=(p=t.bots_paginate_object)==null?void 0:p.meta)==null?void 0:o.total)||0},null,8,["bots-count"])):d("",!0),e("div",Nt,[e("div",Ht,[e("div",Kt,[r(e("input",{type:"search",class:"form-control",placeholder:"Поиск бота","aria-label":"Поиск бота","onUpdate:modelValue":s[4]||(s[4]=h=>t.search=h),onKeydown:s[5]||(s[5]=U(h=>t.loadBots(0),["enter"])),"aria-describedby":"button-addon2"},null,544),[[b,t.search]]),e("button",{class:"btn btn-outline-secondary",onClick:s[6]||(s[6]=h=>t.loadBots(0)),type:"button",id:"button-addon2"},"Найти ")]),e("div",Gt,[Yt,e("ul",Zt,[e("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:s[7]||(s[7]=h=>t.loadAndOrder("id"))},[t.direction==="desc"&&t.order==="id"?(n(),a("span",Qt,xt)):d("",!0),t.direction==="asc"&&t.order==="id"?(n(),a("span",es,ss)):d("",!0),c(" Id ")]),e("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:s[8]||(s[8]=h=>t.loadAndOrder("title"))},[t.direction==="desc"&&t.order==="title"?(n(),a("span",os,ns)):d("",!0),t.direction==="asc"&&t.order==="title"?(n(),a("span",as,ds)):d("",!0),c(" Название бота ")]),e("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:s[9]||(s[9]=h=>t.loadAndOrder("bot_domain"))},[t.direction==="desc"&&t.order==="bot_domain"?(n(),a("span",rs,hs)):d("",!0),t.direction==="asc"&&t.order==="bot_domain"?(n(),a("span",ms,bs)):d("",!0),c(" Домен бота ")]),e("li",{class:"list-inline-item mr-2 cursor-pointer",onClick:s[10]||(s[10]=h=>t.loadAndOrder("updated_at"))},[t.direction==="desc"&&t.order==="updated_at"?(n(),a("span",_s,fs)):d("",!0),t.direction==="asc"&&t.order==="updated_at"?(n(),a("span",vs,ys)):d("",!0),c(" Дата обновления ")])])])])]),t.bots.length>0?(n(),a("div",ks,[e("div",$s,[t.bots_paginate_object?(n(),F(B,{key:0,onPagination_page:t.nextBots,pagination:t.bots_paginate_object},null,8,["onPagination_page","pagination"])):d("",!0)])])):d("",!0)]),t.bots.length>0?(n(),a("div",Fs,[e("h6",null,[c("Ваши созданные боты "),(u=t.profile)!=null&&u.is_admin?(n(),a("a",ws,"перейти в раздел")):d("",!0)]),e("div",Cs,[(n(!0),a(f,null,g(t.bots,h=>(n(),a("div",Bs,[e("div",Vs,[r(e("img",js,null,512),[[i,"/images-by-bot-id/"+h.id+"/"+h.image]]),e("div",Us,[e("h6",Ts,"#"+m(h.id),1),e("h5",Is,m(h.title||h.id),1),e("p",Ss," Баланс "+m(h.balance||"0")+" руб ",1),e("p",Os," Тариф "+m(h.tax_per_day||"0")+" руб\\день ",1),e("p",qs,[e("small",null,m(t.$filters.currentFull(h.updated_at)),1)])]),e("div",{class:_(["card-footer",{"bg-danger":(h.bot_token||"").length<40,"bg-success":(h.bot_token||"").length>=40}])},[e("button",{type:"button",onClick:hr=>t.gotoBot(h),class:"btn btn-link text-white w-100"},"Редактировать ",8,Ms)],2)])]))),256))]),e("div",Ps,[e("div",Ls,[t.bots_paginate_object?(n(),F(B,{key:0,onPagination_page:t.nextBots,pagination:t.bots_paginate_object},null,8,["onPagination_page","pagination"])):d("",!0)])])])):(n(),a("div",As,[zs,e("div",Es,[e("button",{class:"btn btn-primary",onClick:s[11]||(s[11]=h=>t.callback(0))},"Поехали создавать")])]))])):d("",!0),t.search_modal_tab===1?(n(),a("div",Rs,[k(jt,{onCallback:t.gotoBot},null,8,["onCallback"])])):d("",!0)])])])],8,Mt)],64)}}});const Js={key:0,class:"h-100 gradient-form"},Ns={class:"container py-5 h-100"},Hs={class:"row d-flex justify-content-center align-items-center h-100"},Ks={class:"col-xl-10"},Gs={class:"card rounded-3 text-black"},Ys={class:"row g-0"},Zs={class:"col-lg-6 d-flex align-items-center bg-primary"},Qs={class:"text-white px-3 py-4 p-md-5 mx-md-4"},Xs={class:"d-flex justify-content-center mb-3"},xs={alt:"",width:"100",height:"100"},eo=P('<h4 class="mb-4">Добро пожваловать в раздел создания бота!</h4><p class="small mb-2"> Здесь вы можете легко управлять своими Telegram-ботами: создавать новых, настраивать команды, анализировать статистику и многое другое. Войдите в систему, чтобы получить доступ ко всем возможностям платформы. Если у вас ещё нет аккаунта, зарегистрируйтесь — это займёт всего несколько минут. </p><p class="small mb-2 fw-bold"> Для начала рекомендуем ознакомится с обучением! </p><a href="https://telegra.ph/Sozdanie-telegram-bota-02-02" target="_blank" class="btn w-100 btn-outline-light text-center p-3 mb-2"><i class="fas fa-graduation-cap"></i> Обучение </a><p class="small mb-2"> Начните прямо сейчас и сделайте своих ботов ещё умнее и полезнее! 🚀 </p><a href="https://t.me/botfather" target="_blank" class="btn w-100 btn-outline-light text-center p-3 mb-2"><i class="fab fa-telegram"></i> Создать бота в Телеграм </a>',6),to={class:"col-lg-6"},so={class:"card-body p-md-5 mx-md-4"},oo=e("div",{class:"text-center"},[e("h1",{class:"text-primary"},"NextIT"),e("h4",{class:"mt-1 mb-2 pb-1"},"Современные решения для бизнеса")],-1),lo={key:0,class:"alert alert-warning"},no=e("p",{class:"mb-2"},"Вы сразу можете выбрать один из доступных типов бота ",-1),ao={class:"row"},io={class:"col-md-6 mb-2"},ro=e("i",{class:"fas fa-robot mb-3",style:{"font-size":"20px"}},null,-1),co=e("h6",{style:{"font-size":"14px","text-align":"center"}},[c("Чистый бот"),e("br"),c("(без шаблона)")],-1),ho=[ro,co],mo={class:"col-md-6 mb-2"},uo=e("i",{class:"fas fa-utensils mb-2",style:{"font-size":"20px"}},null,-1),bo=e("h6",{style:{"font-size":"14px","text-align":"center"}},[c("Бот для кафетериев"),e("br"),c("и ресторанного дела")],-1),_o=[uo,bo],po={class:"col-md-6 mb-2"},fo=e("i",{class:"fas fa-spa mb-2",style:{"font-size":"20px"}},null,-1),vo=e("h6",{style:{"font-size":"14px","text-align":"center"}},"Бот для салонов красоты",-1),go=[fo,vo],yo={class:"col-md-6 mb-2"},ko=e("i",{class:"fas fa-comments mb-2",style:{"font-size":"20px"}},null,-1),$o=e("h6",{style:{"font-size":"14px","text-align":"center"}},"Диалоговый бот",-1),Fo=[ko,$o],wo=e("p",{class:"mb-2"},[e("em",null,[e("small",null,"Для начала создания бота добавьте токен телеграм бота")])],-1),Co={class:"form-floating mb-3"},Bo=e("label",{class:"form-label",id:"bot-token"}," Токен бота ",-1),Vo=e("p",{class:"mb-2"},[e("em",null,[e("small",null,"Или выберите существующего бота для редактирования")])],-1),jo={class:"row"},Uo={class:"col-md-6 col-12"},To={class:"card mb-3 border-primary"},Io={class:"card-body"},So=e("label",{class:"form-label",id:"bot-token"}," Токен бота ",-1),Oo={key:0,class:"col-md-6 col-12"},qo={class:"card"},Mo={class:"card-body"},Po={class:"row"},Lo={class:"col-md-7 col-12"},Ao={class:"form-floating mb-2"},zo=["disabled"],Eo=["disabled","value"],Ro=e("label",{for:"floatingSelect"},"Выбор сервера размещения",-1),Wo={class:"col-md-5 col-12"},Do=["disabled"],Jo={class:"row",style:{position:"sticky",top:"60px","z-index":"100"}},No={class:"col-12 col-md-12 d-flex justify-content-end"},Ho=["disabled"],Ko={key:0},Go={key:1},Yo=e("i",{class:"fa-regular fa-floppy-disk"},null,-1),Zo={key:2,class:"ml-2"},Qo={class:"row"},Xo={class:"col-12"},xo={class:"nav nav-tabs justify-content-center"},el={key:1,class:"nav-item"},tl=e("a",{class:"nav-link text-secondary",href:"javascript:void(0)"},[e("i",{class:"fa-solid fa-triangle-exclamation mr-1"}),c(" Обратная связь")],-1),sl=[tl],ol=e("i",{class:"fa-solid fa-skull-crossbones mr-1"},null,-1),ll={class:"row py-3"},nl={class:"col-8"},al={class:"row"},il={class:"col-md-12 col-12"},dl={class:"form-check mb-3"},rl=["value"],cl=e("label",{class:"form-check-label",for:"bot-select-company"}," Выбрать клиента из списка ",-1),hl={key:0,class:"font-bold"},ml={key:0,class:"col-md-12 col-12"},ul={class:"col-md-12 col-12"},bl={class:"form-check mb-3"},_l=["value"],pl=e("label",{class:"form-check-label",for:"bot-is-template"}," Сделать шаблоном ",-1),fl={key:1,class:"col-md-12 col-12"},vl={class:"mb-3"},gl={class:"form-label",id:"bot-template-description"},yl=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),kl=e("div",null,"Если Вы создаете шаблон, а не реального бота ",-1),$l=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Fl={class:"col-md-12 col-12"},wl={class:"mb-3"},Cl={class:"form-label",id:"bot-domain"},Bl=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Vl=e("div",null,'Строго взять из BotFather! ТО что при создании с окончанием на "bot"',-1),jl={class:"col-md-12 col-12"},Ul={class:"card"},Tl={class:"card-body"},Il=e("h6",null,"Настройка параметров бота в BotFather",-1),Sl={class:"mb-3"},Ol={class:"form-label d-flex justify-content-between align-items-center",id:"bot-title"},ql={key:0},Ml={key:0,class:"text-secondary"},Pl={class:"mb-3"},Ll={class:"form-label d-flex justify-content-between align-items-center",id:"bot-short-description"},Al={key:0,class:"text-secondary"},zl=e("div",{class:"alert alert-info",role:"alert"}," Данное описание видно в момент, когда пользователь делится ссылкой на бота, а также при нажатии на иконку бота. ",-1),El={class:"mb-3"},Rl={class:"form-label d-flex justify-content-between align-items-center",id:"bot-long-description"},Wl={key:0,class:"text-secondary"},Dl=e("div",{class:"alert alert-info",role:"alert"},[c(" Данное описание видно при первом запуске бота, оно должно содержать информацию о возможностях бота: "),e("ul",{class:"m-0 pl-2"},[e("li",null,"- система лояльности"),e("li",null,"- колесо фортуны"),e("li",null,"- интернет-магазин"),e("li",null,"- реферальная система")]),c(" и т.д. ")],-1),Jl={key:0,class:"col-12"},Nl=e("div",{class:"alert alert-primary",role:"alert"},[e("strong",null,"Внимание!"),c(" Отображать пользователю команду "),e("strong",{class:"text-danger"},"/adminmenu"),c(" плохая идея. Команда доступна только администраторам системы, а обычный пользователь будет видеть ошибку. Это создаст негативное восприятие от работы сервиса. ")],-1),Hl=[Nl],Kl={class:"col-5"},Gl={class:"mb-3"},Yl=["onUpdate:modelValue","aria-describedby"],Zl={class:"col-5"},Ql={class:"mb-3"},Xl=["onUpdate:modelValue","aria-describedby"],xl={class:"col-2"},en=["onClick"],tn=e("i",{class:"fa-regular fa-trash-can"},null,-1),sn=[tn],on={class:"row"},ln={class:"col-12"},nn={key:0},an={key:1},dn={class:"row"},rn={class:"col-12 my-2"},cn={class:"form-check"},hn=e("label",{class:"form-check-label",for:"showCode"}," Отобразить код ",-1),mn={key:0,class:"col-12 mb-3"},un=e("label",{class:"form-label",id:"bot-domain"},"JSON-код клавиатуры",-1),bn={class:"row"},_n={class:"col-12"},pn=e("p",{class:"mb-2"},"Кнопка меню",-1),fn={class:"form-check"},vn=e("label",{class:"form-check-label",for:"needMenuBtn"}," Нужна кнопка меню ",-1),gn={class:"col-12"},yn=["onClick"],kn={class:"col-6"},$n={class:"col-6"},Fn={class:"col-4"},wn={class:"card"},Cn={class:"card-body"},Bn={key:0},Vn=["href"],jn=e("button",{class:"btn btn-primary p-3 w-100 mb-3"},"Пополнить баланс бота",-1),Un=e("div",{class:"col-12"},[e("div",{class:"alert alert-primary",role:"alert"},[e("strong",null,"Внимание!"),c(" Внесите сумму, которую вам дал Клиент! Эта сумма будет балансом Клиента для работы бота! Укажите тариф бота - это сумма, которую система будет списывать с клиента каждый день пока баланс бота не будет равен 0. "),e("br"),e("strong",null,"Внимание!"),c(" Вы можете начислить какую-то небольшую сумму для того чтобы клиент протестировал работу бота. При достижении нулевого баланса клиент будет оповещен об этом и должен будет пополнить счёт бота! ")])],-1),Tn={class:"col-md-12 col-12"},In={class:"mb-3 form-floating"},Sn={class:"form-label",id:"bot-balance"},On=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),qn=e("div",null,"Начальная сумма денег на счету у конкретного бота",-1),Mn=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Pn={class:"col-md-12 col-12"},Ln={class:"mb-3 form-floating"},An={class:"form-label",id:"bot-tax-per-day"},zn=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),En=e("div",null,"Сумма списания денег за сутки работы бота (тариф)",-1),Rn=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Wn={class:"row py-3"},Dn={class:"col-md-6 col-12"},Jn={class:"mb-3"},Nn=e("label",{class:"form-label",id:"bot-level-1"},[c(" Уровень 1 CashBack, % "),e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно")],-1),Hn={class:"col-md-6 col-12"},Kn={class:"mb-3"},Gn=e("label",{class:"form-label",id:"bot-level-2"},"Уровень 2 CashBack, %",-1),Yn={class:"col-md-6 col-12"},Zn={class:"mb-3"},Qn=e("label",{class:"form-label",id:"bot-level-3"},"Уровень 3 CashBack, %",-1),Xn={class:"mb-2"},xn={class:"form-check"},ea=e("label",{class:"form-check-label",for:"need-cashback-fired"}," Необходимо настроить период сгорания CashBack ",-1),ta={key:0,class:"col-md-12 col-12"},sa={class:"mb-3"},oa=e("label",{class:"form-label",id:"cashback-fired-period"},"Период сгорания CashBack",-1),la=["value"],na={key:0,class:"mb-3"},aa=e("label",{class:"form-label",id:"cashback-fired-level"},"Уровень сгорания CashBack, %",-1),ia={class:"col-md-12 col-12"},da={class:"mb-3"},ra=e("label",{class:"form-label",id:"cashback-max_cashback_use_percent"}," Автоматическое списание CashBack при покупке, % от цены товара",-1),ca={class:"col-12 mb-2"},ha={class:"form-check"},ma=e("label",{class:"form-check-label",for:"need-payments"}," Необходимо подключить платежную систему ",-1),ua={key:1,class:"col-md-12 col-12"},ba={class:"form-check mb-3 ml-3"},_a=["value"],pa=e("label",{class:"form-check-label",for:"bot-auto-cashback-on-payments"}," Начислять CashBack автоматически после успешной оплаты ",-1),fa={class:"mb-3"},va=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ga=e("div",null,"Если в боте планируется оплата, то необходимо через BotFather привязать нужную платежную систему и указать в данном поле полученный токен ",-1),ya=e("label",{class:"form-label",id:"payment_provider_token"},[c("Токен платежной системы "),e("a",{href:"https://t.me/botfather",target:"_blank"},"Подключить")],-1),ka={class:"col-12 mb-2"},$a={class:"form-check"},Fa=e("label",{class:"form-check-label",for:"need-shop"}," Необходимо интегрировать магазин в бота ",-1),wa={key:2,class:"col-md-12 col-12"},Ca={class:"mb-3"},Ba=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Va=e("div",null,"Ссылка на страницу ВК с товарами для вашего магазина в боте ",-1),ja=e("label",{class:"form-label",id:"bot-vk_shop_link"},[c("Ссылка на группу ВК с товарами "),e("a",{href:"https://vk.com/groups?w=groups_create",target:"_blank"},"Создать")],-1),Ua={class:"mb-2"},Ta={class:"form-check"},Ia=e("label",{class:"form-check-label",for:"need-cashback-config"}," Необходимо настроить CashBack по категориям ",-1),Sa={key:3,class:"mb-2"},Oa=e("h6",null,"Настройка категорий CashBack-а",-1),qa={class:"d-flex justify-content-between align-items-center w-100"},Ma=e("small",null,"Название категории",-1),Pa=["onClick"],La=e("i",{class:"fa-regular fa-trash-can"},null,-1),Aa=[La],za=["onUpdate:modelValue","aria-describedby"],Ea=e("div",{class:"alert alert-primary",role:"alert"}," Категории CashBack - это возможность разделить накопления и траты CashBack пользователями бота на указанные цели, например, кофейня может создать категории: на кофе, на десерты - и начислять баллы за купленный кофе отдельно от баллов за купленный десерт ",-1),Ra=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Wa={class:"mb-2"},Da={class:"form-check"},Ja=e("label",{class:"form-check-label",for:"need-cashback-rules"}," Необходимо настроить оповещения под CashBack ",-1),Na={key:4,class:"col-md-12 col-12 mb-2"},Ha={class:"card border-warning"},Ka={class:"card-body"},Ga={class:"form-group"},Ya=e("label",{class:"form-check-label",for:"warning-rules"},[e("i",{class:"fa-solid fa-triangle-exclamation text-danger"}),c(" Правила критических оповещений ")],-1),Za=e("option",{value:null},"Не выбрано",-1),Qa=["value"],Xa={class:"card my-2 p-2"},xa={class:"row"},ei={class:"col-md-4 d-flex align-items-center"},ti={class:"m-0"},si={class:"col-md-2"},oi={class:"form-check"},li=["onUpdate:modelValue","id"],ni=["for"],ai={key:0},ii={key:1},di={class:"col-md-5"},ri=["onUpdate:modelValue"],ci={class:"col-md-1 d-flex justify-content-center"},hi=["onClick"],mi=e("i",{class:"fa-solid fa-trash-can"},null,-1),ui=[mi],bi={class:"row py-3"},_i=e("div",{class:"col-12"},[e("div",{class:"alert alert-primary",role:"alert"},[e("strong",null,"Внимание!"),c(" Для того чтобы узнать ID канала сперва создайте Канал или Группу в телеграм, добавьте в него вашего "),e("strong",null,"сохраненного бота"),c(', назначьте бота администратором Канала или Группы, а только после этого впишите команду "Мой id" в бота. ')])],-1),pi={class:"col-md-6 col-12"},fi={class:"mb-3"},vi={class:"d-flex justify-content-between align-items-center"},gi={class:"form-label d-flex justify-content-between",id:"bot-order-channel"},yi=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),ki=e("div",null,"Ввести адрес ссылки на канал в форму после добавления тоукена ",-1),$i=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Fi={class:"col-md-6 col-12"},wi={class:"mb-3"},Ci={class:"d-flex justify-content-between"},Bi=e("label",{class:"form-label",id:"bot-main-channel"},"Канал для постов (id,рекламный)",-1),Vi={key:0,class:"col-12"},ji=e("div",{class:"alert alert-primary",role:"alert"},[e("strong",null,"Внимание!"),c(' Топики работают только в Группах телеграм с включенным режимом "Топики" в настройках Группы! В каналах топиков нет. ')],-1),Ui=[ji],Ti={key:1,class:"col-12 mb-2"},Ii={class:"form-check"},Si=e("label",{class:"form-check-label",for:"need-topics-mailing"}," Необходимо добавить рассылку по топикам для канала заказов (он же системный канал) ",-1),Oi={key:2,class:"col-12 mb-2"},qi={class:"d-flex justify-content-between align-items-center mb-2"},Mi=e("p",null,'Для того, чтоб узнать идентификатор топика в группе впишите в чат "Мой id"',-1),Pi=["disabled"],Li=e("i",{class:"fa-solid fa-paperclip mr-2"},null,-1),Ai={class:"list-group"},zi={class:"list-group-item"},Ei={class:"mb-0"},Ri=["onUpdate:modelValue"],Wi={class:"row py-3"},Di={class:"col-12"},Ji={class:"mb-3"},Ni={class:"d-flex justify-content-between"},Hi={class:"form-label",id:"bot-maintenance-message"},Ki=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Gi={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Yi={class:"row py-3"},Zi=e("div",{class:"col-12"},[e("div",{class:"alert alert-primary",role:"alert"}," Системная иконка нужна только для красивого отображения и узнаваемости бота на Landing-е системы. ")],-1),Qi={class:"col-12 mb-3"},Xi=e("h6",null,[c("Системная иконка бота "),e("span",{class:"badge rounded-pill text-bg-warning m-0"},"желательно")],-1),xi={class:"photo-preview d-flex justify-content-center flex-wrap w-100"},ed={key:0,for:"bot-photos",style:{"margin-right":"10px"},class:"photo-loader ml-2 bg-primary text-white shadow-md"},td=e("span",null,"+",-1),sd={class:"mb-2 img-preview",style:{"margin-right":"10px"}},od={class:"remove"},ld=e("i",{class:"fa-regular fa-trash-can"},null,-1),nd=[ld],ad={key:2,class:"mb-2 img-preview",style:{"margin-right":"10px"}},id={class:"remove"},dd=e("i",{class:"fa-regular fa-trash-can"},null,-1),rd=[dd],cd=e("div",{class:"col-12"},[e("div",{class:"alert alert-primary",role:"alert"},' Внешний сервис находится в эксперементальном режиме. Он нужен для связывания команд (страниц) бота с программой Клиента (если есть такая необходимость). Если на странице бота выбрано "внешнее управление", то все запросы будут переадесрованы на указанную ниже ссылку. ')],-1),hd={class:"col-md-12 col-12"},md={class:"mb-3"},ud=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),bd=e("div",null,"Ссылка на внешний сервис обработки данных ",-1),_d=e("label",{class:"form-label",id:"callback_link"},"Ссылка на внешний сервис обработки данных ",-1),pd={class:"row py-3"},fd=e("div",{class:"col-12"},[e("div",{class:"alert alert-danger",role:"alert"}," Внимание! Данный блок настроек больше не поддерживается и со временем эти настройки будут удалены из системы. ")],-1),vd={class:"col-12"},gd={class:"mb-3"},yd={class:"d-flex justify-content-between"},kd={class:"form-label",id:"bot-description"},$d=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Fd=e("div",null,"Отобразится пользователю при первом запуске",-1),wd=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Cd={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},Bd={class:"col-12"},Vd={class:"mb-3"},jd={class:"d-flex justify-content-between"},Ud={class:"form-label",id:"bot-description"},Td=e("i",{class:"fa-regular fa-circle-question mr-1"},null,-1),Id=e("div",null,'Для меню "О Боте"',-1),Sd=e("span",{class:"badge rounded-pill text-bg-danger m-0"},"Нужно",-1),Od={key:0,class:"text-gray-400 ml-3",style:{"font-size":"10px"}},qd={class:"col-12"},Md={class:"card mb-3"},Pd=e("div",{class:"card-header"},[e("h6",null,[c("Информационная ссылка: создайте контент в "),e("a",{target:"_blank",href:"https://telegra.ph"},"https://telegra.ph")])],-1),Ld={class:"card-body"},Ad=e("div",{class:"row"},[e("div",{class:"col-12"},[e("h6",null,"Ссылка")])],-1),zd={class:"row"},Ed={class:"col-12"},Rd={class:"mb-3"},Wd={class:"col-12"},Dd={class:"card mb-3"},Jd=e("div",{class:"card-header"},[e("h6",null,"Ссылки на соц. сети")],-1),Nd={class:"card-body"},Hd=e("div",{class:"row"},[e("div",{class:"col-12"},[e("h6",null,"Ссылка")])],-1),Kd={class:"col-5"},Gd={class:"mb-3"},Yd=["onUpdate:modelValue","aria-describedby"],Zd={class:"col-5"},Qd={class:"mb-3"},Xd=["onUpdate:modelValue","aria-describedby"],xd={class:"col-2"},er=["onClick"],tr=e("i",{class:"fa-regular fa-trash-can"},null,-1),sr=[tr],or={class:"row"},lr={class:"col-12"},nr={class:"row"},ar={class:"col-12"},ir={class:"alert alert-danger alert-dismissible fade show",role:"alert"},dr=e("strong",null,"Внимание!",-1),rr=["onClick"],cr={components:{Vue3JsonEditor:I},props:["bot"],data(){return{loadCommandEditor:!0,menu_variants:[{title:"Открыть меню",url:"/bot-client/simple/{0}?slug={скрипт_id}#/s/menu"}],showCode:!1,tab:0,spent_time_counter:0,can_create:!0,can_create_topics:!0,messages:[],servers:[],need_company_select:!1,selected_warning:null,page:null,step:0,templates:[],load:!1,loadPage:!1,needPageListUpdate:!1,need_threads:!1,need_company:!1,need_cashback_config:!1,need_cashback_rules:!1,need_cashback_fired:!1,need_payments:!1,need_shop:!1,command:null,company:null,warnings:[{title:"Сумма чека больше чем",key:"bill_sum_more_then"},{title:"Сумма начисления кэшбэка больше чем",key:"cashback_up_sum_more_then"},{title:"Сумма списания кэшбэка больше чем",key:"cashback_down_sum_more_then"}],cashback_fire_periods:[{title:"Не сгорает",value:0},{title:"7 дней",value:7},{title:"15 дней",value:15},{title:"30 дней",value:30},{title:"60 дней",value:60},{title:"60 дней",value:90},{title:"120 дней",value:120},{title:"180 дней",value:180},{title:"360 дней",value:360}],needMenuBtn:!1,botForm:{title:"Название бота",short_description:"Описание в шапке бота",long_description:"Описание при первом запуске бота",bot_type:0,is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,company_id:null,creator_id:null,bot_token_dev:null,order_channel:null,message_threads:null,cashback_config:null,server:"main",main_channel:null,vk_shop_link:null,callback_link:null,balance:70,tax_per_day:10,welcome_message:"Приветствую!",image:null,cashback_fire_percent:0,cashback_fire_period:0,max_cashback_use_percent:0,description:"Это ваш бот! Вот такое вот описание у него.",info_link:null,social_links:[],maintenance_message:"Технические работы",payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],commands:null,menu:{text:null,url:null},selected_bot_template_id:null,pages:[],amo:null,warnings:[]}}},watch:{isValidTelegramToken:{handler(l){this.profile.is_admin&&(this.servers||[]).length===0&&this.loadCurrentServers()},deep:!0},"botForm.bot_token":{handler(l){this.isValidTelegramToken&&this.getMe()},deep:!0},need_threads:function(l,t){let s=[{title:"Отзывы",key:"reviews",value:null},{title:"Начисление cashback",key:"cashback",value:null},{title:"Вопросы",key:"questions",value:null},{title:"Конкурсы",key:"actions",value:null},{title:"Заказы",key:"orders",value:null},{title:"Вывод средств",key:"ask-money",value:null},{title:"Доставка",key:"delivery",value:null},{title:"Ответы",key:"response",value:null},{title:"Обратная связь",key:"callback",value:null}];this.need_threads&&!this.botForm.message_threads&&(this.botForm.message_threads=s),this.need_threads&&this.botForm.message_threads&&s.forEach(i=>{this.botForm.message_threads.findIndex(p=>p.key===i.key)===-1&&this.botForm.message_threads.push(i)})},need_payments:function(l,t){this.need_payments||(this.botForm.auto_cashback_on_payments=!1)}},computed:{...V(["getSlugs","getCurrentCompany"]),profile(){return window.profile},isValidTelegramToken(){return this.botForm.bot_token?/^[0-9]{8,10}:[a-zA-Z0-9_-]{35}$/.test(this.botForm.bot_token):!1},filteredWarnings(){return this.botForm.warnings.length===0?this.warnings:this.warnings.filter(l=>!(this.botForm.warnings.findIndex(t=>t.rule_key===l.key)>=0))}},mounted(){if(localStorage.getItem("cashman_admin_bot_creator_counter")!=null){this.can_create=!1;let l=localStorage.getItem("cashman_admin_bot_creator_counter");this.startTimer(l==="null"||l==null?0:l)}window.addEventListener("store_current_company-change-event",l=>{this.company=this.getCurrentCompany}),window.addEventListener("add-payment-system-event",l=>{this.tab=1,this.need_payments=!0,this.$nextTick(()=>{let t=document.querySelector("#payment_provider_token-input");t.classList="form-control border-danger",t.focus(),setTimeout(()=>{let s=document.querySelector("#payment_provider_token-input");s.classList="form-control"},5e3)})}),this.bot?this.$nextTick(()=>{this.botForm={id:this.bot.id||null,title:this.bot.title||"",short_description:this.bot.short_description||"",long_description:this.bot.long_description||"",is_template:this.bot.is_template||!1,auto_cashback_on_payments:this.bot.auto_cashback_on_payments||!1,template_description:this.bot.template_description||null,bot_domain:this.bot.bot_domain||null,bot_token:this.bot.bot_token||null,bot_token_dev:this.bot.bot_token_dev||null,order_channel:this.bot.order_channel||null,message_threads:this.bot.message_threads||null,cashback_config:this.bot.cashback_config||null,main_channel:this.bot.main_channel||null,balance:this.bot.balance||null,server:this.bot.server||"main",tax_per_day:this.bot.tax_per_day||null,vk_shop_link:this.bot.vk_shop_link||null,callback_link:this.bot.callback_link||null,cashback_fire_percent:this.bot.cashback_fire_percent||0,cashback_fire_period:this.bot.cashback_fire_period||0,max_cashback_use_percent:this.bot.max_cashback_use_percent||0,image:this.bot.image||null,description:this.bot.description||null,creator_id:this.bot.creator_id||null,info_link:this.bot.info_link||null,social_links:this.bot.social_links||[],maintenance_message:this.bot.maintenance_message||null,welcome_message:this.bot.welcome_message||null,payment_provider_token:this.bot.payment_provider_token||null,level_1:this.bot.level_1,level_2:this.bot.level_2,level_3:this.bot.level_3,company_id:this.bot.company_id,commands:this.bot.commands||null,photos:this.bot.photos||[],warnings:this.bot.warnings||[],amo:this.bot.amo||null,menu:{text:null,url:null}},Array.isArray(this.botForm.commands)||(this.botForm.commands=[]),this.botForm.menu=this.bot.menu||{text:null,url:null},this.botForm.menu.url!==null&&(this.needMenuBtn=!0),this.botForm.commands==null&&this.autoAddCommands(),this.botForm.message_threads&&(this.need_threads=!0),this.botForm.payment_provider_token&&(this.need_payments=!0),(this.botForm.cashback_config||[]).length>0&&(this.need_cashback_config=!0),this.botForm.warnings.length>0&&(this.need_cashback_rules=!0),this.botForm.cashback_fire_period>0&&(this.need_cashback_fired=!0),this.bot.company&&(this.company=this.bot.company)}):this.botForm.commands==null&&this.autoAddCommands()},methods:{selectBot(l){this.$emit("callback")},autoAddCommands(){this.botForm.commands=[{command:"/start",description:"начни с этой команды"},{command:"/admins",description:"доступные администраторы в системе"},{command:"/help",description:"как использовать систему"},{command:"/about",description:"о CashMan"}]},startTimer(l){this.spent_time_counter=l!=null?Math.min(l,10):10;let t=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(t),this.can_create=!0,this.spent_time_counter=null),localStorage.setItem("cashman_admin_bot_creator_counter",this.spent_time_counter)},1e3)},alert(l,t=null){t!=null&&(this.tab=t),this.messages.push(l)},removeMessage(l){this.messages.splice(l,1)},createBotTopics(){this.can_create_topics=!1,this.$store.dispatch("createBotTopics",{dataObject:{topics:this.botForm.message_threads,bot_id:this.bot.id}}).then(l=>{this.botForm.message_threads=l.data,this.$notify({title:"Конструктор ботов",text:"Топики успешно созданы!",type:"success"})}).catch(()=>{this.can_create_topics=!0,this.$notify({title:"Конструктор ботов",text:"Ошибка создания топиков",type:"error"})})},getMe(){let l=this.botForm.bot_token||"";l.length<40||this.$store.dispatch("getMe",{bot_token:l}).then(t=>{let s=t.username||null,i=t.first_name||null;s&&(this.botForm.bot_domain=s),i&&(this.botForm.title=i)})},getChatLink(l){this.$store.dispatch("loadChatInfo",{dataObject:{chat_id:l,bot_id:this.bot.id}}).then(t=>{console.log("chat info",t)})},addTextTo(l={param:null,text:null}){this.botForm[l.param]=l.text},removeCommands(l){this.botForm.commands.splice(l,1),this.loadCommandEditor=!1,this.$nextTick(()=>{this.loadCommandEditor=!0})},addCommands(){this.botForm.commands||(this.botForm.commands=[]),this.botForm.commands.push({command:null,description:null}),this.loadCommandEditor=!1,this.$nextTick(()=>{this.loadCommandEditor=!0})},loadCurrentServers(){this.$store.dispatch("loadCurrentServers").then(l=>{this.servers=l})},getPhoto(l){return{imageUrl:URL.createObjectURL(l)}},onChangePhotos(l){const t=l.target.files;this.botForm.image=null;for(let s=0;s<t.length;s++)this.botForm.photos=[t[s]]},addItem(l){this.botForm[l].push("")},addSocialLinks(){this.botForm.social_links.push({title:null,url:null})},removeItem(l,t){this.botForm[l].splice(t,1)},removePhoto(){this.botForm.photos=[],this.botForm.image=null},updateWebHook(){this.$store.dispatch("updateBotWebhook",{dataObject:{bot_id:this.bot.id,bot_server:this.botForm.server||null}}).catch(l=>{this.alert(l.response.data.message)})},addBot(){let l=new FormData;Object.keys(this.botForm).forEach(t=>{const s=this.botForm[t]||"";typeof s=="object"?l.append(t,JSON.stringify(s)):l.append(t,s)}),this.company&&l.append("company_id",this.company.id);for(let t=0;t<this.botForm.photos.length;t++)l.append("images[]",this.botForm.photos[t]);l.delete("photos"),this.$store.dispatch(this.bot==null?"createBot":"updateBot",{botForm:l}).then(t=>{let s=t.data;this.$emit("callback",s),this.$notify({title:"Конструктор ботов",text:this.bot==null?"Бот успешно создан!":"Бот успешно обновлен!",type:"success"}),this.startTimer(),this.can_create=!1,this.$store.dispatch("updateBotWebhook",{dataObject:{bot_id:s.id}}).catch(i=>{this.alert(i.response.data.message)}),this.bot==null&&(this.botForm={title:"",server:"main",short_description:"",long_description:"",is_template:!1,auto_cashback_on_payments:!1,template_description:null,bot_domain:null,bot_token:null,bot_token_dev:null,order_channel:null,message_threads:null,main_channel:null,balance:null,tax_per_day:null,callback_link:null,cashback_fire_percent:0,cashback_fire_period:0,max_cashback_use_percent:0,image:null,description:null,info_link:null,social_links:[],maintenance_message:null,payment_provider_token:null,level_1:10,level_2:0,level_3:0,photos:[],warnings:[],selected_bot_template_id:null,pages:[]})}).catch(t=>{this.$notify({title:"Конструктор ботов",text:t.response.data.message,type:"error"})})},onJsonChange(l){this.botForm.commands=l},removeCashBackConfig(l){this.botForm.cashback_config.splice(l,1)},addCashBackConfig(){this.botForm.cashback_config=this.botForm.cashback_config==null?[]:this.botForm.cashback_config,this.botForm.cashback_config.push({title:null})},getWarning(l){let t=this.warnings.find(s=>s.key===l);return t||{title:"Не найдено"}},removeWarning(l){this.botForm.warnings.splice(l,1)},companyListCallback(l){this.load=!0,this.company=l,this.botForm.company_id=l.id,this.need_company_select=!1,this.$nextTick(()=>{this.load=!1})},selectVariant(l){String.format=function(){let t=arguments[0];for(let s=0;s<arguments.length-1;s++){let i=new RegExp("\\{"+s+"\\}","gm");t=t.replace(i,arguments[s+1])}return t},this.botForm.menu.text=l.title||"Меню",this.botForm.menu.url="https://test.next-bots.ru"+String.format(l.url,this.bot.bot_domain||"домен_бота")},addWarning(){const l=this.selected_warning;this.botForm.warnings.push({rule_key:l.key,rule_value:0,is_active:!0}),this.selected_warning=null}}},fr=Object.assign(cr,{__name:"BotForm",setup(l){return(t,s)=>{var p;const i=O("Popper"),y=T("lazy");return n(),a("form",{class:"mb-5",ref:"botForm",onSubmit:s[81]||(s[81]=M((...o)=>t.addBot&&t.addBot(...o),["prevent"]))},[t.isValidTelegramToken?d("",!0):(n(),a("section",Js,[e("div",Ns,[e("div",Hs,[e("div",Ks,[e("div",Gs,[e("div",Ys,[e("div",Zs,[e("div",Qs,[e("div",Xs,[r(e("img",xs,null,512),[[y,"../images/icon.png"]])]),eo])]),e("div",to,[e("div",so,[oo,!t.isValidTelegramToken&&((p=t.botForm.bot_token)==null?void 0:p.length)>0?(n(),a("div",lo," Токен не действительный! ")):d("",!0),no,e("div",ao,[e("div",io,[e("div",{onClick:s[0]||(s[0]=o=>t.botForm.bot_type=0),class:_([{"border-primary":t.botForm.bot_type===0},"card cursor-pointer"]),style:{height:"120px"}},[e("div",{class:_([{"text-primary":t.botForm.bot_type===0},"card-body d-flex flex-column justify-content-center align-items-center p-3"])},ho,2)],2)]),e("div",mo,[e("div",{class:_(["card cursor-pointer",{"border-primary":t.botForm.bot_type===1}]),onClick:s[1]||(s[1]=o=>t.botForm.bot_type=1),style:{height:"120px"}},[e("div",{class:_([{"text-primary":t.botForm.bot_type===1},"card-body d-flex flex-column justify-content-center align-items-center p-3"])},_o,2)],2)]),e("div",po,[e("div",{class:_(["card cursor-pointer",{"border-primary":t.botForm.bot_type===2}]),onClick:s[2]||(s[2]=o=>t.botForm.bot_type=2),style:{height:"120px"}},[e("div",{class:_([{"text-primary":t.botForm.bot_type===2},"card-body d-flex flex-column justify-content-center align-items-center p-3"])},go,2)],2)]),e("div",yo,[e("div",{class:_(["card cursor-pointer",{"border-primary":t.botForm.bot_type===3}]),onClick:s[3]||(s[3]=o=>t.botForm.bot_type=3),style:{height:"120px"}},[e("div",{class:_([{"text-primary":t.botForm.bot_type===3},"card-body d-flex flex-column justify-content-center align-items-center p-3"])},Fo,2)],2)])]),wo,e("div",Co,[r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":s[4]||(s[4]=o=>t.botForm.bot_token=o),maxlength:"255",minlength:"40",onInvalid:s[5]||(s[5]=o=>t.alert("Вы не ввели токен бота!")),"aria-describedby":"bot-token",required:""},null,544),[[b,t.botForm.bot_token]]),Bo]),Vo,t.load?d("",!0):(n(),F(Ds,{key:1,"custom-class":"btn btn-primary p-3 w-100 dropdown-toggle",onSelectBot:t.selectBot,bot:l.bot},null,8,["onSelectBot","bot"]))])])])])])])])])),t.isValidTelegramToken?(n(),a(f,{key:1},[e("div",jo,[e("div",Uo,[e("div",To,[e("div",Io,[So,r(e("input",{type:"text",class:"form-control",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":s[6]||(s[6]=o=>t.botForm.bot_token=o),maxlength:"255",minlength:"40",onInvalid:s[7]||(s[7]=o=>t.alert("Вы не ввели токен бота!")),"aria-describedby":"bot-token",required:""},null,544),[[b,t.botForm.bot_token]])])])]),t.profile.is_admin?(n(),a("div",Oo,[e("div",qo,[e("div",Mo,[e("div",Po,[e("div",Lo,[e("div",Ao,[r(e("select",{class:"form-select",required:"",disabled:t.servers.length===0,"onUpdate:modelValue":s[8]||(s[8]=o=>t.botForm.server=o),id:"floatingSelect","aria-label":"Floating label select example"},[(n(!0),a(f,null,g(t.servers,o=>(n(),a("option",{disabled:o.disabled,value:o.key},m(o.title||"без названия")+" ("+m(o.current_count||0)+" из "+m(o.max_bot_limit||0)+") ",9,Eo))),256))],8,zo),[[C,t.botForm.server]]),Ro])]),e("div",Wo,[e("button",{type:"button",onClick:s[9]||(s[9]=(...o)=>t.updateWebHook&&t.updateWebHook(...o)),disabled:l.bot==null,class:"btn btn-outline-danger p-3 w-100"},"Сменить сервер вручную ",8,Do)])])])])])):d("",!0)]),e("div",Jo,[e("div",No,[e("button",{type:"submit",id:"save-bot-btn",onClick:s[10]||(s[10]=o=>t.messages=[]),disabled:!t.botForm.bot_token||!t.can_create,title:"Сохранение бота",class:"btn btn-primary min-menu-btn"},[l.bot?(n(),a("span",Go,[Yo,c(" Обновить бота")])):(n(),a("span",Ko,"Добавить бота")),t.can_create?d("",!0):(n(),a("span",Zo,m(t.spent_time_counter)+" сек.",1))],8,Ho)])]),e("div",Qo,[e("div",Xo,[e("ul",xo,[e("li",{class:"nav-item",onClick:s[11]||(s[11]=o=>t.tab=0)},[e("a",{class:_(["nav-link",{active:t.tab===0}]),href:"javascript:void(0)"},"Базовые настройки",2)]),e("li",{class:"nav-item",onClick:s[12]||(s[12]=o=>t.tab=1)},[e("a",{class:_(["nav-link",{active:t.tab===1}]),href:"javascript:void(0)"},"Кэшбэк&Финансы",2)]),t.botForm.id!=null?(n(),a("li",{key:0,class:"nav-item",onClick:s[13]||(s[13]=o=>t.tab=2)},[e("a",{class:_(["nav-link",{active:t.tab===2}]),href:"javascript:void(0)"},"Обратная связь",2)])):d("",!0),t.botForm.id==null?(n(),a("li",el,sl)):d("",!0),e("li",{class:"nav-item",onClick:s[14]||(s[14]=o=>t.tab=3)},[e("a",{class:_(["nav-link",{active:t.tab===3}]),href:"javascript:void(0)"},"Сообщения",2)]),e("li",{class:"nav-item",onClick:s[15]||(s[15]=o=>t.tab=4)},[e("a",{class:_(["nav-link",{active:t.tab===4}]),href:"javascript:void(0)"},"Другие настройки",2)]),e("li",{class:"nav-item",onClick:s[16]||(s[16]=o=>t.tab=5)},[e("a",{class:_(["nav-link text-danger",{active:t.tab===5}]),href:"javascript:void(0)"},[ol,c(" Устаревшие настройки")],2)])])])]),r(e("div",ll,[e("div",nl,[e("div",al,[e("div",il,[e("div",dl,[r(e("input",{class:"form-check-input",type:"checkbox",value:t.need_company_select,"onUpdate:modelValue":s[17]||(s[17]=o=>t.need_company_select=o),id:"bot-select-company"},null,8,rl),[[$,t.need_company_select]]),cl]),t.botForm.company_id==null?(n(),a("p",{key:0,class:"alert alert-danger",onClick:s[18]||(s[18]=o=>t.need_company_select=!0)},"Внимание! Вы не выбрали клиента!")):(n(),a("p",{key:1,class:"card alert alert-success cursor-pointer",onClick:s[19]||(s[19]=o=>t.need_company_select=!0)},[c(" Выбран клиент "),t.company?(n(),a("span",hl,"#"+m(t.company.id)+" "+m(t.company.title),1)):d("",!0)]))]),t.need_company_select?(n(),a("div",ml,[t.load?d("",!0):(n(),F(L,{key:0,selected:t.botForm.company_id,onCallback:t.companyListCallback},null,8,["selected","onCallback"]))])):d("",!0),e("div",ul,[e("div",bl,[r(e("input",{class:"form-check-input",type:"checkbox",value:t.botForm.is_template||!1,"onUpdate:modelValue":s[20]||(s[20]=o=>t.botForm.is_template=o),id:"bot-is-template"},null,8,_l),[[$,t.botForm.is_template]]),pl])]),t.botForm.is_template?(n(),a("div",fl,[e("div",vl,[e("label",gl,[k(i,null,{content:v(()=>[kl]),default:v(()=>[yl]),_:1}),c(" Название шаблона бота "),$l]),r(e("input",{type:"text",class:"form-control",placeholder:"Название \\ описание шаблона","aria-label":"Описание шаблона","onUpdate:modelValue":s[21]||(s[21]=o=>t.botForm.template_description=o),maxlength:"255",onInvalid:s[22]||(s[22]=o=>t.alert("Вы не ввели название шаблона!")),"aria-describedby":"bot-template-description",required:""},null,544),[[b,t.botForm.template_description]])])])):d("",!0),e("div",Fl,[e("div",wl,[e("label",Cl,[k(i,null,{content:v(()=>[Vl]),default:v(()=>[Bl]),_:1}),c(" Доменное имя бота (загружается автоматически) ")]),r(e("input",{type:"text",class:"form-control",placeholder:"Имя бота","aria-label":"Имя бота",disabled:!0,name:"bot_domain",onInvalid:s[23]||(s[23]=o=>t.alert("Вы не ввели доменное имя бота!",0)),"onUpdate:modelValue":s[24]||(s[24]=o=>t.botForm.bot_domain=o),maxlength:"255","aria-describedby":"bot-domain",required:""},null,544),[[b,t.botForm.bot_domain]])])]),e("div",jl,[e("div",Ul,[e("div",Tl,[Il,e("div",Sl,[e("label",Ol,[t.botForm.title?(n(),a("span",ql,[c(" Название бота "),t.botForm.title.length>0?(n(),a("small",Ml,"Длина текста "+m(t.botForm.title.length)+"/64",1)):d("",!0)])):d("",!0)]),r(e("input",{type:"text",class:"form-control",placeholder:"Текст названия","aria-label":"Текст названия","onUpdate:modelValue":s[25]||(s[25]=o=>t.botForm.title=o),maxlength:"64","aria-describedby":"bot-title"},null,512),[[b,t.botForm.title]])]),e("div",Pl,[e("label",Ll,[e("span",null,[c(" Описание в шапке бота "),t.botForm.short_description.length>0?(n(),a("small",Al,"Длина текста "+m(t.botForm.short_description.length)+"/105",1)):d("",!0)])]),zl,r(e("textarea",{class:"form-control",placeholder:"Описание в шапке бота","aria-label":"Описание в шапке бота","onUpdate:modelValue":s[26]||(s[26]=o=>t.botForm.short_description=o),maxlength:"105","aria-describedby":"bot-short-description"},`
                                `,512),[[b,t.botForm.short_description]])]),e("div",El,[e("label",Rl,[e("span",null,[c(" Описание возможностей бота "),t.botForm.long_description.length>0?(n(),a("small",Wl,"Длина текста "+m(t.botForm.long_description.length)+"/505",1)):d("",!0)])]),Dl,r(e("textarea",{class:"form-control",placeholder:"Описание возможностей бота","aria-label":"Описание возможностей бота","onUpdate:modelValue":s[27]||(s[27]=o=>t.botForm.long_description=o),maxlength:"505","aria-describedby":"bot-long-description"},`
                                `,512),[[b,t.botForm.long_description]])]),(n(!0),a(f,null,g(t.botForm.commands,(o,u)=>(n(),a("div",{class:"row",key:"commands-"+u},[t.botForm.commands[u].command==="/adminmenu"?(n(),a("div",Jl,Hl)):d("",!0),e("div",Kl,[e("div",Gl,[r(e("input",{type:"text",class:"form-control",placeholder:"Название команды","aria-label":"Название команды",maxlength:"255",onInvalid:s[28]||(s[28]=h=>t.alert("Вы не ввели название команды",0)),"onUpdate:modelValue":h=>t.botForm.commands[u].command=h,"aria-describedby":"bot-command-"+u,required:""},null,40,Yl),[[b,t.botForm.commands[u].command]])])]),e("div",Zl,[e("div",Ql,[r(e("input",{type:"text",class:"form-control",placeholder:"Описание команды","aria-label":"Описание команды",maxlength:"255",onInvalid:s[29]||(s[29]=h=>t.alert("Вы не ввели описание команды!",0)),"onUpdate:modelValue":h=>t.botForm.commands[u].description=h,"aria-describedby":"bot-command-description-"+u,required:""},null,40,Xl),[[b,t.botForm.commands[u].description]])])]),e("div",xl,[e("button",{type:"button",onClick:h=>t.removeCommands(u),class:"btn btn-outline-danger w-100"},sn,8,en)])]))),128)),e("div",on,[e("div",ln,[e("button",{type:"button",onClick:s[30]||(s[30]=o=>t.addCommands()),class:"btn btn-outline-success w-100"},[(t.botForm.commands||[]).length>0?(n(),a("span",nn," Добавить еще команду")):(n(),a("span",an," Добавить системное меню"))])])]),e("div",dn,[e("div",rn,[e("div",cn,[r(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[31]||(s[31]=o=>t.showCode=o),id:"showCode"},null,512),[[$,t.showCode]]),hn])]),t.showCode?(n(),a("div",mn,[un,t.loadCommandEditor?(n(),F(q(I),{key:0,mode:"code",modelValue:t.botForm.commands,"onUpdate:modelValue":s[32]||(s[32]=o=>t.botForm.commands=o),"show-btns":!1,expandedOnStart:!0,onJsonChange:t.onJsonChange},null,8,["modelValue","onJsonChange"])):d("",!0)])):d("",!0)]),e("div",bn,[e("div",_n,[pn,e("div",fn,[r(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":s[33]||(s[33]=o=>t.needMenuBtn=o),id:"needMenuBtn"},null,512),[[$,t.needMenuBtn]]),vn])]),t.needMenuBtn?(n(),a(f,{key:0},[e("div",gn,[(n(!0),a(f,null,g(t.menu_variants,o=>(n(),a("span",{onClick:u=>t.selectVariant(o),class:"badge bg-primary mb-2 btn"},m(o.title||"Выбрать"),9,yn))),256))]),e("div",kn,[r(e("input",{type:"text",class:"form-control",placeholder:"Текст кнопки меню","aria-label":"Текст кнопки меню",maxlength:"255",onInvalid:s[34]||(s[34]=o=>t.alert("Текст кнопки меню!",0)),"onUpdate:modelValue":s[35]||(s[35]=o=>t.botForm.menu.text=o),required:""},null,544),[[b,t.botForm.menu.text]])]),e("div",$n,[r(e("input",{type:"url",class:"form-control",placeholder:"Адрес перехода URL","aria-label":"Адрес перехода URL",maxlength:"255",onInvalid:s[36]||(s[36]=o=>t.alert("Вы не ввели адрес меню!",0)),"onUpdate:modelValue":s[37]||(s[37]=o=>t.botForm.menu.url=o),required:""},null,544),[[b,t.botForm.menu.url]])])],64)):d("",!0)])])])])])]),e("div",Fn,[e("div",wn,[e("div",Cn,[t.botForm.bot_domain?(n(),a("p",Bn,"Проверить работу бота")):d("",!0),e("a",{class:"btn btn-success w-100 p-3 mb-3",href:"https://t.me/"+t.botForm.bot_domain,target:"_blank"},"@"+m(t.botForm.bot_domain),9,Vn),jn,t.profile.is_admin?(n(),a(f,{key:1},[Un,e("div",Tn,[e("div",In,[r(e("input",{type:"number",class:"form-control",placeholder:"Баланс","aria-label":"Баланс","onUpdate:modelValue":s[38]||(s[38]=o=>t.botForm.balance=o),min:"0",onInvalid:s[39]||(s[39]=o=>t.alert("Вы не ввели сумму баланса бота!",1)),"aria-describedby":"bot-balance",required:""},null,544),[[b,t.botForm.balance]]),e("label",Sn,[k(i,null,{content:v(()=>[qn]),default:v(()=>[On]),_:1}),c(" Баланс бота, руб "),Mn])])]),e("div",Pn,[e("div",Ln,[r(e("input",{type:"number",class:"form-control",placeholder:"Списание","aria-label":"Списание","onUpdate:modelValue":s[40]||(s[40]=o=>t.botForm.tax_per_day=o),min:"0",onInvalid:s[41]||(s[41]=o=>t.alert("Вы не ввели сумму списания бота!",1)),"aria-describedby":"bot-tax-per-day",required:""},null,544),[[b,t.botForm.tax_per_day]]),e("label",An,[k(i,null,{content:v(()=>[En]),default:v(()=>[zn]),_:1}),c(" Списание за сутки, руб "),Rn])])])],64)):d("",!0)])])])],512),[[w,t.tab===0]]),r(e("div",Wn,[e("div",Dn,[e("div",Jn,[Nn,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":s[42]||(s[42]=o=>t.botForm.level_1=o),min:"0",onInvalid:s[43]||(s[43]=o=>t.alert("Вы не ввели значение кэшбэка 1 уровня бота!",1)),"aria-describedby":"bot-level-1",required:""},null,544),[[b,t.botForm.level_1]])])]),e("div",Hn,[e("div",Kn,[Gn,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":s[44]||(s[44]=o=>t.botForm.level_2=o),min:"0","aria-describedby":"bot-level-2"},null,512),[[b,t.botForm.level_2]])])]),e("div",Yn,[e("div",Zn,[Qn,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень CashBack","onUpdate:modelValue":s[45]||(s[45]=o=>t.botForm.level_3=o),min:"0","aria-describedby":"bot-level-3"},null,512),[[b,t.botForm.level_3]])])]),e("div",Xn,[e("div",xn,[r(e("input",{class:"form-check-input","onUpdate:modelValue":s[46]||(s[46]=o=>t.need_cashback_fired=o),type:"checkbox",id:"need-cashback-fired"},null,512),[[$,t.need_cashback_fired]]),ea])]),t.need_cashback_fired?(n(),a("div",ta,[e("div",sa,[oa,r(e("select",{class:"form-control","onUpdate:modelValue":s[47]||(s[47]=o=>t.botForm.cashback_fire_period=o),id:"cashback-fired-period"},[(n(!0),a(f,null,g(t.cashback_fire_periods,o=>(n(),a("option",{value:o.value},m(o.title||"Не указано"),9,la))),256))],512),[[C,t.botForm.cashback_fire_period]])]),t.botForm.cashback_fire_period>0?(n(),a("div",na,[aa,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"уровень сгорания CashBack","onUpdate:modelValue":s[48]||(s[48]=o=>t.botForm.cashback_fire_percent=o),min:"0",max:"100","aria-describedby":"cashback-fired-level"},null,512),[[b,t.botForm.cashback_fire_percent]])])):d("",!0)])):d("",!0),e("div",ia,[e("div",da,[ra,r(e("input",{type:"number",class:"form-control",placeholder:"%","aria-label":"процент для списания CashBack при покупке","onUpdate:modelValue":s[49]||(s[49]=o=>t.botForm.max_cashback_use_percent=o),min:"0",max:"100","aria-describedby":"cashback-max_cashback_use_percent"},null,512),[[b,t.botForm.max_cashback_use_percent]])])]),e("div",ca,[e("div",ha,[r(e("input",{class:"form-check-input","onUpdate:modelValue":s[50]||(s[50]=o=>t.need_payments=o),type:"checkbox",id:"need-payments"},null,512),[[$,t.need_payments]]),ma])]),t.need_payments?(n(),a("div",ua,[e("div",ba,[r(e("input",{class:"form-check-input",type:"checkbox",value:t.botForm.auto_cashback_on_payments,"onUpdate:modelValue":s[51]||(s[51]=o=>t.botForm.auto_cashback_on_payments=o),id:"bot-auto-cashback-on-payments"},null,8,_a),[[$,t.botForm.auto_cashback_on_payments]]),pa]),e("div",fa,[k(i,null,{content:v(()=>[ga]),default:v(()=>[va]),_:1}),ya,r(e("input",{type:"text",class:"form-control",id:"payment_provider_token-input",placeholder:"Токен","aria-label":"Токен","onUpdate:modelValue":s[52]||(s[52]=o=>t.botForm.payment_provider_token=o),"aria-describedby":"payment_provider_token"},null,512),[[b,t.botForm.payment_provider_token]])])])):d("",!0),e("div",ka,[e("div",$a,[r(e("input",{class:"form-check-input","onUpdate:modelValue":s[53]||(s[53]=o=>t.need_shop=o),type:"checkbox",id:"need-shop"},null,512),[[$,t.need_shop]]),Fa])]),t.need_shop?(n(),a("div",wa,[e("div",Ca,[k(i,null,{content:v(()=>[Va]),default:v(()=>[Ba]),_:1}),ja,r(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на группу ВК","aria-label":"ссылка на группу ВК","onUpdate:modelValue":s[54]||(s[54]=o=>t.botForm.vk_shop_link=o),"aria-describedby":"vk_shop_link"},null,512),[[b,t.botForm.vk_shop_link]])])])):d("",!0),e("div",Ua,[e("div",Ta,[r(e("input",{class:"form-check-input","onUpdate:modelValue":s[55]||(s[55]=o=>t.need_cashback_config=o),type:"checkbox",id:"need-cashback-config"},null,512),[[$,t.need_cashback_config]]),Ia])]),t.need_cashback_config?(n(),a("div",Sa,[Oa,(n(!0),a(f,null,g(t.botForm.cashback_config,(o,u)=>(n(),a("div",{class:"d-flex justify-content-between mb-2 flex-wrap",key:"social-link"+u},[e("div",qa,[Ma,e("button",{type:"button",onClick:h=>t.removeCashBackConfig(u),class:"btn btn-link text-danger"},Aa,8,Pa)]),r(e("input",{type:"text",class:"form-control mb-2 w-100",placeholder:"Название категории","aria-label":"Название категории",maxlength:"255",onInvalid:s[56]||(s[56]=h=>t.alert("Вы не ввели название категории!",1)),"onUpdate:modelValue":h=>t.botForm.cashback_config[u].title=h,"aria-describedby":"bot-cashback-config-"+u,required:""},null,40,za),[[b,t.botForm.cashback_config[u].title]])]))),128)),Ea,e("button",{type:"button",onClick:s[57]||(s[57]=o=>t.addCashBackConfig()),class:"btn mb-2 rounded-sm btn-outline-info w-100"}," Добавить категорию "),Ra])):d("",!0),e("div",Wa,[e("div",Da,[r(e("input",{class:"form-check-input","onUpdate:modelValue":s[58]||(s[58]=o=>t.need_cashback_rules=o),type:"checkbox",id:"need-cashback-rules"},null,512),[[$,t.need_cashback_rules]]),Ja])]),t.need_cashback_rules?(n(),a("div",Na,[e("div",Ha,[e("div",Ka,[e("div",Ga,[Ya,r(e("select",{class:"form-control","onUpdate:modelValue":s[59]||(s[59]=o=>t.selected_warning=o),onChange:s[60]||(s[60]=(...o)=>t.addWarning&&t.addWarning(...o)),id:"warning-rules"},[Za,(n(!0),a(f,null,g(t.filteredWarnings,o=>(n(),a("option",{value:o},m(o.title),9,Qa))),256))],544),[[C,t.selected_warning]])]),(n(!0),a(f,null,g(t.botForm.warnings,(o,u)=>(n(),a("div",Xa,[e("div",xa,[e("div",ei,[e("p",ti,m(t.getWarning(o.rule_key).title||"Не найдено"),1)]),e("div",si,[e("div",oi,[r(e("input",{class:"form-check-input","onUpdate:modelValue":h=>t.botForm.warnings[u].is_active=h,type:"checkbox",id:"warning-is-active-"+u},null,8,li),[[$,t.botForm.warnings[u].is_active]]),e("label",{class:"form-check-label",for:"warning-is-active-"+u},[t.botForm.warnings[u].is_active?(n(),a("span",ai,"Вкл")):(n(),a("span",ii,"Выкл"))],8,ni)])]),e("div",di,[r(e("input",{type:"number",class:"form-control",placeholder:"Значение","onUpdate:modelValue":h=>t.botForm.warnings[u].rule_value=h,min:"0","aria-describedby":"bot-level-3"},null,8,ri),[[b,t.botForm.warnings[u].rule_value]])]),e("div",ci,[e("button",{onClick:h=>t.removeWarning(u),type:"button",class:"btn btn-outline-danger"},ui,8,hi)])])]))),256))])])])):d("",!0)],512),[[w,t.tab===1]]),r(e("div",bi,[_i,e("div",pi,[e("div",fi,[e("div",vi,[e("label",gi,[e("div",null,[k(i,null,{content:v(()=>[ki]),default:v(()=>[yi]),_:1}),c(" Канал для заказов (id) "),$i])]),k(j,{token:t.botForm.bot_token,param:"order_channel",onCallback:t.addTextTo},null,8,["token","onCallback"])]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":s[61]||(s[61]=o=>t.botForm.order_channel=o),maxlength:"255","aria-describedby":"bot-order-channel"},null,512),[[b,t.botForm.order_channel]]),e("small",null,[e("a",{onClick:s[62]||(s[62]=o=>t.getChatLink(t.botForm.order_channel)),href:"javascript:void(0)"},"Узнать ссылку"),c("(будет отправлена в бота)")])])]),e("div",Fi,[e("div",wi,[e("div",Ci,[Bi,k(j,{token:t.botForm.bot_token,param:"main_channel",onCallback:t.addTextTo},null,8,["token","onCallback"])]),r(e("input",{type:"text",class:"form-control",placeholder:"id канала","aria-label":"id канала","onUpdate:modelValue":s[63]||(s[63]=o=>t.botForm.main_channel=o),maxlength:"255","aria-describedby":"bot-main-channel"},null,512),[[b,t.botForm.main_channel]]),e("small",null,[e("a",{onClick:s[64]||(s[64]=o=>t.getChatLink(t.botForm.main_channel)),href:"javascript:void(0)"},"Узнать ссылку"),c("(будет отправлена в бота)")])])]),t.botForm.order_channel?(n(),a("div",Vi,Ui)):d("",!0),t.botForm.order_channel?(n(),a("div",Ti,[e("div",Ii,[r(e("input",{class:"form-check-input","onUpdate:modelValue":s[65]||(s[65]=o=>t.need_threads=o),type:"checkbox",id:"need-topics-mailing"},null,512),[[$,t.need_threads]]),Si])])):d("",!0),t.need_threads&&t.botForm.order_channel?(n(),a("div",Oi,[e("div",qi,[Mi,e("button",{class:"btn btn-outline-info",onClick:s[66]||(s[66]=(...o)=>t.createBotTopics&&t.createBotTopics(...o)),disabled:!t.can_create_topics,type:"button"},[Li,c("Создать топики автоматически ")],8,Pi)]),e("ul",Ai,[(n(!0),a(f,null,g(t.botForm.message_threads,(o,u)=>(n(),a("li",zi,[e("p",Ei,m(o.title)+" ("+m(o.key)+")",1),r(e("input",{type:"number",class:"form-control",min:"0",max:"10000",placeholder:"Идентификатор топика","onUpdate:modelValue":h=>t.botForm.message_threads[u].value=h},null,8,Ri),[[b,t.botForm.message_threads[u].value]])]))),256))])])):d("",!0)],512),[[w,t.tab===2]]),r(e("div",Wi,[e("div",Di,[e("div",Ji,[e("div",Ni,[e("label",Hi,[c("Сообщение для режима тех. работ "),Ki,t.botForm.maintenance_message?(n(),a("small",Gi," Длина текста "+m(t.botForm.maintenance_message.length),1)):d("",!0)])]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текстовое сообщение","aria-label":"Текстовое сообщение","onUpdate:modelValue":s[67]||(s[67]=o=>t.botForm.maintenance_message=o),maxlength:"255",onInvalid:s[68]||(s[68]=o=>t.alert("Вы не ввели сообщение для технических работ бота!",3)),"aria-describedby":"bot-maintenance-message",required:""},`
                    `,544),[[b,t.botForm.maintenance_message]])])])],512),[[w,t.tab===3]]),r(e("div",Yi,[Zi,e("div",Qi,[Xi,e("div",xi,[t.botForm.photos?(n(),a("label",ed,[td,e("input",{type:"file",id:"bot-photos",accept:"image/*",onChange:s[69]||(s[69]=(...o)=>t.onChangePhotos&&t.onChangePhotos(...o)),style:{display:"none"}},null,32)])):d("",!0),t.botForm.photos?(n(!0),a(f,{key:1},g(t.botForm.photos,(o,u)=>(n(),a("div",sd,[r(e("img",null,null,512),[[y,t.getPhoto(o).imageUrl]]),e("div",od,[e("a",{onClick:s[70]||(s[70]=h=>t.removePhoto())},nd)])]))),256)):(n(),a("div",ad,[r(e("img",null,null,512),[[y,"/images-by-bot-id/"+l.bot.id+"/"+t.botForm.image]]),e("div",id,[e("a",{onClick:s[71]||(s[71]=o=>t.removePhoto())},rd)])]))])]),cd,e("div",hd,[e("div",md,[k(i,null,{content:v(()=>[bd]),default:v(()=>[ud]),_:1}),_d,r(e("input",{type:"url",class:"form-control",placeholder:"Ссылка на внешний сервис","aria-label":"ссылка на внешний сервис","onUpdate:modelValue":s[72]||(s[72]=o=>t.botForm.callback_link=o),"aria-describedby":"callback_link"},null,512),[[b,t.botForm.callback_link]])])])],512),[[w,t.tab===4]]),r(e("div",pd,[fd,e("div",vd,[e("div",gd,[e("div",yd,[e("label",kd,[k(i,null,{content:v(()=>[Fd]),default:v(()=>[$d]),_:1}),c(" Приветственное сообщение "),wd,t.botForm.welcome_message?(n(),a("small",Cd," Длина текста "+m(t.botForm.welcome_message.length),1)):d("",!0)])]),r(e("textarea",{type:"text",class:"form-control",style:{"min-height":"400px"},placeholder:"Текстовое приветствие при запуске бота","aria-label":"Текстовое приветствие при запуске бота","onUpdate:modelValue":s[73]||(s[73]=o=>t.botForm.welcome_message=o),onInvalid:s[74]||(s[74]=o=>t.alert("Вы не ввели приветственное сообщение!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[b,t.botForm.welcome_message]])])]),e("div",Bd,[e("div",Vd,[e("div",jd,[e("label",Ud,[k(i,null,{content:v(()=>[Id]),default:v(()=>[Td]),_:1}),c(" Описание бота "),Sd,t.botForm.description?(n(),a("small",Od," Длина текста "+m(t.botForm.description.length),1)):d("",!0)])]),r(e("textarea",{type:"text",class:"form-control",placeholder:"Текстовое описание бота","aria-label":"Текстовое описание бота","onUpdate:modelValue":s[75]||(s[75]=o=>t.botForm.description=o),onInvalid:s[76]||(s[76]=o=>t.alert("Вы не ввели описание бота!",3)),"aria-describedby":"bot-description",required:""},`
                    `,544),[[b,t.botForm.description]])])]),e("div",qd,[e("div",Md,[Pd,e("div",Ld,[Ad,e("div",zd,[e("div",Ed,[e("div",Rd,[r(e("input",{type:"text",class:"form-control",placeholder:"Ссылка ресурс telegraph","aria-label":"Ссылка ресурс telegraph",maxlength:"255","onUpdate:modelValue":s[77]||(s[77]=o=>t.botForm.info_link=o),"aria-describedby":"bot-info-link"},null,512),[[b,t.botForm.info_link]])])])])])])]),e("div",Wd,[e("div",Dd,[Jd,e("div",Nd,[Hd,(n(!0),a(f,null,g(t.botForm.social_links,(o,u)=>(n(),a("div",{class:"row",key:"social-link"+u},[e("div",Kd,[e("div",Gd,[r(e("input",{type:"text",class:"form-control",placeholder:"Название ссылки","aria-label":"Название ссылки",maxlength:"255",onInvalid:s[78]||(s[78]=h=>t.alert("Вы не ввели название ссылки на соц. сеть!",4)),"onUpdate:modelValue":h=>t.botForm.social_links[u].title=h,"aria-describedby":"bot-social-link-"+u,required:""},null,40,Yd),[[b,t.botForm.social_links[u].title]])])]),e("div",Zd,[e("div",Qd,[r(e("input",{type:"text",class:"form-control",placeholder:"Ссылка на соц.сеть","aria-label":"Ссылка на соц.сеть",maxlength:"255",onInvalid:s[79]||(s[79]=h=>t.alert("Вы не ввели ссылку на соц. сеть!",4)),"onUpdate:modelValue":h=>t.botForm.social_links[u].url=h,"aria-describedby":"bot-social-link-"+u,required:""},null,40,Xd),[[b,t.botForm.social_links[u].url]])])]),e("div",xd,[e("button",{type:"button",onClick:h=>t.removeItem("social_links",u),class:"btn btn-outline-danger w-100"},sr,8,er)])]))),128)),e("div",or,[e("div",lr,[e("button",{type:"button",onClick:s[80]||(s[80]=o=>t.addSocialLinks()),class:"btn btn-outline-success w-100"},"Добавить еще ссылку ")])])])])])],512),[[w,t.tab===5]]),e("div",nr,[e("div",ar,[t.messages.length>0?(n(!0),a(f,{key:0},g(t.messages,(o,u)=>(n(),a("div",ir,[dr,c(" "+m(o||"Ошибка")+" ",1),e("button",{type:"button",class:"btn-close",onClick:h=>t.removeMessage(u)},null,8,rr)]))),256)):d("",!0)])])],64)):d("",!0)],32)}}});export{fr as _,jt as a,Ds as b};
