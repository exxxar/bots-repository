import{g as h,o as a,j as n,l as t,F as c,J as m,G as u,L as o,k as g,n as d,a0 as p,$ as f,K as r}from"./index.es-db843bab.js";import{P as b}from"./Pagination-ccc8cfc8.js";import{R as k}from"./ReturnToBot-463a5d25.js";/* empty css                                                   */import"./_plugin-vue_export-helper-c27b6911.js";const y=t("div",{class:"card card-style"},[t("div",{class:"content"},[t("p",{class:"mb-0"},[d(" Вы можете выбрать администратора из списка активных администраторов и прислать ему запрос на зачисление "),t("strong",null,"CashBack"),d(". К запросу вы можете прикрепить текстовое сообщение, которое также получит выбранный администратор. ")])])],-1),v={key:0,class:"card card-style"},w={class:"content mb-2"},A=t("h3",null,"Список администраторов",-1),j=t("p",null," Список всех администраторов системы с их статусами и последним временем онлайн ",-1),q={class:"list-group list-boxes"},B=["onClick"],$=t("i",{class:"fa font-20 fa-mobile color-blue2-dark"},null,-1),P={key:0,class:"color-green1-dark"},N={key:1,class:"color-red2-light"},I={key:2,class:"fa fa-check-circle color-green1-dark"},C={key:3,class:"fa fa-times-circle color-red2-light"},O={key:1,class:"card card-style bg-28","data-card-height":"130",style:{height:"130px"}},T=t("div",{class:"card-center"},[t("h3",{class:"color-white font-700 text-center mb-0"},"Список администраторов"),t("p",{class:"color-white text-center opacity-60 mt-n1 mb-0"},"К сожалению, администраторы не найдены:(")],-1),R=t("div",{class:"card-overlay bg-highlight opacity-90"},null,-1),S=[T,R],V={data(){return{spent_time_counter:0,is_requested:!1,admins:[],admins_paginate_object:null,type:0}},computed:{...h(["getAdmins","getAdminsPaginateObject"]),self(){return window.self},currentBot(){return window.currentBot}},mounted(){this.loadAdmins(),localStorage.getItem("cashman_admin_request_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_admin_request_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,30):30;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_admin_request_counter",this.spent_time_counter)},1e3)},nextAdminPage(s){this.loadAdmins(s)},sendRequest(s,e){if(!s.is_work){this.$botNotification.warning("Упс!","Администратор офлайн!");return}if(this.is_requested){this.$botNotification.warning("Упс!",`Вызвать администратора можно через <strong>${this.spent_time_counter} сек.</strong>`);return}this.$store.dispatch("requestAdmin",{dataObject:{bot_id:this.currentBot.id,admin_telegram_chat_id:s.telegram_chat_id,user_telegram_chat_id:this.self.telegram_chat_id}}).then(l=>{this.$botNotification.success("Отлично!","Выбранный Администратор оповещен!"),this.startTimer(),this.is_requested=!0}).catch(()=>{})},loadAdmins(s=0){this.$store.dispatch("loadAdmins",{dataObject:{bot_domain:this.currentBot.bot_domain},page:s}).then(e=>{this.admins=this.getAdmins,this.admins_paginate_object=this.getAdminsPaginateObject}).catch(()=>{})}}},D=Object.assign(V,{__name:"Admins",setup(s){return(e,l)=>(a(),n(c,null,[y,e.admins.length>0?(a(),n("div",v,[t("div",w,[A,j,t("div",q,[(a(!0),n(c,null,m(e.admins,(i,_)=>(a(),n("a",{href:"javascript:void(0)",onClick:p(x=>e.sendRequest(i,_),["prevent"]),class:f([{"border-green1-dark":i.is_work,"border-red1-dark":!i.is_work},"border rounded-s shadow-xs"])},[$,t("span",null,r(i.user.fio_from_telegram||i.user.name||"Не указано")+" ("+r(e.$filters.timeAgo(i.updated_at))+")",1),t("strong",null,r(i.phone||"Номер телефона не указан"),1),i.is_work?(a(),n("u",P,"В сети")):(a(),n("u",N,"Не в сети")),i.is_work?(a(),n("i",I)):(a(),n("i",C))],10,B))),256))]),e.admins_paginate_object?(a(),u(b,{key:0,class:"mt-2",onPagination_page:e.nextAdminPage,pagination:e.admins_paginate_object},null,8,["onPagination_page","pagination"])):o("",!0),g(k,{class:"mb-2"})])])):o("",!0),e.type===0&&e.admins.length===0?(a(),n("div",O,S)):o("",!0)],64))}});export{D as default};
