import{o as a,j as i,l as t,a0 as c,M as l,W as _,K as d,n as p}from"./index.es-db843bab.js";import{_ as m}from"./_plugin-vue_export-helper-c27b6911.js";const u={name:"App",data(){return{spent_time_counter:0,is_requested:!1,passwordForm:{password:null,page_id:null}}},computed:{tg(){return window.Telegram.WebApp}},mounted(){const s=new URLSearchParams(window.location.search);this.passwordForm.page_id=JSON.parse(s.get("page_id"))||null,localStorage.getItem("cashman_password_activate_counter")!=null&&(this.is_requested=!0,this.startTimer(localStorage.getItem("cashman_password_activate_counter")))},methods:{startTimer(s){this.spent_time_counter=s!=null?Math.min(s,10):10;let e=setInterval(()=>{this.spent_time_counter>0?this.spent_time_counter--:(clearInterval(e),this.is_requested=!1,this.spent_time_counter=null),localStorage.setItem("cashman_password_activate_counter",this.spent_time_counter)},1e3)},submit(){this.startTimer(),this.$store.dispatch("activatePassword",{passwordForm:this.passwordForm}).then(s=>{this.$notify({title:"Пароль страницы",text:"Пароль страницы успешно активирован!",type:"success"}),this.passwordForm.password=null,this.tg.close()}).catch(()=>{this.$notify({title:"Упс!",text:"Ошибка активации пароля!",type:"error"})})}}},h={class:"container py-3"},w={class:"row"},f={class:"col-12"},g={class:"card"},v={class:"card-body"},b=t("h5",{class:"text-center fw-bold my-3"},"Приветствуем!",-1),y=t("p",{class:"text-center fst-italic"}," У вас есть пароль от данной страницы? Отлично! Активируйте его прямо сейчас и наслаждайтесь эксклюзивными преимуществами! ",-1),x={class:"form-floating mb-3"},I=t("label",{for:"floatingInput"},[t("i",{class:"input-icon fa-solid fa-terminal"}),p(" Ваш пароль")],-1),F=["disabled"],P={key:0,class:"color-white"},S={key:1,class:"color-white"};function T(s,e,k,q,o,n){return a(),i("div",h,[t("div",w,[t("div",f,[t("div",g,[t("div",v,[b,y,t("form",{onSubmit:e[1]||(e[1]=c((...r)=>n.submit&&n.submit(...r),["prevent"]))},[t("div",x,[l(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>o.passwordForm.password=r),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[_,o.passwordForm.password]]),I]),t("button",{type:"submit",disabled:o.spent_time_counter>0,class:"btn w-100 btn-primary mb-2 p-3"},[o.spent_time_counter<=0?(a(),i("span",P,"Активировать пароль")):(a(),i("span",S,"Осталось ждать "+d(o.spent_time_counter)+" сек.",1))],8,F)],32)])])])])])}const N=m(u,[["render",T]]);export{N as default};
