import{g as $,o as i,j as l,k as f,w as F,u as x,X as B,l as t,G as _,L as c,n as m,K as h,a0 as C,M as n,W as p,F as u,J as g,p as j,$ as T,s as E,N as S}from"./index.es-db843bab.js";import{M as L}from"./ManagerProfile-1a30862c.js";/* empty css                                                 */import{b as q,_ as A}from"./BotForm-4207bad0.js";import{P as I}from"./PromoCodeActivateForm-d9e882ff.js";import{_ as P}from"./BotSection-52c6d988.js";import"./CompanyList-88f069fe.js";import{C as D,S as V,P as N,N as O}from"./carousel.es-8c11147c.js";import"./_plugin-vue_export-helper-c27b6911.js";/* empty css                                                              */import"./Pagination-4f4ca1a4.js";import"./vue3-json-editor.esm.prod-a76b57fc.js";import"./MailingTable-6144e7e0.js";import"./TelegramChannelHelper-fd9e25b4.js";import"./v4-4a60fe23.js";import"./BotMediaList-f48a7e9b.js";import"./vue-datepicker-496dde0e.js";/* empty css             */import"./SlugForm-eb6b242d.js";import"./GlobalSlugList-fd77aef1.js";import"./AppointmentScheduleList-cb0ca503.js";/* empty css                                                               */import"./base64-ae67ffac.js";import"./vue3-charts.esm-d00d578b.js";const U=t("title",null,"Кабинет администратора",-1),z=t("meta",{name:"description",content:"Кабинет администратора<"},null,-1),J={class:"navbar navbar-expand-lg sticky-top bg-primary"},G={class:"container"},H=t("i",{class:"fas fa-money-bill"},null,-1),R={class:"fw-bold text-white"},K={class:"fw-bold text-white"},W={class:"d-flex"},X={key:0,class:"btn text-white p-2 px-3 border-light mr-2",style:{"font-size":"12px"},type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#bot-section-menu","aria-controls":"staticBackdrop"},Q=t("i",{class:"fa-solid fa-screwdriver-wrench text-white"},null,-1),Y=[Q],Z={class:"dropdown"},tt={style:{"font-size":"12px"},class:"btn btn-outline-light text-white dropdown-toggle p-2",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},et=t("i",{class:"fa-solid fa-user"},null,-1),st=t("ul",{class:"dropdown-menu"},[t("li",null,[t("a",{class:"dropdown-item","data-bs-toggle":"offcanvas",role:"button",href:"#profile-sidebar"},"Профиль")]),t("li",null,[t("a",{href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#open-payment-modal",class:"dropdown-item"},"Пополнить баланс")]),t("li",null,[t("a",{href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#activate-promo-code",class:"dropdown-item"},"Ввести промокод")]),t("li",null,[t("hr",{class:"dropdown-divider"})]),t("li",null,[t("a",{class:"dropdown-item"},"Вопросы и ответы")]),t("li",null,[t("a",{"data-bs-toggle":"modal","data-bs-target":"#feedbackModal",class:"dropdown-item",href:"javascript:void(0)"},"Тех. поддержка")]),t("li",null,[t("hr",{class:"dropdown-divider"})]),t("li",null,[t("a",{class:"dropdown-item",href:"/logout"},"Выход")])],-1),ot={class:"modal fade",id:"open-payment-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},at={class:"modal-dialog modal-xs"},it={class:"modal-content"},lt=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Оплата произвольной суммы"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),nt={class:"modal-body"},rt={class:"alert alert-light"},dt={class:"form-floating mb-3"},ct=t("label",{for:"floatingPassword"},"Сумма для внесения, руб",-1),mt={class:"btn btn-primary w-100 p-3 d-flex justify-content-center align-items-center",type:"submit"},ht=t("span",{class:"fw-bold mr-2"},"Оплатить через ",-1),pt={style:{width:"50px","object-fit":"cover"},alt:""},ut={class:"d-flex justify-content-center align-items-center p-2"},bt=t("span",null,"Принимаем к оплате",-1),ft={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},_t={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},gt={class:"d-flex justify-content-center align-items-center p-2",href:"https://tbank.ru",target:"_blank"},vt=t("span",null,"Партнер системы",-1),yt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},wt={class:"modal fade",id:"payment-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},kt={class:"modal-dialog modal-xl"},Ct={class:"modal-content"},St=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор тарифа"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$t={class:"modal-body"},Ft=t("div",{class:"alert alert-light mb-3"}," После осуществления оплаты обновите страницу для отображения зачисленных средств! ",-1),Mt={key:0,class:"row"},xt={class:"col-md-4"},Bt={class:"card payment-card h-100 d-flex justify-content-between flex-column"},jt={class:"price"},Tt={key:0,class:"list-group list-group-flush"},Et={class:"list-group-item"},Lt=["onClick"],qt=t("span",{class:"fw-bold mr-2"},"Оплатить через ",-1),At={style:{width:"50px","object-fit":"cover"},alt:""},It={key:1,class:"alert alert-light"},Pt={class:"d-flex justify-content-center align-items-center p-2"},Dt=t("span",null,"Принимаем к оплате",-1),Vt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},Nt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},Ot={class:"d-flex justify-content-center align-items-center p-2",href:"https://tbank.ru",target:"_blank"},Ut=t("span",null,"Партнер системы",-1),zt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},Jt={class:"container-fluid"},Gt={class:"row"},Ht={class:"col-md-12 ms-sm-auto col-lg-12 px-md-4 px-0"},Rt={class:"pt-md-3 pt-0 pb-md-2 pb-0 mb-3"},Kt={class:"theme-switcher d-none d-md-flex flex-column"},Wt=t("button",{id:"switch-theme","data-bs-toggle":"modal","data-bs-target":"#theme-switch-modal",class:"btn btn-primary"},[t("i",{class:"fa-solid fa-palette"})],-1),Xt=t("i",{class:"fa-solid fa-moon"},null,-1),Qt=[Xt],Yt={class:"modal",id:"theme-switch-modal",tabindex:"-1"},Zt={class:"modal-dialog"},te={class:"modal-content"},ee=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Выбор темы оформления"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),se={class:"modal-body"},oe={class:"list-group"},ae=["onClick"],ie=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),le={class:"modal fade",id:"activate-promo-code",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ne={class:"modal-dialog"},re={class:"modal-content"},de={key:0,class:"modal-body"},ce=t("h6",{class:"text-center"},"Активируйте ваш ключ и получите дополнительные слоты",-1),me={key:1,class:"modal-body"},he=t("div",{class:"alert alert-primary"},"Вы не являетесь менеджером!",-1),pe=[he],ue=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),be={class:"modal fade",id:"feedbackModal",tabindex:"-1","aria-labelledby":"feedbackModalLabel","aria-hidden":"true"},fe={class:"modal-dialog modal-dialog-centered"},_e={class:"modal-content"},ge=t("div",{class:"modal-header bg-primary p-4"},[t("h5",{class:"modal-title font-alt text-white",id:"feedbackModalLabel"},"Заказать обратную связь"),t("button",{class:"btn-close btn-close-white",type:"button","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ve={class:"modal-body border-0 p-4"},ye={class:"form-floating mb-3"},we=t("label",{for:"name"},"Ваше Ф.И.О.",-1),ke=t("div",{class:"invalid-feedback","data-sb-feedback":"name:required"},"Является обязательным ",-1),Ce={class:"form-floating mb-3"},Se=t("label",{for:"email"},"Ваша почта",-1),$e=t("div",{class:"invalid-feedback","data-sb-feedback":"email:required"},"An email is required. ",-1),Fe=t("div",{class:"invalid-feedback","data-sb-feedback":"email:email"},"Email is not valid. ",-1),Me={class:"form-floating mb-3"},xe=t("label",{for:"phone"},"Номер телефона",-1),Be=t("div",{class:"invalid-feedback","data-sb-feedback":"phone:required"},"A phone number is required. ",-1),je={class:"form-floating mb-3"},Te=t("label",{for:"phone"},"Когда вам удобно?",-1),Ee=t("div",{class:"invalid-feedback","data-sb-feedback":"phone:required"},"A phone number is required. ",-1),Le={class:"form-floating mb-3"},qe=t("label",{for:"message"},"Сообщение менеджеру",-1),Ae=t("div",{class:"invalid-feedback","data-sb-feedback":"message:required"},"A message is required. ",-1),Ie={key:0,class:"alert alert-success text-center my-3 rounded-3",id:"submitSuccessMessage"},Pe=t("span",{class:"fw-bolder"},"Спасибо! Вы успешно отправили заявку!",-1),De=t("br",null,null,-1),Ve={key:1,class:"alert alert-danger my-3 text-center rounded-2",id:"submitErrorMessage"},Ne=t("div",{class:"d-grid"},[t("button",{class:"btn btn-success text-white rounded-2 btn-lg",id:"submitButton",type:"submit"},"Отправить заявку ")],-1),Oe={class:"offcanvas offcanvas-start",tabindex:"-1",id:"profile-sidebar","aria-labelledby":"offcanvasExampleLabel"},Ue=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Ваш профиль"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Закрыть"})],-1),ze={class:"offcanvas-body"},Je={data(){let s=new Date,e=s.getHours()+":"+s.getMinutes();return{payment_modal:null,paymentForm:{amount:0},success:!1,error:!1,feedbackForm:{name:null,email:null,phone:null,time:e,message:"Добрый день! Возникли технические сложности, свяжитесь со мной!"},bot:null,load:!1,is_chat_open:!1,currentTheme:"",company:null,tariffs:[],themes:[{title:"Тема 1",href:"/theme1.bootstrap.min.css"},{title:"Тема 2",href:"/theme2.bootstrap.min.css"},{title:"Тема 3",href:"/theme3.bootstrap.min.css"},{title:"Тема 4",href:"/theme4.bootstrap.min.css"},{title:"Тема 5",href:"/theme5.bootstrap.min.css"},{title:"Тема 6",href:"/theme6.bootstrap.min.css"},{title:"Тема 7",href:"/theme7.bootstrap.min.css"},{title:"Тема 8",href:"/theme8.bootstrap.min.css"},{title:"Тема 9",href:"/theme9.bootstrap.min.css"},{title:"Тема 10",href:"/theme10.bootstrap.min.css"},{title:"Тема 11",href:"/theme11.bootstrap.min.css"},{title:"Тема 12",href:"/theme12.bootstrap.min.css"},{title:"Тема 13",href:"/theme13.bootstrap.min.css"},{title:"Тема 14",href:"/theme14.bootstrap.min.css"},{title:"Тема 15",href:"/theme15.bootstrap.min.css"},{title:"Тема 16",href:"/theme16.bootstrap.min.css"}]}},computed:{...$(["getErrors","getCurrentBot","getCurrentCompany"]),profile(){return window.profile||null},slotsCount(){var s,e;return((e=(s=this.profile)==null?void 0:s.manager)==null?void 0:e.max_bot_slot_count)||0}},watch:{getErrors:function(s,e){Object.keys(s).forEach(o=>{this.$notify({title:"Конструктор ботов",text:s[o],type:"warn"})})}},mounted(){this.payment_modal=new bootstrap.Modal(document.getElementById("payment-modal"),{}),this.loadCurrentCompany(),this.loadCurrentBot();let s=localStorage.getItem("cashman_global_admin_theme")||null,e=localStorage.getItem("cashman_global_admin_light")||null;s&&this.$nextTick(()=>{this.currentTheme=s}),e&&this.changeLight(e),window.addEventListener("store_current_bot-change-event",o=>{this.bot=this.getCurrentBot}),window.addEventListener("store_current_company-change-event",o=>{this.company=this.getCurrentCompany})},methods:{openTariffsModal(){this.loadActualTariffs(),this.payment_modal.show()},submitPayment(s=0){s>0&&(this.paymentForm.amount=s);let e=new FormData;Object.keys(this.paymentForm).forEach(o=>{const r=this.paymentForm[o]||"";typeof r=="object"?e.append(o,JSON.stringify(r)):e.append(o,r)}),this.$store.dispatch("sendInvoice",{paymentForm:e}).then(o=>{this.$notify({title:"Оплата услуг сервиса",text:"Платежная ссылка успешно сформирована!",type:"success"});const r=o.url;window.open(r,"_blank").focus()}).catch(()=>{this.$notify({title:"Оплата услуг сервиса",text:"Ошибка формирования платежной ссылки",type:"error"})})},submitMail(){this.success=!1,this.error=!1;let s=new FormData;Object.keys(this.feedbackForm).forEach(e=>{const o=this.feedbackForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("sendFeedback",{mailForm:s}).then(e=>{this.load=!0,this.success=!0;let o=new Date,r=o.getHours()+":"+o.getMinutes();this.feedbackForm={name:null,email:null,phone:null,time:r,message:"Добрый день! Заинтересовала данная система, хочу запросить перезвон менеджера для обсуждения деталей!"},this.$notify({title:"CashMan",text:"Сообщение отправлено!",type:"success"})}).catch(e=>{this.error=!0,this.$notify({title:"CashMan",text:"Упс... ошибочка!",type:"error"})})},botSectionCallback(){window.dispatchEvent(new CustomEvent("change-current_bot-from-navbar-event"))},changeLight(s=null){let e=document.querySelector("html");if(s!=null&&(s==="light"||s==="dark")){e.setAttribute("data-bs-theme",s),localStorage.setItem("cashman_global_admin_light",s);return}if(e.hasAttribute("data-bs-theme")){let o=e.getAttribute("data-bs-theme");e.setAttribute("data-bs-theme",o==="dark"?"light":"dark")}else e.setAttribute("data-bs-theme","dark");localStorage.setItem("cashman_global_admin_light",e.getAttribute("data-bs-theme")||"light")},hasRole(s){return window.hasRole(s)||!1},switchTheme(s){let e=document.querySelector("#theme");e.href=this.themes[s].href,localStorage.setItem("cashman_global_admin_theme",e.href),this.$nextTick(()=>{this.currentTheme=e.href})},loadActualTariffs(){this.tariffs.length>0||this.$store.dispatch("getActualTariffs").then(s=>{this.tariffs=s||[]})},loadCurrentCompany(s=null){this.$store.dispatch("updateCurrentCompany",{company:s}).then(()=>{this.company=this.getCurrentCompany})},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},resetCompany(){this.$store.dispatch("resetCurrentCompany").then(()=>{this.company=null,window.dispatchEvent(new CustomEvent("store_current_company-change-event"))})},resetBot(){this.$store.dispatch("resetCurrentBot").then(()=>{this.bot=null,window.dispatchEvent(new CustomEvent("store_current_bot-change-event"))})},stopAllDialogs(){this.$store.dispatch("stopDialogs").then(s=>{this.$notify({title:"Конструктор ботов",text:"Все диалоги остановлены",type:"success"})}).catch(s=>{})}}},Ge=Object.assign(Je,{__name:"ManagerLayout",setup(s){return(e,o)=>{var v,y,w,k;const r=E("notifications"),d=S("lazy"),M=S("mask");return i(),l(u,null,[f(x(B),null,{default:F(()=>[U,z]),_:1}),f(r,{position:"top right"}),t("nav",J,[t("div",G,[e.load?c("",!0):(i(),_(q,{key:0,id:"global-bot-search","custom-class":"dropdown-toggle my-2 text-white",onSelectBot:e.botSectionCallback,bot:e.bot},null,8,["onSelectBot","bot"])),t("button",{class:"btn text-white p-2 btn-outline-light",style:{"font-size":"12px"},onClick:o[0]||(o[0]=(...a)=>e.openTariffsModal&&e.openTariffsModal(...a)),"aria-controls":"staticBackdrop"},[H,m(" У вас "),t("span",R,h(((v=e.profile.manager)==null?void 0:v.balance)||0),1),m(" руб, "),t("span",K,h(e.slotsCount),1),m(" свободных слотов ")]),t("div",W,[e.bot?(i(),l("button",X,Y)):c("",!0),t("div",Z,[t("button",tt,[et,m(" "+h(((y=e.profile)==null?void 0:y.name)||((w=e.profile)==null?void 0:w.username)||((k=e.profile)==null?void 0:k.telegram_chat_id)||"-"),1)]),st])])])]),t("div",ot,[t("div",at,[t("div",it,[lt,t("div",nt,[t("div",rt,[m(" Через данное окно вы можете внести абсолютно любую сумму. Рекомендуем вносить оплату согласно "),t("a",{href:"#tariff",onClick:o[1]||(o[1]=(...a)=>e.openTariffsModal&&e.openTariffsModal(...a))},"тарифным планам"),m(", так вы получаете помимо средств еще и дополнительные возможности в виде слотов или скидки (и другие преимущества тарифного плана). ")]),t("form",{onSubmit:o[3]||(o[3]=C((...a)=>e.submitPayment&&e.submitPayment(...a),["prevent"]))},[t("div",dt,[n(t("input",{type:"number",min:"0","onUpdate:modelValue":o[2]||(o[2]=a=>e.paymentForm.amount=a),class:"form-control",id:"floatingPassword",placeholder:"Password"},null,512),[[p,e.paymentForm.amount]]),ct]),t("button",mt,[ht,n(t("img",pt,null,512),[[d,"/images/Т-Банк.png"]])])],32),t("div",ut,[bt,n(t("img",ft,null,512),[[d,"/images/sbp.png"]]),n(t("img",_t,null,512),[[d,"/images/mir-logo.png"]])]),t("a",gt,[vt,n(t("img",yt,null,512),[[d,"/images/Т-Банк.png"]])])])])])]),t("div",wt,[t("div",kt,[t("div",Ct,[St,t("div",$t,[Ft,e.tariffs.length>0?(i(),l("div",Mt,[(i(!0),l(u,null,g(e.tariffs,a=>(i(),l("div",xt,[t("div",Bt,[t("h3",null,h(a.name||"не указано"),1),t("div",jt,h(a.price||"0")+"₽",1),(a.services||[]).length>0?(i(),l("ul",Tt,[(i(!0),l(u,null,g(a.services,b=>(i(),l("li",Et,h(b),1))),256))])):c("",!0),t("button",{type:"button",onClick:b=>e.submitPayment(a.price),class:"btn btn-primary p-3 d-flex justify-content-center align-items-center"},[qt,n(t("img",At,null,512),[[d,"/images/Т-Банк.png"]])],8,Lt)])]))),256))])):(i(),l("p",It," Подождите, мы загружаем тарифы! ")),t("div",Pt,[Dt,n(t("img",Vt,null,512),[[d,"/images/sbp.png"]]),n(t("img",Nt,null,512),[[d,"/images/mir-logo.png"]])]),t("a",Ot,[Ut,n(t("img",zt,null,512),[[d,"/images/Т-Банк.png"]])])])])])]),t("div",Jt,[t("div",Gt,[t("main",Ht,[t("div",Rt,[j(e.$slots,"default")])])])]),t("div",Kt,[Wt,t("button",{onClick:o[4]||(o[4]=(...a)=>e.changeLight&&e.changeLight(...a)),class:"btn btn-primary mt-2"},Qt)]),t("div",Yt,[t("div",Zt,[t("div",te,[ee,t("div",se,[t("div",oe,[(i(!0),l(u,null,g(e.themes,(a,b)=>(i(),l("button",{type:"button",onClick:Ke=>e.switchTheme(b),class:T([{active:e.currentTheme.indexOf(a.href)!=-1},"list-group-item list-group-item-action"]),"aria-current":"true"},h(a.title||"-"),11,ae))),256))])]),ie])])]),t("div",le,[t("div",ne,[t("div",re,[e.profile?(i(),l(u,{key:0},[e.profile.manager?(i(),l("div",de,[ce,f(I,{bot:e.bot},null,8,["bot"])])):(i(),l("div",me,pe)),ue],64)):c("",!0)])])]),t("div",be,[t("div",fe,[t("div",_e,[ge,t("div",ve,[t("form",{id:"contactForm",onSubmit:o[10]||(o[10]=C((...a)=>e.submitMail&&e.submitMail(...a),["prevent"]))},[t("div",ye,[n(t("input",{class:"form-control","onUpdate:modelValue":o[5]||(o[5]=a=>e.feedbackForm.name=a),id:"name",type:"text",placeholder:"Введите ваше имя...","data-sb-validations":"required",required:""},null,512),[[p,e.feedbackForm.name]]),we,ke]),t("div",Ce,[n(t("input",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=a=>e.feedbackForm.email=a),id:"email",type:"email",placeholder:"name@example.com"},null,512),[[p,e.feedbackForm.email]]),Se,$e,Fe]),t("div",Me,[n(t("input",{class:"form-control","onUpdate:modelValue":o[7]||(o[7]=a=>e.feedbackForm.phone=a),id:"phone",type:"text",placeholder:"+7(123)456-78-90","data-sb-validations":"required",required:""},null,512),[[M,"+7(###)###-##-##"],[p,e.feedbackForm.phone]]),xe,Be]),t("div",je,[n(t("input",{class:"form-control",id:"time","onUpdate:modelValue":o[8]||(o[8]=a=>e.feedbackForm.time=a),type:"time",placeholder:"12:00"},null,512),[[p,e.feedbackForm.time]]),Te,Ee]),t("div",Le,[n(t("textarea",{"onUpdate:modelValue":o[9]||(o[9]=a=>e.feedbackForm.message=a),class:"form-control",id:"message",type:"text",placeholder:"Текст вашего сообщения",style:{height:"10rem"},"data-sb-validations":"required",required:""},null,512),[[p,e.feedbackForm.message]]),qe,Ae]),e.success?(i(),l("div",Ie,[Pe,De,m(" Наш менеджер свяжется с вами! ")])):c("",!0),e.error?(i(),l("div",Ve," Ошибка отправки заявки ")):c("",!0),Ne],32)])])])]),t("div",Oe,[Ue,t("div",ze,[t("div",null,[f(L)])])])],64)}}}),He={class:"container"},Re={components:{Carousel:D,Slide:V,Pagination:N,Navigation:O},data(){return{templates:[],load:!1,step:0,bot:null}},computed:{...$(["getCurrentBot","getCurrentCompany"]),profile(){return window.profile},isManagerVerified(){return!(!this.profile||!this.profile.manager)}},mounted(){this.loadCurrentBot(),this.setStep(localStorage.getItem("cashman_set_botpage_step_index")||0),window.addEventListener("change-current_bot-from-navbar-event",s=>{this.bot=this.getCurrentBot,localStorage.setItem("cashman_set_botform_step_index",4),localStorage.setItem("cashman_set_botpage_step_index",2),this.botSectionCallback()}),window.addEventListener("reset-current_bot-from-navbar-event",s=>{this.bot=null,this.botSectionCallback()})},methods:{openForEdit(){},duplicateAndEdit(s,e){this.templates[s].in_use=!0,this.$store.dispatch("duplicateBot",{dataObject:{bot_id:e,company_id:this.getCurrentCompany?this.getCurrentCompany.id:null}}).then(o=>{this.bot=o.data,this.load=!0,this.templates[s].in_use=!1,this.loadCurrentBot(this.bot),localStorage.setItem("cashman_set_botform_step_index",0),this.inBotFav(this.bot.id)||this.$store.dispatch("addBotToFavorites",this.bot.id),this.setStep(2),this.$nextTick(()=>{this.load=!1}),this.$notify("Указанный бот успешно продублирован")})},loadTemplates(){this.$store.dispatch("loadTemplates").then(s=>{this.templates=s.data})},setStep(s){this.step=parseInt(s),localStorage.setItem("cashman_set_botpage_step_index",s)},loadCurrentBot(s=null){this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},botSectionCallback(){this.load=!0,this.$nextTick(()=>{this.load=!1})},botListCallback(s){this.load=!0,this.setStep(2),this.loadCurrentBot(s),this.$nextTick(()=>{this.load=!1})}}},vs=Object.assign(Re,{__name:"DevPage",props:{botUser:{type:String}},setup(s){const e=s;return window.profile=e.botUser,(o,r)=>(i(),_(Ge,null,{default:F(()=>[t("div",He,[o.bot&&!o.load?(i(),_(P,{key:0,onCallback:o.botSectionCallback,bot:o.bot},null,8,["onCallback","bot"])):c("",!0),!o.load&&o.bot===null?(i(),_(A,{key:1,bot:o.bot,onCallback:o.loadCurrentBot},null,8,["bot","onCallback"])):c("",!0)])]),_:1}))}});export{vs as default};
