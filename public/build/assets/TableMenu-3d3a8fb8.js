import{_ as d}from"./ShopProductCatalog-9a01e2ee.js";import{g as p,o as a,j as r,k as c,l as s,K as l,L as u,n as i,F as h}from"./index.es-db843bab.js";import"./carousel.es-8c11147c.js";import"./ProductCard-0b6da098.js";import"./ProductCardSimple-a61f6e6c.js";import"./Rating-9f9eedad.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ReviewCard-a85301e6.js";import"./v4-4a60fe23.js";import"./Pagination-ccc8cfc8.js";/* empty css                                                   */import"./ProductCollectionView-4e0e7646.js";import"./CollectionCardSimple-9feea761.js";import"./PreloaderV1-97f38083.js";/* empty css                                                    */import"./StoryList-dd9fe137.js";/* empty css                                                                  */import"./BookingDropdown-766c0db1.js";const m={class:"navbar navbar-expand-sm fixed-bottom p-3 bg-transparent border-0",style:{"border-radius":"10px 10px 0px 0px"}},g={key:0,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-primary w-100 p-2 px-3 rounded-3 shadow-lg d-flex justify-content-between align-items-center"},b={class:"btn-group dropup"},f=s("button",{class:"btn btn-dark dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[s("i",{class:"fa-solid fa-cart-shopping mr-2"})],-1),_={class:"dropdown-menu"},y={class:"d-block",style:{position:"relative"}},w={key:0,class:"bg-white text-primary sup-badge"},x=s("sup",{class:"font-10 opacity-50"},".00",-1),k={key:1,style:{"box-shadow":"1px 1px 6px 0px #0000004a"},class:"btn btn-secondary w-100 p-3 rounded-3 shadow-lg d-flex justify-content-between"},C={data(){return{settings:null}},computed:{...p(["inCart","cartProducts","cartTotalCount","cartTotalPrice","getSelf"]),bot(){return window.currentBot},canBy(){return window.isCorrectSchedule(this.bot.company.schedule)?(this.bot.company||{is_work:!0}).is_work||(this.settings?this.settings.can_buy_after_closing:!0):!0}},mounted(){var e;(e=this.bot.settings)!=null&&e.self_updated?this.settings=this.bot.settings:this.loadShopModuleData(),this.loadBasketData()},methods:{clearCart(){this.$store.dispatch("clearCart").then(()=>{this.$notify({title:"Корзина",text:"Корзина успешно очищена!",type:"success"})})},goToCart(){this.$router.push({name:"TableCartV2"})},loadBasketData(){return this.$store.dispatch("loadProductsInBasket")},loadShopModuleData(){return this.$store.dispatch("loadShopModuleData").then(e=>{this.$nextTick(()=>{this.settings||(this.settings={}),e&&Object.keys(e).forEach(t=>{t&&(this.settings[t]=e[t])}),this.settings_loaded=!0})})}}},q=Object.assign(C,{__name:"TableMenu",setup(e){return(t,o)=>(a(),r(h,null,[c(d,{settings:t.settings},null,8,["settings"]),s("nav",m,[t.canBy?(a(),r("button",g,[s("div",b,[f,s("ul",_,[s("li",null,[s("a",{class:"dropdown-item",onClick:o[0]||(o[0]=(...n)=>t.clearCart&&t.clearCart(...n)),href:"javascript:void(0)"},"Очистить корзину")])])]),s("div",{class:"d-flex justify-content-between align-items-center w-100 px-2",onClick:o[1]||(o[1]=(...n)=>t.goToCart&&t.goToCart(...n))},[s("span",y,[t.cartTotalCount>0?(a(),r("sup",w,l(t.cartTotalCount),1)):u("",!0),i("Ваш заказ ")]),s("strong",null,[i(l(t.cartTotalPrice||0),1),x,i("₽")])])])):(a(),r("p",k," В данный момент покупки недоступны "))])],64))}});export{q as default};
