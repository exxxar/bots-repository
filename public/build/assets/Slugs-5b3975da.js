import{g as k,o,j as i,F as f,J as p,l as e,K as u,L as d,a0 as y,M as m,W as h,G as b,N as w,n as g,$ as C,a2 as $,k as _,u as F,a7 as j}from"./index.es-db843bab.js";import{P as v}from"./Pagination-ccc8cfc8.js";import{_ as V}from"./BotMediaList-e761023c.js";import{V as S}from"./vue3-json-editor.esm.prod-a76b57fc.js";/* empty css                                                   */import"./_plugin-vue_export-helper-c27b6911.js";const O={key:0,class:"list-group list-custom-large d-flex flex-wrap"},U={class:"w-100"},L=["onClick"],A=e("i",{class:"font-14 fa-solid fa-scroll rounded-xl shadow-xl bg-blue2-dark"},null,-1),T={style:{"line-height":"100%","padding-top":"10px","padding-right":"51px"}},N={class:"badge bg-red2-dark font-8"},I=e("i",{class:"fa-solid fa-scroll"},null,-1),M={class:"mb-3"},P=e("div",{class:"border-green1-dark pl-3 border-left border-top-0 border-bottom-0 border-right-0 my-3"},[e("p",null," Вы можете добавить данный скрипт изменив сразу название команды на нужное непосредственно ВАМ! Меняется только название. ")],-1),G=["disabled"],B={key:2,class:"mb-2"},E=e("div",{class:"alert alert-warning",role:"alert"}," К сожалению еще нет глобальных скриптов ",-1),J=[E],q={props:["canAdd","bot"],data(){return{search:null,slugs:[],slugs_paginate_object:null,slugForm:{command:null,comment:null,slug:null,config:[],is_global:!0,bot_id:null}}},computed:{...k(["getGlobalSlugs","getGlobalSlugsPaginateObject"]),filteredAllSlugs(){return this.slugs.length===0?[]:this.search==null?this.slugs:this.slugs.filter(s=>{let t=s.slug||"",n=s.command||"",a=s.comment||"";return n.toLowerCase().indexOf(this.search.toLowerCase())!==-1||a.toLowerCase().indexOf(this.search.toLowerCase())!==-1||t.toLowerCase().indexOf(this.search.toLowerCase())!==-1})}},mounted(){this.loadAllSlugs()},methods:{loadAllSlugs(s=0){this.$store.dispatch("loadGlobalSlugs",{dataObject:{search:this.search||null,needGlobal:!0},page:s}).then(t=>{this.slugs=this.getGlobalSlugs,this.slugs_paginate_object=this.getGlobalSlugsPaginateObject})},removeSlug(s){this.$store.dispatch("removeSlug",{dataObject:{slugId:s.id}}).then(t=>{this.$botNotification.notification("Команды","Команда успешно удалена"),this.loadAllSlugs()}).catch(t=>{this.loadAllSlugs()})},nextSlugs(s){this.loadAllSlugs(s)},selectSlug(s){this.slugForm.id=s.id||null,this.slugForm.slug=s.slug,this.slugForm.comment=s.comment,this.slugForm.command=this.command||s.command,this.slugForm.config=s.config||[],this.slugForm.is_global=s.is_global||!1,this.$emit("select",s)},addSlug(){let s=new FormData;Object.keys(this.slugForm).forEach(t=>{const n=this.slugForm[t]||"";typeof n=="object"?s.append(t,JSON.stringify(n)):s.append(t,n)}),this.bot&&s.append("bot_id",this.bot.id),this.$store.dispatch("createSlug",{slugForm:s}).then(t=>{this.$botNotification.notification("Конструктор команд","Команда успешно обновлена"),this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0,this.$emit("callback")}).catch(t=>{})}}},D=Object.assign(q,{__name:"GlobalSlugList",setup(s){return(t,n)=>(o(),i(f,null,[t.filteredAllSlugs.length>0?(o(),i("div",O,[(o(!0),i(f,null,p(t.filteredAllSlugs,(a,c)=>(o(),i("div",U,[a?(o(),i("a",{key:0,href:"javascript:void(0)",onClick:l=>t.selectSlug(a),class:"d-block w-100",style:{"min-height":"70px"}},[A,e("span",T,u(a.command||"Не указана"),1),e("strong",null,u(a.slug),1),e("span",N,"#"+u(a.id),1),I],8,L)):d("",!0),t.slugForm.id==a.id&&t.filteredAllSlugs.length>0?(o(),i("form",{key:1,onSubmit:n[1]||(n[1]=y((...l)=>t.addSlug&&t.addSlug(...l),["prevent"])),class:"mb-0 d-flex flex-wrap"},[e("div",M,[P,m(e("input",{type:"text",class:"form-control w-100",placeholder:"Команда","aria-label":"Команда","onUpdate:modelValue":n[0]||(n[0]=l=>t.slugForm.command=l),maxlength:"255","aria-describedby":"bot-domain",required:""},null,512),[[h,t.slugForm.command]])]),e("button",{disabled:t.slugForm.slug==null,class:"btn btn-m btn-full mb-0 rounded-xs text-uppercase font-900 shadow-s bg-green1-dark w-100 p-3"},"Добавить скрипт в бота ",8,G)],32)):d("",!0)]))),256))])):d("",!0),t.slugs_paginate_object?(o(),b(v,{key:1,onPagination_page:t.nextSlugs,pagination:t.slugs_paginate_object},null,8,["onPagination_page","pagination"])):(o(),i("div",B,J))],64))}}),z={class:"form-floating mb-2"},K=e("label",{for:"floatingInput"},"Команда",-1),W={class:"form-floating mb-2"},H=e("label",{for:"floatingInput"},"Описание скрипта",-1),Q=e("h6",null," Параметры скрипта ",-1),R={class:"mb-2"},X=["onClick"],Y=e("hr",null,null,-1),Z={key:0},x={class:"mb-1"},tt=["onClick"],et=e("i",{class:"fa-solid fa-trash-can"},null,-1),st=[et],lt=["onClick"],ot=e("i",{class:"fa-solid fa-caret-left"},null,-1),it=[ot],nt=["onClick"],at=e("i",{class:"fa-solid fa-caret-right"},null,-1),dt=[at],rt={key:0,class:"form-floating mb-1"},ut=["for"],ct=["id","onUpdate:modelValue"],gt={key:1,class:"form-check mb-1 mt-2"},mt=["onUpdate:modelValue","id"],ht=["for"],ft={key:2,class:"form-floating mb-1 mt-2"},pt=["for"],bt=["onUpdate:modelValue","id"],_t={key:3,class:"form-floating mb-1 mt-2"},kt=["for"],yt=["onUpdate:modelValue","id"],$t={key:4,class:"form-floating mb-1 mt-2"},vt=e("label",{class:"form-label",id:"bot-domain"},"JSON-код",-1),St={key:5,class:"form-check mb-1 mt-2"},wt=["for"],Ct=["onUpdate:modelValue","id"],Ft={key:6,class:"form-floating mb-3"},jt=["for"],Vt=["id","onUpdate:modelValue"],Ot={key:7,class:"form-floating mb-3"},Ut=["for"],Lt=["id","onUpdate:modelValue"],At=e("div",{class:"divider divider-small my-3 bg-highlight"},null,-1),Tt={key:1,class:"mb-2"},Nt=e("p",{class:"mb-0"},"Параметры скрипта еще не добавлены",-1),It=[Nt],Mt={class:"btn btn-m btn-full mb-2 rounded-xs text-uppercase font-900 shadow-s bg-mint-dark w-100"},Pt={key:0},Gt={key:1},Bt={components:{Vue3JsonEditor:S},props:["item"],data(){return{filters:[],simple:!0,configTypes:[{title:"Текстовый или числовой параметр",type:"text"},{title:"Большое текстовое поле",type:"large-text"},{title:"Канал обратной связи",type:"channel"},{title:"Логический оператор",type:"boolean"},{title:"Ссылка на изображение",type:"image"},{title:"Цвет",type:"color"},{title:"Geo",type:"geo"},{title:"Номер телефона",type:"phone"},{title:"JSON",type:"json"}],bot:null,photos:[],slugForm:{bot_id:null,id:null,command:null,comment:null,slug:null,config:[],is_global:!0}}},computed:{...k(["getCurrentBot"]),filteredConfigs(){return this.filters.length==0?this.slugForm.config:this.slugForm.config.filter(s=>this.filters.indexOf(s.type)>=0)}},mounted(){this.item&&(this.slugForm.id=this.item.id||null,this.slugForm.command=this.item.command,this.slugForm.comment=this.item.comment,this.slugForm.bot_id=this.item.bot_id,this.slugForm.slug=this.item.slug,this.slugForm.config=this.item.config||[],this.slugForm.is_global=this.item.is_global||!1)},methods:{move(s,t=0){let n=this.slugForm.config[s],a=this.slugForm.config.length||0,c=t===0?s-1>=0?s-1:a-1:s<a-1?s+1:0;this.slugForm.config[s]=this.slugForm.config[c],this.slugForm.config[c]=n},toggleFilter(s){let t=this.filters.indexOf(s);t>=0?this.filters.splice(t,1):this.filters.push(s)},addTextTo(s,t={text:null}){this.slugForm.config[s].value=t.text},submit(){let s=new FormData;Object.keys(this.slugForm).forEach(t=>{const n=this.slugForm[t]||"";typeof n=="object"?s.append(t,JSON.stringify(n)):s.append(t,n)}),this.$store.dispatch(this.slugForm.id===null?"createSlug":"updateSlug",{slugForm:s}).then(t=>{this.$botNotification.notification("Команды","Команда успешно обновлена"),this.slugForm.id===null&&(this.slugForm.id=null,this.slugForm.command=null,this.slugForm.comment=null,this.slugForm.bot_id=null,this.slugForm.slug=null,this.slugForm.config=[],this.slugForm.is_global=!0),this.$emit("callback")}).catch(t=>{})},addConfig(s){this.slugForm.config.splice(0,0,{key:null,value:null,type:s||"text"})},removeConfigItem(s){try{this.slugForm.config.splice(s,1)}catch{this.slugForm.config=[]}},selectPhoto(s,t){this.filteredConfigs[t].value=s.file_id}}},Et=Object.assign(Bt,{__name:"SlugForm",setup(s){return(t,n)=>{const a=w("mask");return o(),i("form",{id:"slugForm",onSubmit:n[2]||(n[2]=y((...c)=>t.submit&&t.submit(...c),["prevent"]))},[e("div",z,[K,m(e("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=c=>t.slugForm.command=c),class:"form-control",id:"floatingInput",placeholder:"name@example.com",required:""},null,512),[[h,t.slugForm.command]])]),e("div",W,[H,m(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=c=>t.slugForm.comment=c),style:{"min-height":"200px"},class:"form-control font-12",id:"floatingInput",placeholder:"name@example.com",required:""},`
            `,512),[[h,t.slugForm.comment]])]),Q,e("p",R,[g("Фильтры: "),(o(!0),i(f,null,p(t.configTypes,(c,l)=>(o(),i("span",{class:C(["badge mb-1 bg-gray-100 cursor-pointer mr-1",{"bg-info text-white":t.filters.indexOf(c.type)>=0}]),onClick:r=>t.toggleFilter(c.type)},u(c.type),11,X))),256))]),Y,t.filteredConfigs.length>0?(o(),i("div",Z,[(o(!0),i(f,null,p(t.filteredConfigs,(c,l)=>(o(),i("div",x,[e("button",{onClick:r=>t.removeConfigItem(l),class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},st,8,tt),e("button",{onClick:r=>t.move(l,0),style:{"margin-left":"5px"},class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},it,8,lt),e("button",{onClick:r=>t.move(l,1),style:{"margin-left":"5px"},class:"btn btn-outline-info",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},dt,8,nt),t.filteredConfigs[l].type==="text"||t.filteredConfigs[l].type==="channel"?(o(),i("div",rt,[e("label",{for:"field-input-"+l},[g("Значение для "),e("strong",null,u(t.filteredConfigs[l].key),1)],8,ut),m(e("input",{type:"text",class:"form-control",id:"field-input-"+l,"onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,placeholder:"name@example.com"},null,8,ct),[[h,t.filteredConfigs[l].value]])])):d("",!0),t.filteredConfigs[l].type==="boolean"?(o(),i("div",gt,[m(e("input",{class:"form-check-input","onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,type:"checkbox",value:"false",id:"filtered-config-"+l+"-checkbox"},null,8,mt),[[$,t.filteredConfigs[l].value]]),e("label",{class:"form-check-label",for:"filtered-config-"+l+"-checkbox"},[g(u(t.filteredConfigs[l].value?"Истина":"Ложь")+" для ",1),e("strong",null,u(t.filteredConfigs[l].key),1)],8,ht)])):d("",!0),t.filteredConfigs[l].type==="geo"?(o(),i("div",ft,[e("label",{for:"filtered-config-"+l+"-geo"},[g("Значение для "),e("strong",null,u(t.filteredConfigs[l].key),1)],8,pt),m(e("input",{class:"form-control",placeholder:"##.######,##.######","onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,type:"text",id:"filtered-config-"+l+"-geo"},null,8,bt),[[a,"##.######,##.######"],[h,t.filteredConfigs[l].value]])])):d("",!0),t.filteredConfigs[l].type==="phone"?(o(),i("div",_t,[e("label",{for:"filtered-config-"+l+"-phone"},[g("Значение для "),e("strong",null,u(t.filteredConfigs[l].key),1)],8,kt),m(e("input",{class:"form-control",placeholder:"+7(###)###-##-##","onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,type:"text",id:"filtered-config-"+l+"-phone"},null,8,yt),[[a,"+7(###)###-##-##"],[h,t.filteredConfigs[l].value]])])):d("",!0),t.filteredConfigs[l].type==="json"?(o(),i("div",$t,[vt,_(F(S),{mode:"code",modelValue:t.filteredConfigs[l].value,"onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,"show-btns":!1,expandedOnStart:!0},null,8,["modelValue","onUpdate:modelValue"])])):d("",!0),t.filteredConfigs[l].type==="color"?(o(),i("div",St,[e("label",{for:"filtered-config-"+l+"-color"},[e("p",{style:j({color:t.filteredConfigs[l].value})},[g("Цвет: "+u(t.filteredConfigs[l].value)+" для ",1),e("strong",null,u(t.filteredConfigs[l].key),1)],4)],8,wt),m(e("input",{class:"form-control","onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,type:"color",id:"filtered-config-"+l+"-color"},null,8,Ct),[[h,t.filteredConfigs[l].value]])])):d("",!0),t.filteredConfigs[l].type==="large-text"?(o(),i("div",Ft,[e("label",{for:"field-input-"+l},[g("Значение для "),e("strong",null,u(t.filteredConfigs[l].key),1)],8,jt),m(e("textarea",{class:"form-control font-12",id:"field-input-"+l,"onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,style:{"min-height":"200px"},placeholder:"name@example.com"},`
                            `,8,Vt),[[h,t.filteredConfigs[l].value]])])):d("",!0),t.filteredConfigs[l].type==="image"?(o(),i("div",Ot,[e("label",{for:"field-input-"+l},"FileId ссылка на изображение",8,Ut),m(e("input",{class:"form-control mb-2",id:"field-input-"+l,type:"text",disabled:"true","onUpdate:modelValue":r=>t.filteredConfigs[l].value=r,placeholder:"name@example.com"},null,8,Lt),[[h,t.filteredConfigs[l].value]]),_(V,{"need-video":!1,"need-photo":!0,selected:[t.filteredConfigs[l].value],onSelect:r=>t.selectPhoto(r,l)},null,8,["selected","onSelect"])])):d("",!0),At]))),256))])):(o(),i("div",Tt,It)),e("button",Mt,[t.slugForm.id==null?(o(),i("span",Pt," Сохранить команду ")):(o(),i("span",Gt," Обновить команду "))])],32)}}});const Jt={class:"btn w-100 text-left border-blue2-light p-2",type:"button"},qt={key:0,class:"fa-solid fa-chevron-up"},Dt={key:1,class:"fa-solid fa-chevron-down"},zt={key:0,class:"py-2"},Kt={class:"d-flex justify-content-between align-items-center"},Wt={key:0,class:"fa-regular fa-pen-to-square"},Ht={key:1,class:"fa-solid fa-xmark"},Qt={key:0,class:"fa-solid fa-arrow-up-short-wide"},Rt={key:1,class:"fa-solid fa-arrow-down-short-wide"},Xt=e("i",{class:"fa-solid fa-clone"},null,-1),Yt=[Xt],Zt=e("i",{class:"fa-regular fa-trash-can color-white"},null,-1),xt=[Zt],te={key:1,class:"list-group list-group-numbered mt-2"},ee={class:"list-group-item d-flex justify-content-between align-items-start"},se={class:"ms-2 me-auto"},le=e("div",{class:"fw-bold"},"Идентификатор",-1),oe={class:"list-group-item d-flex justify-content-between align-items-start"},ie={class:"ms-2 me-auto"},ne=e("div",{class:"fw-bold"},"Команда",-1),ae={class:"list-group-item d-flex justify-content-between align-items-start"},de={class:"ms-2 me-auto"},re=e("div",{class:"fw-bold"},"Мнемоническое имя",-1),ue={class:"list-group-item d-flex justify-content-between align-items-start"},ce={class:"ms-2 me-auto"},ge=e("div",{class:"fw-bold"},"Пояснение",-1),me={key:0,class:"list-group-item d-flex justify-content-between align-items-start"},he={class:"ms-2 me-auto"},fe=e("div",{class:"fw-bold"},"Набор параметров скрипта",-1),pe={key:1,class:"list-group-item d-flex justify-content-between align-items-start"},be=e("div",{class:"ms-2 me-auto"},[e("div",{class:"fw-bold"},"Привязана страница")],-1),_e=[be],ke={key:2,class:"list-group-item d-flex justify-content-between align-items-start"},ye=e("div",{class:"ms-2 me-auto"},[e("div",{class:"fw-bold"},"Глобальный скрипт")],-1),$e=[ye],ve={props:["item","bot","selectMode"],data(){return{showMenu:!1,edit:!1,load:!1,simple:!0}},mounted(){},methods:{toggleMenu(){this.showMenu=!this.showMenu,this.simple=!0,this.edit=!1},switchEditor(){this.simple=!0,this.edit=!this.edit},switchSimple(){this.simple=!this.simple,this.edit=!1},selectCard(){this.$emit("select",this.item)},slugFormCallback(){this.load=!0,this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},editSlug(){this.load=!0,this.$nextTick(()=>{this.load=!1})},selectSlug(){this.load=!0,this.$emit("select",this.item),this.$nextTick(()=>{this.load=!1})},duplicateSlug(){this.load=!0,this.$store.dispatch("duplicateSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$botNotification.success("Конструктор команд","Команда успешно продублирована"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})},removeSlug(){this.load=!0,this.$store.dispatch("removeSlug",{dataObject:{slugId:this.item.id}}).then(s=>{this.$botNotification.success("Конструктор команд","Команда успешно удалена"),this.$emit("callback"),this.$nextTick(()=>{this.load=!1})}).catch(s=>{this.$emit("callback"),this.$nextTick(()=>{this.load=!1})})}}},Se=Object.assign(ve,{__name:"Slug",setup(s){return(t,n)=>(o(),i("div",Jt,[e("p",{onClick:n[0]||(n[0]=(...a)=>t.toggleMenu&&t.toggleMenu(...a)),class:"w-100 mb-0"},[t.showMenu?(o(),i("i",qt)):(o(),i("i",Dt)),g(" "+u(s.item.command||"Нет команды"),1)]),t.showMenu?(o(),i("div",zt,[e("div",Kt,[e("a",{onClick:n[1]||(n[1]=(...a)=>t.switchEditor&&t.switchEditor(...a)),href:"javascript:void(0)",title:"Редактировать команду",style:{width:"auto"},class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-mint-dark"},[t.edit?(o(),i("i",Ht)):(o(),i("i",Wt))]),e("a",{href:"javascript:void(0)",onClick:n[2]||(n[2]=(...a)=>t.switchSimple&&t.switchSimple(...a)),class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-mint-dark"},[t.simple?(o(),i("i",Qt)):(o(),i("i",Rt))]),e("a",{href:"javascript:void(0)",title:"Дублировать команду",class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-mint-dark",onClick:n[3]||(n[3]=(...a)=>t.duplicateSlug&&t.duplicateSlug(...a))},Yt),e("a",{href:"javascript:void(0)",title:"Дублировать команду",class:"btn btn-m btn-full rounded-xs text-uppercase font-900 shadow-s bg-red1-dark",onClick:n[4]||(n[4]=(...a)=>t.removeSlug&&t.removeSlug(...a))},xt)])])):d("",!0),!t.simple&&!t.edit?(o(),i("ol",te,[e("li",ee,[e("div",se,[le,g(" №"+u(s.item.id||"Нет идентификатора"),1)])]),e("li",oe,[e("div",ie,[ne,g(" "+u(s.item.command||"Нет команды"),1)])]),e("li",ae,[e("div",de,[re,g(" "+u(s.item.slug||"Slug"),1)])]),e("li",ue,[e("div",ce,[ge,g(" "+u(s.item.comment||"Пояснение не указано"),1)])]),s.item.config?(o(),i("li",me,[e("div",he,[fe,s.item.config?(o(!0),i(f,{key:0},p(s.item.config,a=>(o(),i("p",null,[e("strong",null,u(a.key||"Ключ не найден")+":",1),g(u(a.value||"Не указано"),1)]))),256)):d("",!0)])])):d("",!0),s.item.page?(o(),i("li",pe,_e)):d("",!0),s.item.is_global?(o(),i("li",ke,$e)):d("",!0)])):d("",!0),!t.load&&t.edit?(o(),b(Et,{key:2,item:s.item,onCallback:t.slugFormCallback},null,8,["item","onCallback"])):d("",!0)]))}}),we={key:0},Ce=e("i",{class:"fa-solid fa-scroll"},null,-1),Fe={key:1},je=e("i",{class:"fa-regular fa-square-minus"},null,-1),Ve={key:0,class:"mb-2"},Oe={class:"form-floating mb-3"},Ue=e("label",{for:"floatingInput"},"Быстрый поиск команды",-1),Le={class:"form-check"},Ae={class:"form-check-label",for:"need_global"},Te={key:0},Ne={key:1},Ie={class:"mb-1"},Me={class:"mb-3"},Pe={key:2,class:"mb-3"},Ge=e("div",{class:"alert alert-danger",role:"alert"}," У Вас еще нет добавленных скриптов! ",-1),Be=[Ge],Ee={props:["command","bot"],data(){return{need_global:!0,show:!1,slugs:[],paginate:null,ownSearch:null,slugForm:{command:null,comment:null,slug:null}}},watch:{need_global:function(s,t){this.loadSlugs()}},computed:{...k(["getSlugs","getSlugsPaginateObject"]),filteredSlugs(){return this.slugs.length===0?[]:this.ownSearch==null?this.slugs:this.slugs.filter(s=>{let t=s.slug||"",n=s.command||"",a=s.comment||"";return n.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1||a.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1||t.toLowerCase().indexOf(this.ownSearch.toLowerCase())!==-1})}},mounted(){this.loadSlugs(),this.command&&this.$nextTick(()=>{this.slugForm.command=this.command})},methods:{nextSlugs(s){this.loadSlugs(s)},loadSlugs(s){this.$store.dispatch("loadSlugs",{dataObject:{needGlobal:this.need_global},page:s}).then(t=>{this.slugs=this.getSlugs,this.paginate=this.getSlugsPaginateObject})},callbackSlugs(){this.loadSlugs()},selectSlug(s){this.$emit("select",s)},loadAllSlugs(){this.$store.dispatch("loadAllSlugs").then(s=>{this.allSlugs=s.data})},addSlug(s){}}},Je=Object.assign(Ee,{__name:"BotSlugList",setup(s){return(t,n)=>(o(),i(f,null,[e("button",{type:"button",onClick:n[0]||(n[0]=a=>t.show=!t.show),class:"btn btn-m btn-full mb-3 rounded-xs text-uppercase font-900 shadow-s bg-red1-light w-100"},[t.show?(o(),i("span",Fe,[je,g(" Свернуть форму добавления")])):(o(),i("span",we,[Ce,g(" Добавить глобальный скрипт")]))]),t.show?(o(),i("div",Ve,[s.bot?(o(),b(D,{key:0,"can-add":!0,bot:s.bot,onCallback:t.loadSlugs},null,8,["bot","onCallback"])):d("",!0)])):d("",!0),e("div",Oe,[Ue,m(e("input",{type:"search","onUpdate:modelValue":n[1]||(n[1]=a=>t.ownSearch=a),class:"form-control",id:"floatingInput",placeholder:"Название команды"},null,512),[[h,t.ownSearch]])]),e("div",Le,[m(e("input",{class:"form-check-input","onUpdate:modelValue":n[2]||(n[2]=a=>t.need_global=a),type:"checkbox",id:"need_global"},null,512),[[$,t.need_global]]),e("label",Ae,[t.need_global?(o(),i("span",Te,"Глобальные")):(o(),i("span",Ne,"Локальные"))])]),t.slugs&&s.bot?(o(!0),i(f,{key:1},p(t.filteredSlugs,(a,c)=>(o(),i("div",Ie,[_(Se,{item:a,bot:s.bot,onCallback:t.callbackSlugs,onSelect:t.selectSlug},null,8,["item","bot","onCallback","onSelect"])]))),256)):d("",!0),e("div",Me,[t.paginate?(o(),b(v,{key:0,simple:!0,onPagination_page:t.nextSlugs,pagination:t.paginate},null,8,["onPagination_page","pagination"])):d("",!0)]),t.filteredSlugs.length===0?(o(),i("div",Pe,Be)):d("",!0)],64))}}),qe={class:"card card-style"},De={class:"card-body"},ze={data(){return{load:!1,bot:null}},mounted(){this.loadBotAdminConfig()},methods:{loadBotAdminConfig(){this.$store.dispatch("loadBotAdminConfig").then(s=>{this.bot=s.data})}}},Ye=Object.assign(ze,{__name:"Slugs",setup(s){return(t,n)=>(o(),i("div",qe,[e("div",De,[t.load?d("",!0):(o(),b(Je,{key:0,bot:t.bot},null,8,["bot"]))])]))}});export{Ye as default};
