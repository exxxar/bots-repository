import{g as p,o as m,j as c,l as e,M as s,a2 as u,W as l,n as i,K as f,L as h,a0 as _,N as k}from"./index.es-db843bab.js";import{_ as b}from"./_plugin-vue_export-helper-c27b6911.js";const g={data(){return{tab:0,sending:!1,linkForm:{phone:null,name:null,email:null,amount:0,is_recurrent:!1,description:"Оплата заказа"}}},computed:{...p(["getSelf"]),tg(){return window.Telegram.WebApp}},mounted(){this.tg.BackButton.show(),this.tg.BackButton.onClick(()=>{document.querySelectorAll('[data-bs-dismiss="modal"]').forEach(r=>r.click()),this.$router.back()})},methods:{submit(){this.sending=!0,this.$store.dispatch("sendSBPInvoice",{dataObject:this.linkForm}).then(r=>{this.sending=!1,this.linkForm.name=null,this.linkForm.phone=null,this.linkForm.email=null,this.linkForm.recurrent=!1,this.linkForm.description="Оплата заказа",this.linkForm.amount=0,this.$notify({title:"Оплата",text:"Вы успешно отправили ссылку на оплату",type:"success"})}).catch(()=>{this.sending=!1,this.$notify({title:"Упс...",text:"Что-то пошло не так...",type:"error"})})}}},x={class:"container py-3"},F=e("h6",null,[e("i",{class:"fa-solid fa-money-bill-transfer"}),i(" Генерация ссылок на оплату")],-1),y={class:"form-check form-switch"},v=e("label",{class:"form-check-label",for:"is-recurent-payment"},"Является рекурентным",-1),w={class:"form-floating mb-2"},I=e("label",{for:"floatingInput"},[i("Сумма, руб "),e("span",{class:"fw-bold text-danger"},"*")],-1),V={class:"form-floating mb-2"},B={for:"floatingTextarea"},U={key:0,style:{"font-size":"12px"}},S=e("span",{class:"fw-bold text-danger"},"*",-1),T=e("div",{class:"divider my-3"},"Данные о клиенте",-1),M={class:"form-floating mb-2"},N=e("label",{for:"floatingInput"},"Имя клиента",-1),q={class:"form-floating mb-2"},C=e("label",{for:"floatingInput"},[i("Телефон клиента "),e("span",{class:"fw-bold text-danger"},"*")],-1),D={class:"form-floating mb-2"},j=e("label",{for:"floatingInput"},"Почта клиента",-1),A=["disabled"],E=e("i",{class:"fa-solid fa-paper-plane"},null,-1);function L(r,o,W,z,t,a){const d=k("mask");return m(),c("div",x,[F,e("form",{onSubmit:o[6]||(o[6]=_((...n)=>a.submit&&a.submit(...n),["prevent"]))},[e("div",y,[s(e("input",{class:"form-check-input","onUpdate:modelValue":o[0]||(o[0]=n=>t.linkForm.is_recurrent=n),type:"checkbox",role:"switch",id:"is-recurent-payment"},null,512),[[u,t.linkForm.is_recurrent]]),v]),e("div",w,[s(e("input",{type:"number",min:"0","onUpdate:modelValue":o[1]||(o[1]=n=>t.linkForm.amount=n),required:"",class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[l,t.linkForm.amount]]),I]),e("div",V,[s(e("textarea",{class:"form-control",style:{"min-height":"200px"},maxlength:"255",required:"","onUpdate:modelValue":o[2]||(o[2]=n=>t.linkForm.description=n),placeholder:"Leave a comment here",id:"floatingTextarea"},null,512),[[l,t.linkForm.description]]),e("label",B,[i("Описание услуги "),(t.linkForm.description||"").length>0?(m(),c("span",U,"("+f(t.linkForm.description.length)+"/255)",1)):h("",!0),S])]),T,e("div",M,[s(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=n=>t.linkForm.name=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[l,t.linkForm.name]]),N]),e("div",q,[s(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=n=>t.linkForm.phone=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[d,"+7(###) ###-##-##"],[l,t.linkForm.phone]]),C]),e("div",D,[s(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=n=>t.linkForm.email=n),class:"form-control",id:"floatingInput",placeholder:"name@example.com"},null,512),[[l,t.linkForm.email]]),j]),e("button",{disabled:t.sending,class:"btn btn-primary mb-2 w-100 p-3"},[E,i(" Отправить ссылку на оплату в чат ")],8,A)],32)])}const O=b(g,[["render",L]]);export{O as default};
