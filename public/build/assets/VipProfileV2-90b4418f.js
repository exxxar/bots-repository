import{g as w,o as s,j as i,l as t,a0 as U,M as p,L as n,W as h,$ as y,F as x,J as g,a2 as M,n as m,K as a,N as F,bA as T,T as V,U as L}from"./index.es-db843bab.js";import{_ as j}from"./_plugin-vue_export-helper-c27b6911.js";const H={data(){return{settings:{display_type:0,need_birthday:!0,need_age:!0,need_city:!0,need_sex:!0,need_phone:!0,need_email:!0,need_profile_form_image:!0,form_image:null,pre_birthday_text:null,pre_email_text:null,pre_age_text:null,pre_city_text:null,pre_sex_text:null,pre_name_text:null,pre_phone_text:null,text_after_submit:null},load:!1,confirm:!1,step:0,botUser:null,vipForm:{name:null,phone:null,email:null,birthday:null,city:null,country:null,address:null,sex:!0,fields:[]}}},watch:{getSelf:function(){this.botUser=this.getSelf,this.vipForm={name:this.botUser.name||this.botUser.fio_from_telegram||null,phone:this.botUser.phone||null,email:this.botUser.email||null,birthday:this.botUser.birthday||null,city:this.botUser.city||null,country:this.botUser.country||null,address:this.botUser.address||null,sex:this.botUser.sex||!0,fields:[]},this.loadCurrentBotFields()}},mounted(){this.loadProfileFormData()},computed:{...w(["getSelf"]),tg(){return window.Telegram.WebApp},currentBot(){return window.currentBot}},methods:{getUserFieldValue(_){const l={value:null};return this.botUser.fields&&this.botUser.fields.find(c=>c.bot_custom_field_setting_id===_)||l},loadCurrentBotFields(){return this.$store.dispatch("loadCurrentBotFields").then(_=>{(_.data||[]).forEach(c=>{if(c.is_active){let f=this.getUserFieldValue(c.id),e=f.value,u=f.config;this.vipForm.fields.push({id:c.id,title:c.label,description:c.description,key:c.key,value:c.type===2?e==="1":e,type:c.type,pattern:c.pattern,required:c.required,config:u})}})})},loadProfileFormData(){this.loading=!0,this.$store.dispatch("loadProfileFormData").then(_=>{this.loading=!1,this.$nextTick(()=>{Object.keys(_).forEach(l=>{this.settings[l]=_[l]})})}).catch(()=>{this.loading=!1})},submit(){this.loading=!0,this.$store.dispatch("saveProfileFormData",{dataObject:this.vipForm}).then(_=>{this.loading=!1,this.$notify({title:"Отлично!",text:"Вы успешно заполнили форму и стали наши VIP-пользователем!",type:"success"}),this.tg.close()}).catch(()=>{this.loading=!1,this.$notify({title:"Упс!",text:"Ошибка заполнения формы!",type:"error"})})}}},r=_=>(V("data-v-b5cc11e8"),_=_(),L(),_),C={key:0,class:"container py-3"},q={class:"row"},B={key:0,class:"col-12"},D={key:0,class:"col-12 d-flex justify-content-center mb-3"},P={class:"img-avatar"},S={key:0,class:"img-avatar"},I={key:1},E={class:"col-12"},N=["innerHTML"],z={class:"form-floating"},A=r(()=>t("label",{for:"vipForm-name"},"Ф.И.О.",-1)),O={key:1,class:"col-12"},W=["innerHTML"],G={class:"form-floating"},J=r(()=>t("label",{for:"vipForm-phone"},"Номер телефона",-1)),K={key:2,class:"col-12"},Q=["innerHTML"],R={class:"form-floating"},X=r(()=>t("label",{for:"vipForm-email"},"Почта",-1)),Y={key:3,class:"col-12"},Z=["innerHTML"],$={class:"row mb-0"},ee={class:"col-6"},te=r(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),se=r(()=>t("span",{class:"text-center text-uppercase my-2"},"Мужчина",-1)),ie=[te,se],oe={class:"col-6"},ne=r(()=>t("i",{class:"fa-solid fa-mars font-28"},null,-1)),le=r(()=>t("span",{class:"text-center text-uppercase my-2"},"Женщина",-1)),re=[ne,le],ce={key:4,class:"col-12"},_e=["innerHTML"],ae={class:"form-floating"},de=r(()=>t("label",{for:"vipForm-birthday"},"Дата рождения",-1)),pe={key:5,class:"col-12"},me=["innerHTML"],ue={class:"form-floating"},he=r(()=>t("label",{for:"vipForm-city"},"Город проживания",-1)),ye={class:"col-12"},fe={key:0},be={class:"text-center my-3"},ve={key:0,class:"form-floating"},xe=["type","onUpdate:modelValue","placeholder","pattern","required"],ge=["for"],Fe={key:1,class:"row mb-0"},ke={class:"col-6 p-3"},we=["onClick"],Ue=r(()=>t("i",{class:"fa-solid fa-check font-28"},null,-1)),Me=r(()=>t("span",{class:"text-center text-uppercase my-2"},"Да",-1)),Te=[Ue,Me],Ve={class:"col-6 p-3"},Le=["onClick"],je=r(()=>t("i",{class:"fa-solid fa-xmark font-28"},null,-1)),He=r(()=>t("span",{class:"text-center text-uppercase my-2"},"Нет",-1)),Ce=[je,He],qe={class:"col-12"},Be=r(()=>t("p",{class:"mb-3"},[t("em",null,"Отлично! Теперь, прежде чем закончить, пожалуйста, прочитайте условия использования и дайте свое согласие на их принятие.")],-1)),De=r(()=>t("p",null,[m("Перед отправкой данных нужно ознакомиться с "),t("a",{href:"https://telegra.ph/Politika-konfidencialnosti-12-29-5",target:"_blank"},"политикой конфиденциальности"),m(".")],-1)),Pe={class:"d-flex mb-3"},Se={class:"form-check form-switch"},Ie={class:"form-check-label",for:"toggle-id-1"},Ee={key:0},Ne={key:1},ze=["disabled"],Ae={key:1,class:"col-12"},Oe=["innerHTML"],We={class:"alert alert-light"},Ge=r(()=>t("h6",{class:"text-primary text-center fw-bold"},"Ваши данные:",-1)),Je={class:"mb-2 d-flex justify-content-between"},Ke={class:"fw-bold text-primary"},Qe={key:0,class:"mb-2 d-flex justify-content-between"},Re={class:"fw-bold text-primary"},Xe={key:1,class:"mb-2 d-flex justify-content-between"},Ye={class:"fw-bold text-primary"},Ze={key:2,class:"mb-2 d-flex justify-content-between"},$e={class:"fw-bold text-primary"},et={key:3,class:"mb-2 d-flex justify-content-between"},tt={class:"fw-bold text-primary"},st={key:4,class:"mb-2 d-flex justify-content-between"},it={class:"fw-bold text-primary"},ot={class:"mb-2 d-flex justify-content-between"},nt={key:0},lt={key:1};function rt(_,l,c,f,e,u){const v=F("lazy"),k=F("mask");return e.botUser?(s(),i("div",C,[t("div",q,[e.botUser.is_vip?n("",!0):(s(),i("div",B,[t("form",{onSubmit:l[8]||(l[8]=U((...o)=>u.submit&&u.submit(...o),["prevent"])),class:"row mb-0"},[e.settings.need_profile_form_image?(s(),i("div",D,[t("div",P,[(e.settings.form_image||"").length>0?p((s(),i("img",S,null,512)),[[v,e.settings.form_image]]):p((s(),i("img",I,null,512)),[[v,"/images-by-bot-id/"+u.currentBot.id+"/"+u.currentBot.image]])])])):n("",!0),t("div",E,[e.settings.pre_name_text?(s(),i("h6",{key:0,class:"text-center my-3",innerHTML:e.settings.pre_name_text},null,8,N)):n("",!0),t("div",z,[p(t("input",{type:"text",class:"form-control text-center",placeholder:"Петров Петр Семенович","aria-label":"vipForm-name","onUpdate:modelValue":l[0]||(l[0]=o=>e.vipForm.name=o),"aria-describedby":"vipForm-name",required:""},null,512),[[h,e.vipForm.name]]),A])]),e.settings.need_phone?(s(),i("div",O,[e.settings.pre_phone_text?(s(),i("h6",{key:0,class:"text-center my-3",innerHTML:e.settings.pre_phone_text},null,8,W)):n("",!0),t("div",G,[p(t("input",{type:"text",class:"form-control text-center","onUpdate:modelValue":l[1]||(l[1]=o=>e.vipForm.phone=o),placeholder:"+7(000)000-00-00","aria-label":"vipForm-phone","aria-describedby":"vipForm-phone",required:""},null,512),[[k,["+7(###)###-##-##"]],[h,e.vipForm.phone]]),J])])):n("",!0),e.settings.need_email?(s(),i("div",K,[e.settings.pre_email_text?(s(),i("h6",{key:0,class:"text-center my-3",innerHTML:e.settings.pre_email_text},null,8,Q)):n("",!0),t("div",R,[p(t("input",{type:"email",class:"form-control text-center","onUpdate:modelValue":l[2]||(l[2]=o=>e.vipForm.email=o),placeholder:"example@test.com","aria-label":"vipForm-email","aria-describedby":"vipForm-email",required:""},null,512),[[h,e.vipForm.email]]),X])])):n("",!0),e.settings.need_sex?(s(),i("div",Y,[e.settings.pre_sex_text?(s(),i("h6",{key:0,class:"text-center my-3",innerHTML:e.settings.pre_sex_text},null,8,Z)):n("",!0),t("div",$,[t("div",ee,[t("div",{class:y([{"bg-primary text-white":e.vipForm.sex},"btn w-100 btn-outline-primary p-2 d-flex justify-content-between flex-column align-items-center"]),onClick:l[3]||(l[3]=o=>e.vipForm.sex=!0)},ie,2)]),t("div",oe,[t("div",{class:y([{"bg-primary text-white":!e.vipForm.sex},"btn w-100 btn-outline-primary p-2 d-flex justify-content-between flex-column align-items-center"]),onClick:l[4]||(l[4]=o=>e.vipForm.sex=!1)},re,2)])])])):n("",!0),e.settings.need_birthday?(s(),i("div",ce,[e.settings.pre_birthday_text?(s(),i("h6",{key:0,class:"text-center my-3",innerHTML:e.settings.pre_birthday_text},null,8,_e)):n("",!0),t("div",ae,[p(t("input",{type:"date",class:"form-control text-center","onUpdate:modelValue":l[5]||(l[5]=o=>e.vipForm.birthday=o),"aria-label":"vipForm-birthday","aria-describedby":"vipForm-birthday",required:""},null,512),[[h,e.vipForm.birthday]]),de])])):n("",!0),e.settings.need_city?(s(),i("div",pe,[e.settings.pre_city_text?(s(),i("h6",{key:0,class:"text-center my-3",innerHTML:e.settings.pre_city_text},null,8,me)):n("",!0),t("div",ue,[p(t("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=o=>e.vipForm.city=o),class:"form-control text-center",placeholder:"Ваш город","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:""},null,512),[[h,e.vipForm.city]]),he])])):n("",!0),(e.vipForm.fields||[]).length>0?(s(!0),i(x,{key:6},g(e.vipForm.fields,(o,d)=>(s(),i("div",ye,[e.settings[o.key]?(s(),i("div",fe,[t("h6",be,a(o.description),1),o.type===0||o.type===1?(s(),i("div",ve,[p(t("input",{type:o.type===1?"number":"text","onUpdate:modelValue":b=>e.vipForm.fields[d].value=b,class:"form-control text-center",placeholder:o.title,pattern:e.vipForm.fields[d].pattern||"","aria-label":"vipForm-city","aria-describedby":"vipForm-city",required:e.vipForm.fields[d].required||!1},null,8,xe),[[T,e.vipForm.fields[d].value]]),t("label",{for:"vipForm-field"+d},a(o.title||"-"),9,ge)])):n("",!0),o.type===2?(s(),i("div",Fe,[t("div",ke,[t("div",{class:y([{"bg-primary":e.vipForm.fields[d].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:b=>e.vipForm.fields[d].value=!0},Te,10,we)]),t("div",Ve,[t("div",{class:y([{"bg-primary":!e.vipForm.fields[d].value},"btn p-2 w-100 btn-outline-primary d-flex justify-content-between flex-column align-items-center"]),onClick:b=>e.vipForm.fields[d].value=!1},Ce,10,Le)])])):n("",!0)])):n("",!0)]))),256)):n("",!0),t("div",qe,[Be,De,t("div",Pe,[t("div",Se,[p(t("input",{class:"form-check-input","onUpdate:modelValue":l[7]||(l[7]=o=>e.confirm=o),type:"checkbox",role:"switch",id:"toggle-id-1"},null,512),[[M,e.confirm]]),t("label",Ie,[e.vipForm.sex?n("",!0):(s(),i("span",Ee,"С правилами ознакомилась")),e.vipForm.sex?(s(),i("span",Ne,"С правилами ознакомлен")):n("",!0)])])]),t("button",{type:"submit",disabled:!e.confirm||e.load,class:"btn btn-primary p-3 w-100"}," Отправить анкету ",8,ze)])],32)])),e.botUser.is_vip?(s(),i("div",Ae,[t("p",{class:"alert alert-light my-2",innerHTML:e.settings.text_after_submit},null,8,Oe),t("div",We,[Ge,t("p",Je,[m("Имя: "),t("span",Ke,a(e.botUser.name||"Не указано"),1)]),e.settings.need_phone?(s(),i("p",Qe,[m("Телефон: "),t("span",Re,a(e.botUser.phone||"Не указано"),1)])):n("",!0),e.settings.need_email?(s(),i("p",Xe,[m("Email: "),t("span",Ye,a(e.botUser.email||"Не указано"),1)])):n("",!0),e.settings.need_city?(s(),i("p",Ze,[m("Город: "),t("span",$e,a(e.botUser.city||"Не указано"),1)])):n("",!0),e.settings.need_birthday?(s(),i("p",et,[m("Дата рождения: "),t("span",tt,a(e.botUser.birthday||"Не указано"),1)])):n("",!0),e.settings.need_sex?(s(),i("p",st,[m("Пол: "),t("span",it,a(e.botUser.sex?"Мужской":"Женский"),1)])):n("",!0),(s(!0),i(x,null,g(e.vipForm.fields,o=>(s(),i("p",ot,[m(a(o.title)+": ",1),o.config.type===2?(s(),i("span",nt,a(o.value===!1?"Нет":"Да"),1)):n("",!0),o.config.type===0||o.config.type===1?(s(),i("span",lt,a(o.value),1)):n("",!0)]))),256))])])):n("",!0)])])):n("",!0)}const at=j(H,[["render",rt],["__scopeId","data-v-b5cc11e8"]]);export{at as default};
