import{_ as g}from"./_plugin-vue_export-helper-c27b6911.js";import{o as d,k as a,n as e,L as s,F as c,K as u,M as h,p as b}from"./index.es-c4852431.js";const k={data(){return{selectedTable:null,my_bookings:[]}},mounted(){this.myUpcomingBookings()},methods:{selectATable(l){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=l,this.$emit("select",this.selectedTable)})},myUpcomingBookings(){return this.$store.dispatch("myUpcomingBookings").then(l=>{this.my_bookings=l.data||[],this.selectedTable=this.my_bookings.find(t=>t.id===(storedTable==null?void 0:storedTable.id))||null})},openRemoveModal(l){this.selectedTable=null,this.$nextTick(()=>{this.selectedTable=l;const t=document.getElementById("remove-booking-modal");new bootstrap.Modal(t).show()})},cancelBookingTable(){if(this.selectedTable)return this.$store.dispatch("cancelBookingTable",{bookingId:this.selectedTable.id}).then(l=>{this.$notify({title:"Бронирование",text:"Бронь столика успешно убрана!",type:"success"}),this.myUpcomingBookings();const t=document.getElementById("remove-booking-modal");bootstrap.Modal.getInstance(t).hide().hide()})}}},y={key:0,class:"p-3"},T={class:"dropdown my-2"},f={class:"btn btn-success dropdown-toggle w-100 p-3",type:"button",id:"bookingsDropdown","data-bs-toggle":"dropdown","aria-expanded":"false"},v={key:0},w={key:1},x={class:"dropdown-menu w-100","aria-labelledby":"bookingsDropdown"},B=e("li",null,[e("hr",{class:"dropdown-divider"})],-1),M=["onClick"],C={class:"fw-bold"},E={class:"text-muted"},D={class:"fst-italic mb-1"},I={class:"d-flex justify-content-between align-items-center"},L=["onClick"],U={class:"badge bg-primary rounded-pill"},A={class:"modal fade",id:"remove-booking-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},N={class:"modal-dialog modal-dialog-centered"},V={class:"modal-content"},j=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Удаление брони"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),F={class:"modal-body"},R={class:"mb-2"},K={class:"fw-bold text-primary"},S={class:"fw-bold text-primary"},q={class:"w-100 d-flex justify-content-center"},z=e("button",{"data-bs-dismiss":"modal",class:"btn btn-secondary",type:"button"},"Нет, отменить ",-1);function G(l,t,r,H,n,i){return d(),a(c,null,[n.my_bookings.length>0?(d(),a("div",y,[e("div",T,[e("button",f,[n.selectedTable?(d(),a("span",v,"Выбран столик #"+s(n.selectedTable.number),1)):(d(),a("span",w,"Мои брони ("+s(n.my_bookings.length)+")",1))]),e("ul",x,[e("li",{onClick:t[0]||(t[0]=o=>i.selectATable(null)),class:"dropdown-item"}," Не выбран "),B,(d(!0),a(c,null,u(n.my_bookings,o=>{var m,_;return d(),a("li",{onClick:p=>i.selectATable(o),key:o.id,class:"dropdown-item"},[e("div",C," Бронь столика №"+s(o.number),1),e("small",E," Дата "+s(o.booked_date_at)+" в "+s(o.booked_time_at),1),e("p",D,s(((m=o.booked_info)==null?void 0:m.description)||"-"),1),e("div",I,[e("button",{onClick:p=>i.openRemoveModal(o),type:"button",class:"btn btn-sm btn-danger"}," Отменить ",8,L),e("span",U,s(((_=o.booked_info)==null?void 0:_.persons)||1)+" чел. ",1)])],8,M)}),128))])])])):h("",!0),e("div",A,[e("div",N,[e("div",V,[j,e("div",F,[n.selectedTable?(d(),a(c,{key:0},[e("p",R,[b("Вы точно хотите удалить бронь на "),e("strong",K,s(n.selectedTable.booked_date_at||"-"),1),b(" для столика "),e("strong",S,s(n.selectedTable.number||"-"),1),b("?")]),e("div",q,[e("button",{onClick:t[1]||(t[1]=(...o)=>i.cancelBookingTable&&i.cancelBookingTable(...o)),style:{"margin-right":"10px"},class:"btn btn-danger",type:"button"},"Да, удалить "),z])],64)):h("",!0)])])])])],64)}const P=g(k,[["render",G]]);export{P as B};
