import{G as S,R as F,L as k,q as i,t as l,B as f,O as x,u as B,a6 as M,v as t,K as _,A as c,D as m,y as h,P as C,H as n,J as p,F as u,C as g,N as T,x as j}from"./index.es-94f59699.js";import{M as E}from"./ManagerProfile-e4b03a3f.js";/* empty css                                                 */import{b as L,_ as q}from"./BotForm-d60b6c4f.js";import{P as A}from"./PromoCodeActivateForm-83d12465.js";import{_ as P}from"./BotSection-b30fe51e.js";import"./CompanyList-4d7c2b2f.js";import{C as D,S as I,P as V,N as O}from"./carousel.es-256870c5.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TelegramChannelHelper.vue_vue_type_style_index_0_lang-88e3539b.js";import"./MailingTable-6cc320e5.js";import"./TelegramChannelHelper-4fafe92e.js";import"./v4-4a60fe23.js";import"./main-72e95448.js";import"./SlugForm-3a55c0e8.js";import"./GlobalSlugList-d6325ecb.js";import"./base64-28351c3b.js";const N=t("title",null,"Кабинет администратора",-1),U=t("meta",{name:"description",content:"Кабинет администратора<"},null,-1),z={class:"navbar navbar-expand-lg sticky-top bg-primary"},H={class:"container"},J=t("i",{class:"fas fa-money-bill"},null,-1),R=t("span",{class:"fw-bold text-white"},"0",-1),G={class:"fw-bold text-white"},K={class:"d-flex"},X={key:0,class:"btn text-white p-2 px-3 border-light mr-2",style:{"font-size":"12px"},type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#bot-section-menu","aria-controls":"staticBackdrop"},Q=t("i",{class:"fa-solid fa-screwdriver-wrench text-white"},null,-1),W=[Q],Y={class:"dropdown"},Z={style:{"font-size":"12px"},class:"btn btn-outline-light text-white dropdown-toggle p-2",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},tt=t("i",{class:"fa-solid fa-user"},null,-1),et=t("ul",{class:"dropdown-menu"},[t("li",null,[t("a",{class:"dropdown-item","data-bs-toggle":"offcanvas",role:"button",href:"#profile-sidebar"},"Профиль")]),t("li",null,[t("a",{href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#open-payment-modal",class:"dropdown-item"},"Пополнить баланс")]),t("li",null,[t("a",{href:"javascript:void(0)","data-bs-toggle":"modal","data-bs-target":"#activate-promo-code",class:"dropdown-item"},"Ввести промокод")]),t("li",null,[t("hr",{class:"dropdown-divider"})]),t("li",null,[t("a",{class:"dropdown-item"},"Вопросы и ответы")]),t("li",null,[t("a",{"data-bs-toggle":"modal","data-bs-target":"#feedbackModal",class:"dropdown-item",href:"javascript:void(0)"},"Тех. поддержка")]),t("li",null,[t("hr",{class:"dropdown-divider"})]),t("li",null,[t("a",{class:"dropdown-item",href:"/logout"},"Выход")])],-1),st={class:"modal fade",id:"open-payment-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ot={class:"modal-dialog modal-xs"},at={class:"modal-content"},it=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Оплата произвольной суммы"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),lt={class:"modal-body"},nt={class:"alert alert-light"},dt={class:"form-floating mb-3"},rt=t("label",{for:"floatingPassword"},"Сумма для внесения, руб",-1),ct={class:"btn btn-primary w-100 p-3 d-flex justify-content-center align-items-center",type:"submit"},mt=t("span",{class:"fw-bold mr-2"},"Оплатить через ",-1),ht={style:{width:"50px","object-fit":"cover"},alt:""},pt={class:"d-flex justify-content-center align-items-center p-2"},ut=t("span",null,"Принимаем к оплате",-1),bt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},ft={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},_t={class:"d-flex justify-content-center align-items-center p-2",href:"https://tbank.ru",target:"_blank"},gt=t("span",null,"Партнер системы",-1),vt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},yt={class:"modal fade",id:"payment-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},wt={class:"modal-dialog modal-xl"},kt={class:"modal-content"},Ct=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"},"Выбор тарифа"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),St={class:"modal-body"},xt=t("div",{class:"alert alert-light mb-3"}," После осуществления оплаты обновите страницу для отображения зачисленных средств! ",-1),$t={key:0,class:"row"},Ft={class:"col-md-4"},Bt={class:"card payment-card h-100 d-flex justify-content-between flex-column"},Mt={class:"price"},Tt={key:0,class:"list-group list-group-flush"},jt={class:"list-group-item"},Et=["onClick"],Lt=t("span",{class:"fw-bold mr-2"},"Оплатить через ",-1),qt={style:{width:"50px","object-fit":"cover"},alt:""},At={key:1,class:"alert alert-light"},Pt={class:"d-flex justify-content-center align-items-center p-2"},Dt=t("span",null,"Принимаем к оплате",-1),It={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},Vt={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},Ot={class:"d-flex justify-content-center align-items-center p-2",href:"https://tbank.ru",target:"_blank"},Nt=t("span",null,"Партнер системы",-1),Ut={class:"p-2",style:{width:"80px","object-fit":"cover"},alt:""},zt={class:"container-fluid"},Ht={class:"row"},Jt={class:"col-md-12 ms-sm-auto col-lg-12 px-md-4 px-0"},Rt={class:"pt-md-3 pt-0 pb-md-2 pb-0 mb-3"},Gt={class:"theme-switcher d-none d-md-flex flex-column"},Kt=t("button",{id:"switch-theme","data-bs-toggle":"modal","data-bs-target":"#theme-switch-modal",class:"btn btn-primary"},[t("i",{class:"fa-solid fa-palette"})],-1),Xt=t("i",{class:"fa-solid fa-moon"},null,-1),Qt=[Xt],Wt={class:"modal",id:"theme-switch-modal",tabindex:"-1"},Yt={class:"modal-dialog"},Zt={class:"modal-content"},te=t("div",{class:"modal-header"},[t("h5",{class:"modal-title"},"Выбор темы оформления"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ee={class:"modal-body"},se={class:"list-group"},oe=["onClick"],ae=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),ie={class:"modal fade",id:"activate-promo-code",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},le={class:"modal-dialog"},ne={class:"modal-content"},de={key:0,class:"modal-body"},re=t("h6",{class:"text-center"},"Активируйте ваш ключ и получите дополнительные слоты",-1),ce={key:1,class:"modal-body"},me=t("div",{class:"alert alert-primary"},"Вы не являетесь менеджером!",-1),he=[me],pe=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Закрыть")],-1),ue={class:"modal fade",id:"feedbackModal",tabindex:"-1","aria-labelledby":"feedbackModalLabel","aria-hidden":"true"},be={class:"modal-dialog modal-dialog-centered"},fe={class:"modal-content"},_e=t("div",{class:"modal-header bg-primary p-4"},[t("h5",{class:"modal-title font-alt text-white",id:"feedbackModalLabel"},"Заказать обратную связь"),t("button",{class:"btn-close btn-close-white",type:"button","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ge={class:"modal-body border-0 p-4"},ve={class:"form-floating mb-3"},ye=t("label",{for:"name"},"Ваше Ф.И.О.",-1),we=t("div",{class:"invalid-feedback","data-sb-feedback":"name:required"},"Является обязательным ",-1),ke={class:"form-floating mb-3"},Ce=t("label",{for:"email"},"Ваша почта",-1),Se=t("div",{class:"invalid-feedback","data-sb-feedback":"email:required"},"An email is required. ",-1),xe=t("div",{class:"invalid-feedback","data-sb-feedback":"email:email"},"Email is not valid. ",-1),$e={class:"form-floating mb-3"},Fe=t("label",{for:"phone"},"Номер телефона",-1),Be=t("div",{class:"invalid-feedback","data-sb-feedback":"phone:required"},"A phone number is required. ",-1),Me={class:"form-floating mb-3"},Te=t("label",{for:"phone"},"Когда вам удобно?",-1),je=t("div",{class:"invalid-feedback","data-sb-feedback":"phone:required"},"A phone number is required. ",-1),Ee={class:"form-floating mb-3"},Le=t("label",{for:"message"},"Сообщение менеджеру",-1),qe=t("div",{class:"invalid-feedback","data-sb-feedback":"message:required"},"A message is required. ",-1),Ae={key:0,class:"alert alert-success text-center my-3 rounded-3",id:"submitSuccessMessage"},Pe=t("span",{class:"fw-bolder"},"Спасибо! Вы успешно отправили заявку!",-1),De=t("br",null,null,-1),Ie={key:1,class:"alert alert-danger my-3 text-center rounded-2",id:"submitErrorMessage"},Ve=t("div",{class:"d-grid"},[t("button",{class:"btn btn-success text-white rounded-2 btn-lg",id:"submitButton",type:"submit"},"Отправить заявку ")],-1),Oe={class:"offcanvas offcanvas-start",tabindex:"-1",id:"profile-sidebar","aria-labelledby":"offcanvasExampleLabel"},Ne=t("div",{class:"offcanvas-header"},[t("h5",{class:"offcanvas-title",id:"offcanvasExampleLabel"},"Ваш профиль"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Закрыть"})],-1),Ue={class:"offcanvas-body"},ze={data(){let s=new Date,e=s.getHours()+":"+s.getMinutes();return{payment_modal:null,paymentForm:{amount:0},success:!1,error:!1,feedbackForm:{name:null,email:null,phone:null,time:e,message:"Добрый день! Возникли технические сложности, свяжитесь со мной!"},bot:null,load:!1,is_chat_open:!1,currentTheme:"",company:null,tariffs:[],themes:[{title:"Тема 1",href:"/theme1.bootstrap.min.css"},{title:"Тема 2",href:"/theme2.bootstrap.min.css"},{title:"Тема 3",href:"/theme3.bootstrap.min.css"},{title:"Тема 4",href:"/theme4.bootstrap.min.css"},{title:"Тема 5",href:"/theme5.bootstrap.min.css"},{title:"Тема 6",href:"/theme6.bootstrap.min.css"},{title:"Тема 7",href:"/theme7.bootstrap.min.css"},{title:"Тема 8",href:"/theme8.bootstrap.min.css"},{title:"Тема 9",href:"/theme9.bootstrap.min.css"},{title:"Тема 10",href:"/theme10.bootstrap.min.css"},{title:"Тема 11",href:"/theme11.bootstrap.min.css"},{title:"Тема 12",href:"/theme12.bootstrap.min.css"},{title:"Тема 13",href:"/theme13.bootstrap.min.css"},{title:"Тема 14",href:"/theme14.bootstrap.min.css"},{title:"Тема 15",href:"/theme15.bootstrap.min.css"},{title:"Тема 16",href:"/theme16.bootstrap.min.css"}]}},computed:{...S(["getErrors","getCurrentBot","getCurrentCompany"]),profile(){return window.profile||null},slotsCount(){var s,e;return((e=(s=this.profile)==null?void 0:s.manager)==null?void 0:e.max_bot_slot_count)||0}},watch:{getErrors:function(s,e){Object.keys(s).forEach(o=>{this.$notify({title:"Конструктор ботов",text:s[o],type:"warn"})})}},mounted(){this.payment_modal=new bootstrap.Modal(document.getElementById("payment-modal"),{}),this.loadCurrentCompany(),this.loadCurrentBot();let s=localStorage.getItem("cashman_global_admin_theme")||null,e=localStorage.getItem("cashman_global_admin_light")||null;s&&this.$nextTick(()=>{this.currentTheme=s}),e&&this.changeLight(e),window.addEventListener("store_current_bot-change-event",o=>{this.bot=this.getCurrentBot}),window.addEventListener("store_current_company-change-event",o=>{this.company=this.getCurrentCompany})},methods:{openTariffsModal(){this.loadActualTariffs(),this.payment_modal.show()},submitPayment(s=0){s>0&&(this.paymentForm.amount=s);let e=new FormData;Object.keys(this.paymentForm).forEach(o=>{const d=this.paymentForm[o]||"";typeof d=="object"?e.append(o,JSON.stringify(d)):e.append(o,d)}),this.$store.dispatch("sendInvoice",{paymentForm:e}).then(o=>{this.$notify({title:"Оплата услуг сервиса",text:"Платежная ссылка успешно сформирована!",type:"success"});const d=o.url;window.open(d,"_blank").focus()}).catch(()=>{this.$notify({title:"Оплата услуг сервиса",text:"Ошибка формирования платежной ссылки",type:"error"})})},submitMail(){this.success=!1,this.error=!1;let s=new FormData;Object.keys(this.feedbackForm).forEach(e=>{const o=this.feedbackForm[e]||"";typeof o=="object"?s.append(e,JSON.stringify(o)):s.append(e,o)}),this.$store.dispatch("sendFeedback",{mailForm:s}).then(e=>{this.load=!0,this.success=!0;let o=new Date,d=o.getHours()+":"+o.getMinutes();this.feedbackForm={name:null,email:null,phone:null,time:d,message:"Добрый день! Заинтересовала данная система, хочу запросить перезвон менеджера для обсуждения деталей!"},this.$notify({title:"CashMan",text:"Сообщение отправлено!",type:"success"})}).catch(e=>{this.error=!0,this.$notify({title:"CashMan",text:"Упс... ошибочка!",type:"error"})})},botSectionCallback(){window.dispatchEvent(new CustomEvent("change-current_bot-from-navbar-event"))},changeLight(s=null){let e=document.querySelector("html");if(s!=null&&(s==="light"||s==="dark")){e.setAttribute("data-bs-theme",s),localStorage.setItem("cashman_global_admin_light",s);return}if(e.hasAttribute("data-bs-theme")){let o=e.getAttribute("data-bs-theme");e.setAttribute("data-bs-theme",o==="dark"?"light":"dark")}else e.setAttribute("data-bs-theme","dark");localStorage.setItem("cashman_global_admin_light",e.getAttribute("data-bs-theme")||"light")},hasRole(s){return window.hasRole(s)||!1},switchTheme(s){let e=document.querySelector("#theme");e.href=this.themes[s].href,localStorage.setItem("cashman_global_admin_theme",e.href),this.$nextTick(()=>{this.currentTheme=e.href})},loadActualTariffs(){this.tariffs.length>0||this.$store.dispatch("getActualTariffs").then(s=>{this.tariffs=s||[]})},loadCurrentCompany(s=null){this.$store.dispatch("updateCurrentCompany",{company:s}).then(()=>{this.company=this.getCurrentCompany})},loadCurrentBot(s=null){return this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},resetCompany(){this.$store.dispatch("resetCurrentCompany").then(()=>{this.company=null,window.dispatchEvent(new CustomEvent("store_current_company-change-event"))})},resetBot(){this.$store.dispatch("resetCurrentBot").then(()=>{this.bot=null,window.dispatchEvent(new CustomEvent("store_current_bot-change-event"))})},stopAllDialogs(){this.$store.dispatch("stopDialogs").then(s=>{this.$notify({title:"Конструктор ботов",text:"Все диалоги остановлены",type:"success"})}).catch(s=>{})}}},He=Object.assign(ze,{__name:"ManagerLayout",setup(s){return(e,o)=>{var v,y,w;const d=F("notifications"),r=k("lazy"),$=k("mask");return i(),l(u,null,[f(B(M),null,{default:x(()=>[N,U]),_:1}),f(d,{position:"top right"}),t("nav",z,[t("div",H,[e.load?c("",!0):(i(),_(L,{key:0,id:"global-bot-search","custom-class":"dropdown-toggle my-2 text-white",onSelectBot:e.botSectionCallback,bot:e.bot},null,8,["onSelectBot","bot"])),t("button",{class:"btn text-white p-2 btn-outline-light",style:{"font-size":"12px"},onClick:o[0]||(o[0]=(...a)=>e.openTariffsModal&&e.openTariffsModal(...a)),"aria-controls":"staticBackdrop"},[J,m(" У вас "),R,m(" руб, "),t("span",G,h(e.slotsCount),1),m(" свободных слотов ")]),t("div",K,[e.bot?(i(),l("button",X,W)):c("",!0),t("div",Y,[t("button",Z,[tt,m(" "+h(((v=e.profile)==null?void 0:v.name)||((y=e.profile)==null?void 0:y.username)||((w=e.profile)==null?void 0:w.telegram_chat_id)||"-"),1)]),et])])])]),t("div",st,[t("div",ot,[t("div",at,[it,t("div",lt,[t("div",nt,[m(" Через данное окно вы можете внести абсолютно любую сумму. Рекомендуем вносить оплату согласно "),t("a",{href:"#tariff",onClick:o[1]||(o[1]=(...a)=>e.openTariffsModal&&e.openTariffsModal(...a))},"тарифным планам"),m(", так вы получаете помимо средств еще и дополнительные возможности в виде слотов или скидки (и другие преимущества тарифного плана). ")]),t("form",{onSubmit:o[3]||(o[3]=C((...a)=>e.submitPayment&&e.submitPayment(...a),["prevent"]))},[t("div",dt,[n(t("input",{type:"number",min:"0","onUpdate:modelValue":o[2]||(o[2]=a=>e.paymentForm.amount=a),class:"form-control",id:"floatingPassword",placeholder:"Password"},null,512),[[p,e.paymentForm.amount]]),rt]),t("button",ct,[mt,n(t("img",ht,null,512),[[r,"/images/Т-Банк.png"]])])],32),t("div",pt,[ut,n(t("img",bt,null,512),[[r,"/images/sbp.png"]]),n(t("img",ft,null,512),[[r,"/images/mir-logo.png"]])]),t("a",_t,[gt,n(t("img",vt,null,512),[[r,"/images/Т-Банк.png"]])])])])])]),t("div",yt,[t("div",wt,[t("div",kt,[Ct,t("div",St,[xt,e.tariffs.length>0?(i(),l("div",$t,[(i(!0),l(u,null,g(e.tariffs,a=>(i(),l("div",Ft,[t("div",Bt,[t("h3",null,h(a.name||"не указано"),1),t("div",Mt,h(a.price||"0")+"₽",1),(a.services||[]).length>0?(i(),l("ul",Tt,[(i(!0),l(u,null,g(a.services,b=>(i(),l("li",jt,h(b),1))),256))])):c("",!0),t("button",{type:"button",onClick:b=>e.submitPayment(a.price),class:"btn btn-primary p-3 d-flex justify-content-center align-items-center"},[Lt,n(t("img",qt,null,512),[[r,"/images/Т-Банк.png"]])],8,Et)])]))),256))])):(i(),l("p",At," Подождите, мы загружаем тарифы! ")),t("div",Pt,[Dt,n(t("img",It,null,512),[[r,"/images/sbp.png"]]),n(t("img",Vt,null,512),[[r,"/images/mir-logo.png"]])]),t("a",Ot,[Nt,n(t("img",Ut,null,512),[[r,"/images/Т-Банк.png"]])])])])])]),t("div",zt,[t("div",Ht,[t("main",Jt,[t("div",Rt,[T(e.$slots,"default")])])])]),t("div",Gt,[Kt,t("button",{onClick:o[4]||(o[4]=(...a)=>e.changeLight&&e.changeLight(...a)),class:"btn btn-primary mt-2"},Qt)]),t("div",Wt,[t("div",Yt,[t("div",Zt,[te,t("div",ee,[t("div",se,[(i(!0),l(u,null,g(e.themes,(a,b)=>(i(),l("button",{type:"button",onClick:Ge=>e.switchTheme(b),class:j([{active:e.currentTheme.indexOf(a.href)!=-1},"list-group-item list-group-item-action"]),"aria-current":"true"},h(a.title||"-"),11,oe))),256))])]),ae])])]),t("div",ie,[t("div",le,[t("div",ne,[e.profile?(i(),l(u,{key:0},[e.profile.manager?(i(),l("div",de,[re,f(A,{bot:e.bot},null,8,["bot"])])):(i(),l("div",ce,he)),pe],64)):c("",!0)])])]),t("div",ue,[t("div",be,[t("div",fe,[_e,t("div",ge,[t("form",{id:"contactForm",onSubmit:o[10]||(o[10]=C((...a)=>e.submitMail&&e.submitMail(...a),["prevent"]))},[t("div",ve,[n(t("input",{class:"form-control","onUpdate:modelValue":o[5]||(o[5]=a=>e.feedbackForm.name=a),id:"name",type:"text",placeholder:"Введите ваше имя...","data-sb-validations":"required",required:""},null,512),[[p,e.feedbackForm.name]]),ye,we]),t("div",ke,[n(t("input",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=a=>e.feedbackForm.email=a),id:"email",type:"email",placeholder:"name@example.com"},null,512),[[p,e.feedbackForm.email]]),Ce,Se,xe]),t("div",$e,[n(t("input",{class:"form-control","onUpdate:modelValue":o[7]||(o[7]=a=>e.feedbackForm.phone=a),id:"phone",type:"text",placeholder:"+7(123)456-78-90","data-sb-validations":"required",required:""},null,512),[[$,"+7(###)###-##-##"],[p,e.feedbackForm.phone]]),Fe,Be]),t("div",Me,[n(t("input",{class:"form-control",id:"time","onUpdate:modelValue":o[8]||(o[8]=a=>e.feedbackForm.time=a),type:"time",placeholder:"12:00"},null,512),[[p,e.feedbackForm.time]]),Te,je]),t("div",Ee,[n(t("textarea",{"onUpdate:modelValue":o[9]||(o[9]=a=>e.feedbackForm.message=a),class:"form-control",id:"message",type:"text",placeholder:"Текст вашего сообщения",style:{height:"10rem"},"data-sb-validations":"required",required:""},null,512),[[p,e.feedbackForm.message]]),Le,qe]),e.success?(i(),l("div",Ae,[Pe,De,m(" Наш менеджер свяжется с вами! ")])):c("",!0),e.error?(i(),l("div",Ie," Ошибка отправки заявки ")):c("",!0),Ve],32)])])])]),t("div",Oe,[Ne,t("div",Ue,[t("div",null,[f(E)])])])],64)}}}),Je={class:"container"},Re={components:{Carousel:D,Slide:I,Pagination:V,Navigation:O},data(){return{templates:[],load:!1,step:0,bot:null}},computed:{...S(["getCurrentBot","getCurrentCompany"]),profile(){return window.profile},isManagerVerified(){return!(!this.profile||!this.profile.manager)}},mounted(){this.loadCurrentBot(),this.setStep(localStorage.getItem("cashman_set_botpage_step_index")||0),window.addEventListener("change-current_bot-from-navbar-event",s=>{this.bot=this.getCurrentBot,localStorage.setItem("cashman_set_botform_step_index",4),localStorage.setItem("cashman_set_botpage_step_index",2),this.botSectionCallback()}),window.addEventListener("reset-current_bot-from-navbar-event",s=>{this.bot=null,this.botSectionCallback()})},methods:{openForEdit(){},duplicateAndEdit(s,e){this.templates[s].in_use=!0,this.$store.dispatch("duplicateBot",{dataObject:{bot_id:e,company_id:this.getCurrentCompany?this.getCurrentCompany.id:null}}).then(o=>{this.bot=o.data,this.load=!0,this.templates[s].in_use=!1,this.loadCurrentBot(this.bot),localStorage.setItem("cashman_set_botform_step_index",0),this.inBotFav(this.bot.id)||this.$store.dispatch("addBotToFavorites",this.bot.id),this.setStep(2),this.$nextTick(()=>{this.load=!1}),this.$notify("Указанный бот успешно продублирован")})},loadTemplates(){this.$store.dispatch("loadTemplates").then(s=>{this.templates=s.data})},setStep(s){this.step=parseInt(s),localStorage.setItem("cashman_set_botpage_step_index",s)},loadCurrentBot(s=null){this.$store.dispatch("updateCurrentBot",{bot:s}).then(()=>{this.bot=this.getCurrentBot})},botSectionCallback(){this.load=!0,this.$nextTick(()=>{this.load=!1})},botListCallback(s){this.load=!0,this.setStep(2),this.loadCurrentBot(s),this.$nextTick(()=>{this.load=!1})}}},ms=Object.assign(Re,{__name:"DevPage",props:{botUser:{type:String}},setup(s){const e=s;return window.profile=e.botUser,(o,d)=>(i(),_(He,null,{default:x(()=>[t("div",Je,[o.bot&&!o.load?(i(),_(P,{key:0,onCallback:o.botSectionCallback,bot:o.bot},null,8,["onCallback","bot"])):c("",!0),!o.load&&o.bot===null?(i(),_(q,{key:1,bot:o.bot,onCallback:o.loadCurrentBot},null,8,["bot","onCallback"])):c("",!0)])]),_:1}))}});export{ms as default};
